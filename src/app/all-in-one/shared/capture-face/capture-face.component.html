<app-aio-back-and-stepper [currentStep]="1"></app-aio-back-and-stepper>
<section>
  <div class="pb-5 text-center">
    <ng-container *ngIf="!captured">
      <h3 class="animate__animated animate__fadeIn">
        Quý khách vui lòng đặt khuôn mặt vào trong hình tròn
      </h3>
    </ng-container>
    <ng-container *ngIf="!isLoadingCountDown && captured">
      <h3 class="animate__animated animate__fadeIn">
        Quý khách vui lòng kiểm tra lại ảnh đã chụp
      </h3>
    </ng-container>
    <ng-container *ngIf="isOutSide">
      <h5 class="animate__animated animate__fadeIn font-weight-light mt-4">
        Chưa xác định được khuôn mặt của Quý khách
      </h5>
    </ng-container>
  </div>
  <div class="text-center capture-box">
    <div class="video-container text-center" [ngClass]="{ 'o-0': captured }">
      <video #video [width]="WIDTH" [height]="HEIGHT" autoplay muted></video>
      <div #canvas></div>
    </div>
    <div
      class="countdown"
      *ngIf="countDownTime > 0"
      [ngClass]="{ 'o-1': !isReadyDetect, 'o-05': isReadyDetect }"
    >
      <div class="countdown-text" *ngIf="!isReadyDetect">
        <ng-container> <i class="fa-solid fa-spinner fa-spin"></i> </ng-container>
      </div>
      <div class="countdown-text">
        <ng-container *ngIf="!isLoadingCountDown">
          {{ countDownTime }}
        </ng-container>
      </div>
    </div>
    <div class="face-load">
      <div>
        <img src="assets/all-in-one/shared/img/overlay.png" alt="" />
      </div>
    </div>
    <div class="face-load">
      <div class="position-relative">
        <div class="face-load-animate">
          <ng-lottie [options]="faceLoad"></ng-lottie>
        </div>
      </div>
    </div>
    <div class="captured-img" *ngIf="captured">
      <img
        [src]="captured"
        class="img img-fluid animate__animated animate__pulse"
        alt=""
      />
    </div>
  </div>
  <div class="text-center py-3" *ngIf="captured">
    <button class="btn btn-back mx-2" (click)="reCapture()">Chụp lại</button>
    <button class="btn btn-next mx-2" (click)="next()">Tiếp tục</button>
  </div>
</section>
