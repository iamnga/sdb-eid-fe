(self.webpackChunksdb_eid_fe=self.webpackChunksdb_eid_fe||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},4133:(t,e)=>{"use strict";var n=function(){function t(){}return t.UUID=function(){if("undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.getRandomValues){var t=new Uint16Array(8);return window.crypto.getRandomValues(t),this.pad4(t[0])+this.pad4(t[1])+"-"+this.pad4(t[2])+"-"+this.pad4(t[3])+"-"+this.pad4(t[4])+"-"+this.pad4(t[5])+this.pad4(t[6])+this.pad4(t[7])}return this.random4()+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+this.random4()+this.random4()},t.pad4=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e},t.random4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},t}();e.h=n},6434:(t,e)=>{"use strict";e.byteLength=function(t){var e=u(t),n=e[1];return 3*(e[0]+n)/4-n},e.toByteArray=function(t){var e,n,s=u(t),o=s[0],a=s[1],c=new i(function(t,e,n){return 3*(e+n)/4-n}(0,o,a)),l=0,h=a>0?o-4:o;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[l++]=255&e),1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,s=[],o=16383,a=0,u=r-i;a<u;a+=o)s.push(c(t,a,a+o>u?u:a+o));return 1===i?s.push(n[(e=t[r-1])>>2]+n[e<<4&63]+"=="):2===i&&s.push(n[(e=(t[r-2]<<8)+t[r-1])>>10]+n[e>>4&63]+n[e<<2&63]+"="),s.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)n[o]=s[o],r[s.charCodeAt(o)]=o;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,r){for(var i,s=[],o=e;o<r;o+=3)s.push(n[(i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},5611:(t,e,n)=>{"use strict";var r=n(9152);function i(t,e){return void 0===e&&(e="utf8"),Buffer.isBuffer(t)?o(t.toString("base64")):o(Buffer.from(t,e).toString("base64"))}function s(t){return t=t.toString(),r.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function o(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var a=i;a.encode=i,a.decode=function(t,e){return void 0===e&&(e="utf8"),Buffer.from(s(t),"base64").toString(e)},a.toBase64=s,a.fromBase64=o,a.toBuffer=function(t){return Buffer.from(s(t),"base64")},e.default=a},9152:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.length,n=e%4;if(!n)return t;var r=e,i=4-n,s=Buffer.alloc(e+i);for(s.write(t);i--;)s.write("=",r++);return s.toString()}},7092:(t,e,n)=>{t.exports=n(5611).default,t.exports.default=t.exports},7832:function(t,e,n){var r;t.exports=(r=n(1823),n(8341),n(916),n(4369),n(8822),function(){var t=r,e=t.lib.BlockCipher,n=t.algo,i=[],s=[],o=[],a=[],u=[],c=[],l=[],h=[],p=[],f=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var d=r^r<<1^r<<2^r<<3^r<<4;i[n]=d=d>>>8^255&d^99,s[d]=n;var m,g=t[n],v=t[g],y=t[v];o[n]=(m=257*t[d]^16843008*d)<<24|m>>>8,a[n]=m<<16|m>>>16,u[n]=m<<8|m>>>24,c[n]=m,l[d]=(m=16843009*y^65537*v^257*g^16843008*n)<<24|m>>>8,h[d]=m<<16|m>>>16,p[d]=m<<8|m>>>24,f[d]=m,n?(n=g^t[t[t[y^g]]],r^=t[t[r]]):n=r=1}}();var d=[0,1,2,4,8,16,32,64,128,27,54],m=n.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),s=this._keySchedule=[],o=0;o<r;o++)o<n?s[o]=e[o]:(c=s[o-1],o%n?n>6&&o%n==4&&(c=i[c>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c]):(c=i[(c=c<<8|c>>>24)>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c],c^=d[o/n|0]<<24),s[o]=s[o-n]^c);for(var a=this._invKeySchedule=[],u=0;u<r;u++){if(o=r-u,u%4)var c=s[o];else c=s[o-4];a[u]=u<4||o<=4?c:l[i[c>>>24]]^h[i[c>>>16&255]]^p[i[c>>>8&255]]^f[i[255&c]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,o,a,u,c,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,l,h,p,f,s),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,s,o,a){for(var u=this._nRounds,c=t[e]^n[0],l=t[e+1]^n[1],h=t[e+2]^n[2],p=t[e+3]^n[3],f=4,d=1;d<u;d++){var m=r[c>>>24]^i[l>>>16&255]^s[h>>>8&255]^o[255&p]^n[f++],g=r[l>>>24]^i[h>>>16&255]^s[p>>>8&255]^o[255&c]^n[f++],v=r[h>>>24]^i[p>>>16&255]^s[c>>>8&255]^o[255&l]^n[f++],y=r[p>>>24]^i[c>>>16&255]^s[l>>>8&255]^o[255&h]^n[f++];c=m,l=g,h=v,p=y}m=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&p])^n[f++],g=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[p>>>8&255]<<8|a[255&c])^n[f++],v=(a[h>>>24]<<24|a[p>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[f++],y=(a[p>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[f++],t[e]=m,t[e+1]=g,t[e+2]=v,t[e+3]=y},keySize:8});t.AES=e._createHelper(m)}(),r.AES)},8822:function(t,e,n){var r,i,s,o,a,u,c,l,h,p,f,d,m,g,v,y,b,w;t.exports=(r=n(1823),n(4369),void(r.lib.Cipher||(i=r,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,c=i.enc.Base64,l=i.algo.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?w:y}return function(e){return{encrypt:function(n,r,i){return t(r).encrypt(e,n,r,i)},decrypt:function(n,r,i){return t(r).decrypt(e,n,r,i)}}}}()}),s.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),p=i.mode={},f=s.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),d=p.CBC=function(){var t=f.extend();function e(t,e,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var s=0;s<n;s++)t[e+s]^=r[s]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,s=t.slice(n,n+i);r.decryptBlock(t,n),e.call(this,t,n,i),this._prevBlock=s}}),t}(),m=(i.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,i=r<<24|r<<16|r<<8|r,s=[],o=0;o<r;o+=4)s.push(i);var u=a.create(s,r);t.concat(u)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:d,padding:m}),reset:function(){var t;h.reset.call(this);var e=this.cfg,n=e.iv,r=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=r.createEncryptor:(t=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,n&&n.words):(this._mode=t.call(r,this,n&&n.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),g=s.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),v=(i.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(e):e).toString(c)},parse:function(t){var e,n=c.parse(t),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(e=a.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:e})}},y=s.SerializableCipher=o.extend({cfg:o.extend({format:v}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r),s=i.finalize(e),o=i.cfg;return g.create({ciphertext:s,key:n,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),b=(i.kdf={}).OpenSSL={execute:function(t,e,n,r){r||(r=a.random(8));var i=l.create({keySize:e+n}).compute(t,r),s=a.create(i.words.slice(e),4*n);return i.sigBytes=4*e,g.create({key:i,iv:s,salt:r})}},w=s.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:b}),encrypt:function(t,e,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize);r.iv=i.iv;var s=y.encrypt.call(this,t,e,i.key,r);return s.mixIn(i),s},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var i=r.kdf.execute(n,t.keySize,t.ivSize,e.salt);return r.iv=i.iv,y.decrypt.call(this,t,e,i.key,r)}}))))},1823:function(t,e,n){var r;t.exports=r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r)try{r=n(2480)}catch(g){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),o={},a=o.lib={},u=a.Base={extend:function(t){var e=s(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=u.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var s=0;s<i;s++)e[r+s>>>2]|=(n[s>>>2]>>>24-s%4*8&255)<<24-(r+s)%4*8;else for(var o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new c.init(e,t)}}),l=o.enc={},h=l.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var s=e[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new c.init(n,e/2)}},p=l.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new c.init(n,e)}},f=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(p.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return p.parse(unescape(encodeURIComponent(t)))}},d=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,i=r.words,s=r.sigBytes,o=this.blockSize,a=s/(4*o),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,l=t.min(4*u,s);if(u){for(var h=0;h<u;h+=o)this._doProcessBlock(i,h);n=i.splice(0,u),r.sigBytes-=l}return new c.init(n,l)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),m=(a.Hasher=d.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new m.HMAC.init(t,n).finalize(e)}}}),o.algo={});return o}(Math)},8341:function(t,e,n){var r,i;t.exports=(r=n(1823),i=r.lib.WordArray,r.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],s=0;s<n;s+=3)for(var o=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<n;a++)i.push(r.charAt(o>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var s=0;s<n.length;s++)r[n.charCodeAt(s)]=s}var o=n.charAt(64);if(o){var a=t.indexOf(o);-1!==a&&(e=a)}return function(t,e,n){for(var r=[],s=0,o=0;o<e;o++)if(o%4){var a=n[t.charCodeAt(o-1)]<<o%4*2,u=n[t.charCodeAt(o)]>>>6-o%4*2;r[s>>>2]|=(a|u)<<24-s%4*8,s++}return i.create(r,s)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},9237:function(t,e,n){var r,i;t.exports=(r=n(1823),i=r.lib.WordArray,r.enc.Base64url={stringify:function(t,e=!0){var n=t.words,r=t.sigBytes,i=e?this._safe_map:this._map;t.clamp();for(var s=[],o=0;o<r;o+=3)for(var a=(n[o>>>2]>>>24-o%4*8&255)<<16|(n[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|n[o+2>>>2]>>>24-(o+2)%4*8&255,u=0;u<4&&o+.75*u<r;u++)s.push(i.charAt(a>>>6*(3-u)&63));var c=i.charAt(64);if(c)for(;s.length%4;)s.push(c);return s.join("")},parse:function(t,e=!0){var n=t.length,r=e?this._safe_map:this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var o=0;o<r.length;o++)s[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var u=t.indexOf(a);-1!==u&&(n=u)}return function(t,e,n){for(var r=[],s=0,o=0;o<e;o++)if(o%4){var a=n[t.charCodeAt(o-1)]<<o%4*2,u=n[t.charCodeAt(o)]>>>6-o%4*2;r[s>>>2]|=(a|u)<<24-s%4*8,s++}return i.create(r,s)}(t,n,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},r.enc.Base64url)},4153:function(t,e,n){var r;t.exports=(r=n(1823),function(){var t=r.lib.WordArray,e=r.enc;function n(t){return t<<8&4278255360|t>>>8&16711935}e.Utf16=e.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i+=2)r.push(String.fromCharCode(e[i>>>2]>>>16-i%4*8&65535));return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(r,2*n)}},e.Utf16LE={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],s=0;s<r;s+=2){var o=n(e[s>>>2]>>>16-s%4*8&65535);i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var r=e.length,i=[],s=0;s<r;s++)i[s>>>1]|=n(e.charCodeAt(s)<<16-s%2*16);return t.create(i,2*r)}}}(),r.enc.Utf16)},4369:function(t,e,n){var r,i,s,o,a,u,c;t.exports=(c=n(1823),n(6496),n(3331),o=(i=(r=c).lib).WordArray,u=(a=r.algo).EvpKDF=(s=i.Base).extend({cfg:s.extend({keySize:4,hasher:a.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n,r=this.cfg,i=r.hasher.create(),s=o.create(),a=s.words,u=r.keySize,c=r.iterations;a.length<u;){n&&i.update(n),n=i.update(t).finalize(e),i.reset();for(var l=1;l<c;l++)n=i.finalize(n),i.reset();s.concat(n)}return s.sigBytes=4*u,s}}),r.EvpKDF=function(t,e,n){return u.create(n).compute(t,e)},c.EvpKDF)},5383:function(t,e,n){var r,i,s;t.exports=(s=n(1823),n(8822),r=s.lib.CipherParams,i=s.enc.Hex,s.format.Hex={stringify:function(t){return t.ciphertext.toString(i)},parse:function(t){var e=i.parse(t);return r.create({ciphertext:e})}},s.format.Hex)},3331:function(t,e,n){var r,i;t.exports=(r=n(1823),i=r.enc.Utf8,void(r.algo.HMAC=r.lib.Base.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=i.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var s=this._oKey=e.clone(),o=this._iKey=e.clone(),a=s.words,u=o.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))},2527:function(t,e,n){var r;t.exports=(r=n(1823),n(4615),n(4194),n(4153),n(8341),n(9237),n(916),n(6496),n(6946),n(6538),n(1206),n(7098),n(2633),n(5508),n(3331),n(3096),n(4369),n(8822),n(8915),n(9913),n(1981),n(7163),n(6447),n(3199),n(9049),n(2812),n(5355),n(1247),n(5383),n(7832),n(4994),n(1093),n(7076),n(5625),r)},4194:function(t,e,n){var r;t.exports=(r=n(1823),function(){if("function"==typeof ArrayBuffer){var t=r.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=t[i]<<24-i%4*8;e.call(this,r,n)}else e.apply(this,arguments)}).prototype=t}}(),r.lib.WordArray)},916:function(t,e,n){var r;t.exports=(r=n(1823),function(t){var e=r,n=e.lib,i=n.WordArray,s=n.Hasher,o=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var u=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s=this._hash.words,o=t[e+0],u=t[e+1],f=t[e+2],d=t[e+3],m=t[e+4],g=t[e+5],v=t[e+6],y=t[e+7],b=t[e+8],w=t[e+9],x=t[e+10],E=t[e+11],_=t[e+12],S=t[e+13],C=t[e+14],A=t[e+15],I=s[0],T=s[1],k=s[2],P=s[3];I=c(I,T,k,P,o,7,a[0]),P=c(P,I,T,k,u,12,a[1]),k=c(k,P,I,T,f,17,a[2]),T=c(T,k,P,I,d,22,a[3]),I=c(I,T,k,P,m,7,a[4]),P=c(P,I,T,k,g,12,a[5]),k=c(k,P,I,T,v,17,a[6]),T=c(T,k,P,I,y,22,a[7]),I=c(I,T,k,P,b,7,a[8]),P=c(P,I,T,k,w,12,a[9]),k=c(k,P,I,T,x,17,a[10]),T=c(T,k,P,I,E,22,a[11]),I=c(I,T,k,P,_,7,a[12]),P=c(P,I,T,k,S,12,a[13]),k=c(k,P,I,T,C,17,a[14]),I=l(I,T=c(T,k,P,I,A,22,a[15]),k,P,u,5,a[16]),P=l(P,I,T,k,v,9,a[17]),k=l(k,P,I,T,E,14,a[18]),T=l(T,k,P,I,o,20,a[19]),I=l(I,T,k,P,g,5,a[20]),P=l(P,I,T,k,x,9,a[21]),k=l(k,P,I,T,A,14,a[22]),T=l(T,k,P,I,m,20,a[23]),I=l(I,T,k,P,w,5,a[24]),P=l(P,I,T,k,C,9,a[25]),k=l(k,P,I,T,d,14,a[26]),T=l(T,k,P,I,b,20,a[27]),I=l(I,T,k,P,S,5,a[28]),P=l(P,I,T,k,f,9,a[29]),k=l(k,P,I,T,y,14,a[30]),I=h(I,T=l(T,k,P,I,_,20,a[31]),k,P,g,4,a[32]),P=h(P,I,T,k,b,11,a[33]),k=h(k,P,I,T,E,16,a[34]),T=h(T,k,P,I,C,23,a[35]),I=h(I,T,k,P,u,4,a[36]),P=h(P,I,T,k,m,11,a[37]),k=h(k,P,I,T,y,16,a[38]),T=h(T,k,P,I,x,23,a[39]),I=h(I,T,k,P,S,4,a[40]),P=h(P,I,T,k,o,11,a[41]),k=h(k,P,I,T,d,16,a[42]),T=h(T,k,P,I,v,23,a[43]),I=h(I,T,k,P,w,4,a[44]),P=h(P,I,T,k,_,11,a[45]),k=h(k,P,I,T,A,16,a[46]),I=p(I,T=h(T,k,P,I,f,23,a[47]),k,P,o,6,a[48]),P=p(P,I,T,k,y,10,a[49]),k=p(k,P,I,T,C,15,a[50]),T=p(T,k,P,I,g,21,a[51]),I=p(I,T,k,P,_,6,a[52]),P=p(P,I,T,k,d,10,a[53]),k=p(k,P,I,T,x,15,a[54]),T=p(T,k,P,I,u,21,a[55]),I=p(I,T,k,P,b,6,a[56]),P=p(P,I,T,k,A,10,a[57]),k=p(k,P,I,T,v,15,a[58]),T=p(T,k,P,I,S,21,a[59]),I=p(I,T,k,P,m,6,a[60]),P=p(P,I,T,k,E,10,a[61]),k=p(k,P,I,T,f,15,a[62]),T=p(T,k,P,I,w,21,a[63]),s[0]=s[0]+I|0,s[1]=s[1]+T|0,s[2]=s[2]+k|0,s[3]=s[3]+P|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var s=t.floor(r/4294967296),o=r;n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,i,s,o){var a=t+(e&n|~e&r)+i+o;return(a<<s|a>>>32-s)+e}function l(t,e,n,r,i,s,o){var a=t+(e&r|n&~r)+i+o;return(a<<s|a>>>32-s)+e}function h(t,e,n,r,i,s,o){var a=t+(e^n^r)+i+o;return(a<<s|a>>>32-s)+e}function p(t,e,n,r,i,s,o){var a=t+(n^(e|~r))+i+o;return(a<<s|a>>>32-s)+e}e.MD5=s._createHelper(u),e.HmacMD5=s._createHmacHelper(u)}(Math),r.MD5)},8915:function(t,e,n){var r;t.exports=(r=n(1823),n(8822),r.mode.CFB=function(){var t=r.lib.BlockCipherMode.extend();function e(t,e,n,r){var i,s=this._iv;s?(i=s.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var o=0;o<n;o++)t[e+o]^=i[o]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i,r),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,s=t.slice(n,n+i);e.call(this,t,n,i,r),this._prevBlock=s}}),t}(),r.mode.CFB)},1981:function(t,e,n){var r;t.exports=(r=n(1823),n(8822),r.mode.CTRGladman=function(){var t=r.lib.BlockCipherMode.extend();function e(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}var n=t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,s=this._iv,o=this._counter;s&&(o=this._counter=s.slice(0),this._iv=void 0),function(t){0===(t[0]=e(t[0]))&&(t[1]=e(t[1]))}(o);var a=o.slice(0);r.encryptBlock(a,0);for(var u=0;u<i;u++)t[n+u]^=a[u]}});return t.Decryptor=n,t}(),r.mode.CTRGladman)},9913:function(t,e,n){var r,i,s;t.exports=(s=n(1823),n(8822),s.mode.CTR=(i=(r=s.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,s=this._counter;i&&(s=this._counter=i.slice(0),this._iv=void 0);var o=s.slice(0);n.encryptBlock(o,0),s[r-1]=s[r-1]+1|0;for(var a=0;a<r;a++)t[e+a]^=o[a]}}),r.Decryptor=i,r),s.mode.CTR)},6447:function(t,e,n){var r,i;t.exports=(i=n(1823),n(8822),i.mode.ECB=((r=i.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),r.Decryptor=r.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),r),i.mode.ECB)},7163:function(t,e,n){var r,i,s;t.exports=(s=n(1823),n(8822),s.mode.OFB=(i=(r=s.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,s=this._keystream;i&&(s=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(s,0);for(var o=0;o<r;o++)t[e+o]^=s[o]}}),r.Decryptor=i,r),s.mode.OFB)},3199:function(t,e,n){var r;t.exports=(r=n(1823),n(8822),r.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,r=4*e,i=r-n%r,s=n+i-1;t.clamp(),t.words[s>>>2]|=i<<24-s%4*8,t.sigBytes+=i},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.pad.Ansix923)},9049:function(t,e,n){var r;t.exports=(r=n(1823),n(8822),r.pad.Iso10126={pad:function(t,e){var n=4*e,i=n-t.sigBytes%n;t.concat(r.lib.WordArray.random(i-1)).concat(r.lib.WordArray.create([i<<24],1))},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.pad.Iso10126)},2812:function(t,e,n){var r;t.exports=(r=n(1823),n(8822),r.pad.Iso97971={pad:function(t,e){t.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(t,e)},unpad:function(t){r.pad.ZeroPadding.unpad(t),t.sigBytes--}},r.pad.Iso97971)},1247:function(t,e,n){var r;t.exports=(r=n(1823),n(8822),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},5355:function(t,e,n){var r;t.exports=(r=n(1823),n(8822),r.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){var e=t.words,n=t.sigBytes-1;for(n=t.sigBytes-1;n>=0;n--)if(e[n>>>2]>>>24-n%4*8&255){t.sigBytes=n+1;break}}},r.pad.ZeroPadding)},3096:function(t,e,n){var r,i,s,o,a,u,c,l;t.exports=(l=n(1823),n(6496),n(3331),o=(i=(r=l).lib).WordArray,u=(a=r.algo).HMAC,c=a.PBKDF2=(s=i.Base).extend({cfg:s.extend({keySize:4,hasher:a.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=u.create(n.hasher,t),i=o.create(),s=o.create([1]),a=i.words,c=s.words,l=n.keySize,h=n.iterations;a.length<l;){var p=r.update(e).finalize(s);r.reset();for(var f=p.words,d=f.length,m=p,g=1;g<h;g++){m=r.finalize(m),r.reset();for(var v=m.words,y=0;y<d;y++)f[y]^=v[y]}i.concat(p),c[0]++}return i.sigBytes=4*l,i}}),r.PBKDF2=function(t,e,n){return c.create(n).compute(t,e)},l.PBKDF2)},5625:function(t,e,n){var r;t.exports=(r=n(1823),n(8341),n(916),n(4369),n(8822),function(){var t=r,e=t.lib.StreamCipher,n=[],i=[],s=[],o=t.algo.RabbitLegacy=e.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)a.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(e){var s=e.words,o=s[0],u=s[1],c=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,p=l<<16|65535&c;for(r[0]^=c,r[1]^=h,r[2]^=l,r[3]^=p,r[4]^=c,r[5]^=h,r[6]^=l,r[7]^=p,i=0;i<4;i++)a.call(this)}},_doProcessBlock:function(t,e){var r=this._X;a.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),t[e+i]^=n[i]},blockSize:4,ivSize:2});function a(){for(var t=this._X,e=this._C,n=0;n<8;n++)i[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0,this._b=e[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],o=65535&r,a=r>>>16;s[n]=((o*o>>>17)+o*a>>>15)+a*a^((4294901760&r)*r|0)+((65535&r)*r|0)}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=e._createHelper(o)}(),r.RabbitLegacy)},7076:function(t,e,n){var r;t.exports=(r=n(1823),n(8341),n(916),n(4369),n(8822),function(){var t=r,e=t.lib.StreamCipher,n=[],i=[],s=[],o=t.algo.Rabbit=e.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,n=0;n<4;n++)t[n]=16711935&(t[n]<<8|t[n]>>>24)|4278255360&(t[n]<<24|t[n]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,n=0;n<4;n++)a.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(e){var s=e.words,o=s[0],u=s[1],c=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,p=l<<16|65535&c;for(i[0]^=c,i[1]^=h,i[2]^=l,i[3]^=p,i[4]^=c,i[5]^=h,i[6]^=l,i[7]^=p,n=0;n<4;n++)a.call(this)}},_doProcessBlock:function(t,e){var r=this._X;a.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),t[e+i]^=n[i]},blockSize:4,ivSize:2});function a(){for(var t=this._X,e=this._C,n=0;n<8;n++)i[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0,this._b=e[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],o=65535&r,a=r>>>16;s[n]=((o*o>>>17)+o*a>>>15)+a*a^((4294901760&r)*r|0)+((65535&r)*r|0)}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=e._createHelper(o)}(),r.Rabbit)},1093:function(t,e,n){var r;t.exports=(r=n(1823),n(8341),n(916),n(4369),n(8822),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=n.RC4=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var s=0;i<256;i++){var o=i%n,a=r[i];r[i]=r[s=(s+r[i]+(e[o>>>2]>>>24-o%4*8&255))%256],r[s]=a}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=s.call(this)},keySize:8,ivSize:0});function s(){for(var t=this._S,e=this._i,n=this._j,r=0,i=0;i<4;i++){var s=t[e=(e+1)%256];t[e]=t[n=(n+t[e])%256],t[n]=s,r|=t[(t[e]+t[n])%256]<<24-8*i}return this._i=e,this._j=n,r}t.RC4=e._createHelper(i);var o=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)s.call(this)}});t.RC4Drop=e._createHelper(o)}(),r.RC4)},5508:function(t,e,n){var r;t.exports=(r=n(1823),function(t){var e=r,n=e.lib,i=n.WordArray,s=n.Hasher,o=e.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=i.create([0,1518500249,1859775393,2400959708,2840853838]),p=i.create([1352829926,1548603684,1836072691,2053994217,0]),f=o.RIPEMD160=s.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s,o,f,w,x,E,_,S,C,A,I,T=this._hash.words,k=h.words,P=p.words,R=a.words,D=u.words,F=c.words,B=l.words;for(E=s=T[0],_=o=T[1],S=f=T[2],C=w=T[3],A=x=T[4],n=0;n<80;n+=1)I=s+t[e+R[n]]|0,I+=n<16?d(o,f,w)+k[0]:n<32?m(o,f,w)+k[1]:n<48?g(o,f,w)+k[2]:n<64?v(o,f,w)+k[3]:y(o,f,w)+k[4],I=(I=b(I|=0,F[n]))+x|0,s=x,x=w,w=b(f,10),f=o,o=I,I=E+t[e+D[n]]|0,I+=n<16?y(_,S,C)+P[0]:n<32?v(_,S,C)+P[1]:n<48?g(_,S,C)+P[2]:n<64?m(_,S,C)+P[3]:d(_,S,C)+P[4],I=(I=b(I|=0,B[n]))+A|0,E=A,A=C,C=b(S,10),S=_,_=I;I=T[1]+f+C|0,T[1]=T[2]+w+A|0,T[2]=T[3]+x+E|0,T[3]=T[4]+s+_|0,T[4]=T[0]+o+S|0,T[0]=I},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,s=i.words,o=0;o<5;o++){var a=s[o];s[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});function d(t,e,n){return t^e^n}function m(t,e,n){return t&e|~t&n}function g(t,e,n){return(t|~e)^n}function v(t,e,n){return t&n|e&~n}function y(t,e,n){return t^(e|~n)}function b(t,e){return t<<e|t>>>32-e}e.RIPEMD160=s._createHelper(f),e.HmacRIPEMD160=s._createHmacHelper(f)}(Math),r.RIPEMD160)},6496:function(t,e,n){var r,i,s,o,a,u,c;t.exports=(c=n(1823),s=(i=(r=c).lib).WordArray,a=[],u=r.algo.SHA1=(o=i.Hasher).extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],u=n[4],c=0;c<80;c++){if(c<16)a[c]=0|t[e+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}var h=(r<<5|r>>>27)+u+a[c];h+=c<20?1518500249+(i&s|~i&o):c<40?1859775393+(i^s^o):c<60?(i&s|i&o|s&o)-1894007588:(i^s^o)-899497514,u=o,o=s,s=i<<30|i>>>2,i=r,r=h}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}}),r.SHA1=o._createHelper(u),r.HmacSHA1=o._createHmacHelper(u),c.SHA1)},6538:function(t,e,n){var r,i,s,o,a,u;t.exports=(u=n(1823),n(6946),i=(r=u).lib.WordArray,a=(s=r.algo).SHA224=(o=s.SHA256).extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=o._doFinalize.call(this);return t.sigBytes-=4,t}}),r.SHA224=o._createHelper(a),r.HmacSHA224=o._createHmacHelper(a),u.SHA224)},6946:function(t,e,n){var r;t.exports=(r=n(1823),function(t){var e=r,n=e.lib,i=n.WordArray,s=n.Hasher,o=e.algo,a=[],u=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(a[i]=n(t.pow(r,.5))),u[i]=n(t.pow(r,1/3)),i++),r++}();var c=[],l=o.SHA256=s.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],h=n[6],p=n[7],f=0;f<64;f++){if(f<16)c[f]=0|t[e+f];else{var d=c[f-15],m=c[f-2];c[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+c[f-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+c[f-16]}var g=r&i^r&s^i&s,v=p+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&h)+u[f]+c[f];p=h,h=l,l=a,a=o+v|0,o=s,s=i,i=r,r=v+(((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+g)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+h|0,n[7]=n[7]+p|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=s._createHelper(l),e.HmacSHA256=s._createHmacHelper(l)}(Math),r.SHA256)},2633:function(t,e,n){var r;t.exports=(r=n(1823),n(4615),function(t){var e=r,n=e.lib,i=n.WordArray,s=n.Hasher,o=e.x64.Word,a=e.algo,u=[],c=[],l=[];!function(){for(var t=1,e=0,n=0;n<24;n++){u[t+5*e]=(n+1)*(n+2)/2%64;var r=(2*t+3*e)%5;t=e%5,e=r}for(t=0;t<5;t++)for(e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,s=0;s<24;s++){for(var a=0,h=0,p=0;p<7;p++){if(1&i){var f=(1<<p)-1;f<32?h^=1<<f:a^=1<<f-32}128&i?i=i<<1^113:i<<=1}l[s]=o.create(a,h)}}();var h=[];!function(){for(var t=0;t<25;t++)h[t]=o.create()}();var p=a.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var s=t[e+2*i],o=t[e+2*i+1];s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(R=n[i]).high^=o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),R.low^=s}for(var a=0;a<24;a++){for(var p=0;p<5;p++){for(var f=0,d=0,m=0;m<5;m++)f^=(R=n[p+5*m]).high,d^=R.low;var g=h[p];g.high=f,g.low=d}for(p=0;p<5;p++){var v=h[(p+4)%5],y=h[(p+1)%5],b=y.high,w=y.low;for(f=v.high^(b<<1|w>>>31),d=v.low^(w<<1|b>>>31),m=0;m<5;m++)(R=n[p+5*m]).high^=f,R.low^=d}for(var x=1;x<25;x++){var E=(R=n[x]).high,_=R.low,S=u[x];S<32?(f=E<<S|_>>>32-S,d=_<<S|E>>>32-S):(f=_<<S-32|E>>>64-S,d=E<<S-32|_>>>64-S);var C=h[c[x]];C.high=f,C.low=d}var A=h[0],I=n[0];for(A.high=I.high,A.low=I.low,p=0;p<5;p++)for(m=0;m<5;m++){var T=h[x=p+5*m],k=h[(p+1)%5+5*m],P=h[(p+2)%5+5*m];(R=n[x]).high=T.high^~k.high&P.high,R.low=T.low^~k.low&P.low}var R,D=l[a];(R=n[0]).high^=D.high,R.low^=D.low}},_doFinalize:function(){var e=this._data,n=e.words,r=8*e.sigBytes,s=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/s)*s>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var o=this._state,a=this.cfg.outputLength/8,u=a/8,c=[],l=0;l<u;l++){var h=o[l],p=h.high,f=h.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)),c.push(p)}return new i.init(c,a)},clone:function(){for(var t=s.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});e.SHA3=s._createHelper(p),e.HmacSHA3=s._createHmacHelper(p)}(Math),r.SHA3)},7098:function(t,e,n){var r,i,s,o,a,u,c,l;t.exports=(l=n(1823),n(4615),n(1206),s=(i=(r=l).x64).Word,o=i.WordArray,c=(a=r.algo).SHA384=(u=a.SHA512).extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var t=u._doFinalize.call(this);return t.sigBytes-=16,t}}),r.SHA384=u._createHelper(c),r.HmacSHA384=u._createHmacHelper(c),l.SHA384)},1206:function(t,e,n){var r;t.exports=(r=n(1823),n(4615),function(){var t=r,e=t.lib.Hasher,n=t.x64,i=n.Word,s=n.WordArray,o=t.algo;function a(){return i.create.apply(i,arguments)}var u=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],c=[];!function(){for(var t=0;t<80;t++)c[t]=a()}();var l=o.SHA512=e.extend({_doReset:function(){this._hash=new s.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],h=n[6],p=n[7],f=r.high,d=r.low,m=i.high,g=i.low,v=s.high,y=s.low,b=o.high,w=o.low,x=a.high,E=a.low,_=l.high,S=l.low,C=h.high,A=h.low,I=p.high,T=p.low,k=f,P=d,R=m,D=g,F=v,B=y,O=b,N=w,M=x,L=E,V=_,j=S,U=C,H=A,z=I,K=T,q=0;q<80;q++){var W,G,$=c[q];if(q<16)G=$.high=0|t[e+2*q],W=$.low=0|t[e+2*q+1];else{var X=c[q-15],Q=X.high,Y=X.low,Z=(Y>>>1|Q<<31)^(Y>>>8|Q<<24)^(Y>>>7|Q<<25),J=c[q-2],tt=J.high,et=J.low,nt=(et>>>19|tt<<13)^(et<<3|tt>>>29)^(et>>>6|tt<<26),rt=c[q-7],it=c[q-16],st=it.low;$.high=G=(G=(G=((Q>>>1|Y<<31)^(Q>>>8|Y<<24)^Q>>>7)+rt.high+((W=Z+rt.low)>>>0<Z>>>0?1:0))+((tt>>>19|et<<13)^(tt<<3|et>>>29)^tt>>>6)+((W+=nt)>>>0<nt>>>0?1:0))+it.high+((W+=st)>>>0<st>>>0?1:0),$.low=W}var ot,at=M&V^~M&U,ut=L&j^~L&H,ct=k&R^k&F^R&F,lt=(P>>>28|k<<4)^(P<<30|k>>>2)^(P<<25|k>>>7),ht=u[q],pt=ht.low,ft=z+((M>>>14|L<<18)^(M>>>18|L<<14)^(M<<23|L>>>9))+((ot=K+((L>>>14|M<<18)^(L>>>18|M<<14)^(L<<23|M>>>9)))>>>0<K>>>0?1:0),dt=lt+(P&D^P&B^D&B);z=U,K=H,U=V,H=j,V=M,j=L,M=O+(ft=(ft=(ft=ft+at+((ot+=ut)>>>0<ut>>>0?1:0))+ht.high+((ot+=pt)>>>0<pt>>>0?1:0))+G+((ot+=W)>>>0<W>>>0?1:0))+((L=N+ot|0)>>>0<N>>>0?1:0)|0,O=F,N=B,F=R,B=D,R=k,D=P,k=ft+(((k>>>28|P<<4)^(k<<30|P>>>2)^(k<<25|P>>>7))+ct+(dt>>>0<lt>>>0?1:0))+((P=ot+dt|0)>>>0<ot>>>0?1:0)|0}d=r.low=d+P,r.high=f+k+(d>>>0<P>>>0?1:0),g=i.low=g+D,i.high=m+R+(g>>>0<D>>>0?1:0),y=s.low=y+B,s.high=v+F+(y>>>0<B>>>0?1:0),w=o.low=w+N,o.high=b+O+(w>>>0<N>>>0?1:0),E=a.low=E+L,a.high=x+M+(E>>>0<L>>>0?1:0),S=l.low=S+j,l.high=_+V+(S>>>0<j>>>0?1:0),A=h.low=A+H,h.high=C+U+(A>>>0<H>>>0?1:0),T=p.low=T+K,p.high=I+z+(T>>>0<K>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(l),t.HmacSHA512=e._createHmacHelper(l)}(),r.SHA512)},4994:function(t,e,n){var r;t.exports=(r=n(1823),n(8341),n(916),n(4369),n(8822),function(){var t=r,e=t.lib,n=e.WordArray,i=e.BlockCipher,s=t.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;n<56;n++){var r=o[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],s=0;s<16;s++){var c=i[s]=[],l=u[s];for(n=0;n<24;n++)c[n/6|0]|=e[(a[n]-1+l)%28]<<31-n%6,c[4+(n/6|0)]|=e[28+(a[n+24]-1+l)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var h=this._invSubKeys=[];for(n=0;n<16;n++)h[n]=i[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,n){this._lBlock=t[e],this._rBlock=t[e+1],p.call(this,4,252645135),p.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),p.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],s=this._lBlock,o=this._rBlock,a=0,u=0;u<8;u++)a|=c[u][((o^i[u])&l[u])>>>0];this._lBlock=o,this._rBlock=s^a}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,p.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function f(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}t.DES=i._createHelper(h);var d=s.TripleDES=i.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e=t.slice(0,2),r=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=h.createEncryptor(n.create(e)),this._des2=h.createEncryptor(n.create(r)),this._des3=h.createEncryptor(n.create(i))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(d)}(),r.TripleDES)},4615:function(t,e,n){var r,i,s,o,a;t.exports=(r=n(1823),s=(i=r.lib).Base,o=i.WordArray,(a=r.x64={}).Word=s.extend({init:function(t,e){this.high=t,this.low=e}}),a.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var i=t[r];n.push(i.high),n.push(i.low)}return o.create(n,this.sigBytes)},clone:function(){for(var t=s.clone.call(this),e=t.words=this.words.slice(0),n=e.length,r=0;r<n;r++)e[r]=e[r].clone();return t}}),r)},8333:t=>{"use strict";var e={single_source_shortest_paths:function(t,n,r){var i={},s={};s[n]=0;var o,a,u,c,l,h,p=e.PriorityQueue.make();for(p.push(n,0);!p.empty();)for(u in c=(o=p.pop()).cost,l=t[a=o.value]||{})l.hasOwnProperty(u)&&(h=c+l[u],(void 0===s[u]||s[u]>h)&&(s[u]=h,p.push(u,h),i[u]=a));if(void 0!==r&&void 0===s[r]){var f=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(f)}return i},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e;r;)n.push(r),r=t[r];return n.reverse(),n},find_path:function(t,n,r){var i=e.single_source_shortest_paths(t,n,r);return e.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(t){var n,r=e.PriorityQueue,i={};for(n in t=t||{},r)r.hasOwnProperty(n)&&(i[n]=r[n]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){this.queue.push({value:t,cost:e}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=e},1522:t=>{"use strict";t.exports=function(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319&&n>r+1){var s=t.charCodeAt(r+1);s>=56320&&s<=57343&&(i=1024*(i-55296)+s-56320+65536,r+=1)}i<128?e.push(i):i<2048?(e.push(i>>6|192),e.push(63&i|128)):i<55296||i>=57344&&i<65536?(e.push(i>>12|224),e.push(i>>6&63|128),e.push(63&i|128)):i>=65536&&i<=1114111?(e.push(i>>18|240),e.push(i>>12&63|128),e.push(i>>6&63|128),e.push(63&i|128)):e.push(239,191,189)}return new Uint8Array(e).buffer}},3021:function(t){t.exports=function(){"use strict";function t(t){return"function"==typeof t}var e=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,r=void 0,i=void 0,s=function(t,e){p[n]=t,p[n+1]=e,2===(n+=2)&&(i?i(f):y())},o="undefined"!=typeof window?window:void 0,a=o||{},u=a.MutationObserver||a.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(f,1)}}var p=new Array(1e3);function f(){for(var t=0;t<n;t+=2)(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0;n=0}var d,m,g,v,y=void 0;function b(t,e){var n=this,r=new this.constructor(E);void 0===r[x]&&F(r);var i=n._state;if(i){var o=arguments[i-1];s(function(){return R(i,r,o,n._result)})}else k(n,r,t,e);return r}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(E);return C(e,t),e}c?y=function(){return process.nextTick(f)}:u?(m=0,g=new u(f),v=document.createTextNode(""),g.observe(v,{characterData:!0}),y=function(){v.data=m=++m%2}):l?((d=new MessageChannel).port1.onmessage=f,y=function(){return d.port2.postMessage(0)}):y=void 0===o?function(){try{var t=Function("return this")().require("vertx");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(f)}:h()}catch(e){return h()}}():h();var x=Math.random().toString(36).substring(2);function E(){}var _=void 0;function S(e,n,r){n.constructor===e.constructor&&r===b&&n.constructor.resolve===w?function(t,e){1===e._state?I(t,e._result):2===e._state?T(t,e._result):k(e,void 0,function(e){return C(t,e)},function(e){return T(t,e)})}(e,n):void 0===r?I(e,n):t(r)?function(t,e,n){s(function(t){var r=!1,i=function(n,i,s,o){try{n.call(i,function(n){r||(r=!0,e!==n?C(t,n):I(t,n))},function(e){r||(r=!0,T(t,e))})}catch(a){return a}}(n,e);!r&&i&&(r=!0,T(t,i))},t)}(e,n,r):I(e,n)}function C(t,e){if(t===e)T(t,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(r=e),null===r||"object"!==i&&"function"!==i)I(t,e);else{var n=void 0;try{n=e.then}catch(s){return void T(t,s)}S(t,e,n)}var r,i}function A(t){t._onerror&&t._onerror(t._result),P(t)}function I(t,e){t._state===_&&(t._result=e,t._state=1,0!==t._subscribers.length&&s(P,t))}function T(t,e){t._state===_&&(t._state=2,t._result=e,s(A,t))}function k(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+1]=n,i[o+2]=r,0===o&&t._state&&s(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,s=t._result,o=0;o<e.length;o+=3)i=e[o+n],(r=e[o])?R(n,r,i,s):i(s);t._subscribers.length=0}}function R(e,n,r,i){var s=t(r),o=void 0,a=void 0,u=!0;if(s){try{o=r(i)}catch(c){u=!1,a=c}if(n===o)return void T(n,new TypeError("A promises callback cannot return that same promise."))}else o=i;n._state!==_||(s&&u?C(n,o):!1===u?T(n,a):1===e?I(n,o):2===e&&T(n,o))}var D=0;function F(t){t[x]=D++,t._state=void 0,t._result=void 0,t._subscribers=[]}var B=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[x]||F(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&I(this.promise,this._result))):T(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===_&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===w){var i=void 0,s=void 0,o=!1;try{i=t.then}catch(u){o=!0,s=u}if(i===b&&t._state!==_)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===O){var a=new n(E);o?T(a,s):S(a,t,i),this._willSettleAt(a,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===_&&(this._remaining--,2===t?T(r,n):this._result[e]=n),0===this._remaining&&I(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;k(t,void 0,function(t){return n._settledAt(1,e,t)},function(t){return n._settledAt(2,e,t)})},t}(),O=function(){function e(t){this[x]=D++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){C(t,e)},function(e){T(t,e)})}catch(n){T(t,n)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):n.then(e,e)},e}();return O.prototype.then=b,O.all=function(t){return new B(this,t).promise},O.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,s=0;s<i;s++)n.resolve(t[s]).then(e,r)}):new n(function(t,e){return e(new TypeError("You must pass an array to race."))})},O.resolve=w,O.reject=function(t){var e=new this(E);return T(e,t),e},O._setScheduler=function(t){i=t},O._setAsap=function(t){s=t},O._asap=s,O.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(r){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(r){}if("[object Promise]"===n&&!e.cast)return}t.Promise=O},O.Promise=O,O}()},2658:(t,e)=>{e.read=function(t,e,n,r,i){var s,o,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+t[e+h],h+=p,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+t[e+h],h+=p,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=c}return(f?-1:1)*o*Math.pow(2,s-r)},e.write=function(t,e,n,r,i,s){var o,a,u,c=8*s-i-1,l=(1<<c)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(e*u-1)*Math.pow(2,i),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+f]=255&a,f+=d,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+f]=255&o,f+=d,o/=256,c-=8);t[n+f-d]|=128*m}},2025:(t,e)=>{var n,r,i,s,o,a,u,c,l,h,p,f={userAgent:!1},d={},m=m||(n=Math,i=(r={}).lib={},s=i.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=i.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var s=0;s<i;s++)e[r+s>>>2]|=(n[s>>>2]>>>24-s%4*8&255)<<24-(r+s)%4*8;else for(s=0;s<i;s+=4)e[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=n.ceil(e/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(4294967296*n.random()|0);return new o.init(e,t)}}),a=r.enc={},u=a.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var s=e[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new o.init(n,e/2)}},c=a.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new o.init(n,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,r=e.words,i=e.sigBytes,s=this.blockSize,a=i/(4*s),u=(a=t?n.ceil(a):n.max((0|a)-this._minBufferSize,0))*s,c=n.min(4*u,i);if(u){for(var l=0;l<u;l+=s)this._doProcessBlock(r,l);var h=r.splice(0,u);e.sigBytes-=c}return new o.init(h,c)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),i.Hasher=h.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}}),p=r.algo={},r);!function(t){var e,n=(e=m).lib,r=n.Base,i=n.WordArray;(e=e.x64={}).Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),e.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var s=t[r];n.push(s.high),n.push(s.low)}return i.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,i=0;i<n;i++)e[i]=e[i].clone();return t}})}(),m.lib.Cipher||function(t){var e=(f=m).lib,n=e.Base,r=e.WordArray,i=e.BufferedBlockAlgorithm,s=f.enc.Base64,o=f.algo.EvpKDF,a=e.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?d:p).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?d:p).decrypt(t,e,n,r)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=f.mode={},c=function(t,e,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)t[e+i]^=r[i]},l=(e.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();l.Encryptor=l.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;c.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),l.Decryptor=l.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=t.slice(e,e+r);n.decryptBlock(t,e),c.call(this,t,e,r),this._prevBlock=i}}),u=u.CBC=l,l=(f.pad={}).Pkcs7={pad:function(t,e){for(var n,i=(n=(n=4*e)-t.sigBytes%n)<<24|n<<16|n<<8|n,s=[],o=0;o<n;o+=4)s.push(i);n=r.create(s,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:u,padding:l}),reset:function(){a.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var h=e.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),p=(u=(f.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?r.create([1398893684,1701076831]).concat(t).concat(e):e).toString(s)},parse:function(t){var e=(t=s.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var n=r.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:n})}},e.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r);return e=i.finalize(e),h.create({ciphertext:e,key:n,iv:(i=i.cfg).iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),f=(f.kdf={}).OpenSSL={execute:function(t,e,n,i){return i||(i=r.random(8)),t=o.create({keySize:e+n}).compute(t,i),n=r.create(t.words.slice(e),4*n),t.sigBytes=4*e,h.create({key:t,iv:n,salt:i})}},d=e.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:f}),encrypt:function(t,e,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,(t=p.encrypt.call(this,t,e,n.key,r)).mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,p.decrypt.call(this,t,e,n.key,r)}})}(),function(){for(var t=m,e=t.lib.BlockCipher,n=t.algo,r=[],i=[],s=[],o=[],a=[],u=[],c=[],l=[],h=[],p=[],f=[],d=0;256>d;d++)f[d]=128>d?d<<1:d<<1^283;var g=0,v=0;for(d=0;256>d;d++){var y;r[g]=y=(y=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&y^99,i[y]=g;var b=f[g],w=f[b],x=f[w],E=257*f[y]^16843008*y;s[g]=E<<24|E>>>8,o[g]=E<<16|E>>>16,a[g]=E<<8|E>>>24,u[g]=E,c[y]=(E=16843009*x^65537*w^257*b^16843008*g)<<24|E>>>8,l[y]=E<<16|E>>>16,h[y]=E<<8|E>>>24,p[y]=E,g?(g=b^f[f[f[x^b]]],v^=f[f[v]]):g=v=1}var _=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=e.extend({_doReset:function(){for(var t=(n=this._key).words,e=n.sigBytes/4,n=4*((this._nRounds=e+6)+1),i=this._keySchedule=[],s=0;s<n;s++)if(s<e)i[s]=t[s];else{var o=i[s-1];s%e?6<e&&4==s%e&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=_[s/e|0]<<24),i[s]=i[s-e]^o}for(t=this._invKeySchedule=[],e=0;e<n;e++)s=n-e,o=e%4?i[s]:i[s-4],t[e]=4>e||4>=s?o:c[r[o>>>24]]^l[r[o>>>16&255]]^h[r[o>>>8&255]]^p[r[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,o,a,u,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,c,l,h,p,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,s,o,a){for(var u=this._nRounds,c=t[e]^n[0],l=t[e+1]^n[1],h=t[e+2]^n[2],p=t[e+3]^n[3],f=4,d=1;d<u;d++){var m=r[c>>>24]^i[l>>>16&255]^s[h>>>8&255]^o[255&p]^n[f++],g=r[l>>>24]^i[h>>>16&255]^s[p>>>8&255]^o[255&c]^n[f++],v=r[h>>>24]^i[p>>>16&255]^s[c>>>8&255]^o[255&l]^n[f++];p=r[p>>>24]^i[c>>>16&255]^s[l>>>8&255]^o[255&h]^n[f++],c=m,l=g,h=v}m=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&p])^n[f++],g=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[p>>>8&255]<<8|a[255&c])^n[f++],v=(a[h>>>24]<<24|a[p>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[f++],p=(a[p>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[f++],t[e]=m,t[e+1]=g,t[e+2]=v,t[e+3]=p},keySize:8}),t.AES=e._createHelper(n)}(),function(){function t(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function e(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var n,r=m,i=(n=r.lib).WordArray,s=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=(n=n.BlockCipher).extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;56>n;n++){var r=o[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(t=this._subKeys=[],r=0;16>r;r++){var i=t[r]=[],s=u[r];for(n=0;24>n;n++)i[n/6|0]|=e[(a[n]-1+s)%28]<<31-n%6,i[4+(n/6|0)]|=e[28+(a[n+24]-1+s)%28]<<31-n%6;for(i[0]=i[0]<<1|i[0]>>>31,n=1;7>n;n++)i[n]>>>=4*(n-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(e=this._invSubKeys=[],n=0;16>n;n++)e[n]=t[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(n,r,i){this._lBlock=n[r],this._rBlock=n[r+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var s=0;16>s;s++){for(var o=i[s],a=this._lBlock,u=this._rBlock,h=0,p=0;8>p;p++)h|=c[p][((u^o[p])&l[p])>>>0];this._lBlock=u,this._rBlock=a^h}i=this._lBlock,this._lBlock=this._rBlock,this._rBlock=i,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=n._createHelper(h),s=s.TripleDES=n.extend({_doReset:function(){var t=this._key.words;this._des1=h.createEncryptor(i.create(t.slice(0,2))),this._des2=h.createEncryptor(i.create(t.slice(2,4))),this._des3=h.createEncryptor(i.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=n._createHelper(s)}(),function(){var t=m.lib.WordArray;m.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;i<n;i+=3)for(var s=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)t.push(r.charAt(s>>>6*(3-o)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(e){var n=e.length,r=this._map;(i=r.charAt(64))&&-1!=(i=e.indexOf(i))&&(n=i);for(var i=[],s=0,o=0;o<n;o++)if(o%4){var a=r.indexOf(e.charAt(o-1))<<o%4*2,u=r.indexOf(e.charAt(o))>>>6-o%4*2;i[s>>>2]|=(a|u)<<24-s%4*8,s++}return t.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,r,i,s,o){return((t=t+(e&n|~e&r)+i+o)<<s|t>>>32-s)+e}function n(t,e,n,r,i,s,o){return((t=t+(e&r|n&~r)+i+o)<<s|t>>>32-s)+e}function r(t,e,n,r,i,s,o){return((t=t+(e^n^r)+i+o)<<s|t>>>32-s)+e}function i(t,e,n,r,i,s,o){return((t=t+(n^(e|~r))+i+o)<<s|t>>>32-s)+e}for(var s=m,o=(u=s.lib).WordArray,a=u.Hasher,u=s.algo,c=[],l=0;64>l;l++)c[l]=4294967296*t.abs(t.sin(l+1))|0;u=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,s){for(var o=0;16>o;o++)t[a=s+o]=16711935&((u=t[a])<<8|u>>>24)|4278255360&(u<<24|u>>>8);var a,u=t[s+1],l=t[s+2],h=t[s+3],p=t[s+4],f=t[s+5],d=t[s+6],m=t[s+7],g=t[s+8],v=t[s+9],y=t[s+10],b=t[s+11],w=t[s+12],x=t[s+13],E=t[s+14],_=t[s+15],S=e(S=(o=this._hash.words)[0],I=o[1],A=o[2],C=o[3],a=t[s+0],7,c[0]),C=e(C,S,I,A,u,12,c[1]),A=e(A,C,S,I,l,17,c[2]),I=e(I,A,C,S,h,22,c[3]);S=e(S,I,A,C,p,7,c[4]),C=e(C,S,I,A,f,12,c[5]),A=e(A,C,S,I,d,17,c[6]),I=e(I,A,C,S,m,22,c[7]),S=e(S,I,A,C,g,7,c[8]),C=e(C,S,I,A,v,12,c[9]),A=e(A,C,S,I,y,17,c[10]),I=e(I,A,C,S,b,22,c[11]),S=e(S,I,A,C,w,7,c[12]),C=e(C,S,I,A,x,12,c[13]),A=e(A,C,S,I,E,17,c[14]),S=n(S,I=e(I,A,C,S,_,22,c[15]),A,C,u,5,c[16]),C=n(C,S,I,A,d,9,c[17]),A=n(A,C,S,I,b,14,c[18]),I=n(I,A,C,S,a,20,c[19]),S=n(S,I,A,C,f,5,c[20]),C=n(C,S,I,A,y,9,c[21]),A=n(A,C,S,I,_,14,c[22]),I=n(I,A,C,S,p,20,c[23]),S=n(S,I,A,C,v,5,c[24]),C=n(C,S,I,A,E,9,c[25]),A=n(A,C,S,I,h,14,c[26]),I=n(I,A,C,S,g,20,c[27]),S=n(S,I,A,C,x,5,c[28]),C=n(C,S,I,A,l,9,c[29]),A=n(A,C,S,I,m,14,c[30]),S=r(S,I=n(I,A,C,S,w,20,c[31]),A,C,f,4,c[32]),C=r(C,S,I,A,g,11,c[33]),A=r(A,C,S,I,b,16,c[34]),I=r(I,A,C,S,E,23,c[35]),S=r(S,I,A,C,u,4,c[36]),C=r(C,S,I,A,p,11,c[37]),A=r(A,C,S,I,m,16,c[38]),I=r(I,A,C,S,y,23,c[39]),S=r(S,I,A,C,x,4,c[40]),C=r(C,S,I,A,a,11,c[41]),A=r(A,C,S,I,h,16,c[42]),I=r(I,A,C,S,d,23,c[43]),S=r(S,I,A,C,v,4,c[44]),C=r(C,S,I,A,w,11,c[45]),A=r(A,C,S,I,_,16,c[46]),S=i(S,I=r(I,A,C,S,l,23,c[47]),A,C,a,6,c[48]),C=i(C,S,I,A,m,10,c[49]),A=i(A,C,S,I,E,15,c[50]),I=i(I,A,C,S,f,21,c[51]),S=i(S,I,A,C,w,6,c[52]),C=i(C,S,I,A,h,10,c[53]),A=i(A,C,S,I,y,15,c[54]),I=i(I,A,C,S,u,21,c[55]),S=i(S,I,A,C,g,6,c[56]),C=i(C,S,I,A,_,10,c[57]),A=i(A,C,S,I,d,15,c[58]),I=i(I,A,C,S,x,21,c[59]),S=i(S,I,A,C,p,6,c[60]),C=i(C,S,I,A,b,10,c[61]),A=i(A,C,S,I,l,15,c[62]),I=i(I,A,C,S,v,21,c[63]),o[0]=o[0]+S|0,o[1]=o[1]+I|0,o[2]=o[2]+A|0,o[3]=o[3]+C|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var s=t.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),n=(e=this._hash).words,r=0;4>r;r++)n[r]=16711935&((i=n[r])<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=a._createHelper(u),s.HmacMD5=a._createHmacHelper(u)}(Math),function(){var t=m,e=(i=t.lib).WordArray,n=i.Hasher,r=[],i=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],s=n[1],o=n[2],a=n[3],u=n[4],c=0;80>c;c++){if(16>c)r[c]=0|t[e+c];else{var l=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=l<<1|l>>>31}l=(i<<5|i>>>27)+u+r[c],l=20>c?l+(1518500249+(s&o|~s&a)):40>c?l+(1859775393+(s^o^a)):60>c?l+((s&o|s&a|o&a)-1894007588):l+((s^o^a)-899497514),u=a,a=o,o=s<<30|s>>>2,s=i,i=l}n[0]=n[0]+i|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=n._createHelper(i),t.HmacSHA1=n._createHmacHelper(i)}(),function(t){for(var e=m,n=(i=e.lib).WordArray,r=i.Hasher,i=e.algo,s=[],o=[],a=function(t){return 4294967296*(t-(0|t))|0},u=2,c=0;64>c;){var l;t:{for(var h=t.sqrt(l=u),p=2;p<=h;p++)if(!(l%p)){l=!1;break t}l=!0}l&&(8>c&&(s[c]=a(t.pow(u,.5))),o[c]=a(t.pow(u,1/3)),c++),u++}var f=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],c=n[5],l=n[6],h=n[7],p=0;64>p;p++){if(16>p)f[p]=0|t[e+p];else{var d=f[p-15],m=f[p-2];f[p]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+f[p-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+f[p-16]}d=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+o[p]+f[p],m=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),h=l,l=c,c=u,u=a+d|0,a=s,s=i,i=r,r=d+m|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA256=r._createHelper(i),e.HmacSHA256=r._createHmacHelper(i)}(Math),function(){var t=m,e=t.lib.WordArray,n=(r=t.algo).SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=n._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=n._createHelper(r),t.HmacSHA224=n._createHmacHelper(r)}(),function(){function t(){return r.create.apply(r,arguments)}for(var e=m,n=e.lib.Hasher,r=(s=e.x64).Word,i=s.WordArray,s=e.algo,o=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=t();s=s.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n,r=(n=this._hash.words)[0],i=n[1],s=n[2],u=n[3],c=n[4],l=n[5],h=n[6],p=r.high,f=r.low,d=i.high,m=i.low,g=s.high,v=s.low,y=u.high,b=u.low,w=c.high,x=c.low,E=l.high,_=l.low,S=h.high,C=h.low,A=(n=n[7]).high,I=n.low,T=p,k=f,P=d,R=m,D=g,F=v,B=y,O=b,N=w,M=x,L=E,V=_,j=S,U=C,H=A,z=I,K=0;80>K;K++){var q=a[K];if(16>K)var W=q.high=0|t[e+2*K],G=q.low=0|t[e+2*K+1];else{W=((G=(W=a[K-15]).high)>>>1|($=W.low)<<31)^(G>>>8|$<<24)^G>>>7;var $=($>>>1|G<<31)^($>>>8|G<<24)^($>>>7|G<<25),X=((G=(X=a[K-2]).high)>>>19|(Q=X.low)<<13)^(G<<3|Q>>>29)^G>>>6,Q=(Q>>>19|G<<13)^(Q<<3|G>>>29)^(Q>>>6|G<<26);q.high=W=(W=(W=W+(Y=(G=a[K-7]).high)+((G=$+G.low)>>>0<$>>>0?1:0))+X+((G+=Q)>>>0<Q>>>0?1:0))+(nt=(Z=a[K-16]).high)+((G+=Z=Z.low)>>>0<Z>>>0?1:0),q.low=G}var Y=N&L^~N&j,Z=M&V^~M&U,J=(q=T&P^T&D^P&D,k&R^k&F^R&F),tt=(Q=o[K]).high,et=Q.low,nt=H+((N>>>14|M<<18)^(N>>>18|M<<14)^(N<<23|M>>>9))+((Q=z+((M>>>14|N<<18)^(M>>>18|N<<14)^(M<<23|N>>>9)))>>>0<z>>>0?1:0);H=j,z=U,j=L,U=V,L=N,V=M,N=B+(nt=(nt=(nt=nt+Y+((Q+=Z)>>>0<Z>>>0?1:0))+tt+((Q+=et)>>>0<et>>>0?1:0))+W+((Q+=G)>>>0<G>>>0?1:0))+((M=O+Q|0)>>>0<O>>>0?1:0)|0,B=D,O=F,D=P,F=R,P=T,R=k,T=nt+(q=($=(T>>>28|k<<4)^(T<<30|k>>>2)^(T<<25|k>>>7))+q+((G=(X=(k>>>28|T<<4)^(k<<30|T>>>2)^(k<<25|T>>>7))+J)>>>0<X>>>0?1:0))+((k=Q+G|0)>>>0<Q>>>0?1:0)|0}f=r.low=f+k,r.high=p+T+(f>>>0<k>>>0?1:0),m=i.low=m+R,i.high=d+P+(m>>>0<R>>>0?1:0),v=s.low=v+F,s.high=g+D+(v>>>0<F>>>0?1:0),b=u.low=b+O,u.high=y+B+(b>>>0<O>>>0?1:0),x=c.low=x+M,c.high=w+N+(x>>>0<M>>>0?1:0),_=l.low=_+V,l.high=E+L+(_>>>0<V>>>0?1:0),C=h.low=C+U,h.high=S+j+(C>>>0<U>>>0?1:0),I=n.low=I+z,n.high=A+H+(I>>>0<z>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),e.SHA512=n._createHelper(s),e.HmacSHA512=n._createHmacHelper(s)}(),function(){var t=m,e=(i=t.x64).Word,n=i.WordArray,r=(i=t.algo).SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=r._createHelper(i),t.HmacSHA384=r._createHmacHelper(i)}(),function(){var t=m,e=(r=t.lib).WordArray,n=r.Hasher,r=t.algo,i=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=e.create([0,1518500249,1859775393,2400959708,2840853838]),c=e.create([1352829926,1548603684,1836072691,2053994217,0]);r=r.RIPEMD160=n.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;16>n;n++)t[r=e+n]=16711935&((x=t[r])<<8|x>>>24)|4278255360&(x<<24|x>>>8);var r,l,h,p,f,d,m,g,v,y,b,w,x=u.words,E=c.words,_=i.words,S=s.words,C=o.words,A=a.words;for(m=l=(r=this._hash.words)[0],g=h=r[1],v=p=r[2],y=f=r[3],b=d=r[4],n=0;80>n;n+=1)w=l+t[e+_[n]]|0,w=16>n?w+((h^p^f)+x[0]):32>n?w+((h&p|~h&f)+x[1]):48>n?w+(((h|~p)^f)+x[2]):64>n?w+((h&f|p&~f)+x[3]):w+((h^(p|~f))+x[4]),w=(w=(w|=0)<<C[n]|w>>>32-C[n])+d|0,l=d,d=f,f=p<<10|p>>>22,p=h,h=w,w=m+t[e+S[n]]|0,w=16>n?w+((g^(v|~y))+E[0]):32>n?w+((g&y|v&~y)+E[1]):48>n?w+(((g|~v)^y)+E[2]):64>n?w+((g&v|~g&y)+E[3]):w+((g^v^y)+E[4]),w=(w=(w|=0)<<A[n]|w>>>32-A[n])+b|0,m=b,b=y,y=v<<10|v>>>22,v=g,g=w;w=r[1]+p+y|0,r[1]=r[2]+f+b|0,r[2]=r[3]+d+m|0,r[3]=r[4]+l+g|0,r[4]=r[0]+h+v|0,r[0]=w},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;for(e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,n=0;5>n;n++)e[n]=16711935&((r=e[n])<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}}),t.RIPEMD160=n._createHelper(r),t.HmacRIPEMD160=n._createHmacHelper(r)}(Math),function(){var t=m.enc.Utf8;m.algo.HMAC=m.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var s=this._oKey=n.clone(),o=this._iKey=n.clone(),a=s.words,u=o.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t,e=m,n=(t=e.lib).Base,r=t.WordArray,i=(t=e.algo).HMAC,s=t.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=i.create((l=this.cfg).hasher,t),s=r.create(),o=r.create([1]),a=s.words,u=o.words,c=l.keySize,l=l.iterations;a.length<c;){var h=n.update(e).finalize(o);n.reset();for(var p=h.words,f=p.length,d=h,m=1;m<l;m++){d=n.finalize(d),n.reset();for(var g=d.words,v=0;v<f;v++)p[v]^=g[v]}s.concat(h),u[0]++}return s.sigBytes=4*c,s}});e.PBKDF2=function(t,e,n){return s.create(n).compute(t,e)}}();var g,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function y(t){var e,n,r="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),r+=v.charAt(n>>6)+v.charAt(63&n);for(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),r+=v.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),r+=v.charAt(n>>2)+v.charAt((3&n)<<4));(3&r.length)>0;)r+="=";return r}function b(t){var e,n,r,i="",s=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e)(r=v.indexOf(t.charAt(e)))<0||(0==s?(i+=C(r>>2),n=3&r,s=1):1==s?(i+=C(n<<2|r>>4),n=15&r,s=2):2==s?(i+=C(n),i+=C(r>>2),n=3&r,s=3):(i+=C(n<<2|r>>4),i+=C(15&r),s=0));return 1==s&&(i+=C(n<<2)),i}function w(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):this.fromString(t,null==e&&"string"!=typeof t?256:e))}function x(){return new w(null)}"Microsoft Internet Explorer"==f.appName?(w.prototype.am=function(t,e,n,r,i,s){for(var o=32767&e,a=e>>15;--s>=0;){var u=32767&this[t],c=this[t++]>>15,l=a*u+c*o;i=((u=o*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},g=30):"Netscape"!=f.appName?(w.prototype.am=function(t,e,n,r,i,s){for(;--s>=0;){var o=e*this[t++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},g=26):(w.prototype.am=function(t,e,n,r,i,s){for(var o=16383&e,a=e>>14;--s>=0;){var u=16383&this[t],c=this[t++]>>14,l=a*u+c*o;i=((u=o*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},g=28),w.prototype.DB=g,w.prototype.DM=(1<<g)-1,w.prototype.DV=1<<g,w.prototype.FV=Math.pow(2,52),w.prototype.F1=52-g,w.prototype.F2=2*g-52;var E,_,S=new Array;for(E="0".charCodeAt(0),_=0;_<=9;++_)S[E++]=_;for(E="a".charCodeAt(0),_=10;_<36;++_)S[E++]=_;for(E="A".charCodeAt(0),_=10;_<36;++_)S[E++]=_;function C(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function A(t,e){var n=S[t.charCodeAt(e)];return null==n?-1:n}function I(t){var e=x();return e.fromInt(t),e}function T(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function k(t){this.m=t}function P(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function R(t,e){return t&e}function D(t,e){return t|e}function F(t,e){return t^e}function B(t,e){return t&~e}function O(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function N(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function M(){}function L(t){return t}function V(t){this.r2=x(),this.q3=x(),w.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}k.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},k.prototype.revert=function(t){return t},k.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},k.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},k.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},P.prototype.convert=function(t){var e=x();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(w.ZERO)>0&&this.m.subTo(e,e),e},P.prototype.revert=function(t){var e=x();return t.copyTo(e),this.reduce(e),e},P.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},P.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},P.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},w.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},w.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},w.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,s=0;--r>=0;){var o=8==n?255&t[r]:A(t,r);o<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==s?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&w.ZERO.subTo(this,this)},w.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},w.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},w.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},w.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+o+1]=this[n]>>i|a,a=(this[n]&s)<<r;for(n=o-1;n>=0;--n)e[n]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},w.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,s=(1<<r)-1;e[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&s)<<i,e[o-n]=this[o]>>r;r>0&&(e[this.t-n-1]|=(this.s&s)<<i),e.t=this.t-n,e.clamp()}},w.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},w.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&w.ZERO.subTo(e,e)},w.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},w.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=x());var s=x(),o=this.s,a=t.s,u=this.DB-T(r[r.t-1]);u>0?(r.lShiftTo(u,s),i.lShiftTo(u,n)):(r.copyTo(s),i.copyTo(n));var c=s.t,l=s[c-1];if(0!=l){var h=l*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),p=this.FV/h,f=(1<<this.F1)/h,d=1<<this.F2,m=n.t,g=m-c,v=null==e?x():e;for(s.dlShiftTo(g,v),n.compareTo(v)>=0&&(n[n.t++]=1,n.subTo(v,n)),w.ONE.dlShiftTo(c,v),v.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--g>=0;){var y=n[--m]==l?this.DM:Math.floor(n[m]*p+(n[m-1]+d)*f);if((n[m]+=s.am(0,y,n,g,0,c))<y)for(s.dlShiftTo(g,v),n.subTo(v,n);n[m]<--y;)n.subTo(v,n)}null!=e&&(n.drShiftTo(c,e),o!=a&&w.ZERO.subTo(e,e)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&w.ZERO.subTo(n,n)}}},w.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},w.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},w.prototype.exp=function(t,e){if(t>4294967295||t<1)return w.ONE;var n=x(),r=x(),i=e.convert(this),s=T(t)-1;for(i.copyTo(n);--s>=0;)if(e.sqrTo(n,r),(t&1<<s)>0)e.mulTo(r,i,n);else{var o=n;n=r,r=o}return e.revert(n)},w.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,s=C(n));o>=0;)a<e?(n=(this[o]&(1<<a)-1)<<e-a,n|=this[--o]>>(a+=this.DB-e)):(n=this[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=C(n));return i?s:"0"},w.prototype.negate=function(){var t=x();return w.ZERO.subTo(this,t),t},w.prototype.abs=function(){return this.s<0?this.negate():this},w.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},w.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+T(this[this.t-1]^this.s&this.DM)},w.prototype.mod=function(t){var e=x();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(w.ZERO)>0&&t.subTo(e,e),e},w.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new k(e):new P(e),this.exp(t,n)},w.ZERO=I(0),w.ONE=I(1),M.prototype.convert=L,M.prototype.revert=L,M.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},M.prototype.sqrTo=function(t,e){t.squareTo(e)},V.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=x();return t.copyTo(e),this.reduce(e),e},V.prototype.revert=function(t){return t},V.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},V.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},V.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var j,U,H,z=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],K=(1<<26)/z[z.length-1];function q(){this.i=0,this.j=0,this.S=new Array}function W(){!function(t){U[H++]^=255&t,U[H++]^=t>>8&255,U[H++]^=t>>16&255,U[H++]^=t>>24&255,H>=256&&(H-=256)}((new Date).getTime())}if(w.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},w.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=I(n),i=x(),s=x(),o="";for(this.divRemTo(r,i,s);i.signum()>0;)o=(n+s.intValue()).toString(t).substr(1)+o,i.divRemTo(r,i,s);return s.intValue().toString(t)+o},w.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,s=0,o=0,a=0;a<t.length;++a){var u=A(t,a);u<0?"-"==t.charAt(a)&&0==this.signum()&&(i=!0):(o=e*o+u,++s>=n&&(this.dMultiply(r),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&w.ZERO.subTo(this,this)},w.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(w.ONE.shiftLeft(t-1),D,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(w.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=1+(t>>3),e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},w.prototype.bitwiseTo=function(t,e,n){var r,i,s=Math.min(t.t,this.t);for(r=0;r<s;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=s;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},w.prototype.changeBit=function(t,e){var n=w.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},w.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},w.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},w.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},w.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},w.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},w.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},w.prototype.millerRabin=function(t){var e=this.subtract(w.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>z.length&&(t=z.length);for(var i=x(),s=0;s<t;++s){i.fromInt(z[Math.floor(Math.random()*z.length)]);var o=i.modPow(r,this);if(0!=o.compareTo(w.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<n&&0!=o.compareTo(e);)if(0==(o=o.modPowInt(2,this)).compareTo(w.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0},w.prototype.clone=function(){var t=x();return this.copyTo(t),t},w.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},w.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},w.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},w.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},w.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},w.prototype.equals=function(t){return 0==this.compareTo(t)},w.prototype.min=function(t){return this.compareTo(t)<0?this:t},w.prototype.max=function(t){return this.compareTo(t)>0?this:t},w.prototype.and=function(t){var e=x();return this.bitwiseTo(t,R,e),e},w.prototype.or=function(t){var e=x();return this.bitwiseTo(t,D,e),e},w.prototype.xor=function(t){var e=x();return this.bitwiseTo(t,F,e),e},w.prototype.andNot=function(t){var e=x();return this.bitwiseTo(t,B,e),e},w.prototype.not=function(){for(var t=x(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},w.prototype.shiftLeft=function(t){var e=x();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},w.prototype.shiftRight=function(t){var e=x();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},w.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+O(this[t]);return this.s<0?this.t*this.DB:-1},w.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=N(this[n]^e);return t},w.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},w.prototype.setBit=function(t){return this.changeBit(t,D)},w.prototype.clearBit=function(t){return this.changeBit(t,B)},w.prototype.flipBit=function(t){return this.changeBit(t,F)},w.prototype.add=function(t){var e=x();return this.addTo(t,e),e},w.prototype.subtract=function(t){var e=x();return this.subTo(t,e),e},w.prototype.multiply=function(t){var e=x();return this.multiplyTo(t,e),e},w.prototype.divide=function(t){var e=x();return this.divRemTo(t,e,null),e},w.prototype.remainder=function(t){var e=x();return this.divRemTo(t,null,e),e},w.prototype.divideAndRemainder=function(t){var e=x(),n=x();return this.divRemTo(t,e,n),new Array(e,n)},w.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),s=I(1);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new k(e):e.isEven()?new V(e):new P(e);var o=new Array,a=3,u=n-1,c=(1<<n)-1;if(o[1]=r.convert(this),n>1){var l=x();for(r.sqrTo(o[1],l);a<=c;)o[a]=x(),r.mulTo(l,o[a-2],o[a]),a+=2}var h,p,f=t.t-1,d=!0,m=x();for(i=T(t[f])-1;f>=0;){for(i>=u?h=t[f]>>i-u&c:(h=(t[f]&(1<<i+1)-1)<<u-i,f>0&&(h|=t[f-1]>>this.DB+i-u)),a=n;0==(1&h);)h>>=1,--a;if((i-=a)<0&&(i+=this.DB,--f),d)o[h].copyTo(s),d=!1;else{for(;a>1;)r.sqrTo(s,m),r.sqrTo(m,s),a-=2;a>0?r.sqrTo(s,m):(p=s,s=m,m=p),r.mulTo(m,o[h],s)}for(;f>=0&&0==(t[f]&1<<i);)r.sqrTo(s,m),p=s,s=m,m=p,--i<0&&(i=this.DB-1,--f)}return r.revert(s)},w.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return w.ZERO;for(var n=t.clone(),r=this.clone(),i=I(1),s=I(0),o=I(0),a=I(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(o,i),s.subTo(a,s)):(r.subTo(n,r),e&&o.subTo(i,o),a.subTo(s,a))}return 0!=r.compareTo(w.ONE)?w.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},w.prototype.pow=function(t){return this.exp(t,new M)},w.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),n.rShiftTo(s,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n},w.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=z[z.length-1]){for(e=0;e<z.length;++e)if(n[0]==z[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<z.length;){for(var r=z[e],i=e+1;i<z.length&&r<K;)r*=z[i++];for(r=n.modInt(r);e<i;)if(r%z[e++]==0)return!1}return n.millerRabin(t)},w.prototype.square=function(){var t=x();return this.squareTo(t),t},q.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)r=this.S[e],this.S[e]=this.S[n=n+this.S[e]+t[e%t.length]&255],this.S[n]=r;this.i=0,this.j=0},q.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},null==U){var G;if(U=new Array,H=0,void 0!==d&&(void 0!==d.crypto||void 0!==d.msCrypto)){var $=d.crypto||d.msCrypto;if($.getRandomValues){var X=new Uint8Array(32);for($.getRandomValues(X),G=0;G<32;++G)U[H++]=X[G]}else if("Netscape"==f.appName&&f.appVersion<"5"){var Q=d.crypto.random(32);for(G=0;G<Q.length;++G)U[H++]=255&Q.charCodeAt(G)}}for(;H<256;)G=Math.floor(65536*Math.random()),U[H++]=G>>>8,U[H++]=255&G;H=0,W()}function Y(){if(null==j){for(W(),(j=new q).init(U),H=0;H<U.length;++H)U[H]=0;H=0}return j.next()}function Z(){}function J(t,e){return new w(t,e)}function tt(t,e,n){for(var r="",i=0;r.length<e;)r+=n(String.fromCharCode.apply(String,t.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function et(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function nt(t,e,n){for(var r="",i=0;r.length<e;)r+=n(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return r}function rt(t,e){this.x=e,this.q=t}function it(t,e,n,r){this.curve=t,this.x=e,this.y=n,this.z=null==r?w.ONE:r,this.zinv=null}function st(t,e,n){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new it(this,null,null)}Z.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=Y()},et.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},et.prototype.setPublic=function(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA public key";this.n=J(t,16),this.e=parseInt(e,16)}},et.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var n=new Array,r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=63&i|128,n[--e]=i>>6|192):(n[--e]=63&i|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var s=new Z,o=new Array;e>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);n[--e]=o[0]}return n[--e]=2,n[--e]=0,new w(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},et.prototype.encryptOAEP=function(t,e,n){var r=function(t,e,n,r){var i=at.crypto.MessageDigest,s=at.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(t){return wt(s.hashHex(xt(t),o))}),t.length+2*r+2>e)throw"Message too long for RSA";var a,u="";for(a=0;a<e-t.length-2*r-2;a+=1)u+="\0";var c=n("")+u+"\x01"+t,l=new Array(r);(new Z).nextBytes(l);var h=tt(l,c.length,n),p=[];for(a=0;a<c.length;a+=1)p[a]=c.charCodeAt(a)^h.charCodeAt(a);var f=tt(p,l.length,n),d=[0];for(a=0;a<l.length;a+=1)d[a+1]=l[a]^f.charCodeAt(a);return new w(d.concat(p))}(t,this.n.bitLength()+7>>3,e,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var s=i.toString(16);return 0==(1&s.length)?s:"0"+s},et.prototype.type="RSA",et.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},et.prototype.setPrivate=function(t,e,n){if(this.isPrivate=!0,"string"!=typeof t)this.n=t,this.e=e,this.d=n;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key";this.n=J(t,16),this.e=parseInt(e,16),this.d=J(n,16)}},et.prototype.setPrivateEx=function(t,e,n,r,i,s,o,a){if(this.isPrivate=!0,this.isPublic=!1,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=J(t,16),this.e=parseInt(e,16),this.d=J(n,16),this.p=J(r,16),this.q=J(i,16),this.dmp1=J(s,16),this.dmq1=J(o,16),this.coeff=J(a,16)},et.prototype.generate=function(t,e){var n=new Z,r=t>>1;this.e=parseInt(e,16);for(var i=new w(e,16),s=t/2-100,o=w.ONE.shiftLeft(s);;){for(;this.p=new w(t-r,1,n),0!=this.p.subtract(w.ONE).gcd(i).compareTo(w.ONE)||!this.p.isProbablePrime(10););for(;this.q=new w(r,1,n),0!=this.q.subtract(w.ONE).gcd(i).compareTo(w.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}var u=this.q.subtract(this.p).abs();if(!(u.bitLength()<s||u.compareTo(o)<=0)){var c=this.p.subtract(w.ONE),l=this.q.subtract(w.ONE),h=c.multiply(l);if(0==h.gcd(i).compareTo(w.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==t)){this.d=i.modInverse(h),this.dmp1=this.d.mod(c),this.dmq1=this.d.mod(l),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0},et.prototype.decrypt=function(t){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var e=J(t,16),n=this.doPrivate(e);return null==n?null:function(t,e){for(var n=t.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=e-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var s=255&n[r];s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((31&s)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&s)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}(n,this.n.bitLength()+7>>3)},et.prototype.decryptOAEP=function(t,e,n){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var r=J(t,16),i=this.doPrivate(r);return null==i?null:function(t,e,n,r){var i=at.crypto.MessageDigest,s=at.crypto.Util,o=null;for(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(t){return wt(s.hashHex(xt(t),o))}),t=t.toByteArray(),a=0;a<t.length;a+=1)t[a]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*r+2)throw"Cipher too short";var a,u=t.substr(1,r),c=t.substr(r+1),l=nt(c,r,n),h=[];for(a=0;a<u.length;a+=1)h[a]=u.charCodeAt(a)^l.charCodeAt(a);var p=nt(String.fromCharCode.apply(String,h),t.length-r,n),f=[];for(a=0;a<c.length;a+=1)f[a]=c.charCodeAt(a)^p.charCodeAt(a);if((f=String.fromCharCode.apply(String,f)).substr(0,r)!==n(""))throw"Hash mismatch";var d=(f=f.substr(r)).indexOf("\x01");if((-1!=d?f.substr(0,d).lastIndexOf("\0"):-1)+1!=d)throw"Malformed data";return f.substr(d+1)}(i,this.n.bitLength()+7>>3,e,n)},rt.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},rt.prototype.toBigInteger=function(){return this.x},rt.prototype.negate=function(){return new rt(this.q,this.x.negate().mod(this.q))},rt.prototype.add=function(t){return new rt(this.q,this.x.add(t.toBigInteger()).mod(this.q))},rt.prototype.subtract=function(t){return new rt(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},rt.prototype.multiply=function(t){return new rt(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},rt.prototype.square=function(){return new rt(this.q,this.x.square().mod(this.q))},rt.prototype.divide=function(t){return new rt(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},rt.prototype.sqrt=function(){return new rt(this.q,this.x.sqrt().mod(this.q))},it.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},it.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},it.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(w.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(w.ZERO))},it.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(w.ZERO)&&!this.y.toBigInteger().equals(w.ZERO)},it.prototype.negate=function(){return new it(this.curve,this.x,this.y.negate(),this.z)},it.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(w.ZERO.equals(n))return w.ZERO.equals(e)?this.twice():this.curve.getInfinity();var r=new w("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger(),o=(t.x.toBigInteger(),t.y.toBigInteger(),n.square()),a=o.multiply(n),u=i.multiply(o),c=e.square().multiply(this.z),l=c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(a).multiply(n).mod(this.curve.q),h=u.multiply(r).multiply(e).subtract(s.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),p=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new it(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(h),p)},it.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new w("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),s=this.curve.a.toBigInteger(),o=e.square().multiply(t);w.ZERO.equals(s)||(o=o.add(this.z.square().multiply(s)));var a=(o=o.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),u=o.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new it(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},it.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new w("3")),i=this.negate(),s=this,o=this.curve.q.subtract(t),a=o.multiply(new w("3")),u=new it(this.curve,this.x,this.y),c=u.negate();for(e=r.bitLength()-2;e>0;--e){s=s.twice();var l=r.testBit(e);l!=n.testBit(e)&&(s=s.add(l?this:i))}for(e=a.bitLength()-2;e>0;--e){u=u.twice();var h=a.testBit(e);h!=o.testBit(e)&&(u=u.add(h?u:c))}return s},it.prototype.multiplyTwo=function(t,e,n){var r;r=t.bitLength()>n.bitLength()?t.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(e);r>=0;)i=i.twice(),t.testBit(r)?i=n.testBit(r)?i.add(s):i.add(this):n.testBit(r)&&(i=i.add(e)),--r;return i},st.prototype.getQ=function(){return this.q},st.prototype.getA=function(){return this.a},st.prototype.getB=function(){return this.b},st.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},st.prototype.getInfinity=function(){return this.infinity},st.prototype.fromBigInteger=function(t){return new rt(this.q,t)},st.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var e=t.substr(0,2),n=(t.substr(2),this.fromBigInteger(new w(a,16))),r=this.getA(),i=this.getB(),s=n.square().add(r).multiply(n).add(i).sqrt();return"03"==e&&(s=s.negate()),new it(this,n,s);case 4:case 6:case 7:var o=(t.length-2)/2,a=t.substr(2,o),u=t.substr(o+2,o);return new it(this,this.fromBigInteger(new w(a,16)),this.fromBigInteger(new w(u,16)));default:return null}},rt.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},it.prototype.getEncoded=function(t){var e=function(t,e){var n=t.toByteArrayUnsigned();if(e<n.length)n=n.slice(n.length-e);else for(;e>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=e(n,32);return t?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(e(r,32))),i},it.decodeFrom=function(t,e){var n=e.length-1,r=e.slice(1,1+n/2),i=e.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var s=new w(r),o=new w(i);return new it(t,t.fromBigInteger(s),t.fromBigInteger(o))},it.decodeFromHex=function(t,e){e.substr(0,2);var n=e.length-2,r=e.substr(2,n/2),i=e.substr(2+n/2,n/2),s=new w(r,16),o=new w(i,16);return new it(t,t.fromBigInteger(s),t.fromBigInteger(o))},it.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),n=t.y.subtract(this.y).divide(e),r=n.square().subtract(this.x).subtract(t.x),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new it(this.curve,r,i)},it.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(w.valueOf(2)),e=this.curve.fromBigInteger(w.valueOf(3)),n=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),r=n.square().subtract(this.x.multiply(t)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new it(this.curve,r,i)},it.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new w("3")),i=this.negate(),s=this;for(e=r.bitLength()-2;e>0;--e){s=s.twice();var o=r.testBit(e);o!=n.testBit(e)&&(s=s.add2D(o?this:i))}return s},it.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=e.multiply(e).mod(i),o=t.multiply(t).multiply(t).add(n.multiply(t)).add(r).mod(i);return s.equals(o)},it.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},it.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(e.compareTo(w.ONE)<0||e.compareTo(t.subtract(w.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(w.ONE)<0||n.compareTo(t.subtract(w.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ot=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(t,e,r){return e?n[e]:String.fromCharCode(parseInt(r,16))}var i=new String(""),s=Object.hasOwnProperty;return function(n,o){var a,u,c=n.match(t),l=c[0],h=!1;"{"===l?a={}:"["===l?a=[]:(a=[],h=!0);for(var p=[a],f=1-h,d=c.length;f<d;++f){var m;switch((l=c[f]).charCodeAt(0)){default:(m=p[0])[u||m.length]=+l,u=void 0;break;case 34:if(-1!==(l=l.substring(1,l.length-1)).indexOf("\\")&&(l=l.replace(e,r)),m=p[0],!u){if(!(m instanceof Array)){u=l||i;break}u=m.length}m[u]=l,u=void 0;break;case 91:p.unshift((m=p[0])[u||m.length]=[]),u=void 0;break;case 93:p.shift();break;case 102:(m=p[0])[u||m.length]=!1,u=void 0;break;case 110:(m=p[0])[u||m.length]=null,u=void 0;break;case 116:(m=p[0])[u||m.length]=!0,u=void 0;break;case 123:p.unshift((m=p[0])[u||m.length]={}),u=void 0;break;case 125:p.shift()}}if(h){if(1!==p.length)throw new Error;a=a[0]}else if(p.length)throw new Error;if(o){var g=function(t,e){var n=t[e];if(n&&"object"==typeof n){var r=null;for(var i in n)if(s.call(n,i)&&n!==t){var a=g(n,i);void 0!==a?n[i]=a:(r||(r=[]),r.push(i))}if(r)for(var u=r.length;--u>=0;)delete n[r[u]]}return o.call(t,e,n)};a=g({"":a},"")}return a}}();void 0!==at&&at||(at={}),void 0!==at.asn1&&at.asn1||(at.asn1={}),at.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1).length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";e=new w(r,16).xor(t).add(w.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return Et(t,e)},this.newObject=function(t){var e=at.asn1,n=e.ASN1Object,r=e.DERBoolean,i=e.DERInteger,s=e.DERBitString,o=e.DEROctetString,a=e.DERNull,u=e.DERObjectIdentifier,c=e.DEREnumerated,l=e.DERUTF8String,h=e.DERNumericString,p=e.DERPrintableString,f=e.DERTeletexString,d=e.DERIA5String,m=e.DERUTCTime,g=e.DERGeneralizedTime,v=e.DERVisibleString,y=e.DERBMPString,b=e.DERSequence,w=e.DERSet,x=e.DERTaggedObject,E=e.ASN1Util.newObject;if(t instanceof e.ASN1Object)return t;var _=Object.keys(t);if(1!=_.length)throw new Error("key of param shall be only one.");var S=_[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+S+":"))throw new Error("undefined key: "+S);if("bool"==S)return new r(t[S]);if("int"==S)return new i(t[S]);if("bitstr"==S)return new s(t[S]);if("octstr"==S)return new o(t[S]);if("null"==S)return new a(t[S]);if("oid"==S)return new u(t[S]);if("enum"==S)return new c(t[S]);if("utf8str"==S)return new l(t[S]);if("numstr"==S)return new h(t[S]);if("prnstr"==S)return new p(t[S]);if("telstr"==S)return new f(t[S]);if("ia5str"==S)return new d(t[S]);if("utctime"==S)return new m(t[S]);if("gentime"==S)return new g(t[S]);if("visstr"==S)return new v(t[S]);if("bmpstr"==S)return new y(t[S]);if("asn1"==S)return new n(t[S]);if("seq"==S){for(var C=t[S],A=[],I=0;I<C.length;I++){var T=E(C[I]);A.push(T)}return new b({array:A})}if("set"==S){for(C=t[S],A=[],I=0;I<C.length;I++)T=E(C[I]),A.push(T);return new w({array:A})}if("tag"==S){var k=t[S];if("[object Array]"===Object.prototype.toString.call(k)&&3==k.length){var P=E(k[2]);return new x({tag:k[0],explicit:k[1],obj:P})}return new x(k)}},this.jsonToASN1HEX=function(t){return this.newObject(t).tohex()}},at.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",n=parseInt(t.substr(0,2),16),r=(e=Math.floor(n/40)+"."+n%40,""),i=2;i<t.length;i+=2){var s=("00000000"+parseInt(t.substr(i,2),16).toString(2)).slice(-8);r+=s.substr(1,7),"0"==s.substr(0,1)&&(e=e+"."+new w(r,2).toString(10),r="")}return e},at.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new w(t,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=e(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},at.asn1.ASN1Object=function(t){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var n=e.length/2;if(n>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+t.toString(16));return(128+n).toString(16)+e},this.tohex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(t){this.params=t},null!=t&&null!=t.tlv&&(this.hTLV=t.tlv,this.isModified=!1)},at.asn1.DERAbstractString=function(t){at.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=vt(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},jt(at.asn1.DERAbstractString,at.asn1.ASN1Object),at.asn1.DERAbstractTime=function(t){at.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){var e=t.getTime()+6e4*t.getTimezoneOffset();return new Date(e)},this.formatDate=function(t,e,n){var r=this.zeroPadding,i=this.localDateToUTC(t),s=String(i.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=s+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var a=i.getMilliseconds();if(0!=a){var u=r(String(a),3);o=o+"."+(u=u.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.setByParam=function(t){this.hV=null,this.hTLV=null,this.params=t},this.getString=function(){},this.setString=function(t){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.str=t},this.setByDate=function(t){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.date=t},this.setByDateValue=function(t,e,n,r,i,s){var o=new Date(Date.UTC(t,e-1,n,r,i,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},jt(at.asn1.DERAbstractTime,at.asn1.ASN1Object),at.asn1.DERAbstractStructured=function(t){at.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},jt(at.asn1.DERAbstractStructured,at.asn1.ASN1Object),at.asn1.DERBoolean=function(t){at.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==t?"010100":"0101ff"},jt(at.asn1.DERBoolean,at.asn1.ASN1Object),at.asn1.DERInteger=function(t){at.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=at.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new w(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},jt(at.asn1.DERInteger,at.asn1.ASN1Object),at.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=at.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.tohex()}at.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var n="0"+t;this.hTLV=null,this.isModified=!0,this.hV=n+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0),t+="0000000".substr(0,e);for(var n="",r=0;r<t.length-1;r+=8){var i=t.substr(r,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),n+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+n},this.setByBooleanArray=function(t){for(var e="",n=0;n<t.length;n++)e+=1==t[n]?"1":"0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},jt(at.asn1.DERBitString,at.asn1.ASN1Object),at.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=at.asn1.ASN1Util.newObject(t.obj);t.hex=e.tohex()}at.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},jt(at.asn1.DEROctetString,at.asn1.DERAbstractString),at.asn1.DERNull=function(){at.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},jt(at.asn1.DERNull,at.asn1.ASN1Object),at.asn1.DERObjectIdentifier=function(t){at.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){var e=function(t){var n=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var e="",r=parseInt(t,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),e+=n(parseInt(a,2))}return e};try{if(!t.match(/^[0-9.]+$/))return null;var i="",s=t.split("."),o=40*parseInt(s[0],10)+parseInt(s[1],10);i+=n(o),s.splice(0,2);for(var a=0;a<s.length;a++)i+=r(s[a]);return i}catch(e){return null}}(t);if(null==e)throw new Error("malformed oid string: "+t);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueName=function(t){var e=at.asn1.x509.OID.name2oid(t);if(""===e)throw new Error("DERObjectIdentifier oidName undefined: "+t);this.setValueOidString(e)},this.setValueNameOrOid=function(t){t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){"string"==typeof t?this.setValueNameOrOid(t):void 0!==t.oid?this.setValueNameOrOid(t.oid):void 0!==t.name?this.setValueNameOrOid(t.name):void 0!==t.hex&&this.setValueHex(t.hex)},void 0!==t&&this.setByParam(t)},jt(at.asn1.DERObjectIdentifier,at.asn1.ASN1Object),at.asn1.DEREnumerated=function(t){at.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=at.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new w(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},jt(at.asn1.DEREnumerated,at.asn1.ASN1Object),at.asn1.DERUTF8String=function(t){at.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},jt(at.asn1.DERUTF8String,at.asn1.DERAbstractString),at.asn1.DERNumericString=function(t){at.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},jt(at.asn1.DERNumericString,at.asn1.DERAbstractString),at.asn1.DERPrintableString=function(t){at.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},jt(at.asn1.DERPrintableString,at.asn1.DERAbstractString),at.asn1.DERTeletexString=function(t){at.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},jt(at.asn1.DERTeletexString,at.asn1.DERAbstractString),at.asn1.DERIA5String=function(t){at.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},jt(at.asn1.DERIA5String,at.asn1.DERAbstractString),at.asn1.DERVisibleString=function(t){at.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="1a"},jt(at.asn1.DERVisibleString,at.asn1.DERAbstractString),at.asn1.DERBMPString=function(t){at.asn1.DERBMPString.superclass.constructor.call(this,t),this.hT="1e"},jt(at.asn1.DERBMPString,at.asn1.DERAbstractString),at.asn1.DERUTCTime=function(t){at.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var t=this.params;if(null==this.params&&(t={date:new Date}),"string"==typeof t){if(!t.match(/^[0-9]{12}Z$/)&&!t.match(/^[0-9]{12}\.[0-9]+Z$/))throw new Error("malformed string for UTCTime: "+t);this.hV=pt(t)}else if(null!=t.str)this.hV=pt(t.str);else if(null==t.date&&1==t.millis){var e=new Date;this.hV=pt(this.formatDate(e,"utc",!0))}else null!=t.date&&t.date instanceof Date?this.hV=pt(this.formatDate(t.date,"utc",!0===t.millis)):t instanceof Date&&(this.hV=pt(this.formatDate(t,"utc")));if(null==this.hV)throw new Error("parameter not specified properly for UTCTime");return this.hV},null!=t&&this.setByParam(t)},jt(at.asn1.DERUTCTime,at.asn1.DERAbstractTime),at.asn1.DERGeneralizedTime=function(t){at.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.params=t,this.getFreshValueHex=function(){var t=this.params;if(null==this.params&&(t={date:new Date}),"string"==typeof t){if(!t.match(/^[0-9]{14}Z$/)&&!t.match(/^[0-9]{14}\.[0-9]+Z$/))throw new Error("malformed string for GeneralizedTime: "+t);this.hV=pt(t)}else if(null!=t.str)this.hV=pt(t.str);else if(null==t.date&&1==t.millis){var e=new Date;this.hV=pt(this.formatDate(e,"gen",!0))}else null!=t.date&&t.date instanceof Date?this.hV=pt(this.formatDate(t.date,"gen",!0===t.millis)):t instanceof Date&&(this.hV=pt(this.formatDate(t,"gen")));if(null==this.hV)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},null!=t&&this.setByParam(t)},jt(at.asn1.DERGeneralizedTime,at.asn1.DERAbstractTime),at.asn1.DERSequence=function(t){at.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++)t+=this.asn1Array[e].tohex();return this.hV=t,this.hV}},jt(at.asn1.DERSequence,at.asn1.DERAbstractStructured),at.asn1.DERSet=function(t){at.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++)t.push(this.asn1Array[e].tohex());return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},jt(at.asn1.DERSet,at.asn1.DERAbstractStructured),at.asn1.DERTaggedObject=function(t){at.asn1.DERTaggedObject.superclass.constructor.call(this);var e=at.asn1,n=lt.getV,r=e.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(t,e,n){this.params={tag:e,explicit:t,obj:n}},this.getFreshValueHex=function(){var t=this.params;if(null==t.explicit&&(t.explicit=!0),null!=t.tage&&(t.tag=t.tage,t.explicit=!0),null!=t.tagi&&(t.tag=t.tagi,t.explicit=!1),null!=t.str)this.hV=vt(t.str);else if(null!=t.hex)this.hV=t.hex;else{if(null==t.obj)throw new Error("str, hex nor obj not specified");var i;t.obj instanceof e.ASN1Object?i=t.obj.tohex():"object"==typeof t.obj&&(i=r(t.obj).tohex()),this.hV=t.explicit?i:n(i,0)}return null==t.tag&&(t.tag="a0"),this.hT=t.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},jt(at.asn1.DERTaggedObject,at.asn1.ASN1Object);var at,ut,ct,lt=new function(){};function ht(t){for(var e="",n=0;n<t.length;n++){var r=t[n].toString(16);1==r.length&&(r="0"+r),e+=r}return e}function pt(t){return ht(function(t){for(var e=new Array,n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(t))}function ft(t){return(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function dt(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function mt(t){return t.length%2==1&&(t="0"+t),ft(y(t))}function gt(t){return b(dt(t))}function vt(t){return St(Ft(t)).toLowerCase()}function yt(t){try{return decodeURIComponent(Ct(t))}catch(r){return null}}function bt(t){return yt(function(t){for(var e=t.match(/.{1,2}/g),n=[],r=0;r<e.length;r++){var i=parseInt(e[r],16);161<=i&&i<=191?(n.push("c2"),n.push(e[r])):192<=i&&i<=255?(n.push("c3"),n.push((i-64).toString(16))):n.push(e[r])}return n.join("")}(t))}function wt(t){for(var e="",n=0;n<t.length-1;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e}function xt(t){for(var e="",n=0;n<t.length;n++)e+=("0"+t.charCodeAt(n).toString(16)).slice(-2);return e}function Et(t,e){return"-----BEGIN "+e+"-----\r\n"+function(t){return function(t){return y(t)}(t).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}(t)+"\r\n-----END "+e+"-----\r\n"}function _t(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return function(t){return b(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}(t=void 0!==e?(t=t.replace(new RegExp("^[^]*-----BEGIN "+e+"-----"),"")).replace(new RegExp("-----END "+e+"-----[^]*$"),""):(t=t.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function St(t){return t.replace(/%/g,"")}function Ct(t){return t.replace(/(..)/g,"%$1")}function At(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;var n=(t=t.toLowerCase()).split(":").length-1;if(n<2)throw e;var r=":".repeat(7-n+2),i=(t=t.replace("::",r)).split(":");if(8!=i.length)throw e;for(var s=0;s<8;s++)i[s]=("0000"+i[s]).slice(-4);return i.join("")}function It(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+t);var e=(t=t.toLowerCase()).match(/.{1,4}/g),n=(t=":"+(e=(e=e.map(function(t){return t.replace(/^0+/,"")})).map(function(t){return""==t?"0":t})).join(":")+":").match(/:(0:){2,}/g);if(null==n)return t.slice(1,-1);var r=n.sort().slice(-1)[0];return"::"!=(t=t.replace(r.substr(0,r.length-1),":")).substr(0,2)&&(t=t.substr(1)),"::"!=t.substr(-2,2)&&(t=t.substr(0,t.length-1)),t}function Tt(t){var e=new Error("malformed hex value");if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(8==t.length)try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(r){throw e}else{if(16!=t.length){if(32==t.length)return It(t);if(64==t.length){try{return It(t.substr(0,32))+"/"+kt(t.substr(32))}catch(r){throw e}return}return t}try{return Tt(t.substr(0,8))+"/"+kt(t.substr(8))}catch(r){throw e}}}function kt(t){var e,n=new Error("malformed mask");try{e=new w(t,16).toString(2)}catch(i){throw n}if(!e.match(/^1*0*$/))throw n;return e.replace(/0+$/,"").length}function Pt(t){var e=new Error("malformed IP address");if(!(t=t.toLowerCase(t)).match(/^[0-9a-f.:/]+$/))throw e;if(!t.match(/^[0-9.]+$/)){var r;if(t.match(/^[0-9.]+\/[0-9]+$/))return Pt((r=t.split("/"))[0])+Rt(parseInt(r[1]),32);if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return At(t);if(t.match(/^[0-9a-f:]+\/[0-9]+$/)&&-1!==t.indexOf(":"))return At((r=t.split("/"))[0])+Rt(parseInt(r[1]),128);throw e}var i=t.split(".");if(4!==i.length)throw e;var s="";try{for(var o=0;o<4;o++)s+=("0"+parseInt(i[o]).toString(16)).slice(-2);return s}catch(n){throw e}}function Rt(t,e){return 32==e&&0==t?"00000000":128==e&&0==t?"00000000000000000000000000000000":new w(Array(t+1).join("1")+Array(e-t+1).join("0"),2).toString(16)}function Dt(t){return t.match(/.{4}/g).map(function(t){var e=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2),16);if(0==e&n<128)return String.fromCharCode(n);if(e<8){var r=128|63&n;return yt((192|(7&e)<<3|(192&n)>>6).toString(16)+r.toString(16))}r=128|(15&e)<<2|(192&n)>>6;var i=128|63&n;return yt((224|(240&e)>>4).toString(16)+r.toString(16)+i.toString(16))}).join("")}function Ft(t){for(var e=encodeURIComponent(t),n="",r=0;r<e.length;r++)"%"==e[r]?(n+=e.substr(r,3),r+=2):n=n+"%"+pt(e[r]);return n}function Bt(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))}function Ot(t){return!!t.match(/^[0-9A-Za-z-_.]+$/)}function Nt(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function Mt(t){if(!Bt(t))return null;try{var e=[],n=t.substr(0,2),r=parseInt(n,16);e[0]=new String(Math.floor(r/40)),e[1]=new String(r%40);for(var i=t.substr(2),o=[],a=0;a<i.length/2;a++)o.push(parseInt(i.substr(2*a,2),16));var u=[],c="";for(a=0;a<o.length;a++)128&o[a]?c+=Lt((127&o[a]).toString(2),7):(c+=Lt((127&o[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var l=e.join(".");return u.length>0&&(l=l+"."+u.join(".")),l}catch(s){return null}}lt.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var n=parseInt(t.substr(e+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},lt.getL=function(t,e){var n=lt.getLblen(t,e);return n<1?"":t.substr(e+2,2*n)},lt.getVblen=function(t,e){var n;return""==(n=lt.getL(t,e))?-1:("8"===n.substr(0,1)?new w(n.substr(2),16):new w(n,16)).intValue()},lt.getVidx=function(t,e){var n=lt.getLblen(t,e);return n<0?n:e+2*(n+1)},lt.getV=function(t,e){var n=lt.getVidx(t,e),r=lt.getVblen(t,e);return t.substr(n,2*r)},lt.getTLV=function(t,e){return t.substr(e,2)+lt.getL(t,e)+lt.getV(t,e)},lt.getTLVblen=function(t,e){return 2+2*lt.getLblen(t,e)+2*lt.getVblen(t,e)},lt.getNextSiblingIdx=function(t,e){return lt.getVidx(t,e)+2*lt.getVblen(t,e)},lt.getChildIdx=function(t,e){var n,r,i,s=lt,o=[];n=s.getVidx(t,e),r=2*s.getVblen(t,e),"03"==t.substr(e,2)&&(n+=2,r-=2),i=0;for(var a=n;i<=r;){var u=s.getTLVblen(t,a);if((i+=u)<=r&&o.push(a),a+=u,i>=r)break}return o},lt.getNthChildIdx=function(t,e,n){return lt.getChildIdx(t,e)[n]},lt.getIdxbyList=function(t,e,n,r){var i,s,o=lt;return 0==n.length?void 0!==r&&t.substr(e,2)!==r?-1:e:(i=n.shift())>=(s=o.getChildIdx(t,e)).length?-1:o.getIdxbyList(t,s[i],n,r)},lt.getIdxbyListEx=function(t,e,n,r){var i,s,o=lt;if(0==n.length)return void 0!==r&&t.substr(e,2)!==r?-1:e;i=n.shift(),s=o.getChildIdx(t,e);for(var a=0,u=0;u<s.length;u++){var c=t.substr(s[u],2);if("number"==typeof i&&!o.isContextTag(c)&&a==i||"string"==typeof i&&o.isContextTag(c,i))return o.getIdxbyListEx(t,s[u],n,r);o.isContextTag(c)||a++}return-1},lt.getTLVbyList=function(t,e,n,r){var i=lt,s=i.getIdxbyList(t,e,n,r);return-1==s||s>=t.length?null:i.getTLV(t,s)},lt.getTLVbyListEx=function(t,e,n,r){var i=lt,s=i.getIdxbyListEx(t,e,n,r);return-1==s?null:i.getTLV(t,s)},lt.getVbyList=function(t,e,n,r,i){var s,o,a=lt;return-1==(s=a.getIdxbyList(t,e,n,r))||s>=t.length?null:(o=a.getV(t,s),!0===i&&(o=o.substr(2)),o)},lt.getVbyListEx=function(t,e,n,r,i){var s,o,a=lt;return-1==(s=a.getIdxbyListEx(t,e,n,r))?null:(o=a.getV(t,s),"03"==t.substr(s,2)&&!1!==i&&(o=o.substr(2)),o)},lt.getInt=function(t,e,n){null==n&&(n=-1);try{var r=t.substr(e,2);if("02"!=r&&"03"!=r)return n;var i=lt.getV(t,e);return"02"==r?parseInt(i,16):function(t){if(t.length%2!=0)return-1;if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return-1;try{var e=t.substr(0,2);if("00"==e)return parseInt(t.substr(2),16);var n=parseInt(e,16);if(n>7)return-1;var i=t.substr(2),s=parseInt(i,16).toString(2);"0"==s&&(s="00000000"),s=s.slice(0,0-n);var o=parseInt(s,2);return NaN==o?-1:o}catch(r){return-1}}(i)}catch(c){return n}},lt.getOID=function(t,e,n){null==n&&(n=null);try{return"06"!=t.substr(e,2)?n:Mt(lt.getV(t,e))}catch(i){return n}},lt.getOIDName=function(t,e,n){null==n&&(n=null);try{var r=lt.getOID(t,e,n);if(r==n)return n;var i=at.asn1.x509.OID.oid2name(r);return""==i?r:i}catch(l){return n}},lt.getString=function(t,e,n){null==n&&(n=null);try{return wt(lt.getV(t,e))}catch(l){return n}},lt.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},n=[],r=t.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var s=t.substr(2),o=[],a=0;a<s.length/2;a++)o.push(parseInt(s.substr(2*a,2),16));var u=[],c="";for(a=0;a<o.length;a++)128&o[a]?c+=e((127&o[a]).toString(2),7):(c+=e((127&o[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var l=n.join(".");return u.length>0&&(l=l+"."+u.join(".")),l},lt.dump=function(t,e,n,r){var i=lt,s=i.getV,o=i.dump,a=i.getChildIdx,u=t;t instanceof at.asn1.ASN1Object&&(u=t.tohex());var c=function(t,e){return t.length<=2*e?t:t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e)};void 0===e&&(e={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var l,h=e.ommit_long_octet;if("01"==(l=u.substr(n,2)))return"00"==(p=s(u,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==l)return r+"INTEGER "+c(p=s(u,n),h)+"\n";if("03"==l){var p=s(u,n);return i.isASN1HEX(p.substr(2))?(x=r+"BITSTRING, encapsulates\n")+o(p.substr(2),e,0,r+"  "):r+"BITSTRING "+c(p,h)+"\n"}if("04"==l)return p=s(u,n),i.isASN1HEX(p)?(x=r+"OCTETSTRING, encapsulates\n")+o(p,e,0,r+"  "):r+"OCTETSTRING "+c(p,h)+"\n";if("05"==l)return r+"NULL\n";if("06"==l){var f=s(u,n),d=at.asn1.ASN1Util.oidHexToInt(f),m=at.asn1.x509.OID.oid2name(d),g=d.replace(/\./g," ");return""!=m?r+"ObjectIdentifier "+m+" ("+g+")\n":r+"ObjectIdentifier ("+g+")\n"}if("0a"==l)return r+"ENUMERATED "+parseInt(s(u,n))+"\n";if("0c"==l)return r+"UTF8String '"+yt(s(u,n))+"'\n";if("13"==l)return r+"PrintableString '"+yt(s(u,n))+"'\n";if("14"==l)return r+"TeletexString '"+yt(s(u,n))+"'\n";if("16"==l)return r+"IA5String '"+yt(s(u,n))+"'\n";if("17"==l)return r+"UTCTime "+yt(s(u,n))+"\n";if("18"==l)return r+"GeneralizedTime "+yt(s(u,n))+"\n";if("1a"==l)return r+"VisualString '"+yt(s(u,n))+"'\n";if("1e"==l)return r+"BMPString '"+Dt(s(u,n))+"'\n";if("30"==l){if("3000"==u.substr(n,4))return r+"SEQUENCE {}\n";x=r+"SEQUENCE\n";var v=e;if((2==(w=a(u,n)).length||3==w.length)&&"06"==u.substr(w[0],2)&&"04"==u.substr(w[w.length-1],2)){m=i.oidname(s(u,w[0]));var y=JSON.parse(JSON.stringify(e));y.x509ExtName=m,v=y}for(var b=0;b<w.length;b++)x+=o(u,v,w[b],r+"  ");return x}if("31"==l){x=r+"SET\n";var w=a(u,n);for(b=0;b<w.length;b++)x+=o(u,e,w[b],r+"  ");return x}if(0!=(128&(l=parseInt(l,16)))){var x,E=31&l;if(0!=(32&l)){for(x=r+"["+E+"]\n",w=a(u,n),b=0;b<w.length;b++)x+=o(u,e,w[b],r+"  ");return x}return p=s(u,n),lt.isASN1HEX(p)?(x=r+"["+E+"]\n")+o(p,e,0,r+"  "):(("68747470"==p.substr(0,8)||"subjectAltName"===e.x509ExtName&&2==E)&&(p=yt(p)),r+"["+E+"] "+p+"\n")}return r+"UNKNOWN("+l+") "+s(u,n)+"\n"},lt.parse=function(t){var e=lt.parse,n=lt.isASN1HEX,r=lt.getV,i=lt.getTLV,s=lt.getChildIdx,o=at.asn1,a=o.ASN1Util.oidHexToInt,u=o.x509.OID.oid2name,l=yt,h=Dt,p=bt,f={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},d=t.substr(0,2),m={},g=r(t,0);if("01"==d)return"0101ff"==t?{bool:!0}:{bool:!1};if("02"==d)return{int:{hex:g}};if("03"==d)try{if("00"!=g.substr(0,2))throw"not encap";var v=g.substr(2);if(!n(v))throw"not encap";return{bitstr:{obj:e(v)}}}catch(Q){var y=null;return g.length<=10&&(y=function(t){if("string"!=typeof t)return null;if(t.length%2!=0)return null;if(!t.match(/^[0-9a-f]+$/))return null;try{var e=parseInt(t.substr(0,2),16);if(e<0||7<e)return null;for(var n=t.substr(2),r="",i=0;i<n.length;i+=2){var s=n.substr(i,2),o=parseInt(s,16).toString(2);r+=o=("0000000"+o).slice(-8)}return r.substr(0,r.length-e)}catch(c){return null}}(g)),null==y?{bitstr:{hex:g}}:{bitstr:{bin:y}}}else if("04"==d)try{if(!n(g))throw"not encap";return{octstr:{obj:e(g)}}}catch(Q){return{octstr:{hex:g}}}else{if("05"==d)return{null:""};if("06"==d){var b=a(g),w=u(b);return""==w?{oid:b}:{oid:w}}if("0a"==d)return g.length>4?{enum:{hex:g}}:{enum:parseInt(g,16)};if("30"==d||"31"==d)return m[f[d]]=function(t){for(var n=[],r=s(t,0),o=0;o<r.length;o++){var a=i(t,r[o]),u=e(a);n.push(u)}return n}(t),m;if("14"==d){var x=p(g);return m[f[d]]={str:x},m}if("1e"==d)return x=h(g),m[f[d]]={str:x},m;if(-1!=":0c:12:13:16:17:18:1a:".indexOf(d))return x=l(g),m[f[d]]={str:x},m;if(d.match(/^8[0-9]$/))return null==(x=l(g))|""==x||null!=x.match(/[\x00-\x1F\x7F-\x9F]/)||null!=x.match(/[\u0000-\u001F\u0080\u2013\u009F]/)?{tag:{tag:d,explicit:!1,hex:g}}:{tag:{tag:d,explicit:!1,str:x}};if(!d.match(/^a[0-9]$/)){var E=new at.asn1.ASN1Object;return E.hV=g,{asn1:{tlv:d+E.getLengthHexFromValue()+g}}}try{if(!n(g))throw new Error("not encap");return{tag:{tag:d,explicit:!0,obj:e(g)}}}catch(Q){return{tag:{tag:d,explicit:!0,hex:g}}}}},lt.isContextTag=function(t,e){var n,r;t=t.toLowerCase();try{n=parseInt(t,16)}catch(c){return-1}if(void 0===e)return 128==(192&n);try{return null!=e.match(/^\[[0-9]+\]$/)&&!((r=parseInt(e.substr(1,e.length-1),10))>31)&&128==(192&n)&&(31&n)==r}catch(c){return!1}},lt.isASN1HEX=function(t){var e=lt;if(t.length%2==1)return!1;var n=e.getVblen(t,0),r=t.substr(0,2),i=e.getL(t,0);return t.length-r.length-i.length==2*n},lt.checkStrictDER=function(t,e,n,r,i){var s=lt;if(void 0===n){if("string"!=typeof t)throw new Error("not hex string");if(t=t.toLowerCase(),!at.lang.String.isHex(t))throw new Error("not hex string");n=t.length,i=(r=t.length/2)<128?1:Math.ceil(r.toString(16))+1}if(s.getL(t,e).length>2*i)throw new Error("L of TLV too long: idx="+e);var o=s.getVblen(t,e);if(o>r)throw new Error("value of L too long than hex: idx="+e);var a=s.getTLV(t,e),u=a.length-2-s.getL(t,e).length;if(u!==2*o)throw new Error("V string length and L's value not the same:"+u+"/"+2*o);if(0===e&&t.length!=a.length)throw new Error("total length and TLV length unmatch:"+t.length+"!="+a.length);var c=t.substr(e,2);if("02"===c){var l=s.getVidx(t,e);if("00"==t.substr(l,2)&&t.charCodeAt(l+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(c,16)){for(var h=s.getVblen(t,e),p=0,f=s.getChildIdx(t,e),d=0;d<f.length;d++)p+=s.getTLV(t,f[d]).length,s.checkStrictDER(t,f[d],n,r,i);if(2*h!=p)throw new Error("sum of children's TLV length and L unmatch: "+2*h+"!="+p)}},lt.oidname=function(t){var e=at.asn1;at.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var n=e.x509.OID.oid2name(t);return""===n&&(n=t),n},void 0!==at&&at||(at={}),void 0!==at.asn1&&at.asn1||(at.asn1={}),void 0!==at.asn1.x509&&at.asn1.x509||(at.asn1.x509={}),at.asn1.x509.Certificate=function(t){at.asn1.x509.Certificate.superclass.constructor.call(this);var e=at.asn1,n=e.DERBitString,r=e.DERSequence,i=e.x509,s=i.TBSCertificate,o=i.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(t){this.params=t},this.sign=function(){var t=this.params,e=t.sigalg;null!=t.sigalg.name&&(e=t.sigalg.name);var n=t.tbsobj.tohex(),r=new at.crypto.Signature({alg:e});r.init(t.cakey),r.updateHex(n),t.sighex=r.sign()},this.getPEM=function(){return Et(this.tohex(),"CERTIFICATE")},this.tohex=function(){var t=this.params;if(null!=t.tbsobj&&null!=t.tbsobj||(t.tbsobj=new s(t)),null==t.sighex&&null!=t.cakey&&this.sign(),null==t.sighex)throw new Error("sighex or cakey parameter not defined");var e=[];return e.push(t.tbsobj),e.push(new o({name:t.sigalg})),e.push(new n({hex:"00"+t.sighex})),new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&(this.params=t)},jt(at.asn1.x509.Certificate,at.asn1.ASN1Object),at.asn1.x509.TBSCertificate=function(t){at.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=at.asn1,n=e.x509,r=e.DERTaggedObject,i=e.DERInteger,s=e.DERSequence,o=n.AlgorithmIdentifier,a=n.Time,u=n.X500Name,c=n.Extensions,l=n.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=[],e=this.params;if(null!=e.version||1!=e.version){var n=2;null!=e.version&&(n=e.version-1);var h=new r({obj:new i({int:n})});t.push(h)}return t.push(new i(e.serial)),t.push(new o({name:e.sigalg})),t.push(new u(e.issuer)),t.push(new s({array:[new a(e.notbefore),new a(e.notafter)]})),t.push(new u(e.subject)),t.push(new l(Ut.getKey(e.sbjpubkey))),void 0!==e.ext&&e.ext.length>0&&t.push(new r({tag:"a3",obj:new c(e.ext)})),new at.asn1.DERSequence({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.x509.TBSCertificate,at.asn1.ASN1Object),at.asn1.x509.Extensions=function(t){at.asn1.x509.Extensions.superclass.constructor.call(this);var e=at.asn1,n=e.DERSequence,r=e.x509;this.aParam=[],this.setByParam=function(t){this.aParam=t},this.tohex=function(){for(var t=[],e=0;e<this.aParam.length;e++){var i=this.aParam[e],s=i.extname,o=null;if(null!=i.extn)o=new r.PrivateExtension(i);else if("subjectKeyIdentifier"==s)o=new r.SubjectKeyIdentifier(i);else if("keyUsage"==s)o=new r.KeyUsage(i);else if("subjectAltName"==s)o=new r.SubjectAltName(i);else if("issuerAltName"==s)o=new r.IssuerAltName(i);else if("basicConstraints"==s)o=new r.BasicConstraints(i);else if("nameConstraints"==s)o=new r.NameConstraints(i);else if("cRLDistributionPoints"==s)o=new r.CRLDistributionPoints(i);else if("certificatePolicies"==s)o=new r.CertificatePolicies(i);else if("policyMappings"==s)o=new r.PolicyMappings(i);else if("policyConstraints"==s)o=new r.PolicyConstraints(i);else if("inhibitAnyPolicy"==s)o=new r.InhibitAnyPolicy(i);else if("authorityKeyIdentifier"==s)o=new r.AuthorityKeyIdentifier(i);else if("extKeyUsage"==s)o=new r.ExtKeyUsage(i);else if("authorityInfoAccess"==s)o=new r.AuthorityInfoAccess(i);else if("cRLNumber"==s)o=new r.CRLNumber(i);else if("cRLReason"==s)o=new r.CRLReason(i);else if("ocspNonce"==s)o=new r.OCSPNonce(i);else if("ocspNoCheck"==s)o=new r.OCSPNoCheck(i);else if("adobeTimeStamp"==s)o=new r.AdobeTimeStamp(i);else{if("subjectDirectoryAttributes"!=s)throw new Error("extension not supported:"+JSON.stringify(i));o=new r.SubjectDirectoryAttributes(i)}null!=o&&t.push(o)}return new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.x509.Extensions,at.asn1.ASN1Object),at.asn1.x509.Extension=function(t){at.asn1.x509.Extension.superclass.constructor.call(this);var e=at.asn1,n=e.DERObjectIdentifier,r=e.DEROctetString,i=e.DERBoolean,s=e.DERSequence;this.tohex=function(){var t=new n({oid:this.oid}),e=new r({hex:this.getExtnValueHex()}),o=new Array;return o.push(t),this.critical&&o.push(new i),o.push(e),new s({array:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},jt(at.asn1.x509.Extension,at.asn1.ASN1Object),at.asn1.x509.KeyUsage=function(t){at.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=Error,n={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var t=this.getBinValue();return this.asn1ExtnValue=new at.asn1.DERBitString({bin:t}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var t=this.params;if("object"!=typeof t||"object"!=typeof t.names&&"string"!=typeof t.bin)throw new e("parameter not yet set");if(null!=t.names)return Vt(t.names,n);if(null!=t.bin)return t.bin;throw new e("parameter not set properly")},this.oid="2.5.29.15",void 0!==t&&(this.params=t)},jt(at.asn1.x509.KeyUsage,at.asn1.x509.Extension),at.asn1.x509.BasicConstraints=function(t){at.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);var e=at.asn1,n=e.DERBoolean,r=e.DERInteger,i=e.DERSequence;this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new n),this.pathLen>-1&&t.push(new r({int:this.pathLen}));var e=new i({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},jt(at.asn1.x509.BasicConstraints,at.asn1.x509.Extension),at.asn1.x509.CRLDistributionPoints=function(t){at.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=at.asn1,n=e.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(t){for(var r=[],i=0;i<t.length;i++)if(t[i]instanceof at.asn1.ASN1Object)r.push(t[i]);else{var s=new n.DistributionPoint(t[i]);r.push(s)}this.asn1ExtnValue=new e.DERSequence({array:r})},this.setByOneURI=function(t){var e=new n.DistributionPoint({fulluri:t});this.setByDPArray([e])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},jt(at.asn1.x509.CRLDistributionPoints,at.asn1.x509.Extension),at.asn1.x509.DistributionPoint=function(t){at.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=at.asn1,n=e.x509.DistributionPointName;this.tohex=function(){var t=new e.DERSequence;if(null!=this.asn1DP){var n=new e.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(n)}return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(void 0!==t.dpobj?this.asn1DP=t.dpobj:void 0!==t.dpname?this.asn1DP=new n(t.dpname):void 0!==t.fulluri&&(this.asn1DP=new n({full:[{uri:t.fulluri}]})))},jt(at.asn1.x509.DistributionPoint,at.asn1.ASN1Object),at.asn1.x509.DistributionPointName=function(t){at.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=at.asn1,n=e.DERTaggedObject;if(this.tohex=function(){if("full"!=this.type)throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t)if(e.x509.GeneralNames.prototype.isPrototypeOf(t))this.type="full",this.tag="a0",this.asn1V=t;else{if(void 0===t.full)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new e.x509.GeneralNames(t.full)}},jt(at.asn1.x509.DistributionPointName,at.asn1.ASN1Object),at.asn1.x509.CertificatePolicies=function(t){at.asn1.x509.CertificatePolicies.superclass.constructor.call(this,t);var e=at.asn1,n=e.DERSequence,r=e.x509.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var t=[],e=0;e<this.params.array.length;e++)t.push(new r(this.params.array[e]));var i=new n({array:t});return this.asn1ExtnValue=i,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",void 0!==t&&(this.params=t)},jt(at.asn1.x509.CertificatePolicies,at.asn1.x509.Extension),at.asn1.x509.PolicyInformation=function(t){at.asn1.x509.PolicyInformation.superclass.constructor.call(this,t);var e=at.asn1,n=e.DERSequence,r=e.DERObjectIdentifier,i=e.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var t=[new r(this.params.policyoid)];if(void 0!==this.params.array){for(var e=[],s=0;s<this.params.array.length;s++)e.push(new i(this.params.array[s]));e.length>0&&t.push(new n({array:e}))}return new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},jt(at.asn1.x509.PolicyInformation,at.asn1.ASN1Object),at.asn1.x509.PolicyQualifierInfo=function(t){at.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,t);var e=at.asn1,n=e.DERSequence,r=e.DERIA5String,i=e.DERObjectIdentifier,s=e.x509.UserNotice;this.params=null,this.tohex=function(){return void 0!==this.params.cps?new n({array:[new i({oid:"1.3.6.1.5.5.7.2.1"}),new r({str:this.params.cps})]}).tohex():null!=this.params.unotice?new n({array:[new i({oid:"1.3.6.1.5.5.7.2.2"}),new s(this.params.unotice)]}).tohex():void 0},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},jt(at.asn1.x509.PolicyQualifierInfo,at.asn1.ASN1Object),at.asn1.x509.UserNotice=function(t){at.asn1.x509.UserNotice.superclass.constructor.call(this,t);var e=at.asn1.DERSequence,n=at.asn1.x509.DisplayText,r=at.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var t=[];return void 0!==this.params.noticeref&&t.push(new r(this.params.noticeref)),void 0!==this.params.exptext&&t.push(new n(this.params.exptext)),new e({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},jt(at.asn1.x509.UserNotice,at.asn1.ASN1Object),at.asn1.x509.NoticeReference=function(t){at.asn1.x509.NoticeReference.superclass.constructor.call(this,t);var e=at.asn1.DERSequence,n=at.asn1.DERInteger,r=at.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var t=[];if(void 0!==this.params.org&&t.push(new r(this.params.org)),void 0!==this.params.noticenum){for(var i=[],s=this.params.noticenum,o=0;o<s.length;o++)i.push(new n(s[o]));t.push(new e({array:i}))}if(0==t.length)throw new Error("parameter is empty");return new e({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},jt(at.asn1.x509.NoticeReference,at.asn1.ASN1Object),at.asn1.x509.DisplayText=function(t){at.asn1.x509.DisplayText.superclass.constructor.call(this,t),this.hT="0c",void 0!==t&&("ia5"===t.type?this.hT="16":"vis"===t.type?this.hT="1a":"bmp"===t.type&&(this.hT="1e"))},jt(at.asn1.x509.DisplayText,at.asn1.DERAbstractString),at.asn1.x509.PolicyMappings=function(t){at.asn1.x509.PolicyMappings.superclass.constructor.call(this,t);var e=at.asn1.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var t=this.params,n=[],r=0;r<t.array.length;r++){var i=t.array[r];n.push({seq:[{oid:i[0]},{oid:i[1]}]})}return this.asn1ExtnValue=e({seq:n}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",void 0!==t&&(this.params=t)},jt(at.asn1.x509.PolicyMappings,at.asn1.x509.Extension),at.asn1.x509.PolicyConstraints=function(t){at.asn1.x509.PolicyConstraints.superclass.constructor.call(this,t);var e=at.asn1.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var t=this.params,n=[];return null!=t.reqexp&&n.push({tag:{tagi:"80",obj:{int:t.reqexp}}}),null!=t.inhibit&&n.push({tag:{tagi:"81",obj:{int:t.inhibit}}}),this.asn1ExtnValue=e({seq:n}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",void 0!==t&&(this.params=t)},jt(at.asn1.x509.PolicyConstraints,at.asn1.x509.Extension),at.asn1.x509.InhibitAnyPolicy=function(t){at.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,t);var e=at.asn1.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=e({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",void 0!==t&&(this.params=t)},jt(at.asn1.x509.InhibitAnyPolicy,at.asn1.x509.Extension),at.asn1.x509.NameConstraints=function(t){at.asn1.x509.NameConstraints.superclass.constructor.call(this,t);var e=at.asn1,n=e.ASN1Util.newObject,r=e.x509.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var t=this.params,e=[];if(null!=t.permit&&null!=t.permit.length){for(var i=[],s=0;s<t.permit.length;s++)i.push(new r(t.permit[s]));e.push({tag:{tagi:"a0",obj:{seq:i}}})}if(null!=t.exclude&&null!=t.exclude.length){var o=[];for(s=0;s<t.exclude.length;s++)o.push(new r(t.exclude[s]));e.push({tag:{tagi:"a1",obj:{seq:o}}})}return this.asn1ExtnValue=n({seq:e}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",void 0!==t&&(this.params=t)},jt(at.asn1.x509.NameConstraints,at.asn1.x509.Extension),at.asn1.x509.GeneralSubtree=function(t){at.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var e=at.asn1,n=e.x509.GeneralName,r=e.ASN1Util.newObject;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params,e=[new n(t)];return null!=t.min&&e.push({tag:{tagi:"80",obj:{int:t.min}}}),null!=t.max&&e.push({tag:{tagi:"81",obj:{int:t.max}}}),r({seq:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.x509.GeneralSubtree,at.asn1.ASN1Object),at.asn1.x509.ExtKeyUsage=function(t){at.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=at.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new e.DERSequence;for(var n=0;n<t.length;n++){var r=new e.DERObjectIdentifier(t[n]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},jt(at.asn1.x509.ExtKeyUsage,at.asn1.x509.Extension),at.asn1.x509.AuthorityKeyIdentifier=function(t){at.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=at.asn1,n=e.DERTaggedObject,r=e.x509.GeneralNames;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new n({explicit:!1,tag:"a1",obj:new r([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&t.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var i=new e.DERSequence({array:t});return this.asn1ExtnValue=i,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(t){if(void 0!==t.str||void 0!==t.hex)this.asn1KID=new at.asn1.DEROctetString(t);else if("object"==typeof t&&at.crypto.Util.isKey(t)||"string"==typeof t&&-1!=t.indexOf("BEGIN ")){var e=t;"string"==typeof t&&(e=Ut.getKey(t));var n=Ut.getKeyID(e);this.asn1KID=new at.asn1.DEROctetString({hex:n})}},this.setCertIssuerByParam=function(t){void 0!==t.str||void 0!==t.ldapstr||void 0!==t.hex||void 0!==t.certsubject||void 0!==t.certissuer?this.asn1CertIssuer=new at.asn1.x509.X500Name(t):"string"==typeof t&&-1!=t.indexOf("BEGIN ")&&-1!=t.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new at.asn1.x509.X500Name({certissuer:t}))},this.setCertSNByParam=function(t){if(void 0!==t.str||void 0!==t.bigint||void 0!==t.hex)this.asn1CertSN=new at.asn1.DERInteger(t);else if("string"==typeof t&&-1!=t.indexOf("BEGIN ")&&t.indexOf("CERTIFICATE")){var e=new qt;e.readCertPEM(t);var n=e.getSerialNumberHex();this.asn1CertSN=new at.asn1.DERInteger({hex:n})}},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn),void 0!==t.issuersn&&"string"==typeof t.issuersn&&-1!=t.issuersn.indexOf("BEGIN ")&&t.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(t.issuersn),this.setCertIssuerByParam(t.issuersn)))},jt(at.asn1.x509.AuthorityKeyIdentifier,at.asn1.x509.Extension),at.asn1.x509.SubjectKeyIdentifier=function(t){at.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,t);var e=at.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(t){if(void 0!==t.str||void 0!==t.hex)this.asn1KID=new e(t);else if("object"==typeof t&&at.crypto.Util.isKey(t)||"string"==typeof t&&-1!=t.indexOf("BEGIN")){var n=t;"string"==typeof t&&(n=Ut.getKey(t));var r=Ut.getKeyID(n);this.asn1KID=new at.asn1.DEROctetString({hex:r})}},this.oid="2.5.29.14",void 0!==t&&void 0!==t.kid&&this.setKIDByParam(t.kid)},jt(at.asn1.x509.SubjectKeyIdentifier,at.asn1.x509.Extension),at.asn1.x509.AuthorityInfoAccess=function(t){at.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,n=at.asn1,r=n.DERSequence,i=n.DERObjectIdentifier,s=n.x509.GeneralName,o=0;o<t.length;o++){var a,u=t[o];if(void 0!==u.ocsp)a=new r({array:[new i({oid:"1.3.6.1.5.5.7.48.1"}),new s({uri:u.ocsp})]});else{if(void 0===u.caissuer)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(u));a=new r({array:[new i({oid:"1.3.6.1.5.5.7.48.2"}),new s({uri:u.caissuer})]})}e.push(a)}this.asn1ExtnValue=new r({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},jt(at.asn1.x509.AuthorityInfoAccess,at.asn1.x509.Extension),at.asn1.x509.SubjectAltName=function(t){at.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new at.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},jt(at.asn1.x509.SubjectAltName,at.asn1.x509.Extension),at.asn1.x509.IssuerAltName=function(t){at.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new at.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},jt(at.asn1.x509.IssuerAltName,at.asn1.x509.Extension),at.asn1.x509.SubjectDirectoryAttributes=function(t){at.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,t);var e=at.asn1,n=e.DERSequence,r=e.ASN1Util.newObject,i=e.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var t=[],e=0;e<this.params.array.length;e++){var s=this.params.array[e],o={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if("dateOfBirth"==s.attr)o.seq[0].oid=i(s.attr),o.seq[1].set[0]={gentime:s.str};else if("placeOfBirth"==s.attr)o.seq[0].oid=i(s.attr),o.seq[1].set[0]={utf8str:s.str};else if("gender"==s.attr)o.seq[0].oid=i(s.attr),o.seq[1].set[0]={prnstr:s.str};else if("countryOfCitizenship"==s.attr)o.seq[0].oid=i(s.attr),o.seq[1].set[0]={prnstr:s.str};else{if("countryOfResidence"!=s.attr)throw new Error("unsupported attribute: "+s.attr);o.seq[0].oid=i(s.attr),o.seq[1].set[0]={prnstr:s.str}}t.push(new r(o))}var a=new n({array:t});return this.asn1ExtnValue=a,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",void 0!==t&&(this.params=t)},jt(at.asn1.x509.SubjectDirectoryAttributes,at.asn1.x509.Extension),at.asn1.x509.PrivateExtension=function(t){at.asn1.x509.PrivateExtension.superclass.constructor.call(this,t);var e=at.lang.String.isHex,n=at.asn1,r=n.x509.OID.name2oid,i=n.ASN1Util.newObject;this.params=null,this.setByParam=function(t){this.oid=r(t.extname),this.params=t},this.getExtnValueHex=function(){if(null==this.params.extname||null==this.params.extn)throw new Error("extname or extnhex not specified");var t=this.params.extn;if("string"==typeof t&&e(t))return t;if("object"==typeof t)try{return i(t).tohex()}catch(n){}throw new Error("unsupported extn value")},null!=t&&this.setByParam(t)},jt(at.asn1.x509.PrivateExtension,at.asn1.x509.Extension),at.asn1.x509.CRL=function(t){at.asn1.x509.CRL.superclass.constructor.call(this);var e=at.asn1,n=e.DERSequence,r=e.DERBitString,i=e.x509,s=i.AlgorithmIdentifier,o=i.TBSCertList;this.params=void 0,this.setByParam=function(t){this.params=t},this.sign=function(){var t=new o(this.params).tohex(),e=new at.crypto.Signature({alg:this.params.sigalg});e.init(this.params.cakey),e.updateHex(t);var n=e.sign();this.params.sighex=n},this.getPEM=function(){return Et(this.tohex(),"X509 CRL")},this.tohex=function(){var t=this.params;if(null==t.tbsobj&&(t.tbsobj=new o(t)),null==t.sighex&&null!=t.cakey&&this.sign(),null==t.sighex)throw new Error("sighex or cakey parameter not defined");var e=[];return e.push(t.tbsobj),e.push(new s({name:t.sigalg})),e.push(new r({hex:"00"+t.sighex})),new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&(this.params=t)},jt(at.asn1.x509.CRL,at.asn1.ASN1Object),at.asn1.x509.TBSCertList=function(t){at.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=at.asn1,n=e.DERInteger,r=e.DERSequence,i=e.DERTaggedObject,s=e.x509,o=s.AlgorithmIdentifier,a=s.Time,u=s.Extensions,c=s.X500Name;this.params=null,this.setByParam=function(t){this.params=t},this.getRevCertSequence=function(){for(var t=[],e=this.params.revcert,i=0;i<e.length;i++){var s=[new n(e[i].sn),new a(e[i].date)];null!=e[i].ext&&s.push(new u(e[i].ext)),t.push(new r({array:s}))}return new r({array:t})},this.tohex=function(){var t=[],e=this.params;if(null!=e.version){var s=new n({int:e.version-1});t.push(s)}if(t.push(new o({name:e.sigalg})),t.push(new c(e.issuer)),t.push(new a(e.thisupdate)),null!=e.nextupdate&&t.push(new a(e.nextupdate)),null!=e.revcert&&t.push(this.getRevCertSequence()),null!=e.ext){var l=new u(e.ext);t.push(new i({tag:"a0",explicit:!0,obj:l}))}return new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.x509.TBSCertList,at.asn1.ASN1Object),at.asn1.x509.CRLEntry=function(t){at.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=at.asn1;this.setCertSerial=function(t){this.sn=new e.DERInteger(t)},this.setRevocationDate=function(t){this.time=new e.x509.Time(t)},this.tohex=function(){var t=new e.DERSequence({array:[this.sn,this.time]});return this.TLV=t.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},jt(at.asn1.x509.CRLEntry,at.asn1.ASN1Object),at.asn1.x509.CRLNumber=function(t){at.asn1.x509.CRLNumber.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new at.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",null!=t&&(this.params=t)},jt(at.asn1.x509.CRLNumber,at.asn1.x509.Extension),at.asn1.x509.CRLReason=function(t){at.asn1.x509.CRLReason.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new at.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",null!=t&&(this.params=t)},jt(at.asn1.x509.CRLReason,at.asn1.x509.Extension),at.asn1.x509.OCSPNonce=function(t){at.asn1.x509.OCSPNonce.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new at.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",null!=t&&(this.params=t)},jt(at.asn1.x509.OCSPNonce,at.asn1.x509.Extension),at.asn1.x509.OCSPNoCheck=function(t){at.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new at.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",null!=t&&(this.params=t)},jt(at.asn1.x509.OCSPNoCheck,at.asn1.x509.Extension),at.asn1.x509.AdobeTimeStamp=function(t){at.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,t);var e=at.asn1,n=e.DERInteger,r=e.DERBoolean,i=e.DERSequence,s=e.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var t=this.params,e=[new n(1)];return e.push(new s({uri:t.uri})),null!=t.reqauth&&e.push(new r(t.reqauth)),this.asn1ExtnValue=new i({array:e}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",void 0!==t&&this.setByParam(t)},jt(at.asn1.x509.AdobeTimeStamp,at.asn1.x509.Extension),at.asn1.x509.X500Name=function(t){at.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=at.asn1,n=e.x509,r=n.RDN;this.setByString=function(t,e){void 0!==e&&(this.sRule=e);var n=t.split("/");n.shift();for(var i=[],s=0;s<n.length;s++)if(n[s].match(/^[^=]+=.+$/))i.push(n[s]);else{var o=i.length-1;i[o]=i[o]+"/"+n[s]}for(s=0;s<i.length;s++)this.asn1Array.push(new r({str:i[s],rule:this.sRule}))},this.setByLdapString=function(t,e){void 0!==e&&(this.sRule=e);var r=n.X500Name.ldapToCompat(t);this.setByString(r,e)},this.setByObject=function(t,e){for(var n in void 0!==e&&(this.sRule=e),t)if(t.hasOwnProperty(n)){var i=new r({str:n+"="+t[n],rule:this.sRule});this.asn1Array?this.asn1Array.push(i):this.asn1Array=[i]}},this.setByParam=function(t){var e;void 0!==t.rule&&(this.sRule=t.rule),void 0!==t.array?this.paramArray=t.array:void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):void 0!==t.hex?this.hTLV=t.hex:void 0!==t.certissuer?((e=new qt).readCertPEM(t.certissuer),this.hTLV=e.getIssuerHex()):void 0!==t.certsubject?((e=new qt).readCertPEM(t.certsubject),this.hTLV=e.getSubjectHex()):"object"==typeof t&&void 0===t.certsubject&&void 0===t.certissuer&&this.setByObject(t)},this.tohex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(0==this.asn1Array.length&&this.paramArray.length>0)for(var t=0;t<this.paramArray.length;t++){var n={array:this.paramArray[t]};"utf8"!=this.sRule&&(n.rule=this.sRule);var i=new r(n);this.asn1Array.push(i)}var s=new e.DERSequence({array:this.asn1Array});return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.x509.X500Name,at.asn1.ASN1Object),at.asn1.x509.X500Name.compatToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),(e=e.map(function(t){return t.replace(/,/,"\\,")})).join(",")},at.asn1.x509.X500Name.onelineToLDAP=function(t){return at.asn1.x509.X500Name.compatToLDAP(t)},at.asn1.x509.X500Name.ldapToCompat=function(t){for(var e=t.split(","),n=!1,r=[],i=0;e.length>0;i++){var s=e.shift();if(!0===n){var o=(r.pop()+","+s).replace(/\\,/g,",");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}return(r=r.map(function(t){return t.replace("/","\\/")})).reverse(),"/"+r.join("/")},at.asn1.x509.X500Name.ldapToOneline=function(t){return at.asn1.x509.X500Name.ldapToCompat(t)},at.asn1.x509.RDN=function(t){at.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=at.asn1.x509.AttributeTypeAndValue;this.setByParam=function(t){void 0!==t.rule&&(this.sRule=t.rule),void 0!==t.str&&this.addByMultiValuedString(t.str),void 0!==t.array&&(this.paramArray=t.array)},this.addByString=function(t){this.asn1Array.push(new at.asn1.x509.AttributeTypeAndValue({str:t,rule:this.sRule}))},this.addByMultiValuedString=function(t){for(var e=at.asn1.x509.RDN.parseString(t),n=0;n<e.length;n++)this.addByString(e[n])},this.tohex=function(){if(0==this.asn1Array.length&&this.paramArray.length>0)for(var t=0;t<this.paramArray.length;t++){var n=this.paramArray[t];void 0!==n.rule&&"utf8"!=this.sRule&&(n.rule=this.sRule);var r=new e(n);this.asn1Array.push(r)}var i=new at.asn1.DERSet({array:this.asn1Array});return this.TLV=i.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.x509.RDN,at.asn1.ASN1Object),at.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),n=!1,r=[],i=0;e.length>0;i++){var s=e.shift();if(!0===n){var o=(r.pop()+"+"+s).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}var a=!1,u=[];for(i=0;r.length>0;i++){if(s=r.shift(),!0===a){var c=u.pop();s.match(/"$/)?(o=(c+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2"),u.push(o),a=!1):u.push(c+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(a=!0)}return u},at.asn1.x509.AttributeTypeAndValue=function(t){at.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var e=at.asn1,n=e.DERSequence,r=e.DERUTF8String,i=e.DERPrintableString,s=e.DERTeletexString,o=e.DERIA5String,a=e.DERVisibleString,u=e.DERBMPString,c=at.lang.String.isMail,l=at.lang.String.isPrintable;this.setByParam=function(t){if(void 0!==t.rule&&(this.sRule=t.rule),void 0!==t.ds&&(this.dsType=t.ds),void 0===t.value&&void 0!==t.str){var e=t.str.match(/^([^=]+)=(.+)$/);if(!e)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=e[1],this.sValue=e[2]}else this.sType=t.type,this.sValue=t.value},this.setByString=function(t,e){void 0!==e&&(this.sRule=e);var n=t.match(/^([^=]+)=(.+)$/);if(!n)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(n[1],n[2])},this._getDsType=function(){var t=this.sType,e=this.sValue,n=this.sRule;return"prn"===n?"CN"==t&&c(e)?"ia5":l(e)?"prn":"utf8":"utf8"===n?"CN"==t&&c(e)?"ia5":"C"==t?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(t,e,n){void 0!==n&&(this.sRule=n),this.sType=t,this.sValue=e},this.getValueObj=function(t,e){if("utf8"==t)return new r({str:e});if("prn"==t)return new i({str:e});if("tel"==t)return new s({str:e});if("ia5"==t)return new o({str:e});if("vis"==t)return new a({str:e});if("bmp"==t)return new u({str:e});throw new Error("unsupported directory string type: type="+t+" value="+e)},this.tohex=function(){null==this.dsType&&(this.dsType=this._getDsType());var t=at.asn1.x509.OID.atype2obj(this.sType),e=this.getValueObj(this.dsType,this.sValue),r=new n({array:[t,e]});return this.TLV=r.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.x509.AttributeTypeAndValue,at.asn1.ASN1Object),at.asn1.x509.SubjectPublicKeyInfo=function(t){at.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=at.asn1,n=e.DERInteger,r=e.DERBitString,i=e.DERObjectIdentifier,s=e.DERSequence,o=e.ASN1Util.newObject,a=e.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new s({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.tohex=function(){var t=this.getASN1Object();return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(t){try{if(t instanceof et){var e=o({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).tohex();this.asn1AlgId=new a({name:"rsaEncryption"}),this.asn1SubjPKey=new r({hex:"00"+e})}}catch(c){}try{if(t instanceof at.crypto.ECDSA){var s=new i({name:t.curveName});this.asn1AlgId=new a({name:"ecPublicKey",asn1params:s}),this.asn1SubjPKey=new r({hex:"00"+t.pubKeyHex})}}catch(c){}try{if(t instanceof at.crypto.DSA){s=new o({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}),this.asn1AlgId=new a({name:"dsa",asn1params:s});var u=new n({bigint:t.y});this.asn1SubjPKey=new r({hex:"00"+u.tohex()})}}catch(c){}},void 0!==t&&this.setPubKey(t)},jt(at.asn1.x509.SubjectPublicKeyInfo,at.asn1.ASN1Object),at.asn1.x509.Time=function(t){at.asn1.x509.Time.superclass.constructor.call(this);var e=at.asn1,n=e.DERUTCTime,r=e.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(t){this.timeParams=t},this.setByParam=function(t){this.params=t},this.getType=function(t){return t.match(/^[0-9]{12}Z$/)?"utc":t.match(/^[0-9]{14}Z$/)?"gen":t.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":t.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var t=this.params,e=null;if("string"==typeof t&&(t={str:t}),null==t||!t.str||null!=t.type&&null!=t.type||(t.type=this.getType(t.str)),null!=t&&t.str?("utc"==t.type&&(e=new n(t.str)),"gen"==t.type&&(e=new r(t.str))):e="gen"==this.type?new r:new n,null==e)throw new Error("wrong setting for Time");return this.TLV=e.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},at.asn1.x509.Time_bak=function(t){at.asn1.x509.Time_bak.superclass.constructor.call(this);var e=at.asn1,n=e.DERUTCTime,r=e.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.tohex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new r(this.timeParams):"utc"==this.type?new n:new r,this.TLV=t.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},jt(at.asn1.x509.Time,at.asn1.ASN1Object),at.asn1.x509.AlgorithmIdentifier=function(t){at.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=at.asn1,n=e.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var t=null;for(var r in n)r===this.nameAlg&&(t=n[r]);if(null!==t)return this.hTLV=t,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=e.x509.OID.name2obj(this.nameAlg));var i=[this.asn1Alg];null!==this.asn1Params&&i.push(this.asn1Params);var s=new e.DERSequence({array:i});return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){void 0!==this.nameAlg.name&&(this.nameAlg=this.nameAlg.name);var r=this.nameAlg.toLowerCase();"withdsa"!==r.substr(-7,7)&&"withecdsa"!==r.substr(-9,9)&&(this.asn1Params=new e.DERNull)}},jt(at.asn1.x509.AlgorithmIdentifier,at.asn1.ASN1Object),at.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},at.asn1.x509.GeneralName=function(t){at.asn1.x509.GeneralName.superclass.constructor.call(this);var e=at.asn1,n=e.x509,r=n.X500Name,i=n.OtherName,s=e.DERIA5String,o=e.DEROctetString,a=e.DERTaggedObject,u=e.ASN1Object,c=Error;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t,e,n=this.params,l=!1;if(void 0!==n.other)t="a0",e=new i(n.other);else if(void 0!==n.rfc822)t="81",e=new s({str:n.rfc822});else if(void 0!==n.dns)t="82",e=new s({str:n.dns});else if(void 0!==n.dn)t="a4",l=!0,e="string"==typeof n.dn?new r({str:n.dn}):n.dn instanceof at.asn1.x509.X500Name?n.dn:new r(n.dn);else if(void 0!==n.ldapdn)t="a4",l=!0,e=new r({ldapstr:n.ldapdn});else if(void 0!==n.certissuer||void 0!==n.certsubj){var h,p;t="a4",l=!0;var f=null;if(void 0!==n.certsubj?(h=!1,p=n.certsubj):(h=!0,p=n.certissuer),p.match(/^[0-9A-Fa-f]+$/),-1!=p.indexOf("-----BEGIN ")&&(f=_t(p)),null==f)throw new Error("certsubj/certissuer not cert");var d,m=new qt;m.hex=f,d=h?m.getIssuerHex():m.getSubjectHex(),(e=new u).hTLV=d}else if(void 0!==n.uri)t="86",e=new s({str:n.uri});else{if(void 0===n.ip)throw new c("improper params");var g;t="87";var v=n.ip;try{if(v.match(/^[0-9a-f]+$/)){var y=v.length;if(8!=y&&16!=y&&32!=y&&64!=y)throw"err";g=v}else g=Pt(v)}catch(b){throw new c("malformed IP address: "+n.ip+":"+b.message)}e=new o({hex:g})}return new a({tag:t,explicit:l,obj:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.x509.GeneralName,at.asn1.ASN1Object),at.asn1.x509.GeneralNames=function(t){at.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=at.asn1;this.setByParamArray=function(t){for(var n=0;n<t.length;n++){var r=new e.x509.GeneralName(t[n]);this.asn1Array.push(r)}},this.tohex=function(){return new e.DERSequence({array:this.asn1Array}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},jt(at.asn1.x509.GeneralNames,at.asn1.ASN1Object),at.asn1.x509.OtherName=function(t){at.asn1.x509.OtherName.superclass.constructor.call(this);var e=at.asn1,n=e.DERObjectIdentifier,r=e.DERSequence,i=e.ASN1Util.newObject;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params;if(null==t.oid||null==t.value)throw new Error("oid or value not specified");var e=new n({oid:t.oid}),s=i({tag:{tag:"a0",explicit:!0,obj:t.value}});return new r({array:[e,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.x509.OtherName,at.asn1.ASN1Object),at.asn1.x509.OID=new function(){var t=at.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.name2oidList[e])throw"Name of ObjectIdentifier not defined: "+e;var n=new t({oid:this.name2oidList[e]});return this.objCache[e]=n,n},this.atype2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];var n;if(e.match(/^\d+\.\d+\.[0-9.]+$/))n=e;else if(void 0!==this.atype2oidList[e])n=this.atype2oidList[e];else{if(void 0===this.name2oidList[e])throw new Error("AttributeType name undefined: "+e);n=this.name2oidList[e]}var r=new t({oid:n});return this.objCache[e]=r,r},this.registerOIDs=function(t){if(this.checkOIDs(t))for(var e in t)this.name2oidList[e]=t[e]},this.checkOIDs=function(t){try{var e=Object.keys(t);return 0!=e.length&&(e.map(function(t,e,n){if(!this[t].match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},t),!0)}catch(l){return!1}}},at.asn1.x509.OID.oid2name=function(t){var e=at.asn1.x509.OID.name2oidList;for(var n in e)if(e[n]==t)return n;return""},at.asn1.x509.OID.oid2atype=function(t){var e=at.asn1.x509.OID.atype2oidList;for(var n in e)if(e[n]==t)return n;return t},at.asn1.x509.OID.name2oid=function(t){if(t.match(/^[0-9.]+$/))return t;var e=at.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},at.asn1.x509.X509Util={},at.asn1.x509.X509Util.newCertPEM=function(t){return new(0,at.asn1.x509.Certificate)(t).getPEM()},void 0!==at&&at||(at={}),void 0!==at.asn1&&at.asn1||(at.asn1={}),void 0!==at.asn1.cms&&at.asn1.cms||(at.asn1.cms={}),at.asn1.cms.Attribute=function(t){var e=Error,n=at.asn1,r=n.DERSequence,i=n.DERSet,s=n.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(t){this.params=t},this.getValueArray=function(){throw new e("not yet implemented abstract")},this.tohex=function(){var t=new s({oid:this.typeOid}),e=new i({array:this.getValueArray()});return new r({array:[t,e]}).tohex()},this.getEncodedHex=function(){return this.tohex()}},jt(at.asn1.cms.Attribute,at.asn1.ASN1Object),at.asn1.cms.ContentType=function(t){var e=at.asn1;e.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){return[new e.DERObjectIdentifier(this.params.type)]},null!=t&&this.setByParam(t)},jt(at.asn1.cms.ContentType,at.asn1.cms.Attribute),at.asn1.cms.MessageDigest=function(t){var e=at.asn1,n=e.DEROctetString;e.cms.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){return[new n(this.params)]},null!=t&&this.setByParam(t)},jt(at.asn1.cms.MessageDigest,at.asn1.cms.Attribute),at.asn1.cms.SigningTime=function(t){var e=at.asn1;e.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){return[new e.x509.Time(this.params)]},null!=t&&this.setByParam(t)},jt(at.asn1.cms.SigningTime,at.asn1.cms.Attribute),at.asn1.cms.SigningCertificate=function(t){var e=Error,n=at.asn1,r=n.DERSequence,i=n.cms,s=i.ESSCertID;i.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new e("parameter 'array' not specified");for(var n=this.params.array,i=[],o=0;o<n.length;o++){var a=n[o];0!=t.hasis||"string"!=typeof a||-1==a.indexOf("-----BEGIN")&&!lt.isASN1HEX(a)||(a={cert:a}),0!=a.hasis&&0==t.hasis&&(a.hasis=!1),i.push(new s(a))}var u=new r({array:i});return[new r({array:[u]})]},null!=t&&this.setByParam(t)},jt(at.asn1.cms.SigningCertificate,at.asn1.cms.Attribute),at.asn1.cms.ESSCertID=function(t){at.asn1.cms.ESSCertID.superclass.constructor.call(this);var e=Error,n=at,r=n.asn1,i=r.DEROctetString,s=r.DERSequence,o=r.cms.IssuerSerial;this.params=null,this.getCertHash=function(t,r){if(null!=t.hash)return t.hash;if("string"==typeof t&&-1==t.indexOf("-----BEGIN")&&!lt.isASN1HEX(t))return t;var i,s,o;if("string"==typeof t)i=t;else{if(null==t.cert)throw new e("hash nor cert unspecified");i=t.cert}if(s=-1!=i.indexOf("-----BEGIN")?_t(i):i,"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?s=_t(t):lt.isASN1HEX(t)&&(s=t)),null!=t.alg)o=t.alg;else{if(null==r)throw new e("hash alg unspecified");o=r}return n.crypto.Util.hashHex(s,o)},this.tohex=function(){var t=this.params,e=this.getCertHash(t,"sha1"),n=[];return n.push(new i({hex:e})),("string"==typeof t&&-1!=t.indexOf("-----BEGIN")||null!=t.cert&&0!=t.hasis||null!=t.issuer&&null!=t.serial)&&n.push(new o(t)),new s({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.ESSCertID,at.asn1.ASN1Object),at.asn1.cms.SigningCertificateV2=function(t){var e=Error,n=at.asn1,r=n.DERSequence,i=n.cms,s=i.ESSCertIDv2;i.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new e("parameter 'array' not specified");for(var n=this.params.array,i=[],o=0;o<n.length;o++){var a=n[o];null==t.alg&&0!=t.hasis||"string"!=typeof a||-1==a.indexOf("-----BEGIN")&&!lt.isASN1HEX(a)||(a={cert:a}),null==a.alg&&null!=t.alg&&(a.alg=t.alg),0!=a.hasis&&0==t.hasis&&(a.hasis=!1),i.push(new s(a))}var u=new r({array:i});return[new r({array:[u]})]},null!=t&&this.setByParam(t)},jt(at.asn1.cms.SigningCertificateV2,at.asn1.cms.Attribute),at.asn1.cms.ESSCertIDv2=function(t){at.asn1.cms.ESSCertIDv2.superclass.constructor.call(this),Error;var e=at.asn1,n=e.DEROctetString,r=e.DERSequence,i=e.cms.IssuerSerial,s=e.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var t=this.params,e=this.getCertHash(t,"sha256"),o=[];return null!=t.alg&&"sha256"!=t.alg&&o.push(new s({name:t.alg})),o.push(new n({hex:e})),("string"==typeof t&&-1!=t.indexOf("-----BEGIN")||null!=t.cert&&0!=t.hasis||null!=t.issuer&&null!=t.serial)&&o.push(new i(t)),new r({array:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.ESSCertIDv2,at.asn1.cms.ESSCertID),at.asn1.cms.IssuerSerial=function(t){var e=Error,n=at.asn1,r=n.DERInteger,i=n.DERSequence,s=n.x509.GeneralNames,o=qt;n.cms.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(t){this.params=t},this.tohex=function(){var t,n,a=this.params;if("string"==typeof a&&-1!=a.indexOf("-----BEGIN")||null!=a.cert){var u;u=null!=a.cert?a.cert:a;var c=new o;c.readCertPEM(u),t=c.getIssuer(),n={hex:c.getSerialNumberHex()}}else{if(null==a.issuer||!a.serial)throw new e("cert or issuer and serial parameter not specified");t=a.issuer,n=a.serial}var l=new s([{dn:t}]),h=new r(n);return new i({array:[l,h]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.IssuerSerial,at.asn1.ASN1Object),at.asn1.cms.SignerIdentifier=function(t){var e=at.asn1.cms,n=e.IssuerAndSerialNumber,r=e.SubjectKeyIdentifier;Error,e.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if("isssn"==t.type)return new n(t).tohex();if("skid"==t.type)return new r(t).tohex();throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.SignerIdentifier,at.asn1.ASN1Object),at.asn1.cms.IssuerAndSerialNumber=function(t){var e=at.asn1,n=e.DERInteger,r=e.DERSequence,i=e.x509.X500Name,s=qt,o=Error;e.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t,e,a=this.params;if("string"==typeof a&&-1!=a.indexOf("-----BEGIN")||null!=a.cert){var u;u=null!=a.cert?a.cert:a;var c=new s;c.readCertPEM(u),t=c.getIssuer(),e={hex:c.getSerialNumberHex()}}else{if(null==a.issuer||!a.serial)throw new o("cert or issuer and serial parameter not specified");t=a.issuer,e=a.serial}var l=new i(t),h=new n(e);return new r({array:[l,h]}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},jt(at.asn1.cms.IssuerAndSerialNumber,at.asn1.ASN1Object),at.asn1.cms.SubjectKeyIdentifier=function(t){var e=at.asn1,n=e.ASN1Util.newObject,r=qt,i=Error;e.cms.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var t,e=this.params;if(null==e.cert&&null==e.skid)throw new i("property cert nor skid undefined");return null!=e.cert?t=new r(e.cert).getExtSubjectKeyIdentifier().kid.hex:null!=e.skid&&(t=e.skid),n({tag:{tage:"a0",obj:{octstr:{hex:t}}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.SubjectKeyIdentifier,at.asn1.ASN1Object),at.asn1.cms.AttributeList=function(t){var e=Error,n=at.asn1,r=n.DERSet,i=n.cms;i.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params;if(null!=this.hTLV)return this.hTLV;var n=!0;null!=t.sortflag&&(n=t.sortflag);for(var s=t.array,o=[],a=0;a<s.length;a++){var u=s[a],c=u.attr;if("contentType"==c)o.push(new i.ContentType(u));else if("messageDigest"==c)o.push(new i.MessageDigest(u));else if("signingTime"==c)o.push(new i.SigningTime(u));else if("signingCertificate"==c)o.push(new i.SigningCertificate(u));else if("signingCertificateV2"==c)o.push(new i.SigningCertificateV2(u));else if("signaturePolicyIdentifier"==c)o.push(new at.asn1.cades.SignaturePolicyIdentifier(u));else{if("signatureTimeStamp"!=c&&"timeStampToken"!=c)throw new e("unknown attr: "+c);o.push(new at.asn1.cades.SignatureTimeStamp(u))}}var l=new r({array:o,sortflag:n});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.AttributeList,at.asn1.ASN1Object),at.asn1.cms.SignerInfo=function(t){var e=Error,n=at.asn1,r=n.DERInteger,i=n.DEROctetString,s=n.DERSequence,o=n.DERTaggedObject,a=n.cms,u=a.SignerIdentifier,c=a.AttributeList,l=n.x509.AlgorithmIdentifier,h=at.crypto,p=Ut;a.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var t=this.params,e=t.sigalg,n=new c(t.sattrs).tohex(),r=p.getKey(t.signkey),i=new h.Signature({alg:e});i.init(r),i.updateHex(n);var s=i.sign();t.sighex=s},this.tohex=function(){var t=this.params,n=[];if(n.push(new r({int:t.version})),n.push(new u(t.id)),n.push(new l({name:t.hashalg})),null!=t.sattrs){var a=new c(t.sattrs);try{n.push(new o({tag:"a0",explicit:!1,obj:a}))}catch(h){throw new e("si sattr error: "+h)}}if(n.push(new l(null!=t.sigalgfield?{name:t.sigalgfield}:{name:t.sigalg})),null==t.sighex&&null!=t.signkey&&this.sign(),n.push(new i({hex:t.sighex})),null!=t.uattrs){a=new c(t.uattrs);try{n.push(new o({tag:"a1",explicit:!1,obj:a}))}catch(h){throw new e("si uattr error: "+h)}}return new s({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.SignerInfo,at.asn1.ASN1Object),at.asn1.cms.EncapsulatedContentInfo=function(t){var e=at.asn1,n=e.DERTaggedObject,r=e.DERSequence,i=e.DERObjectIdentifier,s=e.DEROctetString;e.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];if(e.push(new i(t.type)),null!=t.content&&(null!=t.content.hex||null!=t.content.str)&&1!=t.isDetached){var o=new s(t.content),a=new n({tag:"a0",explicit:!0,obj:o});e.push(a)}return new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},jt(at.asn1.cms.EncapsulatedContentInfo,at.asn1.ASN1Object),at.asn1.cms.ContentInfo=function(t){var e=at.asn1,n=e.DERTaggedObject,r=e.DERSequence,i=e.DERObjectIdentifier;at.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];e.push(new i(t.type));var s=new n({tag:"a0",explicit:!0,obj:t.obj});return e.push(s),new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},jt(at.asn1.cms.ContentInfo,at.asn1.ASN1Object),at.asn1.cms.SignedData=function(t){Error;var e=at.asn1,n=e.DERInteger,r=e.DERSet,i=e.DERSequence,s=e.cms,o=s.EncapsulatedContentInfo,a=s.SignerInfo,u=s.ContentInfo,c=s.CertificateSet,l=s.RevocationInfoChoices,h=e.x509.AlgorithmIdentifier;at.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var t=this.params;this._setDigestAlgs(t),this._setContentTypeByEContent(t),this._setMessageDigestByEContent(t),this._setSignerInfoVersion(t),this._setSignedDataVersion(t)},this._setDigestAlgs=function(t){for(var e={},n=t.sinfos,r=0;r<n.length;r++)e[n[r].hashalg]=1;t.hashalgs=Object.keys(e).sort()},this._setContentTypeByEContent=function(t){for(var e=t.econtent.type,n=t.sinfos,r=0;r<n.length;r++)this._getAttrParamByName(n[r],"contentType").type=e},this._setMessageDigestByEContent=function(t){var e=t.econtent,n=e.content.hex;null==n&&"data"==e.type&&null!=e.content.str&&(n=xt(e.content.str));for(var r=t.sinfos,i=0;i<r.length;i++){var s=r[i],o=s.hashalg,a=this._getAttrParamByName(s,"messageDigest"),u=at.crypto.Util.hashHex(n,o);a.hex=u}},this._getAttrParamByName=function(t,e){for(var n=t.sattrs.array,r=0;r<n.length;r++)if(n[r].attr==e)return n[r]},this._setSignerInfoVersion=function(t){for(var e=t.sinfos,n=0;n<e.length;n++){var r=e[n],i=1;"skid"==r.id.type&&(i=3),r.version=i}},this._setSignedDataVersion=function(t){var e=this._getSignedDataVersion(t);t.version=e},this._getSignedDataVersion=function(t){if(null!=t.revinfos)for(var e=t.revinfos,n=0;n<e.length;n++)if(null!=e[n].ocsp)return 5;var r=t.sinfos;for(n=0;n<r.length;n++)if(3==t.sinfos[n].version)return 3;return"data"!=t.econtent.type?3:1},this.tohex=function(){var t=this.params;null!=this.getEncodedHexPrepare&&this.getEncodedHexPrepare(),1!=t.fixed&&this.checkAndFixParam();var e=[];e.push(new n({int:t.version}));for(var s=[],u=0;u<t.hashalgs.length;u++)s.push(new h({name:t.hashalgs[u]}));e.push(new r({array:s})),e.push(new o(t.econtent)),null!=t.certs&&e.push(new c(t.certs)),null!=t.revinfos&&e.push(new l(t.revinfos));var p=[];for(u=0;u<t.sinfos.length;u++)p.push(new a(t.sinfos[u]));return e.push(new r({array:p})),new i({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){return new u({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.SignedData,at.asn1.ASN1Object),at.asn1.cms.CertificateSet=function(t){at.asn1.cms.CertificateSet.superclass.constructor.call(this);var e=Error,n=at.asn1,r=n.DERTaggedObject,i=n.DERSet,s=n.ASN1Object;this.params=null,this.tohex=function(){var t,n=this.params,o=[];if(n instanceof Array)t=n;else{if(null==n.array)throw new e("cert array not specified");t=n.array}for(var a=0;a<t.length;a++){var u=_t(t[a]),c=new s;c.hTLV=u,o.push(c)}var l={array:o};0==n.sortflag&&(l.sortflag=!1);var h=new i(l);return new r({tag:"a0",explicit:!1,obj:h}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.CertificateSet,at.asn1.ASN1Object),at.asn1.cms.RevocationInfoChoices=function(t){at.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(!t instanceof Array)throw new Error("params is not array");for(var e=[],n=0;n<t.length;n++)e.push(new at.asn1.cms.RevocationInfoChoice(t[n]));return at.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:e}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.RevocationInfoChoices,at.asn1.ASN1Object),at.asn1.cms.RevocationInfoChoice=function(t){at.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(null!=t.crl&&"string"==typeof t.crl){var e=t.crl;return-1!=t.crl.indexOf("-----BEGIN")&&(e=_t(t.crl)),e}if(null!=t.ocsp)return at.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new at.asn1.cms.OtherRevocationFormat(t)}}).tohex();throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.RevocationInfoChoice,at.asn1.ASN1Object),at.asn1.cms.OtherRevocationFormat=function(t){at.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var e=Error,n=at.asn1.ASN1Util.newObject,r=at.lang.String.isHex;this.params=null,this.tohex=function(){var t=this.params;if(null==t.ocsp)throw new e("property ocsp not specified");if(!r(t.ocsp)||!lt.isASN1HEX(t.ocsp))throw new e("ocsp value not ASN.1 hex string");return n({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:t.ocsp}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cms.OtherRevocationFormat,at.asn1.ASN1Object),at.asn1.cms.CMSUtil=new function(){},at.asn1.cms.CMSUtil.newSignedData=function(t){return new at.asn1.cms.SignedData(t)},at.asn1.cms.CMSUtil.verifySignedData=function(t){var e=lt.getVbyList,n=lt.getTLVbyList,r=lt.getIdxbyList,i=lt.getChildIdx,s=lt.getTLV,o=lt.oidname,a=at.crypto.Util.hashHex;void 0===t.cms&&(0,at.lang.String.isHex)(t.cms);var u=t.cms,c=function(t,s){var a=s.idx;s.signerid_issuer1=n(t,a,[1,0],"30"),s.signerid_serial1=e(t,a,[1,1],"02"),s.hashalg=o(e(t,a,[2,0],"06"));var u=r(t,a,[3],"a0");s.idxSignedAttrs=u,l(t,s,u);var c=i(t,a).length;if(c<6)throw"malformed SignerInfo";s.sigalg=o(e(t,a,[c-2,0],"06")),s.sigval=e(t,a,[c-1],"04")},l=function(t,n,r){var s=i(t,r);n.signedAttrIdxList=s;for(var o=0;o<s.length;o++){var a,u=s[o],c=e(t,u,[0],"06");"2a864886f70d010905"===c?(a=yt(e(t,u,[1,0])),n.saSigningTime=a):"2a864886f70d010904"===c&&(a=e(t,u,[1,0],"04"),n.saMessageDigest=a)}},h=function(t,e,n,r){n.verifyDetail={};var o=n.verifyDetail,u=e.parse.econtent,c=n.hashalg,l=n.saMessageDigest;o.validMessageDigest=!1,a(u,c)===l&&(o.validMessageDigest=!0),function(t,e,n,r){var o,a=e.parse.certsIdx;if(void 0===e.certs){o=[],e.certkeys=[];for(var u=i(t,a),c=0;c<u.length;c++){var l=s(t,u[c]),h=new qt;h.readCertHex(l),o[c]=h,e.certkeys[c]=h.getPublicKey()}e.certs=o}else o=e.certs;for(e.cccc=o.length,e.cccci=u.length,c=0;c<o.length;c++){var p=h.getIssuerHex(),f=h.getSerialNumberHex();n.signerid_issuer1===p&&n.signerid_serial1===f&&(n.certkey_idx=c)}}(t,e,n),o.validSignatureValue=!1;var h=n.sigalg,p="31"+s(t,n.idxSignedAttrs).substr(2);n.signedattrshex=p;var f=e.certs[n.certkey_idx].getPublicKey(),d=new at.crypto.Signature({alg:h});d.init(f),d.updateHex(p);var m=d.verify(n.sigval);o.validSignatureValue_isValid=m,!0===m&&(o.validSignatureValue=!0),n.isValid=!1,o.validMessageDigest&&o.validSignatureValue&&(n.isValid=!0)},p={isValid:!1,parse:{}};return function(t,n){if("2a864886f70d010702"!==e(t,0,[0],"06"))return n;n.cmsType="signedData",n.econtent=e(t,0,[1,0,2,1,0]),function(t,e){for(var n,i=3;i<6;i++)if(void 0!==(n=r(t,0,[1,0,i]))){var s=t.substr(n,2);"a0"===s&&(e.certsIdx=n),"a1"===s&&(e.revinfosIdx=n),"31"===s&&(e.signerinfosIdx=n)}}(t,n),n.signerInfos=[],function(t,e){var n=e.signerinfosIdx;if(void 0!==n){var r=i(t,n);e.signerInfoIdxList=r;for(var s=0;s<r.length;s++){var o={idx:r[s]};c(t,o),e.signerInfos.push(o)}}}(t,n)}(u,p.parse),function(t,e){for(var n=e.parse.signerInfos,r=n.length,i=!0,s=0;s<r;s++){var o=n[s];h(t,e,o),o.isValid||(i=!1)}e.isValid=i}(u,p),p},at.asn1.cms.CMSParser=function(){var t=Error,e=qt,n=new e,r=lt,i=r.getV,s=r.getTLV,o=r.getTLVbyList,a=r.getTLVbyListEx,u=r.getVbyList,c=r.getVbyListEx,l=r.getChildIdx;this.getCMSSignedData=function(t){var e=o(t,0,[1,0]);return this.getSignedData(e)},this.getSignedData=function(t){var e=l(t,0),n={},r=i(t,e[0]),o=parseInt(r,16);n.version=o;var u=s(t,e[1]);n.hashalgs=this.getHashAlgArray(u);var c=s(t,e[2]);n.econtent=this.getEContent(c);var h=a(t,0,["[0]"]);null!=h&&(n.certs=this.getCertificateSet(h)),a(t,0,["[1]"]);var p=a(t,0,[3]);return n.sinfos=this.getSignerInfos(p),n},this.getHashAlgArray=function(t){for(var n=l(t,0),r=new e,i=[],o=0;o<n.length;o++){var a=s(t,n[o]),u=r.getAlgorithmIdentifierName(a);i.push(u)}return i},this.getEContent=function(t){var e={},n=u(t,0,[0]),r=u(t,0,[1,0]);return e.type=at.asn1.x509.OID.oid2name(lt.hextooidstr(n)),e.content={hex:r},e},this.getSignerInfos=function(t){for(var e=[],n=l(t,0),r=0;r<n.length;r++){var i=s(t,n[r]),o=this.getSignerInfo(i);e.push(o)}return e},this.getSignerInfo=function(t){var e={},i=l(t,0),o=r.getInt(t,i[0],-1);-1!=o&&(e.version=o);var u=s(t,i[1]),h=this.getIssuerAndSerialNumber(u);e.id=h;var p=s(t,i[2]),f=n.getAlgorithmIdentifierName(p);e.hashalg=f;var d=a(t,0,["[0]"]);if(null!=d){var m=this.getAttributeList(d);e.sattrs=m}var g=a(t,0,[3]),v=n.getAlgorithmIdentifierName(g);e.sigalg=v;var y=c(t,0,[4]);e.sighex=y;var b=a(t,0,["[1]"]);if(null!=b){var w=this.getAttributeList(b);e.uattrs=w}return e},this.getSignerIdentifier=function(t){if("30"==t.substr(0,2))return this.getIssuerAndSerialNumber(t);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(t){var e={type:"isssn"},r=l(t,0),o=s(t,r[0]);e.issuer=n.getX500Name(o);var a=i(t,r[1]);return e.serial={hex:a},e},this.getAttributeList=function(t){for(var e=[],n=l(t,0),r=0;r<n.length;r++){var i=s(t,n[r]),o=this.getAttribute(i);e.push(o)}return{array:e}},this.getAttribute=function(t){var e={},n=l(t,0),i=r.getOID(t,n[0]),o=at.asn1.x509.OID.oid2name(i);e.attr=o;var a=s(t,n[1]),u=l(a,0);if(1==u.length)e.valhex=s(a,u[0]);else{for(var c=[],h=0;h<u.length;h++)c.push(s(a,u[h]));e.valhex=c}return"contentType"==o?this.setContentType(e):"messageDigest"==o?this.setMessageDigest(e):"signingTime"==o?this.setSigningTime(e):"signingCertificate"==o?this.setSigningCertificate(e):"signingCertificateV2"==o?this.setSigningCertificateV2(e):"signaturePolicyIdentifier"==o&&this.setSignaturePolicyIdentifier(e),e},this.setContentType=function(t){var e=r.getOIDName(t.valhex,0,null);null!=e&&(t.type=e,delete t.valhex)},this.setSigningTime=function(t){var e=yt(i(t.valhex,0));t.str=e,delete t.valhex},this.setMessageDigest=function(t){var e=i(t.valhex,0);t.hex=e,delete t.valhex},this.setSigningCertificate=function(t){var e=l(t.valhex,0);if(e.length>0){for(var n=s(t.valhex,e[0]),r=l(n,0),i=[],o=0;o<r.length;o++){var a=s(n,r[o]),u=this.getESSCertID(a);i.push(u)}t.array=i}if(e.length>1){var c=s(t.valhex,e[1]);t.polhex=c}delete t.valhex},this.setSignaturePolicyIdentifier=function(t){var n=l(t.valhex,0);if(n.length>0){var o=r.getOID(t.valhex,n[0]);t.oid=o}if(n.length>1){var a=new e,u=l(t.valhex,n[1]),c=s(t.valhex,u[0]),h=a.getAlgorithmIdentifierName(c);t.alg=h;var p=i(t.valhex,u[1]);t.hash=p}delete t.valhex},this.setSigningCertificateV2=function(t){var e=l(t.valhex,0);if(e.length>0){for(var n=s(t.valhex,e[0]),r=l(n,0),i=[],o=0;o<r.length;o++){var a=s(n,r[o]),u=this.getESSCertIDv2(a);i.push(u)}t.array=i}if(e.length>1){var c=s(t.valhex,e[1]);t.polhex=c}delete t.valhex},this.getESSCertID=function(t){var e={},n=l(t,0);if(n.length>0){var r=i(t,n[0]);e.hash=r}if(n.length>1){var o=s(t,n[1]),a=this.getIssuerSerial(o);null!=a.serial&&(e.serial=a.serial),null!=a.issuer&&(e.issuer=a.issuer)}return e},this.getESSCertIDv2=function(e){var r={},o=l(e,0);if(o.length<1||3<o.length)throw new t("wrong number of elements");var a=0;if("30"==e.substr(o[0],2)){var u=s(e,o[0]);r.alg=n.getAlgorithmIdentifierName(u),a++}else r.alg="sha256";var c=i(e,o[a]);if(r.hash=c,o.length>a+1){var h=s(e,o[a+1]),p=this.getIssuerSerial(h);r.issuer=p.issuer,r.serial=p.serial}return r},this.getIssuerSerial=function(t){var e={},r=l(t,0),o=s(t,r[0]),a=n.getGeneralNames(o);e.issuer=a[0].dn;var u=i(t,r[1]);return e.serial={hex:u},e},this.getCertificateSet=function(t){for(var e=l(t,0),n=[],r=0;r<e.length;r++){var i=s(t,e[r]);if("30"==i.substr(0,2)){var o=Et(i,"CERTIFICATE");n.push(o)}}return{array:n,sortflag:!1}}},void 0!==at&&at||(at={}),void 0!==at.asn1&&at.asn1||(at.asn1={}),void 0!==at.asn1.tsp&&at.asn1.tsp||(at.asn1.tsp={}),at.asn1.tsp.TimeStampToken=function(t){var e=at.asn1.tsp;e.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var t=new e.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=t.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.tsp.TimeStampToken,at.asn1.cms.SignedData),at.asn1.tsp.TSTInfo=function(t){Error;var e=at.asn1,n=e.DERSequence,r=e.DERInteger,i=e.DERBoolean,s=e.DERGeneralizedTime,o=e.DERObjectIdentifier,a=e.DERTaggedObject,u=e.tsp,c=u.MessageImprint,l=u.Accuracy,h=e.x509.GeneralName;if(u.TSTInfo.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw new Error("policy shall be specified.");if(t.push(this.dPolicy),null==this.dMessageImprint)throw new Error("messageImprint shall be specified.");if(t.push(this.dMessageImprint),null==this.dSerial)throw new Error("serialNumber shall be specified.");if(t.push(this.dSerial),null==this.dGenTime)throw new Error("genTime shall be specified.");t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var e=new n({array:t});return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new c(t.messageImprint)),void 0!==t.serial&&(this.dSerial=new r(t.serial)),void 0!==t.genTime&&(this.dGenTime=new s(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new l(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new i),void 0!==t.nonce&&(this.dNonce=new r(t.nonce)),void 0!==t.tsa&&(this.dTsa=new a({tag:"a0",explicit:!0,obj:new h({dn:t.tsa})}))}},jt(at.asn1.tsp.TSTInfo,at.asn1.ASN1Object),at.asn1.tsp.Accuracy=function(t){var e=at.asn1,n=e.ASN1Util.newObject;e.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];return null!=t.seconds&&"number"==typeof t.seconds&&e.push({int:t.seconds}),null!=t.millis&&"number"==typeof t.millis&&e.push({tag:{tagi:"80",obj:{int:t.millis}}}),null!=t.micros&&"number"==typeof t.micros&&e.push({tag:{tagi:"81",obj:{int:t.micros}}}),n({seq:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.tsp.Accuracy,at.asn1.ASN1Object),at.asn1.tsp.MessageImprint=function(t){var e=at.asn1,n=e.DERSequence,r=e.DEROctetString,i=e.x509.AlgorithmIdentifier;e.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=new i({name:t.alg}),s=new r({hex:t.hash});return new n({array:[e,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.tsp.MessageImprint,at.asn1.ASN1Object),at.asn1.tsp.TimeStampReq=function(t){var e=at.asn1,n=e.DERSequence,r=e.DERInteger,i=e.DERBoolean,s=e.DERObjectIdentifier,o=e.tsp,a=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];return e.push(new r({int:1})),e.push(t.messageImprint instanceof at.asn1.ASN1Object?t.messageImprint:new a(t.messageImprint)),null!=t.policy&&e.push(new s(t.policy)),null!=t.nonce&&e.push(new r(t.nonce)),1==t.certreq&&e.push(new i),new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.tsp.TimeStampReq,at.asn1.ASN1Object),at.asn1.tsp.TimeStampResp=function(t){var e=at.asn1,n=e.DERSequence,r=e.tsp,i=r.PKIStatusInfo;r.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,s=[];if(null!=t.econtent||null!=t.tst)if(s.push(new i(null!=t.statusinfo?t.statusinfo:"granted")),null!=t.econtent)s.push(new r.TimeStampToken(t).getContentInfo());else{if(!(t.tst instanceof e.ASN1Object))throw new Error("improper member tst value");s.push(t.tst)}else{if(null==t.statusinfo)throw new Error("parameter for token nor statusinfo not specified");s.push(new i(t.statusinfo))}return new n({array:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.tsp.TimeStampResp,at.asn1.ASN1Object),at.asn1.tsp.PKIStatusInfo=function(t){var e=Error,n=at.asn1,r=n.DERSequence,i=n.tsp,s=i.PKIStatus,o=i.PKIFreeText,a=i.PKIFailureInfo;i.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,n=[];if("string"==typeof t)n.push(new s(t));else{if(null==t.status)throw new e("property 'status' unspecified");n.push(new s(t.status)),null!=t.statusstr&&n.push(new o(t.statusstr)),null!=t.failinfo&&n.push(new a(t.failinfo))}return new r({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.tsp.PKIStatusInfo,at.asn1.ASN1Object),at.asn1.tsp.PKIStatus=function(t){var e=Error,n=at.asn1,r=n.DERInteger;n.tsp.PKIStatus.superclass.constructor.call(this);var i={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var t,n=this.params;if("string"==typeof n)try{t=i[n]}catch(h){throw new e("undefined name: "+n)}else{if("number"!=typeof n)throw new e("unsupported params");t=n}return new r({int:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.tsp.PKIStatus,at.asn1.ASN1Object),at.asn1.tsp.PKIFreeText=function(t){var e=Error,n=at.asn1,r=n.DERSequence,i=n.DERUTF8String;n.tsp.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(!t instanceof Array)throw new e("wrong params: not array");for(var n=[],s=0;s<t.length;s++)n.push(new i({str:t[s]}));return new r({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.tsp.PKIFreeText,at.asn1.ASN1Object),at.asn1.tsp.PKIFailureInfo=function(t){var e=Error,n=at.asn1,r=n.DERBitString,i={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};n.tsp.PKIFailureInfo.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var t=this.params,n=0;if("number"==typeof t&&0<=t&&t<=25){for(var r=(n|=1<<t).toString(2),s="",o=r.length-1;o>=0;o--)s+=r[o];return s}if("string"==typeof t&&null!=i[t])return Vt([t],i);if("object"==typeof t&&null!=t.length)return Vt(t,i);throw new e("wrong params")},this.tohex=function(){var t=this.getBinValue();return new r({bin:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.tsp.PKIFailureInfo,at.asn1.ASN1Object),at.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(t,e){throw"not implemented yet"}},at.asn1.tsp.SimpleTSAAdapter=function(t){var e=at.asn1.tsp,n=at.crypto.Util.hashHex;e.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,r){var i=n(t,r);this.params.econtent.content.messageImprint={alg:r,hash:i},this.params.econtent.content.serial={int:this.serial++};var s=Math.floor(1e9*Math.random());return this.params.econtent.content.nonce={int:s},new e.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},jt(at.asn1.tsp.SimpleTSAAdapter,at.asn1.tsp.AbstractTSAAdapter),at.asn1.tsp.FixedTSAAdapter=function(t){var e=at.asn1.tsp,n=at.crypto.Util.hashHex;e.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,r){var i=n(t,r);return this.params.econtent.content.messageImprint={alg:r,hash:i},new e.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},jt(at.asn1.tsp.FixedTSAAdapter,at.asn1.tsp.AbstractTSAAdapter),at.asn1.tsp.TSPUtil=new function(){},at.asn1.tsp.TSPUtil.newTimeStampToken=function(t){return new at.asn1.tsp.TimeStampToken(t)},at.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){return(new at.asn1.tsp.TSPParser).getTimeStampReq(t)},at.asn1.tsp.TSPUtil.parseMessageImprint=function(t){return(new at.asn1.tsp.TSPParser).getMessageImprint(t)},at.asn1.tsp.TSPParser=function(){Error;var t=new qt,e=lt,n=e.getV,r=e.getTLV,i=e.getIdxbyList,s=e.getChildIdx,o=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],a={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(t){var e=s(t,0);if(1==e.length)return this.getPKIStatusInfo(r(t,e[0]));if(e.length>1){var n=this.getPKIStatusInfo(r(t,e[0])),i=r(t,e[1]),o=this.getToken(i);return o.statusinfo=n,o}},this.getToken=function(t){var e=(new at.asn1.cms.CMSParser).getCMSSignedData(t);return this.setTSTInfo(e),e},this.setTSTInfo=function(t){var e=t.econtent;if("tstinfo"==e.type){var n=this.getTSTInfo(e.content.hex);e.content=n}},this.getTSTInfo=function(e){var i={},o=s(e,0),a=n(e,o[1]);i.policy=Mt(a);var u=r(e,o[2]);i.messageImprint=this.getMessageImprint(u);var c=n(e,o[3]);i.serial={hex:c};var l=n(e,o[4]);i.genTime={str:yt(l)};var h=0;if(o.length>5&&"30"==e.substr(o[5],2)){var p=r(e,o[5]);i.accuracy=this.getAccuracy(p),h++}if(o.length>5+h&&"01"==e.substr(o[5+h],2)&&("ff"==n(e,o[5+h])&&(i.ordering=!0),h++),o.length>5+h&&"02"==e.substr(o[5+h],2)){var f=n(e,o[5+h]);i.nonce={hex:f},h++}if(o.length>5+h&&"a0"==e.substr(o[5+h],2)){var d=r(e,o[5+h]);d="30"+d.substr(2),pGeneralNames=t.getGeneralNames(d);var m=pGeneralNames[0].dn;i.tsa=m,h++}if(o.length>5+h&&"a1"==e.substr(o[5+h],2)){var g=r(e,o[5+h]);g="30"+g.substr(2);var v=t.getExtParamArray(g);i.ext=v,h++}return i},this.getAccuracy=function(t){for(var e={},r=s(t,0),i=0;i<r.length;i++){var o=t.substr(r[i],2),a=n(t,r[i]),u=parseInt(a,16);"02"==o?e.seconds=u:"80"==o?e.millis=u:"81"==o&&(e.micros=u)}return e},this.getMessageImprint=function(t){if("30"!=t.substr(0,2))throw new Error("head of messageImprint hex shall be x30");var r={},o=(s(t,0),i(t,0,[0,0])),a=n(t,o),u=e.hextooidstr(a),c=at.asn1.x509.OID.oid2name(u);if(""==c)throw new Error("hashAlg name undefined: "+u);var l=c,h=i(t,0,[1]);return r.alg=l,r.hash=n(t,h),r},this.getPKIStatusInfo=function(t){var e={},i=s(t,0),a=0;try{var u=n(t,i[0]),c=parseInt(u,16);e.status=o[c]}catch(p){}if(i.length>1&&"30"==t.substr(i[1],2)){var l=r(t,i[1]);e.statusstr=this.getPKIFreeText(l),a++}if(i.length>a&&"03"==t.substr(i[1+a],2)){var h=r(t,i[1+a]);e.failinfo=this.getPKIFailureInfo(h)}return e},this.getPKIFreeText=function(t){for(var n=[],r=s(t,0),i=0;i<r.length;i++)n.push(e.getString(t,r[i]));return n},this.getPKIFailureInfo=function(t){var n=e.getInt(t,0);return null!=a[n]?a[n]:n},this.getTimeStampReq=function(t){var i={certreq:!1},o=s(t,0);if(o.length<2)throw new Error("TimeStampReq must have at least 2 items");var a=r(t,o[1]);i.messageImprint=at.asn1.tsp.TSPUtil.parseMessageImprint(a);for(var u=2;u<o.length;u++){var c=o[u],l=t.substr(c,2);if("06"==l){var h=n(t,c);i.policy=e.hextooidstr(h)}"02"==l&&(i.nonce=n(t,c)),"01"==l&&(i.certreq=!0)}return i}},void 0!==at&&at||(at={}),void 0!==at.asn1&&at.asn1||(at.asn1={}),void 0!==at.asn1.cades&&at.asn1.cades||(at.asn1.cades={}),at.asn1.cades.SignaturePolicyIdentifier=function(t){var e=at.asn1.cades,n=e.SignaturePolicyId;e.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new n(this.params)]},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},jt(at.asn1.cades.SignaturePolicyIdentifier,at.asn1.cms.Attribute),at.asn1.cades.SignaturePolicyId=function(t){var e=at.asn1,n=e.DERSequence,r=e.DERObjectIdentifier,i=e.cades,s=i.OtherHashAlgAndValue;i.SignaturePolicyId.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];return e.push(new r(t.oid)),e.push(new s(t)),new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},jt(at.asn1.cades.SignaturePolicyId,at.asn1.ASN1Object),at.asn1.cades.OtherHashAlgAndValue=function(t){var e=Error,n=at.asn1,r=n.DERSequence,i=n.DEROctetString,s=n.x509.AlgorithmIdentifier;n.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(null==t.alg)throw new e("property 'alg' not specified");if(null==t.hash&&null==t.cert)throw new e("property 'hash' nor 'cert' not specified");var n=null;if(null!=t.hash)n=t.hash;else if(null!=t.cert){if("string"!=typeof t.cert)throw new e("cert not string");var o=t.cert;-1!=t.cert.indexOf("-----BEGIN")&&(o=_t(t.cert)),n=at.crypto.Util.hashHex(o,t.alg)}var a=[];return a.push(new s({name:t.alg})),a.push(new i({hex:n})),new r({array:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cades.OtherHashAlgAndValue,at.asn1.ASN1Object),at.asn1.cades.OtherHashValue=function(t){at.asn1.cades.OtherHashValue.superclass.constructor.call(this);var e=Error,n=at.asn1.DEROctetString;this.params=null,this.tohex=function(){var t=this.params;if(null==t.hash&&null==t.cert)throw new e("hash or cert not specified");var r=null;if(null!=t.hash)r=t.hash;else if(null!=t.cert){if("string"!=typeof t.cert)throw new e("cert not string");var i=t.cert;-1!=t.cert.indexOf("-----BEGIN")&&(i=_t(t.cert)),r=at.crypto.Util.hashHex(i,"sha1")}return new n({hex:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cades.OtherHashValue,at.asn1.ASN1Object),at.asn1.cades.SignatureTimeStamp=function(t){var e=Error,n=at.lang.String.isHex,r=at.asn1,i=r.ASN1Object;r.cades.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var t=this.params;if(null!=t.tst){if(n(t.tst))return(r=new i).hTLV=t.tst,[r];if(t.tst instanceof i)return[t.tst];throw new e("params.tst has wrong value")}if(null!=t.res){var r,s=t.res;if(s instanceof i&&(s=s.tohex()),"string"!=typeof s||!n(s))throw new e("params.res has wrong value");return lt.getTLVbyList(s,0,[1]),(r=new i).hTLV=t.tst,[r]}},null!=t&&this.setByParam(t)},jt(at.asn1.cades.SignatureTimeStamp,at.asn1.cms.Attribute),at.asn1.cades.CompleteCertificateRefs=function(t){var e=Error,n=at.asn1,r=n.DERSequence,i=n.cades,s=i.OtherCertID,o=at.lang.String.isHex;i.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var t=this.params,n=[],i=0;i<t.array.length;i++){var a=t.array[i];if("string"==typeof a)if(-1!=a.indexOf("-----BEGIN"))a={cert:a};else{if(!o(a))throw new e("unsupported value: "+a);a={hash:a}}null!=t.alg&&null==a.alg&&(a.alg=t.alg),null!=t.hasis&&null==a.hasis&&(a.hasis=t.hasis);var u=new s(a);n.push(u)}return[new r({array:n})]},null!=t&&this.setByParam(t)},jt(at.asn1.cades.CompleteCertificateRefs,at.asn1.cms.Attribute),at.asn1.cades.OtherCertID=function(t){var e=at.asn1,n=e.DERSequence,r=e.cms.IssuerSerial,i=e.cades,s=i.OtherHashValue,o=i.OtherHashAlgAndValue;i.OtherCertID.superclass.constructor.call(this),this.params=t,this.tohex=function(){var t=this.params;"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?t={cert:t}:_isHex(t)&&(t={hash:t}));var e,i=[];if(e=null!=t.alg?new o(t):new s(t),i.push(e),null!=t.cert&&1==t.hasis||null!=t.issuer&&null!=t.serial){var a=new r(t);i.push(a)}return new n({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cades.OtherCertID,at.asn1.ASN1Object),at.asn1.cades.OtherHash=function(t){Error;var e=at.asn1.cades,n=e.OtherHashAlgAndValue,r=e.OtherHashValue,i=at.lang.String.isHex;e.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;return"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?t={cert:t}:i(t)&&(t={hash:t})),(null!=t.alg?new n(t):new r(t)).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.cades.OtherHash,at.asn1.ASN1Object),at.asn1.cades.CAdESUtil=new function(){},at.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){return(new at.asn1.cms.CMSParser).getCMSSignedData(t)},at.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,n){var r=lt.getTLV,i=lt.getV,s=at.asn1,o=s.ASN1Object,a=s.cms,u=a.AttributeList,c=a.SignerInfo,l={},h=(0,lt.getChildIdx)(t,e);if(6!=h.length)throw"not supported items for SignerInfo (!=6)";var p=h.shift();l.version=r(t,p);var f=h.shift();l.si=r(t,f);var d=h.shift();l.digalg=r(t,d);var m=h.shift();l.sattrs=r(t,m);var g=h.shift();l.sigalg=r(t,g);var v=h.shift();l.sig=r(t,v),l.sigval=i(t,v);var y=null;return l.obj=new c,(y=new o).hTLV=l.version,l.obj.dCMSVersion=y,(y=new o).hTLV=l.si,l.obj.dSignerIdentifier=y,(y=new o).hTLV=l.digalg,l.obj.dDigestAlgorithm=y,(y=new o).hTLV=l.sattrs,l.obj.dSignedAttrs=y,(y=new o).hTLV=l.sigalg,l.obj.dSigAlg=y,(y=new o).hTLV=l.sig,l.obj.dSig=y,l.obj.dUnsignedAttrs=new u,l},void 0!==at.asn1.csr&&at.asn1.csr||(at.asn1.csr={}),at.asn1.csr.CertificationRequest=function(t){var e=at.asn1,n=e.DERBitString,r=e.DERSequence,i=e.csr,s=i.CertificationRequestInfo;i.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(t){this.params=t},this.sign=function(){var t=new s(this.params).tohex(),e=new at.crypto.Signature({alg:this.params.sigalg});e.init(this.params.sbjprvkey),e.updateHex(t);var n=e.sign();this.params.sighex=n},this.getPEM=function(){return Et(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var t=this.params,e=new at.asn1.csr.CertificationRequestInfo(this.params),i=new at.asn1.x509.AlgorithmIdentifier({name:t.sigalg});if(null==t.sighex&&null!=t.sbjprvkey&&this.sign(),null==t.sighex)throw new Error("sighex or sbjprvkey parameter not defined");var s=new n({hex:"00"+t.sighex});return new r({array:[e,i,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.csr.CertificationRequest,at.asn1.ASN1Object),at.asn1.csr.CertificationRequestInfo=function(t){var e=at.asn1,n=e.DERSequence,r=e.DERInteger,i=e.DERUTF8String,s=e.DERTaggedObject,o=e.ASN1Util.newObject,a=e.x509,u=a.X500Name,c=a.Extensions,l=a.SubjectPublicKeyInfo;e.csr.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(t){null!=t&&(this.params=t)},this.tohex=function(){var t=this.params,e=[];if(e.push(new r({int:0})),e.push(new u(t.subject)),e.push(new l(Ut.getKey(t.sbjpubkey))),null!=t.attrs){var a=function(t){for(var e=Error,n=at.asn1.x509.Extensions,r=[],i=0;i<t.length;i++){var s=t[i],o=s.attr;if("extensionRequest"==o){var a=new n(s.ext);r.push({seq:[{oid:"1.2.840.113549.1.9.14"},{set:[a]}]})}else if("unstructuredName"==o)r.push({seq:[{oid:"1.2.840.113549.1.9.2"},{set:s.names}]});else{if("challengePassword"!=o)throw new e("unknown CSR attribute");r.push({seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:s.password}]}]})}}return{set:r}}(t.attrs),h=o({tag:{tage:"a0",obj:a}});e.push(h)}else if(null!=t.extreq){var p=new c(t.extreq);h=o({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[p]}]}}}),e.push(h)}else e.push(new s({tag:"a0",explicit:!1,obj:new i({str:""})}));return new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},jt(at.asn1.csr.CertificationRequestInfo,at.asn1.ASN1Object),at.asn1.csr.AttributeList=function(t){},jt(at.asn1.csr.AttributeList,at.asn1.ASN1Object),at.asn1.csr.CSRUtil=new function(){},at.asn1.csr.CSRUtil.newCSRPEM=function(t){return new at.asn1.csr.CertificationRequest(t).getPEM()},at.asn1.csr.CSRUtil.getParam=function(t,e){var n=lt.getV,r=lt.getIdxbyList,i=lt.getTLVbyList,s=lt.getTLVbyListEx,o=lt.getVbyListEx,a={};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw new Error("argument is not PEM file");var u=_t(t,"CERTIFICATE REQUEST");e&&(a.tbs=i(u,0,[0]));try{var c=s(u,0,[0,1]);if("3000"==c)a.subject={};else{var l=new qt;a.subject=l.getX500Name(c)}}catch(g){}var h=s(u,0,[0,2]),p=Ut.getKey(h,null,"pkcs8pub");a.sbjpubkey=Ut.getPEM(p,"PKCS8PUB");var f=function(t){var e=r(t,0,[0,3,0,0],"06");return"2a864886f70d01090e"!=n(t,e)?null:i(t,0,[0,3,0,1,0],"30")}(u);l=new qt,null!=f&&(a.extreq=l.getExtParamArray(f));try{var d=s(u,0,[1],"30");l=new qt,a.sigalg=l.getAlgorithmIdentifierName(d)}catch(g){}try{var m=o(u,0,[2]);a.sighex=m}catch(g){}return a},at.asn1.csr.CSRUtil.verifySignature=function(t){try{var e=null;if("string"==typeof t&&-1!=t.indexOf("-----BEGIN CERTIFICATE REQUEST")?e=at.asn1.csr.CSRUtil.getParam(t,!0):"object"==typeof t&&null!=t.sbjpubkey&&null!=t.sigalg&&null!=t.sighex&&null!=t.tbs&&(e=t),null==e)return!1;var n=new at.crypto.Signature({alg:e.sigalg});return n.init(e.sbjpubkey),n.updateHex(e.tbs),n.verify(e.sighex)}catch(r){return alert(r),!1}},void 0!==at&&at||(at={}),void 0!==at.asn1&&at.asn1||(at.asn1={}),void 0!==at.asn1.ocsp&&at.asn1.ocsp||(at.asn1.ocsp={}),at.asn1.ocsp.DEFAULT_HASH="sha1",at.asn1.ocsp.OCSPResponse=function(t){at.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var e=at.asn1.ASN1Util.newObject,n=at.asn1.ocsp.ResponseBytes,r=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var t=this.params.resstatus;return"number"==typeof t?t:"string"!=typeof t?-1:r.indexOf(t)},this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params,r=this._getStatusCode();if(-1==r)throw new Error("responseStatus not supported: "+t.resstatus);if(0!=r)return e({seq:[{enum:{int:r}}]}).tohex();var i=new n(t);return e({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:i}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.ocsp.OCSPResponse,at.asn1.ASN1Object),at.asn1.ocsp.ResponseBytes=function(t){at.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var e=at.asn1,n=e.DERSequence,r=e.DERObjectIdentifier,i=e.DEROctetString,s=e.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params;if("ocspBasic"!=t.restype)throw new Error("not supported responseType: "+t.restype);var e=new s(t),o=[];return o.push(new r({name:"ocspBasic"})),o.push(new i({hex:e.tohex()})),new n({array:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.ocsp.ResponseBytes,at.asn1.ASN1Object),at.asn1.ocsp.BasicOCSPResponse=function(t){at.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var e=Error,n=at.asn1,r=n.ASN1Object,i=n.DERSequence,s=n.DERTaggedObject,o=n.DERBitString,a=n.x509.AlgorithmIdentifier,u=n.ocsp;_SingleResponseList=u.SingleResponseList,_ResponseData=u.ResponseData,this.params=null,this.setByParam=function(t){this.params=t},this.sign=function(){var t=this.params,e=t.tbsresp.tohex(),n=new at.crypto.Signature({alg:t.sigalg});n.init(t.reskey),n.updateHex(e),t.sighex=n.sign()},this.tohex=function(){var t=this.params;null==t.tbsresp&&(t.tbsresp=new _ResponseData(t)),null==t.sighex&&null!=t.reskey&&this.sign();var n=[];if(n.push(t.tbsresp),n.push(new a({name:t.sigalg})),n.push(new o({hex:"00"+t.sighex})),null!=t.certs&&null!=t.certs.length){for(var u=[],c=0;c<t.certs.length;c++){var l=t.certs[c],h=null;if(lt.isASN1HEX(l))h=l;else{if(!l.match(/-----BEGIN/))throw new e("certs["+c+"] not hex or PEM");h=_t(l)}u.push(new r({tlv:h}))}var p=new i({array:u});n.push(new s({tag:"a0",explicit:!0,obj:p}))}return new i({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.ocsp.BasicOCSPResponse,at.asn1.ASN1Object),at.asn1.ocsp.ResponseData=function(t){at.asn1.ocsp.ResponseData.superclass.constructor.call(this);var e=Error,n=at.asn1,r=n.DERSequence,i=n.DERGeneralizedTime,s=n.DERTaggedObject,o=n.x509.Extensions,a=n.ocsp,u=a.ResponderID;_SingleResponseList=a.SingleResponseList,this.params=null,this.tohex=function(){var t=this.params;null!=t.respid&&new e("respid not specified"),null!=t.prodat&&new e("prodat not specified"),null!=t.array&&new e("array not specified");var n=[];if(n.push(new u(t.respid)),n.push(new i(t.prodat)),n.push(new _SingleResponseList(t.array)),null!=t.ext){var a=new o(t.ext);n.push(new s({tag:"a1",explicit:!0,obj:a}))}return new r({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},jt(at.asn1.ocsp.ResponseData,at.asn1.ASN1Object),at.asn1.ocsp.ResponderID=function(t){at.asn1.ocsp.ResponderID.superclass.constructor.call(this);var e=at.asn1,n=e.ASN1Util.newObject,r=e.x509.X500Name,i=at.lang.String.isHex,s=Error;this.params=null,this.tohex=function(){var t=this.params;if(null!=t.key){var e,o=null;if("string"==typeof t.key?(i(t.key)&&(o=t.key),t.key.match(/-----BEGIN CERTIFICATE/)&&null!=(e=new qt(t.key).getExtSubjectKeyIdentifier())&&(o=e.kid.hex)):t.key instanceof qt&&null!=(e=t.key.getExtSubjectKeyIdentifier())&&(o=e.kid.hex),null==o)throw new s("wrong key member value");return n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:o}}}}).tohex()}if(null!=t.name){var a=null;if("string"==typeof t.name&&t.name.match(/-----BEGIN CERTIFICATE/)?a=new qt(t.name).getSubject():t.name instanceof qt?a=t.name.getSubject():"object"!=typeof t.name||null==t.name.array&&null==t.name.str||(a=t.name),null==a)throw new s("wrong name member value");return n({tag:{tag:"a1",explicit:!0,obj:new r(a)}}).tohex()}throw new s("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},jt(at.asn1.ocsp.ResponderID,at.asn1.ASN1Object),at.asn1.ocsp.SingleResponseList=function(t){at.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var e=at.asn1,n=e.DERSequence,r=e.ocsp.SingleResponse;this.params=null,this.tohex=function(){var t=this.params;if("object"!=typeof t||null==t.length)throw new Error("params not specified properly");for(var e=[],i=0;i<t.length;i++)e.push(new r(t[i]));return new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},jt(at.asn1.ocsp.SingleResponseList,at.asn1.ASN1Object),at.asn1.ocsp.SingleResponse=function(t){var e=Error,n=at.asn1,r=n.DERSequence,i=n.DERGeneralizedTime,s=n.DERTaggedObject,o=n.ocsp,a=o.CertID,u=o.CertStatus,c=n.x509.Extensions;o.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,n=[];if(null==t.certid)throw new e("certid unspecified");if(null==t.status)throw new e("status unspecified");if(null==t.thisupdate)throw new e("thisupdate unspecified");if(n.push(new a(t.certid)),n.push(new u(t.status)),n.push(new i(t.thisupdate)),null!=t.nextupdate){var o=new i(t.nextupdate);n.push(new s({tag:"a0",explicit:!0,obj:o}))}if(null!=t.ext){var l=new c(t.ext);n.push(new s({tag:"a1",explicit:!0,obj:l}))}return new r({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},jt(at.asn1.ocsp.SingleResponse,at.asn1.ASN1Object),at.asn1.ocsp.CertID=function(t){var e=at.asn1,n=e.DEROctetString,r=e.DERInteger,i=e.DERSequence,s=e.x509.AlgorithmIdentifier,o=at.crypto.Util.hashHex,a=qt,u=lt.getVbyList;e.ocsp.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(t,e,n,r){null==r&&(r=this.DEFAULT_HASH),this.params={alg:r,issname:t,isskey:e,sbjsn:n}},this.setByCert=function(t,e,n){null==n&&(n=this.DEFAULT_HASH),this.params={alg:n,issuerCert:t,subjectCert:e}},this.getParamByCerts=function(t,e,n){null==n&&(n=this.DEFAULT_HASH);var r=new a(t),i=new a(e),s=o(r.getSubjectHex(),n),c=r.getPublicKeyHex();return{alg:n,issname:s,isskey:o(u(c,0,[1],"03",!0),n),sbjsn:i.getSerialNumberHex()}},this.tohex=function(){if("object"!=typeof this.params)throw new Error("params not set");var t,e,o,a,u=this.params;if(a=null==u.alg?this.DEFAULT_HASH:u.alg,null!=u.issuerCert&&null!=u.subjectCert){var c=this.getParamByCerts(u.issuerCert,u.subjectCert,a);t=c.issname,e=c.isskey,o=c.sbjsn}else{if(null==u.issname||null==u.isskey||null==u.sbjsn)throw new Error("required param members not defined");t=u.issname,e=u.isskey,o=u.sbjsn}var l=new s({name:a}),h=new n({hex:t}),p=new n({hex:e}),f=new r({hex:o}),d=new i({array:[l,h,p,f]});return this.hTLV=d.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},jt(at.asn1.ocsp.CertID,at.asn1.ASN1Object),at.asn1.ocsp.CertStatus=function(t){at.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if("good"==t.status)return"8000";if("unknown"==t.status)return"8200";if("revoked"==t.status){var e=[{gentime:{str:t.time}}];return null!=t.reason&&e.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:t.reason}}}}),at.asn1.ASN1Util.newObject({tag:{tag:"a1",explicit:!1,obj:{seq:e}}}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},jt(at.asn1.ocsp.CertStatus,at.asn1.ASN1Object),at.asn1.ocsp.Request=function(t){var e=at.asn1,n=e.DERSequence,r=e.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new n({array:t});return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t){var i=new r.CertID(t);this.dReqCert=i}},jt(at.asn1.ocsp.Request,at.asn1.ASN1Object),at.asn1.ocsp.TBSRequest=function(t){var e=at.asn1,n=e.DERSequence,r=e.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],n=0;n<t.length;n++){var i=new r.Request(t[0]);e.push(i)}this.dRequestList=e},this.tohex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new n({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:t});return this.hTLV=r.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},jt(at.asn1.ocsp.TBSRequest,at.asn1.ASN1Object),at.asn1.ocsp.OCSPRequest=function(t){var e=at.asn1,n=e.DERSequence,r=e.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new n({array:t});return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&void 0!==t.reqList){var i=new r.TBSRequest(t);this.dTbsRequest=i}},jt(at.asn1.ocsp.OCSPRequest,at.asn1.ASN1Object),at.asn1.ocsp.OCSPUtil={},at.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,n){var r=at.asn1.ocsp;return void 0===n&&(n=r.DEFAULT_HASH),new r.OCSPRequest({reqList:[{alg:n,issuerCert:t,subjectCert:e}]}).tohex()},at.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=lt.getVbyList,n=lt.getVbyListEx,r=lt.getIdxbyList,i=lt.getV,s={};try{var o=n(t,0,[0],"0a");s.responseStatus=parseInt(o,16)}catch(l){}if(0!==s.responseStatus)return s;try{var a=r(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(a,2)?s.certStatus="good":"a1"===t.substr(a,2)?(s.certStatus="revoked",s.revocationTime=yt(e(t,a,[0]))):"82"===t.substr(a,2)&&(s.certStatus="unknown")}catch(l){}try{var u=r(t,0,[1,0,1,0,0,2,0,2]);s.thisUpdate=yt(i(t,u))}catch(l){}try{var c=r(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(c,2)&&(s.nextUpdate=yt(e(t,c,[0])))}catch(l){}return s},at.asn1.ocsp.OCSPParser=function(){var t=Error,e=qt,n=new e,r=lt.getV,i=lt.getTLV,s=lt.getIdxbyList,o=lt.getVbyList,a=lt.getTLVbyList,u=lt.getVbyListEx,c=lt.getTLVbyListEx,l=lt.getChildIdx;this.getOCSPRequest=function(e){var n=l(e,0);if(1!=n.length&&2!=n.length)throw new t("wrong number elements: "+n.length);return this.getTBSRequest(i(e,n[0]))},this.getTBSRequest=function(t){var e={},r=c(t,0,[0],"30");e.array=this.getRequestList(r);var i=c(t,0,["[2]",0],"30");return null!=i&&(e.ext=n.getExtParamArray(i)),e},this.getRequestList=function(t){for(var e=[],n=l(t,0),r=0;r<n.length;r++)t=i(t,n[r]),e.push(this.getRequest(t));return e},this.getRequest=function(e){var r=l(e,0);if(1!=r.length&&2!=r.length)throw new t("wrong number elements: "+r.length);var o=this.getCertID(i(e,r[0]));if(2==r.length){var a=s(e,0,[1,0]);o.ext=n.getExtParamArray(i(e,a))}return o},this.getCertID=function(n){var s=l(n,0);if(4!=s.length)throw new t("wrong number elements: "+s.length);var o=new e,a={};return a.alg=o.getAlgorithmIdentifierName(i(n,s[0])),a.issname=r(n,s[1]),a.isskey=r(n,s[2]),a.sbjsn=r(n,s[3]),a},this.getOCSPResponse=function(t){var e,n=l(t,0),i=r(t,n[0]),s=parseInt(i);if(1==n.length)return{resstatus:s};var o=a(t,0,[1,0]);return(e=this.getResponseBytes(o)).resstatus=s,e},this.getResponseBytes=function(t){var e,n=l(t,0),i=a(t,0,[1,0]);e=this.getBasicOCSPResponse(i);var s=r(t,n[0]);return e.restype=at.asn1.x509.OID.oid2name(Mt(s)),e},this.getBasicOCSPResponse=function(t){var e,n=l(t,0);e=this.getResponseData(i(t,n[0]));var s=new qt;e.alg=s.getAlgorithmIdentifierName(i(t,n[1]));var o=r(t,n[2]);e.sighex=o.substr(2);var a=u(t,0,["[0]"]);if(null!=a){for(var c=l(a,0),h=[],p=0;p<c.length;p++){var f=i(a,c[p]);h.push(f)}e.certs=h}return e},this.getResponseData=function(t){var e=l(t,0),n=e.length,s={},o=0;"a0"==t.substr(e[0],2)&&o++,s.respid=this.getResponderID(i(t,e[o++]));var u=r(t,e[o++]);if(s.prodat=yt(u),s.array=this.getSingleResponseList(i(t,e[o++])),"a1"==t.substr(e[n-1],2)){var c=a(t,e[n-1],[0]),h=new qt;s.ext=h.getExtParamArray(c)}return s},this.getResponderID=function(t){var e={};if("a2"==t.substr(0,2)){var n=o(t,0,[0]);e.key=n}if("a1"==t.substr(0,2)){var r=a(t,0,[0]),i=new qt;e.name=i.getX500Name(r)}return e},this.getSingleResponseList=function(t){for(var e=l(t,0),n=[],r=0;r<e.length;r++){var s=this.getSingleResponse(i(t,e[r]));n.push(s)}return n},this.getSingleResponse=function(t){var e=l(t,0),n={},s=this.getCertID(i(t,e[0]));n.certid=s;var u=this.getCertStatus(i(t,e[1]));if(n.status=u,"18"==t.substr(e[2],2)){var c=r(t,e[2]);n.thisupdate=yt(c)}for(var h=3;h<e.length;h++){if("a0"==t.substr(e[h],2)){var p=o(t,e[h],[0],"18");n.nextupdate=yt(p)}if("a1"==t.substr(e[h],2)){var f=new qt,d=a(t,0,[h,0]);n.ext=f.getExtParamArray(d)}}return n},this.getCertStatus=function(t){var e={};if("8000"==t)return{status:"good"};if("8200"==t)return{status:"unknown"};if("a1"==t.substr(0,2)){e.status="revoked";var n=yt(o(t,0,[0]));e.time=n}return e}},void 0!==at&&at||(at={}),void 0!==at.lang&&at.lang||(at.lang={}),at.lang.String=function(){},"function"==typeof Buffer?(ut=function(t){return ft(Buffer.from(t,"utf8").toString("base64"))},ct=function(t){return Buffer.from(dt(t),"base64").toString("utf8")}):(ut=function(t){return mt(St(Ft(t)))},ct=function(t){return decodeURIComponent(Ct(gt(t)))}),at.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},at.lang.String.isHex=function(t){return Bt(t)},at.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},at.lang.String.isBase64URL=function(t){return!t.match(/[+/=]/)&&(t=dt(t),at.lang.String.isBase64(t))},at.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},at.lang.String.isPrintable=function(t){return null!==t.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},at.lang.String.isIA5=function(t){return null!==t.match(/^[\x20-\x21\x23-\x7f]*$/)},at.lang.String.isMail=function(t){return null!==t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Lt=function(t,e,n){return null==n&&(n="0"),t.length>=e?t:new Array(e-t.length+1).join(n)+t};function Vt(t,e){for(var n=0,r=0;r<t.length;r++)n|=1<<e[t[r]];var i=n.toString(2),s="";for(r=i.length-1;r>=0;r--)s+=i[r];return s}function jt(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)}void 0!==at&&at||(at={}),void 0!==at.crypto&&at.crypto||(at.crypto={}),at.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:m.algo.MD5,sha1:m.algo.SHA1,sha224:m.algo.SHA224,sha256:m.algo.SHA256,sha384:m.algo.SHA384,sha512:m.algo.SHA512,ripemd160:m.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,n){var r=this.getDigestInfoHex(t,e),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+e;for(var s="0001",o="00"+r,a="",u=i-s.length-o.length,c=0;c<u;c+=2)a+="ff";return s+a+o},this.hashString=function(t,e){return new at.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new at.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return this.hashString(t,"sha1")},this.sha256=function(t){return this.hashString(t,"sha256")},this.sha256Hex=function(t){return this.hashHex(t,"sha256")},this.sha512=function(t){return this.hashString(t,"sha512")},this.sha512Hex=function(t){return this.hashHex(t,"sha512")},this.isKey=function(t){return t instanceof et||t instanceof at.crypto.DSA||t instanceof at.crypto.ECDSA}},at.crypto.Util.md5=function(t){return new at.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},at.crypto.Util.ripemd160=function(t){return new at.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},at.crypto.Util.SECURERANDOMGEN=new Z,at.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return at.crypto.Util.SECURERANDOMGEN.nextBytes(e),ht(e)},at.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new w(at.crypto.Util.getRandomHexOfNbytes(t),16)},at.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,n=new Array((t-e)/8+1);return at.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<e&255^255)&n[0],ht(n)},at.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new w(at.crypto.Util.getRandomHexOfNbits(t),16)},at.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var n=at.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(n))return n}},at.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var n=t.compareTo(e);if(1==n)throw"biMin is greater than biMax";if(0==n)return t;var r=e.subtract(t);return at.crypto.Util.getRandomBigIntegerZeroToMax(r).add(t)},at.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=at.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=at.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=at.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(n){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+n}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=m.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(m.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(n){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+n}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=at.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},at.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},at.crypto.MessageDigest.getHashLength=function(t){var e=at.crypto.MessageDigest,n=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[n])throw"not supported algorithm: "+t;return e.HASHLENGTH[n]},at.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},at.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=at.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var n=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==e){try{this.mac=m.algo.HMAC.create(at.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n],this.pass)}catch(u){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+u}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=m.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(m.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=xt(t)),void(this.pass=m.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;if(e=null,void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=vt(t.utf8)),void 0!==t.rstr&&(e=xt(t.rstr)),void 0!==t.b64&&(e=b(t.b64)),void 0!==t.b64u&&(e=gt(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=m.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=at.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},at.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n+="0";return n+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw new Error("provider not supported: "+e);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new at.crypto.MessageDigest({alg:this.mdAlgName})}catch(n){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+n)}this.init=function(t,e){var n=null;try{n=void 0===e?Ut.getKey(t):Ut.getKey(t,e)}catch(r){throw"init failed:"+r}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==at.crypto.ECDSA&&(this.prvKey=new at.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof et&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof et&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof at.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof at.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==at.crypto.ECDSA&&(this.pubKey=new at.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof et&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof et&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==at.crypto.ECDSA&&this.pubKey instanceof at.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==at.crypto.DSA&&this.pubKey instanceof at.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,this.provName=void 0===t.prov?at.crypto.Util.DEFAULTPROVIDER[this.algName]:t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=Ut.getKey(t.prvkeypem),this.init(e)}catch(a){throw"fatal error to load pem private key: "+a}}},at.crypto.Cipher=function(t){},at.crypto.Cipher.encrypt=function(t,e,n){if(e instanceof et&&e.isPublic){var r=at.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.encrypt(t);if("RSAOAEP"===r)return e.encryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.encryptOAEP(t,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},at.crypto.Cipher.decrypt=function(t,e,n){if(e instanceof et&&e.isPrivate){var r=at.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.decrypt(t);if("RSAOAEP"===r)return e.decryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.decryptOAEP(t,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},at.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof et){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},at.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==at&&at||(at={}),void 0!==at.crypto&&at.crypto||(at.crypto={}),at.crypto.ECDSA=function(t){var e=Error,n=w,r=it,i=at.crypto.ECDSA,s=at.crypto.ECParameterDB,o=i.getName,a=lt.getVbyListEx,u=lt.isASN1HEX,c=new Z;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new n(t.bitLength(),c).mod(t.subtract(n.ONE)).add(n.ONE)},this.setNamedCurve=function(t){this.ecparams=s.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keycharlen;if(t.length!==2+2*e)throw"malformed public key hex length";var n={};return n.x=t.substr(2,e),n.y=t.substr(2+e),n},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":"secp521r1"===t||"NIST P-521"===t||"P-521"===t?"P-521":null},this.generateKeyPairHex=function(){var t=this.getBigRandom(this.ecparams.n),e=this.ecparams.keycharlen,n=("0000000000"+t.toString(16)).slice(-e);return this.setPrivateKeyHex(n),{ecprvhex:n,ecpubhex:this.generatePublicKeyHex()}},this.generatePublicKeyHex=function(){var t=new n(this.prvKeyHex,16),e=this.ecparams.G.multiply(t),r=e.getX().toBigInteger(),i=e.getY().toBigInteger(),s=this.ecparams.keycharlen,o="04"+("0000000000"+r.toString(16)).slice(-s)+("0000000000"+i.toString(16)).slice(-s);return this.setPublicKeyHex(o),o},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var r=new n(e,16),s=this.ecparams.n,o=new n(t.substring(0,this.ecparams.keycharlen),16);do{var a=this.getBigRandom(s),u=this.ecparams.G.multiply(a).getX().toBigInteger().mod(s)}while(u.compareTo(n.ZERO)<=0);var c=a.modInverse(s).multiply(o.add(r.multiply(u))).mod(s);return i.biRSSigToASN1Sig(u,c)},this.sign=function(t,e){var r=e,i=this.ecparams.n,s=n.fromByteArrayUnsigned(t);do{var o=this.getBigRandom(i),a=this.ecparams.G.multiply(o).getX().toBigInteger().mod(i)}while(a.compareTo(w.ZERO)<=0);var u=o.modInverse(i).multiply(s.add(r.multiply(a))).mod(i);return this.serializeSig(a,u)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,s){try{var o,a,u=i.parseSigHex(e);o=u.r,a=u.s;var c=r.decodeFromHex(this.ecparams.curve,s),l=new n(t.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(l,o,a,c)}catch(h){return!1}},this.verify=function(t,e,i){var s,o,a;if(Bitcoin.Util.isArray(e)){var u=this.parseSig(e);s=u.r,o=u.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";s=e.r,o=e.s}if(i instanceof it)a=i;else{if(!Bitcoin.Util.isArray(i))throw"Invalid format for pubkey value, must be byte array or ECPointFp";a=r.decodeFrom(this.ecparams.curve,i)}var c=n.fromByteArrayUnsigned(t);return this.verifyRaw(c,s,o,a)},this.verifyRaw=function(t,e,r,i){var s=this.ecparams.n,o=this.ecparams.G;if(e.compareTo(n.ONE)<0||e.compareTo(s)>=0)return!1;if(r.compareTo(n.ONE)<0||r.compareTo(s)>=0)return!1;var a=r.modInverse(s),u=t.multiply(a).mod(s),c=e.multiply(a).mod(s);return o.multiply(u).add(i.multiply(c)).getX().toBigInteger().mod(s).equals(e)},this.serializeSig=function(t,e){var n=t.toByteArraySigned(),r=e.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var i=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:n.fromByteArrayUnsigned(r),s:n.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var r=this.ecparams.n;return{r:n.fromByteArrayUnsigned(t.slice(1,33)).mod(r),s:n.fromByteArrayUnsigned(t.slice(33,65)).mod(r),i:e}},this.readPKCS5PrvKeyHex=function(t){if(!1===u(t))throw new Error("not ASN.1 hex string");var e,n,r;try{e=a(t,0,["[0]",0],"06"),n=a(t,0,[1],"04");try{r=a(t,0,["[1]",0],"03")}catch(i){}}catch(i){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=o(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){if(!1===u(t))throw new e("not ASN.1 hex string");var n,r,i;try{a(t,0,[1,0],"06"),n=a(t,0,[1,1],"06"),r=a(t,0,[2,0,1],"04");try{i=a(t,0,[2,0,"[1]",0],"03")}catch(s){}}catch(s){throw new e("malformed PKCS#8 plain ECC private key")}if(this.curveName=o(n),void 0===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){if(!1===u(t))throw new e("not ASN.1 hex string");var n,r;try{a(t,0,[0,0],"06"),n=a(t,0,[0,1],"06"),r=a(t,0,[1],"03")}catch(i){throw new e("malformed PKCS#8 ECC public key")}if(this.curveName=o(n),null===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},this.readCertPubKeyHex=function(t,n){if(!1===u(t))throw new e("not ASN.1 hex string");var r,i;try{r=a(t,0,[0,5,0,1],"06"),i=a(t,0,[0,5,1],"03")}catch(s){throw new e("malformed X.509 certificate ECC public key")}if(this.curveName=o(r),null===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},at.crypto.ECDSA.parseSigHex=function(t){var e=at.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new w(e.r,16),s:new w(e.s,16)}},at.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=lt.getChildIdx,n=lt.getV;if(lt.checkStrictDER(t,0),"30"!=t.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var r=e(t,0);if(2!=r.length)throw new Error("signature shall have two elements");var i=r[0],s=r[1];if("02"!=t.substr(i,2))throw new Error("1st item not ASN.1 integer");if("02"!=t.substr(s,2))throw new Error("2nd item not ASN.1 integer");return{r:n(t,i),s:n(t,s)}},at.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=at.crypto.ECDSA.parseSigHexInHexRS(t),n=e.r,r=e.s;if(n.length>=130&&n.length<=134){if(n.length%2!=0)throw Error("unknown ECDSA sig r length error");if(r.length%2!=0)throw Error("unknown ECDSA sig s length error");"00"==n.substr(0,2)&&(n=n.substr(2)),"00"==r.substr(0,2)&&(r=r.substr(2));var i=Math.max(n.length,r.length);return(n=("000000"+n).slice(-i))+("000000"+r).slice(-i)}if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw Error("unknown ECDSA sig r length error");if(r.length%32!=0)throw Error("unknown ECDSA sig s length error");return n+r},at.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var e=t.substr(0,t.length/2),n=t.substr(t.length/2);return at.crypto.ECDSA.hexRSSigToASN1Sig(e,n)},at.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var n=new w(t,16),r=new w(e,16);return at.crypto.ECDSA.biRSSigToASN1Sig(n,r)},at.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var n=at.asn1,r=new n.DERInteger({bigint:t}),i=new n.DERInteger({bigint:e});return new n.DERSequence({array:[r,i]}).tohex()},at.crypto.ECDSA.getName=function(t){return"2b8104001f"===t?"secp192k1":"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040021"===t?"secp224r1":"2b81040022"===t?"secp384r1":"2b81040023"===t?"secp521r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(t)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":-1!=="|secp521r1|NIST P-521|P-521|".indexOf(t)?"secp521r1":null},void 0!==at&&at||(at={}),void 0!==at.crypto&&at.crypto||(at.crypto={}),at.crypto.ECParameterDB=new function(){var t={},e={};function n(t){return new w(t,16)}this.getByName=function(n){var r=n;if(void 0!==e[r]&&(r=e[n]),void 0!==t[r])return t[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,s,o,a,u,c,l,h,p,f,d){t[r]={};var m=n(s),g=n(o),v=n(a),y=n(u),b=n(c),w=new st(m,g,v),x=w.decodePointHex("04"+l+h);t[r].name=r,t[r].keylen=i,t[r].keycharlen=2*Math.ceil(i/8),t[r].curve=w,t[r].G=x,t[r].n=y,t[r].h=b,t[r].oid=f,t[r].info=d;for(var E=0;E<p.length;E++)e[p[E]]=r}},at.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),at.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),at.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),at.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),at.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),at.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),at.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),at.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),at.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),at.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==at&&at||(at={}),void 0!==at.crypto&&at.crypto||(at.crypto={}),at.crypto.DSA=function(){var t=lt.getVbyListEx,e=lt.isASN1HEX,n=w;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,e,n,r,i){this.isPrivate=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=i},this.setPrivateHex=function(t,e,n,r,i){var s,o,a,u,c;s=new w(t,16),o=new w(e,16),a=new w(n,16),u="string"==typeof r&&r.length>1?new w(r,16):null,c=new w(i,16),this.setPrivate(s,o,a,u,c)},this.setPublic=function(t,e,n,r){this.isPublic=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=null},this.setPublicHex=function(t,e,n,r){var i,s,o,a;i=new w(t,16),s=new w(e,16),o=new w(n,16),a=new w(r,16),this.setPublic(i,s,o,a)},this.signWithMessageHash=function(t){var e=this.p,n=this.q,r=this.g,i=this.x,s=at.crypto.Util.getRandomBigIntegerMinToMax(w.ONE.add(w.ONE),n.subtract(w.ONE)),o=new w(t.substr(0,n.bitLength()/4),16),a=r.modPow(s,e).mod(n),u=s.modInverse(n).multiply(o.add(i.multiply(a))).mod(n);return at.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:u}}]})},this.verifyWithMessageHash=function(t,e){var n=this.p,r=this.q,i=this.g,s=this.y,o=this.parseASN1Signature(e),a=o[0],u=o[1],c=new w(t.substr(0,r.bitLength()/4),16);if(w.ZERO.compareTo(a)>0||a.compareTo(r)>0)throw"invalid DSA signature";if(w.ZERO.compareTo(u)>=0||u.compareTo(r)>0)throw"invalid DSA signature";var l=u.modInverse(r),h=c.multiply(l).mod(r),p=a.multiply(l).mod(r);return 0==i.modPow(h,n).multiply(s.modPow(p,n)).mod(n).mod(r).compareTo(a)},this.parseASN1Signature=function(e){try{return[new n(t(e,0,[0],"02"),16),new n(t(e,0,[1],"02"),16)]}catch(r){throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(n){var r,i,s,o,a;if(!1===e(n))throw new Error("not ASN.1 hex string");try{r=t(n,0,[1],"02"),i=t(n,0,[2],"02"),s=t(n,0,[3],"02"),o=t(n,0,[4],"02"),a=t(n,0,[5],"02")}catch(u){throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(r,i,s,o,a)},this.readPKCS8PrvKeyHex=function(n){var r,i,s,o;if(!1===e(n))throw new Error("not ASN.1 hex string");try{r=t(n,0,[1,1,0],"02"),i=t(n,0,[1,1,1],"02"),s=t(n,0,[1,1,2],"02"),o=t(n,0,[2,0],"02")}catch(a){throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(r,i,s,null,o)},this.readPKCS8PubKeyHex=function(n){var r,i,s,o;if(!1===e(n))throw new Error("not ASN.1 hex string");try{r=t(n,0,[0,1,0],"02"),i=t(n,0,[0,1,1],"02"),s=t(n,0,[0,1,2],"02"),o=t(n,0,[1,0],"02")}catch(a){throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(r,i,s,o)},this.readCertPubKeyHex=function(n,r){var i,s,o,a;if(!1===e(n))throw new Error("not ASN.1 hex string");try{i=t(n,0,[0,5,0,1,0],"02"),s=t(n,0,[0,5,0,1,1],"02"),o=t(n,0,[0,5,0,1,2],"02"),a=t(n,0,[0,5,1,0],"02")}catch(u){throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(i,s,o,a)}};var Ut=function(){var t=function(t,n,r){return e(m.AES,t,n,r)},e=function(t,e,n,r){var i=m.enc.Hex.parse(e),s=m.enc.Hex.parse(n),o=m.enc.Hex.parse(r),a={};a.key=s,a.iv=o,a.ciphertext=i;var u=t.decrypt(a,s,{iv:o});return m.enc.Hex.stringify(u)},n=function(t,e,n){return r(m.AES,t,e,n)},r=function(t,e,n,r){var i=m.enc.Hex.parse(e),s=m.enc.Hex.parse(n),o=m.enc.Hex.parse(r),a=t.encrypt(i,s,{iv:o}),u=m.enc.Hex.parse(a.toString());return m.enc.Base64.stringify(u)},i={"AES-256-CBC":{proc:t,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,n,r){return e(m.TripleDES,t,n,r)},eproc:function(t,e,n){return r(m.TripleDES,t,e,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,n,r){return e(m.DES,t,n,r)},eproc:function(t,e,n){return r(m.DES,t,e,n)},keylen:8,ivlen:8}},s=function(t){var e={},n=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(e.cipher=n[1],e.ivsalt=n[2]);var r=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(e.type=r[1]);var i=-1,s=0;-1!=t.indexOf("\r\n\r\n")&&(i=t.indexOf("\r\n\r\n"),s=2),-1!=t.indexOf("\n\n")&&(i=t.indexOf("\n\n"),s=1);var o=t.indexOf("-----END");if(-1!=i&&-1!=o){var a=t.substring(i+2*s,o-s);a=a.replace(/\s+/g,""),e.data=a}return e},o=function(t,e,n){for(var r=n.substring(0,16),s=m.enc.Hex.parse(r),o=m.enc.Utf8.parse(e),a=i[t].keylen+i[t].ivlen,u="",c=null;;){var l=m.algo.MD5.create();if(null!=c&&l.update(c),l.update(o),l.update(s),c=l.finalize(),(u+=m.enc.Hex.stringify(c)).length>=2*a)break}var h={};return h.keyhex=u.substr(0,2*i[t].keylen),h.ivhex=u.substr(2*i[t].keylen,2*i[t].ivlen),h},a=function(t,e,n,r){var s=m.enc.Base64.parse(t),o=m.enc.Hex.stringify(s);return(0,i[e].proc)(o,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(t){return s(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,n){return o(t,e,n)},decryptKeyB64:function(t,e,n,r){return a(t,e,n,r)},getDecryptedKeyHex:function(t,e){var n=s(t),r=n.cipher,i=n.ivsalt,u=n.data,c=o(r,e,i);return a(u,r,c.keyhex,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,n,r,s){var a="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===i[r])throw new Error("KEYUTIL unsupported algorithm: "+r);void 0!==s&&null!=s||(s=function(t){var e=m.lib.WordArray.random(t);return m.enc.Hex.stringify(e)}(i[r].ivlen).toUpperCase());var u=function(t,e,n,r){return(0,i[e].eproc)(t,n,r)}(e,r,o(r,n,s).keyhex,s);return a="-----BEGIN "+t+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+s+"\r\n",a+="\r\n",(a+=u.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+t+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var e=lt.getChildIdx,n=lt.getV,r={},i=e(t,0);if(2!=i.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+i.length);r.ciphertext=n(t,i[1]);var s=e(t,i[0]);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+s.length);if("2a864886f70d01050d"!=n(t,s[0]))throw new Error("this only supports pkcs5PBES2");var o=e(t,s[1]);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+o.length);var a=e(t,o[1]);if(2!=a.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+a.length);if("2a864886f70d0307"!=n(t,a[0]))throw"this only supports TripleDES";r.encryptionSchemeAlg="TripleDES",r.encryptionSchemeIV=n(t,a[1]);var u=e(t,o[0]);if(2!=u.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+u.length);if("2a864886f70d01050c"!=n(t,u[0]))throw new Error("this only supports pkcs5PBKDF2");var c=e(t,u[1]);if(c.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+c.length);r.pbkdf2Salt=n(t,c[0]);var l=n(t,c[1]);try{r.pbkdf2Iter=parseInt(l,16)}catch(h){throw new Error("malformed format pbkdf2Iter: "+l)}return r},getPBKDF2KeyHexFromParam:function(t,e){var n=m.enc.Hex.parse(t.pbkdf2Salt),r=m.PBKDF2(e,n,{keySize:6,iterations:t.pbkdf2Iter});return m.enc.Hex.stringify(r)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var n=_t(t,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=Ut.getPBKDF2KeyHexFromParam(r,e),s={};s.ciphertext=m.enc.Hex.parse(r.ciphertext);var o=m.enc.Hex.parse(i),a=m.enc.Hex.parse(r.encryptionSchemeIV),u=m.TripleDES.decrypt(s,o,{iv:a});return m.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(t,e){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(t){var e=lt,n=e.getChildIdx,r=e.getV,i={algparam:null};if("30"!=t.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var s=n(t,0);if(s.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=t.substr(s[1],2))throw new Error("malformed PKCS8 private key(code:003)");var o=n(t,s[1]);if(2!=o.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=t.substr(o[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(i.algoid=r(t,o[0]),"06"==t.substr(o[1],2)&&(i.algparam=r(t,o[1])),"04"!=t.substr(s[2],2))throw new Error("malformed PKCS8 private key(code:006)");return i.keyidx=e.getVidx(t,s[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=_t(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e,n=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==n.algoid)e=new et;else if("2a8648ce380401"==n.algoid)e=new at.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw new Error("unsupported private key algorithm");e=new at.crypto.ECDSA}return e.readPKCS8PrvKeyHex(t),e},_getKeyFromPublicPKCS8Hex:function(t){var e,n=lt.getVbyList(t,0,[0,0],"06");if("2a864886f70d010101"===n)e=new et;else if("2a8648ce380401"===n)e=new at.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw new Error("unsupported PKCS#8 public key hex");e=new at.crypto.ECDSA}return e.readPKCS8PubKeyHex(t),e},parsePublicRawRSAKeyHex:function(t){var e=lt.getChildIdx,n=lt.getV,r={};if("30"!=t.substr(0,2))throw new Error("malformed RSA key(code:001)");var i=e(t,0);if(2!=i.length)throw new Error("malformed RSA key(code:002)");if("02"!=t.substr(i[0],2))throw new Error("malformed RSA key(code:003)");if(r.n=n(t,i[0]),"02"!=t.substr(i[1],2))throw new Error("malformed RSA key(code:004)");return r.e=n(t,i[1]),r},parsePublicPKCS8Hex:function(t){var e=lt,n=e.getChildIdx,r=e.getV,i={algparam:null},s=n(t,0);if(2!=s.length)throw new Error("outer DERSequence shall have 2 elements: "+s.length);var o=s[0];if("30"!=t.substr(o,2))throw new Error("malformed PKCS8 public key(code:001)");var a=n(t,o);if(2!=a.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=t.substr(a[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(i.algoid=r(t,a[0]),"06"==t.substr(a[1],2)?i.algparam=r(t,a[1]):"30"==t.substr(a[1],2)&&(i.algparam={},i.algparam.p=e.getVbyList(t,a[1],[0],"02"),i.algparam.q=e.getVbyList(t,a[1],[1],"02"),i.algparam.g=e.getVbyList(t,a[1],[2],"02")),"03"!=t.substr(s[1],2))throw new Error("malformed PKCS8 public key(code:004)");return i.key=r(t,s[1]).substr(2),i}}}();function Ht(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n+="0";return n+t}function zt(t,e,n){for(var r="",i=0;r.length<e;)r+=wt(n(xt(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function Kt(t){for(var e in at.crypto.Util.DIGESTINFOHEAD){var n=at.crypto.Util.DIGESTINFOHEAD[e],r=n.length;if(t.substring(0,r)==n)return[e,t.substring(r)]}return[]}function qt(t){var e,n=lt,r=n.getChildIdx,i=n.getV,s=n.parse,o=n.getTLV,a=n.getVbyList,u=n.getVbyListEx,c=n.getTLVbyList,l=n.getTLVbyListEx,h=n.getIdxbyList,p=n.getIdxbyListEx,f=n.getVidx,d=n.getInt,m=n.oidname,g=n.hextooidstr,v=_t,y=Error;try{e=at.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(G){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var t=c(this.hex,0,[0,0]);if("a0"==t.substr(0,2)){var e=c(t,0,[0]),n=d(e,0);if(n<0||2<n)throw new Error("malformed version field");return this.version=n+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return u(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var t=l(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(t)},this.getAlgorithmIdentifierName=function(t){for(var n in e)if(t===e[n])return n;return m(u(t,0,[0],"06"))},this.getIssuer=function(t,e){return this.getX500Name(this.getIssuerHex(),t,e)},this.getIssuerHex=function(){return c(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(t,e){return this.getX500Name(this.getSubjectHex(),t,e)},this.getSubjectHex=function(){return c(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var t=a(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getNotAfter=function(){var t=a(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return c(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var t=this.getSPKI();return null==t?null:a(t,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return h(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return h(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return Ut.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var t=c(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(t)},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmField(),n=this.getSignatureValueHex(),r=c(this.hex,0,[0],"30"),i=new at.crypto.Signature({alg:e});return i.init(t),i.updateHex(r),i.verify(n)},this.parseExt=function(t){var e,s,o;if(void 0===t){if(3!==this.version)return-1;e=h(o=this.hex,0,[0,7,0],"30"),s=r(o,e)}else{o=_t(t);var u=h(o,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(o,u))return void(this.aExtInfo=new Array);e=h(o,0,[0,3,0,1,0],"30"),s=r(o,e),this.hex=o}this.aExtInfo=new Array;for(var c=0;c<s.length;c++){var l={critical:!1},p=0;3===r(o,s[c]).length&&(l.critical=!0,p=1),l.oid=n.hextooidstr(a(o,s[c],[0],"06"));var d=h(o,s[c],[1+p]);l.vidx=f(o,d),this.aExtInfo.push(l)}},this.getExtInfo=function(t){var e=this.aExtInfo,n=t;if(t.match(/^[0-9.]+$/)||(n=at.asn1.x509.OID.name2oid(t)),""!==n)for(var r=0;r<e.length;r++)if(e[r].oid===n)return e[r]},this.getCriticalExtV=function(t,e,n){if(null!=e)return[e,n];var r=this.getExtInfo(t);return null==r?[null,null]:[o(this.hex,r.vidx),r.critical]},this.getExtBasicConstraints=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("basicConstraints");if(void 0===n)return;t=o(this.hex,n.vidx),e=n.critical}var r={extname:"basicConstraints"};if(e&&(r.critical=!0),"3000"===t)return r;if("30030101ff"===t)return r.cA=!0,r;if("30060101ff02"===t.substr(0,12)){var s=i(t,10),a=parseInt(s,16);return r.cA=!0,r.pathLen=a,r}throw new Error("hExtV parse error: "+t)},this.getExtNameConstraints=function(t,e){var n=this.getCriticalExtV("nameConstraints",t,e);if(e=n[1],null!=(t=n[0])){var i={extname:"nameConstraints"};e&&(i.critical=!0);for(var s=r(t,0),a=0;a<s.length;a++){for(var u=[],c=r(t,s[a]),l=0;l<c.length;l++){var h=o(t,c[l]),p=this.getGeneralSubtree(h);u.push(p)}var f=t.substr(s[a],2);"a0"==f?i.permit=u:"a1"==f&&(i.exclude=u)}return i}},this.getGeneralSubtree=function(t){var e=r(t,0),n=e.length;if(n<1||2<n)throw new Error("wrong num elements");for(var s=this.getGeneralName(o(t,e[0])),a=1;a<n;a++){var u=t.substr(e[a],2),c=i(t,e[a]),l=parseInt(c,16);"80"==u&&(s.min=l),"81"==u&&(s.max=l)}return s},this.getExtKeyUsage=function(t,e){var n=this.getCriticalExtV("keyUsage",t,e);if(e=n[1],null!=(t=n[0])){var r={extname:"keyUsage"};return e&&(r.critical=!0),r.names=this.getExtKeyUsageString(t).split(","),r}},this.getExtKeyUsageBin=function(t){if(void 0===t){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";t=o(this.hex,e.vidx)}if(8!=t.length&&10!=t.length)throw new Error("malformed key usage value: "+t);var n="000000000000000"+parseInt(t.substr(6),16).toString(2);return 8==t.length&&(n=n.slice(-8)),10==t.length&&(n=n.slice(-16)),""==(n=n.replace(/0+$/,""))&&(n="0"),n},this.getExtKeyUsageString=function(t){for(var e=this.getExtKeyUsageBin(t),n=new Array,r=0;r<e.length;r++)"1"==e.substr(r,1)&&n.push(qt.KEYUSAGE_NAME[r]);return n.join(",")},this.getExtSubjectKeyIdentifier=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("subjectKeyIdentifier");if(void 0===n)return;t=o(this.hex,n.vidx),e=n.critical}var r={extname:"subjectKeyIdentifier"};e&&(r.critical=!0);var s=i(t,0);return r.kid={hex:s},r},this.getExtAuthorityKeyIdentifier=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("authorityKeyIdentifier");if(void 0===n)return;t=o(this.hex,n.vidx),e=n.critical}var s={extname:"authorityKeyIdentifier"};e&&(s.critical=!0);for(var a=r(t,0),u=0;u<a.length;u++){var c=t.substr(a[u],2);if("80"===c&&(s.kid={hex:i(t,a[u])}),"a1"===c){var l=o(t,a[u]),h=this.getGeneralNames(l);s.issuer=h[0].dn}"82"===c&&(s.sn={hex:i(t,a[u])})}return s},this.getExtExtKeyUsage=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("extKeyUsage");if(void 0===n)return;t=o(this.hex,n.vidx),e=n.critical}var s={extname:"extKeyUsage",array:[]};e&&(s.critical=!0);for(var a=r(t,0),u=0;u<a.length;u++)s.array.push(m(i(t,a[u])));return s},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var e=new Array,n=o(this.hex,t.vidx);if(""===n)return e;for(var s=r(n,0),a=0;a<s.length;a++)e.push(m(i(n,s[a])));return e},this.getExtSubjectAltName=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("subjectAltName");if(void 0===n)return;t=o(this.hex,n.vidx),e=n.critical}var r={extname:"subjectAltName",array:[]};return e&&(r.critical=!0),r.array=this.getGeneralNames(t),r},this.getExtIssuerAltName=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("issuerAltName");if(void 0===n)return;t=o(this.hex,n.vidx),e=n.critical}var r={extname:"issuerAltName",array:[]};return e&&(r.critical=!0),r.array=this.getGeneralNames(t),r},this.getGeneralNames=function(t){for(var e=r(t,0),n=[],i=0;i<e.length;i++){var s=this.getGeneralName(o(t,e[i]));void 0!==s&&n.push(s)}return n},this.getGeneralName=function(t){var e=t.substr(0,2),n=i(t,0),r=wt(n);return"81"==e?{rfc822:r}:"82"==e?{dns:r}:"86"==e?{uri:r}:"87"==e?{ip:Tt(n)}:"a4"==e?{dn:this.getX500Name(n)}:"a0"==e?{other:this.getOtherName(t)}:void 0},this.getExtSubjectAltName2=function(){var t,e,n,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=new Array,u=o(this.hex,s.vidx),c=r(u,0),l=0;l<c.length;l++)n=u.substr(c[l],2),t=i(u,c[l]),"81"===n&&(e=yt(t),a.push(["MAIL",e])),"82"===n&&(e=yt(t),a.push(["DNS",e])),"84"===n&&(e=qt.hex2dn(t,0),a.push(["DN",e])),"86"===n&&(e=yt(t),a.push(["URI",e])),"87"===n&&(e=Tt(t),a.push(["IP",e]));return a},this.getExtCRLDistributionPoints=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("cRLDistributionPoints");if(void 0===n)return;t=o(this.hex,n.vidx),e=n.critical}var i={extname:"cRLDistributionPoints",array:[]};e&&(i.critical=!0);for(var s=r(t,0),a=0;a<s.length;a++){var u=o(t,s[a]);i.array.push(this.getDistributionPoint(u))}return i},this.getDistributionPoint=function(t){for(var e={},n=r(t,0),i=0;i<n.length;i++){var s=t.substr(n[i],2),a=o(t,n[i]);"a0"==s&&(e.dpname=this.getDistributionPointName(a))}return e},this.getDistributionPointName=function(t){for(var e={},n=r(t,0),i=0;i<n.length;i++){var s=t.substr(n[i],2),a=o(t,n[i]);"a0"==s&&(e.full=this.getGeneralNames(a))}return e},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtCRLDistributionPoints();if(null==t)return t;for(var e=t.array,n=[],r=0;r<e.length;r++)try{null!=e[r].dpname.full[0].uri&&n.push(e[r].dpname.full[0].uri)}catch(i){}return n},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var e={ocsp:[],caissuer:[]},n=r(this.hex,t.vidx),i=0;i<n.length;i++){var s=a(this.hex,n[i],[0],"06"),o=a(this.hex,n[i],[1],"86");"2b06010505073001"===s&&e.ocsp.push(yt(o)),"2b06010505073002"===s&&e.caissuer.push(yt(o))}return e},this.getExtAuthorityInfoAccess=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("authorityInfoAccess");if(void 0===n)return;t=o(this.hex,n.vidx),e=n.critical}var i={extname:"authorityInfoAccess",array:[]};e&&(i.critical=!0);for(var s=r(t,0),c=0;c<s.length;c++){var l=u(t,s[c],[0],"06"),h=yt(a(t,s[c],[1],"86"));if("2b06010505073001"==l)i.array.push({ocsp:h});else{if("2b06010505073002"!=l)throw new Error("unknown method: "+l);i.array.push({caissuer:h})}}return i},this.getExtCertificatePolicies=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("certificatePolicies");if(void 0===n)return;t=o(this.hex,n.vidx),e=n.critical}var i={extname:"certificatePolicies",array:[]};e&&(i.critical=!0);for(var s=r(t,0),a=0;a<s.length;a++){var u=o(t,s[a]),c=this.getPolicyInformation(u);i.array.push(c)}return i},this.getPolicyInformation=function(t){var e={},n=a(t,0,[0],"06");e.policyoid=m(n);var i=p(t,0,[1],"30");if(-1!=i){e.array=[];for(var s=r(t,i),u=0;u<s.length;u++){var c=o(t,s[u]),l=this.getPolicyQualifierInfo(c);e.array.push(l)}}return e},this.getOtherName=function(t){var e={},n=r(t,0),i=a(t,n[0],[],"06"),o=a(t,n[1],[]);return e.oid=m(i),e.value=s(o),e},this.getPolicyQualifierInfo=function(t){var e={},n=a(t,0,[0],"06");if("2b06010505070201"===n){var r=u(t,0,[1],"16");e.cps=wt(r)}else if("2b06010505070202"===n){var i=c(t,0,[1],"30");e.unotice=this.getUserNotice(i)}return e},this.getUserNotice=function(t){for(var e={},n=r(t,0),i=0;i<n.length;i++){var s=o(t,n[i]);"30"!=s.substr(0,2)&&(e.exptext=this.getDisplayText(s))}return e},this.getDisplayText=function(t){var e={};return e.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[t.substr(0,2)],e.str=wt(i(t,0)),e},this.getExtPolicyMappings=function(t,e){var n=this.getCriticalExtV("policyMappings",t,e);if(e=n[1],null!=(t=n[0])){var r={extname:"policyMappings"};e&&(r.critical=!0);try{for(var i=s(t).seq,o=[],a=0;a<i.length;a++){var u=i[a].seq;o.push([u[0].oid,u[1].oid])}r.array=o}catch(c){throw new y("malformed policyMappings")}return r}},this.getExtPolicyConstraints=function(t,e){var n=this.getCriticalExtV("policyConstraints",t,e);if(e=n[1],null!=(t=n[0])){var r={extname:"policyConstraints"};e&&(r.critical=!0);var i=s(t);try{for(var o=i.seq,a=0;a<o.length;a++){var u=o[a].tag;0==u.explicit&&("80"==u.tag&&(r.reqexp=parseInt(u.hex,16)),"81"==u.tag&&(r.inhibit=parseInt(u.hex,16)))}}catch(c){return new y("malformed policyConstraints value")}return r}},this.getExtInhibitAnyPolicy=function(t,e){var n=this.getCriticalExtV("inhibitAnyPolicy",t,e);if(e=n[1],null!=(t=n[0])){var r={extname:"inhibitAnyPolicy"};e&&(r.critical=!0);var i=d(t,0);return-1==i?new y("wrong value"):(r.skip=i,r)}},this.getExtCRLNumber=function(t,e){var n={extname:"cRLNumber"};if(e&&(n.critical=!0),"02"==t.substr(0,2))return n.num={hex:i(t,0)},n;throw new y("hExtV parse error: "+t)},this.getExtCRLReason=function(t,e){var n={extname:"cRLReason"};if(e&&(n.critical=!0),"0a"==t.substr(0,2))return n.code=parseInt(i(t,0),16),n;throw new Error("hExtV parse error: "+t)},this.getExtOcspNonce=function(t,e){var n={extname:"ocspNonce"};e&&(n.critical=!0);var r=i(t,0);return n.hex=r,n},this.getExtOcspNoCheck=function(t,e){var n={extname:"ocspNoCheck"};return e&&(n.critical=!0),n},this.getExtAdobeTimeStamp=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("adobeTimeStamp");if(void 0===n)return;t=o(this.hex,n.vidx),e=n.critical}var i={extname:"adobeTimeStamp"};e&&(i.critical=!0);var s=r(t,0);if(s.length>1){var a=o(t,s[1]),u=this.getGeneralName(a);null!=u.uri&&(i.uri=u.uri)}if(s.length>2){var c=o(t,s[2]);"0101ff"==c&&(i.reqauth=!0),"010100"==c&&(i.reqauth=!1)}return i};var b=function(t){var e={};try{var n=at.asn1.x509.OID.name2oid(t.seq[0].oid);e.type=at.asn1.x509.OID.oid2atype(n);var r=t.seq[1];if(null!=r.utf8str)e.ds="utf8",e.value=r.utf8str.str;else if(null!=r.numstr)e.ds="num",e.value=r.numstr.str;else if(null!=r.telstr)e.ds="tel",e.value=r.telstr.str;else if(null!=r.prnstr)e.ds="prn",e.value=r.prnstr.str;else if(null!=r.ia5str)e.ds="ia5",e.value=r.ia5str.str;else if(null!=r.visstr)e.ds="vis",e.value=r.visstr.str;else{if(null==r.bmpstr)throw"error";e.ds="bmp",e.value=r.bmpstr.str}return e}catch(i){throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},w=function(t){try{return t.set.map(function(t){return b(t)})}catch(Q){throw new Error("improper ASN.1 parsed RDN: "+Q)}};this.getX500NameRule=function(t){for(var e=null,n=[],r=0;r<t.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(i[s]);for(r=0;r<n.length;r++){var o=n[r],a=o.ds,u=o.type;if("prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=u)return"mixed";if(at.lang.String.isMail(o.value))continue;return"mixed"}if("C"==u){if("prn"==a)continue;return"mixed"}if(null==e)e=a;else if(e!==a)return"mixed"}return null==e?"prn":e},this.getAttrTypeAndValue=function(t){var e=s(t);return b(e)},this.getRDN=function(t){var e=s(t);return w(e)},this.getX500NameArray=function(t){return function(e){try{return e.seq.map(function(t){return w(t)})}catch(t){throw new Error("improper ASN.1 parsed X500Name: "+t)}}(s(t))},this.getX500Name=function(t,e,n){var r=this.getX500NameArray(t),i={str:this.dnarraytostr(r)};return i.array=r,1==n&&(i.hex=t),1==e&&(i.canon=this.c14nRDNArray(r)),i},this.readCertPEM=function(t){this.readCertHex(v(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{h(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(t){var e={};return null==t&&(t={}),e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(t.dncanon,t.dnhex),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(t.dncanon,t.dnhex),e.sbjpubkey=Et(this.getPublicKeyHex(),"PUBLIC KEY"),null!=this.aExtInfo&&this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),1==t.tbshex&&(e.tbshex=c(this.hex,0,[0])),1==t.nodnarray&&(delete e.issuer.array,delete e.subject.array),e},this.getExtParamArray=function(t){null==t&&-1!=p(this.hex,0,[0,"[3]"])&&(t=l(this.hex,0,[0,"[3]",0],"30"));for(var e=[],n=r(t,0),i=0;i<n.length;i++){var s=o(t,n[i]),a=this.getExtParam(s);null!=a&&e.push(a)}return e},this.getExtParam=function(t){var e=r(t,0).length;if(2!=e&&3!=e)throw new Error("wrong number elements in Extension: "+e+" "+t);var n=g(a(t,0,[0],"06")),i=!1;3==e&&"0101ff"==c(t,0,[1])&&(i=!0);var s=c(t,0,[e-1,0]),o=void 0;if("2.5.29.14"==n?o=this.getExtSubjectKeyIdentifier(s,i):"2.5.29.15"==n?o=this.getExtKeyUsage(s,i):"2.5.29.17"==n?o=this.getExtSubjectAltName(s,i):"2.5.29.18"==n?o=this.getExtIssuerAltName(s,i):"2.5.29.19"==n?o=this.getExtBasicConstraints(s,i):"2.5.29.30"==n?o=this.getExtNameConstraints(s,i):"2.5.29.31"==n?o=this.getExtCRLDistributionPoints(s,i):"2.5.29.32"==n?o=this.getExtCertificatePolicies(s,i):"2.5.29.33"==n?o=this.getExtPolicyMappings(s,i):"2.5.29.35"==n?o=this.getExtAuthorityKeyIdentifier(s,i):"2.5.29.36"==n?o=this.getExtPolicyConstraints(s,i):"2.5.29.37"==n?o=this.getExtExtKeyUsage(s,i):"2.5.29.54"==n?o=this.getExtInhibitAnyPolicy(s,i):"1.3.6.1.5.5.7.1.1"==n?o=this.getExtAuthorityInfoAccess(s,i):"2.5.29.20"==n?o=this.getExtCRLNumber(s,i):"2.5.29.21"==n?o=this.getExtCRLReason(s,i):"1.3.6.1.5.5.7.48.1.2"==n?o=this.getExtOcspNonce(s,i):"1.3.6.1.5.5.7.48.1.5"==n?o=this.getExtOcspNoCheck(s,i):"1.2.840.113583.1.1.9.1"==n&&(o=this.getExtAdobeTimeStamp(s,i)),null!=o)return o;var u={extname:n,extn:s};return i&&(u.critical=!0),u},this.findExt=function(t,e){for(var n=0;n<t.length;n++)if(t[n].extname==e)return t[n];return null},this.updateExtCDPFullURI=function(t,e){var n=this.findExt(t,"cRLDistributionPoints");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)if(null!=r[i].dpname&&null!=r[i].dpname.full)for(var s=r[i].dpname.full,o=0;o<s.length;o++){var a=s[i];null!=a.uri&&(a.uri=e)}},this.updateExtAIAOCSP=function(t,e){var n=this.findExt(t,"authorityInfoAccess");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)null!=r[i].ocsp&&(r[i].ocsp=e)},this.updateExtAIACAIssuer=function(t,e){var n=this.findExt(t,"authorityInfoAccess");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)null!=r[i].caissuer&&(r[i].caissuer=e)},this.dnarraytostr=function(t){return"/"+t.map(function(t){return function(t){return t.map(function(t){return function(t){return t.type+"="+t.value}(t).replace(/\+/,"\\+")}).join("+")}(t).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(t){var e;if(null!=t.str&&null==t.array){var n=new at.asn1.x509.X500Name({str:t.str}).tohex();e=this.getX500NameArray(n)}else e=t.array;null==t.canon&&(t.canon=this.c14nRDNArray(e))},this.c14nRDNArray=function(t){for(var e=[],n=0;n<t.length;n++){for(var r=t[n],i=[],s=0;s<r.length;s++){var o=r[s],a=o.value;a=(a=(a=(a=a.replace(/^\s*/,"")).replace(/\s*$/,"")).replace(/\s+/g," ")).toLowerCase(),i.push(o.type.toLowerCase()+"="+a)}e.push(i.join("+"))}return"/"+e.join("/")},this.getInfo=function(){var t,e,n,r=function(t){for(var e="",n="    ",r="\n",i=t.array,s=0;s<i.length;s++){var o=i[s];null!=o.dn&&(e+=n+"dn: "+o.dn.str+r),null!=o.ip&&(e+=n+"ip: "+o.ip+r),null!=o.rfc822&&(e+=n+"rfc822: "+o.rfc822+r),null!=o.dns&&(e+=n+"dns: "+o.dns+r),null!=o.uri&&(e+=n+"uri: "+o.uri+r),null!=o.other&&(e+=n+"other: "+o.other.oid+"="+JSON.stringify(o.other.value).replace(/\"/g,"")+r)}return e.replace(/\n$/,"")},i=function(t){for(var e="",n=t.array,r=0;r<n.length;r++){var i=n[r];if(e+="    policy oid: "+i.policyoid+"\n",void 0!==i.array)for(var s=0;s<i.array.length;s++){var o=i.array[s];void 0!==o.cps&&(e+="    cps: "+o.cps+"\n")}}return e},s=function(t){for(var e="",n=t.array,r=0;r<n.length;r++){var i=n[r];try{void 0!==i.dpname.full[0].uri&&(e+="    "+i.dpname.full[0].uri+"\n")}catch(s){}try{void 0!==i.dname.full[0].dn.hex&&(e+="    "+qt.hex2dn(i.dpname.full[0].dn.hex)+"\n")}catch(s){}}return e},o=function(t){for(var e="",n=t.array,r=0;r<n.length;r++){var i=n[r];void 0!==i.caissuer&&(e+="    caissuer: "+i.caissuer+"\n"),void 0!==i.ocsp&&(e+="    ocsp: "+i.ocsp+"\n")}return e};if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+Nt(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+Nt(e.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var a=0;a<n.length;a++){var u=n[a],c=at.asn1.x509.OID.oid2name(u.oid);""===c&&(c=u.oid);var l="";if(!0===u.critical&&(l="CRITICAL"),t+="  "+c+" "+l+":\n","basicConstraints"===c){var h=this.getExtBasicConstraints();void 0===h.cA?t+="    {}\n":(t+="    cA=true",void 0!==h.pathLen&&(t+=", pathLen="+h.pathLen),t+="\n")}else{var p;if("policyMappings"==c)t+="    "+this.getExtPolicyMappings().array.map(function(t){return t[0]+":"+t[1]}).join(", ")+"\n";else if("policyConstraints"==c)t+="    ",null!=(p=this.getExtPolicyConstraints()).reqexp&&(t+=" reqexp="+p.reqexp),null!=p.inhibit&&(t+=" inhibit="+p.inhibit),t+="\n";else if("inhibitAnyPolicy"==c)t+="    skip="+(p=this.getExtInhibitAnyPolicy()).skip+"\n";else if("keyUsage"==c)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"==c)t+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"==c){var f=this.getExtAuthorityKeyIdentifier();void 0!==f.kid&&(t+="    kid="+f.kid.hex+"\n")}else"extKeyUsage"==c?t+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"==c?t+=r(this.getExtSubjectAltName())+"\n":"cRLDistributionPoints"==c?t+=s(this.getExtCRLDistributionPoints()):"authorityInfoAccess"==c?t+=o(this.getExtAuthorityInfoAccess()):"certificatePolicies"==c&&(t+=i(this.getExtCertificatePolicies()))}}}return(t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?this.readCertPEM(t):at.lang.String.isHex(t)&&this.readCertHex(t))}Ut.getKey=function(t,e,n){var r,i=(b=lt).getChildIdx,s=b.getVbyList,o=at.crypto,a=o.ECDSA,u=o.DSA,c=et,l=_t,h=Ut;if(void 0!==c&&t instanceof c)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==u&&t instanceof u)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new a({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new a({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(R=new c).setPublic(t.n,t.e),R;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(R=new c).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),R;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(R=new c).setPrivate(t.n,t.e,t.d),R;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(R=new u).setPublic(t.p,t.q,t.g,t.y),R;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(R=new u).setPrivate(t.p,t.q,t.g,t.y,t.x),R;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(R=new c).setPublic(gt(t.n),gt(t.e)),R;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(R=new c).setPrivateEx(gt(t.n),gt(t.e),gt(t.d),gt(t.p),gt(t.q),gt(t.dp),gt(t.dq),gt(t.qi)),R;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(R=new c).setPrivate(gt(t.n),gt(t.e),gt(t.d)),R;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var p=(P=new a({curve:t.crv})).ecparams.keycharlen,f=("0000000000"+gt(t.x)).slice(-p),d=("0000000000"+gt(t.y)).slice(-p);return P.setPublicKeyHex(m="04"+f+d),P}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){p=(P=new a({curve:t.crv})).ecparams.keycharlen;var m="04"+(f=("0000000000"+gt(t.x)).slice(-p))+(d=("0000000000"+gt(t.y)).slice(-p)),g=("0000000000"+gt(t.d)).slice(-p);return P.setPublicKeyHex(m),P.setPrivateKeyHex(g),P}if("pkcs5prv"===n){var v,y=t,b=lt;if(9===(v=i(y,0)).length)(R=new c).readPKCS5PrvKeyHex(y);else if(6===v.length)(R=new u).readPKCS5PrvKeyHex(y);else{if(!(v.length>2&&"04"===y.substr(v[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(R=new a).readPKCS5PrvKeyHex(y)}return R}if("pkcs8prv"===n)return h.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===n)return h._getKeyFromPublicPKCS8Hex(t);if("x509pub"===n)return qt.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return qt.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var x=_t(t,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(x)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var E=l(t,"RSA PRIVATE KEY");return h.getKey(E,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var _=s(r=l(t,"DSA PRIVATE KEY"),0,[1],"02"),S=s(r,0,[2],"02"),C=s(r,0,[3],"02"),A=s(r,0,[4],"02"),I=s(r,0,[5],"02");return(R=new u).setPrivate(new w(_,16),new w(S,16),new w(C,16),new w(A,16),new w(I,16)),R}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED"))return E=l(t,"EC PRIVATE KEY"),h.getKey(E,null,"pkcs5prv");if(-1!=t.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var T=h.getDecryptedKeyHex(t,e),k=new et;return k.readPKCS5PrvKeyHex(T),k}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var P,R=s(r=h.getDecryptedKeyHex(t,e),0,[1],"04"),D=s(r,0,[2,0],"06"),F=s(r,0,[3,0],"03").substr(2);if(void 0===at.crypto.OID.oidhex2name[D])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+D);return(P=new a({curve:at.crypto.OID.oidhex2name[D]})).setPublicKeyHex(F),P.setPrivateKeyHex(R),P.isPublic=!1,P}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED"))return _=s(r=h.getDecryptedKeyHex(t,e),0,[1],"02"),S=s(r,0,[2],"02"),C=s(r,0,[3],"02"),A=s(r,0,[4],"02"),I=s(r,0,[5],"02"),(R=new u).setPrivate(new w(_,16),new w(S,16),new w(C,16),new w(A,16),new w(I,16)),R;if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(t,e);throw new Error("not supported argument")},Ut.generateKeypair=function(t,e){if("RSA"==t){var n=e;(o=new et).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new et,i=o.n.toString(16),s=o.e.toString(16);return r.setPublic(i,s),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}if("EC"==t){var o,a,u=e,c=new at.crypto.ECDSA({curve:u}).generateKeyPairHex();return(o=new at.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),o.setPrivateKeyHex(c.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new at.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}throw new Error("unknown algorithm: "+t)},Ut.getPEM=function(t,e,n,r,i,s){var o=at.asn1,a=o.DERObjectIdentifier,u=o.DERInteger,c=o.ASN1Util.newObject,l=at.crypto,h=l.DSA,p=l.ECDSA,f=et;function d(t){return c({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function g(t){return c({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function v(t){return c({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==f&&t instanceof f||void 0!==h&&t instanceof h||void 0!==p&&t instanceof p)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return Et(x=new(0,o.x509.SubjectPublicKeyInfo)(t).tohex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==f&&t instanceof f&&(void 0===n||null==n)&&1==t.isPrivate)return Et(x=d(t).tohex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==p&&t instanceof p&&(void 0===n||null==n)&&1==t.isPrivate){var y=new a({name:t.curveName}).tohex(),b=g(t).tohex(),w="";return(w+=Et(y,"EC PARAMETERS"))+Et(b,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==h&&t instanceof h&&(void 0===n||null==n)&&1==t.isPrivate)return Et(x=v(t).tohex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==f&&t instanceof f&&void 0!==n&&null!=n&&1==t.isPrivate){var x=d(t).tohex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",x,n,r,s)}if("PKCS5PRV"==e&&void 0!==p&&t instanceof p&&void 0!==n&&null!=n&&1==t.isPrivate)return x=g(t).tohex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",x,n,r,s);if("PKCS5PRV"==e&&void 0!==h&&t instanceof h&&void 0!==n&&null!=n&&1==t.isPrivate)return x=v(t).tohex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",x,n,r,s);var E=function(t,e){var n=_(t,e);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).tohex()},_=function(t,e){var n=m.lib.WordArray.random(8),r=m.lib.WordArray.random(8),i=m.PBKDF2(e,n,{keySize:6,iterations:100}),s=m.enc.Hex.parse(t),o=m.TripleDES.encrypt(s,i,{iv:r})+"",a={};return a.ciphertext=o,a.pbkdf2Salt=m.enc.Hex.stringify(n),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=m.enc.Hex.stringify(r),a};if("PKCS8PRV"==e&&null!=f&&t instanceof f&&1==t.isPrivate){var S=d(t).tohex();return x=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:S}}]}).tohex(),void 0===n||null==n?Et(x,"PRIVATE KEY"):Et(b=E(x,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==p&&t instanceof p&&1==t.isPrivate){var C={seq:[{int:1},{octstr:{hex:t.prvKeyHex}}]};return"string"==typeof t.pubKeyHex&&C.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}),S=new c(C).tohex(),x=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:S}}]}).tohex(),void 0===n||null==n?Et(x,"PRIVATE KEY"):Et(b=E(x,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==h&&t instanceof h&&1==t.isPrivate)return S=new u({bigint:t.x}).tohex(),x=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:S}}]}).tohex(),void 0===n||null==n?Et(x,"PRIVATE KEY"):Et(b=E(x,n),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ut.getKeyFromCSRPEM=function(t){var e=_t(t,"CERTIFICATE REQUEST");return Ut.getKeyFromCSRHex(e)},Ut.getKeyFromCSRHex=function(t){var e=Ut.parseCSRHex(t);return Ut.getKey(e.p8pubkeyhex,null,"pkcs8pub")},Ut.parseCSRHex=function(t){var e=lt.getChildIdx,n=lt.getTLV,r={},i=t;if("30"!=i.substr(0,2))throw new Error("malformed CSR(code:001)");var s=e(i,0);if(s.length<1)throw new Error("malformed CSR(code:002)");if("30"!=i.substr(s[0],2))throw new Error("malformed CSR(code:003)");var o=e(i,s[0]);if(o.length<3)throw new Error("malformed CSR(code:004)");return r.p8pubkeyhex=n(i,o[2]),r},Ut.getKeyID=function(t){var e=Ut,n=lt;"string"==typeof t&&-1!=t.indexOf("BEGIN ")&&(t=e.getKey(t));var r=_t(e.getPEM(t)),i=n.getIdxbyList(r,0,[1]),s=n.getV(r,i).substring(2);return at.crypto.Util.hashHex(s,"sha1")},Ut.getJWK=function(t,e,n,r,i){var s,o,a={},u=at.crypto.Util.hashHex;if("string"==typeof t)s=Ut.getKey(t),-1!=t.indexOf("CERTIFICATE")&&(o=_t(t));else{if("object"!=typeof t)throw new Error("unsupported keyinfo type");t instanceof qt?(s=t.getPublicKey(),o=t.hex):s=t}if(s instanceof et&&s.isPrivate)a.kty="RSA",a.n=mt(s.n.toString(16)),a.e=mt(s.e.toString(16)),a.d=mt(s.d.toString(16)),a.p=mt(s.p.toString(16)),a.q=mt(s.q.toString(16)),a.dp=mt(s.dmp1.toString(16)),a.dq=mt(s.dmq1.toString(16)),a.qi=mt(s.coeff.toString(16));else if(s instanceof et&&s.isPublic)a.kty="RSA",a.n=mt(s.n.toString(16)),a.e=mt(s.e.toString(16));else if(s instanceof at.crypto.ECDSA&&s.isPrivate){if("P-256"!==(l=s.getShortNISTPCurveName())&&"P-384"!==l&&"P-521"!==l)throw new Error("unsupported curve name for JWT: "+l);var c=s.getPublicKeyXYHex();a.kty="EC",a.crv=l,a.x=mt(c.x),a.y=mt(c.y),a.d=mt(s.prvKeyHex)}else if(s instanceof at.crypto.ECDSA&&s.isPublic){var l;if("P-256"!==(l=s.getShortNISTPCurveName())&&"P-384"!==l&&"P-521"!==l)throw new Error("unsupported curve name for JWT: "+l);c=s.getPublicKeyXYHex(),a.kty="EC",a.crv=l,a.x=mt(c.x),a.y=mt(c.y)}if(null==a.kty)throw new Error("unsupported keyinfo");return s.isPrivate||1==e||(a.kid=at.jws.JWS.getJWKthumbprint(a)),null!=o&&1!=n&&(a.x5c=[y(o)]),null!=o&&1!=r&&(a.x5t=ft(y(u(o,"sha1")))),null!=o&&1!=i&&(a["x5t#S256"]=ft(y(u(o,"sha256")))),a},Ut.getJWKFromKey=function(t){return Ut.getJWK(t,!0,!0,!0,!0)},et.getPosArrayOfChildrenFromHex=function(t){return lt.getChildIdx(t,0)},et.getHexValueArrayOfChildrenFromHex=function(t){var e,n=lt.getV,r=n(t,(e=et.getPosArrayOfChildrenFromHex(t))[0]),i=n(t,e[1]),s=n(t,e[2]),o=n(t,e[3]),a=n(t,e[4]),u=n(t,e[5]),c=n(t,e[6]),l=n(t,e[7]),h=n(t,e[8]);return(e=new Array).push(r,i,s,o,a,u,c,l,h),e},et.prototype.readPrivateKeyFromPEMString=function(t){var e=_t(t),n=et.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},et.prototype.readPKCS5PrvKeyHex=function(t){var e=et.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},et.prototype.readPKCS8PrvKeyHex=function(t){var e,n,r,i,s,o,a,u,c=lt.getVbyListEx;if(!1===lt.isASN1HEX(t))throw new Error("not ASN.1 hex string");try{e=c(t,0,[2,0,1],"02"),n=c(t,0,[2,0,2],"02"),r=c(t,0,[2,0,3],"02"),i=c(t,0,[2,0,4],"02"),s=c(t,0,[2,0,5],"02"),o=c(t,0,[2,0,6],"02"),a=c(t,0,[2,0,7],"02"),u=c(t,0,[2,0,8],"02")}catch(l){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(e,n,r,i,s,o,a,u)},et.prototype.readPKCS5PubKeyHex=function(t){var e=lt,n=e.getV;if(!1===e.isASN1HEX(t))throw new Error("keyHex is not ASN.1 hex string");var r=e.getChildIdx(t,0);if(2!==r.length||"02"!==t.substr(r[0],2)||"02"!==t.substr(r[1],2))throw new Error("wrong hex for PKCS#5 public key");var i=n(t,r[0]),s=n(t,r[1]);this.setPublic(i,s)},et.prototype.readPKCS8PubKeyHex=function(t){var e=lt;if(!1===e.isASN1HEX(t))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==e.getTLVbyListEx(t,0,[0,0]))throw new Error("not PKCS8 RSA public key");var n=e.getTLVbyListEx(t,0,[1,0]);this.readPKCS5PubKeyHex(n)},et.prototype.readCertPubKeyHex=function(t,e){var n,r;(n=new qt).readCertHex(t),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)},et.prototype.sign=function(t,e){var n=function(t){return at.crypto.Util.hashString(t,e)}(t);return this.signWithMessageHash(n,e)},et.prototype.signWithMessageHash=function(t,e){var n=J(at.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return Ht(this.doPrivate(n).toString(16),this.n.bitLength())},et.prototype.signPSS=function(t,e,n){var r,i=(r=xt(t),at.crypto.Util.hashHex(r,e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(i,e,n)},et.prototype.signWithMessageHashPSS=function(t,e,n){var r,i=wt(t),s=i.length,o=this.n.bitLength()-1,a=Math.ceil(o/8),u=function(t){return at.crypto.Util.hashHex(t,e)};if(-1===n||void 0===n)n=s;else if(-2===n)n=a-s-2;else if(n<-2)throw new Error("invalid salt length");if(a<s+n+2)throw new Error("data too long");var c="";n>0&&(c=new Array(n),(new Z).nextBytes(c),c=String.fromCharCode.apply(String,c));var l=wt(u(xt("\0\0\0\0\0\0\0\0"+i+c))),h=[];for(r=0;r<a-n-s-2;r+=1)h[r]=0;var p=String.fromCharCode.apply(String,h)+"\x01"+c,f=zt(l,p.length,u),d=[];for(r=0;r<p.length;r+=1)d[r]=p.charCodeAt(r)^f.charCodeAt(r);for(d[0]&=~(65280>>8*a-o&255),r=0;r<s;r++)d.push(l.charCodeAt(r));return d.push(188),Ht(this.doPrivate(new w(d)).toString(16),this.n.bitLength())},et.prototype.verify=function(t,e){if(null==(e=e.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var n=J(e,16),r=this.n.bitLength();if(n.bitLength()>r)return!1;var i=this.doPublic(n).toString(16);if(i.length+3!=r/4)return!1;var s=Kt(i.replace(/^1f+00/,""));if(0==s.length)return!1;var o=s[0];return s[1]==function(t){return at.crypto.Util.hashString(t,o)}(t)},et.prototype.verifyWithMessageHash=function(t,e){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var n=J(e,16);if(n.bitLength()>this.n.bitLength())return 0;var r=Kt(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&r[1]==t},et.prototype.verifyPSS=function(t,e,n,r){var i,s=(i=xt(t),at.crypto.Util.hashHex(i,n));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(s,e,n,r)},et.prototype.verifyWithMessageHashPSS=function(t,e,n,r){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,s=new w(e,16),o=function(t){return at.crypto.Util.hashHex(t,n)},a=wt(t),u=a.length,c=this.n.bitLength()-1,l=Math.ceil(c/8);if(-1===r||void 0===r)r=u;else if(-2===r)r=l-u-2;else if(r<-2)throw new Error("invalid salt length");if(l<u+r+2)throw new Error("data too long");var h=this.doPublic(s).toByteArray();for(i=0;i<h.length;i+=1)h[i]&=255;for(;h.length<l;)h.unshift(0);if(188!==h[l-1])throw new Error("encoded message does not end in 0xbc");var p=(h=String.fromCharCode.apply(String,h)).substr(0,l-u-1),f=h.substr(p.length,u),d=65280>>8*l-c&255;if(0!=(p.charCodeAt(0)&d))throw new Error("bits beyond keysize not zero");var m=zt(f,p.length,o),g=[];for(i=0;i<p.length;i+=1)g[i]=p.charCodeAt(i)^m.charCodeAt(i);g[0]&=~d;var v=l-u-r-2;for(i=0;i<v;i+=1)if(0!==g[i])throw new Error("leftmost octets not zero");if(1!==g[v])throw new Error("0x01 marker not found");return f===wt(o(xt("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,g.slice(-r)))))},et.SALT_LEN_HLEN=-1,et.SALT_LEN_MAX=-2,et.SALT_LEN_RECOVER=-2,qt.hex2dn=function(t,e){void 0===e&&(e=0);var n=new qt;return lt.getTLV(t,e),n.getX500Name(t).str},qt.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw new Error("malformed RDN");for(var n=new Array,r=lt.getChildIdx(t,e),i=0;i<r.length;i++)n.push(qt.hex2attrTypeValue(t,r[i]));return(n=n.map(function(t){return t.replace("+","\\+")})).join("+")},qt.hex2attrTypeValue=function(t,e){var n=lt,r=n.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw new Error("malformed attribute type and value");var i=n.getChildIdx(t,e);2!==i.length||t.substr(i[0],2);var s=r(t,i[0]),o=at.asn1.ASN1Util.oidHexToInt(s);return at.asn1.x509.OID.oid2atype(o)+"="+wt(r(t,i[1]))},qt.getPublicKeyFromCertHex=function(t){var e=new qt;return e.readCertHex(t),e.getPublicKey()},qt.getPublicKeyFromCertPEM=function(t){var e=new qt;return e.readCertPEM(t),e.getPublicKey()},qt.getPublicKeyInfoPropOfCertPEM=function(t){var e,n,r=lt.getVbyList,i={algparam:null};return(e=new qt).readCertPEM(t),n=e.getPublicKeyHex(),i.keyhex=r(n,0,[1],"03").substr(2),i.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=r(n,0,[0,1],"06")),i},qt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==at&&at||(at={}),void 0!==at.jws&&at.jws||(at.jws={}),at.jws.JWS=function(){var t=at.jws.JWS.isSafeJSONString;this.parseJWS=function(e,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],s=r[2],o=r[3],a=i+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=a,!n){var u=gt(o),c=J(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var l=ct(i),h=ct(s);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=h,!t(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},at.jws.JWS.sign=function(t,e,n,r,i){var s,o,a,u=at.jws.JWS,c=u.readSafeJSONString,l=u.isSafeJSONString,h=at.crypto,p=h.Mac,f=h.Signature,d=JSON;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(s=d.stringify(o=e)),"string"==typeof e){if(!l(s=e))throw"JWS Head is not safe JSON string: "+s;o=c(s)}if(a=n,"object"==typeof n&&(a=d.stringify(n)),""!=t&&null!=t||void 0===o.alg||(t=o.alg),""!=t&&null!=t&&void 0===o.alg&&(o.alg=t,s=d.stringify(o)),t!==o.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+o.alg;var m=null;if(void 0===u.jwsalg2sigalg[t])throw"unsupported alg name: "+t;m=u.jwsalg2sigalg[t];var g=ut(s)+"."+ut(a),v="";if("Hmac"==m.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var y=new p({alg:m,prov:"cryptojs",pass:r});y.updateString(g),v=y.doFinal()}else if(-1!=m.indexOf("withECDSA")){(w=new f({alg:m})).init(r,i),w.updateString(g);var b=w.sign();v=at.crypto.ECDSA.asn1SigToConcatSig(b)}else{var w;"none"!=m&&((w=new f({alg:m})).init(r,i),w.updateString(g),v=w.sign())}return g+"."+mt(v)},at.jws.JWS.verify=function(t,e,n){var r,i=at.jws.JWS,s=i.readSafeJSONString,o=at.crypto,a=o.ECDSA,u=o.Mac,c=o.Signature;if(r=et,!Ot(t))return!1;var l=t.split(".");if(3!==l.length)return!1;var h,p=l[0]+"."+l[1],f=gt(l[2]),d=s(ct(l[0])),m=null;if(void 0===d.alg)throw"algorithm not specified in header";if(h=(m=d.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&-1==(":"+n.join(":")+":").indexOf(":"+m+":"))throw"algorithm '"+m+"' not accepted in the list";if("none"!=m&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=Ut.getKey(e)),!("RS"!=h&&"PS"!=h||e instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==h&&!(e instanceof a))throw"key shall be a ECDSA obj for ES* algs";var g=null;if(void 0===i.jwsalg2sigalg[d.alg])throw"unsupported alg name: "+m;if("none"==(g=i.jwsalg2sigalg[m]))throw"not supported";if("Hmac"==g.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var v=new u({alg:g,pass:e});return v.updateString(p),f==v.doFinal()}if(-1!=g.indexOf("withECDSA")){var y,b=null;try{b=a.concatSigToASN1Sig(f)}catch(w){return!1}return(y=new c({alg:g})).init(e),y.updateString(p),y.verify(b)}return(y=new c({alg:g})).init(e),y.updateString(p),y.verify(f)},at.jws.JWS.parse=function(t){var e,n,r=t.split("."),i={};if(2!=r.length&&3!=r.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=r[1],3==r.length&&(n=r[2]),i.headerObj=at.jws.JWS.readSafeJSONString(ct(r[0])),i.payloadObj=at.jws.JWS.readSafeJSONString(ct(e)),i.headerPP=JSON.stringify(i.headerObj,null,"  "),i.payloadPP=null==i.payloadObj?ct(e):JSON.stringify(i.payloadObj,null,"  "),void 0!==n&&(i.sigHex=gt(n)),i},at.jws.JWS.verifyJWT=function(t,e,n){var r=at.jws,i=r.JWS,s=i.readSafeJSONString,o=i.inArray,a=i.includedArray;if(!Ot(t))return!1;var u=t.split(".");if(3!=u.length)return!1;var c=u[0],l=u[1],h=(gt(u[2]),s(ct(c))),p=s(ct(l));if(void 0===h.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!o(h.alg,n.alg))return!1;if(void 0!==p.iss&&"object"==typeof n.iss&&!o(p.iss,n.iss))return!1;if(void 0!==p.sub&&"object"==typeof n.sub&&!o(p.sub,n.sub))return!1;if(void 0!==p.aud&&"object"==typeof n.aud)if("string"==typeof p.aud){if(!o(p.aud,n.aud))return!1}else if("object"==typeof p.aud&&!a(p.aud,n.aud))return!1;var f=r.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(f=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==p.exp&&"number"==typeof p.exp&&p.exp+n.gracePeriod<f||void 0!==p.nbf&&"number"==typeof p.nbf&&f<p.nbf-n.gracePeriod||void 0!==p.iat&&"number"==typeof p.iat&&f<p.iat-n.gracePeriod||void 0!==p.jti&&void 0!==n.jti&&p.jti!==n.jti||!i.verify(t,e,n.alg))},at.jws.JWS.includedArray=function(t,e){var n=at.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e))return!1;return!0},at.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},at.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},at.jws.JWS.isSafeJSONString=function(t,e,n){var i=null;try{return"object"!=typeof(i=ot(t))||i.constructor===Array?0:(e&&(e[n]=i),1)}catch(r){return 0}},at.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=ot(t))||e.constructor===Array?null:e}catch(r){return null}},at.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},at.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var n=xt(e);return mt(at.crypto.Util.hashHex(n,"sha256"))},at.jws.IntDate={},at.jws.IntDate.get=function(t){var e=at.jws.IntDate,n=e.getNow,r=e.getZulu;if("now"==t)return n();if("now + 1hour"==t)return n()+3600;if("now + 1day"==t)return n()+86400;if("now + 1month"==t)return n()+2592e3;if("now + 1year"==t)return n()+31536e3;if(t.match(/Z$/))return r(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},at.jws.IntDate.getZulu=function(t){return function(t){return Math.round(function(t){var e,n,r,i,s,o,a,u,c,l,h;if(h=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=h[1],e=parseInt(u),2===u.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),n=parseInt(h[2])-1,r=parseInt(h[3]),i=parseInt(h[4]),s=parseInt(h[5]),o=parseInt(h[6]),a=0,""!==(c=h[7])&&(l=(c.substr(1)+"00").substr(0,3),a=parseInt(l)),Date.UTC(e,n,r,i,s,o,a);throw new Error("unsupported zulu format: "+t)}(t)/1e3)}(t)},at.jws.IntDate.getNow=function(){return~~(new Date/1e3)},at.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},at.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},void 0!==at&&at||(at={}),void 0!==at.jws&&at.jws||(at.jws={}),at.jws.JWSJS=function(){var t=at.jws.JWS,e=t.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,n,r){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=at.jws.JWS.sign(t,e,this.sPayload,n,r).split(".");this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(h){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+h}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(2!==n.length)return!1;if(!1===this.verifyNth(e,n[0],n[1]))return!1}return!0},this.verifyNth=function(e,n,r){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var i=this.aHeader[e]+"."+this.sPayload+"."+this.aSignature[e],s=!1;try{s=t.verify(i,n,r)}catch(h){return!1}return s},this.readJWSJS=function(t){if("string"==typeof t){var r=e(t);if(null==r)throw"argument is not safe JSON object string";this.aHeader=r.headers,this.sPayload=r.payload,this.aSignature=r.signatures}else try{if(!(t.headers.length>0))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(t.signatures.length>0))throw"malformed signatures";this.aSignature=t.signatures}catch(n){throw"malformed JWS-JS JSON object: "+n}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},e.fs=at},1235:(t,e,n)=>{var r=n(2144)(n(7038),"DataView");t.exports=r},1505:(t,e,n)=>{var r=n(9410),i=n(1143),s=n(604),o=n(584),a=n(7792);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=o,u.prototype.set=a,t.exports=u},2544:(t,e,n)=>{var r=n(920),i=n(352);function s(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}(s.prototype=r(i.prototype)).constructor=s,t.exports=s},3545:(t,e,n)=>{var r=n(3391),i=n(8971),s=n(8858),o=n(3913),a=n(8944);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=o,u.prototype.set=a,t.exports=u},9194:(t,e,n)=>{var r=n(920),i=n(352);function s(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}(s.prototype=r(i.prototype)).constructor=s,t.exports=s},9046:(t,e,n)=>{var r=n(2144)(n(7038),"Map");t.exports=r},3177:(t,e,n)=>{var r=n(536),i=n(1502),s=n(4960),o=n(1539),a=n(4138);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=o,u.prototype.set=a,t.exports=u},7129:(t,e,n)=>{var r=n(2144)(n(7038),"Promise");t.exports=r},4918:(t,e,n)=>{var r=n(2144)(n(7038),"Set");t.exports=r},8690:(t,e,n)=>{var r=n(3177),i=n(365),s=n(8235);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=i,o.prototype.has=s,t.exports=o},3667:(t,e,n)=>{var r=n(3545),i=n(8034),s=n(7238),o=n(5887),a=n(1450),u=n(1386);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=a,c.prototype.set=u,t.exports=c},7333:(t,e,n)=>{var r=n(7038);t.exports=r.Symbol},6820:(t,e,n)=>{var r=n(7038);t.exports=r.Uint8Array},4203:(t,e,n)=>{var r=n(2144)(n(7038),"WeakMap");t.exports=r},1638:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},4500:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},1375:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}},5242:(t,e,n)=>{var r=n(2166);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},679:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},1890:(t,e,n)=>{var r=n(8282),i=n(2952),s=n(1690),o=n(4444),a=n(968),u=n(7679),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=s(t),l=!n&&i(t),h=!n&&!l&&o(t),p=!n&&!l&&!h&&u(t),f=n||l||h||p,d=f?r(t.length,String):[],m=d.length;for(var g in t)!e&&!c.call(t,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||d.push(g);return d}},4992:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},4165:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},3530:(t,e,n)=>{var r=n(2007),i=n(1166);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},3898:(t,e,n)=>{var r=n(2007),i=n(1166),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];s.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}},5758:(t,e,n)=>{var r=n(1166);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},2067:(t,e,n)=>{var r=n(1694),i=n(9108);t.exports=function(t,e){return t&&r(e,i(e),t)}},882:(t,e,n)=>{var r=n(1694),i=n(2970);t.exports=function(t,e){return t&&r(e,i(e),t)}},2007:(t,e,n)=>{var r=n(395);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},5820:t=>{t.exports=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}},7007:(t,e,n)=>{var r=n(3667),i=n(4500),s=n(3898),o=n(2067),a=n(882),u=n(694),c=n(3595),l=n(4746),h=n(8857),p=n(8605),f=n(1675),d=n(6663),m=n(2963),g=n(2143),v=n(1563),y=n(1690),b=n(4444),w=n(2e3),x=n(3867),E=n(5140),_=n(9108),S=n(2970),C="[object Arguments]",A="[object Function]",I="[object Object]",T={};T[C]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[I]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[A]=T["[object WeakMap]"]=!1,t.exports=function t(e,n,k,P,R,D){var F,B=1&n,O=2&n,N=4&n;if(k&&(F=R?k(e,P,R,D):k(e)),void 0!==F)return F;if(!x(e))return e;var M=y(e);if(M){if(F=m(e),!B)return c(e,F)}else{var L=d(e),V=L==A||"[object GeneratorFunction]"==L;if(b(e))return u(e,B);if(L==I||L==C||V&&!R){if(F=O||V?{}:v(e),!B)return O?h(e,a(F,e)):l(e,o(F,e))}else{if(!T[L])return R?e:{};F=g(e,L,B)}}D||(D=new r);var j=D.get(e);if(j)return j;D.set(e,F),E(e)?e.forEach(function(r){F.add(t(r,n,k,r,e,D))}):w(e)&&e.forEach(function(r,i){F.set(i,t(r,n,k,i,e,D))});var U=M?void 0:(N?O?f:p:O?S:_)(e);return i(U||e,function(r,i){U&&(r=e[i=r]),s(F,i,t(r,n,k,i,e,D))}),F}},920:(t,e,n)=>{var r=n(3867),i=Object.create,s=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=s},3057:(t,e,n)=>{var r=n(2781),i=n(4272);t.exports=function(t,e,n,s){var o=t.length;for((n=r(n))<0&&(n=-n>o?0:o+n),(s=void 0===s||s>o?o:r(s))<0&&(s+=o),s=n>s?0:i(s);n<s;)t[n++]=e;return t}},2229:t=>{t.exports=function(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}},6369:(t,e,n)=>{var r=n(4165),i=n(1006);t.exports=function t(e,n,s,o,a){var u=-1,c=e.length;for(s||(s=i),a||(a=[]);++u<c;){var l=e[u];n>0&&s(l)?n>1?t(l,n-1,s,o,a):r(a,l):o||(a[a.length]=l)}return a}},5290:(t,e,n)=>{var r=n(8269)();t.exports=r},3436:(t,e,n)=>{var r=n(4667),i=n(2773);t.exports=function(t,e){for(var n=0,s=(e=r(e,t)).length;null!=t&&n<s;)t=t[i(e[n++])];return n&&n==s?t:void 0}},9215:(t,e,n)=>{var r=n(4165),i=n(1690);t.exports=function(t,e,n){var s=e(t);return i(t)?s:r(s,n(t))}},2802:(t,e,n)=>{var r=n(7333),i=n(1613),s=n(1244),o=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):s(t)}},5333:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},2166:(t,e,n)=>{var r=n(2229),i=n(2469),s=n(4299);t.exports=function(t,e,n){return e==e?s(t,e,n):r(t,i,n)}},5561:(t,e,n)=>{var r=n(8690),i=n(5242),s=n(679),o=n(4992),a=n(544),u=n(3747),c=Math.min;t.exports=function(t,e,n){for(var l=n?s:i,h=t[0].length,p=t.length,f=p,d=Array(p),m=1/0,g=[];f--;){var v=t[f];f&&e&&(v=o(v,a(e))),m=c(v.length,m),d[f]=!n&&(e||h>=120&&v.length>=120)?new r(f&&v):void 0}v=t[0];var y=-1,b=d[0];t:for(;++y<h&&g.length<m;){var w=v[y],x=e?e(w):w;if(w=n||0!==w?w:0,!(b?u(b,x):l(g,x,n))){for(f=p;--f;){var E=d[f];if(!(E?u(E,x):l(t[f],x,n)))continue t}b&&b.push(x),g.push(w)}}return g}},7090:(t,e,n)=>{var r=n(2802),i=n(7503);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},3434:(t,e,n)=>{var r=n(6663),i=n(7503);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},2469:t=>{t.exports=function(t){return t!=t}},3540:(t,e,n)=>{var r=n(5836),i=n(8466),s=n(3867),o=n(1217),a=/^\[object .+?Constructor\]$/,u=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||i(t))&&(r(t)?u:a).test(o(t))}},7495:(t,e,n)=>{var r=n(6663),i=n(7503);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},9390:(t,e,n)=>{var r=n(2802),i=n(8613),s=n(7503),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return s(t)&&i(t.length)&&!!o[r(t)]}},2488:(t,e,n)=>{var r=n(8845),i=n(6700),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}},762:(t,e,n)=>{var r=n(3867),i=n(8845),s=n(5618),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return s(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&o.call(t,a))&&n.push(a);return n}},352:t=>{t.exports=function(){}},9085:(t,e,n)=>{var r=n(3667),i=n(3530),s=n(5290),o=n(3607),a=n(3867),u=n(2970),c=n(5959);t.exports=function t(e,n,l,h,p){e!==n&&s(n,function(s,u){if(p||(p=new r),a(s))o(e,n,u,l,t,h,p);else{var f=h?h(c(e,u),s,u+"",e,n,p):void 0;void 0===f&&(f=s),i(e,u,f)}},u)}},3607:(t,e,n)=>{var r=n(3530),i=n(694),s=n(6282),o=n(3595),a=n(1563),u=n(2952),c=n(1690),l=n(2027),h=n(4444),p=n(5836),f=n(3867),d=n(2358),m=n(7679),g=n(5959),v=n(1413);t.exports=function(t,e,n,y,b,w,x){var E=g(t,n),_=g(e,n),S=x.get(_);if(S)r(t,n,S);else{var C=w?w(E,_,n+"",t,e,x):void 0,A=void 0===C;if(A){var I=c(_),T=!I&&h(_),k=!I&&!T&&m(_);C=_,I||T||k?c(E)?C=E:l(E)?C=o(E):T?(A=!1,C=i(_,!0)):k?(A=!1,C=s(_,!0)):C=[]:d(_)||u(_)?(C=E,u(E)?C=v(E):f(E)&&!p(E)||(C=a(_))):A=!1}A&&(x.set(_,C),b(C,_,y,w,x),x.delete(_)),r(t,n,C)}}},6737:(t,e,n)=>{var r=n(218),i=n(8303);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},218:(t,e,n)=>{var r=n(3436),i=n(8262),s=n(4667);t.exports=function(t,e,n){for(var o=-1,a=e.length,u={};++o<a;){var c=e[o],l=r(t,c);n(l,c)&&i(u,s(c,t),l)}return u}},4441:(t,e,n)=>{var r=n(290),i=n(5529),s=n(9009);t.exports=function(t,e){return s(i(t,e,r),t+"")}},8262:(t,e,n)=>{var r=n(3898),i=n(4667),s=n(968),o=n(3867),a=n(2773);t.exports=function(t,e,n,u){if(!o(t))return t;for(var c=-1,l=(e=i(e,t)).length,h=l-1,p=t;null!=p&&++c<l;){var f=a(e[c]),d=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(c!=h){var m=p[f];void 0===(d=u?u(m,f,p):void 0)&&(d=o(m)?m:s(e[c+1])?[]:{})}r(p,f,d),p=p[f]}return t}},4346:(t,e,n)=>{var r=n(290),i=n(1625);t.exports=i?function(t,e){return i.set(t,e),t}:r},9372:(t,e,n)=>{var r=n(5654),i=n(395),s=n(290);t.exports=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:s},3586:t=>{t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}},8282:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},8166:(t,e,n)=>{var r=n(7333),i=n(4992),s=n(1690),o=n(7786),a=r?r.prototype:void 0,u=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return i(e,t)+"";if(o(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},3743:(t,e,n)=>{var r=n(7478),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},544:t=>{t.exports=function(t){return function(e){return t(e)}}},3987:(t,e,n)=>{var r=n(8690),i=n(5242),s=n(679),o=n(3747),a=n(2252),u=n(7673);t.exports=function(t,e,n){var c=-1,l=i,h=t.length,p=!0,f=[],d=f;if(n)p=!1,l=s;else if(h>=200){var m=e?null:a(t);if(m)return u(m);p=!1,l=o,d=new r}else d=e?[]:f;t:for(;++c<h;){var g=t[c],v=e?e(g):g;if(g=n||0!==g?g:0,p&&v==v){for(var y=d.length;y--;)if(d[y]===v)continue t;e&&d.push(v),f.push(g)}else l(d,v,n)||(d!==f&&d.push(v),f.push(g))}return f}},2064:(t,e,n)=>{var r=n(4667),i=n(7842),s=n(1746),o=n(2773);t.exports=function(t,e){return e=r(e,t),null==(t=s(t,e))||delete t[o(i(e))]}},3747:t=>{t.exports=function(t,e){return t.has(e)}},7176:(t,e,n)=>{var r=n(2027);t.exports=function(t){return r(t)?t:[]}},4667:(t,e,n)=>{var r=n(1690),i=n(9743),s=n(9775),o=n(1233);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:s(o(t))}},8461:(t,e,n)=>{var r=n(6820);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},694:(t,e,n)=>{t=n.nmd(t);var r=n(7038),i=e&&!e.nodeType&&e,s=i&&t&&!t.nodeType&&t,o=s&&s.exports===i?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}},9757:(t,e,n)=>{var r=n(8461);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},3615:t=>{var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},2282:(t,e,n)=>{var r=n(7333),i=r?r.prototype:void 0,s=i?i.valueOf:void 0;t.exports=function(t){return s?Object(s.call(t)):{}}},6282:(t,e,n)=>{var r=n(8461);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},978:t=>{var e=Math.max;t.exports=function(t,n,r,i){for(var s=-1,o=t.length,a=r.length,u=-1,c=n.length,l=e(o-a,0),h=Array(c+l),p=!i;++u<c;)h[u]=n[u];for(;++s<a;)(p||s<o)&&(h[r[s]]=t[s]);for(;l--;)h[u++]=t[s++];return h}},6110:t=>{var e=Math.max;t.exports=function(t,n,r,i){for(var s=-1,o=t.length,a=-1,u=r.length,c=-1,l=n.length,h=e(o-u,0),p=Array(h+l),f=!i;++s<h;)p[s]=t[s];for(var d=s;++c<l;)p[d+c]=n[c];for(;++a<u;)(f||s<o)&&(p[d+r[a]]=t[s++]);return p}},3595:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},1694:(t,e,n)=>{var r=n(3898),i=n(2007);t.exports=function(t,e,n,s){var o=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var c=e[a],l=s?s(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),o?i(n,c,l):r(n,c,l)}return n}},4746:(t,e,n)=>{var r=n(1694),i=n(296);t.exports=function(t,e){return r(t,i(t),e)}},8857:(t,e,n)=>{var r=n(1694),i=n(9572);t.exports=function(t,e){return r(t,i(t),e)}},3412:(t,e,n)=>{var r=n(7038);t.exports=r["__core-js_shared__"]},3929:t=>{t.exports=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}},906:(t,e,n)=>{var r=n(4441),i=n(1100);t.exports=function(t){return r(function(e,n){var r=-1,s=n.length,o=s>1?n[s-1]:void 0,a=s>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(s--,o):void 0,a&&i(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),e=Object(e);++r<s;){var u=n[r];u&&t(e,u,r,o)}return e})}},8269:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var u=o[t?a:++i];if(!1===n(s[u],u,s))break}return e}}},1345:(t,e,n)=>{var r=n(7108),i=n(7038);t.exports=function(t,e,n){var s=1&e,o=r(t);return function e(){var r=this&&this!==i&&this instanceof e?o:t;return r.apply(s?n:this,arguments)}}},7108:(t,e,n)=>{var r=n(920),i=n(3867);t.exports=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=r(t.prototype),s=t.apply(n,e);return i(s)?s:n}}},6402:(t,e,n)=>{var r=n(1638),i=n(7108),s=n(8167),o=n(8532),a=n(8665),u=n(3496),c=n(7038);t.exports=function(t,e,n){var l=i(t);return function i(){for(var h=arguments.length,p=Array(h),f=h,d=a(i);f--;)p[f]=arguments[f];var m=h<3&&p[0]!==d&&p[h-1]!==d?[]:u(p,d);if((h-=m.length)<n)return o(t,e,s,i.placeholder,void 0,p,m,void 0,void 0,n-h);var g=this&&this!==c&&this instanceof i?l:t;return r(g,this,p)}}},8167:(t,e,n)=>{var r=n(978),i=n(6110),s=n(3929),o=n(7108),a=n(8532),u=n(8665),c=n(5230),l=n(3496),h=n(7038);t.exports=function t(e,n,p,f,d,m,g,v,y,b){var w=128&n,x=1&n,E=2&n,_=24&n,S=512&n,C=E?void 0:o(e);return function A(){for(var I=arguments.length,T=Array(I),k=I;k--;)T[k]=arguments[k];if(_)var P=u(A),R=s(T,P);if(f&&(T=r(T,f,d,_)),m&&(T=i(T,m,g,_)),I-=R,_&&I<b){var D=l(T,P);return a(e,n,t,A.placeholder,p,T,D,v,y,b-I)}var F=x?p:this,B=E?F[e]:e;return I=T.length,v?T=c(T,v):S&&I>1&&T.reverse(),w&&y<I&&(T.length=y),this&&this!==h&&this instanceof A&&(B=C||o(B)),B.apply(F,T)}}},3186:(t,e,n)=>{var r=n(1638),i=n(7108),s=n(7038);t.exports=function(t,e,n,o){var a=1&e,u=i(t);return function e(){for(var i=-1,c=arguments.length,l=-1,h=o.length,p=Array(h+c),f=this&&this!==s&&this instanceof e?u:t;++l<h;)p[l]=o[l];for(;c--;)p[l++]=arguments[++i];return r(f,a?n:this,p)}}},8532:(t,e,n)=>{var r=n(8580),i=n(7439),s=n(3616);t.exports=function(t,e,n,o,a,u,c,l,h,p){var f=8&e;e|=f?32:64,4&(e&=~(f?64:32))||(e&=-4);var d=[t,e,a,f?u:void 0,f?c:void 0,f?void 0:u,f?void 0:c,l,h,p],m=n.apply(void 0,d);return r(t)&&i(m,d),m.placeholder=o,s(m,t,e)}},2252:(t,e,n)=>{var r=n(4918),i=n(9122),s=n(7673),o=r&&1/s(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=o},9739:(t,e,n)=>{var r=n(4346),i=n(1345),s=n(6402),o=n(8167),a=n(3186),u=n(3080),c=n(3118),l=n(7439),h=n(3616),p=n(2781),f=Math.max;t.exports=function(t,e,n,d,m,g,v,y){var b=2&e;if(!b&&"function"!=typeof t)throw new TypeError("Expected a function");var w=d?d.length:0;if(w||(e&=-97,d=m=void 0),v=void 0===v?v:f(p(v),0),y=void 0===y?y:p(y),w-=m?m.length:0,64&e){var x=d,E=m;d=m=void 0}var _=b?void 0:u(t),S=[t,e,n,d,m,x,E,g,v,y];if(_&&c(S,_),t=S[0],e=S[1],n=S[2],d=S[3],m=S[4],!(y=S[9]=void 0===S[9]?b?0:t.length:f(S[9]-w,0))&&24&e&&(e&=-25),e&&1!=e)C=8==e||16==e?s(t,e,y):32!=e&&33!=e||m.length?o.apply(void 0,S):a(t,e,n,d);else var C=i(t,e,n);return h((_?r:l)(C,S),t,e)}},925:(t,e,n)=>{var r=n(2358);t.exports=function(t){return r(t)?void 0:t}},395:(t,e,n)=>{var r=n(2144),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},58:(t,e,n)=>{var r=n(4694),i=n(5529),s=n(9009);t.exports=function(t){return s(i(t,void 0,r),t+"")}},1138:t=>{var e="object"==typeof global&&global&&global.Object===Object&&global;t.exports=e},8605:(t,e,n)=>{var r=n(9215),i=n(296),s=n(9108);t.exports=function(t){return r(t,s,i)}},1675:(t,e,n)=>{var r=n(9215),i=n(9572),s=n(2970);t.exports=function(t){return r(t,s,i)}},3080:(t,e,n)=>{var r=n(1625),i=n(9122);t.exports=r?function(t){return r.get(t)}:i},3764:(t,e,n)=>{var r=n(2291),i=Object.prototype.hasOwnProperty;t.exports=function(t){for(var e=t.name+"",n=r[e],s=i.call(r,e)?n.length:0;s--;){var o=n[s],a=o.func;if(null==a||a==t)return o.name}return e}},8665:t=>{t.exports=function(t){return t.placeholder}},5556:(t,e,n)=>{var r=n(6586);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},2144:(t,e,n)=>{var r=n(3540),i=n(6825);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},2398:(t,e,n)=>{var r=n(3332)(Object.getPrototypeOf,Object);t.exports=r},1613:(t,e,n)=>{var r=n(7333),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(u){}var i=o.call(t);return r&&(e?t[a]=n:delete t[a]),i}},296:(t,e,n)=>{var r=n(1375),i=n(5336),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols;t.exports=o?function(t){return null==t?[]:(t=Object(t),r(o(t),function(e){return s.call(t,e)}))}:i},9572:(t,e,n)=>{var r=n(4165),i=n(2398),s=n(296),o=n(5336);t.exports=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,s(t)),t=i(t);return e}:o},6663:(t,e,n)=>{var r=n(1235),i=n(9046),s=n(7129),o=n(4918),a=n(4203),u=n(2802),c=n(1217),l="[object Map]",h="[object Promise]",p="[object Set]",f="[object WeakMap]",d="[object DataView]",m=c(r),g=c(i),v=c(s),y=c(o),b=c(a),w=u;(r&&w(new r(new ArrayBuffer(1)))!=d||i&&w(new i)!=l||s&&w(s.resolve())!=h||o&&w(new o)!=p||a&&w(new a)!=f)&&(w=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return d;case g:return l;case v:return h;case y:return p;case b:return f}return e}),t.exports=w},6825:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},4380:t=>{var e=/\{\n\/\* \[wrapped with (.+)\] \*/,n=/,? & /;t.exports=function(t){var r=t.match(e);return r?r[1].split(n):[]}},2138:(t,e,n)=>{var r=n(4667),i=n(2952),s=n(1690),o=n(968),a=n(8613),u=n(2773);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,h=!1;++c<l;){var p=u(e[c]);if(!(h=null!=t&&n(t,p)))break;t=t[p]}return h||++c!=l?h:!!(l=null==t?0:t.length)&&a(l)&&o(p,l)&&(s(t)||i(t))}},9410:(t,e,n)=>{var r=n(5969);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},1143:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},604:(t,e,n)=>{var r=n(5969),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},584:(t,e,n)=>{var r=n(5969),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},7792:(t,e,n)=>{var r=n(5969);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},2963:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},2143:(t,e,n)=>{var r=n(8461),i=n(9757),s=n(3615),o=n(2282),a=n(6282);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return s(t);case"[object Set]":return new u;case"[object Symbol]":return o(t)}}},1563:(t,e,n)=>{var r=n(920),i=n(2398),s=n(8845);t.exports=function(t){return"function"!=typeof t.constructor||s(t)?{}:r(i(t))}},3834:t=>{var e=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;t.exports=function(t,n){var r=n.length;if(!r)return t;var i=r-1;return n[i]=(r>1?"& ":"")+n[i],n=n.join(r>2?", ":" "),t.replace(e,"{\n/* [wrapped with "+n+"] */\n")}},1006:(t,e,n)=>{var r=n(7333),i=n(2952),s=n(1690),o=r?r.isConcatSpreadable:void 0;t.exports=function(t){return s(t)||i(t)||!!(o&&t&&t[o])}},968:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},1100:(t,e,n)=>{var r=n(1166),i=n(3406),s=n(968),o=n(3867);t.exports=function(t,e,n){if(!o(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&s(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},9743:(t,e,n)=>{var r=n(1690),i=n(7786),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||o.test(t)||!s.test(t)||null!=e&&t in Object(e)}},6586:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},8580:(t,e,n)=>{var r=n(2544),i=n(3080),s=n(3764),o=n(4985);t.exports=function(t){var e=s(t),n=o[e];if("function"!=typeof n||!(e in r.prototype))return!1;if(t===n)return!0;var a=i(n);return!!a&&t===a[0]}},8466:(t,e,n)=>{var r,i=n(3412),s=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!s&&s in t}},8845:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},3391:t=>{t.exports=function(){this.__data__=[],this.size=0}},8971:(t,e,n)=>{var r=n(5758),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},8858:(t,e,n)=>{var r=n(5758);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},3913:(t,e,n)=>{var r=n(5758);t.exports=function(t){return r(this.__data__,t)>-1}},8944:(t,e,n)=>{var r=n(5758);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},536:(t,e,n)=>{var r=n(1505),i=n(3545),s=n(9046);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||i),string:new r}}},1502:(t,e,n)=>{var r=n(5556);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},4960:(t,e,n)=>{var r=n(5556);t.exports=function(t){return r(this,t).get(t)}},1539:(t,e,n)=>{var r=n(5556);t.exports=function(t){return r(this,t).has(t)}},4138:(t,e,n)=>{var r=n(5556);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},3911:(t,e,n)=>{var r=n(7425);t.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},3118:(t,e,n)=>{var r=n(978),i=n(6110),s=n(3496),o="__lodash_placeholder__",a=Math.min;t.exports=function(t,e){var n=t[1],u=e[1],c=n|u;if(!(c<131||128==u&&8==n||128==u&&256==n&&t[7].length<=e[8]||384==u&&e[7].length<=e[8]&&8==n))return t;1&u&&(t[2]=e[2],c|=1&n?0:4);var l=e[3];if(l){var h=t[3];t[3]=h?r(h,l,e[4]):l,t[4]=h?s(t[3],o):e[4]}return(l=e[5])&&(t[5]=(h=t[5])?i(h,l,e[6]):l,t[6]=h?s(t[5],o):e[6]),(l=e[7])&&(t[7]=l),128&u&&(t[8]=null==t[8]?e[8]:a(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=c,t}},1625:(t,e,n)=>{var r=n(4203),i=r&&new r;t.exports=i},5969:(t,e,n)=>{var r=n(2144)(Object,"create");t.exports=r},6700:(t,e,n)=>{var r=n(3332)(Object.keys,Object);t.exports=r},5618:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},938:(t,e,n)=>{t=n.nmd(t);var r=n(1138),i=e&&!e.nodeType&&e,s=i&&t&&!t.nodeType&&t,o=s&&s.exports===i&&r.process,a=function(){try{return s&&s.require&&s.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a},1244:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},3332:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},5529:(t,e,n)=>{var r=n(1638),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var s=arguments,o=-1,a=i(s.length-e,0),u=Array(a);++o<a;)u[o]=s[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=s[o];return c[e]=n(u),r(t,this,c)}}},1746:(t,e,n)=>{var r=n(3436),i=n(3586);t.exports=function(t,e){return e.length<2?t:r(t,i(e,0,-1))}},2291:t=>{t.exports={}},5230:(t,e,n)=>{var r=n(3595),i=n(968),s=Math.min;t.exports=function(t,e){for(var n=t.length,o=s(e.length,n),a=r(t);o--;){var u=e[o];t[o]=i(u,n)?a[u]:void 0}return t}},3496:t=>{var e="__lodash_placeholder__";t.exports=function(t,n){for(var r=-1,i=t.length,s=0,o=[];++r<i;){var a=t[r];a!==n&&a!==e||(t[r]=e,o[s++]=r)}return o}},7038:(t,e,n)=>{var r=n(1138),i="object"==typeof self&&self&&self.Object===Object&&self,s=r||i||Function("return this")();t.exports=s},5959:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},365:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},8235:t=>{t.exports=function(t){return this.__data__.has(t)}},7439:(t,e,n)=>{var r=n(4346),i=n(4094)(r);t.exports=i},7673:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},9009:(t,e,n)=>{var r=n(9372),i=n(4094)(r);t.exports=i},3616:(t,e,n)=>{var r=n(4380),i=n(3834),s=n(9009),o=n(1352);t.exports=function(t,e,n){var a=e+"";return s(t,i(a,o(r(a),n)))}},4094:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),s=16-(i-r);if(r=i,s>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},8034:(t,e,n)=>{var r=n(3545);t.exports=function(){this.__data__=new r,this.size=0}},7238:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},5887:t=>{t.exports=function(t){return this.__data__.get(t)}},1450:t=>{t.exports=function(t){return this.__data__.has(t)}},1386:(t,e,n)=>{var r=n(3545),i=n(9046),s=n(3177);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(o)}return n.set(t,e),this.size=n.size,this}},4299:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},9775:(t,e,n)=>{var r=n(3911),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(s,"$1"):n||t)}),e});t.exports=o},2773:(t,e,n)=>{var r=n(7786);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},1217:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(n){}try{return t+""}catch(n){}}return""}},7478:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},1352:(t,e,n)=>{var r=n(4500),i=n(5242),s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];t.exports=function(t,e){return r(s,function(n){var r="_."+n[0];e&n[1]&&!i(t,r)&&t.push(r)}),t.sort()}},282:(t,e,n)=>{var r=n(2544),i=n(9194),s=n(3595);t.exports=function(t){if(t instanceof r)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=s(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},8115:(t,e,n)=>{var r=n(3898),i=n(1694),s=n(906),o=n(3406),a=n(8845),u=n(9108),c=Object.prototype.hasOwnProperty,l=s(function(t,e){if(a(e)||o(e))i(e,u(e),t);else for(var n in e)c.call(e,n)&&r(t,n,e[n])});t.exports=l},3742:(t,e,n)=>{var r=n(7007);t.exports=function(t){return r(t,4)}},5654:t=>{t.exports=function(t){return function(){return t}}},1166:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},6112:(t,e,n)=>{var r=n(3057),i=n(1100);t.exports=function(t,e,n,s){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&i(t,e,n)&&(n=0,s=o),r(t,e,n,s)):[]}},4694:(t,e,n)=>{var r=n(6369);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},8303:(t,e,n)=>{var r=n(5333),i=n(2138);t.exports=function(t,e){return null!=t&&i(t,e,r)}},290:t=>{t.exports=function(t){return t}},8023:(t,e,n)=>{var r=n(4992),i=n(5561),s=n(4441),o=n(7176),a=s(function(t){var e=r(t,o);return e.length&&e[0]===t[0]?i(e):[]});t.exports=a},2952:(t,e,n)=>{var r=n(7090),i=n(7503),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},1690:t=>{t.exports=Array.isArray},3406:(t,e,n)=>{var r=n(5836),i=n(8613);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},2027:(t,e,n)=>{var r=n(3406),i=n(7503);t.exports=function(t){return i(t)&&r(t)}},4444:(t,e,n)=>{t=n.nmd(t);var r=n(7038),i=n(1711),s=e&&!e.nodeType&&e,o=s&&t&&!t.nodeType&&t,a=o&&o.exports===s?r.Buffer:void 0;t.exports=(a?a.isBuffer:void 0)||i},5836:(t,e,n)=>{var r=n(2802),i=n(3867);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},8613:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},2e3:(t,e,n)=>{var r=n(3434),i=n(544),s=n(938),o=s&&s.isMap,a=o?i(o):r;t.exports=a},3867:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7503:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},2358:(t,e,n)=>{var r=n(2802),i=n(2398),s=n(7503),o=Function.prototype.toString,a=Object.prototype.hasOwnProperty,u=o.call(Object);t.exports=function(t){if(!s(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=a.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&o.call(n)==u}},5140:(t,e,n)=>{var r=n(7495),i=n(544),s=n(938),o=s&&s.isSet,a=o?i(o):r;t.exports=a},7786:(t,e,n)=>{var r=n(2802),i=n(7503);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},7679:(t,e,n)=>{var r=n(9390),i=n(544),s=n(938),o=s&&s.isTypedArray,a=o?i(o):r;t.exports=a},9108:(t,e,n)=>{var r=n(1890),i=n(2488),s=n(3406);t.exports=function(t){return s(t)?r(t):i(t)}},2970:(t,e,n)=>{var r=n(1890),i=n(762),s=n(3406);t.exports=function(t){return s(t)?r(t,!0):i(t)}},7842:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},7425:(t,e,n)=>{var r=n(3177);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},3912:(t,e,n)=>{var r=n(9085),i=n(906)(function(t,e,n){r(t,e,n)});t.exports=i},9122:t=>{t.exports=function(){}},2482:(t,e,n)=>{var r=n(4992),i=n(7007),s=n(2064),o=n(4667),a=n(1694),u=n(925),c=n(58),l=n(1675),h=c(function(t,e){var n={};if(null==t)return n;var c=!1;e=r(e,function(e){return e=o(e,t),c||(c=e.length>1),e}),a(t,l(t),n),c&&(n=i(n,7,u));for(var h=e.length;h--;)s(n,e[h]);return n});t.exports=h},464:(t,e,n)=>{var r=n(4441),i=n(9739),s=n(8665),o=n(3496),a=r(function(t,e){var n=o(e,s(a));return i(t,64,void 0,e,n)});a.placeholder={},t.exports=a},1133:(t,e,n)=>{var r=n(6737),i=n(58)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},5336:t=>{t.exports=function(){return[]}},1711:t=>{t.exports=function(){return!1}},5152:(t,e,n)=>{var r=n(5038);t.exports=function(t){return t?1/0===(t=r(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},2781:(t,e,n)=>{var r=n(5152);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},4272:(t,e,n)=>{var r=n(5820),i=n(2781);t.exports=function(t){return t?r(i(t),0,4294967295):0}},5038:(t,e,n)=>{var r=n(3743),i=n(3867),s=n(7786),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(s(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):o.test(t)?NaN:+t}},1413:(t,e,n)=>{var r=n(1694),i=n(2970);t.exports=function(t){return r(t,i(t))}},1233:(t,e,n)=>{var r=n(8166);t.exports=function(t){return null==t?"":r(t)}},2699:(t,e,n)=>{var r=n(3987);t.exports=function(t){return t&&t.length?r(t):[]}},4985:(t,e,n)=>{var r=n(2544),i=n(9194),s=n(352),o=n(1690),a=n(7503),u=n(282),c=Object.prototype.hasOwnProperty;function l(t){if(a(t)&&!o(t)&&!(t instanceof r)){if(t instanceof i)return t;if(c.call(t,"__wrapped__"))return u(t)}return new i(t)}(l.prototype=s.prototype).constructor=l,t.exports=l},3052:function(module,exports,__webpack_require__){var factory;"undefined"!=typeof navigator&&(factory=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(t){_useWebWorker=!!t},getWebWorker=function(){return _useWebWorker},setLocationHref=function(t){locationHref=t},getLocationHref=function(){return locationHref};function createTag(t){return document.createElement(t)}function extendPrototype(t,e){var n,r,i=t.length;for(n=0;n<i;n+=1)for(var s in r=t[n].prototype)Object.prototype.hasOwnProperty.call(r,s)&&(e.prototype[s]=r[s])}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}var audioControllerFactory=function(){function t(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].pause()},resume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].resume()},setRate:function(t){var e,n=this.audios.length;for(e=0;e<n;e+=1)this.audios[e].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):window.Howl?new window.Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),createTypedArray=function(){function t(t,e){var n,r=0,i=[];switch(t){case"int16":case"uint8c":n=1;break;default:n=1.1}for(r=0;r<e;r+=1)i.push(n);return i}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(e,n){return"float32"===e?new Float32Array(n):"int16"===e?new Int16Array(n):"uint8c"===e?new Uint8ClampedArray(n):t(e,n)}:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function _typeof$6(t){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}!function(){var t,e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],n=e.length;for(t=0;t<n;t+=1)BMMath[e[t]]=Math[e[t]]}(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"===_typeof$6(t)&&t.length){var e,n=createSizedArray(t.length),r=t.length;for(e=0;e<r;e+=1)n[e]=Math.abs(t[e]);return n}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){_shouldRoundValues=!!t}function bmRnd(t){return _shouldRoundValues?Math.round(t):t}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,n,r){this.type=t,this.currentTime=e,this.totalTime=n,this.direction=r<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,n,r){this.type=t,this.currentLoop=n,this.totalLoops=e,this.direction=r<0?-1:1}function BMSegmentStartEvent(t,e,n){this.type=t,this.firstFrame=e,this.totalFrames=n}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}function BMAnimationConfigErrorEvent(t,e){this.type=t,this.nativeError=e}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(t,e,n){var r,i,s,o,a,u,c,l;switch(u=n*(1-e),c=n*(1-(a=6*t-(o=Math.floor(6*t)))*e),l=n*(1-(1-a)*e),o%6){case 0:r=n,i=l,s=u;break;case 1:r=c,i=n,s=u;break;case 2:r=u,i=n,s=l;break;case 3:r=u,i=c,s=n;break;case 4:r=l,i=u,s=n;break;case 5:r=n,i=u,s=c}return[r,i,s]}function RGBtoHSV(t,e,n){var r,i=Math.max(t,e,n),s=Math.min(t,e,n),o=i-s,a=0===i?0:o/i,u=i/255;switch(i){case s:r=0;break;case t:r=e-n+o*(e<n?6:0),r/=6*o;break;case e:r=n-t+2*o,r/=6*o;break;case n:r=t-e+4*o,r/=6*o}return[r,a,u]}function addSaturationToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[1]+=e,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[2]+=e,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[0]+=e/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var t,e,n=[];for(t=0;t<256;t+=1)e=t.toString(16),n[t]=1===e.length?"0"+e:e;return function(t,e,r){return t<0&&(t=0),e<0&&(e=0),r<0&&(r=0),"#"+n[t]+n[e]+n[r]}}(),setSubframeEnabled=function(t){subframeEnabled=!!t},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(t){expressionsPlugin=t},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(t){expressionsInterfaces=t},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(t){defaultCurveSegments=t},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(t){idPrefix$1=t},getIdPrefix=function(){return idPrefix$1};function createNS(t){return document.createElementNS(svgNS,t)}function _typeof$5(t){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var dataManager=function(){var t,e,n=1,r=[],i={onmessage:function(){},postMessage:function(e){t({data:e})}},s={postMessage:function(t){i.onmessage({data:t})}};function o(){e||((e=function(e){if(window.Worker&&window.Blob&&getWebWorker()){var n=new Blob(["var _workerSelf = self; self.onmessage = ",e.toString()],{type:"text/javascript"}),r=URL.createObjectURL(n);return new Worker(r)}return t=e,i}(function(t){if(s.dataManager||(s.dataManager=function(){function t(i,s){var o,a,u,c,l,h,p=i.length;for(a=0;a<p;a+=1)if("ks"in(o=i[a])&&!o.completed){if(o.completed=!0,o.hasMask){var f=o.masksProperties;for(c=f.length,u=0;u<c;u+=1)if(f[u].pt.k.i)r(f[u].pt.k);else for(h=f[u].pt.k.length,l=0;l<h;l+=1)f[u].pt.k[l].s&&r(f[u].pt.k[l].s[0]),f[u].pt.k[l].e&&r(f[u].pt.k[l].e[0])}0===o.ty?(o.layers=e(o.refId,s),t(o.layers,s)):4===o.ty&&n(o.shapes)}}function e(t,e){var n=function(t,e){for(var n=0,r=e.length;n<r;){if(e[n].id===t)return e[n];n+=1}return null}(t,e);return n?n.layers.__used?JSON.parse(JSON.stringify(n.layers)):(n.layers.__used=!0,n.layers):null}function n(t){var e,i,s;for(e=t.length-1;e>=0;e-=1)if("sh"===t[e].ty)if(t[e].ks.k.i)r(t[e].ks.k);else for(s=t[e].ks.k.length,i=0;i<s;i+=1)t[e].ks.k[i].s&&r(t[e].ks.k[i].s[0]),t[e].ks.k[i].e&&r(t[e].ks.k[i].e[0]);else"gr"===t[e].ty&&n(t[e].it)}function r(t){var e,n=t.i.length;for(e=0;e<n;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function i(t,e){var n=e?e.split("."):[100,100,100];return t[0]>n[0]||!(n[0]>t[0])&&(t[1]>n[1]||!(n[1]>t[1])&&(t[2]>n[2]||!(n[2]>t[2])&&null))}var s,o=function(){var t=[4,4,14];function e(t){var e,n,r=t.length;for(e=0;e<r;e+=1)5===t[e].ty&&((n=t[e]).t.d={k:[{s:n.t.d,t:0}]})}return function(n){if(i(t,n.v)&&(e(n.layers),n.assets)){var r,s=n.assets.length;for(r=0;r<s;r+=1)n.assets[r].layers&&e(n.assets[r].layers)}}}(),a=(s=[4,7,99],function(t){if(t.chars&&!i(s,t.v)){var e,r=t.chars.length;for(e=0;e<r;e+=1){var o=t.chars[e];o.data&&o.data.shapes&&(n(o.data.shapes),o.data.ip=0,o.data.op=99999,o.data.st=0,o.data.sr=1,o.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},t.chars[e].t||(o.data.shapes.push({ty:"no"}),o.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),u=function(){var t=[5,7,15];function e(t){var e,n,r=t.length;for(e=0;e<r;e+=1)5===t[e].ty&&(n=void 0,"number"==typeof(n=t[e].t.p).a&&(n.a={a:0,k:n.a}),"number"==typeof n.p&&(n.p={a:0,k:n.p}),"number"==typeof n.r&&(n.r={a:0,k:n.r}))}return function(n){if(i(t,n.v)&&(e(n.layers),n.assets)){var r,s=n.assets.length;for(r=0;r<s;r+=1)n.assets[r].layers&&e(n.assets[r].layers)}}}(),c=function(){var t=[4,1,9];function e(t){var n,r,i,s=t.length;for(n=0;n<s;n+=1)if("gr"===t[n].ty)e(t[n].it);else if("fl"===t[n].ty||"st"===t[n].ty)if(t[n].c.k&&t[n].c.k[0].i)for(i=t[n].c.k.length,r=0;r<i;r+=1)t[n].c.k[r].s&&(t[n].c.k[r].s[0]/=255,t[n].c.k[r].s[1]/=255,t[n].c.k[r].s[2]/=255,t[n].c.k[r].s[3]/=255),t[n].c.k[r].e&&(t[n].c.k[r].e[0]/=255,t[n].c.k[r].e[1]/=255,t[n].c.k[r].e[2]/=255,t[n].c.k[r].e[3]/=255);else t[n].c.k[0]/=255,t[n].c.k[1]/=255,t[n].c.k[2]/=255,t[n].c.k[3]/=255}function n(t){var n,r=t.length;for(n=0;n<r;n+=1)4===t[n].ty&&e(t[n].shapes)}return function(e){if(i(t,e.v)&&(n(e.layers),e.assets)){var r,s=e.assets.length;for(r=0;r<s;r+=1)e.assets[r].layers&&n(e.assets[r].layers)}}}(),l=function(){var t=[4,4,18];function e(t){var n,r,i;for(n=t.length-1;n>=0;n-=1)if("sh"===t[n].ty)if(t[n].ks.k.i)t[n].ks.k.c=t[n].closed;else for(i=t[n].ks.k.length,r=0;r<i;r+=1)t[n].ks.k[r].s&&(t[n].ks.k[r].s[0].c=t[n].closed),t[n].ks.k[r].e&&(t[n].ks.k[r].e[0].c=t[n].closed);else"gr"===t[n].ty&&e(t[n].it)}function n(t){var n,r,i,s,o,a,u=t.length;for(r=0;r<u;r+=1){if((n=t[r]).hasMask){var c=n.masksProperties;for(s=c.length,i=0;i<s;i+=1)if(c[i].pt.k.i)c[i].pt.k.c=c[i].cl;else for(a=c[i].pt.k.length,o=0;o<a;o+=1)c[i].pt.k[o].s&&(c[i].pt.k[o].s[0].c=c[i].cl),c[i].pt.k[o].e&&(c[i].pt.k[o].e[0].c=c[i].cl)}4===n.ty&&e(n.shapes)}}return function(e){if(i(t,e.v)&&(n(e.layers),e.assets)){var r,s=e.assets.length;for(r=0;r<s;r+=1)e.assets[r].layers&&n(e.assets[r].layers)}}}(),h={completeData:function(n){n.__complete||(c(n),o(n),a(n),u(n),l(n),t(n.layers,n.assets),function(n,r){if(n){var i=0,s=n.length;for(i=0;i<s;i+=1)1===n[i].t&&(n[i].data.layers=e(n[i].data.refId,r),t(n[i].data.layers,r))}}(n.chars,n.assets),n.__complete=!0)}};return h.checkColors=c,h.checkChars=a,h.checkPathProperties=u,h.checkShapes=l,h.completeLayers=t,h}()),s.assetLoader||(s.assetLoader=function(){function t(t){var e=t.getResponseHeader("content-type");return e&&"json"===t.responseType&&-1!==e.indexOf("json")||t.response&&"object"===_typeof$5(t.response)?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):null}return{load:function(e,n,r,i){var s,o=new XMLHttpRequest;try{o.responseType="json"}catch(a){}o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)s=t(o),r(s);else try{s=t(o),r(s)}catch(a){i&&i(a)}};try{o.open(["G","E","T"].join(""),e,!0)}catch(u){o.open(["G","E","T"].join(""),n+"/"+e,!0)}o.send()}}}()),"loadAnimation"===t.data.type)s.assetLoader.load(t.data.path,t.data.fullPath,function(e){s.dataManager.completeData(e),s.postMessage({id:t.data.id,payload:e,status:"success"})},function(){s.postMessage({id:t.data.id,status:"error"})});else if("complete"===t.data.type){var e=t.data.animation;s.dataManager.completeData(e),s.postMessage({id:t.data.id,payload:e,status:"success"})}else"loadData"===t.data.type&&s.assetLoader.load(t.data.path,t.data.fullPath,function(e){s.postMessage({id:t.data.id,payload:e,status:"success"})},function(){s.postMessage({id:t.data.id,status:"error"})})})).onmessage=function(t){var e=t.data,n=e.id,i=r[n];r[n]=null,"success"===e.status?i.onComplete(e.payload):i.onError&&i.onError()})}function a(t,e){var i="processId_"+(n+=1);return r[i]={onComplete:t,onError:e},i}return{loadAnimation:function(t,n,r){o();var i=a(n,r);e.postMessage({type:"loadAnimation",path:t,fullPath:window.location.origin+window.location.pathname,id:i})},loadData:function(t,n,r){o();var i=a(n,r);e.postMessage({type:"loadData",path:t,fullPath:window.location.origin+window.location.pathname,id:i})},completeAnimation:function(t,n,r){o();var i=a(n,r);e.postMessage({type:"complete",animation:t,id:i})}}}(),ImagePreloader=function(){var t=function(){var t=createTag("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),t}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(t,e,n){var r="";if(t.e)r=t.p;else if(e){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),r=e+i}else r=n,r+=t.u?t.u:"",r+=t.p;return r}function i(t){var e=0,n=setInterval((function(){(t.getBBox().width||e>500)&&(this._imageLoaded(),clearInterval(n)),e+=1}).bind(this),50)}function s(t){var e={assetData:t},n=r(t,this.assetsPath,this.path);return dataManager.loadData(n,(function(t){e.img=t,this._footageLoaded()}).bind(this),(function(){e.img={},this._footageLoaded()}).bind(this)),e}function o(){this._imageLoaded=e.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=i.bind(this),this.createFootageData=s.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return o.prototype={loadAssets:function(t,e){var n;this.imagesLoadedCb=e;var r=t.length;for(n=0;n<r;n+=1)t[n].layers||(t[n].t&&"seq"!==t[n].t?3===t[n].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(t[n]))):(this.totalImages+=1,this.images.push(this._createImageData(t[n]))))},setAssetsPath:function(t){this.assetsPath=t||""},setPath:function(t){this.path=t||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(t){for(var e=0,n=this.images.length;e<n;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}return null},createImgData:function(e){var n=r(e,this.assetsPath,this.path),i=createTag("img");i.crossOrigin="anonymous",i.addEventListener("load",this._imageLoaded,!1),i.addEventListener("error",(function(){s.img=t,this._imageLoaded()}).bind(this),!1),i.src=n;var s={img:i,assetData:e};return s},createImageData:function(e){var n=r(e,this.assetsPath,this.path),i=createNS("image");isSafari?this.testImageLoaded(i):i.addEventListener("load",this._imageLoaded,!1),i.addEventListener("error",(function(){s.img=t,this._imageLoaded()}).bind(this),!1),i.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this._elementHelper.append?this._elementHelper.append(i):this._elementHelper.appendChild(i);var s={img:i,assetData:e};return s},imageLoaded:e,footageLoaded:n,setCacheType:function(t,e){"svg"===t?(this._elementHelper=e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},o}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var n=this._cbs[t],r=0;r<n.length;r+=1)n[r](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),(function(){this.removeEventListener(t,e)}).bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var n=0,r=this._cbs[t].length;n<r;)this._cbs[t][n]===e&&(this._cbs[t].splice(n,1),n-=1,r-=1),n+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var markerParser=function(){function t(t){for(var e,n=t.split("\r\n"),r={},i=0,s=0;s<n.length;s+=1)2===(e=n[s].split(":")).length&&(r[e[0]]=e[1].trim(),i+=1);if(0===i)throw new Error;return r}return function(e){for(var n=[],r=0;r<e.length;r+=1){var i=e[r],s={time:i.tm,duration:i.dr};try{s.payload=JSON.parse(e[r].cm)}catch(o){try{s.payload=t(e[r].cm)}catch(a){s.payload={name:e[r].cm}}}n.push(s)}return n}}(),ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,n=this.compositions.length;e<n;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),renderers={},registerRenderer=function(t,e){renderers[t]=e};function getRenderer(t){return renderers[t]}function _typeof$4(t){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var n=getRenderer(e);this.renderer=new n(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,this.loop=""===t.loop||null==t.loop||!0===t.loop||!1!==t.loop&&parseInt(t.loop,10),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(t,"autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(this.path=-1!==t.path.lastIndexOf("\\")?t.path.substr(0,t.path.lastIndexOf("\\")+1):t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(t){dataManager.completeAnimation(t,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&"object"!==_typeof$4(e)&&(e=JSON.parse(e));var n={wrapper:t,animationData:e},r=t.attributes;n.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",n.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:"canvas";var i=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";"false"===i?n.loop=!1:"true"===i?n.loop=!0:""!==i&&(n.loop=parseInt(i,10));var s=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;n.autoplay="false"!==s,n.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),this.setParams(n)},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e,n,r=this.animationData.layers,i=r.length,s=t.layers,o=s.length;for(n=0;n<o;n+=1)for(e=0;e<i;){if(r[e].id===s[n].id){r[e]=s[n];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(i=t.assets.length,e=0;e<i;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(t){this.animationData=t;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(t,e){this.renderer.updateContainerSize("number"==typeof t?t:void 0,"number"==typeof e?e:void 0)},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,n=0;n<this.markers.length;n+=1)if((e=this.markers[n]).payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,n){if(!n||this.name===n){var r=Number(t);if(isNaN(r)){var i=this.getMarkerData(t);i&&this.goToAndStop(i.time,!0)}else this.setCurrentRawFrameValue(e?t:t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,n){if(!n||this.name===n){var r=Number(t);if(isNaN(r)){var i=this.getMarkerData(t);i&&(i.duration?this.playSegments([i.time,i.time+i.duration],!0):this.goToAndStop(i.time,!0))}else this.goToAndStop(r,e,n);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,n=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(n=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),n&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?n=t:this.currentRawFrame+this.firstFrame>e&&(n=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"===_typeof$4(t[0])){var n,r=t.length;for(n=0;n<r;n+=1)this.segments.push(t[n])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var n=t.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),e=this.assetsPath+n}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,n=this.assets.length;e<n;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(t,e,n){try{this.renderer.getElementByPath(t).updateDocumentData(e,n)}catch(r){}},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var t={},e=[],n=0,r=0,i=0,s=!0,o=!1;function a(t){for(var n=0,i=t.target;n<r;)e[n].animation===i&&(e.splice(n,1),n-=1,r-=1,i.isPaused||l()),n+=1}function u(t,n){if(!t)return null;for(var i=0;i<r;){if(e[i].elem===t&&null!==e[i].elem)return e[i].animation;i+=1}var s=new AnimationItem;return h(s,t),s.setData(t,n),s}function c(){i+=1,d()}function l(){i-=1}function h(t,n){t.addEventListener("destroy",a),t.addEventListener("_active",c),t.addEventListener("_idle",l),e.push({elem:n,animation:t}),r+=1}function p(t){var a,u=t-n;for(a=0;a<r;a+=1)e[a].animation.advanceTime(u);n=t,i&&!o?window.requestAnimationFrame(p):s=!0}function f(t){n=t,window.requestAnimationFrame(p)}function d(){!o&&i&&s&&(window.requestAnimationFrame(f),s=!1)}return t.registerAnimation=u,t.loadAnimation=function(t){var e=new AnimationItem;return h(e,null),e.setParams(t),e},t.setSpeed=function(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setSpeed(t,n)},t.setDirection=function(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setDirection(t,n)},t.play=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.play(t)},t.pause=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.pause(t)},t.stop=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.stop(t)},t.togglePause=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.togglePause(t)},t.searchAnimations=function(t,e,n){var r,i=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),s=i.length;for(r=0;r<s;r+=1)n&&i[r].setAttribute("data-bm-type",n),u(i[r],t);if(e&&0===s){n||(n="svg");var o=document.getElementsByTagName("body")[0];o.innerText="";var a=createTag("div");a.style.width="100%",a.style.height="100%",a.setAttribute("data-bm-type",n),o.appendChild(a),u(a,t)}},t.resize=function(){var t;for(t=0;t<r;t+=1)e[t].animation.resize()},t.goToAndStop=function(t,n,i){var s;for(s=0;s<r;s+=1)e[s].animation.goToAndStop(t,n,i)},t.destroy=function(t){var n;for(n=r-1;n>=0;n-=1)e[n].animation.destroy(t)},t.freeze=function(){o=!0},t.unfreeze=function(){o=!1,d()},t.setVolume=function(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setVolume(t,n)},t.mute=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.mute(t)},t.unmute=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.unmute(t)},t.getRegisteredAnimations=function(){var t,n=e.length,r=[];for(t=0;t<n;t+=1)r.push(e[t].animation);return r},t}(),BezierFactory=function(){var t={getBezierEasing:function(t,n,r,i,s){var o=s||("bez_"+t+"_"+n+"_"+r+"_"+i).replace(/\./g,"p");if(e[o])return e[o];var a=new c([t,n,r,i]);return e[o]=a,a}},e={},n=.1,r="function"==typeof Float32Array;function i(t,e){return 1-3*e+3*t}function s(t,e){return 3*e-6*t}function o(t){return 3*t}function a(t,e,n){return((i(e,n)*t+s(e,n))*t+o(e))*t}function u(t,e,n){return 3*i(e,n)*t*t+2*s(e,n)*t+o(e)}function c(t){this._p=t,this._mSampleValues=r?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return c.prototype={get:function(t){var e=this._p[0],n=this._p[1],r=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),e===n&&r===i?t:0===t?0:1===t?1:a(this._getTForX(t),n,i)},_precompute:function(){var t=this._p[0],e=this._p[1],n=this._p[2],r=this._p[3];this._precomputed=!0,t===e&&n===r||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],r=0;r<11;++r)this._mSampleValues[r]=a(r*n,t,e)},_getTForX:function(t){for(var e=this._p[0],r=this._p[2],i=this._mSampleValues,s=0,o=1;10!==o&&i[o]<=t;++o)s+=n;var c=s+(t-i[--o])/(i[o+1]-i[o])*n,l=u(c,e,r);return l>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var s=u(e,n,r);if(0===s)return e;e-=(a(e,n,r)-t)/s}return e}(t,c,e,r):0===l?c:function(t,e,n,r,i){var s,o,u=0;do{(s=a(o=e+(n-e)/2,r,i)-t)>0?n=o:e=o}while(Math.abs(s)>1e-7&&++u<10);return o}(t,s,s+n,e,r)}},t}(),pooling={double:function(t){return t.concat(createSizedArray(t.length))}},poolFactory=function(t,e,n){var r=0,i=t,s=createSizedArray(i);return{newElement:function(){return r?s[r-=1]:e()},release:function(t){r===i&&(s=pooling.double(s),i*=2),n&&n(t),s[r]=t,r+=1}}},bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(t){var e,n=t.lengths.length;for(e=0;e<n;e+=1)bezierLengthPool.release(t.lengths[e]);t.lengths.length=0});function bezFunction(){var t=Math;function e(t,e,n,r,i,s){var o=t*r+e*i+n*s-i*r-s*t-n*e;return o>-.001&&o<.001}var n=function(t,e,n,r){var i,s,o,a,u,c,l=getDefaultCurveSegments(),h=0,p=[],f=[],d=bezierLengthPool.newElement();for(o=n.length,i=0;i<l;i+=1){for(u=i/(l-1),c=0,s=0;s<o;s+=1)a=bmPow(1-u,3)*t[s]+3*bmPow(1-u,2)*u*n[s]+3*(1-u)*bmPow(u,2)*r[s]+bmPow(u,3)*e[s],p[s]=a,null!==f[s]&&(c+=bmPow(p[s]-f[s],2)),f[s]=p[s];c&&(h+=c=bmSqrt(c)),d.percents[i]=u,d.lengths[i]=h}return d.addedLength=h,d};function r(t){this.segmentLength=0,this.points=new Array(t)}function i(t,e){this.partialLength=t,this.point=e}var s,o=(s={},function(t,n,o,a){var u=(t[0]+"_"+t[1]+"_"+n[0]+"_"+n[1]+"_"+o[0]+"_"+o[1]+"_"+a[0]+"_"+a[1]).replace(/\./g,"p");if(!s[u]){var c,l,h,p,f,d,m,g=getDefaultCurveSegments(),v=0,y=null;2===t.length&&(t[0]!==n[0]||t[1]!==n[1])&&e(t[0],t[1],n[0],n[1],t[0]+o[0],t[1]+o[1])&&e(t[0],t[1],n[0],n[1],n[0]+a[0],n[1]+a[1])&&(g=2);var b=new r(g);for(h=o.length,c=0;c<g;c+=1){for(m=createSizedArray(h),f=c/(g-1),d=0,l=0;l<h;l+=1)p=bmPow(1-f,3)*t[l]+3*bmPow(1-f,2)*f*(t[l]+o[l])+3*(1-f)*bmPow(f,2)*(n[l]+a[l])+bmPow(f,3)*n[l],m[l]=p,null!==y&&(d+=bmPow(m[l]-y[l],2));v+=d=bmSqrt(d),b.points[c]=new i(d,m),y=m}b.segmentLength=v,s[u]=b}return s[u]});function a(t,e){var n=e.percents,r=e.lengths,i=n.length,s=bmFloor((i-1)*t),o=t*e.addedLength,a=0;if(s===i-1||0===s||o===r[s])return n[s];for(var u=r[s]>o?-1:1,c=!0;c;)if(r[s]<=o&&r[s+1]>o?(a=(o-r[s])/(r[s+1]-r[s]),c=!1):s+=u,s<0||s>=i-1){if(s===i-1)return n[s];c=!1}return n[s]+(n[s+1]-n[s])*a}var u=createTypedArray("float32",8);return{getSegmentsLength:function(t){var e,r=segmentsLengthPool.newElement(),i=t.c,s=t.v,o=t.o,a=t.i,u=t._length,c=r.lengths,l=0;for(e=0;e<u-1;e+=1)c[e]=n(s[e],s[e+1],o[e],a[e+1]),l+=c[e].addedLength;return i&&u&&(c[e]=n(s[e],s[0],o[e],a[0]),l+=c[e].addedLength),r.totalLength=l,r},getNewSegment:function(e,n,r,i,s,o,c){s<0?s=0:s>1&&(s=1);var l,h=a(s,c),p=a(o=o>1?1:o,c),f=e.length,d=1-h,m=1-p,g=d*d*d,v=h*d*d*3,y=h*h*d*3,b=h*h*h,w=d*d*m,x=h*d*m+d*h*m+d*d*p,E=h*h*m+d*h*p+h*d*p,_=h*h*p,S=d*m*m,C=h*m*m+d*p*m+d*m*p,A=h*p*m+d*p*p+h*m*p,I=h*p*p,T=m*m*m,k=p*m*m+m*p*m+m*m*p,P=p*p*m+m*p*p+p*m*p,R=p*p*p;for(l=0;l<f;l+=1)u[4*l]=t.round(1e3*(g*e[l]+v*r[l]+y*i[l]+b*n[l]))/1e3,u[4*l+1]=t.round(1e3*(w*e[l]+x*r[l]+E*i[l]+_*n[l]))/1e3,u[4*l+2]=t.round(1e3*(S*e[l]+C*r[l]+A*i[l]+I*n[l]))/1e3,u[4*l+3]=t.round(1e3*(T*e[l]+k*r[l]+P*i[l]+R*n[l]))/1e3;return u},getPointInSegment:function(e,n,r,i,s,o){var u=a(s,o),c=1-u;return[t.round(1e3*(c*c*c*e[0]+(u*c*c+c*u*c+c*c*u)*r[0]+(u*u*c+c*u*u+u*c*u)*i[0]+u*u*u*n[0]))/1e3,t.round(1e3*(c*c*c*e[1]+(u*c*c+c*u*c+c*c*u)*r[1]+(u*u*c+c*u*u+u*c*u)*i[1]+u*u*u*n[1]))/1e3]},buildBezierData:o,pointOnLine2D:e,pointOnLine3D:function(n,r,i,s,o,a,u,c,l){if(0===i&&0===a&&0===l)return e(n,r,s,o,u,c);var h,p=t.sqrt(t.pow(s-n,2)+t.pow(o-r,2)+t.pow(a-i,2)),f=t.sqrt(t.pow(u-n,2)+t.pow(c-r,2)+t.pow(l-i,2)),d=t.sqrt(t.pow(u-s,2)+t.pow(c-o,2)+t.pow(l-a,2));return(h=p>f?p>d?p-f-d:d-f-p:d>f?d-f-p:f-p-d)>-1e-4&&h<1e-4}}}var bez=bezFunction(),PropertyFactory=function(){var t=initialDefaultFrame,e=Math.abs;function n(t,e){var n,i=this.offsetTime;"multidimensional"===this.propType&&(n=createTypedArray("float32",this.pv.length));for(var s,o,a,u,c,l,h,p,f,d=e.lastIndex,m=d,g=this.keyframes.length-1,v=!0;v;){if(s=this.keyframes[m],o=this.keyframes[m+1],m===g-1&&t>=o.t-i){s.h&&(s=o),d=0;break}if(o.t-i>t){d=m;break}m<g-1?m+=1:(d=0,v=!1)}a=this.keyframesMetadata[m]||{};var y,b,w,x,E,_,S,C,A,I,T=o.t-i,k=s.t-i;if(s.to){a.bezierData||(a.bezierData=bez.buildBezierData(s.s,o.s||s.e,s.to,s.ti));var P=a.bezierData;if(t>=T||t<k){var R=t>=T?P.points.length-1:0;for(c=P.points[R].point.length,u=0;u<c;u+=1)n[u]=P.points[R].point[u]}else{a.__fnct?f=a.__fnct:(f=BezierFactory.getBezierEasing(s.o.x,s.o.y,s.i.x,s.i.y,s.n).get,a.__fnct=f),l=f((t-k)/(T-k));var D,F=P.segmentLength*l,B=e.lastFrame<t&&e._lastKeyframeIndex===m?e._lastAddedLength:0;for(p=e.lastFrame<t&&e._lastKeyframeIndex===m?e._lastPoint:0,v=!0,h=P.points.length;v;){if(B+=P.points[p].partialLength,0===F||0===l||p===P.points.length-1){for(c=P.points[p].point.length,u=0;u<c;u+=1)n[u]=P.points[p].point[u];break}if(F>=B&&F<B+P.points[p+1].partialLength){for(D=(F-B)/P.points[p+1].partialLength,c=P.points[p].point.length,u=0;u<c;u+=1)n[u]=P.points[p].point[u]+(P.points[p+1].point[u]-P.points[p].point[u])*D;break}p<h-1?p+=1:v=!1}e._lastPoint=p,e._lastAddedLength=B-P.points[p].partialLength,e._lastKeyframeIndex=m}}else{var O;if(g=s.s.length,y=o.s||s.e,this.sh&&1!==s.h)t>=T?(n[0]=y[0],n[1]=y[1],n[2]=y[2]):t<=k?(n[0]=s.s[0],n[1]=s.s[1],n[2]=s.s[2]):(b=n,x=(w=function(t,e,n){var r,i,s,o,a,u=[],c=t[0],l=t[1],h=t[2],p=t[3],f=e[0],d=e[1],m=e[2],g=e[3];return(i=c*f+l*d+h*m+p*g)<0&&(i=-i,f=-f,d=-d,m=-m,g=-g),1-i>1e-6?(r=Math.acos(i),s=Math.sin(r),o=Math.sin((1-n)*r)/s,a=Math.sin(n*r)/s):(o=1-n,a=n),u[0]=o*c+a*f,u[1]=o*l+a*d,u[2]=o*h+a*m,u[3]=o*p+a*g,u}(r(s.s),r(y),(t-k)/(T-k)))[0],E=w[1],_=w[2],S=w[3],C=Math.atan2(2*E*S-2*x*_,1-2*E*E-2*_*_),A=Math.asin(2*x*E+2*_*S),I=Math.atan2(2*x*S-2*E*_,1-2*x*x-2*_*_),b[0]=C/degToRads,b[1]=A/degToRads,b[2]=I/degToRads);else for(m=0;m<g;m+=1)1!==s.h&&(t>=T?l=1:t<k?l=0:(s.o.x.constructor===Array?(a.__fnct||(a.__fnct=[]),a.__fnct[m]?f=a.__fnct[m]:(f=BezierFactory.getBezierEasing(void 0===s.o.x[m]?s.o.x[0]:s.o.x[m],void 0===s.o.y[m]?s.o.y[0]:s.o.y[m],void 0===s.i.x[m]?s.i.x[0]:s.i.x[m],void 0===s.i.y[m]?s.i.y[0]:s.i.y[m]).get,a.__fnct[m]=f)):a.__fnct?f=a.__fnct:(f=BezierFactory.getBezierEasing(s.o.x,s.o.y,s.i.x,s.i.y).get,s.keyframeMetadata=f),l=f((t-k)/(T-k)))),y=o.s||s.e,O=1===s.h?s.s[m]:s.s[m]+(y[m]-s.s[m])*l,"multidimensional"===this.propType?n[m]=O:n=O}return e.lastIndex=d,n}function r(t){var e=t[0]*degToRads,n=t[1]*degToRads,r=t[2]*degToRads,i=Math.cos(e/2),s=Math.cos(n/2),o=Math.cos(r/2),a=Math.sin(e/2),u=Math.sin(n/2),c=Math.sin(r/2);return[a*u*o+i*s*c,a*s*o+i*u*c,i*u*o-a*s*c,i*s*o-a*u*c]}function i(){var e=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==t&&(this._caching.lastFrame>=r&&e>=r||this._caching.lastFrame<n&&e<n))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(e,this._caching);this.pv=i}return this._caching.lastFrame=e,this.pv}function s(t){var n;if("unidimensional"===this.propType)e(this.v-(n=t*this.mult))>1e-5&&(this.v=n,this._mdf=!0);else for(var r=0,i=this.v.length;r<i;)e(this.v[r]-(n=t[r]*this.mult))>1e-5&&(this.v[r]=n,this._mdf=!0),r+=1}function o(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t;this.lock=!0,this._mdf=this._isFirstFrame;var e=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)n=this.effectsSequence[t](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function a(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function u(t,e,n,r){this.propType="unidimensional",this.mult=n||1,this.data=e,this.v=n?e.k*n:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=o,this.setVValue=s,this.addEffect=a}function c(t,e,n,r){var i;this.propType="multidimensional",this.mult=n||1,this.data=e,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var u=e.k.length;for(this.v=createTypedArray("float32",u),this.pv=createTypedArray("float32",u),this.vel=createTypedArray("float32",u),i=0;i<u;i+=1)this.v[i]=e.k[i]*this.mult,this.pv[i]=e.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=o,this.setVValue=s,this.addEffect=a}function l(e,r,u,c){this.propType="unidimensional",this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:t,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=r,this.mult=u||1,this.elem=e,this.container=c,this.comp=e.comp,this.v=t,this.pv=t,this._isFirstFrame=!0,this.getValue=o,this.setVValue=s,this.interpolateValue=n,this.effectsSequence=[i.bind(this)],this.addEffect=a}function h(e,r,u,c){var l;this.propType="multidimensional";var h,p,f,d,m=r.k.length;for(l=0;l<m-1;l+=1)r.k[l].to&&r.k[l].s&&r.k[l+1]&&r.k[l+1].s&&(p=r.k[l+1].s,f=r.k[l].to,d=r.k[l].ti,(2===(h=r.k[l].s).length&&(h[0]!==p[0]||h[1]!==p[1])&&bez.pointOnLine2D(h[0],h[1],p[0],p[1],h[0]+f[0],h[1]+f[1])&&bez.pointOnLine2D(h[0],h[1],p[0],p[1],p[0]+d[0],p[1]+d[1])||3===h.length&&(h[0]!==p[0]||h[1]!==p[1]||h[2]!==p[2])&&bez.pointOnLine3D(h[0],h[1],h[2],p[0],p[1],p[2],h[0]+f[0],h[1]+f[1],h[2]+f[2])&&bez.pointOnLine3D(h[0],h[1],h[2],p[0],p[1],p[2],p[0]+d[0],p[1]+d[1],p[2]+d[2]))&&(r.k[l].to=null,r.k[l].ti=null),h[0]===p[0]&&h[1]===p[1]&&0===f[0]&&0===f[1]&&0===d[0]&&0===d[1]&&(2===h.length||h[2]===p[2]&&0===f[2]&&0===d[2])&&(r.k[l].to=null,r.k[l].ti=null));this.effectsSequence=[i.bind(this)],this.data=r,this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=u||1,this.elem=e,this.container=c,this.comp=e.comp,this.getValue=o,this.setVValue=s,this.interpolateValue=n,this.frameId=-1;var g=r.k[0].s.length;for(this.v=createTypedArray("float32",g),this.pv=createTypedArray("float32",g),l=0;l<g;l+=1)this.v[l]=t,this.pv[l]=t;this._caching={lastFrame:t,lastIndex:0,value:createTypedArray("float32",g)},this.addEffect=a}return{getProp:function(t,e,n,r,i){var s;if(e.k.length)if("number"==typeof e.k[0])s=new c(t,e,r,i);else switch(n){case 0:s=new l(t,e,r,i);break;case 1:s=new h(t,e,r,i)}else s=new u(t,e,r,i);return s.effectsSequence.length&&i.addDynamicProperty(s),s}}}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var t;this._mdf=!1;var e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var n=0;n<e;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,n,r,i){var s;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o;break;default:s=[]}(!s[r]||s[r]&&!i)&&(s[r]=pointPool.newElement()),s[r][0]=t,s[r][1]=e},ShapePath.prototype.setTripleAt=function(t,e,n,r,i,s,o,a){this.setXYAt(t,e,"v",o,a),this.setXYAt(n,r,"o",o,a),this.setXYAt(i,s,"i",o,a)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,n=this.o,r=this.i,i=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],r[0][0],r[0][1],n[0][0],n[0][1],0,!1),i=1);var s,o=this._length-1,a=this._length;for(s=i;s<a;s+=1)t.setTripleAt(e[o][0],e[o][1],r[o][0],r[o][1],n[o][0],n[o][1],s,!1),o-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,function(){return new ShapePath},function(t){var e,n=t._length;for(e=0;e<n;e+=1)pointPool.release(t.v[e]),pointPool.release(t.i[e]),pointPool.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1}),factory.clone=function(t){var e,n=factory.newElement(),r=void 0===t._length?t.v.length:t._length;for(n.setLength(r),n.c=t.c,e=0;e<r;e+=1)n.setTripleAt(t.v[e][0],t.v[e][1],t.o[e][0],t.o[e][1],t.i[e][0],t.i[e][1],e);return n},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(t){var e,n=t._length;for(e=0;e<n;e+=1)shapePool.release(t.shapes[e]);t._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=t,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=function(){var t=-999999;function e(t,e,n){var r,i,s,o,a,u,c,l,h=n.lastIndex,p=this.keyframes;if(t<p[0].t-this.offsetTime)r=p[0].s[0],s=!0,h=0;else if(t>=p[p.length-1].t-this.offsetTime)r=p[p.length-1].s?p[p.length-1].s[0]:p[p.length-2].e[0],s=!0;else{for(var f,d,m,g=h,v=p.length-1,y=!0;y&&(f=p[g],!((d=p[g+1]).t-this.offsetTime>t));)g<v-1?g+=1:y=!1;if(m=this.keyframesMetadata[g]||{},h=g,!(s=1===f.h)){if(t>=d.t-this.offsetTime)l=1;else if(t<f.t-this.offsetTime)l=0;else{var b;m.__fnct?b=m.__fnct:(b=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y).get,m.__fnct=b),l=b((t-(f.t-this.offsetTime))/(d.t-this.offsetTime-(f.t-this.offsetTime)))}i=d.s?d.s[0]:f.e[0]}r=f.s[0]}for(u=e._length,c=r.i[0].length,n.lastIndex=h,o=0;o<u;o+=1)for(a=0;a<c;a+=1)e.i[o][a]=s?r.i[o][a]:r.i[o][a]+(i.i[o][a]-r.i[o][a])*l,e.o[o][a]=s?r.o[o][a]:r.o[o][a]+(i.o[o][a]-r.o[o][a])*l,e.v[o][a]=s?r.v[o][a]:r.v[o][a]+(i.v[o][a]-r.v[o][a])*l}function n(){var e=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,i=this._caching.lastFrame;return i!==t&&(i<n&&e<n||i>r&&e>r)||(this._caching.lastIndex=i<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}function r(){this.paths=this.localShapeCollection}function i(t){(function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var n,r=t._length;for(n=0;n<r;n+=1)if(t.v[n][0]!==e.v[n][0]||t.v[n][1]!==e.v[n][1]||t.o[n][0]!==e.o[n][0]||t.o[n][1]!==e.o[n][1]||t.i[n][0]!==e.i[n][0]||t.i[n][1]!==e.i[n][1])return!1;return!0})(this.v,t)||(this.v=shapePool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function s(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t,e;this.lock=!0,this._mdf=!1,t=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var n=this.effectsSequence.length;for(e=0;e<n;e+=1)t=this.effectsSequence[e](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function o(t,e,n){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1,this.v=shapePool.clone(3===n?e.pt.k:e.ks.k),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function a(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function u(e,i,s){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===s?i.pt.k:i.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var o=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,o),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=r,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[n.bind(this)]}o.prototype.interpolateShape=e,o.prototype.getValue=s,o.prototype.setVValue=i,o.prototype.addEffect=a,u.prototype.getValue=s,u.prototype.interpolateShape=e,u.prototype.setVValue=i,u.prototype.addEffect=a;var c=function(){var t=roundCorner;function e(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],n=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,s=3!==this.d,o=this.v;o.v[0][0]=e,o.v[0][1]=n-i,o.v[1][0]=s?e+r:e-r,o.v[1][1]=n,o.v[2][0]=e,o.v[2][1]=n+i,o.v[3][0]=s?e-r:e+r,o.v[3][1]=n,o.i[0][0]=s?e-r*t:e+r*t,o.i[0][1]=n-i,o.i[1][0]=s?e+r:e-r,o.i[1][1]=n-i*t,o.i[2][0]=s?e+r*t:e-r*t,o.i[2][1]=n+i,o.i[3][0]=s?e-r:e+r,o.i[3][1]=n+i*t,o.o[0][0]=s?e+r*t:e-r*t,o.o[0][1]=n-i,o.o[1][0]=s?e+r:e-r,o.o[1][1]=n+i*t,o.o[2][0]=s?e-r*t:e+r*t,o.o[2][1]=n+i,o.o[3][0]=s?e-r:e+r,o.o[3][1]=n-i*t}},extendPrototype([DynamicPropertyContainer],e),e}(),l=function(){function t(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=PropertyFactory.getProp(t,e.ir,0,0,this),this.is=PropertyFactory.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,e.pt,0,0,this),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,e.or,0,0,this),this.os=PropertyFactory.getProp(t,e.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var t,e,n,r,i=2*Math.floor(this.pt.v),s=2*Math.PI/i,o=!0,a=this.or.v,u=this.ir.v,c=this.os.v,l=this.is.v,h=2*Math.PI*a/(2*i),p=2*Math.PI*u/(2*i),f=-Math.PI/2;f+=this.r.v;var d=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<i;t+=1){n=o?c:l,r=o?h:p;var m=(e=o?a:u)*Math.cos(f),g=e*Math.sin(f),v=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),y=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);this.v.setTripleAt(m+=+this.p.v[0],g+=+this.p.v[1],m-v*r*n*d,g-y*r*n*d,m+v*r*n*d,g+y*r*n*d,t,!0),o=!o,f+=s*d}},convertPolygonToPath:function(){var t,e=Math.floor(this.pt.v),n=2*Math.PI/e,r=this.or.v,i=this.os.v,s=2*Math.PI*r/(4*e),o=.5*-Math.PI,a=3===this.data.d?-1:1;for(o+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var u=r*Math.cos(o),c=r*Math.sin(o),l=0===u&&0===c?0:c/Math.sqrt(u*u+c*c),h=0===u&&0===c?0:-u/Math.sqrt(u*u+c*c);this.v.setTripleAt(u+=+this.p.v[0],c+=+this.p.v[1],u-l*s*i*a,c-h*s*i*a,u+l*s*i*a,c+h*s*i*a,t,!0),o+=n*a}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],t),t}(),h=function(){function t(t,e){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2,i=bmMin(n,r,this.r.v),s=i*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+n,e-r+i,t+n,e-r+i,t+n,e-r+s,0,!0),this.v.setTripleAt(t+n,e+r-i,t+n,e+r-s,t+n,e+r-i,1,!0),0!==i?(this.v.setTripleAt(t+n-i,e+r,t+n-i,e+r,t+n-s,e+r,2,!0),this.v.setTripleAt(t-n+i,e+r,t-n+s,e+r,t-n+i,e+r,3,!0),this.v.setTripleAt(t-n,e+r-i,t-n,e+r-i,t-n,e+r-s,4,!0),this.v.setTripleAt(t-n,e-r+i,t-n,e-r+s,t-n,e-r+i,5,!0),this.v.setTripleAt(t-n+i,e-r,t-n+i,e-r,t-n+s,e-r,6,!0),this.v.setTripleAt(t+n-i,e-r,t+n-s,e-r,t+n-i,e-r,7,!0)):(this.v.setTripleAt(t-n,e+r,t-n+s,e+r,t-n,e+r,2),this.v.setTripleAt(t-n,e-r,t-n,e-r+s,t-n,e-r,3))):(this.v.setTripleAt(t+n,e-r+i,t+n,e-r+s,t+n,e-r+i,0,!0),0!==i?(this.v.setTripleAt(t+n-i,e-r,t+n-i,e-r,t+n-s,e-r,1,!0),this.v.setTripleAt(t-n+i,e-r,t-n+s,e-r,t-n+i,e-r,2,!0),this.v.setTripleAt(t-n,e-r+i,t-n,e-r+i,t-n,e-r+s,3,!0),this.v.setTripleAt(t-n,e+r-i,t-n,e+r-s,t-n,e+r-i,4,!0),this.v.setTripleAt(t-n+i,e+r,t-n+i,e+r,t-n+s,e+r,5,!0),this.v.setTripleAt(t+n-i,e+r,t+n-s,e+r,t+n-i,e+r,6,!0),this.v.setTripleAt(t+n,e+r-i,t+n,e+r-i,t+n,e+r-s,7,!0)):(this.v.setTripleAt(t-n,e-r,t-n+s,e-r,t-n,e-r,1,!0),this.v.setTripleAt(t-n,e+r,t-n,e+r-s,t-n,e+r,2,!0),this.v.setTripleAt(t+n,e+r,t+n-s,e+r,t+n,e+r,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],t),t}();return{getShapeProp:function(t,e,n){var r;return 3===n||4===n?r=(3===n?e.pt:e.ks).k.length?new u(t,e,n):new o(t,e,n):5===n?r=new h(t,e):6===n?r=new c(t,e):7===n&&(r=new l(t,e)),r.k&&t.addDynamicProperty(r),r},getConstructorFunction:function(){return o},getKeyframedConstructorFunction:function(){return u}}}(),Matrix=function(){var t=Math.cos,e=Math.sin,n=Math.tan,r=Math.round;function i(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function o(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1)}function a(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1)}function u(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function c(t,e){return this._t(1,e,t,1,0,0)}function l(t,e){return this.shear(n(t),n(e))}function h(r,i){var s=t(i),o=e(i);return this._t(s,o,0,0,-o,s,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(r),1,0,0,0,0,1,0,0,0,0,1)._t(s,-o,0,0,o,s,0,0,0,0,1,0,0,0,0,1)}function p(t,e,n){return n||0===n||(n=1),1===t&&1===e&&1===n?this:this._t(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1)}function f(t,e,n,r,i,s,o,a,u,c,l,h,p,f,d,m){return this.props[0]=t,this.props[1]=e,this.props[2]=n,this.props[3]=r,this.props[4]=i,this.props[5]=s,this.props[6]=o,this.props[7]=a,this.props[8]=u,this.props[9]=c,this.props[10]=l,this.props[11]=h,this.props[12]=p,this.props[13]=f,this.props[14]=d,this.props[15]=m,this}function d(t,e,n){return n=n||0,0!==t||0!==e||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1):this}function m(t,e,n,r,i,s,o,a,u,c,l,h,p,f,d,m){var g=this.props;if(1===t&&0===e&&0===n&&0===r&&0===i&&1===s&&0===o&&0===a&&0===u&&0===c&&1===l&&0===h)return g[12]=g[12]*t+g[15]*p,g[13]=g[13]*s+g[15]*f,g[14]=g[14]*l+g[15]*d,g[15]*=m,this._identityCalculated=!1,this;var v=g[0],y=g[1],b=g[2],w=g[3],x=g[4],E=g[5],_=g[6],S=g[7],C=g[8],A=g[9],I=g[10],T=g[11],k=g[12],P=g[13],R=g[14],D=g[15];return g[0]=v*t+y*i+b*u+w*p,g[1]=v*e+y*s+b*c+w*f,g[2]=v*n+y*o+b*l+w*d,g[3]=v*r+y*a+b*h+w*m,g[4]=x*t+E*i+_*u+S*p,g[5]=x*e+E*s+_*c+S*f,g[6]=x*n+E*o+_*l+S*d,g[7]=x*r+E*a+_*h+S*m,g[8]=C*t+A*i+I*u+T*p,g[9]=C*e+A*s+I*c+T*f,g[10]=C*n+A*o+I*l+T*d,g[11]=C*r+A*a+I*h+T*m,g[12]=k*t+P*i+R*u+D*p,g[13]=k*e+P*s+R*c+D*f,g[14]=k*n+P*o+R*l+D*d,g[15]=k*r+P*a+R*h+D*m,this._identityCalculated=!1,this}function g(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function v(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function y(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e];return t}function b(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function w(t,e,n){return{x:t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]}}function x(t,e,n){return t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12]}function E(t,e,n){return t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13]}function _(t,e,n){return t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]}function S(){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],e=this.props[5]/t,n=-this.props[1]/t,r=-this.props[4]/t,i=this.props[0]/t,s=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,o=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,a=new Matrix;return a.props[0]=e,a.props[1]=n,a.props[4]=r,a.props[5]=i,a.props[12]=s,a.props[13]=o,a}function C(t){return this.getInverseMatrix().applyToPointArray(t[0],t[1],t[2]||0)}function A(t){var e,n=t.length,r=[];for(e=0;e<n;e+=1)r[e]=C(t[e]);return r}function I(t,e,n){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=t[0],r[1]=t[1],r[2]=e[0],r[3]=e[1],r[4]=n[0],r[5]=n[1];else{var i=this.props[0],s=this.props[1],o=this.props[4],a=this.props[5],u=this.props[12],c=this.props[13];r[0]=t[0]*i+t[1]*o+u,r[1]=t[0]*s+t[1]*a+c,r[2]=e[0]*i+e[1]*o+u,r[3]=e[0]*s+e[1]*a+c,r[4]=n[0]*i+n[1]*o+u,r[5]=n[0]*s+n[1]*a+c}return r}function T(t,e,n){return this.isIdentity()?[t,e,n]:[t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]]}function k(t,e){if(this.isIdentity())return t+","+e;var n=this.props;return Math.round(100*(t*n[0]+e*n[4]+n[12]))/100+","+Math.round(100*(t*n[1]+e*n[5]+n[13]))/100}function P(){for(var t=0,e=this.props,n="matrix3d(";t<16;)n+=r(1e4*e[t])/1e4,n+=15===t?")":",",t+=1;return n}function R(t){return t<1e-6&&t>0||t>-1e-6&&t<0?r(1e4*t)/1e4:t}function D(){var t=this.props;return"matrix("+R(t[0])+","+R(t[1])+","+R(t[4])+","+R(t[5])+","+R(t[12])+","+R(t[13])+")"}return function(){this.reset=i,this.rotate=s,this.rotateX=o,this.rotateY=a,this.rotateZ=u,this.skew=l,this.skewFromAxis=h,this.shear=c,this.scale=p,this.setTransform=f,this.translate=d,this.transform=m,this.applyToPoint=w,this.applyToX=x,this.applyToY=E,this.applyToZ=_,this.applyToPointArray=T,this.applyToTriplePoints=I,this.applyToPointStringified=k,this.toCSS=P,this.to2dCSS=D,this.clone=y,this.cloneFromProps=b,this.equals=v,this.inversePoints=A,this.inversePoint=C,this.getInverseMatrix=S,this._t=this.transform,this.isIdentity=g,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(t){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(t){setLocationHref(t)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){setSubframeEnabled(t)}function setPrefix(t){setIdPrefix(t)}function loadAnimation(t){return!0===standalone&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if("string"==typeof t)switch(t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(t)&&t>1&&setDefaultCurveSegments(t);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(t,e){"expressions"===t&&setExpressionsPlugin(e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),n=0;n<e.length;n+=1){var r=e[n].split("=");if(decodeURIComponent(r[0])==t)return decodeURIComponent(r[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.10.0";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{"object"===_typeof$3(exports)||__webpack_require__.amdO||(window.bodymovin=lottie)}catch(err){}var ShapeModifiers=function(){var t={},e={};return t.registerModifier=function(t,n){e[t]||(e[t]=n)},t.getModifier=function(t,n,r){return new e[t](n,r)},t}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,n,r,i){var s=[];e<=1?s.push({s:t,e:e}):t>=1?s.push({s:t-1,e:e-1}):(s.push({s:t,e:1}),s.push({s:0,e:e-1}));var o,a,u=[],c=s.length;for(o=0;o<c;o+=1)(a=s[o]).e*i<r||a.s*i>r+n||u.push([a.s*i<=r?0:(a.s*i-r)/n,a.e*i>=r+n?1:(a.e*i-r)/n]);return u.length||u.push([0,0]),u},TrimModifier.prototype.releasePathsData=function(t){var e,n=t.length;for(e=0;e<n;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,n,r,i;if(this._mdf||t){var s=this.o.v%360/360;if(s<0&&(s+=1),(e=this.s.v>1?1+s:this.s.v<0?0+s:this.s.v+s)>(n=this.e.v>1?1+s:this.e.v<0?0+s:this.e.v+s)){var o=e;e=n,n=o}e=1e-4*Math.round(1e4*e),n=1e-4*Math.round(1e4*n),this.sValue=e,this.eValue=n}else e=this.sValue,n=this.eValue;var a,u,c,l,h,p=this.shapes.length,f=0;if(n===e)for(i=0;i<p;i+=1)this.shapes[i].localShapeCollection.releaseShapes(),this.shapes[i].shape._mdf=!0,this.shapes[i].shape.paths=this.shapes[i].localShapeCollection,this._mdf&&(this.shapes[i].pathsData.length=0);else if(1===n&&0===e||0===n&&1===e){if(this._mdf)for(i=0;i<p;i+=1)this.shapes[i].pathsData.length=0,this.shapes[i].shape._mdf=!0}else{var d,m,g=[];for(i=0;i<p;i+=1)if((d=this.shapes[i]).shape._mdf||this._mdf||t||2===this.m){if(u=(r=d.shape.paths)._length,h=0,!d.shape._mdf&&d.pathsData.length)h=d.totalShapeLength;else{for(c=this.releasePathsData(d.pathsData),a=0;a<u;a+=1)l=bez.getSegmentsLength(r.shapes[a]),c.push(l),h+=l.totalLength;d.totalShapeLength=h,d.pathsData=c}f+=h,d.shape._mdf=!0}else d.shape.paths=d.localShapeCollection;var v,y=e,b=n,w=0;for(i=p-1;i>=0;i-=1)if((d=this.shapes[i]).shape._mdf){for((m=d.localShapeCollection).releaseShapes(),2===this.m&&p>1?(v=this.calculateShapeEdges(e,n,d.totalShapeLength,w,f),w+=d.totalShapeLength):v=[[y,b]],u=v.length,a=0;a<u;a+=1){y=v[a][0],b=v[a][1],g.length=0,b<=1?g.push({s:d.totalShapeLength*y,e:d.totalShapeLength*b}):y>=1?g.push({s:d.totalShapeLength*(y-1),e:d.totalShapeLength*(b-1)}):(g.push({s:d.totalShapeLength*y,e:d.totalShapeLength}),g.push({s:0,e:d.totalShapeLength*(b-1)}));var x=this.addShapes(d,g[0]);if(g[0].s!==g[0].e){if(g.length>1)if(d.shape.paths.shapes[d.shape.paths._length-1].c){var E=x.pop();this.addPaths(x,m),x=this.addShapes(d,g[1],E)}else this.addPaths(x,m),x=this.addShapes(d,g[1]);this.addPaths(x,m)}}d.shape.paths=m}}},TrimModifier.prototype.addPaths=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)e.addShape(t[n])},TrimModifier.prototype.addSegment=function(t,e,n,r,i,s,o){i.setXYAt(e[0],e[1],"o",s),i.setXYAt(n[0],n[1],"i",s+1),o&&i.setXYAt(t[0],t[1],"v",s),i.setXYAt(r[0],r[1],"v",s+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,n,r){e.setXYAt(t[1],t[5],"o",n),e.setXYAt(t[2],t[6],"i",n+1),r&&e.setXYAt(t[0],t[4],"v",n),e.setXYAt(t[3],t[7],"v",n+1)},TrimModifier.prototype.addShapes=function(t,e,n){var r,i,s,o,a,u,c,l,h=t.pathsData,p=t.shape.paths.shapes,f=t.shape.paths._length,d=0,m=[],g=!0;for(n?(a=n._length,l=n._length):(n=shapePool.newElement(),a=0,l=0),m.push(n),r=0;r<f;r+=1){for(u=h[r].lengths,n.c=p[r].c,s=p[r].c?u.length:u.length+1,i=1;i<s;i+=1)if(d+(o=u[i-1]).addedLength<e.s)d+=o.addedLength,n.c=!1;else{if(d>e.e){n.c=!1;break}e.s<=d&&e.e>=d+o.addedLength?(this.addSegment(p[r].v[i-1],p[r].o[i-1],p[r].i[i],p[r].v[i],n,a,g),g=!1):(c=bez.getNewSegment(p[r].v[i-1],p[r].v[i],p[r].o[i-1],p[r].i[i],(e.s-d)/o.addedLength,(e.e-d)/o.addedLength,u[i-1]),this.addSegmentFromArray(c,n,a,g),g=!1,n.c=!1),d+=o.addedLength,a+=1}if(p[r].c&&u.length){if(o=u[i-1],d<=e.e){var v=u[i-1].addedLength;e.s<=d&&e.e>=d+v?(this.addSegment(p[r].v[i-1],p[r].o[i-1],p[r].i[0],p[r].v[0],n,a,g),g=!1):(c=bez.getNewSegment(p[r].v[i-1],p[r].v[0],p[r].o[i-1],p[r].i[0],(e.s-d)/v,(e.e-d)/v,u[i-1]),this.addSegmentFromArray(c,n,a,g),g=!1,n.c=!1)}else n.c=!1;d+=o.addedLength,a+=1}if(n._length&&(n.setXYAt(n.v[l][0],n.v[l][1],"i",l),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),d>e.e)break;r<f-1&&(n=shapePool.newElement(),g=!0,m.push(n),a=0)}return m},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var n=e/100,r=[0,0],i=t._length,s=0;for(s=0;s<i;s+=1)r[0]+=t.v[s][0],r[1]+=t.v[s][1];r[0]/=i,r[1]/=i;var o=shapePool.newElement();for(o.c=t.c,s=0;s<i;s+=1)o.setTripleAt(t.v[s][0]+(r[0]-t.v[s][0])*n,t.v[s][1]+(r[1]-t.v[s][1])*n,t.o[s][0]+(r[0]-t.o[s][0])*-n,t.o[s][1]+(r[1]-t.o[s][1])*-n,t.i[s][0]+(r[0]-t.i[s][0])*-n,t.i[s][1]+(r[1]-t.i[s][1])*-n,s);return o},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,n,r,i,s,o,a=this.shapes.length,u=this.amount.v;if(0!==u)for(n=0;n<a;n+=1){if(o=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||t)for(o.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,i=s.shape.paths._length,r=0;r<i;r+=1)o.addShape(this.processPath(e[r],u));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var t=[0,0];function e(t,e,n){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(n||t),e.p&&e.p.s?(this.px=PropertyFactory.getProp(t,e.p.x,0,0,this),this.py=PropertyFactory.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=PropertyFactory.getProp(t,e.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=PropertyFactory.getProp(t,e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,e.rz,0,degToRads,this),e.or.k[0].ti){var r,i=e.or.k.length;for(r=0;r<i;r+=1)e.or.k[r].to=null,e.or.k[r].ti=null}this.or=PropertyFactory.getProp(t,e.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,e.r||{k:0},0,degToRads,this);e.sk&&(this.sk=PropertyFactory.getProp(t,e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,e.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,e.s||{k:[100,100,100]},1,.01,this),this.o=e.o?PropertyFactory.getProp(t,e.o,0,.01,t):{_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return e.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?t.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){var n;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,i;if(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),i=this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),i=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(r=this.p.pv,i=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],i=[];var s=this.px,o=this.py;s._caching.lastFrame+s.offsetTime<=s.keyframes[0].t?(r[0]=s.getValueAtTime((s.keyframes[0].t+.01)/n,0),r[1]=o.getValueAtTime((o.keyframes[0].t+.01)/n,0),i[0]=s.getValueAtTime(s.keyframes[0].t/n,0),i[1]=o.getValueAtTime(o.keyframes[0].t/n,0)):s._caching.lastFrame+s.offsetTime>=s.keyframes[s.keyframes.length-1].t?(r[0]=s.getValueAtTime(s.keyframes[s.keyframes.length-1].t/n,0),r[1]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/n,0),i[0]=s.getValueAtTime((s.keyframes[s.keyframes.length-1].t-.01)/n,0),i[1]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/n,0)):(r=[s.pv,o.pv],i[0]=s.getValueAtTime((s._caching.lastFrame+s.offsetTime-.01)/n,s.offsetTime),i[1]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/n,o.offsetTime))}else r=i=t;this.v.rotate(-Math.atan2(r[1]-i[1],r[0]-i[0]))}this.data.p&&this.data.p.s?this.v.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],e),e.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},e.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(t,n,r){return new e(t,n,r)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(t,e){return 1e5*Math.abs(t-e)<=Math.min(Math.abs(t),Math.abs(e))}function floatZero(t){return Math.abs(t)<=1e-5}function lerp(t,e,n){return t*(1-n)+e*n}function lerpPoint(t,e,n){return[lerp(t[0],e[0],n),lerp(t[1],e[1],n)]}function quadRoots(t,e,n){if(0===t)return[];var r=e*e-4*t*n;if(r<0)return[];var i=-e/(2*t);if(0===r)return[i];var s=Math.sqrt(r)/(2*t);return[i-s,i+s]}function polynomialCoefficients(t,e,n,r){return[3*e-t-3*n+r,3*t-6*e+3*n,-3*t+3*e,t]}function singlePoint(t){return new PolynomialBezier(t,t,t,t,!1)}function PolynomialBezier(t,e,n,r,i){i&&pointEqual(t,e)&&(e=lerpPoint(t,r,1/3)),i&&pointEqual(n,r)&&(n=lerpPoint(t,r,2/3));var s=polynomialCoefficients(t[0],e[0],n[0],r[0]),o=polynomialCoefficients(t[1],e[1],n[1],r[1]);this.a=[s[0],o[0]],this.b=[s[1],o[1]],this.c=[s[2],o[2]],this.d=[s[3],o[3]],this.points=[t,e,n,r]}function extrema(t,e){var n=t.points[0][e],r=t.points[t.points.length-1][e];if(n>r){var i=r;r=n,n=i}for(var s=quadRoots(3*t.a[e],2*t.b[e],t.c[e]),o=0;o<s.length;o+=1)if(s[o]>0&&s[o]<1){var a=t.point(s[o])[e];a<n?n=a:a>r&&(r=a)}return{min:n,max:r}}function intersectData(t,e,n){var r=t.boundingBox();return{cx:r.cx,cy:r.cy,width:r.width,height:r.height,bez:t,t:(e+n)/2,t1:e,t2:n}}function splitData(t){var e=t.bez.split(.5);return[intersectData(e[0],t.t1,t.t),intersectData(e[1],t.t,t.t2)]}function boxIntersect(t,e){return 2*Math.abs(t.cx-e.cx)<t.width+e.width&&2*Math.abs(t.cy-e.cy)<t.height+e.height}function intersectsImpl(t,e,n,r,i,s){if(boxIntersect(t,e))if(n>=s||t.width<=r&&t.height<=r&&e.width<=r&&e.height<=r)i.push([t.t,e.t]);else{var o=splitData(t),a=splitData(e);intersectsImpl(o[0],a[0],n+1,r,i,s),intersectsImpl(o[0],a[1],n+1,r,i,s),intersectsImpl(o[1],a[0],n+1,r,i,s),intersectsImpl(o[1],a[1],n+1,r,i,s)}}function crossProduct(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lineIntersection(t,e,n,r){var i=[n[0],n[1],1],s=[r[0],r[1],1],o=crossProduct(crossProduct([t[0],t[1],1],[e[0],e[1],1]),crossProduct(i,s));return floatZero(o[2])?null:[o[0]/o[2],o[1]/o[2]]}function polarOffset(t,e,n){return[t[0]+Math.cos(e)*n,t[1]-Math.sin(e)*n]}function pointDistance(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function pointEqual(t,e){return floatEqual(t[0],e[0])&&floatEqual(t[1],e[1])}function ZigZagModifier(){}function setPoint(t,e,n,r,i,s,o){var a=n-Math.PI/2,u=n+Math.PI/2,c=e[0]+Math.cos(n)*r*i,l=e[1]-Math.sin(n)*r*i;t.setTripleAt(c,l,c+Math.cos(a)*s,l-Math.sin(a)*s,c+Math.cos(u)*o,l-Math.sin(u)*o,t.length())}function getPerpendicularVector(t,e){var n=[e[0]-t[0],e[1]-t[1]],r=.5*-Math.PI;return[Math.cos(r)*n[0]-Math.sin(r)*n[1],Math.sin(r)*n[0]+Math.cos(r)*n[1]]}function getProjectingAngle(t,e){var n=0===e?t.length()-1:e-1,r=(e+1)%t.length(),i=getPerpendicularVector(t.v[n],t.v[r]);return Math.atan2(0,1)-Math.atan2(i[1],i[0])}function zigZagCorner(t,e,n,r,i,s,o){var a=getProjectingAngle(e,n),u=e.v[n%e._length],c=e.v[0===n?e._length-1:n-1],l=e.v[(n+1)%e._length],h=2===s?Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)):0,p=2===s?Math.sqrt(Math.pow(u[0]-l[0],2)+Math.pow(u[1]-l[1],2)):0;setPoint(t,e.v[n%e._length],a,o,r,p/(2*(i+1)),h/(2*(i+1)),s)}function zigZagSegment(t,e,n,r,i,s){for(var o=0;o<r;o+=1){var a=(o+1)/(r+1),u=2===i?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,c=e.normalAngle(a);setPoint(t,e.point(a),c,s,n,u/(2*(r+1)),u/(2*(r+1)),i),s=-s}return s}function linearOffset(t,e,n){var r=Math.atan2(e[0]-t[0],e[1]-t[1]);return[polarOffset(t,r,n),polarOffset(e,r,n)]}function offsetSegment(t,e){var n,r,i,s,o,a,u;n=(u=linearOffset(t.points[0],t.points[1],e))[0],r=u[1],i=(u=linearOffset(t.points[1],t.points[2],e))[0],s=u[1],o=(u=linearOffset(t.points[2],t.points[3],e))[0],a=u[1];var c=lineIntersection(n,r,i,s);null===c&&(c=r);var l=lineIntersection(o,a,i,s);return null===l&&(l=o),new PolynomialBezier(n,c,l,a)}function joinLines(t,e,n,r,i){var s=e.points[3],o=n.points[0];if(3===r)return s;if(pointEqual(s,o))return s;if(2===r){var a=-e.tangentAngle(1),u=-n.tangentAngle(0)+Math.PI,c=lineIntersection(s,polarOffset(s,a+Math.PI/2,100),o,polarOffset(o,a+Math.PI/2,100)),l=c?pointDistance(c,s):pointDistance(s,o)/2,h=polarOffset(s,a,2*l*roundCorner);return t.setXYAt(h[0],h[1],"o",t.length()-1),h=polarOffset(o,u,2*l*roundCorner),t.setTripleAt(o[0],o[1],o[0],o[1],h[0],h[1],t.length()),o}var p=lineIntersection(pointEqual(s,e.points[2])?e.points[0]:e.points[2],s,o,pointEqual(o,n.points[1])?n.points[3]:n.points[1]);return p&&pointDistance(p,s)<i?(t.setTripleAt(p[0],p[1],p[0],p[1],p[0],p[1],t.length()),p):s}function getIntersection(t,e){var n=t.intersections(e);return n.length&&floatEqual(n[0][0],1)&&n.shift(),n.length?n[0]:null}function pruneSegmentIntersection(t,e){var n=t.slice(),r=e.slice(),i=getIntersection(t[t.length-1],e[0]);return i&&(n[t.length-1]=t[t.length-1].split(i[0])[0],r[0]=e[0].split(i[1])[1]),t.length>1&&e.length>1&&(i=getIntersection(t[0],e[e.length-1]))?[[t[0].split(i[0])[0]],[e[e.length-1].split(i[1])[1]]]:[n,r]}function pruneIntersections(t){for(var e,n=1;n<t.length;n+=1)e=pruneSegmentIntersection(t[n-1],t[n]),t[n-1]=e[0],t[n]=e[1];return t.length>1&&(e=pruneSegmentIntersection(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function offsetSegmentSplit(t,e){var n,r,i,s,o=t.inflectionPoints();return 0===o.length?[offsetSegment(t,e)]:1===o.length||floatEqual(o[1],1)?(r=(i=t.split(o[0]))[1],[offsetSegment(n=i[0],e),offsetSegment(r,e)]):(n=(i=t.split(o[0]))[0],s=(i=i[1].split((o[1]-o[0])/(1-o[0])))[0],r=i[1],[offsetSegment(n,e),offsetSegment(s,e),offsetSegment(r,e)])}function OffsetPathModifier(){}function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],n="normal",r="normal",i=e.length,s=0;s<i;s+=1)switch(e[s].toLowerCase()){case"italic":r="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200"}return{style:r,weight:t.fWeight||n}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,n,r,i,s){var o=s?-1:1,a=r.s.v[0]+(1-r.s.v[0])*(1-i),u=r.s.v[1]+(1-r.s.v[1])*(1-i);t.translate(r.p.v[0]*o*i,r.p.v[1]*o*i,r.p.v[2]),e.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),e.rotate(-r.r.v*o*i),e.translate(r.a.v[0],r.a.v[1],r.a.v[2]),n.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),n.scale(s?1/a:a,s?1/u:u),n.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(t,e,n,r){for(this.elem=t,this.arr=e,this.pos=n,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[n]);n>0;)this._elements.unshift(e[n-=1]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)t[n]._render=e,"gr"===t[n].ty&&this.changeGroupRender(t[n].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,n,r,i,s,o=!1;if(this._mdf||t){var a,u=Math.ceil(this.c.v);if(this._groups.length<u){for(;this._groups.length<u;){var c={it:this.cloneElements(this._elements),ty:"gr"};c.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,c),this._groups.splice(0,0,c),this._currentCopies+=1}this.elem.reloadShapes(),o=!0}for(s=0,r=0;r<=this._groups.length-1;r+=1){if(this._groups[r]._render=a=s<u,this.changeGroupRender(this._groups[r].it,a),!a){var l=this.elemsData[r].it,h=l[l.length-1];0!==h.transform.op.v?(h.transform.op._mdf=!0,h.transform.op.v=0):h.transform.op._mdf=!1}s+=1}this._currentCopies=u;var p=this.o.v,f=p%1,d=p>0?Math.floor(p):Math.ceil(p),m=this.pMatrix.props,g=this.rMatrix.props,v=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var y,b,w=0;if(p>0){for(;w<d;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),w+=1;f&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,f,!1),w+=f)}else if(p<0){for(;w>d;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),w-=1;f&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-f,!0),w-=f)}for(r=1===this.data.m?0:this._currentCopies-1,i=1===this.data.m?1:-1,s=this._currentCopies;s;){if(b=(n=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+r/(this._currentCopies-1)*(this.eo.v-this.so.v),0!==w){for((0!==r&&1===i||r!==this._currentCopies-1&&-1===i)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),y=0;y<b;y+=1)n[y]=this.matrix.props[y];this.matrix.reset()}else for(this.matrix.reset(),y=0;y<b;y+=1)n[y]=this.matrix.props[y];w+=1,s-=1,r+=i}}else for(s=this._currentCopies,r=0,i=1;s;)n=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,s-=1,r+=i;return o},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var n,r=shapePool.newElement();r.c=t.c;var i,s,o,a,u,c,l,h,p,f,d,m,g=t._length,v=0;for(n=0;n<g;n+=1)s=t.i[n],(i=t.v[n])[0]===(o=t.o[n])[0]&&i[1]===o[1]&&i[0]===s[0]&&i[1]===s[1]?0!==n&&n!==g-1||t.c?(a=0===n?t.v[g-1]:t.v[n-1],c=(u=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)))?Math.min(u/2,e)/u:0,r.setTripleAt(l=d=i[0]+(a[0]-i[0])*c,h=m=i[1]-(i[1]-a[1])*c,l-(l-i[0])*roundCorner,h-(h-i[1])*roundCorner,d,m,v),v+=1,a=n===g-1?t.v[0]:t.v[n+1],c=(u=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)))?Math.min(u/2,e)/u:0,r.setTripleAt(l=p=i[0]+(a[0]-i[0])*c,h=f=i[1]+(a[1]-i[1])*c,p,f,d=l-(l-i[0])*roundCorner,m=h-(h-i[1])*roundCorner,v),v+=1):(r.setTripleAt(i[0],i[1],o[0],o[1],s[0],s[1],v),v+=1):(r.setTripleAt(t.v[n][0],t.v[n][1],t.o[n][0],t.o[n][1],t.i[n][0],t.i[n][1],v),v+=1);return r},RoundCornersModifier.prototype.processShapes=function(t){var e,n,r,i,s,o,a=this.shapes.length,u=this.rd.v;if(0!==u)for(n=0;n<a;n+=1){if(o=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||t)for(o.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,i=s.shape.paths._length,r=0;r<i;r+=1)o.addShape(this.processPath(e[r],u));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},PolynomialBezier.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(t){var e=this.derivative(t);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,n=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(n<0)return[];var r=Math.sqrt(n);return floatZero(r)?r>0&&r<1?[e]:[]:[e-r,e+r].filter(function(t){return t>0&&t<1})},PolynomialBezier.prototype.split=function(t){if(t<=0)return[singlePoint(this.points[0]),this];if(t>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],t),n=lerpPoint(this.points[1],this.points[2],t),r=lerpPoint(this.points[2],this.points[3],t),i=lerpPoint(e,n,t),s=lerpPoint(n,r,t),o=lerpPoint(i,s,t);return[new PolynomialBezier(this.points[0],e,i,o,!0),new PolynomialBezier(o,s,r,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}},PolynomialBezier.prototype.intersections=function(t,e,n){void 0===e&&(e=2),void 0===n&&(n=7);var r=[];return intersectsImpl(intersectData(this,0,1),intersectData(t,0,1),0,e,r,n),r},PolynomialBezier.shapeSegment=function(t,e){var n=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[n],t.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(t,e){var n=(e+1)%t.length();return new PolynomialBezier(t.v[n],t.i[n],t.o[e],t.v[e],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(t,e.s,0,null,this),this.frequency=PropertyFactory.getProp(t,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(t,e.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(t,e,n,r){var i=t._length,s=shapePool.newElement();if(s.c=t.c,t.c||(i-=1),0===i)return s;var o=-1,a=PolynomialBezier.shapeSegment(t,0);zigZagCorner(s,t,0,e,n,r,o);for(var u=0;u<i;u+=1)o=zigZagSegment(s,a,e,n,r,-o),a=u!==i-1||t.c?PolynomialBezier.shapeSegment(t,(u+1)%i):null,zigZagCorner(s,t,u+1,e,n,r,o);return s},ZigZagModifier.prototype.processShapes=function(t){var e,n,r,i,s,o,a=this.shapes.length,u=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),l=this.pointsType.v;if(0!==u)for(n=0;n<a;n+=1){if(o=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||t)for(o.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,i=s.shape.paths._length,r=0;r<i;r+=1)o.addShape(this.processPath(e[r],u,c,l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(t,e,n,r){var i=shapePool.newElement();i.c=t.c;var s,o,a,u=t.length();t.c||(u-=1);var c=[];for(s=0;s<u;s+=1)a=PolynomialBezier.shapeSegment(t,s),c.push(offsetSegmentSplit(a,e));if(!t.c)for(s=u-1;s>=0;s-=1)a=PolynomialBezier.shapeSegmentInverted(t,s),c.push(offsetSegmentSplit(a,e));c=pruneIntersections(c);var l=null,h=null;for(s=0;s<c.length;s+=1){var p=c[s];for(h&&(l=joinLines(i,h,p[0],n,r)),h=p[p.length-1],o=0;o<p.length;o+=1)a=p[o],l&&pointEqual(a.points[0],l)?i.setXYAt(a.points[1][0],a.points[1][1],"o",i.length()-1):i.setTripleAt(a.points[0][0],a.points[0][1],a.points[1][0],a.points[1][1],a.points[0][0],a.points[0][1],i.length()),i.setTripleAt(a.points[3][0],a.points[3][1],a.points[3][0],a.points[3][1],a.points[2][0],a.points[2][1],i.length()),l=a.points[3]}return c.length&&joinLines(i,h,c[0][0],n,r),i},OffsetPathModifier.prototype.processShapes=function(t){var e,n,r,i,s,o,a=this.shapes.length,u=this.amount.v,c=this.miterLimit.v,l=this.lineJoin;if(0!==u)for(n=0;n<a;n+=1){if(o=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||t)for(o.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,i=s.shape.paths._length,r=0;r<i;r+=1)o.addShape(this.processPath(e[r],u,l,c));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var t={w:0,size:0,shapes:[],data:{shapes:[]}},e=[];e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],r=[65039,8205];function i(t,e){var n=createTag("span");n.setAttribute("aria-hidden",!0),n.style.fontFamily=e;var r=createTag("span");r.innerText="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(r),document.body.appendChild(n);var i=r.offsetWidth;return r.style.fontFamily=function(t){var e,n=t.split(","),r=n.length,i=[];for(e=0;e<r;e+=1)"sans-serif"!==n[e]&&"monospace"!==n[e]&&i.push(n[e]);return i.join(",")}(t)+", "+e,{node:r,w:i,parent:n}}function s(t,e){var n,r=document.body&&e?"svg":"canvas",i=getFontProperties(t);if("svg"===r){var s=createNS("text");s.style.fontSize="100px",s.setAttribute("font-family",t.fFamily),s.setAttribute("font-style",i.style),s.setAttribute("font-weight",i.weight),s.textContent="1",t.fClass?(s.style.fontFamily="inherit",s.setAttribute("class",t.fClass)):s.style.fontFamily=t.fFamily,e.appendChild(s),n=s}else{var o=new OffscreenCanvas(500,500).getContext("2d");o.font=i.style+" "+i.weight+" 100px "+t.fFamily,n=o}return{measureText:function(t){return"svg"===r?(n.textContent=t,n.getComputedTextLength()):n.measureText(t).width}}}var o=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return o.isModifier=function(t,e){var r=t.toString(16)+e.toString(16);return-1!==n.indexOf(r)},o.isZeroWidthJoiner=function(t,e){return e?t===r[0]&&e===r[1]:t===r[1]},o.isCombinedCharacter=function(t){return-1!==e.indexOf(t)},o.prototype={addChars:function(t){if(t){var e;this.chars||(this.chars=[]);var n,r,i=t.length,s=this.chars.length;for(e=0;e<i;e+=1){for(n=0,r=!1;n<s;)this.chars[n].style===t[e].style&&this.chars[n].fFamily===t[e].fFamily&&this.chars[n].ch===t[e].ch&&(r=!0),n+=1;r||(this.chars.push(t[e]),s+=1)}}},addFonts:function(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);if(!document.body)return this.isLoaded=!0,t.list.forEach(function(t){t.helper=s(t),t.cache={}}),void(this.fonts=t.list);var n,r=t.list,o=r.length,a=o;for(n=0;n<o;n+=1){var u,c,l=!0;if(r[n].loaded=!1,r[n].monoCase=i(r[n].fFamily,"monospace"),r[n].sansCase=i(r[n].fFamily,"sans-serif"),r[n].fPath){if("p"===r[n].fOrigin||3===r[n].origin){if((u=document.querySelectorAll('style[f-forigin="p"][f-family="'+r[n].fFamily+'"], style[f-origin="3"][f-family="'+r[n].fFamily+'"]')).length>0&&(l=!1),l){var h=createTag("style");h.setAttribute("f-forigin",r[n].fOrigin),h.setAttribute("f-origin",r[n].origin),h.setAttribute("f-family",r[n].fFamily),h.type="text/css",h.innerText="@font-face {font-family: "+r[n].fFamily+"; font-style: normal; src: url('"+r[n].fPath+"');}",e.appendChild(h)}}else if("g"===r[n].fOrigin||1===r[n].origin){for(u=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),c=0;c<u.length;c+=1)-1!==u[c].href.indexOf(r[n].fPath)&&(l=!1);if(l){var p=createTag("link");p.setAttribute("f-forigin",r[n].fOrigin),p.setAttribute("f-origin",r[n].origin),p.type="text/css",p.rel="stylesheet",p.href=r[n].fPath,document.body.appendChild(p)}}else if("t"===r[n].fOrigin||2===r[n].origin){for(u=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),c=0;c<u.length;c+=1)r[n].fPath===u[c].src&&(l=!1);if(l){var f=createTag("link");f.setAttribute("f-forigin",r[n].fOrigin),f.setAttribute("f-origin",r[n].origin),f.setAttribute("rel","stylesheet"),f.setAttribute("href",r[n].fPath),e.appendChild(f)}}}else r[n].loaded=!0,a-=1;r[n].helper=s(r[n],e),r[n].cache={},this.fonts.push(r[n])}0===a?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(e,n,r){for(var i=0,s=this.chars.length;i<s;){if(this.chars[i].ch===e&&this.chars[i].style===n&&this.chars[i].fFamily===r)return this.chars[i];i+=1}return("string"==typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",e,n,r)),t},getFontByName:function(t){for(var e=0,n=this.fonts.length;e<n;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]},measureText:function(t,e,n){var r=this.getFontByName(e),i=t.charCodeAt(0);if(!r.cache[i+1]){var s=r.helper;if(" "===t){var o=s.measureText("|"+t+"|"),a=s.measureText("||");r.cache[i+1]=(o-a)/100}else r.cache[i+1]=s.measureText(t)/100}return r.cache[i+1]*n},checkLoadedFonts:function(){var t,e=this.fonts.length,n=e;for(t=0;t<e;t+=1)this.fonts[t].loaded?n-=1:"n"===this.fonts[t].fOrigin||0===this.fonts[t].origin?this.fonts[t].loaded=!0:((this.fonts[t].monoCase.node.offsetWidth!==this.fonts[t].monoCase.w||this.fonts[t].sansCase.node.offsetWidth!==this.fonts[t].sansCase.w)&&(n-=1,this.fonts[t].loaded=!0),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==n&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},o}();function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(t){return blendModeEnums[t]||""}),blendModeEnums;function SliderEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function AngleEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function ColorEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,1,0,n)}function PointEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,1,0,n)}function LayerIndexEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function MaskIndexEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function CheckboxEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var n,r=t.ef||[];this.effectElements=[];var i,s=r.length;for(n=0;n<s;n+=1)i=new GroupEffect(r[n],e),this.effectElements.push(i)}function GroupEffect(t,e){this.init(t,e)}function BaseElement(){}function FrameElement(){}function FootageElement(t,e,n){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,n)}function AudioElement(t,e,n){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,n),this._isPlaying=!1,this._canPlay=!1;var r=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(r),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}function TransformElement(){}function MaskElement(t,e,n){this.data=t,this.element=e,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,i,s=this.globalData.defs,o=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(o),this.solidPath="";var a,u,c,l,h,p,f=this.masksProperties,d=0,m=[],g=createElementID(),v="clipPath",y="clip-path";for(r=0;r<o;r+=1)if(("a"!==f[r].mode&&"n"!==f[r].mode||f[r].inv||100!==f[r].o.k||f[r].o.x)&&(v="mask",y="mask"),"s"!==f[r].mode&&"i"!==f[r].mode||0!==d?c=null:((c=createNS("rect")).setAttribute("fill","#ffffff"),c.setAttribute("width",this.element.comp.data.w||0),c.setAttribute("height",this.element.comp.data.h||0),m.push(c)),i=createNS("path"),"n"===f[r].mode)this.viewData[r]={op:PropertyFactory.getProp(this.element,f[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,f[r],3),elem:i,lastPath:""},s.appendChild(i);else{var b;if(d+=1,i.setAttribute("fill","s"===f[r].mode?"#000000":"#ffffff"),i.setAttribute("clip-rule","nonzero"),0!==f[r].x.k?(v="mask",y="mask",p=PropertyFactory.getProp(this.element,f[r].x,0,null,this.element),b=createElementID(),(l=createNS("filter")).setAttribute("id",b),(h=createNS("feMorphology")).setAttribute("operator","erode"),h.setAttribute("in","SourceGraphic"),h.setAttribute("radius","0"),l.appendChild(h),s.appendChild(l),i.setAttribute("stroke","s"===f[r].mode?"#000000":"#ffffff")):(h=null,p=null),this.storedData[r]={elem:i,x:p,expan:h,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"===f[r].mode){u=m.length;var w=createNS("g");for(a=0;a<u;a+=1)w.appendChild(m[a]);var x=createNS("mask");x.setAttribute("mask-type","alpha"),x.setAttribute("id",g+"_"+d),x.appendChild(i),s.appendChild(x),w.setAttribute("mask","url("+getLocationHref()+"#"+g+"_"+d+")"),m.length=0,m.push(w)}else m.push(i);f[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:i,lastPath:"",op:PropertyFactory.getProp(this.element,f[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,f[r],3),invRect:c},this.viewData[r].prop.k||this.drawPath(f[r],this.viewData[r].prop.v,this.viewData[r])}for(this.maskElement=createNS(v),o=m.length,r=0;r<o;r+=1)this.maskElement.appendChild(m[r]);d>0&&(this.maskElement.setAttribute("id",g),this.element.maskedElement.setAttribute(y,"url("+getLocationHref()+"#"+g+")"),s.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){var n;this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var r,i=this.data.ef.length,s=this.data.ef;for(n=0;n<i;n+=1){switch(r=null,s[n].ty){case 0:r=new SliderEffect(s[n],e,this);break;case 1:r=new AngleEffect(s[n],e,this);break;case 2:r=new ColorEffect(s[n],e,this);break;case 3:r=new PointEffect(s[n],e,this);break;case 4:case 7:r=new CheckboxEffect(s[n],e,this);break;case 10:r=new LayerIndexEffect(s[n],e,this);break;case 11:r=new MaskIndexEffect(s[n],e,this);break;case 5:r=new EffectsManager(s[n],e,this);break;default:r=new NoValueEffect(s[n],e,this)}r&&this.effectElements.push(r)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},initExpressions:function(){var t=getExpressionInterfaces();if(t){var e=t("layer"),n=t("effects"),r=t("shape"),i=t("text"),s=t("comp");this.layerInterface=e(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var o=n.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(o),0===this.data.ty||this.data.xt?this.compInterface=s(this):4===this.data.ty?(this.layerInterface.shapeInterface=r(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=i(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(t,e,n){this.globalData=e,this.comp=n,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var n,r=this.dynamicProperties.length;for(n=0;n<r;n+=1)(e||this._isParent&&"transform"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var t=getExpressionInterfaces();if(t){var e=t("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(t){this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this._currentTime=this.tm._placeholder?t/this.data.sr:this.tm.v,this._volume=this.lv.v[0];var e=this._volume*this._volumeMultiplier;this._previousVolume!==e&&(this._previousVolume=e,this.audio.volume(e))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(t){var e,n,r=this.layers.length;for(this.completeLayers=!0,e=r-1;e>=0;e-=1)this.elements[e]||(n=this.layers[e]).ip-n.st<=t-this.layers[e].st&&n.op-n.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t);default:return this.createNull(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){var e;this.completeLayers=!1;var n,r=t.length,i=this.layers.length;for(e=0;e<r;e+=1)for(n=0;n<i;){if(this.layers[n].id===t[e].id){this.layers[n]=t[e];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,n){for(var r=this.elements,i=this.layers,s=0,o=i.length;s<o;)i[s].ind==e&&(r[s]&&!0!==r[s]?(n.push(r[s]),r[s].setAsParent(),void 0!==i[s].parent?this.buildElementParenting(t,i[s].parent,n):t.setHierarchy(n)):(this.buildItem(s),this.addPendingElement(t))),s+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,n=t.length;for(e=0;e<n;e+=1)if(t[e].xt){var r=this.createComp(t[e]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.getElementByPath=function(t){var e,n=t.shift();if("number"==typeof n)e=this.elements[n];else{var r,i=this.elements.length;for(r=0;r<i;r+=1)if(this.elements[r].data.nm===n){e=this.elements[r];break}}return 0===t.length?e:e.getElementByPath(t)},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0)},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,n=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<r;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(e.cloneFromProps(t=this.finalTransform.mProp.v.props),n=0;n<r;n+=1)e.transform((t=this.hierarchy[n].finalTransform.mProp.v.props)[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var n,r=!0,i=this.comp;r;)i.finalTransform?(i.data.hasMask&&e.splice(0,0,i.finalTransform),i=i.comp):r=!1;var s,o=e.length;for(n=0;n<o;n+=1)s=e[n].mat.applyToPointArray(0,0,0),t=[t[0]-s[0],t[1]-s[1],0];return t},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e,n=this.element.finalTransform.mat,r=this.masksProperties.length;for(e=0;e<r;e+=1)if((this.viewData[e].prop._mdf||t)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||t)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[e].invRect.setAttribute("transform",n.getInverseMatrix().to2dCSS()),this.storedData[e].x&&(this.storedData[e].x._mdf||t))){var i=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[e].filterId+")")),i.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,(t+=" h-"+this.globalData.compSize.w)+" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,n){var r,i,s=" M"+e.v[0][0]+","+e.v[0][1];for(i=e._length,r=1;r<i;r+=1)s+=" C"+e.o[r-1][0]+","+e.o[r-1][1]+" "+e.i[r][0]+","+e.i[r][1]+" "+e.v[r][0]+","+e.v[r][1];if(e.c&&i>1&&(s+=" C"+e.o[r-1][0]+","+e.o[r-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),n.lastPath!==s){var o="";n.elem&&(e.c&&(o=t.inv?this.solidPath+s:s),n.elem.setAttribute("d",o)),n.lastPath=s}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory={createFilter:function(t,e){var n=createNS("filter");return n.setAttribute("id",t),!0!==e&&(n.setAttribute("filterUnits","objectBoundingBox"),n.setAttribute("x","0%"),n.setAttribute("y","0%"),n.setAttribute("width","100%"),n.setAttribute("height","100%")),n},createAlphaToLuminanceFilter:function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}},featureSupport=function(){var t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),t}(),registeredEffects={},idPrefix="filter_result_";function SVGEffects(t){var e,n,r="SourceGraphic",i=t.data.ef?t.data.ef.length:0,s=createElementID(),o=filtersFactory.createFilter(s,!0),a=0;for(this.filters=[],e=0;e<i;e+=1){n=null;var u=t.data.ef[e].ty;registeredEffects[u]&&(n=new(0,registeredEffects[u].effect)(o,t.effectsManager.effectElements[e],t,idPrefix+a,r),r=idPrefix+a,registeredEffects[u].countsAsEffect&&(a+=1)),n&&this.filters.push(n)}a&&(t.globalData.defs.appendChild(o),t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+s+")")),this.filters.length&&t.addRenderableComponent(this)}function registerEffect(t,e,n){registeredEffects[t]={effect:e,countsAsEffect:n}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(t,e,n){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(t,e){this.elem=t,this.pos=e}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(t){var e,n=this.filters.length;for(e=0;e<n;e+=1)this.filters[e].renderFrame(t)},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t=null;if(this.data.td){this.matteMasks={};var e=createNS("symbol");e.setAttribute("id",this.layerId);var n=createNS("g");n.appendChild(this.layerElement),e.appendChild(n),t=n,this.globalData.defs.appendChild(e)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var r=createNS("clipPath"),i=createNS("path");i.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var s=createElementID();if(r.setAttribute("id",s),r.appendChild(i),this.globalData.defs.appendChild(r),this.checkMasks()){var o=createNS("g");o.setAttribute("clip-path","url("+getLocationHref()+"#"+s+")"),o.appendChild(this.layerElement),this.transformedElement=o,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+s+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},getMatte:function(t){if(!this.matteMasks[t]){var e,n,r,i,s=this.layerId+"_"+t;if(1===t||3===t){var o=createNS("mask");o.setAttribute("id",s),o.setAttribute("mask-type",3===t?"luminance":"alpha"),(r=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),o.appendChild(r),this.globalData.defs.appendChild(o),featureSupport.maskType||1!==t||(o.setAttribute("mask-type","luminance"),e=createElementID(),n=filtersFactory.createFilter(e),this.globalData.defs.appendChild(n),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(i=createNS("g")).appendChild(r),o.appendChild(i),i.setAttribute("filter","url("+getLocationHref()+"#"+e+")"))}else if(2===t){var a=createNS("mask");a.setAttribute("id",s),a.setAttribute("mask-type","alpha");var u=createNS("g");a.appendChild(u),e=createElementID(),n=filtersFactory.createFilter(e);var c=createNS("feComponentTransfer");c.setAttribute("in","SourceGraphic"),n.appendChild(c);var l=createNS("feFuncA");l.setAttribute("type","table"),l.setAttribute("tableValues","1.0 0.0"),c.appendChild(l),this.globalData.defs.appendChild(n);var h=createNS("rect");h.setAttribute("width",this.comp.data.w),h.setAttribute("height",this.comp.data.h),h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("fill","#ffffff"),h.setAttribute("opacity","0"),u.setAttribute("filter","url("+getLocationHref()+"#"+e+")"),u.appendChild(h),(r=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),u.appendChild(r),featureSupport.maskType||(a.setAttribute("mask-type","luminance"),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),i=createNS("g"),u.appendChild(h),i.appendChild(this.layerElement),u.appendChild(i)),this.globalData.defs.appendChild(a)}this.matteMasks[t]=s}return this.matteMasks[t]},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+t+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initTransform(t,e,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(t){var e,n=this.shapeModifiers.length;for(e=0;e<n;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;t>=0&&!this.shapeModifiers[t].processShapes(this._isFirstFrame);t-=1);}},searchProcessedElement:function(t){for(var e=this.processedElements,n=0,r=e.length;n<r;){if(e[n].elem===t)return e[n].pos;n+=1}return 0},addProcessedElement:function(t,e){for(var n=this.processedElements,r=n.length;r;)if(n[r-=1].elem===t)return void(n[r].pos=e);n.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(t,e,n){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=n,this.lvl=e,this._isAnimated=!!n.k;for(var r=0,i=t.length;r<i;){if(t[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(t,e,n,r){var i;this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var s,o=e.length||0;for(i=0;i<o;i+=1)s=PropertyFactory.getProp(t,e[i].v,0,0,this),this.k=s.k||this.k,this.dataProps[i]={n:e[i].n,p:s};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=n}function SVGNoStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=n}function GradientProperty(t,e,n){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var r=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,n)}function SVGGradientStrokeStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,n),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(t,e,n){this.transform={mProps:t,op:e,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,n=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<n;e+=1)"o"!==this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(t,e){for(var n=0,r=this.o.length/2;n<r;){if(Math.abs(t[4*n]-t[4*e+2*n])>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,n,r,i=4*this.data.p;for(e=0;e<i;e+=1)n=e%4==0?100:255,r=Math.round(this.prop.v[e]*n),this.c[e]!==r&&(this.c[e]=r,this._cmdf=!t);if(this.o.length)for(i=this.prop.v.length,e=4*this.data.p;e<i;e+=1)n=e%2==0?100:1,r=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==r&&(this.o[e-4*this.data.p]=r,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(t,e,n){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,e),this.setGradientOpacity(e,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var n=createElementID(),r=createNS(1===e.t?"linearGradient":"radialGradient");r.setAttribute("id",n),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var i,s,o,a=[];for(o=4*e.g.p,s=0;s<o;s+=4)i=createNS("stop"),r.appendChild(i),a.push(i);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+getLocationHref()+"#"+n+")"),this.gf=r,this.cst=a},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var n,r,i,s=createNS("mask"),o=createNS("path");s.appendChild(o);var a=createElementID(),u=createElementID();s.setAttribute("id",u);var c=createNS(1===t.t?"linearGradient":"radialGradient");c.setAttribute("id",a),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),i=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var l=this.stops;for(r=4*t.g.p;r<i;r+=2)(n=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(n),l.push(n);o.setAttribute("gf"===t.ty?"fill":"stroke","url("+getLocationHref()+"#"+a+")"),"gs"===t.ty&&(o.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),1===t.lj&&o.setAttribute("stroke-miterlimit",t.ml)),this.of=c,this.ms=s,this.ost=l,this.maskId=u,e.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(t,e,n,r){if(0===e)return"";var i,s=t.o,o=t.i,a=t.v,u=" M"+r.applyToPointStringified(a[0][0],a[0][1]);for(i=1;i<e;i+=1)u+=" C"+r.applyToPointStringified(s[i-1][0],s[i-1][1])+" "+r.applyToPointStringified(o[i][0],o[i][1])+" "+r.applyToPointStringified(a[i][0],a[i][1]);return n&&e&&(u+=" C"+r.applyToPointStringified(s[i-1][0],s[i-1][1])+" "+r.applyToPointStringified(o[0][0],o[0][1])+" "+r.applyToPointStringified(a[0][0],a[0][1]),u+="z"),u},SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix;function n(t,e,n){(n||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(n||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function r(){}function i(n,r,i){var s,o,a,u,c,l,h,p,f,d,m,g=r.styles.length,v=r.lvl;for(l=0;l<g;l+=1){if(u=r.sh._mdf||i,r.styles[l].lvl<v){for(p=e.reset(),d=v-r.styles[l].lvl,m=r.transformers.length-1;!u&&d>0;)u=r.transformers[m].mProps._mdf||u,d-=1,m-=1;if(u)for(d=v-r.styles[l].lvl,m=r.transformers.length-1;d>0;)p.transform((f=r.transformers[m].mProps.v.props)[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),d-=1,m-=1}else p=t;if(o=(h=r.sh.paths)._length,u){for(a="",s=0;s<o;s+=1)(c=h.shapes[s])&&c._length&&(a+=buildShapeString(c,c._length,c.c,p));r.caches[l]=a}else a=r.caches[l];r.styles[l].d+=!0===n.hd?"":a,r.styles[l]._mdf=u||r.styles[l]._mdf}}function s(t,e,n){var r=e.style;(e.c._mdf||n)&&r.pElem.setAttribute("fill","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||n)&&r.pElem.setAttribute("fill-opacity",e.o.v)}function o(t,e,n){a(t,e,n),u(0,e,n)}function a(t,e,n){var r,i,s,o,a,u=e.gf,c=e.g._hasOpacity,l=e.s.v,h=e.e.v;if((e.o._mdf||n)&&e.style.pElem.setAttribute("gf"===t.ty?"fill-opacity":"stroke-opacity",e.o.v),e.s._mdf||n){var p=1===t.t?"x1":"cx",f="x1"===p?"y1":"cy";u.setAttribute(p,l[0]),u.setAttribute(f,l[1]),c&&!e.g._collapsable&&(e.of.setAttribute(p,l[0]),e.of.setAttribute(f,l[1]))}if(e.g._cmdf||n){var d=e.g.c;for(s=(r=e.cst).length,i=0;i<s;i+=1)(o=r[i]).setAttribute("offset",d[4*i]+"%"),o.setAttribute("stop-color","rgb("+d[4*i+1]+","+d[4*i+2]+","+d[4*i+3]+")")}if(c&&(e.g._omdf||n)){var m=e.g.o;for(s=(r=e.g._collapsable?e.cst:e.ost).length,i=0;i<s;i+=1)o=r[i],e.g._collapsable||o.setAttribute("offset",m[2*i]+"%"),o.setAttribute("stop-opacity",m[2*i+1])}if(1===t.t)(e.e._mdf||n)&&(u.setAttribute("x2",h[0]),u.setAttribute("y2",h[1]),c&&!e.g._collapsable&&(e.of.setAttribute("x2",h[0]),e.of.setAttribute("y2",h[1])));else if((e.s._mdf||e.e._mdf||n)&&(a=Math.sqrt(Math.pow(l[0]-h[0],2)+Math.pow(l[1]-h[1],2)),u.setAttribute("r",a),c&&!e.g._collapsable&&e.of.setAttribute("r",a)),e.e._mdf||e.h._mdf||e.a._mdf||n){a||(a=Math.sqrt(Math.pow(l[0]-h[0],2)+Math.pow(l[1]-h[1],2)));var g=Math.atan2(h[1]-l[1],h[0]-l[0]),v=e.h.v;v>=1?v=.99:v<=-1&&(v=-.99);var y=a*v,b=Math.cos(g+e.a.v)*y+l[0],w=Math.sin(g+e.a.v)*y+l[1];u.setAttribute("fx",b),u.setAttribute("fy",w),c&&!e.g._collapsable&&(e.of.setAttribute("fx",b),e.of.setAttribute("fy",w))}}function u(t,e,n){var r=e.style,i=e.d;i&&(i._mdf||n)&&i.dashStr&&(r.pElem.setAttribute("stroke-dasharray",i.dashStr),r.pElem.setAttribute("stroke-dashoffset",i.dashoffset[0])),e.c&&(e.c._mdf||n)&&r.pElem.setAttribute("stroke","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||n)&&r.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||n)&&(r.pElem.setAttribute("stroke-width",e.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:function(t){switch(t.ty){case"fl":return s;case"gf":return a;case"gs":return o;case"st":return u;case"sh":case"el":case"rc":case"sr":return i;case"tr":return n;case"no":return r;default:return null}}}}();function SVGShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,n),this.prevViewData=[]}function LetterProps(t,e,n,r,i,s){this.o=t,this.sw=e,this.sc=n,this.fc=r,this.m=i,this.p=s,this._mdf={o:!0,sw:!!e,sc:!!n,fc:!!r,m:!0,p:!0}}function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e,n,r,i=this.shapes.length,s=this.stylesList.length,o=[],a=!1;for(n=0;n<s;n+=1){for(r=this.stylesList[n],a=!1,o.length=0,t=0;t<i;t+=1)-1!==(e=this.shapes[t]).styles.indexOf(r)&&(o.push(e),a=e._isAnimated||a);o.length>1&&a&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var n,r=new SVGStyleData(t,e),i=r.pElem;return"st"===t.ty?n=new SVGStrokeStyleData(this,t,r):"fl"===t.ty?n=new SVGFillStyleData(this,t,r):"gf"===t.ty||"gs"===t.ty?(n=new("gf"===t.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,t,r),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),i.setAttribute("mask","url("+getLocationHref()+"#"+n.maskId+")"))):"no"===t.ty&&(n=new SVGNoStyleData(this,t,r)),"st"!==t.ty&&"gs"!==t.ty||(i.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),i.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),i.setAttribute("fill-opacity","0"),1===t.lj&&i.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&i.setAttribute("fill-rule","evenodd"),t.ln&&i.setAttribute("id",t.ln),t.cl&&i.setAttribute("class",t.cl),t.bm&&(i.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(r),this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var n=TransformPropertyFactory.getTransformProperty(this,t,this),r=new SVGTransformData(n,n.o,e);return this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.createShapeElement=function(t,e,n){var r=4;"rc"===t.ty?r=5:"el"===t.ty?r=6:"sr"===t.ty&&(r=7);var i=new SVGShapeData(e,n,ShapePropertyFactory.getShapeProp(this,t,r,this));return this.shapes.push(i),this.addShapeToModifiers(i),this.addToAnimatedContents(t,i),i},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var n=0,r=this.animatedContents.length;n<r;){if(this.animatedContents[n].element===e)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e,n=t.styles,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||n.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,n,r,i,s,o){var a,u,c,l,h,p=[].concat(s),f=t.length-1,d=[],m=[];for(a=f;a>=0;a-=1){if((h=this.searchProcessedElement(t[a]))?e[a]=n[h-1]:t[a]._render=o,"fl"===t[a].ty||"st"===t[a].ty||"gf"===t[a].ty||"gs"===t[a].ty||"no"===t[a].ty)h?e[a].style.closed=!1:e[a]=this.createStyleElement(t[a],i),t[a]._render&&e[a].style.pElem.parentNode!==r&&r.appendChild(e[a].style.pElem),d.push(e[a].style);else if("gr"===t[a].ty){if(h)for(c=e[a].it.length,u=0;u<c;u+=1)e[a].prevViewData[u]=e[a].it[u];else e[a]=this.createGroupElement(t[a]);this.searchShapes(t[a].it,e[a].it,e[a].prevViewData,e[a].gr,i+1,p,o),t[a]._render&&e[a].gr.parentNode!==r&&r.appendChild(e[a].gr)}else"tr"===t[a].ty?(h||(e[a]=this.createTransformElement(t[a],r)),p.push(e[a].transform)):"sh"===t[a].ty||"rc"===t[a].ty||"el"===t[a].ty||"sr"===t[a].ty?(h||(e[a]=this.createShapeElement(t[a],p,i)),this.setElementStyles(e[a])):"tm"===t[a].ty||"rd"===t[a].ty||"ms"===t[a].ty||"pb"===t[a].ty||"zz"===t[a].ty||"op"===t[a].ty?(h?(l=e[a]).closed=!1:((l=ShapeModifiers.getModifier(t[a].ty)).init(this,t[a]),e[a]=l,this.shapeModifiers.push(l)),m.push(l)):"rp"===t[a].ty&&(h?(l=e[a]).closed=!0:(l=ShapeModifiers.getModifier(t[a].ty),e[a]=l,l.init(this,t,a,e),this.shapeModifiers.push(l),o=!1),m.push(l));this.addProcessedElement(t[a],a+1)}for(f=d.length,a=0;a<f;a+=1)d[a].closed=!0;for(f=m.length,a=0;a<f;a+=1)m[a].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var t;this.renderModifiers();var e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e,n=this.animatedContents.length;for(t=0;t<n;t+=1)e=this.animatedContents[t],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(t,e,n,r,i,s){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,o=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,o=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,o=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,o=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,o=!0),!s.length||this.p[0]===s[0]&&this.p[1]===s[1]&&this.p[4]===s[4]&&this.p[5]===s[5]&&this.p[12]===s[12]&&this.p[13]===s[13]||(this.p=s,this._mdf.p=!0,o=!0),o},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var r;this.lock=!0,this._mdf=!1;var i=this.effectsSequence.length,s=t||this.data.d.k[this.keysIndex].s;for(r=0;r<i;r+=1)s=this.effectsSequence[r](n!==this.keysIndex?s:this.currentData,s.t);e!==s&&this.setCurrentData(s),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,n=0,r=t.length;n<=r-1&&!(n===r-1||t[n+1].t>e);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e,n,r=[],i=0,s=t.length,o=!1;i<s;)e=t.charCodeAt(i),FontManager.isCombinedCharacter(e)?r[r.length-1]+=t.charAt(i):e>=55296&&e<=56319?(n=t.charCodeAt(i+1))>=56320&&n<=57343?(o||FontManager.isModifier(e,n)?(r[r.length-1]+=t.substr(i,2),o=!1):r.push(t.substr(i,2)),i+=1):r.push(t.charAt(i)):e>56319?(n=t.charCodeAt(i+1),FontManager.isZeroWidthJoiner(e,n)?(o=!0,r[r.length-1]+=t.substr(i,2),i+=1):r.push(t.charAt(i))):FontManager.isZeroWidthJoiner(e)?(r[r.length-1]+=t.charAt(i),o=!0):r.push(t.charAt(i)),i+=1;return r},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,n,r,i,s,o,a,u=this.elem.globalData.fontManager,c=this.data,l=[],h=0,p=c.m.g,f=0,d=0,m=0,g=[],v=0,y=0,b=u.getFontByName(t.f),w=0,x=getFontProperties(b);t.fWeight=x.weight,t.fStyle=x.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),n=t.finalText.length,t.finalLineHeight=t.lh;var E,_=t.tr/1e3*t.finalSize;if(t.sz)for(var S,C,A=!0,I=t.sz[0],T=t.sz[1];A;){S=0,v=0,n=(C=this.buildFinalText(t.t)).length,_=t.tr/1e3*t.finalSize;var k=-1;for(e=0;e<n;e+=1)E=C[e].charCodeAt(0),r=!1," "===C[e]?k=e:13!==E&&3!==E||(v=0,r=!0,S+=t.finalLineHeight||1.2*t.finalSize),u.chars?(a=u.getCharData(C[e],b.fStyle,b.fFamily),w=r?0:a.w*t.finalSize/100):w=u.measureText(C[e],t.f,t.finalSize),v+w>I&&" "!==C[e]?(-1===k?n+=1:e=k,S+=t.finalLineHeight||1.2*t.finalSize,C.splice(e,k===e?1:0,"\r"),k=-1,v=0):(v+=w,v+=_);S+=b.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&T<S?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=C,n=t.finalText.length,A=!1)}v=-_,w=0;var P,R=0;for(e=0;e<n;e+=1)if(r=!1,13===(E=(P=t.finalText[e]).charCodeAt(0))||3===E?(R=0,g.push(v),y=v>y?v:y,v=-2*_,i="",r=!0,m+=1):i=P,u.chars?(a=u.getCharData(P,b.fStyle,u.getFontByName(t.f).fFamily),w=r?0:a.w*t.finalSize/100):w=u.measureText(i,t.f,t.finalSize)," "===P?R+=w+_:(v+=w+_+R,R=0),l.push({l:w,an:w,add:f,n:r,anIndexes:[],val:i,line:m,animatorJustifyOffset:0}),2==p){if(f+=w,""===i||" "===i||e===n-1){for(""!==i&&" "!==i||(f-=w);d<=e;)l[d].an=f,l[d].ind=h,l[d].extra=w,d+=1;h+=1,f=0}}else if(3==p){if(f+=w,""===i||e===n-1){for(""===i&&(f-=w);d<=e;)l[d].an=f,l[d].ind=h,l[d].extra=w,d+=1;f=0,h+=1}}else l[h].ind=h,l[h].extra=0,h+=1;if(t.l=l,y=v>y?v:y,g.push(v),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=y,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=g;var D,F,B,O,N=c.a;o=N.length;var M=[];for(s=0;s<o;s+=1){for((D=N[s]).a.sc&&(t.strokeColorAnim=!0),D.a.sw&&(t.strokeWidthAnim=!0),(D.a.fc||D.a.fh||D.a.fs||D.a.fb)&&(t.fillColorAnim=!0),O=0,B=D.s.b,e=0;e<n;e+=1)(F=l[e]).anIndexes[s]=O,(1==B&&""!==F.val||2==B&&""!==F.val&&" "!==F.val||3==B&&(F.n||" "==F.val||e==n-1)||4==B&&(F.n||e==n-1))&&(1===D.s.rn&&M.push(O),O+=1);c.a[s].s.totalChars=O;var L,V=-1;if(1===D.s.rn)for(e=0;e<n;e+=1)V!=(F=l[e]).anIndexes[s]&&(V=F.anIndexes[s],L=M.splice(Math.floor(Math.random()*M.length),1)[0]),F.anIndexes[s]=L}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=b.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){var n=this.copyData({},this.data.d.k[e=void 0===e?this.keysIndex:e].s);n=this.copyData(n,t),this.data.d.k[e].s=n,this.recalculate(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,n=Math.floor;function r(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,e.s||{k:0},0,0,this),this.e="e"in e?PropertyFactory.getProp(t,e.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(t,e.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,e.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,e.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(t,e.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var i=0,s=0,o=1,a=1;this.ne.v>0?i=this.ne.v/100:s=-this.ne.v/100,this.xe.v>0?o=1-this.xe.v/100:a=1+this.xe.v/100;var u=BezierFactory.getBezierEasing(i,s,o,a).get,c=0,l=this.finalS,h=this.finalE,p=this.data.sh;if(2===p)c=u(c=h===l?r>=h?1:0:t(0,e(.5/(h-l)+(r-l)/(h-l),1)));else if(3===p)c=u(c=h===l?r>=h?0:1:1-t(0,e(.5/(h-l)+(r-l)/(h-l),1)));else if(4===p)h===l?c=0:(c=t(0,e(.5/(h-l)+(r-l)/(h-l),1)))<.5?c*=2:c=1-2*(c-.5),c=u(c);else if(5===p){if(h===l)c=0;else{var f=h-l,d=-f/2+(r=e(t(0,r+.5-l),h-l)),m=f/2;c=Math.sqrt(1-d*d/(m*m))}c=u(c)}else 6===p?(h===l?c=0:(r=e(t(0,r+.5-l),h-l),c=(1+Math.cos(Math.PI+2*Math.PI*r/(h-l)))/2),c=u(c)):(r>=n(l)&&(c=t(0,e(r-l<0?e(h,1)-(l-r):h-r,1))),c=u(c));if(100!==this.sm.v){var g=.01*this.sm.v;0===g&&(g=1e-8);var v=.5-.5*g;c<v?c=0:(c=(c-v)/g)>1&&(c=1)}return c*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/e,r=this.s.v/e+n,i=this.e.v/e+n;if(r>i){var s=r;r=i,i=s}this.finalS=r,this.finalE=i}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(t,e,n){return new r(t,e,n)}}}();function TextAnimatorDataProperty(t,e,n){var r={propType:!1},i=PropertyFactory.getProp,s=e.a;this.a={r:s.r?i(t,s.r,0,degToRads,n):r,rx:s.rx?i(t,s.rx,0,degToRads,n):r,ry:s.ry?i(t,s.ry,0,degToRads,n):r,sk:s.sk?i(t,s.sk,0,degToRads,n):r,sa:s.sa?i(t,s.sa,0,degToRads,n):r,s:s.s?i(t,s.s,1,.01,n):r,a:s.a?i(t,s.a,1,0,n):r,o:s.o?i(t,s.o,0,.01,n):r,p:s.p?i(t,s.p,1,0,n):r,sw:s.sw?i(t,s.sw,0,0,n):r,sc:s.sc?i(t,s.sc,1,0,n):r,fc:s.fc?i(t,s.fc,1,0,n):r,fh:s.fh?i(t,s.fh,0,0,n):r,fs:s.fs?i(t,s.fs,0,.01,n):r,fb:s.fb?i(t,s.fb,0,.01,n):r,t:s.t?i(t,s.t,0,0,n):r},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,n),this.s.t=e.s.t}function TextAnimatorProperty(t,e,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var t,e=this._textData.a.length,n=PropertyFactory.getProp;for(t=0;t<e;t+=1)this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,this._textData.a[t],this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:n(this._elem,this._textData.p.a,0,0,this),f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:n(this._elem,this._textData.p.r,0,0,this),p:n(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,r,i,s,o,a,u,c,l,h,p,f,d,m,g,v,y,b,w=this._moreOptions.alignment.v,x=this._animatorsData,E=this._textData,_=this.mHelper,S=this._renderType,C=this.renderedLetters.length,A=t.l;if(this._hasMaskedPath){if(b=this._pathData.m,!this._pathData.n||this._pathData._mdf){var I,T=b.v;for(this._pathData.r.v&&(T=T.reverse()),o={tLength:0,segments:[]},s=T._length-1,v=0,i=0;i<s;i+=1)I=bez.buildBezierData(T.v[i],T.v[i+1],[T.o[i][0]-T.v[i][0],T.o[i][1]-T.v[i][1]],[T.i[i+1][0]-T.v[i+1][0],T.i[i+1][1]-T.v[i+1][1]]),o.tLength+=I.segmentLength,o.segments.push(I),v+=I.segmentLength;i=s,b.v.c&&(I=bez.buildBezierData(T.v[i],T.v[0],[T.o[i][0]-T.v[i][0],T.o[i][1]-T.v[i][1]],[T.i[0][0]-T.v[0][0],T.i[0][1]-T.v[0][1]]),o.tLength+=I.segmentLength,o.segments.push(I),v+=I.segmentLength),this._pathData.pi=o}if(p=0,h=1,c=0,l=!0,m=(o=this._pathData.pi).segments,(a=this._pathData.f.v)<0&&b.v.c)for(o.tLength<Math.abs(a)&&(a=-Math.abs(a)%o.tLength),h=(d=m[p=m.length-1].points).length-1;a<0;)a+=d[h].partialLength,(h-=1)<0&&(h=(d=m[p-=1].points).length-1);f=(d=m[p].points)[h-1],g=(u=d[h]).partialLength}s=A.length,n=0,r=0;var k,P,R,D,F,B=1.2*t.finalSize*.714,O=!0;R=x.length;var N,M,L,V,j,U,H,z,K,q,W,G,$=-1,X=a,Q=p,Y=h,Z=-1,J="",tt=this.defaultPropsArray;if(2===t.j||1===t.j){var et=0,nt=0,rt=2===t.j?-.5:-1,it=0,st=!0;for(i=0;i<s;i+=1)if(A[i].n){for(et&&(et+=nt);it<i;)A[it].animatorJustifyOffset=et,it+=1;et=0,st=!0}else{for(P=0;P<R;P+=1)(k=x[P].a).t.propType&&(st&&2===t.j&&(nt+=k.t.v*rt),et+=(F=x[P].s.getMult(A[i].anIndexes[P],E.a[P].s.totalChars)).length?k.t.v*F[0]*rt:k.t.v*F*rt);st=!1}for(et&&(et+=nt);it<i;)A[it].animatorJustifyOffset=et,it+=1}for(i=0;i<s;i+=1){if(_.reset(),V=1,A[i].n)n=0,r+=t.yOffset,r+=O?1:0,a=X,O=!1,this._hasMaskedPath&&(f=(d=m[p=Q].points)[(h=Y)-1],g=(u=d[h]).partialLength,c=0),J="",W="",K="",G="",tt=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Z!==A[i].line){switch(t.j){case 1:a+=v-t.lineWidths[A[i].line];break;case 2:a+=(v-t.lineWidths[A[i].line])/2}Z=A[i].line}$!==A[i].ind&&(A[$]&&(a+=A[$].extra),a+=A[i].an/2,$=A[i].ind),a+=w[0]*A[i].an*.005;var ot=0;for(P=0;P<R;P+=1)(k=x[P].a).p.propType&&(ot+=(F=x[P].s.getMult(A[i].anIndexes[P],E.a[P].s.totalChars)).length?k.p.v[0]*F[0]:k.p.v[0]*F),k.a.propType&&(ot+=(F=x[P].s.getMult(A[i].anIndexes[P],E.a[P].s.totalChars)).length?k.a.v[0]*F[0]:k.a.v[0]*F);for(l=!0,this._pathData.a.v&&(a=.5*A[0].an+(v-this._pathData.f.v-.5*A[0].an-.5*A[A.length-1].an)*$/(s-1),a+=this._pathData.f.v);l;)c+g>=a+ot||!d?(M=f.point[0]+(u.point[0]-f.point[0])*(y=(a+ot-c)/u.partialLength),L=f.point[1]+(u.point[1]-f.point[1])*y,_.translate(-w[0]*A[i].an*.005,-w[1]*B*.01),l=!1):d&&(c+=u.partialLength,(h+=1)>=d.length&&(h=0,m[p+=1]?d=m[p].points:b.v.c?(h=0,d=m[p=0].points):(c-=u.partialLength,d=null)),d&&(f=u,g=(u=d[h]).partialLength));_.translate(-(N=A[i].an/2-A[i].add),0,0)}else _.translate(-(N=A[i].an/2-A[i].add),0,0),_.translate(-w[0]*A[i].an*.005,-w[1]*B*.01,0);for(P=0;P<R;P+=1)(k=x[P].a).t.propType&&(F=x[P].s.getMult(A[i].anIndexes[P],E.a[P].s.totalChars),0===n&&0===t.j||(this._hasMaskedPath?a+=F.length?k.t.v*F[0]:k.t.v*F:n+=F.length?k.t.v*F[0]:k.t.v*F));for(t.strokeWidthAnim&&(U=t.sw||0),t.strokeColorAnim&&(j=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(H=[t.fc[0],t.fc[1],t.fc[2]]),P=0;P<R;P+=1)(k=x[P].a).a.propType&&((F=x[P].s.getMult(A[i].anIndexes[P],E.a[P].s.totalChars)).length?_.translate(-k.a.v[0]*F[0],-k.a.v[1]*F[1],k.a.v[2]*F[2]):_.translate(-k.a.v[0]*F,-k.a.v[1]*F,k.a.v[2]*F));for(P=0;P<R;P+=1)(k=x[P].a).s.propType&&((F=x[P].s.getMult(A[i].anIndexes[P],E.a[P].s.totalChars)).length?_.scale(1+(k.s.v[0]-1)*F[0],1+(k.s.v[1]-1)*F[1],1):_.scale(1+(k.s.v[0]-1)*F,1+(k.s.v[1]-1)*F,1));for(P=0;P<R;P+=1){if(k=x[P].a,F=x[P].s.getMult(A[i].anIndexes[P],E.a[P].s.totalChars),k.sk.propType&&(F.length?_.skewFromAxis(-k.sk.v*F[0],k.sa.v*F[1]):_.skewFromAxis(-k.sk.v*F,k.sa.v*F)),k.r.propType&&_.rotateZ(F.length?-k.r.v*F[2]:-k.r.v*F),k.ry.propType&&_.rotateY(F.length?k.ry.v*F[1]:k.ry.v*F),k.rx.propType&&_.rotateX(F.length?k.rx.v*F[0]:k.rx.v*F),k.o.propType&&(V+=F.length?(k.o.v*F[0]-V)*F[0]:(k.o.v*F-V)*F),t.strokeWidthAnim&&k.sw.propType&&(U+=F.length?k.sw.v*F[0]:k.sw.v*F),t.strokeColorAnim&&k.sc.propType)for(z=0;z<3;z+=1)j[z]+=F.length?(k.sc.v[z]-j[z])*F[0]:(k.sc.v[z]-j[z])*F;if(t.fillColorAnim&&t.fc){if(k.fc.propType)for(z=0;z<3;z+=1)H[z]+=F.length?(k.fc.v[z]-H[z])*F[0]:(k.fc.v[z]-H[z])*F;k.fh.propType&&(H=addHueToRGB(H,F.length?k.fh.v*F[0]:k.fh.v*F)),k.fs.propType&&(H=addSaturationToRGB(H,F.length?k.fs.v*F[0]:k.fs.v*F)),k.fb.propType&&(H=addBrightnessToRGB(H,F.length?k.fb.v*F[0]:k.fb.v*F))}}for(P=0;P<R;P+=1)(k=x[P].a).p.propType&&(F=x[P].s.getMult(A[i].anIndexes[P],E.a[P].s.totalChars),this._hasMaskedPath?F.length?_.translate(0,k.p.v[1]*F[0],-k.p.v[2]*F[1]):_.translate(0,k.p.v[1]*F,-k.p.v[2]*F):F.length?_.translate(k.p.v[0]*F[0],k.p.v[1]*F[1],-k.p.v[2]*F[2]):_.translate(k.p.v[0]*F,k.p.v[1]*F,-k.p.v[2]*F));if(t.strokeWidthAnim&&(K=U<0?0:U),t.strokeColorAnim&&(q="rgb("+Math.round(255*j[0])+","+Math.round(255*j[1])+","+Math.round(255*j[2])+")"),t.fillColorAnim&&t.fc&&(W="rgb("+Math.round(255*H[0])+","+Math.round(255*H[1])+","+Math.round(255*H[2])+")"),this._hasMaskedPath){if(_.translate(0,-t.ls),_.translate(0,w[1]*B*.01+r,0),this._pathData.p.v){var at=180*Math.atan((u.point[1]-f.point[1])/(u.point[0]-f.point[0]))/Math.PI;u.point[0]<f.point[0]&&(at+=180),_.rotate(-at*Math.PI/180)}_.translate(M,L,0),a-=w[0]*A[i].an*.005,A[i+1]&&$!==A[i+1].ind&&(a+=A[i].an/2,a+=.001*t.tr*t.finalSize)}else{switch(_.translate(n,r,0),t.ps&&_.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:_.translate(A[i].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[A[i].line]),0,0);break;case 2:_.translate(A[i].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[A[i].line])/2,0,0)}_.translate(0,-t.ls),_.translate(N,0,0),_.translate(w[0]*A[i].an*.005,w[1]*B*.01,0),n+=A[i].l+.001*t.tr*t.finalSize}"html"===S?J=_.toCSS():"svg"===S?J=_.to2dCSS():tt=[_.props[0],_.props[1],_.props[2],_.props[3],_.props[4],_.props[5],_.props[6],_.props[7],_.props[8],_.props[9],_.props[10],_.props[11],_.props[12],_.props[13],_.props[14],_.props[15]],G=V}C<=i?(D=new LetterProps(G,K,q,W,J,tt),this.renderedLetters.push(D),C+=1,this.lettersChangedFlag=!0):this.lettersChangedFlag=(D=this.renderedLetters[i]).update(G,K,q,W,J,tt)||this.lettersChangedFlag}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(t,e,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,n),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(t,e){var n,r,i=e.length,s="";for(n=0;n<i;n+=1)"sh"===e[n].ty&&(s+=buildShapeString(r=e[n].ks.k,r.i.length,!0,t));return s},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,n,r,i){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n])/2,0,0)}e.translate(r,i,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(t,e,n){this.textSpans=[],this.renderType="svg",this.initElement(t,e,n)}function ISolidElement(t,e,n){this.initElement(t,e,n)}function NullElement(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initFrame(),this.initTransform(t,e,n),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(t,e,n){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(e&&e.title){var r=createNS("title"),i=createElementID();r.setAttribute("id",i),r.textContent=e.title,this.svgElement.appendChild(r),n+=i}if(e&&e.description){var s=createNS("desc"),o=createElementID();s.setAttribute("id",o),s.textContent=e.description,this.svgElement.appendChild(s),n+=" "+o}n&&this.svgElement.setAttribute("aria-labelledby",n);var a=createNS("defs");this.svgElement.appendChild(a);var u=createNS("g");this.svgElement.appendChild(u),this.layerElement=u,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&!1===e.hideOnTransparent),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:a,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CVContextData(){var t;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),t=0;t<15;t+=1)this.saved[t]=createTypedArray("float32",16);this._length=15}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVEffects(){}function CVMaskElement(t,e){var n;this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r=this.masksProperties.length,i=!1;for(n=0;n<r;n+=1)"n"!==this.masksProperties[n].mode&&(i=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=i,i&&this.element.addRenderableComponent(this)}function CVBaseElement(){}function CVShapeData(t,e,n,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i,s=4;"rc"===e.ty?s=5:"el"===e.ty?s=6:"sr"===e.ty&&(s=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,s,t);var o,a=n.length;for(i=0;i<a;i+=1)n[i].closed||(o={transforms:r.addTransformSequence(n[i].transforms),trNodes:[]},this.styledShapes.push(o),n[i].elements.push(o))}function CVShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,n)}function CVTextElement(t,e,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,n)}function CVImageElement(t,e,n){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,n)}function CVSolidElement(t,e,n){this.initElement(t,e,n)}function CanvasRendererBase(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||""},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function CVCompElement(t,e,n){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HBaseElement(){}function HSolidElement(t,e,n){this.initElement(t,e,n)}function HShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,n)}function HCameraElement(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,t.pe,0,0,this),t.ks.p.s?(this.px=r(this,t.ks.p.x,1,0,this),this.py=r(this,t.ks.p.y,1,0,this),this.pz=r(this,t.ks.p.z,1,0,this)):this.p=r(this,t.ks.p,1,0,this),t.ks.a&&(this.a=r(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var i,s=t.ks.or.k.length;for(i=0;i<s;i+=1)t.ks.or.k[i].to=null,t.ks.or.k[i].ti=null}this.or=r(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,t.ks.rx,0,degToRads,this),this.ry=r(this,t.ks.ry,0,degToRads,this),this.rz=r(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(t,e,n){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,n)}function HybridRendererBase(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(t,e,n){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,n=t.length,r=[],i="";e<n;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(r.push(i),i=""):i+=t[e],e+=1;return r.push(i),r},SVGTextLottieElement.prototype.buildShapeData=function(t,e){if(t.shapes&&t.shapes.length){var n=t.shapes[0];if(n.it){var r=n.it[n.it.length-1];r.s&&(r.s.k[0]=e,r.s.k[1]=e)}}return t},SVGTextLottieElement.prototype.buildNewText=function(){var t,e;this.addDynamicProperty(this);var n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),this.layerElement.setAttribute("fill",n.fc?this.buildColor(n.fc):"rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var r=this.globalData.fontManager.getFontByName(n.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var i=n.fWeight;this.layerElement.setAttribute("font-style",n.fStyle),this.layerElement.setAttribute("font-weight",i)}this.layerElement.setAttribute("aria-label",n.t);var s,o=n.l||[],a=!!this.globalData.fontManager.chars;e=o.length;var u=this.mHelper,c=this.data.singleShape,l=0,h=0,p=!0,f=.001*n.tr*n.finalSize;if(!c||a||n.sz){var d,m=this.textSpans.length;for(t=0;t<e;t+=1){if(this.textSpans[t]||(this.textSpans[t]={span:null,childSpan:null,glyph:null}),!a||!c||0===t){if(s=m>t?this.textSpans[t].span:createNS(a?"g":"text"),m<=t){if(s.setAttribute("stroke-linecap","butt"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=s,a){var g=createNS("g");s.appendChild(g),this.textSpans[t].childSpan=g}this.textSpans[t].span=s,this.layerElement.appendChild(s)}s.style.display="inherit"}if(u.reset(),c&&(o[t].n&&(l=-f,h+=n.yOffset,h+=p?1:0,p=!1),this.applyTextPropertiesToMatrix(n,u,o[t].line,l,h),l+=o[t].l||0,l+=f),a){var v;if(1===(d=this.globalData.fontManager.getCharData(n.finalText[t],r.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily)).t)v=new SVGCompElement(d.data,this.globalData,this);else{var y=emptyShapeData;d.data&&d.data.shapes&&(y=this.buildShapeData(d.data,n.finalSize)),v=new SVGShapeElement(y,this.globalData,this)}if(this.textSpans[t].glyph){var b=this.textSpans[t].glyph;this.textSpans[t].childSpan.removeChild(b.layerElement),b.destroy()}this.textSpans[t].glyph=v,v._debug=!0,v.prepareFrame(0),v.renderFrame(),this.textSpans[t].childSpan.appendChild(v.layerElement),1===d.t&&this.textSpans[t].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else c&&s.setAttribute("transform","translate("+u.props[12]+","+u.props[13]+")"),s.textContent=o[t].val,s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}c&&s&&s.setAttribute("d","")}else{var w=this.textContainer,x="start";switch(n.j){case 1:x="end";break;case 2:x="middle";break;default:x="start"}w.setAttribute("text-anchor",x),w.setAttribute("letter-spacing",f);var E=this.buildTextContents(n.finalText);for(e=E.length,h=n.ps?n.ps[1]+n.ascent:0,t=0;t<e;t+=1)(s=this.textSpans[t].span||createNS("tspan")).textContent=E[t],s.setAttribute("x",0),s.setAttribute("y",h),s.style.display="inherit",w.appendChild(s),this.textSpans[t]||(this.textSpans[t]={span:null,glyph:null}),this.textSpans[t].span=s,h+=n.finalLineHeight;this.layerElement.appendChild(w)}for(;t<this.textSpans.length;)this.textSpans[t].span.style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var t,e,n=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,t=0;t<n;t+=1)(e=this.textSpans[t].glyph)&&(e.prepareFrame(this.comp.renderedFrame-this.data.st),e._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var t,e;this._sizeChanged=!0;var n,r,i,s=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;for(e=o.length,t=0;t<e;t+=1)o[t].n||(n=s[t],r=this.textSpans[t].span,(i=this.textSpans[t].glyph)&&i.renderFrame(),n._mdf.m&&r.setAttribute("transform",n.m),n._mdf.o&&r.setAttribute("opacity",n.o),n._mdf.sw&&r.setAttribute("stroke-width",n.sw),n._mdf.sc&&r.setAttribute("stroke",n.sc),n._mdf.fc&&r.setAttribute("fill",n.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRendererBase.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize?this.renderConfig.viewBoxSize:"0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var n=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",t.w),r.setAttribute("height",t.h),r.setAttribute("x",0),r.setAttribute("y",0);var i=createElementID();n.setAttribute("id",i),n.appendChild(r),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+i+")"),e.appendChild(n),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRendererBase.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(t){var e=0,n=this.layers.length;for(e=0;e<n;e+=1)if(this.layers[e].ind===t)return e;return-1},SVGRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){e[t]=!0;var n=this.createItem(this.layers[t]);if(e[t]=n,getExpressionsPlugin()&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,t),this.layers[t].tt){var r="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(-1===r)return;if(this.elements[r]&&!0!==this.elements[r]){var i=e[r].getMatte(this.layers[t].tt);n.setMatte(i)}else this.buildItem(r),this.addPendingElement(n)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,n=this.elements.length;e<n;){if(this.elements[e]===t){var r="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,i=this.elements[r].getMatte(this.layers[e].tt);t.setMatte(i);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){var e;null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var n=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=n-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<n;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(t,e){var n=t.getBaseElement();if(n){for(var r,i=0;i<e;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(r=this.elements[i].getBaseElement()),i+=1;r?this.layerElement.insertBefore(n,r):this.layerElement.appendChild(n)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initTransform(t,e,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var n,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},CVContextData.prototype.duplicate=function(){var t=2*this._length,e=this.savedOp;this.savedOp=createTypedArray("float32",t),this.savedOp.set(e);var n=0;for(n=this._length;n<t;n+=1)this.saved[n]=createTypedArray("float32",16);this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},ShapeTransformManager.prototype={addTransformSequence:function(t){var e,n=t.length,r="_";for(e=0;e<n;e+=1)r+=t[e].transform.key+"_";var i=this.sequences[r];return i||(i={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=i,this.sequenceList.push(i)),i},processSequence:function(t,e){for(var n,r=0,i=t.transforms.length,s=e;r<i&&!e;){if(t.transforms[r].transform.mProps._mdf){s=!0;break}r+=1}if(s)for(t.finalTransform.reset(),r=i-1;r>=0;r-=1)t.finalTransform.transform((n=t.transforms[r].transform.mProps.v.props)[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);t._mdf=s},processSequences:function(t){var e,n=this.sequenceList.length;for(e=0;e<n;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVEffects.prototype.renderFrame=function(){},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t,e,n,r,i=this.element.finalTransform.mat,s=this.element.canvasContext,o=this.masksProperties.length;for(s.beginPath(),t=0;t<o;t+=1)if("n"!==this.masksProperties[t].mode){var a;this.masksProperties[t].inv&&(s.moveTo(0,0),s.lineTo(this.element.globalData.compSize.w,0),s.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),s.lineTo(0,this.element.globalData.compSize.h),s.lineTo(0,0)),e=i.applyToPointArray((r=this.viewData[t].v).v[0][0],r.v[0][1],0),s.moveTo(e[0],e[1]);var u=r._length;for(a=1;a<u;a+=1)n=i.applyToTriplePoints(r.o[a-1],r.i[a],r.v[a]),s.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=i.applyToTriplePoints(r.o[a-1],r.i[0],r.v[0]),s.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),s.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var t=0===this.data.ty;this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(t),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var n={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:!0===t.hd},r={};if("fl"===t.ty||"st"===t.ty?(r.c=PropertyFactory.getProp(this,t.c,1,255,this),r.c.k||(n.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")")):"gf"!==t.ty&&"gs"!==t.ty||(r.s=PropertyFactory.getProp(this,t.s,1,null,this),r.e=PropertyFactory.getProp(this,t.e,1,null,this),r.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,t.g,this)),r.o=PropertyFactory.getProp(this,t.o,0,.01,this),"st"===t.ty||"gs"===t.ty){if(n.lc=lineCapEnum[t.lc||2],n.lj=lineJoinEnum[t.lj||2],1==t.lj&&(n.ml=t.ml),r.w=PropertyFactory.getProp(this,t.w,0,null,this),r.w.k||(n.wi=r.w.v),t.d){var i=new DashProperty(this,t.d,"canvas",this);r.d=i,r.d.k||(n.da=r.d.dashArray,n.do=r.d.dashoffset[0])}}else n.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(n),r.style=n,r},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}}},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,n=this.stylesList.length;for(e=0;e<n;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,n,r,i){var s,o,a,u,c,l,h=t.length-1,p=[],f=[],d=[].concat(i);for(s=h;s>=0;s-=1){if((u=this.searchProcessedElement(t[s]))?e[s]=n[u-1]:t[s]._shouldRender=r,"fl"===t[s].ty||"st"===t[s].ty||"gf"===t[s].ty||"gs"===t[s].ty)u?e[s].style.closed=!1:e[s]=this.createStyleElement(t[s],d),p.push(e[s].style);else if("gr"===t[s].ty){if(u)for(a=e[s].it.length,o=0;o<a;o+=1)e[s].prevViewData[o]=e[s].it[o];else e[s]=this.createGroupElement(t[s]);this.searchShapes(t[s].it,e[s].it,e[s].prevViewData,r,d)}else"tr"===t[s].ty?(u||(l=this.createTransformElement(t[s]),e[s]=l),d.push(e[s]),this.addTransformToStyleList(e[s])):"sh"===t[s].ty||"rc"===t[s].ty||"el"===t[s].ty||"sr"===t[s].ty?u||(e[s]=this.createShapeElement(t[s])):"tm"===t[s].ty||"rd"===t[s].ty||"pb"===t[s].ty||"zz"===t[s].ty||"op"===t[s].ty?(u?(c=e[s]).closed=!1:((c=ShapeModifiers.getModifier(t[s].ty)).init(this,t[s]),e[s]=c,this.shapeModifiers.push(c)),f.push(c)):"rp"===t[s].ty&&(u?(c=e[s]).closed=!0:(c=ShapeModifiers.getModifier(t[s].ty),e[s]=c,c.init(this,t,s,e),this.shapeModifiers.push(c),r=!1),f.push(c));this.addProcessedElement(t[s],s+1)}for(this.removeTransformFromStyleList(),this.closeStyles(p),h=f.length,s=0;s<h;s+=1)f[s].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e,n,r,i,s,o,a,u,c=this.stylesList.length,l=this.globalData.renderer,h=this.globalData.canvasContext;for(t=0;t<c;t+=1)if(("st"!==(a=(u=this.stylesList[t]).type)&&"gs"!==a||0!==u.wi)&&u.data._shouldRender&&0!==u.coOp&&0!==this.globalData.currentGlobalAlpha){for(l.save(),s=u.elements,"st"===a||"gs"===a?(h.strokeStyle="st"===a?u.co:u.grd,h.lineWidth=u.wi,h.lineCap=u.lc,h.lineJoin=u.lj,h.miterLimit=u.ml||0):h.fillStyle="fl"===a?u.co:u.grd,l.ctxOpacity(u.coOp),"st"!==a&&"gs"!==a&&h.beginPath(),l.ctxTransform(u.preTransforms.finalTransform.props),n=s.length,e=0;e<n;e+=1){for("st"!==a&&"gs"!==a||(h.beginPath(),u.da&&(h.setLineDash(u.da),h.lineDashOffset=u.do)),i=(o=s[e].trNodes).length,r=0;r<i;r+=1)"m"===o[r].t?h.moveTo(o[r].p[0],o[r].p[1]):"c"===o[r].t?h.bezierCurveTo(o[r].pts[0],o[r].pts[1],o[r].pts[2],o[r].pts[3],o[r].pts[4],o[r].pts[5]):h.closePath();"st"!==a&&"gs"!==a||(h.stroke(),u.da&&h.setLineDash(this.dashResetter))}"st"!==a&&"gs"!==a&&h.fill(u.r),l.restore()}},CVShapeElement.prototype.renderShape=function(t,e,n,r){var i,s;for(s=t,i=e.length-1;i>=0;i-=1)"tr"===e[i].ty?this.renderShapeTransform(t,s=n[i].transform):"sh"===e[i].ty||"el"===e[i].ty||"rc"===e[i].ty||"sr"===e[i].ty?this.renderPath(e[i],n[i]):"fl"===e[i].ty?this.renderFill(e[i],n[i],s):"st"===e[i].ty?this.renderStroke(e[i],n[i],s):"gf"===e[i].ty||"gs"===e[i].ty?this.renderGradientFill(e[i],n[i],s):"gr"===e[i].ty&&this.renderShape(s,e[i].it,n[i].it);r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var n,r,i,s=t.trNodes,o=e.paths,a=o._length;s.length=0;var u=t.transforms.finalTransform;for(i=0;i<a;i+=1){var c=o.shapes[i];if(c&&c.v){for(r=c._length,n=1;n<r;n+=1)1===n&&s.push({t:"m",p:u.applyToPointArray(c.v[0][0],c.v[0][1],0)}),s.push({t:"c",pts:u.applyToTriplePoints(c.o[n-1],c.i[n],c.v[n])});1===r&&s.push({t:"m",p:u.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&r&&(s.push({t:"c",pts:u.applyToTriplePoints(c.o[n-1],c.i[0],c.v[0])}),s.push({t:"z"}))}}t.trNodes=s}},CVShapeElement.prototype.renderPath=function(t,e){if(!0!==t.hd&&t._shouldRender){var n,r=e.styledShapes.length;for(n=0;n<r;n+=1)this.renderStyledShape(e.styledShapes[n],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,n){var r=e.style;(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,n){var r,i=e.style;if(!i.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var s,o=this.globalData.canvasContext,a=e.s.v,u=e.e.v;if(1===t.t)r=o.createLinearGradient(a[0],a[1],u[0],u[1]);else{var c=Math.sqrt(Math.pow(a[0]-u[0],2)+Math.pow(a[1]-u[1],2)),l=Math.atan2(u[1]-a[1],u[0]-a[0]),h=e.h.v;h>=1?h=.99:h<=-1&&(h=-.99);var p=c*h,f=Math.cos(l+e.a.v)*p+a[0],d=Math.sin(l+e.a.v)*p+a[1];r=o.createRadialGradient(f,d,0,a[0],a[1],c)}var m=t.g.p,g=e.g.c,v=1;for(s=0;s<m;s+=1)e.g._hasOpacity&&e.g._collapsable&&(v=e.g.o[2*s+1]),r.addColorStop(g[4*s]/100,"rgba("+g[4*s+1]+","+g[4*s+2]+","+g[4*s+3]+","+v+")");i.grd=r}i.coOp=e.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(t,e,n){var r=e.style,i=e.d;i&&(i._mdf||this._isFirstFrame)&&(r.da=i.dashArray,r.do=i.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*n.opacity),(e.w._mdf||this._isFirstFrame)&&(r.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var n=!1;t.sc&&(n=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var r,i,s,o,a,u,c,l,h,p,f,d,m=this.globalData.fontManager.getFontByName(t.f),g=t.l,v=this.mHelper;this.stroke=n,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,i=t.finalText.length;var y=this.data.singleShape,b=.001*t.tr*t.finalSize,w=0,x=0,E=!0,_=0;for(r=0;r<i;r+=1){o=(s=this.globalData.fontManager.getCharData(t.finalText[r],m.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&s.data||{},v.reset(),y&&g[r].n&&(w=-b,x+=t.yOffset,x+=E?1:0,E=!1),h=(c=o.shapes?o.shapes[0].it:[]).length,v.scale(t.finalSize/100,t.finalSize/100),y&&this.applyTextPropertiesToMatrix(t,v,g[r].line,w,x),f=createSizedArray(h-1);var S=0;for(l=0;l<h;l+=1)if("sh"===c[l].ty){for(u=c[l].ks.k.i.length,p=c[l].ks.k,d=[],a=1;a<u;a+=1)1===a&&d.push(v.applyToX(p.v[0][0],p.v[0][1],0),v.applyToY(p.v[0][0],p.v[0][1],0)),d.push(v.applyToX(p.o[a-1][0],p.o[a-1][1],0),v.applyToY(p.o[a-1][0],p.o[a-1][1],0),v.applyToX(p.i[a][0],p.i[a][1],0),v.applyToY(p.i[a][0],p.i[a][1],0),v.applyToX(p.v[a][0],p.v[a][1],0),v.applyToY(p.v[a][0],p.v[a][1],0));d.push(v.applyToX(p.o[a-1][0],p.o[a-1][1],0),v.applyToY(p.o[a-1][0],p.o[a-1][1],0),v.applyToX(p.i[0][0],p.i[0][1],0),v.applyToY(p.i[0][0],p.i[0][1],0),v.applyToX(p.v[0][0],p.v[0][1],0),v.applyToY(p.v[0][0],p.v[0][1],0)),f[S]=d,S+=1}y&&(w+=g[r].l,w+=b),this.textSpans[_]?this.textSpans[_].elem=f:this.textSpans[_]={elem:f},_+=1}},CVTextElement.prototype.renderInnerContent=function(){var t,e,n,r,i,s,o=this.canvasContext;o.font=this.values.fValue,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var a,u=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;e=c.length;var l,h,p=null,f=null,d=null;for(t=0;t<e;t+=1)if(!c[t].n){if((a=u[t])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(a.p),this.globalData.renderer.ctxOpacity(a.o)),this.fill){for(a&&a.fc?p!==a.fc&&(p=a.fc,o.fillStyle=a.fc):p!==this.values.fill&&(p=this.values.fill,o.fillStyle=this.values.fill),r=(l=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(s=(h=l[n]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),i=2;i<s;i+=6)this.globalData.canvasContext.bezierCurveTo(h[i],h[i+1],h[i+2],h[i+3],h[i+4],h[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(a&&a.sw?d!==a.sw&&(d=a.sw,o.lineWidth=a.sw):d!==this.values.sWidth&&(d=this.values.sWidth,o.lineWidth=this.values.sWidth),a&&a.sc?f!==a.sc&&(f=a.sc,o.strokeStyle=a.sc):f!==this.values.stroke&&(f=this.values.stroke,o.strokeStyle=this.values.stroke),r=(l=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(s=(h=l[n]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),i=2;i<s;i+=6)this.globalData.canvasContext.bezierCurveTo(h[i],h[i+1],h[i+2],h[i+3],h[i+4],h[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}a&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,n,r=t.getContext("2d"),i=this.img.width,s=this.img.height,o=i/s,a=this.assetData.w/this.assetData.h,u=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;o>a&&"xMidYMid slice"===u||o<a&&"xMidYMid slice"!==u?e=(n=s)*a:n=(e=i)/a,r.drawImage(this.img,(i-e)/2,(s-n)/2,e,n,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(t){if(1!==t[0]||0!==t[1]||0!==t[4]||1!==t[5]||0!==t[12]||0!==t[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(t);var e=this.contextData.cTr.props;this.transformMat.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var n=this.contextData.cTr.props;this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])}else this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRendererBase.prototype.ctxOpacity=function(t){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=t<0?0:t,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=t<0?0:t,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(t){if(this.renderConfig.clearCanvas){t&&this.canvasContext.save();var e,n=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var r=this.contextData.saved[this.contextData.cArrPos];for(e=0;e<16;e+=1)r[e]=n[e];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(t){if(this.renderConfig.clearCanvas){t&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var e,n=this.contextData.saved[this.contextData.cArrPos],r=this.contextData.cTr.props;for(e=0;e<16;e+=1)r[e]=n[e];this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),this.contextData.cO=n=this.contextData.savedOp[this.contextData.cArrPos],this.globalData.currentGlobalAlpha!==n&&(this.canvasContext.globalAlpha=n,this.globalData.currentGlobalAlpha=n)}else this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var n="0px 0px 0px";e.transformOrigin=n,e.mozTransformOrigin=n,e.webkitTransformOrigin=n,e["-webkit-transform"]=n,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(t,e){var n,r,i,s;if(this.reset(),t?(r=e,this.canvasContext.canvas.width=n=t,this.canvasContext.canvas.height=r):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,r=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=r*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var o=this.renderConfig.preserveAspectRatio.split(" "),a=o[1]||"meet",u=o[0]||"xMidYMid",c=u.substr(0,4),l=u.substr(4);(s=this.transformCanvas.w/this.transformCanvas.h)>(i=n/r)&&"meet"===a||s<i&&"slice"===a?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===c&&(s<i&&"meet"===a||s>i&&"slice"===a)?(n-this.transformCanvas.w*(r/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===c&&(s<i&&"meet"===a||s>i&&"slice"===a)?(n-this.transformCanvas.w*(r/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===l&&(s>i&&"meet"===a||s<i&&"slice"===a)?(r-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===l&&(s>i&&"meet"===a||s<i&&"slice"===a)?(r-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var t;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),t=(this.layers?this.layers.length:0)-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(t,e){if((this.renderedFrame!==t||!0!==this.renderConfig.clearCanvas||e)&&!this.destroyed&&-1!==t){var n;this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var r=this.layers.length;for(this.completeLayers||this.checkLayers(t),n=0;n<r;n+=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(t-this.layers[n].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){var n=this.createItem(this.layers[t],this,this.globalData);e[t]=n,n.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t,e=this.canvasContext;for(e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip(),t=this.layers.length-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var e=this.finalTransform.mat.toCSS();t.transform=e,t.webkitTransform=e}this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?((t=createNS("rect")).setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((t=createTag("div")).style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)e=t[n].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var n,r,i,s,o,a=t.sh.v,u=t.transformers,c=a._length;if(!(c<=1)){for(n=0;n<c-1;n+=1)r=this.getTransformedPoint(u,a.v[n]),i=this.getTransformedPoint(u,a.o[n]),s=this.getTransformedPoint(u,a.i[n+1]),o=this.getTransformedPoint(u,a.v[n+1]),this.checkBounds(r,i,s,o,e);a.c&&(r=this.getTransformedPoint(u,a.v[n]),i=this.getTransformedPoint(u,a.o[n]),s=this.getTransformedPoint(u,a.i[0]),o=this.getTransformedPoint(u,a.v[0]),this.checkBounds(r,i,s,o,e))}},HShapeElement.prototype.checkBounds=function(t,e,n,r,i){this.getBoundsOfCurve(t,e,n,r);var s=this.shapeBoundingBox;i.x=bmMin(s.left,i.x),i.xMax=bmMax(s.right,i.xMax),i.y=bmMin(s.top,i.y),i.yMax=bmMax(s.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,n,r){for(var i,s,o,a,u,c,l,h=[[t[0],r[0]],[t[1],r[1]]],p=0;p<2;++p)s=6*t[p]-12*e[p]+6*n[p],i=-3*t[p]+9*e[p]-9*n[p]+3*r[p],o=3*e[p]-3*t[p],s|=0,o|=0,0==(i|=0)&&0===s||(0===i?(a=-o/s)>0&&a<1&&h[p].push(this.calculateF(a,t,e,n,r,p)):(u=s*s-4*o*i)>=0&&((c=(-s+bmSqrt(u))/(2*i))>0&&c<1&&h[p].push(this.calculateF(c,t,e,n,r,p)),(l=(-s-bmSqrt(u))/(2*i))>0&&l<1&&h[p].push(this.calculateF(l,t,e,n,r,p))));this.shapeBoundingBox.left=bmMin.apply(null,h[0]),this.shapeBoundingBox.top=bmMin.apply(null,h[1]),this.shapeBoundingBox.right=bmMax.apply(null,h[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,h[1])},HShapeElement.prototype.calculateF=function(t,e,n,r,i,s){return bmPow(1-t,3)*e[s]+3*bmPow(1-t,2)*t*n[s]+3*(1-t)*bmPow(t,2)*r[s]+bmPow(t,3)*i[s]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)t[n]&&t[n].sh?this.calculateShapeBoundingBox(t[n],e):t[n]&&t[n].it?this.calculateBoundingBox(t[n].it,e):t[n]&&t[n].style&&t[n].w&&this.expandStrokeBoundingBox(t[n].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(t,e){var n=0;if(t.keyframes){for(var r=0;r<t.keyframes.length;r+=1){var i=t.keyframes[r].s;i>n&&(n=i)}n*=t.mult}else n=t.v*t.mult;e.x-=n,e.xMax+=n,e.y-=n,e.yMax+=n},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var n=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),n=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),n=!0),n||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var r=this.shapeCont.style,i="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=i,r.webkitTransform=i}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,n=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=n,e.color=n,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var r,i,s=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",s.fClass)this.innerElem.className=s.fClass;else{e.fontFamily=s.fFamily;var o=t.fWeight;e.fontStyle=t.fStyle,e.fontWeight=o}var a,u,c,l=t.l;i=l.length;var h,p=this.mHelper,f="",d=0;for(r=0;r<i;r+=1){if(this.globalData.fontManager.chars?(this.textPaths[d]?a=this.textPaths[d]:((a=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),a.setAttribute("stroke-linejoin",lineJoinEnum[2]),a.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[d]?c=(u=this.textSpans[d]).children[0]:((u=createTag("div")).style.lineHeight=0,(c=createNS("svg")).appendChild(a),styleDiv(u)))):this.isMasked?a=this.textPaths[d]?this.textPaths[d]:createNS("text"):this.textSpans[d]?(u=this.textSpans[d],a=this.textPaths[d]):(styleDiv(u=createTag("span")),styleDiv(a=createTag("span")),u.appendChild(a)),this.globalData.fontManager.chars){var m,g=this.globalData.fontManager.getCharData(t.finalText[r],s.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(m=g?g.data:null,p.reset(),m&&m.shapes&&m.shapes.length&&(h=m.shapes[0].it,p.scale(t.finalSize/100,t.finalSize/100),f=this.createPathShape(p,h),a.setAttribute("d",f)),this.isMasked)this.innerElem.appendChild(a);else{if(this.innerElem.appendChild(u),m&&m.shapes){document.body.appendChild(c);var v=c.getBBox();c.setAttribute("width",v.width+2),c.setAttribute("height",v.height+2),c.setAttribute("viewBox",v.x-1+" "+(v.y-1)+" "+(v.width+2)+" "+(v.height+2));var y=c.style,b="translate("+(v.x-1)+"px,"+(v.y-1)+"px)";y.transform=b,y.webkitTransform=b,l[r].yOffset=v.y-1}else c.setAttribute("width",1),c.setAttribute("height",1);u.appendChild(c)}}else if(a.textContent=l[r].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(a);else{this.innerElem.appendChild(u);var w=a.style,x="translate3d(0,"+-t.finalSize/1.2+"px,0)";w.transform=x,w.webkitTransform=x}this.textSpans[d]=this.isMasked?a:u,this.textSpans[d].style.display="block",this.textPaths[d]=a,d+=1}for(;d<this.textSpans.length;)this.textSpans[d].style.display="none",d+=1},HTextElement.prototype.renderInnerContent=function(){var t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH);var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";(t=this.svgElement.style).transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var n,r,i,s,o,a=0,u=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;for(r=c.length,n=0;n<r;n+=1)c[n].n?a+=1:(s=this.textSpans[n],o=this.textPaths[n],i=u[a],a+=1,i._mdf.m&&(this.isMasked?s.setAttribute("transform",i.m):(s.style.webkitTransform=i.m,s.style.transform=i.m)),s.style.opacity=i.o,i.sw&&i._mdf.sw&&o.setAttribute("stroke-width",i.sw),i.sc&&i._mdf.sc&&o.setAttribute("stroke",i.sc),i.fc&&i._mdf.fc&&(o.setAttribute("fill",i.fc),o.style.color=i.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var l=this.innerElem.getBBox();if(this.currentBBox.w!==l.width&&(this.currentBBox.w=l.width,this.svgElement.setAttribute("width",l.width)),this.currentBBox.h!==l.height&&(this.currentBBox.h=l.height,this.svgElement.setAttribute("height",l.height)),this.currentBBox.w!==l.width+2||this.currentBBox.h!==l.height+2||this.currentBBox.x!==l.x-1||this.currentBBox.y!==l.y-1){this.currentBBox.w=l.width+2,this.currentBBox.h=l.height+2,this.currentBBox.x=l.x-1,this.currentBBox.y=l.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var h="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";(t=this.svgElement.style).transform=h,t.webkitTransform=h}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e,n,r,i=this.comp.threeDElements.length;for(t=0;t<i;t+=1)if("3d"===(e=this.comp.threeDElements[t]).type){r=e.container.style;var s=this.pe.v+"px",o="0px 0px 0px",a="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(n=e.perspectiveElem.style).perspective=s,n.webkitPerspective=s,r.transformOrigin=o,r.mozTransformOrigin=o,r.webkitTransformOrigin=o,n.transform=a,n.webkitTransform=a}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,n=this._isFirstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)n=this.hierarchy[t].finalTransform.mProp._mdf||n;if(n||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=e=this.hierarchy.length-1;t>=0;t-=1){var r=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i;i=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var s=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2)),o=[i[0]/s,i[1]/s,i[2]/s],a=Math.sqrt(o[2]*o[2]+o[0]*o[0]),u=Math.atan2(o[1],a),c=Math.atan2(o[0],-o[2]);this.mat.rotateY(c).rotateX(-u)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var l=!this._prevMat.equals(this.mat);if((l||this.pe._mdf)&&this.comp.threeDElements){var h,p,f;for(e=this.comp.threeDElements.length,t=0;t<e;t+=1)if("3d"===(h=this.comp.threeDElements[t]).type){if(l){var d=this.mat.toCSS();(f=h.container.style).transform=d,f.webkitTransform=d}this.pe._mdf&&((p=h.perspectiveElem.style).perspective=this.pe.v+"px",p.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(t,e){var n=t.getBaseElement();if(n){var r=this.layers[e];if(r.ddd&&this.supports3d)this.addTo3dContainer(n,e);else if(this.threeDElements)this.addTo3dContainer(n,e);else{for(var i,s,o=0;o<e;)this.elements[o]&&!0!==this.elements[o]&&this.elements[o].getBaseElement&&(s=this.elements[o],i=(this.layers[o].ddd?this.getThreeDContainerByPos(o):s.getBaseElement())||i),o+=1;i?r.ddd&&this.supports3d||this.layerElement.insertBefore(n,i):r.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRendererBase.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRendererBase.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(t){for(var e=0,n=this.threeDElements.length;e<n;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(t,e){var n,r,i=createTag("div");styleDiv(i);var s=createTag("div");if(styleDiv(s),"3d"===e){(n=i.style).width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var o="50% 50%";n.webkitTransformOrigin=o,n.mozTransformOrigin=o,n.transformOrigin=o;var a="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(r=s.style).transform=a,r.webkitTransform=a}i.appendChild(s);var u={container:s,perspectiveElem:i,startPos:t,endPos:t,type:e};return this.threeDElements.push(u),u},HybridRendererBase.prototype.build3dContainers=function(){var t,e,n=this.layers.length,r="";for(t=0;t<n;t+=1)this.layers[t].ddd&&3!==this.layers[t].ty?("3d"!==r&&(r="3d",e=this.createThreeDContainer(t,"3d")),e.endPos=Math.max(e.endPos,t)):("2d"!==r&&(r="2d",e=this.createThreeDContainer(t,"2d")),e.endPos=Math.max(e.endPos,t));for(t=(n=this.threeDElements.length)-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(t,e){for(var n=0,r=this.threeDElements.length;n<r;){if(e<=this.threeDElements[n].endPos){for(var i,s=this.threeDElements[n].startPos;s<e;)this.elements[s]&&this.elements[s].getBaseElement&&(i=this.elements[s].getBaseElement()),s+=1;i?this.threeDElements[n].container.insertBefore(t,i):this.threeDElements[n].container.appendChild(t);break}n+=1}},HybridRendererBase.prototype.configAnimation=function(t){var e=createTag("div"),n=this.animationItem.wrapper,r=e.style;r.width=t.w+"px",r.height=t.h+"px",this.resizerElem=e,styleDiv(e),r.transformStyle="flat",r.mozTransformStyle="flat",r.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),n.appendChild(e),r.overflow="hidden";var i=createNS("svg");i.setAttribute("width","1"),i.setAttribute("height","1"),styleDiv(i),this.resizerElem.appendChild(i);var s=createNS("defs");i.appendChild(s),this.data=t,this.setupGlobalData(t,i),this.globalData.defs=s,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var t,e,n,r,i=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight;this.globalData.compSize.w/this.globalData.compSize.h>i/s?(t=i/this.globalData.compSize.w,e=i/this.globalData.compSize.w,n=0,r=(s-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(t=s/this.globalData.compSize.h,e=s/this.globalData.compSize.h,n=(i-this.globalData.compSize.w*(s/this.globalData.compSize.h))/2,r=0);var o=this.resizerElem.style;o.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+n+","+r+",0,1)",o.transform=o.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,n=this.globalData.compSize.h,r=this.threeDElements.length;for(t=0;t<r;t+=1){var i=this.threeDElements[t].perspectiveElem.style;i.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(n,2))+"px",i.perspective=i.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(t){var e,n=t.length,r=createTag("div");for(e=0;e<n;e+=1)if(t[e].xt){var i=this.createComp(t[e],r,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var n,r=0;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(t,n):this.layerElement.appendChild(t)},HCompElement.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};var CompExpressionInterface=function(t){function e(e){for(var n=0,r=t.layers.length;n<r;){if(t.layers[n].nm===e||t.layers[n].ind===e)return t.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e},Expressions={initExpressions:function(t){var e=0,n=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0==(e-=1)&&function(){var t,e=n.length;for(t=0;t<e;t+=1)n[t].release();n.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===n.indexOf(t)&&n.push(t)}}},MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}return Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(e){var n,r=createSizedArray(e.viewData.length),i=e.viewData.length;for(n=0;n<i;n+=1)r[n]=new t(e.viewData[n],e.masksProperties[n]);return function(t){for(n=0;n<i;){if(e.masksProperties[n].nm===t)return r[n];n+=1}return null}}}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function n(t,e,n){Object.defineProperty(t,"velocity",{get:function(){return e.getVelocityAtTime(e.comp.currentFrame)}}),t.numKeys=e.keyframes?e.keyframes.length:0,t.key=function(r){if(!t.numKeys)return 0;var i;i="s"in e.keyframes[r-1]?e.keyframes[r-1].s:"e"in e.keyframes[r-2]?e.keyframes[r-2].e:e.keyframes[r-2].s;var s="unidimensional"===n?new Number(i):Object.assign({},i);return s.time=e.keyframes[r-1].t/e.elem.comp.globalData.frameRate,s.value="unidimensional"===n?i[0]:i,s},t.valueAtTime=e.getValueAtTime,t.speedAtTime=e.getSpeedAtTime,t.velocityAtTime=e.getVelocityAtTime,t.propertyGroup=e.propertyGroup}function r(){return t}return function(i){return i?"unidimensional"===i.propType?function(e){e&&"pv"in e||(e=t);var r=1/e.mult,i=e.pv*r,s=new Number(i);return s.value=i,n(s,e,"unidimensional"),function(){return e.k&&e.getValue(),s.value!==(i=e.v*r)&&((s=new Number(i)).value=i,n(s,e,"unidimensional")),s}}(i):function(t){t&&"pv"in t||(t=e);var r=1/t.mult,i=t.data&&t.data.l||t.pv.length,s=createTypedArray("float32",i),o=createTypedArray("float32",i);return s.value=o,n(s,t,"multidimensional"),function(){t.k&&t.getValue();for(var e=0;e<i;e+=1)o[e]=t.v[e]*r,s[e]=o[e];return s}}(i):r}}(),TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}var n,r,i,s;return Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p?s=ExpressionPropertyInterface(t.p):(n=ExpressionPropertyInterface(t.px),r=ExpressionPropertyInterface(t.py),t.pz&&(i=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?s():[n(),r(),i?i():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},LayerExpressionInterface=function(){function t(t){var e=new Matrix;return void 0!==t?this._elem.finalTransform.mProp.getValueAtTime(t).clone(e):this._elem.finalTransform.mProp.applyToMatrix(e),e}function e(t,e){var n=this.getMatrix(e);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.applyPoint(n,t)}function n(t,e){var n=this.getMatrix(e);return this.applyPoint(n,t)}function r(t,e){var n=this.getMatrix(e);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.invertPoint(n,t)}function i(t,e){var n=this.getMatrix(e);return this.invertPoint(n,t)}function s(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t)}return t.applyToPointArray(e[0],e[1],e[2]||0)}function o(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t)}return t.inversePoint(e)}function a(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function u(){return[1,1,1,1]}return function(c){var l;function h(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return h.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return l;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return h.effect;case"ADBE Text Properties":return h.textInterface;default:return null}}h.getMatrix=t,h.invertPoint=o,h.applyPoint=s,h.toWorld=n,h.toWorldVec=e,h.fromWorld=i,h.fromWorldVec=r,h.toComp=n,h.fromComp=a,h.sampleImage=u,h.sourceRectAtTime=c.sourceRectAtTime.bind(c),h._elem=c;var p=getDescriptor(l=TransformExpressionInterface(c.finalTransform.mProp),"anchorPoint");return Object.defineProperties(h,{hasParent:{get:function(){return c.hierarchy.length}},parent:{get:function(){return c.hierarchy[0].layerInterface}},rotation:getDescriptor(l,"rotation"),scale:getDescriptor(l,"scale"),position:getDescriptor(l,"position"),opacity:getDescriptor(l,"opacity"),anchorPoint:p,anchor_point:p,transform:{get:function(){return l}},active:{get:function(){return c.isInRange}}}),h.startTime=c.data.st,h.index=c.data.ind,h.source=c.data.refId,h.height=0===c.data.ty?c.data.h:100,h.width=0===c.data.ty?c.data.w:100,h.inPoint=c.data.ip/c.comp.globalData.frameRate,h.outPoint=c.data.op/c.comp.globalData.frameRate,h._name=c.data.nm,h.registerMaskInterface=function(t){h.mask=new MaskManagerInterface(t,c)},h.registerEffectsInterface=function(t){h.effect=t},h}}(),propertyGroupFactory=function(t,e){return function(n){return(n=void 0===n?1:n)<=0?t:e(n-1)}},PropertyInterface=function(t,e){var n={_name:t};return function(t){return(t=void 0===t?1:t)<=0?n:e(t-1)}},EffectsExpressionInterface=function(){function t(n,r,i,s){function o(t){for(var e=n.ef,r=0,i=e.length;r<i;){if(t===e[r].nm||t===e[r].mn||t===e[r].ix)return 5===e[r].ty?c[r]:c[r]();r+=1}throw new Error}var a,u=propertyGroupFactory(o,i),c=[],l=n.ef.length;for(a=0;a<l;a+=1)c.push(5===n.ef[a].ty?t(n.ef[a],r.effectElements[a],r.effectElements[a].propertyGroup,s):e(r.effectElements[a],n.ef[a].ty,s,u));return"ADBE Color Control"===n.mn&&Object.defineProperty(o,"color",{get:function(){return c[0]()}}),Object.defineProperties(o,{numProperties:{get:function(){return n.np}},_name:{value:n.nm},propertyGroup:{value:u}}),o.active=o.enabled=0!==n.en,o}function e(t,e,n,r){var i=ExpressionPropertyInterface(t.p);return t.p.setGroupProperty&&t.p.setGroupProperty(PropertyInterface("",r)),function(){return 10===e?n.comp.compInterface(t.p.v):i()}}return{createEffectsInterface:function(e,n){if(e.effectsManager){var r,i=[],s=e.data.ef,o=e.effectsManager.effectElements.length;for(r=0;r<o;r+=1)i.push(t(s[r],e.effectsManager.effectElements[r],n,e));var a=e.data.ef||[],u=function(t){for(r=0,o=a.length;r<o;){if(t===a[r].nm||t===a[r].mn||t===a[r].ix)return i[r];r+=1}return null};return Object.defineProperty(u,"numProperties",{get:function(){return a.length}}),u}return null}}}(),ShapePathInterface=function(t,e,n){var r=e.sh;function i(t){return"Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t?i.path:null}var s=propertyGroupFactory(i,n);return r.setGroupProperty(PropertyInterface("Path",s)),Object.defineProperties(i,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:n}}),i},ShapeExpressionInterface=function(){function t(t,o,p){var f,d=[],m=t?t.length:0;for(f=0;f<m;f+=1)"gr"===t[f].ty?d.push(e(t[f],o[f],p)):"fl"===t[f].ty?d.push(n(t[f],o[f],p)):"st"===t[f].ty?d.push(i(t[f],o[f],p)):"tm"===t[f].ty?d.push(s(t[f],o[f],p)):"tr"===t[f].ty||d.push("el"===t[f].ty?a(t[f],o[f],p):"sr"===t[f].ty?u(t[f],o[f],p):"sh"===t[f].ty?ShapePathInterface(t[f],o[f],p):"rc"===t[f].ty?c(t[f],o[f],p):"rd"===t[f].ty?l(t[f],o[f],p):"rp"===t[f].ty?h(t[f],o[f],p):"gf"===t[f].ty?r(t[f],o[f],p):function(){return null});return d}function e(e,n,r){var i=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return i.content;default:return i.transform}};i.propertyGroup=propertyGroupFactory(i,r);var s=function(e,n,r){var i,s=function(t){for(var e=0,n=i.length;e<n;){if(i[e]._name===t||i[e].mn===t||i[e].propertyIndex===t||i[e].ix===t||i[e].ind===t)return i[e];e+=1}return"number"==typeof t?i[t-1]:null};s.propertyGroup=propertyGroupFactory(s,r),i=t(e.it,n.it,s.propertyGroup),s.numProperties=i.length;var a=o(e.it[e.it.length-1],n.it[n.it.length-1],s.propertyGroup);return s.transform=a,s.propertyIndex=e.cix,s._name=e.nm,s}(e,n,i.propertyGroup),a=o(e.it[e.it.length-1],n.it[n.it.length-1],i.propertyGroup);return i.content=s,i.transform=a,Object.defineProperty(i,"_name",{get:function(){return e.nm}}),i.numProperties=e.np,i.propertyIndex=e.ix,i.nm=e.nm,i.mn=e.mn,i}function n(t,e,n){function r(t){return"Color"===t||"color"===t?r.color:"Opacity"===t||"opacity"===t?r.opacity:null}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",n)),e.o.setGroupProperty(PropertyInterface("Opacity",n)),r}function r(t,e,n){function r(t){return"Start Point"===t||"start point"===t?r.startPoint:"End Point"===t||"end point"===t?r.endPoint:"Opacity"===t||"opacity"===t?r.opacity:null}return Object.defineProperties(r,{startPoint:{get:ExpressionPropertyInterface(e.s)},endPoint:{get:ExpressionPropertyInterface(e.e)},opacity:{get:ExpressionPropertyInterface(e.o)},type:{get:function(){return"a"}},_name:{value:t.nm},mn:{value:t.mn}}),e.s.setGroupProperty(PropertyInterface("Start Point",n)),e.e.setGroupProperty(PropertyInterface("End Point",n)),e.o.setGroupProperty(PropertyInterface("Opacity",n)),r}function i(t,e,n){var r,i=propertyGroupFactory(c,n),s=propertyGroupFactory(u,i);function o(n){Object.defineProperty(u,t.d[n].nm,{get:ExpressionPropertyInterface(e.d.dataProps[n].p)})}var a=t.d?t.d.length:0,u={};for(r=0;r<a;r+=1)o(r),e.d.dataProps[r].p.setGroupProperty(s);function c(t){return"Color"===t||"color"===t?c.color:"Opacity"===t||"opacity"===t?c.opacity:"Stroke Width"===t||"stroke width"===t?c.strokeWidth:null}return Object.defineProperties(c,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},strokeWidth:{get:ExpressionPropertyInterface(e.w)},dash:{get:function(){return u}},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",i)),e.o.setGroupProperty(PropertyInterface("Opacity",i)),e.w.setGroupProperty(PropertyInterface("Stroke Width",i)),c}function s(t,e,n){function r(e){return e===t.e.ix||"End"===e||"end"===e?r.end:e===t.s.ix?r.start:e===t.o.ix?r.offset:null}var i=propertyGroupFactory(r,n);return r.propertyIndex=t.ix,e.s.setGroupProperty(PropertyInterface("Start",i)),e.e.setGroupProperty(PropertyInterface("End",i)),e.o.setGroupProperty(PropertyInterface("Offset",i)),r.propertyIndex=t.ix,r.propertyGroup=n,Object.defineProperties(r,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),r.mn=t.mn,r}function o(t,e,n){function r(e){return t.a.ix===e||"Anchor Point"===e?r.anchorPoint:t.o.ix===e||"Opacity"===e?r.opacity:t.p.ix===e||"Position"===e?r.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?r.rotation:t.s.ix===e||"Scale"===e?r.scale:t.sk&&t.sk.ix===e||"Skew"===e?r.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?r.skewAxis:null}var i=propertyGroupFactory(r,n);return e.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",i)),e.transform.mProps.p.setGroupProperty(PropertyInterface("Position",i)),e.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",i)),e.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",i)),e.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",i)),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",i)),e.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",i))),e.transform.op.setGroupProperty(PropertyInterface("Opacity",i)),Object.defineProperties(r,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),r.ty="tr",r.mn=t.mn,r.propertyGroup=n,r}function a(t,e,n){function r(e){return t.p.ix===e?r.position:t.s.ix===e?r.size:null}var i=propertyGroupFactory(r,n);r.propertyIndex=t.ix;var s="tm"===e.sh.ty?e.sh.prop:e.sh;return s.s.setGroupProperty(PropertyInterface("Size",i)),s.p.setGroupProperty(PropertyInterface("Position",i)),Object.defineProperties(r,{size:{get:ExpressionPropertyInterface(s.s)},position:{get:ExpressionPropertyInterface(s.p)},_name:{value:t.nm}}),r.mn=t.mn,r}function u(t,e,n){function r(e){return t.p.ix===e?r.position:t.r.ix===e?r.rotation:t.pt.ix===e?r.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?r.outerRadius:t.os.ix===e?r.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?r.innerRoundness:null:r.innerRadius}var i=propertyGroupFactory(r,n),s="tm"===e.sh.ty?e.sh.prop:e.sh;return r.propertyIndex=t.ix,s.or.setGroupProperty(PropertyInterface("Outer Radius",i)),s.os.setGroupProperty(PropertyInterface("Outer Roundness",i)),s.pt.setGroupProperty(PropertyInterface("Points",i)),s.p.setGroupProperty(PropertyInterface("Position",i)),s.r.setGroupProperty(PropertyInterface("Rotation",i)),t.ir&&(s.ir.setGroupProperty(PropertyInterface("Inner Radius",i)),s.is.setGroupProperty(PropertyInterface("Inner Roundness",i))),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(s.p)},rotation:{get:ExpressionPropertyInterface(s.r)},points:{get:ExpressionPropertyInterface(s.pt)},outerRadius:{get:ExpressionPropertyInterface(s.or)},outerRoundness:{get:ExpressionPropertyInterface(s.os)},innerRadius:{get:ExpressionPropertyInterface(s.ir)},innerRoundness:{get:ExpressionPropertyInterface(s.is)},_name:{value:t.nm}}),r.mn=t.mn,r}function c(t,e,n){function r(e){return t.p.ix===e?r.position:t.r.ix===e?r.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?r.size:null}var i=propertyGroupFactory(r,n),s="tm"===e.sh.ty?e.sh.prop:e.sh;return r.propertyIndex=t.ix,s.p.setGroupProperty(PropertyInterface("Position",i)),s.s.setGroupProperty(PropertyInterface("Size",i)),s.r.setGroupProperty(PropertyInterface("Rotation",i)),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(s.p)},roundness:{get:ExpressionPropertyInterface(s.r)},size:{get:ExpressionPropertyInterface(s.s)},_name:{value:t.nm}}),r.mn=t.mn,r}function l(t,e,n){function r(e){return t.r.ix===e||"Round Corners 1"===e?r.radius:null}var i=propertyGroupFactory(r,n),s=e;return r.propertyIndex=t.ix,s.rd.setGroupProperty(PropertyInterface("Radius",i)),Object.defineProperties(r,{radius:{get:ExpressionPropertyInterface(s.rd)},_name:{value:t.nm}}),r.mn=t.mn,r}function h(t,e,n){function r(e){return t.c.ix===e||"Copies"===e?r.copies:t.o.ix===e||"Offset"===e?r.offset:null}var i=propertyGroupFactory(r,n),s=e;return r.propertyIndex=t.ix,s.c.setGroupProperty(PropertyInterface("Copies",i)),s.o.setGroupProperty(PropertyInterface("Offset",i)),Object.defineProperties(r,{copies:{get:ExpressionPropertyInterface(s.c)},offset:{get:ExpressionPropertyInterface(s.o)},_name:{value:t.nm}}),r.mn=t.mn,r}return function(e,n,r){var i;function s(t){if("number"==typeof t)return 0===(t=void 0===t?1:t)?r:i[t-1];for(var e=0,n=i.length;e<n;){if(i[e]._name===t)return i[e];e+=1}return null}return s.propertyGroup=propertyGroupFactory(s,function(){return r}),i=t(e,n,s.propertyGroup),s.numProperties=i.length,s._name="Contents",s}}(),TextExpressionInterface=function(t){var e,n;function r(t){switch(t){case"ADBE Text Document":return r.sourceText;default:return null}}return Object.defineProperty(r,"sourceText",{get:function(){t.textProperty.getValue();var r=t.textProperty.currentData.t;return r!==e&&(t.textProperty.currentData.t=e,(n=new String(r)).value=r||new String(r)),n}}),r};function _typeof$2(t){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var FootageInterface=(dataInterfaceFactory=function(t){function e(t){return"Outline"===t?e.outlineInterface():null}return e._name="Outline",e.outlineInterface=function(t){var e="",n=t.getFootageData();function r(t){if(n[t])return e=t,"object"===_typeof$2(n=n[t])?r:n;var i=t.indexOf(e);if(-1!==i){var s=parseInt(t.substr(i+e.length),10);return"object"===_typeof$2(n=n[s])?r:n}return""}return function(){return e="",n=t.getFootageData(),r}}(t),e},function(t){function e(t){return"Data"===t?e.dataInterface:null}return e._name="Data",e.dataInterface=dataInterfaceFactory(t),e}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(t){return interfaces[t]||null}function _typeof$1(t){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function seedRandom(t,e){var n=this,r=256,i=e.pow(r,6),s=e.pow(2,52),o=2*s,a=255;function u(t){var e,n=t.length,i=this,s=0,o=i.i=i.j=0,u=i.S=[];for(n||(t=[n++]);s<r;)u[s]=s++;for(s=0;s<r;s++)u[s]=u[o=a&o+t[s%n]+(e=u[s])],u[o]=e;i.g=function(t){for(var e,n=0,s=i.i,o=i.j,u=i.S;t--;)e=u[s=a&s+1],n=n*r+u[a&(u[s]=u[o=a&o+e])+(u[o]=e)];return i.i=s,i.j=o,n}}function c(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function l(t,e){var n,r=[],i=_typeof$1(t);if(e&&"object"==i)for(n in t)try{r.push(l(t[n],e-1))}catch(s){}return r.length?r:"string"==i?t:t+"\0"}function h(t,e){for(var n,r=t+"",i=0;i<r.length;)e[a&i]=a&(n^=19*e[a&i])+r.charCodeAt(i++);return p(e)}function p(t){return String.fromCharCode.apply(0,t)}e.seedrandom=function(a,f,d){var m=[],g=h(l((f=!0===f?{entropy:!0}:f||{}).entropy?[a,p(t)]:null===a?function(){try{var e=new Uint8Array(r);return(n.crypto||n.msCrypto).getRandomValues(e),p(e)}catch(o){var i=n.navigator,s=i&&i.plugins;return[+new Date,n,s,n.screen,p(t)]}}():a,3),m),v=new u(m),y=function(){for(var t=v.g(6),e=i,n=0;t<s;)t=(t+n)*r,e*=r,n=v.g(1);for(;t>=o;)t/=2,e/=2,n>>>=1;return(t+n)/e};return y.int32=function(){return 0|v.g(4)},y.quick=function(){return v.g(4)/4294967296},y.double=y,h(p(v.S),t),(f.pass||d||function(t,n,r,i){return i&&(i.S&&c(i,v),t.state=function(){return c(v,{})}),r?(e.random=t,n):t})(y,g,"global"in f?f.global:this==e,f.state)},h(e.random(),t)}function initialize$2(t){seedRandom([],t)}var propTypes={SHAPE:"shape"};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return"number"===t||"boolean"===t||"string"===t||e instanceof Number}function $bm_neg(t){var e=_typeof(t);if("number"===e||"boolean"===e||t instanceof Number)return-t;if($bm_isInstanceOfArray(t)){var n,r=t.length,i=[];for(n=0;n<r;n+=1)i[n]=-t[n];return i}return t.propType?t.v:-t}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var n=_typeof(t),r=_typeof(e);if("string"===n||"string"===r)return t+e;if(isNumerable(n,t)&&isNumerable(r,e))return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e))return(t=t.slice(0))[0]+=e,t;if(isNumerable(n,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var i=0,s=t.length,o=e.length,a=[];i<s||i<o;)a[i]=("number"==typeof t[i]||t[i]instanceof Number)&&("number"==typeof e[i]||e[i]instanceof Number)?t[i]+e[i]:void 0===e[i]?t[i]:t[i]||e[i],i+=1;return a}return 0}var add=sum;function sub(t,e){var n=_typeof(t),r=_typeof(e);if(isNumerable(n,t)&&isNumerable(r,e))return"string"===n&&(t=parseInt(t,10)),"string"===r&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e))return(t=t.slice(0))[0]-=e,t;if(isNumerable(n,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var i=0,s=t.length,o=e.length,a=[];i<s||i<o;)a[i]=("number"==typeof t[i]||t[i]instanceof Number)&&("number"==typeof e[i]||e[i]instanceof Number)?t[i]-e[i]:void 0===e[i]?t[i]:t[i]||e[i],i+=1;return a}return 0}function mul(t,e){var n,r,i,s=_typeof(t),o=_typeof(e);if(isNumerable(s,t)&&isNumerable(o,e))return t*e;if($bm_isInstanceOfArray(t)&&isNumerable(o,e)){for(n=createTypedArray("float32",i=t.length),r=0;r<i;r+=1)n[r]=t[r]*e;return n}if(isNumerable(s,t)&&$bm_isInstanceOfArray(e)){for(n=createTypedArray("float32",i=e.length),r=0;r<i;r+=1)n[r]=t*e[r];return n}return 0}function div(t,e){var n,r,i,s=_typeof(t),o=_typeof(e);if(isNumerable(s,t)&&isNumerable(o,e))return t/e;if($bm_isInstanceOfArray(t)&&isNumerable(o,e)){for(n=createTypedArray("float32",i=t.length),r=0;r<i;r+=1)n[r]=t[r]/e;return n}if(isNumerable(s,t)&&$bm_isInstanceOfArray(e)){for(n=createTypedArray("float32",i=e.length),r=0;r<i;r+=1)n[r]=t/e[r];return n}return 0}function mod(t,e){return"string"==typeof t&&(t=parseInt(t,10)),"string"==typeof e&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,n){if(e>n){var r=n;n=e,e=r}return Math.min(Math.max(t,e),n)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"==typeof t||t instanceof Number)return Math.abs(t-(e=e||0));var n;e||(e=helperLengthArray);var r=Math.min(t.length,e.length),i=0;for(n=0;n<r;n+=1)i+=Math.pow(e[n]-t[n],2);return Math.sqrt(i)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e,n,r=t[0],i=t[1],s=t[2],o=Math.max(r,i,s),a=Math.min(r,i,s),u=(o+a)/2;if(o===a)e=0,n=0;else{var c=o-a;switch(n=u>.5?c/(2-o-a):c/(o+a),o){case r:e=(i-s)/c+(i<s?6:0);break;case i:e=(s-r)/c+2;break;case s:e=(r-i)/c+4}e/=6}return[e,n,u,t[3]]}function hue2rgb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hslToRgb(t){var e,n,r,i=t[0],s=t[1],o=t[2];if(0===s)e=o,r=o,n=o;else{var a=o<.5?o*(1+s):o+s-o*s,u=2*o-a;e=hue2rgb(u,a,i+1/3),n=hue2rgb(u,a,i),r=hue2rgb(u,a,i-1/3)}return[e,n,r,t[3]]}function linear(t,e,n,r,i){if(void 0!==r&&void 0!==i||(r=e,i=n,e=0,n=1),n<e){var s=n;n=e,e=s}if(t<=e)return r;if(t>=n)return i;var o,a=n===e?0:(t-e)/(n-e);if(!r.length)return r+(i-r)*a;var u=r.length,c=createTypedArray("float32",u);for(o=0;o<u;o+=1)c[o]=r[o]+(i[o]-r[o])*a;return c}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var n,r=e.length;t||(t=createTypedArray("float32",r));var i=createTypedArray("float32",r),s=BMMath.random();for(n=0;n<r;n+=1)i[n]=t[n]+s*(e[n]-t[n]);return i}return void 0===t&&(t=0),t+BMMath.random()*(e-t)}function createPath(t,e,n,r){var i,s=t.length,o=shapePool.newElement();o.setPathData(!!r,s);var a,u,c=[0,0];for(i=0;i<s;i+=1)o.setTripleAt(t[i][0],t[i][1],(u=n&&n[i]?n[i]:c)[0]+t[i][0],u[1]+t[i][1],(a=e&&e[i]?e[i]:c)[0]+t[i][0],a[1]+t[i][1],i,!0);return o}function initiateExpression(elem,data,property){function noOp(t){return t}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=(function(t,e){var n,r,i=this.pv.length?this.pv.length:1,s=createTypedArray("float32",i),o=Math.floor(5*time);for(n=0,r=0;n<o;){for(r=0;r<i;r+=1)s[r]+=-e+2*e*BMMath.random();n+=1}var a=5*time,u=a-Math.floor(a),c=createTypedArray("float32",i);if(i>1){for(r=0;r<i;r+=1)c[r]=this.pv[r]+s[r]+(-e+2*e*BMMath.random())*u;return c}return this.pv+s[0]+(-e+2*e*BMMath.random())*u}).bind(this);function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(t,e){var n=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],r=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,r,0]}function easeOut(t,e,n,r,i){return applyEase(easeOutBez,t,e,n,r,i)}function easeIn(t,e,n,r,i){return applyEase(easeInBez,t,e,n,r,i)}function ease(t,e,n,r,i){return applyEase(easeInOutBez,t,e,n,r,i)}function applyEase(t,e,n,r,i,s){void 0===i?(i=n,s=r):e=(e-n)/(r-n),e>1?e=1:e<0&&(e=0);var o=t(e);if($bm_isInstanceOfArray(i)){var a,u=i.length,c=createTypedArray("float32",u);for(a=0;a<u;a+=1)c[a]=(s[a]-i[a])*o+i[a];return c}return(s-i)*o+i}function nearestKey(t){var e,n,r,i=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(n=-1,(t*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,r=data.k[0].t;else{for(e=0;e<i-1;e+=1){if(t===data.k[e].t){n=e+1,r=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(n=e+2,r=data.k[e+1].t):(n=e+1,r=data.k[e].t);break}}-1===n&&(n=e+1,r=data.k[e].t)}else n=0,r=0;var s={};return s.index=n,s.time=r/elem.comp.globalData.frameRate,s}function key(t){var e,n,r;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+t);e={time:data.k[t-=1].t/elem.comp.globalData.frameRate,value:[]};var i=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(r=i.length,n=0;n<r;n+=1)e[n]=i[n],e.value[n]=i[n];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||0===t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return"string"==typeof value?void 0===e?value.substring(t):value.substring(t,e):""}function substr(t,e){return"string"==typeof value?void 0===e?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=0===t?0:Math.floor(time*t)/t,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisComp=elem.comp.compInterface,toWorld=(thisLayer=elem.layerInterface).toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers={searchExpressions:function(t,e,n){e.x&&(n.k=!0,n.x=!0,n.initiateExpression=ExpressionManager.initiateExpression,n.effectsSequence.push(n.initiateExpression(t,e,n).bind(n)))},getSpeedAtTime:function(t){var e=this.getValueAtTime(t),n=this.getValueAtTime(t+-.01),r=0;if(e.length){var i;for(i=0;i<e.length;i+=1)r+=Math.pow(n[i]-e[i],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(t){if(void 0!==this.vel)return this.vel;var e,n,r=-.001,i=this.getValueAtTime(t),s=this.getValueAtTime(t+r);if(i.length)for(e=createTypedArray("float32",i.length),n=0;n<i.length;n+=1)e[n]=(s[n]-i[n])/r;else e=(s-i)/r;return e},getValueAtTime:function(t){return t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}};function addPropertyDecorator(){function t(t,e,n){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var r,i,s,o,a,u=this.comp.renderedFrame,c=this.keyframes,l=c[c.length-1].t;if(u<=l)return this.pv;if(n?i=l-(r=e?Math.abs(l-this.elem.comp.globalData.frameRate*e):Math.max(0,l-this.elem.data.ip)):((!e||e>c.length-1)&&(e=c.length-1),r=l-(i=c[c.length-1-e].t)),"pingpong"===t){if(Math.floor((u-i)/r)%2!=0)return this.getValueAtTime((r-(u-i)%r+i)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var h=this.getValueAtTime(i/this.comp.globalData.frameRate,0),p=this.getValueAtTime(l/this.comp.globalData.frameRate,0),f=this.getValueAtTime(((u-i)%r+i)/this.comp.globalData.frameRate,0),d=Math.floor((u-i)/r);if(this.pv.length){for(o=(a=new Array(h.length)).length,s=0;s<o;s+=1)a[s]=(p[s]-h[s])*d+f[s];return a}return(p-h)*d+f}if("continue"===t){var m=this.getValueAtTime(l/this.comp.globalData.frameRate,0),g=this.getValueAtTime((l-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(o=(a=new Array(m.length)).length,s=0;s<o;s+=1)a[s]=m[s]+(u-l)/this.comp.globalData.frameRate*(m[s]-g[s])/5e-4;return a}return m+(u-l)/.001*(m-g)}}return this.getValueAtTime(((u-i)%r+i)/this.comp.globalData.frameRate,0)}function e(t,e,n){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var r,i,s,o,a,u=this.comp.renderedFrame,c=this.keyframes,l=c[0].t;if(u>=l)return this.pv;if(n?i=l+(r=e?Math.abs(this.elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-l)):((!e||e>c.length-1)&&(e=c.length-1),r=(i=c[e].t)-l),"pingpong"===t){if(Math.floor((l-u)/r)%2==0)return this.getValueAtTime(((l-u)%r+l)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var h=this.getValueAtTime(l/this.comp.globalData.frameRate,0),p=this.getValueAtTime(i/this.comp.globalData.frameRate,0),f=this.getValueAtTime((r-(l-u)%r+l)/this.comp.globalData.frameRate,0),d=Math.floor((l-u)/r)+1;if(this.pv.length){for(o=(a=new Array(h.length)).length,s=0;s<o;s+=1)a[s]=f[s]-(p[s]-h[s])*d;return a}return f-(p-h)*d}if("continue"===t){var m=this.getValueAtTime(l/this.comp.globalData.frameRate,0),g=this.getValueAtTime((l+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(o=(a=new Array(m.length)).length,s=0;s<o;s+=1)a[s]=m[s]+(m[s]-g[s])*(l-u)/.001;return a}return m+(m-g)*(l-u)/.001}}return this.getValueAtTime((r-((l-u)%r+l))/this.comp.globalData.frameRate,0)}function n(t,e){if(!this.k)return this.pv;if(t=.5*(t||.4),(e=Math.floor(e||5))<=1)return this.pv;var n,r,i=this.comp.renderedFrame/this.comp.globalData.frameRate,s=i-t,o=e>1?(i+t-s)/(e-1):1,a=0,u=0;for(n=this.pv.length?createTypedArray("float32",this.pv.length):0;a<e;){if(r=this.getValueAtTime(s+a*o),this.pv.length)for(u=0;u<this.pv.length;u+=1)n[u]+=r[u];else n+=r;a+=1}if(this.pv.length)for(u=0;u<this.pv.length;u+=1)n[u]/=e;else n/=e;return n}function r(t){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var e=this._transformCachingAtTime.v;if(e.cloneFromProps(this.pre.props),this.appliedTransformations<1){var n=this.a.getValueAtTime(t);e.translate(-n[0]*this.a.mult,-n[1]*this.a.mult,n[2]*this.a.mult)}if(this.appliedTransformations<2){var r=this.s.getValueAtTime(t);e.scale(r[0]*this.s.mult,r[1]*this.s.mult,r[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var i=this.sk.getValueAtTime(t),s=this.sa.getValueAtTime(t);e.skewFromAxis(-i*this.sk.mult,s*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var o=this.r.getValueAtTime(t);e.rotate(-o*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var a=this.rz.getValueAtTime(t),u=this.ry.getValueAtTime(t),c=this.rx.getValueAtTime(t),l=this.or.getValueAtTime(t);e.rotateZ(-a*this.rz.mult).rotateY(u*this.ry.mult).rotateX(c*this.rx.mult).rotateZ(-l[2]*this.or.mult).rotateY(l[1]*this.or.mult).rotateX(l[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var h=this.px.getValueAtTime(t),p=this.py.getValueAtTime(t);if(this.data.p.z){var f=this.pz.getValueAtTime(t);e.translate(h*this.px.mult,p*this.py.mult,-f*this.pz.mult)}else e.translate(h*this.px.mult,p*this.py.mult,0)}else{var d=this.p.getValueAtTime(t);e.translate(d[0]*this.p.mult,d[1]*this.p.mult,-d[2]*this.p.mult)}return e}function i(){return this.v.clone(new Matrix)}var s=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,e,n){var o=s(t,e,n);return o.getValueAtTime=o.dynamicProperties.length?r.bind(o):i.bind(o),o.setGroupProperty=expressionHelpers.setGroupProperty,o};var o=PropertyFactory.getProp;PropertyFactory.getProp=function(r,i,s,a,u){var c=o(r,i,s,a,u);c.getValueAtTime=c.kf?expressionHelpers.getValueAtTime.bind(c):expressionHelpers.getStaticValueAtTime.bind(c),c.setGroupProperty=expressionHelpers.setGroupProperty,c.loopOut=t,c.loopIn=e,c.smooth=n,c.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(c),c.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(c),c.numKeys=1===i.a?i.k.length:0,c.propertyIndex=i.ix;var l=0;return 0!==s&&(l=createTypedArray("float32",1===i.a?i.k[0].s.length:i.k.length)),c._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:l},expressionHelpers.searchExpressions(r,i,c),c.k&&u.addDynamicProperty(c),c};var a=ShapePropertyFactory.getConstructorFunction(),u=ShapePropertyFactory.getKeyframedConstructorFunction();function c(){}c.prototype={vertices:function(t,e){this.k&&this.getValue();var n,r=this.v;void 0!==e&&(r=this.getValueAtTime(e,0));var i=r._length,s=r[t],o=r.v,a=createSizedArray(i);for(n=0;n<i;n+=1)a[n]="i"===t||"o"===t?[s[n][0]-o[n][0],s[n][1]-o[n][1]]:[s[n][0],s[n][1]];return a},points:function(t){return this.vertices("v",t)},inTangents:function(t){return this.vertices("i",t)},outTangents:function(t){return this.vertices("o",t)},isClosed:function(){return this.v.c},pointOnPath:function(t,e){var n=this.v;void 0!==e&&(n=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(n));for(var r,i=this._segmentsLength,s=i.lengths,o=i.totalLength*t,a=0,u=s.length,c=0;a<u;){if(c+s[a].addedLength>o){var l=n.c&&a===u-1?0:a+1;r=bez.getPointInSegment(n.v[a],n.v[l],n.o[a],n.i[l],(o-c)/s[a].addedLength,s[a]);break}c+=s[a].addedLength,a+=1}return r||(r=n.c?[n.v[0][0],n.v[0][1]]:[n.v[n._length-1][0],n.v[n._length-1][1]]),r},vectorOnPath:function(t,e,n){1==t?t=this.v.c:0==t&&(t=.999);var r=this.pointOnPath(t,e),i=this.pointOnPath(t+.001,e),s=i[0]-r[0],o=i[1]-r[1],a=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));return 0===a?[0,0]:"tangent"===n?[s/a,o/a]:[-o/a,s/a]},tangentOnPath:function(t,e){return this.vectorOnPath(t,e,"tangent")},normalOnPath:function(t,e){return this.vectorOnPath(t,e,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([c],a),extendPrototype([c],u),u.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},u.prototype.initiateExpression=ExpressionManager.initiateExpression;var l=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,n,r,i){var s=l(t,e,n,r,i);return s.propertyIndex=e.ix,s.lock=!1,3===n?expressionHelpers.searchExpressions(t,e.pt,s):4===n&&expressionHelpers.searchExpressions(t,e.ks,s),s.k&&t.addDynamicProperty(s),s}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(t,e){var n=this.calculateExpression(e);if(t.t!==n){var r={};return this.copyData(r,t),r.t=n.toString(),r.__complete=!1,r}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}function SVGTintFilter(t,e,n,r,i){this.filterManager=e;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","linearRGB"),s.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),s.setAttribute("result",r+"_tint_1"),t.appendChild(s),(s=createNS("feColorMatrix")).setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),s.setAttribute("result",r+"_tint_2"),t.appendChild(s),this.matrixFilter=s;var o=this.createMergeNode(r,[i,r+"_tint_1",r+"_tint_2"]);t.appendChild(o)}function SVGFillFilter(t,e,n,r){this.filterManager=e;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result",r),t.appendChild(i),this.matrixFilter=i}function SVGStrokeEffect(t,e,n){this.initialized=!1,this.filterManager=e,this.elem=n,this.paths=[]}function SVGTritoneFilter(t,e,n,r){this.filterManager=e;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),t.appendChild(i);var s=createNS("feComponentTransfer");s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",r),this.matrixFilter=s;var o=createNS("feFuncR");o.setAttribute("type","table"),s.appendChild(o),this.feFuncR=o;var a=createNS("feFuncG");a.setAttribute("type","table"),s.appendChild(a),this.feFuncG=a;var u=createNS("feFuncB");u.setAttribute("type","table"),s.appendChild(u),this.feFuncB=u,t.appendChild(s)}function SVGProLevelsFilter(t,e,n,r){this.filterManager=e;var i=this.filterManager.effectElements,s=createNS("feComponentTransfer");(i[10].p.k||0!==i[10].p.v||i[11].p.k||1!==i[11].p.v||i[12].p.k||1!==i[12].p.v||i[13].p.k||0!==i[13].p.v||i[14].p.k||1!==i[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",s)),(i[17].p.k||0!==i[17].p.v||i[18].p.k||1!==i[18].p.v||i[19].p.k||1!==i[19].p.v||i[20].p.k||0!==i[20].p.v||i[21].p.k||1!==i[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",s)),(i[24].p.k||0!==i[24].p.v||i[25].p.k||1!==i[25].p.v||i[26].p.k||1!==i[26].p.v||i[27].p.k||0!==i[27].p.v||i[28].p.k||1!==i[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",s)),(i[31].p.k||0!==i[31].p.v||i[32].p.k||1!==i[32].p.v||i[33].p.k||1!==i[33].p.v||i[34].p.k||0!==i[34].p.v||i[35].p.k||1!==i[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",s)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(s.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(s)),(i[3].p.k||0!==i[3].p.v||i[4].p.k||1!==i[4].p.v||i[5].p.k||1!==i[5].p.v||i[6].p.k||0!==i[6].p.v||i[7].p.k||1!==i[7].p.v)&&((s=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",r),t.appendChild(s),this.feFuncRComposed=this.createFeFunc("feFuncR",s),this.feFuncGComposed=this.createFeFunc("feFuncG",s),this.feFuncBComposed=this.createFeFunc("feFuncB",s))}function SVGDropShadowEffect(t,e,n,r,i){var s=e.container.globalData.renderConfig.filterSize,o=e.data.fs||s;t.setAttribute("x",o.x||s.x),t.setAttribute("y",o.y||s.y),t.setAttribute("width",o.width||s.width),t.setAttribute("height",o.height||s.height),this.filterManager=e;var a=createNS("feGaussianBlur");a.setAttribute("in","SourceAlpha"),a.setAttribute("result",r+"_drop_shadow_1"),a.setAttribute("stdDeviation","0"),this.feGaussianBlur=a,t.appendChild(a);var u=createNS("feOffset");u.setAttribute("dx","25"),u.setAttribute("dy","0"),u.setAttribute("in",r+"_drop_shadow_1"),u.setAttribute("result",r+"_drop_shadow_2"),this.feOffset=u,t.appendChild(u);var c=createNS("feFlood");c.setAttribute("flood-color","#00ff00"),c.setAttribute("flood-opacity","1"),c.setAttribute("result",r+"_drop_shadow_3"),this.feFlood=c,t.appendChild(c);var l=createNS("feComposite");l.setAttribute("in",r+"_drop_shadow_3"),l.setAttribute("in2",r+"_drop_shadow_2"),l.setAttribute("operator","in"),l.setAttribute("result",r+"_drop_shadow_4"),t.appendChild(l);var h=this.createMergeNode(r,[r+"_drop_shadow_4",i]);t.appendChild(h)}SVGComposableEffect.prototype={createMergeNode:function(t,e){var n,r,i=createNS("feMerge");for(i.setAttribute("result",t),r=0;r<e.length;r+=1)(n=createNS("feMergeNode")).setAttribute("in",e[r]),i.appendChild(n),i.appendChild(n);return i}},extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v;this.matrixFilter.setAttribute("values",n[0]-e[0]+" 0 0 0 "+e[0]+" "+(n[1]-e[1])+" 0 0 0 "+e[1]+" "+(n[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+this.filterManager.effectElements[2].p.v/100+" 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+this.filterManager.effectElements[6].p.v+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var t,e,n,r,i=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,n=0):r=1+(n=this.filterManager.effectElements[0].p.v-1),(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);n<r;n+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:n});if(3===this.filterManager.effectElements[10].p.v){var s=createNS("mask"),o=createElementID();s.setAttribute("id",o),s.setAttribute("mask-type","alpha"),s.appendChild(e),this.elem.globalData.defs.appendChild(s);var a=createNS("g");for(a.setAttribute("mask","url("+getLocationHref()+"#"+o+")");i[0];)a.appendChild(i[0]);this.elem.layerElement.appendChild(a),this.masker=s,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){var e;this.initialized||this.initialize();var n,r,i=this.paths.length;for(e=0;e<i;e+=1)if(-1!==this.paths[e].m&&(n=this.elem.maskManager.viewData[this.paths[e].m],r=this.paths[e].p,(t||this.filterManager._mdf||n.prop._mdf)&&r.setAttribute("d",n.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var s;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var o=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),a=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),u=r.getTotalLength();s="0 0 0 "+u*o+" ";var c,l=Math.floor(u*(a-o)/(1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01));for(c=0;c<l;c+=1)s+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";s+="0 "+10*u+" 0 0"}else s="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;r.setAttribute("stroke-dasharray",s)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p._mdf)){var h=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*h[0])+","+bmFloor(255*h[1])+","+bmFloor(255*h[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,i=r[1]+" "+n[1]+" "+e[1],s=r[2]+" "+n[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",r[0]+" "+n[0]+" "+e[0]),this.feFuncG.setAttribute("tableValues",i),this.feFuncB.setAttribute("tableValues",s)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var n=createNS(t);return n.setAttribute("type","table"),e.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(t,e,n,r,i){for(var s,o,a=0,u=Math.min(t,e),c=Math.max(t,e),l=Array.call(null,{length:256}),h=0,p=i-r,f=e-t;a<=256;)o=(s=a/256)<=u?f<0?i:r:s>=c?f<0?r:i:r+p*Math.pow((s-t)/f,1/n),l[h]=o,h+=1,a+=256/255;return l.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,n=this.filterManager.effectElements;this.feFuncRComposed&&(t||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(e=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(e=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(e=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(e=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(e=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=n*Math.cos(r),s=n*Math.sin(r);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",s)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,n){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGGaussianBlurEffect(t,e,n,r){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var i=createNS("feGaussianBlur");i.setAttribute("result",r),t.appendChild(i),this.feGaussianBlur=i}return SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,n=_svgMatteSymbols.length;e<n;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var n=t.layerElement.parentNode;if(n){for(var r,i=n.children,s=0,o=i.length;s<o&&i[s]!==t.layerElement;)s+=1;s<=o-2&&(r=i[s+1]);var a=createNS("use");a.setAttribute("href","#"+e),r?n.insertBefore(a,r):n.appendChild(a)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var n=createElementID(),r=createNS("mask");r.setAttribute("id",e.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var i=t.globalData.defs;i.appendChild(r);var s=createNS("symbol");s.setAttribute("id",n),this.replaceInParent(e,n),s.appendChild(e.layerElement),i.appendChild(s);var o=createNS("use");o.setAttribute("href","#"+n),r.appendChild(o),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,n=0,r=e.length;n<r;)e[n]&&e[n].data.ind===t&&this.setElementAsMask(this.elem,e[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3*this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v;this.feGaussianBlur.setAttribute("stdDeviation",(3==n?0:e)+" "+(2==n?0:e)),this.feGaussianBlur.setAttribute("edgeMode",1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate")}},registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie},module.exports=factory())},5087:(t,e,n)=>{"use strict";var r=n(9439),i=n(2635),s=n(6868),o=n(3900),a=n(724),u=n(2407);function c(t){if(16!==t.length)throw new Error("invalid iv")}function l(t){return r.setupFallback(function(e,n,i){try{c(i)}catch(s){return Promise.reject(s)}return Promise.resolve(n).then(function(n){var s=r.nodeCrypto.createCipheriv("AES-"+t+"-CBC",e,i);return Buffer.concat([s.update(n),s.final()])})},function(t,e,n){try{c(n)}catch(s){return Promise.reject(s)}var i=Promise.resolve();return(i=(i=i.then(function(){return r.subtleCrypto.importKey("raw",t,{name:"AES-CBC"},!0,["encrypt"])})).then(function(t){return r.subtleCrypto.encrypt({name:"AES-CBC",iv:n},t,e)})).then(function(t){return Buffer.from(t)})},function(t,e,n){try{c(n)}catch(r){return Promise.reject(r)}return Promise.resolve().then(function(){var r=o.cipher.createCipher("AES-CBC",new a(t));return r.start({iv:new a(n)}),r.update(new a(e)),r.finish()?Buffer.from(r.output.bytes(),"binary"):Promise.reject(new Error("encryption failed"))})})}function h(t){return r.setupFallback(function(e,n,i){try{c(i)}catch(s){return Promise.reject(s)}return Promise.resolve().then(function(){var s=r.nodeCrypto.createDecipheriv("AES-"+t+"-CBC",e,i);return Buffer.concat([s.update(n),s.final()])})},function(t,e,n){try{c(n)}catch(s){return Promise.reject(s)}var i=Promise.resolve();return(i=(i=i.then(function(){return r.subtleCrypto.importKey("raw",t,{name:"AES-CBC"},!0,["decrypt"])})).then(function(t){return r.subtleCrypto.decrypt({name:"AES-CBC",iv:n},t,e)})).then(function(t){return Buffer.from(t)})},function(t,e,n){try{c(n)}catch(r){return Promise.reject(r)}return Promise.resolve().then(function(){var r=o.cipher.createDecipher("AES-CBC",new a(t));return r.start({iv:new a(n)}),r.update(new a(e)),r.finish()?Buffer.from(r.output.bytes(),"binary"):Promise.reject(new Error("encryption failed"))})})}function p(t,e){if(e<<1!=t.length<<3)throw new Error("invalid encryption key size")}function f(t){var e=l(t);return function(n,s,o){try{p(n,t)}catch(h){return Promise.reject(h)}var a=n.slice(t/8),u=n.slice(0,t/8),c=o.iv||Buffer.alloc(0),l=o.aad||o.adata||Buffer.alloc(0);return e(a,s,c).then(function(e){var n=Buffer.concat([l,c,e,r.int64ToBuffer(8*l.length)]);return i["HS"+2*t].sign(u,n,{length:t}).then(function(n){var r=n.mac.slice(0,t/8);return{data:e,tag:r}})})}}function d(t){var e=h(t);return function(n,s,o){try{p(n,t)}catch(d){return Promise.reject(d)}var a=n.slice(t/8),u=n.slice(0,t/8),c=o.iv||Buffer.alloc(0),l=o.aad||o.adata||Buffer.alloc(0),h=o.tag||o.mac||Buffer.alloc(0),f=Promise.resolve();return(f=f.then(function(){var e=Buffer.concat([l,c,s,r.int64ToBuffer(8*l.length)]);return i["HS"+2*t].verify(u,e,h,{length:t}).then(function(){return s},function(){throw new Error("mac check failed")})})).then(function(){return e(a,s,c)})}}var m=Buffer.from("Encryption","utf8"),g=Buffer.from("Integrity","utf8"),v=Buffer.from(".","utf8");function y(t,e,n,i){var o=8*t.length,a=o/2,u=Promise.resolve();return u=(u=u.then(function(){return Buffer.concat([r.int32ToBuffer(1),t,r.int32ToBuffer(a),Buffer.from(e,"utf8"),n,i,m])})).then(function(t){return s["SHA-"+o].digest(t).then(function(t){return t.slice(0,a/8)})}),Promise.resolve(u)}function b(t,e,n,i){var o=8*t.length,a=o,u=Promise.resolve();return u=(u=u.then(function(){return Buffer.concat([r.int32ToBuffer(1),t,r.int32ToBuffer(a),Buffer.from(e,"utf8"),n,i,g])})).then(function(t){return s["SHA-"+o].digest(t).then(function(t){return t.slice(0,a/8)})}),Promise.resolve(u)}function w(t,e){var n=l(t);return function(s,o,a){var c,l,h=a.epu||r.int32ToBuffer(0),p=a.epv||r.int32ToBuffer(0),f=a.iv||Buffer.alloc(0),d=a.aad||a.adata||Buffer.alloc(0),m=a.kdata||Buffer.alloc(0),g=[y(s,e,h,p),b(s,e,h,p)],w=Promise.all(g).then(function(t){c=t[0],l=t[1]});return(w=(w=w.then(function(){return n(c,o,f)})).then(function(e){var n=Buffer.concat([d,v,Buffer.from(m),v,Buffer.from(u.base64url.encode(f),"utf8"),v,Buffer.from(u.base64url.encode(e),"utf8")]);return Promise.all([Promise.resolve(e),i["HS"+2*t].sign(l,n,{length:t})])})).then(function(t){return{data:t[0],tag:t[1].mac}})}}function x(t,e){var n=h(t);return function(s,o,a){var c,l,h=a.epu||r.int32ToBuffer(0),p=a.epv||r.int32ToBuffer(0),f=a.iv||Buffer.alloc(0),d=a.aad||a.adata||Buffer.alloc(0),m=a.kdata||Buffer.alloc(0),g=a.tag||a.mac||Buffer.alloc(0),w=[y(s,e,h,p),b(s,e,h,p)],x=Promise.all(w).then(function(t){c=t[0],l=t[1]});return(x=x.then(function(){var e=Buffer.concat([d,v,Buffer.from(m),v,Buffer.from(u.base64url.encode(f),"utf8"),v,Buffer.from(u.base64url.encode(o),"utf8")]);try{return i["HS"+2*t].verify(l,e,g,{loose:!1})}catch(n){throw new Error("mac check failed")}})).then(function(){return n(c,o,f)})}}var E={};["A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"].forEach(function(t){var e=parseInt(/A(\d+)CBC-HS(\d+)?/g.exec(t)[1]);E[t]={encrypt:f(e),decrypt:d(e)}}),["A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"].forEach(function(t){var e=parseInt(/A(\d+)CBC\+HS(\d+)?/g.exec(t)[1]);E[t]={encrypt:w(e,t),decrypt:x(e,t)}}),t.exports=E},3369:(t,e,n)=>{"use strict";var r=n(9439),i=n(2407),s=n(1815),o=n(1415);function a(t,e){function n(n,r){if(t!==n.length<<3)throw new Error("invalid key size");if(!r&&!e)throw new Error("invalid iv");if(r&&12!==r.length)throw new Error("invalid iv")}function a(t){if(e){var n=i.base64url.encode(t.iv),r=i.base64url.encode(t.tag);t={data:t.data,header:{iv:n,tag:r}}}return t}return r.setupFallback(function(t,e,s){var o=s.iv,u=s.aad||s.adata||Buffer.alloc(0);try{n(t,o)}catch(h){return Promise.reject(h)}o=o||i.randomBytes(12);var c,l="aes-"+8*t.length+"-gcm";try{c=r.nodeCrypto.createCipheriv(l,t,o)}catch(h){throw new Error("unsupported algorithm: "+l)}if("function"!=typeof c.setAAD)throw new Error("unsupported algorithm: "+l);return u.length&&c.setAAD(u),a({data:Buffer.concat([c.update(e),c.final()]),iv:o,tag:c.getAuthTag()})},function(t,e,s){var o=s.iv,u=s.aad||s.adata||Buffer.alloc(0);try{n(t,o)}catch(l){return Promise.reject(l)}o=o||i.randomBytes(12);var c={name:"AES-GCM"};return r.subtleCrypto.importKey("raw",t,c,!0,["encrypt"]).then(function(t){return c.iv=o,c.tagLength=128,u.length&&(c.additionalData=u),r.subtleCrypto.encrypt(c,t,e)}).then(function(t){var e=t.byteLength-16,n=t.slice(e);n=Buffer.from(n);var r=t.slice(0,e);return a({data:r=Buffer.from(r),iv:o,tag:n})})},function(t,e,r){var u,c,l=r.iv,h=r.aad||r.adata||Buffer.alloc(0);try{n(t,l)}catch(p){return Promise.reject(p)}return l=l||i.randomBytes(12),u=o.createCipher({key:t,iv:l,additionalData:h}),c=Buffer.alloc(e.length),new Promise(function(t,n){var r=s.CHUNK_SIZE,i=0,o=0;!function s(){var h=Math.min(r,e.length-o);i+=u.update(e,o,h,c,i),e.length>(o+=h)?setTimeout(s,0):(i+=u.finish(c,i))===e.length?t(a({data:c,iv:l,tag:u.tag})):n(new Error("encryption failed"))}()})})}function u(t){function e(e,n,r){if(t!==e.length<<3)throw new Error("invalid key size");if(12!==n.length)throw new Error("invalid iv");if(16!==r.length)throw new Error("invalid tag length")}return r.setupFallback(function(t,n,i){var s=i.aad||i.adata||Buffer.alloc(0),o=i.iv||Buffer.alloc(0),a=i.tag||i.mac||Buffer.alloc(0);try{e(t,o,a)}catch(l){return Promise.reject(l)}var u,c="aes-"+8*t.length+"-gcm";try{u=r.nodeCrypto.createDecipheriv(c,t,o)}catch(l){throw new Error("unsupported algorithm: "+c)}if("function"!=typeof u.setAAD)throw new Error("unsupported algorithm: "+c);u.setAuthTag(a),s.length&&u.setAAD(s);try{return Buffer.concat([u.update(n),u.final()])}catch(l){throw new Error("decryption failed")}},function(t,n,i){var s=i.aad||i.adata||Buffer.alloc(0),o=i.iv||Buffer.alloc(0),a=i.tag||i.mac||Buffer.alloc(0);try{e(t,o,a)}catch(c){return Promise.reject(c)}var u={name:"AES-GCM"};return r.subtleCrypto.importKey("raw",t,u,!0,["decrypt"]).then(function(t){return u.iv=o,u.tagLength=128,s.length&&(u.additionalData=s),n=Buffer.concat([n,a],n.length+a.length),r.subtleCrypto.decrypt(u,t,n)}).then(function(t){return Buffer.from(t)})},function(t,n,r){var i,a,u=r.aad||r.adata||Buffer.alloc(0),c=r.iv||Buffer.alloc(0),l=r.tag||r.mac||Buffer.alloc(0);try{e(t,c,l)}catch(h){return Promise.reject(h)}return i=o.createDecipher({key:t,iv:c,additionalData:u,tag:l}),a=Buffer.alloc(n.length),new Promise(function(t,e){var r=s.CHUNK_SIZE,o=0,u=0;!function s(){var c=Math.min(r,n.length-u);if(o+=i.update(n,u,c,a,o),n.length>(u+=c))setTimeout(s,0);else{try{o+=i.finish(a,o)}catch(h){return void e(new Error("decryption failed"))}o===n.length?t(a):e(new Error("decryption failed"))}}()})})}var c={};["A128GCM","A192GCM","A256GCM","A128GCMKW","A192GCMKW","A256GCMKW"].forEach(function(t){var e=/A(\d+)GCM(KW)?/g.exec(t),n=parseInt(e[1]);c[t]={encrypt:a(n,"KW"===e[2]),decrypt:u(n)}}),t.exports=c},470:(t,e,n)=>{"use strict";var r=n(9439),i=n(3900),s=n(724),o=Buffer.from("a6a6a6a6a6a6a6a6","hex");function a(t,e){for(var n=Math.max(t.length,e.length),r=Buffer.alloc(n),i=0;n>i;i++)r[i]=(t[i]||0)^(e[i]||0);return r}function u(t,e){for(var n=[],r=0;t.length>r;r+=e)n.push(t.slice(r,r+e));return n}function c(t){var e=Math.floor(t/4294967296),n=t%4294967296,r=Buffer.alloc(8);return r[0]=255&e>>>24,r[1]=255&e>>>16,r[2]=255&e>>>8,r[3]=255&e>>>0,r[4]=255&n>>>24,r[5]=255&n>>>16,r[6]=255&n>>>8,r[7]=255&n>>>0,r}function l(t){function e(e,n){if(t!==e.length<<3)throw new Error("invalid key size");if(0<n.length&&0!=n.length%8)throw new Error("invalid data length")}return r.setupFallback(function(n,i){try{e(n,i)}catch(v){return Promise.reject(v)}var s,l,h,p=u(i,8),f=Buffer.alloc(16);s=o;for(var d=0;6>d;d++)for(var m=0;p.length>m;m++)h=p.length*d+m+1,l=Buffer.concat([s,p[m]]),s=a((l=r.nodeCrypto.createCipheriv("AES"+t,n,f).update(l)).slice(0,8),c(h)),p[m]=l.slice(8,16);p=[s].concat(p);var g=Buffer.concat(p);return Promise.resolve({data:g})},function(t,n){try{e(t,n)}catch(o){return Promise.reject(o)}var i={name:"AES-KW"},s=[r.subtleCrypto.importKey("raw",n,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),r.subtleCrypto.importKey("raw",t,i,!0,["wrapKey"])];return(s=(s=Promise.all(s)).then(function(t){return r.subtleCrypto.wrapKey("raw",t[0],t[1],i)})).then(function(t){return{data:t=Buffer.from(t)}})},function(t,n){try{e(t,n)}catch(v){return Promise.reject(v)}var r,l,h,p=i.cipher.createCipher("AES",new s(t)),f=u(n,8);r=o;for(var d=0;6>d;d++)for(var m=0;f.length>m;m++)h=f.length*d+m+1,l=Buffer.concat([r,f[m]]),p.start(),p.update(new s(l)),p.finish(),r=a((l=Buffer.from(p.output.bytes(),"binary")).slice(0,8),c(h)),f[m]=l.slice(8,16);f=[r].concat(f);var g=Buffer.concat(f);return Promise.resolve({data:g})})}function h(t){function e(e,n){if(t!==e.length<<3)throw new Error("invalid key size");if(0<n.length-8&&0!=n.length%8)throw new Error("invalid data length")}return r.setupFallback(function(n,i){try{e(n,i)}catch(g){return Promise.reject(g)}var s,l,h=u(i,8),p=Buffer.alloc(16);s=h[0],h=h.slice(1);for(var f=5;0<=f;--f)for(var d=h.length-1;0<=d;--d)l=a(s,c(h.length*f+d+1)),l=Buffer.concat([l,h[d],p]),s=(l=r.nodeCrypto.createDecipheriv("AES"+t,n,p).update(l)).slice(0,8),h[d]=l.slice(8,16);if(s.toString()!==o.toString())return Promise.reject(new Error("decryption failed"));var m=Buffer.concat(h);return Promise.resolve(m)},function(t,n){try{e(t,n)}catch(o){return Promise.reject(o)}var i={name:"AES-KW"},s=r.subtleCrypto.importKey("raw",t,i,!0,["unwrapKey"]);return(s=(s=s.then(function(t){return r.subtleCrypto.unwrapKey("raw",n,t,i,{name:"HMAC",hash:"SHA-256"},!0,["sign"])})).then(function(t){return r.subtleCrypto.exportKey("raw",t)})).then(function(t){return Buffer.from(t)})},function(t,n){try{e(t,n)}catch(g){return Promise.reject(g)}var r,l,h=i.cipher.createDecipher("AES",new s(t)),p=u(n,8);r=p[0],p=p.slice(1);for(var f=5;0<=f;--f)for(var d=p.length-1;0<=d;--d)l=a(r,c(p.length*f+d+1)),l=Buffer.concat([l,p[d]]),h.start(),h.update(new s(l)),h.finish(),r=(l=Buffer.from(h.output.bytes(),"binary")).slice(0,8),p[d]=l.slice(8,16);if(r.toString()!==o.toString())return Promise.reject(new Error("decryption failed"));var m=Buffer.concat(p);return Promise.resolve(m)})}var p={};["A128KW","A192KW","A256KW"].forEach(function(t){var e=parseInt(/A(\d+)KW/g.exec(t)[1]);p[t]={encrypt:l(e),decrypt:h(e)}}),t.exports=p},889:(t,e,n)=>{"use strict";var r=n(1815),i=n(6868);function s(t){return t=t.replace("CONCAT-",""),function(e,n){var s=(n=n||{}).length,o=r.HASHLENGTH[t];if(!s)return Promise.reject(new Error("invalid key length"));if(!n.otherInfo)return Promise.reject(new Error("invalid otherInfo"));var a=n.otherInfo,u=i[t].digest,c=Math.ceil(s/o),l=0,h=[];return function t(){if(c===l++)return Buffer.concat(h).slice(0,s);var n=Buffer.alloc(4+e.length+a.length);return n.writeUInt32BE(l,0),e.copy(n,4),a.copy(n,4+e.length),u(n).then(function(e){return h.push(e),t()})}()}}var o={};["CONCAT-SHA-1","CONCAT-SHA-256","CONCAT-SHA-384","CONCAT-SHA-512"].forEach(function(t){o[t]={derive:s(t)}}),t.exports=o},1815:t=>{"use strict";t.exports={CHUNK_SIZE:1024,HASHLENGTH:{"SHA-1":160,"SHA-256":256,"SHA-384":384,"SHA-512":512},ENCLENGTH:{"AES-128-CBC":128,"AES-192-CBC":192,"AES-256-CBC":256,"AES-128-KW":128,"AES-192-KW":192,"AES-256-KW":256},KEYLENGTH:{"A128CBC-HS256":256,"A192CBC-HS384":384,"A256CBC-HS512":512,"A128CBC+HS256":256,"A192CBC+HS384":384,"A256CBC+HS512":512,A128GCM:128,A192GCM:192,A256GCM:256,A128KW:128,A192KW:192,A256KW:256,"ECDH-ES+A128KW":128,"ECDH-ES+A192KW":192,"ECDH-ES+A256KW":256},NONCELENGTH:{"A128CBC-HS256":128,"A192CBC-HS384":128,"A256CBC-HS512":128,"A128CBC+HS256":128,"A192CBC+HS384":128,"A256CBC+HS512":128,A128GCM:96,A192GCM:96,A256GCM:96}}},3349:t=>{"use strict";t.exports={dir:{encrypt:function(t){return Promise.resolve({data:t,once:!0,direct:!0})},decrypt:function(t){return Promise.resolve(t)}}}},233:(t,e,n)=>{"use strict";var r=n(3742),i=n(3754),s=n(3900),o=n(2407),a={"P-256":256,"P-384":384,"P-521":521};function u(t,e){var n=r(t);return(e?["x","y"]:["d"]).forEach(function(t){n[t]=o.asBuffer(n[t],"base64url")}),n}var c=Buffer.from([4]),l="1.2.840.10045.2.1",h="Could not extract parameters from DER signature";function p(t,e,n){for(var r=0;e+r<n&&0===t[e+r];)++r;return t[e+r]>=128&&--r,r}t.exports={convertToForge:function(t,e){var n=e?["x","y"]:["d"];return n=n.map(function(e){return new s.jsbn.BigInteger(t[e].toString("hex"),16)}),n=[t.crv].concat(n),(e?i.asPublicKey:i.asPrivateKey).apply(i,n)},convertToJWK:function(t,e){var n=r(t);return(e?["x","y"]:["x","y","d"]).forEach(function(t){n[t]=o.base64url.encode(n[t])}),delete n.key_ops,delete n.use,delete n.alg,e&&delete n.d,n},convertToObj:u,convertToBuffer:function(t,e){return t=u(t,e),e?Buffer.concat([c,t.x,t.y]):t.d},curveSize:function(t){return a[t||""]||NaN},derToConcat:function(t,e){var n=0;if(48!==t[n++])throw new Error(h);var r=t[n++];if(129===r&&(r=t[n++]),r>t.length-n)throw new Error(h);if(2!==t[n++])throw new Error(h);var i=t[n++];if(i>t.length-n-2)throw new Error(h);if(i>e+1)throw new Error(h);var s=n;if(n+=i,2!==t[n++])throw new Error(h);var o=t[n++];if(o!==t.length-n)throw new Error(h);if(o>e+1)throw new Error(h);var a=n;if((n+=o)!==t.length)throw new Error(h);var u=e-i,c=e-o,l=Buffer.alloc(u+i+c+o);for(n=0;n<u;++n)l[n]=0;var p=Math.max(-u,0);t.copy(l,n,s+p,s+i);for(var f=n=e;n<f+c;++n)l[n]=0;var d=Math.max(-c,0);return t.copy(l,n,a+d,a+o),l},concatToDer:function(t,e){var n=p(t,0,e),r=p(t,e,t.length),i=e-n,s=e-r,o=i+s+4,a=o<128,u=Buffer.alloc((a?2:3)+o),c=0;return u[c++]=48,a?u[c++]=o:(u[c++]=129,u[c++]=255&o),u[c++]=2,u[c++]=i,n<0?(u[c++]=0,c+=t.copy(u,c,0,e)):c+=t.copy(u,c,n,e),u[c++]=2,u[c++]=s,r<0?(u[c++]=0,t.copy(u,c,e)):t.copy(u,c,e+r),u},convertToPEM:function(t,e){var n,r,i,o=t.crv;return o=function(t){switch(t){case"P-256":return"1.2.840.10045.3.1.7";case"P-384":return"1.3.132.0.34";case"P-521":return"1.3.132.0.35";default:return null}}(o),o=s.asn1.oidToDer(o),e?(n="EC PRIVATE KEY",r=Buffer.concat([Buffer.from([0,4]),t.x,t.y]).toString("binary"),t=t.d.toString("binary"),i=s.asn1.create(s.asn1.Class.UNIVERSAL,s.asn1.Type.SEQUENCE,!0,[s.asn1.create(s.asn1.Class.UNIVERSAL,s.asn1.Type.INTEGER,!1,"\x01"),s.asn1.create(s.asn1.Class.UNIVERSAL,s.asn1.Type.OCTETSTRING,!1,t),s.asn1.create(s.asn1.Class.CONTEXT_SPECIFIC,0,!0,[s.asn1.create(s.asn1.Class.UNIVERSAL,s.asn1.Type.OID,!1,o.bytes())]),s.asn1.create(s.asn1.Class.CONTEXT_SPECIFIC,1,!0,[s.asn1.create(s.asn1.Class.UNIVERSAL,s.asn1.Type.BITSTRING,!1,r)])])):(n="PUBLIC KEY",t=Buffer.concat([Buffer.from([0,4]),t.x,t.y]).toString("binary"),i=s.asn1.create(s.asn1.Class.UNIVERSAL,s.asn1.Type.SEQUENCE,!0,[s.asn1.create(s.asn1.Class.UNIVERSAL,s.asn1.Type.SEQUENCE,!0,[s.asn1.create(s.asn1.Class.UNIVERSAL,s.asn1.Type.OID,!1,s.asn1.oidToDer(l).bytes()),s.asn1.create(s.asn1.Class.UNIVERSAL,s.asn1.Type.OID,!1,o.bytes())]),s.asn1.create(s.asn1.Class.UNIVERSAL,s.asn1.Type.BITSTRING,!1,t)])),i=s.asn1.toDer(i).bytes(),s.pem.encode({type:n,body:i})},EC_OID:l}},9872:(t,e,n)=>{"use strict";var r=n(2897),i=n(2407),s=n(233),o=n(2727),a=n(889),u=n(470),c=n(9439),l=n(1815),h=n(3742),p=n(2482),f=n(1133);function d(t){switch(t){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new Error("unsupported curve: "+t)}}var m=t.exports={};function g(t,e,n){function r(t){return Buffer.concat([c.int32ToBuffer(t.length),t])}var s=n.algorithm||"",o=l.KEYLENGTH[s],a=i.asBuffer(n.apu||"","base64url"),u=i.asBuffer(n.apv||"","base64url"),h=Buffer.concat([r(Buffer.from(s,"utf8")),r(a),r(u),c.int32ToBuffer(o)]);return m["ECDH-CONCAT"].derive(t,{public:e,length:o/8,hash:"SHA-256",otherInfo:h})}["ECDH","ECDH-HKDF","ECDH-CONCAT"].forEach(function(t){var e,n,i=/^ECDH(?:-(\w+))?$/g.exec(t||"")[1],u=m[t]=m[t]||{};switch(i||""){case"CONCAT":u.derive=function(t,e){var n;e=e||{};try{if(!(n=e.hash||d(t.crv)))throw new Error("invalid hash: "+n);n.toUpperCase()}catch(i){return Promise.reject(i)}var r=["public"];return m.ECDH.derive(t,f(e,r)).then(function(t){return a["CONCAT-"+n].derive(t,p(e,r))})};break;case"HKDF":u.derive=function(t,e){var n;e=e||{};try{if(!(n=e.hash||d(t.crv)))throw new Error("invalid hash: "+n);n.toUpperCase()}catch(i){return Promise.reject(i)}var r=["public"];return m.ECDH.derive(t,f(e,r)).then(function(t){return o["HKDF-"+n].derive(t,p(e,r))})};break;case"":u.derive=(e={name:"ECDH"},n=function(t,e){var n=t&&s.convertToForge(t,!0);if(!n||!n.isValid())return Promise.reject(new Error("invalid EC public key"));switch(e){case"jwk":n=s.convertToJWK(t,!0);break;case"buffer":n=s.convertToBuffer(t,!0)}return Promise.resolve(n)},c.setupFallback(function(t,e){if("function"!=typeof c.nodeCrypto.createECDH)throw new Error("unsupported algorithm: ECDH");var r,i=(e=e||{}).length||0;switch(t.crv){case"P-256":r="prime256v1";break;case"P-384":r="secp384r1";break;case"P-521":r="secp521r1";break;default:return Promise.reject(new Error("invalid curve: "+r))}var o=s.convertToBuffer(t,!1);return n(e.public,"buffer").then(function(t){var e=c.nodeCrypto.createECDH(r);e.setPrivateKey(o);var n=e.computeSecret(t);if(i){if(n.length<i)return Promise.reject(new Error("key length too large: "+i));n=n.slice(0,i)}return n})},function(t,i){t=t||{};var o=(i=i||{}).length||0,a=r(h(e),{namedCurve:t.crv});o||(o=t.d.length);var u=s.convertToJWK(t,!1);u=c.subtleCrypto.importKey("jwk",u,a,!1,["deriveBits"]);var l=n(i.public,"jwk");l=l.then(function(t){return c.subtleCrypto.importKey("jwk",t,a,!1,[])});var p=Promise.all([u,l]);return(p=p.then(function(t){var n=t[0],i=t[1],s=r(h(e),{public:i});return c.subtleCrypto.deriveBits(s,n,8*o)})).then(function(t){return Buffer.from(t)})},function(t,e){var r=(e=e||{}).length||0,i=s.convertToForge(t,!1);return n(e.public,"forge").then(function(t){var e=i.computeSecret(t);if(r){if(e.length<r)return Promise.reject(new Error("key length too large: "+r));e=e.slice(0,r)}return e})}));break;default:u.derive=null}}),["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"].forEach(function(t){var e,n,r=/^ECDH-ES(?:\+(.+))?/g.exec(t||"")[1],i=m[t]=m[t]||{};r?(r=u[r])?(i.encrypt=(n=r.encrypt,function(t,e,r){if(!(r=r||{}).epk||!r.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var i=s.convertToObj(r.epk,!1);return t&&t.x&&t.y?g(i,s.convertToObj(t,!0),{algorithm:r.alg,apu:r.apu,apv:r.apv}).then(function(t){return n(t,e)}):Promise.reject(new Error("missing static public key"))}),i.decrypt=(e=r.decrypt,function(t,n,r){if(!(r=r||{}).epk||!r.epk.x||!r.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var i=s.convertToObj(r.epk,!0);return t&&t.d?g(s.convertToObj(t,!1),i,{algorithm:r.alg,apu:r.apu,apv:r.apv}).then(function(t){return e(t,n)}):Promise.reject(new Error("missing static private key"))})):i.ecrypt=i.decrypt=null:(i.encrypt=function(t,e,n){if(!(n=n||{}).epk||!n.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var r=s.convertToObj(n.epk,!1);return t&&t.x&&t.y?g(r,s.convertToObj(t,!0),{algorithm:n.enc,apu:n.apu,apv:n.apv}).then(function(t){return{data:t,once:!0,direct:!0}}):Promise.reject(new Error("missing static public key"))},i.decrypt=function(t,e,n){if(!(n=n||{}).epk||!n.epk.x||!n.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var r=s.convertToObj(n.epk,!0);return t&&t.d?g(s.convertToObj(t,!1),r,{algorithm:n.enc,apu:n.apu,apv:n.apv}).then(function(t){return t}):Promise.reject(new Error("missing static private key"))})})},9842:(t,e,n)=>{"use strict";var r=n(233),i=n(9439),s=n(6868);function o(t){switch(t){case"SHA-256":return"P-256";case"SHA-384":return"P-384";case"SHA-512":return"P-521";default:throw new Error("unsupported hash: "+t)}}function a(t){var e,n=o(t),a=t.toLowerCase().replace("-","");return i.nodeCrypto&&i.nodeCrypto.getHashes().indexOf(a)>-1&&(e=function(t,e){if(n!==t.crv)return Promise.reject(new Error("invalid curve"));var s,o;switch(s=(s=Promise.resolve(i.nodeCrypto.createSign(a))).then(function(t){return t.update(e),t}),a.slice(-3)){case"384":o=48;break;case"512":o=66;break;default:o=32}return(s=s.then(function(e){return r.derToConcat(e.sign(r.convertToPEM(t,!0)),o)})).then(function(t){return{data:e,mac:t}})}),i.setupFallback(e,function(e,s){if(n!==e.crv)return Promise.reject(new Error("invalid curve"));var o=r.convertToJWK(e,!1),a={name:"ECDSA",namedCurve:o.crv,hash:{name:t}};return i.subtleCrypto.importKey("jwk",o,a,!0,["sign"]).then(function(t){return i.subtleCrypto.sign(a,t,s)}).then(function(t){return t=Buffer.from(t),{data:s,mac:t}})},function(e,i){if(n!==e.crv)return Promise.reject(new Error("invalid curve"));var o=r.convertToForge(e,!1);return s[t].digest(i).then(function(t){return t=o.sign(t),t=Buffer.concat([t.r,t.s]),{data:i,mac:t}})})}function u(t){var e,n=o(t),a=t.toLowerCase().replace("-","");return i.nodeCrypto&&i.nodeCrypto.getHashes().indexOf(a)>-1&&(e=function(t,e,s){if(n!==t.crv)return Promise.reject(new Error("invalid curve"));var o;switch(a.slice(-3)){case"384":o=48;break;case"512":o=66;break;default:o=32}return Promise.resolve(i.nodeCrypto.createVerify(a)).then(function(n){return n.update(e),n.end(),n.verify(r.convertToPEM(t,!1),r.concatToDer(s,o))}).then(function(t){if(!t)throw new Error("verification failed");return{data:e,mac:s,valid:!0}})}),i.setupFallback(e,function(e,s,o){if(n!==e.crv)return Promise.reject(new Error("invalid curve"));var a=r.convertToJWK(e,!0),u={name:"ECDSA",namedCurve:a.crv,hash:{name:t}};return i.subtleCrypto.importKey("jwk",a,u,!0,["verify"]).then(function(t){return i.subtleCrypto.verify(u,t,o,s)}).then(function(t){return t?{data:s,mac:o,valid:!0}:Promise.reject(new Error("verification failed"))})},function(e,i,o){if(n!==e.crv)return Promise.reject(new Error("invalid curve"));var a=r.convertToForge(e,!0);return s[t].digest(i).then(function(t){var e=o.length/2,n={r:o.slice(0,e),s:o.slice(e)};return a.verify(t,n)?{data:i,mac:o,valid:!0}:Promise.reject(new Error("verification failed"))})})}var c={};["ES256","ES384","ES512"].forEach(function(t){var e=t.replace(/ES(\d+)/g,function(t,e){return"SHA-"+e});c[t]={sign:a(e),verify:u(e)}}),t.exports=c},9439:(t,e,n)=>{"use strict";"undefined"==typeof Promise&&n(3021).polyfill(),e.int32ToBuffer=function(t,e){return(e=e||Buffer.alloc(4))[0]=t>>>24&255,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=255&t,e};var r=Math.pow(2,32);e.int64ToBuffer=function(t,n){n=n||Buffer.alloc(8);var i=Math.floor(t/r),s=t%r;return i=e.int32ToBuffer(i),s=e.int32ToBuffer(s),Buffer.concat([i,s])};var i={};Object.defineProperty(e,"subtleCrypto",{get:function(){return"subtleCrypto"in i?i.subtleCrypto:i.subtleCrypto=function(){if("undefined"!=typeof crypto&&void 0!==crypto.subtle)return crypto.subtle}()},enumerable:!0}),Object.defineProperty(e,"nodeCrypto",{get:function(){return"nodeCrypto"in i?i.nodeCrypto:i.nodeCrypto=function(){var t;try{t=n(3438)}catch(e){return}if(Object.keys(t).length)return t}()},enumerable:!0}),e.setupFallback=function(t,n,r){return t&&e.nodeCrypto?function(){var e,n=arguments;function i(t){return 0===t.message.indexOf("unsupported algorithm:")?r.apply(null,n):Promise.reject(t)}try{e=Promise.resolve(t.apply(null,n))}catch(s){e=i(s)}return e}:n&&e.subtleCrypto?function(){var t,e=arguments;function i(t){return t.code!==DOMException.NOT_SUPPORTED_ERR&&"Only ArrayBuffer and ArrayBufferView objects can be passed as CryptoOperationData"!==t.message&&t instanceof Error?Promise.reject(t):r.apply(null,e)}try{t=(t=n.apply(null,e)).catch(i)}catch(s){t=i(s)}return t}:r}},2727:(t,e,n)=>{"use strict";var r=n(1815),i=n(2635);function s(t){var e=t.replace("HKDF-",""),n=t.replace("HKDF-SHA-","HS");return function(t,s){var o=r.HASHLENGTH[e]/8;"string"==typeof n&&(n=i[n].sign);var a=(s=s||{}).salt;a&&0!==a.length||(a=Buffer.alloc(o));var u=s.info||Buffer.alloc(0),c=s.length||o,l=Math.ceil(c/o),h=[],p=0;function f(t,e){return l===p++?Buffer.concat(h).slice(0,c):(e||(e=Buffer.alloc(0)),e=Buffer.concat([e,u,Buffer.from([p])]),e=(e=n(t,e)).then(function(n){return h.push(e=n.mac),f(t,e)}))}return n(a,t,{length:8*a.length}).then(function(t){return f(t.mac)})}}var o={};["HKDF-SHA-1","HKDF-SHA-256","HKDF-SHA-384","HKDF-SHA-512"].forEach(function(t){o[t]={derive:s(t)}}),t.exports=o},2635:(t,e,n)=>{"use strict";var r=n(1815),i=n(3900),s=n(724),o=n(9439);function a(t){var e=t.replace("HS","SHA").toLowerCase(),n=t.replace("HS","SHA-");function s(t,e){return(t=(t||r.HASHLENGTH[n])/8)>e.length?Promise.reject(new Error("invalid key length")):Promise.resolve(e)}return o.setupFallback(function(t,n,r){return s((r=r||{}).length,t).then(function(){var r=o.nodeCrypto.createHmac(e,t);r.update(n);var i=r.digest();return{data:n,mac:i}})},function(t,e,r){var i={name:"HMAC",hash:{name:n}};return s((r=r||{}).length,t).then(function(){return o.subtleCrypto.importKey("raw",t,i,!0,["sign"])}).then(function(t){return o.subtleCrypto.sign(i,t,e)}).then(function(t){var n=Buffer.from(t);return{data:e,mac:n}})},function(t,n,r){return s((r=r||{}).length,t).then(function(){var r=i.hmac.create();return r.start(e,t.toString("binary")),r.update(n.toString("binary")),r=Buffer.from(r.digest().bytes(),"binary"),{data:n,mac:r}})})}function u(t){var e=t.replace("HS","SHA").toLowerCase(),n=t.replace("HS","SHA-");function a(t,e,i){t=(t||r.HASHLENGTH[n])/8;for(var s=!0,o=0;t>o;o++)s=s&&e[o]===i[o];return s}return o.setupFallback(function(t,n,r,i){i=i||{};var s=o.nodeCrypto.createHmac(e,t);s.update(n);var u=s.digest();if(!a(i.length,r,u))throw new Error("verification failed");return{data:n,mac:u,valid:!0}},function(t,e,r,i){var s={name:"HMAC",hash:{name:n}};return((i=i||{}).length?o.subtleCrypto.importKey("raw",t,s,!0,["sign"]).then(function(t){return o.subtleCrypto.sign(s,t,e)}).then(function(t){var e=Buffer.from(t);return a(i.length,r,e)}):o.subtleCrypto.importKey("raw",t,s,!0,["verify"]).then(function(t){return o.subtleCrypto.verify(s,t,r,e)})).then(function(t){return t?{data:e,mac:r,valid:!0}:Promise.reject(new Error("verifaction failed"))})},function(t,n,r,o){o=o||{};var u=i.hmac.create();return u.start(e,new s(t)),u.update(n.toString("binary")),u=Buffer.from(u.digest().bytes(),"binary"),a(o.length,r,u)?Promise.resolve({data:n,mac:r,valid:!0}):Promise.reject(new Error("verification failed"))})}var c={};["HS1","HS256","HS384","HS512"].forEach(function(t){c[t]={sign:a(t),verify:u(t)}}),t.exports=c},6120:(t,e,n)=>{"use strict";var r=[n(5087),n(3369),n(470),n(889),n(3349),n(9872),n(9842),n(2727),n(2635),n(1834),n(3954),n(71),n(6868)],i={},s={},o={},a={},u={},c={};r.forEach(function(t){Object.keys(t).forEach(function(e){var n=t[e];"function"==typeof n.encrypt&&(u[e]=n.encrypt),"function"==typeof n.decrypt&&(c[e]=n.decrypt),"function"==typeof n.sign&&(o[e]=n.sign),"function"==typeof n.verify&&(a[e]=n.verify),"function"==typeof n.digest&&(i[e]=n.digest),"function"==typeof n.derive&&(s[e]=n.derive)})}),e.digest=function(t,e,n){var r=i[t];return r?r(e,n):Promise.reject(new Error("unsupported algorithm: "+t))},e.derive=function(t,e,n){var r=s[t];return r?r(e,n):Promise.reject(new Error("unsupported algorithm: "+t))},e.sign=function(t,e,n,r){var i=o[t];return i?i(e,n,r||{}):Promise.reject(new Error("unsupported algorithm: "+t))},e.verify=function(t,e,n,r,i){var s=a[t];return s?s(e,n,r,i||{}):Promise.reject(new Error("unsupported algorithm: "+t))},e.encrypt=function(t,e,n,r){var i=u[t];return i?i(e,n,r||{}):Promise.reject(new Error("unsupported algorithm: "+t))},e.decrypt=function(t,e,n,r){var i=c[t];return i?i(e,n,r||{}):Promise.reject(new Error("unsupported algorithm: "+t))}},1834:(t,e,n)=>{"use strict";var r=n(3900),i=n(2897),s=n(2407),o=n(9439),a=n(1815),u=n(470),c=Buffer.from([0]);function l(t,e,n){var r=[Buffer.from("PBES2-"+t+"+"+e,"utf8"),c,n];return Buffer.concat(r)}function h(t){function e(t){var e=(t=t||{}).length||0,n=s.asBuffer(t.salt||Buffer.alloc(0),"base64u4l"),r=t.iterations||0;if(0>=e)throw new Error("invalid key length");if(0>=r)throw new Error("invalid iteration count");return t.length=e,t.salt=n,t.iterations=r,t}return o.setupFallback(function(n,r){if(6>o.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBKDF2-"+t);try{r=e(r)}catch(c){return Promise.reject(c)}var i=r.length,s=r.salt,a=r.iterations,u=t.replace("-","");return new Promise(function(t,e){o.nodeCrypto.pbkdf2(n,s,a,i,u,function(n,r){n?e(n):t(r)})})},function(n,r){try{r=e(r)}catch(l){return Promise.reject(l)}var i=r.length,a=r.salt,u=r.iterations,c=Promise.resolve(n);return(c=(c=c.then(function(t){return o.subtleCrypto.importKey("raw",t,"PBKDF2",!1,["deriveBits"])})).then(function(e){var n={name:"PBKDF2",salt:new Uint8Array(a),iterations:u,hash:t};return o.subtleCrypto.deriveBits(n,e,8*i)})).then(function(t){return s.asBuffer(t)})},function(n,i){try{i=e(i)}catch(u){return Promise.reject(u)}var s=i.length,o=i.salt,a=i.iterations;return new Promise(function(e,i){var u=r.md[t.replace("-","").toLowerCase()].create();r.pkcs5.pbkdf2(n.toString("binary"),o.toString("binary"),a,s,u,function(t,n){t?i(t):(n=Buffer.from(n,"binary"),e(n))})})})}function p(t,e){var n="PBKDF2-"+t.replace("HS","SHA-"),r=a.KEYLENGTH[e]/8;return function(o,a,c){var h=s.asBuffer((c=c||{}).p2s||Buffer.alloc(0),"base64url"),p=c.p2c||8192;if(0>=p)throw new Error("invalid iteration count");if(0===h.length)h=s.randomBytes(16);else if(8>h.length)throw new Error("salt too small");var f={p2s:s.base64url.encode(h),p2c:p};h=l(t,e,h),c=i(c,{salt:h,iterations:p,length:r});var m=Promise.resolve(o);return(m=(m=m.then(function(t){return d[n].derive(t,c)})).then(function(t){return u[e].encrypt(t,a)})).then(function(t){return t.header=i(t.header||{},f),t})}}function f(t,e){var n="PBKDF2-"+t.replace("HS","SHA-"),r=a.KEYLENGTH[e]/8;return function(o,a,c){var h=s.asBuffer((c=c||{}).p2s||Buffer.alloc(0),"base64url"),p=c.p2c||0;if(0>=p)return Promise.reject(new Error("invalid iteration count"));if(8>h.length)return Promise.reject(new Error("salt too small"));h=l(t,e,h),c=i(c,{salt:h,iterations:p,length:r});var f=Promise.resolve(o);return(f=f.then(function(t){return d[n].derive(t,c)})).then(function(t){return u[e].decrypt(t,a)})}}var d={};["PBKDF2-SHA-256","PBKDF2-SHA-384","PBKDF2-SHA-512"].forEach(function(t){var e=t.replace("PBKDF2-","");d[t]={derive:h(e)}}),["PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"].forEach(function(t){var e=/PBES2-(HS\d+)\+(A\d+KW)/g.exec(t),n=e[1],r=e[2];d[t]={encrypt:p(n,r),decrypt:f(n,r)}}),t.exports=d},3166:(t,e,n)=>{"use strict";var r=n(3742),i=n(3900),s=n(2407);function o(t,e){var n=e?["n","e"]:["n","e","d","p","q","dp","dq","qi"];return n=n.map(function(e){return new i.jsbn.BigInteger(t[e].toString("hex"),16)}),(e?i.pki.rsa.setPublicKey:i.pki.rsa.setPrivateKey).apply(i.pki.rsa,n)}t.exports={convertToForge:o,convertToJWK:function(t,e){var n=r(t);return(e?["n","e"]:["n","e","d","p","q","dp","dq","qi"]).forEach(function(t){n[t]=s.base64url.encode(n[t])}),delete n.key_ops,delete n.use,delete n.alg,e&&(delete n.d,delete n.p,delete n.q,delete n.dp,delete n.dq,delete n.qi),n},convertToPem:function(t,e){var n,r=e?"__cachedPublicPem":"__cachedPrivatePem";return t[r]?t[r]:(n=e?i.pki.publicKeyToPem(o(t,e)):i.pki.privateKeyToPem(o(t,e)),Object.defineProperty(t,r,{value:n}),n)}}},3954:(t,e,n)=>{"use strict";var r=n(3900),i=n(9439),s=n(724),o=n(3166),a={"RSA-OAEP":"RSA_PKCS1_OAEP_PADDING",RSA1_5:"RSA_PKCS1_PADDING"};function u(t){return i.nodeCrypto&&i.nodeCrypto.constants&&-1!==Object.keys(a).indexOf(t)}function c(t){var e,n,c={name:t};return"RSA-OAEP-256"===t?(c.name="RSA-OAEP",c.hash={name:"SHA-256"}):"RSA-OAEP"===t?c.hash={name:"SHA-1"}:c.name="RSAES-PKCS1-v1_5",e="RSAES-PKCS1-v1_5"!==c.name?function(t,e){return t=o.convertToJWK(t,!0),i.subtleCrypto.importKey("jwk",t,c,!0,["encrypt"]).then(function(t){return i.subtleCrypto.encrypt(c,t,e)}).then(function(t){return{data:Buffer.from(t)}})}:null,u(t)&&(n=function(e,n){return e=o.convertToPem(e,!0),{data:i.nodeCrypto.publicEncrypt({key:e,padding:i.nodeCrypto.constants[a[t]]},n)}}),i.setupFallback(n,e,function(t,e){e=new s(e).bytes();var n=o.convertToForge(t,!0),i={};"RSA-OAEP"===c.name&&(i.md=c.hash.name.toLowerCase().replace(/-/g,""),i.md=r.md[i.md].create());var a=n.encrypt(e,c.name.toUpperCase(),i);return a=new s(a).native(),Promise.resolve({data:a})})}function l(t){var e,n,c={name:t};return"RSA-OAEP-256"===t?(c.name="RSA-OAEP",c.hash={name:"SHA-256"}):"RSA-OAEP"===t?c.hash={name:"SHA-1"}:c.name="RSAES-PKCS1-v1_5",e="RSAES-PKCS1-v1_5"!==c.name?function(t,e){return t=o.convertToJWK(t,!1),i.subtleCrypto.importKey("jwk",t,c,!0,["decrypt"]).then(function(t){return i.subtleCrypto.decrypt(c,t,e)}).then(function(t){return Buffer.from(t)})}:null,u(t)?n=function(e,n){return e=o.convertToPem(e,!1),i.nodeCrypto.privateDecrypt({key:e,padding:i.nodeCrypto.constants[a[t]]},n)}:i.nodeCrypto&&"RSA-OAEP"===t&&(n=function(t,e){return t=o.convertToPem(t,!1),i.nodeCrypto.privateDecrypt(t,e)}),i.setupFallback(n,e,function(t,e){e=new s(e).bytes();var n=o.convertToForge(t,!1),i={};"RSA-OAEP"===c.name&&(i.md=c.hash.name.toLowerCase().replace(/-/g,""),i.md=r.md[i.md].create());var a=n.decrypt(e,c.name.toUpperCase(),i);return a=new s(a).native(),Promise.resolve(a)})}var h={};["RSA-OAEP","RSA-OAEP-256","RSA1_5"].forEach(function(t){h[t]={encrypt:c(t),decrypt:l(t)}}),t.exports=h},71:(t,e,n)=>{"use strict";var r=n(3900),i=n(1815),s=n(9439),o=n(3166);function a(){return s.nodeCrypto&&s.nodeCrypto.constants&&s.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST}function u(t){var e,n=t.replace("RS","SHA").toLowerCase(),i=t.replace("RS","SHA-"),a={name:"RSASSA-PKCS1-V1_5",hash:{name:i}},u="RSA-"+i.replace("-","");return s.nodeCrypto&&s.nodeCrypto.getHashes().indexOf(u)>-1&&(e=function(t,e){var n=s.nodeCrypto.createSign(u);return n.update(e),{data:e,mac:n.sign(o.convertToPem(t,!1))}}),s.setupFallback(e,function(t,e){return t=o.convertToJWK(t,!1),s.subtleCrypto.importKey("jwk",t,a,!0,["sign"]).then(function(t){return s.subtleCrypto.sign(a,t,e)}).then(function(t){var n=Buffer.from(t);return{data:e,mac:n}})},function(t,e){var i=r.md[n].create();i.start(),i.update(e);var s=o.convertToForge(t,!1).sign(i,"RSASSA-PKCS1-V1_5");return s=Buffer.from(s,"binary"),Promise.resolve({data:e,mac:s})})}function c(t){var e,n=t.replace("RS","SHA").toLowerCase(),i={name:"RSASSA-PKCS1-V1_5",hash:{name:t.replace("RS","SHA-")}};return s.nodeCrypto&&s.nodeCrypto.getHashes().indexOf(n)>-1&&(e=function(t,e,r){var i=s.nodeCrypto.createVerify(n);return i.update(e),i.end(),i.verify(o.convertToPem(t,!0),r)?{data:e,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))}),s.setupFallback(e,function(t,e,n){return t=o.convertToJWK(t,!0),s.subtleCrypto.importKey("jwk",t,i,!0,["verify"]).then(function(t){return s.subtleCrypto.verify(i,t,n,e)}).then(function(t){return t?{data:e,mac:n,valid:!0}:Promise.reject(new Error("verification failed"))})},function(t,e,i){var s=r.md[n].create();s.start(),s.update(e),s=s.digest().bytes();var a=o.convertToForge(t,!0),u=i.toString("binary");return a.verify(s,u,"RSASSA-PKCS1-V1_5")?Promise.resolve({data:e,mac:i,valid:!0}):Promise.reject(new Error("verification failed"))})}function l(t){var e,n=t.replace("PS","SHA").toLowerCase(),u=t.replace("PS","SHA-"),c={name:"RSA-PSS",hash:{name:u},saltLength:i.HASHLENGTH[u]/8},l="RSA-"+u.replace("-","");return a()&&(e=function(t,e){var n=s.nodeCrypto.createSign(l);return n.update(e),{data:e,mac:n.sign({key:o.convertToPem(t,!1),padding:s.nodeCrypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST})}}),s.setupFallback(e,function(t,e){return t=o.convertToJWK(t,!1),s.subtleCrypto.importKey("jwk",t,c,!0,["sign"]).then(function(t){return s.subtleCrypto.sign(c,t,e)}).then(function(t){var n=Buffer.from(t);return{data:e,mac:n}})},function(t,e){var s=r.md[n].create();s.start(),s.update(e);var a=r.pss.create({md:r.md[n].create(),mgf:r.mgf.mgf1.create(r.md[n].create()),saltLength:i.HASHLENGTH[u]/8}),c=o.convertToForge(t,!1).sign(s,a);return c=Buffer.from(c,"binary"),Promise.resolve({data:e,mac:c})})}function h(t){var e,n=t.replace("PS","SHA").toLowerCase(),u=t.replace("PS","SHA-"),c={name:"RSA-PSS",hash:{name:u},saltLength:i.HASHLENGTH[u]/8};return a()&&(e=function(t,e,r){var i=s.nodeCrypto.createVerify(n);return i.update(e),i.end(),i.verify({key:o.convertToPem(t,!0),padding:s.nodeCrypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST},r)?{data:e,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))}),s.setupFallback(e,function(t,e,n){return t=o.convertToJWK(t,!0),s.subtleCrypto.importKey("jwk",t,c,!0,["verify"]).then(function(t){return s.subtleCrypto.verify(c,t,n,e)}).then(function(t){return t?{data:e,mac:n,valid:!0}:Promise.reject(new Error("verification failed"))})},function(t,e,s){var a=r.md[n].create();a.start(),a.update(e),a=a.digest().bytes();var c=r.pss.create({md:r.md[n].create(),mgf:r.mgf.mgf1.create(r.md[n].create()),saltLength:i.HASHLENGTH[u]/8}),l=o.convertToForge(t,!0),h=s.toString("binary");return l.verify(a,h,c)?Promise.resolve({data:e,mac:s,valid:!0}):Promise.reject(new Error("verification failed"))})}var p={};["PS256","PS384","PS512"].forEach(function(t){p[t]={sign:l(t),verify:h(t)}}),["RS256","RS384","RS512"].forEach(function(t){p[t]={sign:u(t),verify:c(t)}}),t.exports=p},6868:(t,e,n)=>{"use strict";var r=n(3900),i=n(9439),s={};["SHA-1","SHA-256","SHA-384","SHA-512"].forEach(function(t){var e,n,o;s[t]={digest:(e=t,n=e.replace("SHA-","SHA").toLowerCase(),o={name:e},i.setupFallback(function(t){var e=i.nodeCrypto.createHash(n);return e.update(t),e.digest()},function(t){return i.subtleCrypto.digest(o,t).then(function(t){return Buffer.from(t)})},function(t){var e=r.md[n].create();return e.update(t.toString("binary")),e=Buffer.from(e.digest().bytes(),"binary"),Promise.resolve(e)}))}}),t.exports=s},2757:(t,e,n)=>{"use strict";var r=n(4121),i=n(6112),s=n(1582),o=3774873600,a=new r(o>>8),u=t.exports={E1:o,E1B:225,E1L:a,LOOKUP:function(){for(var t=[],e=0;e<256;++e){for(var n=0,r=7;r>=0;--r)0!=(e&1<<r)&&(n^=o>>>7-r);t.push(n)}return t}(),arrayCopy:function(t,e,n,r,i){if(e<0||r<0||i<0)throw new TypeError("Invalid input.");if(n instanceof Uint8Array){if(r>=n.length||r+i>n.length)throw new TypeError("Invalid input.");(0!==e||i<t.length)&&(t=t instanceof Uint8Array?t.subarray(e,e+i):t.slice(e,e+i)),n.set(t,r)}else for(var s=0;s<i;++s)n[r+s]=t[e+s]},arrayEqual:function(t,e){t=t||[],e=e||[];for(var n=Math.min(t.length,e.length),r=t.length===e.length,i=0;i<n;i++)r=r&&void 0!==t[i]&&void 0!==e[i]&&t[i]===e[i];return r},asBytes:function(t,e){switch(arguments.length){case 1:return e=Buffer.alloc(16),s.intToBigEndian(t,e,0),e;case 2:s.intToBigEndian(t,e,0);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},asInts:function(t,e){switch(arguments.length){case 1:return i(e=[],0,0,4),s.bigEndianToInt(t,0,e),e;case 2:s.bigEndianToInt(t,0,e);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},oneAsInts:function(){for(var t=[],e=0;e<4;++e)t.push(1<<31);return t},shiftRight:function(t,e){var n,r;switch(arguments.length){case 1:return t[0]=(n=t[0])>>>1,r=n<<31,t[1]=(n=t[1])>>>1|r,r=n<<31,t[2]=(n=t[2])>>>1|r,r=n<<31,t[3]=(n=t[3])>>>1|r,n<<31&4294967295;case 2:return e[0]=(n=t[0])>>>1,r=n<<31,e[1]=(n=t[1])>>>1|r,r=n<<31,e[2]=(n=t[2])>>>1|r,r=n<<31,e[3]=(n=t[3])>>>1|r,n<<31&4294967295;default:throw new TypeError("Expected 1 or 2 arguments.")}},shiftRightN:function(t,e,n){var r,i,s;switch(arguments.length){case 2:return r=32-e,t[0]=(i=t[0])>>>e,s=i<<r,t[1]=(i=t[1])>>>e|s,s=i<<r,t[2]=(i=t[2])>>>e|s,s=i<<r,t[3]=(i=t[3])>>>e|s,i<<r;case 3:return r=32-e,n[0]=(i=t[0])>>>e,s=i<<r,n[1]=(i=t[1])>>>e|s,s=i<<r,n[2]=(i=t[2])>>>e|s,s=i<<r,n[3]=(i=t[3])>>>e|s,i<<r;default:throw new TypeError("Expected 2 or 3 arguments.")}},xor:function(t,e,n){switch(arguments.length){case 2:t[0]^=e[0],t[1]^=e[1],t[2]^=e[2],t[3]^=e[3];break;case 3:n[0]=t[0]^e[0],n[1]=t[1]^e[1],n[2]=t[2]^e[2],n[3]=t[3]^e[3];break;default:throw new TypeError("Expected 2 or 3 arguments.")}},multiply:function(t,e){for(var n=t.slice(),r=[],i=0;i<4;++i)for(var s=e[i],o=31;o>=0;--o)0!=(s&1<<o)&&u.xor(r,n),0!==u.shiftRight(n)&&(n[0]^=u.E1);u.arrayCopy(r,0,t,0,4)},multiplyP:function(t,e){switch(arguments.length){case 1:0!==u.shiftRight(t)&&(t[0]^=u.E1);break;case 2:0!==u.shiftRight(t,e)&&(e[0]^=u.E1);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},multiplyP8:function(t,e){var n;switch(arguments.length){case 1:n=u.shiftRightN(t,8),t[0]^=u.LOOKUP[n>>>24];break;case 2:n=u.shiftRightN(t,8,e),e[0]^=u.LOOKUP[n>>>24];break;default:throw new TypeError("Expected 1 or 2 arguments.")}}}},1415:(t,e,n)=>{"use strict";var r=n(4121),i=n(3900),s=n(3611),o=n(2757),a=n(1582),u=n(724),c=n(7801);function l(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=this.blockSize||16}t.exports={createCipher:function(t){var e=new i.aes.Algorithm("AES-GCM",l);return e.initialize({key:new u(t.key)}),e.mode.start(t),e.mode},createDecipher:function(t){var e=new i.aes.Algorithm("AES-GCM",l);return e.initialize({key:new u(t.key)}),e.mode._decrypt=!0,e.mode.start(t),e.mode}},l.prototype.start=function(t){if(this.tag=null,!("iv"in(t=t||{})))throw new Error("Gcm needs ParametersWithIV or AEADParameters");if(this.nonce=t.iv,null==this.nonce||this.nonce.length<1)throw new Error("IV must be at least 1 byte");this.tagLength=16,"tag"in t&&(this.tag=Buffer.from(t.tag)),this.bufBlock=Buffer.alloc(this._decrypt?this.blockSize+this.tagLength:this.blockSize);var e=t.multiplier;if(null==e&&(e=new s["8k"]),this.multiplier=e,this.H=this.zeroBlock(),c.encrypt(this.cipher,this.H,0,this.H,0),this.multiplier.init(this.H),this.exp=null,this.J0=this.zeroBlock(),12===this.nonce.length)this.nonce.copy(this.J0,0,0,this.nonce.length),this.J0[this.blockSize-1]=1;else{this.gHASH(this.J0,this.nonce,this.nonce.length);var n=this.zeroBlock();a.longToBigEndian(new r(this.nonce.length).multiply(8),n,8),this.gHASHBlock(this.J0,n)}this.S=this.zeroBlock(),this.SAt=this.zeroBlock(),this.SAtPre=this.zeroBlock(),this.atBlock=this.zeroBlock(),this.atBlockPos=0,this.atLength=r.ZERO,this.atLengthPre=r.ZERO,this.counter=Buffer.from(this.J0),this.bufOff=0,this.totalLength=r.ZERO,"additionalData"in t&&this.processAADBytes(t.additionalData,0,t.additionalData.length)},l.prototype.update=function(t,e,n,r,i){for(var s=0;n>0;){var o=Math.min(n,this.bufBlock.length-this.bufOff);t.copy(this.bufBlock,this.bufOff,e,e+o),n-=o,e+=o,this.bufOff+=o,this.bufOff===this.bufBlock.length&&(this.outputBlock(r,i+s),s+=this.blockSize)}return s},l.prototype.finish=function(t,e){var n=0;this._decrypt&&(n+=this.update(this.tag,0,this.tag.length,t,e)),this.totalLength.isZero()&&this.initCipher();var r=this.bufOff;if(this._decrypt){if(r<this.tagLength)throw new Error("data too short");r-=this.tagLength}r>0&&(this.gCTRPartial(this.bufBlock,0,r,t,e+n),n+=r),this.atLength=this.atLength.add(this.atBlockPos);var i=this.zeroBlock();a.longToBigEndian(this.atLength.multiply(8),i,0),a.longToBigEndian(this.totalLength.multiply(8),i,8),this.gHASHBlock(this.S,i);var s=Buffer.alloc(this.blockSize);if(c.encrypt(this.cipher,this.J0,0,s,0),this.xor(s,this.S),this._decrypt){if(!o.arrayEqual(this.tag,s))throw new Error("mac check in Gcm failed")}else this.tag=Buffer.alloc(this.tagLength),s.copy(this.tag,0,0,this.tagLength);return n},l.prototype.initCipher=function(){this.atLength.greaterThan(r.ZERO)&&(this.SAt.copy(this.SAtPre,0,0,this.blockSize),this.atLengthPre=this.atLength.add(r.ZERO)),this.atBlockPos>0&&(this.gHASHPartial(this.SAtPre,this.atBlock,0,this.atBlockPos),this.atLengthPre=this.atLengthPre.add(this.atBlockPos)),this.atLengthPre.greaterThan(r.ZERO)&&this.SAtPre.copy(this.S,0,0,this.blockSize)},l.prototype.outputBlock=function(t,e){this.totalLength.isZero()&&this.initCipher(),this.gCTRBlock(this.bufBlock,t,e),this._decrypt?(this.bufBlock.copy(this.bufBlock,0,this.blockSize,this.blockSize+this.tagLength),this.bufOff=this.tagLength):this.bufOff=0},l.prototype.processAADBytes=function(t,e,n){for(var r=0;r<n;++r)this.atBlock[this.atBlockPos]=t[e+r],++this.atBlockPos===this.blockSize&&(this.gHASHBlock(this.SAt,this.atBlock),this.atBlockPos=0,this.atLength=this.atLength.add(this.blockSize))},l.prototype.getNextCounterBlock=function(){for(var t=15;t>=12;--t){var e=this.counter[t]+1&255;if(this.counter[t]=e,0!==e)break}var n=Buffer.alloc(this.blockSize);return c.encrypt(this.cipher,this.counter,0,n,0),n},l.prototype.gCTRBlock=function(t,e,n){var r=this.getNextCounterBlock();this.xor(r,t),r.copy(e,n,0,this.blockSize),this.gHASHBlock(this.S,this._decrypt?t:r),this.totalLength=this.totalLength.add(this.blockSize)},l.prototype.gCTRPartial=function(t,e,n,r,i){var s=this.getNextCounterBlock();this.xor(s,t,e,n),s.copy(r,i,0,n),this.gHASHPartial(this.S,this._decrypt?t:s,0,n),this.totalLength=this.totalLength.add(n)},l.prototype.gHASHBlock=function(t,e){this.xor(t,e),this.multiplier.multiplyH(t)},l.prototype.gHASHPartial=function(t,e,n,r){this.xor(t,e,n,r),this.multiplier.multiplyH(t)},l.prototype.xor=function(t,e,n,r){switch(arguments.length){case 2:for(var i=15;i>=0;--i)t[i]^=e[i];break;case 4:for(;r-- >0;)t[r]^=e[n+r];break;default:throw new TypeError("Expected 2 or 4 arguments.")}return t},l.prototype.zeroBlock=function(){return Buffer.alloc(16)}},3611:(t,e,n)=>{"use strict";var r=n(2757),i=n(1582);function s(){this.H=[],this.M=null}s.prototype.init=function(t){var e,n,i;if(null==this.M)for(this.M=[],e=0;e<32;++e)for(this.M[e]=[],n=0;n<16;++n)for(this.M[e][n]=[],i=0;i<4;++i)this.M[e][n][i]=0;else if(r.arrayEqual(this.H,t))return;for(this.H=t.slice(),r.asInts(t,this.M[1][8]),n=4;n>=1;n>>=1)r.multiplyP(this.M[1][n+n],this.M[1][n]);for(r.multiplyP(this.M[1][1],this.M[0][8]),n=4;n>=1;n>>=1)r.multiplyP(this.M[0][n+n],this.M[0][n]);for(e=0;;){for(n=2;n<16;n+=n)for(i=1;i<n;++i)r.xor(this.M[e][n],this.M[e][i],this.M[e][n+i]);if(32==++e)return;if(e>1)for(n=8;n>0;n>>=1)r.multiplyP8(this.M[e-2][n],this.M[e][n])}},s.prototype.multiplyH=function(t){for(var e=[],n=15;n>=0;--n){var r=this.M[n+n][15&t[n]];e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],e[0]^=(r=this.M[n+n+1][(240&t[n])>>>4])[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3]}i.intToBigEndian(e,t,0)},t.exports={"8k":s}},7801:(t,e,n)=>{"use strict";var r=n(1582);t.exports={encrypt:function(t,e,n,i,s){var o=new Array(4),a=new Array(4);r.bigEndianToInt(e,n,o),t.encrypt(o,a),r.intToBigEndian(a,i,s)}}},1582:(t,e,n)=>{"use strict";var r=n(4121),i=t.exports={intToBigEndian:function(t,e,n){if("number"==typeof t)switch(arguments.length){case 1:e=Buffer.alloc(4),i.intToBigEndian(t,e,0);break;case 3:e[n]=255&t>>>24,e[++n]=255&t>>>16,e[++n]=255&t>>>8,e[++n]=255&t;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:e=Buffer.alloc(4*t.length),i.intToBigEndian(t,e,0);break;case 3:for(var r=0;r<t.length;++r)i.intToBigEndian(t[r],e,n),n+=4;break;default:throw new TypeError("Expected 1 or 3 arguments.")}return e},longToBigEndian:function(t,e,n){if(Array.isArray(t))switch(arguments.length){case 1:e=Buffer.alloc(8*t.length),i.longToBigEndian(t,e,0);break;case 3:for(var r=0;r<t.length;++r)i.longToBigEndian(t[r],e,n),n+=8;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:e=Buffer.alloc(8),i.longToBigEndian(t,e,0);break;case 3:var s=t.low,o=t.high;i.intToBigEndian(o,e,n),i.intToBigEndian(s,e,n+4);break;default:throw new TypeError("Expected 1 or 3 arguments.")}return e},bigEndianToInt:function(t,e,n){switch(arguments.length){case 2:var r=t[e]<<24;return r|=(255&t[++e])<<16,(r|=(255&t[++e])<<8)|255&t[++e];case 3:for(var s=0;s<n.length;++s)n[s]=i.bigEndianToInt(t,e),e+=4;break;default:throw new TypeError("Expected 2 or 3 arguments.")}},bigEndianToLong:function(t,e,n){switch(arguments.length){case 2:var s=i.bigEndianToInt(t,e),o=i.bigEndianToInt(t,e+4),a=new r(o,s);return a;case 3:for(var u=0;u<n.length;++u)n[u]=i.bigEndianToLong(t,e),e+=8;break;default:throw new TypeError("Expected 2 or 3 arguments.")}}}},3938:(t,e,n)=>{"use strict";var r=n(3900).jsbn.BigInteger,i=n(5047);function s(t,e,n,r){this.curve=t,this.g=e,this.n=n,this.h=r}function o(t){return new r(t,16)}s.prototype.getCurve=function(){return this.curve},s.prototype.getG=function(){return this.g},s.prototype.getN=function(){return this.n},s.prototype.getH=function(){return this.h};var a,u,c,l,h,p,f,d=t.exports={secp256r1:(a=o("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),u=o("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),c=o("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),l=o("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),h=r.ONE,p=new i.ECCurveFp(a,u,c),f=p.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5"),new s(p,f,l,h)),secp384r1:function(){var t=o("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF"),e=o("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC"),n=o("B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF"),a=o("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973"),u=r.ONE,c=new i.ECCurveFp(t,e,n),l=c.decodePointHex("04AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB73617DE4A96262C6F5D9E98BF9292DC29F8F41DBD289A147CE9DA3113B5F0B8C00A60B1CE1D7E819D7A431D7C90EA0E5F");return new s(c,l,a,u)}(),secp521r1:function(){var t=o("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),e=o("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC"),n=o("0051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00"),a=o("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409"),u=r.ONE,c=new i.ECCurveFp(t,e,n),l=c.decodePointHex("0400C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66011839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650");return new s(c,l,a,u)}()};d["P-256"]=d.secp256r1,d["P-384"]=d.secp384r1,d["P-521"]=d.secp521r1},3754:(t,e,n)=>{"use strict";var r=n(3900),i=r.jsbn.BigInteger,s=n(5047),o=n(3938);function a(t){return new i(t,16)}function u(t,e){e||(e=Math.ceil(t.bitLength()/8)),e*=2;var n=t.toString(16);for(n=n.substring(Math.max(n.length-e,0));e>n.length;)n="0"+n;return Buffer.from(n,"hex")}function c(t){return"string"==typeof t&&(t=Buffer.from(t,"binary")),a(t.toString("hex"))}function l(t){return Math.ceil(t.getN().bitLength()/8)}function h(t){var e=o[t];if(!e)throw new TypeError("unsupported named curve: "+t);return e}function p(t,e){var n=t.getN().bitLength(),r=8*e.length,i=c(e);return n<r&&(i=i.shiftRight(r-n)),i}function f(t,e,n){var r=h(t),i=r.getCurve(),o=new s.ECPointFp(i,i.fromBigInteger(e),i.fromBigInteger(n));this.curve=t,this.params=r,this.point=o;var a=l(r);this.x=u(e,a),this.y=u(n,a)}function d(t,e){var n=h(t);this.curve=t,this.params=n;var r=l(n);this.d=u(e,r)}f.prototype.isValid=function(){return this.params.curve.contains(this.point)},f.prototype.verify=function(t,e){var n=this.params.getN(),r=this.params.getG(),s=c(e.r),o=c(e.s);if(s.compareTo(i.ONE)<0||s.compareTo(n)>=0)return!1;if(o.compareTo(i.ONE)<0||s.compareTo(n)>=0)return!1;var a=p(this.params,t),u=o.modInverse(n),l=a.multiply(u).mod(n),h=s.multiply(u).mod(n),f=r.multiplyTwo(l,this.point,h).getX().toBigInteger();return(f=f.mod(n)).equals(s)},d.prototype.toPublicKey=function(){var t=c(this.d),e=this.params.getG().multiply(t);return new f(this.curve,e.getX().toBigInteger(),e.getY().toBigInteger())},d.prototype.sign=function(t){var e,n,s,o,a=l(this.params),h=this.params.getN(),f=this.params.getG(),d=p(this.params,t),m=c(this.d);do{do{do{s=c(r.random.getBytes(a))}while(s.equals(i.ZERO)||s.compareTo(h)>=0);e=f.multiply(s).getX().toBigInteger().mod(h)}while(e.equals(i.ZERO));o=m.multiply(e),o=d.add(o),n=s.modInverse(h).multiply(o).mod(h)}while(n.equals(i.ONE));var g=l(this.params);return{r:e=u(e,g),s:n=u(n,g)}},d.prototype.isValid=function(){var t=c(this.d),e=this.params.getN().subtract(i.ONE);return t.compareTo(i.ONE)>=0&&t.compareTo(e)<0},d.prototype.computeSecret=function(t){var e=c(this.d);return u(t.point.multiply(e).getX().toBigInteger(),l(this.params))},e.generateKeyPair=function(t){var e=h(t),n=e.getN(),s=r.random.getBytes(l(e));s=c(s);var o=n.subtract(i.ONE),a=new d(t,s.mod(o).add(i.ONE)),u=a.toPublicKey();return{private:a,public:u}},e.asPublicKey=function(t,e,n){return"string"==typeof e?e=a(e):Buffer.isBuffer(e)&&(e=c(e)),"string"==typeof n?n=a(n):Buffer.isBuffer(n)&&(n=c(n)),new f(t,e,n)},e.asPrivateKey=function(t,e){return"string"==typeof e?e=a(e):Buffer.isBuffer(e)&&(e=c(e)),new d(t,e)}},5047:(t,e,n)=>{"use strict";var r=n(3900).jsbn.BigInteger;function i(){return new r(null)}function s(t){this.r2=i(),this.q3=i(),r.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function o(t,e){this.x=e,this.p=t}function a(t,e,n,i){this.curve=t,this.x=e,this.y=n,this.z=i||r.ONE,this.zinv=null}function u(t,e,n){this.p=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new a(this,null,null),this.reducer=new s(this.p)}s.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=i();return t.copyTo(e),this.reduce(e),e},s.prototype.revert=function(t){return t},s.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},s.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},s.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},o.prototype.equals=function(t){return t===this||this.p.equals(t.p)&&this.x.equals(t.x)},o.prototype.toBigInteger=function(){return this.x},o.prototype.negate=function(){return new o(this.p,this.x.negate().mod(this.p))},o.prototype.add=function(t){return new o(this.p,this.x.add(t.toBigInteger()).mod(this.p))},o.prototype.subtract=function(t){return new o(this.p,this.x.subtract(t.toBigInteger()).mod(this.p))},o.prototype.multiply=function(t){return new o(this.p,this.x.multiply(t.toBigInteger()).mod(this.p))},o.prototype.square=function(){return new o(this.p,this.x.pow(2).mod(this.p))},o.prototype.divide=function(t){return new o(this.p,this.x.multiply(t.toBigInteger().modInverse(this.p)).mod(this.p))},a.prototype.getX=function(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var t=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(t),this.curve.fromBigInteger(t)},a.prototype.getY=function(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var t=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(t),this.curve.fromBigInteger(t)},a.prototype.equals=function(t){return t===this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.p).equals(r.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.p).equals(r.ZERO))},a.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(r.ZERO)&&!this.y.toBigInteger().equals(r.ZERO)},a.prototype.negate=function(){return new a(this.curve,this.x,this.y.negate(),this.z)},a.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.p),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.p);if(r.ZERO.equals(n))return r.ZERO.equals(e)?this.twice():this.curve.getInfinity();var i=new r("3"),s=this.x.toBigInteger(),o=this.y.toBigInteger(),u=n.pow(2),c=u.multiply(n),l=s.multiply(u),h=e.pow(2).multiply(this.z),p=h.subtract(l.shiftLeft(1)).multiply(t.z).subtract(c).multiply(n).mod(this.curve.p),f=l.multiply(i).multiply(e).subtract(o.multiply(c)).subtract(h.multiply(e)).multiply(t.z).add(e.multiply(c)).mod(this.curve.p),d=c.multiply(this.z).multiply(t.z).mod(this.curve.p);return new a(this.curve,this.curve.fromBigInteger(p),this.curve.fromBigInteger(f),d)},a.prototype.twice=function(){if(this.isInfinity())return this;if(0===this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new r("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),i=n.multiply(this.z),s=i.multiply(n).mod(this.curve.p),o=this.curve.a.toBigInteger(),u=e.pow(2).multiply(t);r.ZERO.equals(o)||(u=u.add(this.z.pow(2).multiply(o)));var c=(u=u.mod(this.curve.p)).pow(2).subtract(e.shiftLeft(3).multiply(s)).shiftLeft(1).multiply(i).mod(this.curve.p),l=u.multiply(t).multiply(e).subtract(s.shiftLeft(1)).shiftLeft(2).multiply(s).subtract(u.pow(2).multiply(u)).mod(this.curve.p),h=i.pow(2).multiply(i).shiftLeft(3).mod(this.curve.p);return new a(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(l),h)},a.prototype.multiply=function(t){if(this.isInfinity())return this;if(0===t.signum())return this.curve.getInfinity();var e,n=t,i=n.multiply(new r("3")),s=this.negate(),o=this;for(e=i.bitLength()-2;e>0;--e){o=o.twice();var a=i.testBit(e);a!==n.testBit(e)&&(o=o.add(a?this:s))}return o},a.prototype.multiplyTwo=function(t,e,n){var r;r=t.bitLength()>n.bitLength()?t.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(e);r>=0;)i=i.twice(),t.testBit(r)?i=n.testBit(r)?i.add(s):i.add(this):n.testBit(r)&&(i=i.add(e)),--r;return i},u.prototype.getP=function(){return this.p},u.prototype.getA=function(){return this.a},u.prototype.getB=function(){return this.b},u.prototype.equals=function(t){return t===this||this.p.equals(t.p)&&this.a.equals(t.a)&&this.b.equals(t.b)},u.prototype.contains=function(t){var e=t.getX().toBigInteger(),n=t.getY().toBigInteger(),r=this.a.toBigInteger(),i=this.b.toBigInteger(),s=this.p,o=n.pow(2).mod(s),a=e.pow(3).add(r.multiply(e)).add(i).mod(s);return o.equals(a)},u.prototype.getInfinity=function(){return this.infinity},u.prototype.fromBigInteger=function(t){return new o(this.p,t)},u.prototype.reduce=function(t){this.reducer.reduce(t)},u.prototype.decodePointHex=function(t){switch(parseInt(t.substring(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,n=t.substr(2,e),i=t.substr(e+2,e);return new a(this,this.fromBigInteger(new r(n,16)),this.fromBigInteger(new r(i,16)));default:return null}},u.prototype.encodePointHex=function(t){if(t.isInfinity())return"00";var e=t.getX().toBigInteger().toString(16),n=t.getY().toBigInteger().toString(16),r=this.getP().toString(16).length;for(r%2!=0&&r++;e.length<r;)e="0"+e;for(;n.length<r;)n="0"+n;return"04"+e+n},t.exports={ECFieldElementFp:o,ECPointFp:a,ECCurveFp:u}},3900:(t,e,n)=>{"use strict";var r,i,s=n(716);function o(t){t=t||{},this.name="",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=new Array(this._blocks),this._outBlock=new Array(this._blocks)}n(4937),n(8493),n(5455),n(7243),n(4947),n(5369),n(3832),n(2280),n(8469),n(983),n(1745),n(6907),n(7830),n(6200),n(736),n(2507),n(9458),n(2038),o.prototype.start=function(){},o.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;var r;for(r=0;r<this._blocks;++r)this._inBlock[r]=t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),r=0;r<this._blocks;++r)e.putInt32(this._outBlock[r])},o.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;var r;for(r=0;r<this._blocks;++r)this._inBlock[r]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),r=0;r<this._blocks;++r)e.putInt32(this._outBlock[r])},i=o,r=function(){return new s.aes.Algorithm("AES",i)},s.cipher.registerAlgorithm("AES",r),t.exports=s},7184:(t,e,n)=>{"use strict";"undefined"==typeof Promise&&n(3021).polyfill(),"undefined"==typeof Buffer&&((global||window).Buffer=n(5329).lW),"undefined"==typeof process&&((global||window).process=n(9849)),process.version||(process.version="");var r=n(4681);t.exports={JWA:n(6120),JWE:n(6415),JWK:n(9595),JWS:r,util:n(2407),parse:n(9322),canYouSee:r.createVerify}},8870:(t,e,n)=>{"use strict";var r=n(326),i=n(7423),s=n(9595),o=n(2897),a=n(5105),u={algorithms:"*"};function c(t,e){var n,c;if(s.isKey(t))c=(n=t).keystore;else{if(!s.isKeyStore(t))throw new TypeError("Keystore must be provided");c=t}e=o({},u,e),Object.defineProperty(this,"decrypt",{value:function(t,u){var l,h,p,f,d,m=(u=o({},e,u||{})).handlers||{},g=Object.keys(m),v=new i(u.algorithms);if("string"==typeof t)t={protected:(t=t.split("."))[0],recipients:[{encrypted_key:t[1]}],iv:t[2],ciphertext:t[3],tag:t[4]};else if(!t||"object"!=typeof t)throw new Error("invalid input");return"encrypted_key"in t&&(t.recipients=[{encrypted_key:t.encrypted_key}]),Promise.resolve(t.recipients||[{}]).then(function(e){if(t.protected){h=r.decode(t.protected).toString("utf8");var n=(h=JSON.parse(h)).crit;if(n){if(!Array.isArray(n))return Promise.reject(new Error("Invalid 'crit' header"));for(var i=0;n.length>i;i++)if(-1===g.indexOf(n[i]))return Promise.reject(new Error("Critical extension is not supported: "+n[i]))}l=h,h=Object.keys(h)}else l={},h=[];return l=o(t.unprotected||{},l),e=e.map(function(t){var e=Promise.resolve(),n=t.header||{};return n=o(n,l),t.header=n,t.protected=h,v.match(n.alg)||(e=e.then(function(){return Promise.reject(new Error("Algorithm not allowed: "+n.alg))})),v.match(n.enc)||(e=e.then(function(){return Promise.reject(new Error("Algorithm not allowed: "+n.enc))})),n.epk&&(e=(e=e.then(function(){return s.asKey(n.epk)})).then(function(t){n.epk=t.toObject(!1)})),e.then(function(){return t})}),Promise.all(e)}).then(function(t){var e={};return new Promise(function(i,o){var a=function(){var u=t.shift();if(u){var l=Promise.resolve(u);(l=(l=l.then(function(t){var e=d=t.encrypted_key||"";return e=r.decode(e),(p=n||c.get({use:"enc",alg:t.header.alg,kid:t.header.kid}))?p.unwrap(t.header.alg,e,t.header):Promise.reject()})).then(function(t){f={kty:"oct",k:r.encode(t)},f=s.asKey(f),e.key=p,e.header=u.header,e.protected=u.protected,i(e)})).catch(a)}else o(new Error("no key found"))};a()})}).then(function(e){return e.iv=t.iv,e.tag=t.tag,e.ciphertext=t.ciphertext,e}).then(function(t){var e=[];return g.forEach(function(n){var r;"function"==typeof(n=m[n])?r=n(t):"object"==typeof n&&"function"==typeof n.prepare&&(r=n.prepare(t)),r&&e.push(Promise.resolve(r))}),Promise.all(e).then(function(){return t})}).then(function(t){return Buffer.isBuffer(t.ciphertext)||(t.ciphertext=r.decode(t.ciphertext)),t}).then(function(e){var n=t.protected;"aad"in t&&null!=t.aad&&(n+="."+t.aad);var r={iv:e.iv,adata:n,tag:e.tag,kdata:d,epu:e.epu,epv:e.epv},i=e.ciphertext;return delete e.iv,delete e.tag,delete e.ciphertext,f.then(function(t){return t.decrypt(e.header.enc,i,r).then(function(t){return e.payload=e.plaintext=t,e})})}).then(function(t){return"DEF"===t.header.zip?new Promise(function(e,n){try{var r=a.inflateRaw(Buffer.from(t.plaintext));t.payload=t.plaintext=Buffer.from(r),e(t)}catch(i){n(i)}}):t}).then(function(t){var e=[];return g.forEach(function(n){var r;"object"==typeof(n=m[n])&&"function"==typeof n.complete&&(r=n.complete(t)),r&&e.push(Promise.resolve(r))}),Promise.all(e).then(function(){return t})})}})}t.exports={decrypter:c,createDecrypt:function(t,e){return new c(t,e)}}},6381:t=>{"use strict";t.exports={zip:!1,format:"general",contentAlg:"A128CBC-HS256",protect:"*"}},7390:(t,e,n)=>{"use strict";var r=n(2407),i=n(8853).generateCEK,s=n(9595),o=n(8853).slice,a=n(5105),u=n(1815),c=n(8115),l=n(3742),h=n(6381);function p(t,e,n){var o=!1,h=t.format||"general",p=!!t.protectAll,f=Buffer.alloc(0);Object.defineProperty(this,"zip",{get:function(){return e.zip||""},enumerable:!0}),Object.defineProperty(this,"compact",{get:function(){return"compact"===h},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return h},enumerable:!0}),Object.defineProperty(this,"protected",{get:function(){return l(t.protect)},enumerable:!0}),Object.defineProperty(this,"header",{get:function(){return l(e)},enumerable:!0}),Object.defineProperty(this,"update",{value:function(t,e){if(o)throw new Error("already final");return null!=t&&(t=r.asBuffer(t,e),f=f.length?Buffer.concat([f,t],f.length+t.length):t),this}}),Object.defineProperty(this,"final",{value:function(d,m){if(o)return Promise.reject(new Error("already final"));this.update(d,m),o=!0;var g,v=Promise.resolve({}),y=e.enc;v=(v=v.then(function(e){return t.cek&&(g=s.asKey(t.cek)),e})).then(function(o){var a=Promise.all(n);return(a=a.then(function(n){var o=1===n.length;return n=n.map(function(n){return function(n,o){var a={};a=c(a,e),a=c(a,n.header);var u,h,p=n.key,f=a.alg;return 0===(a.alg||"").indexOf("ECDH-ES")?(u=p.keystore.temp(),h=n.epk?Promise.resolve(n.epk).then(function(t){n.header.epk=t.toJSON(!1,["kid"]),a.epk=t.toObject(!0,["kid"])}):u.generate("EC",p.get("crv")).then(function(t){n.header.epk=t.toJSON(!1,["kid"]),a.epk=t.toObject(!0,["kid"])})):h=Promise.resolve(),(h=h.then(function(){var n,r;return"dir"===f&&o?r=(g=Promise.resolve(p)).then(function(t){return y||(a.enc=e.enc=y=t.algorithms(s.MODE_ENCRYPT)[0]),{once:!0,direct:!0}}):(g||(y||(a.enc=e.enc=y=t.contentAlg),g=i(y)),r=(r=g.then(function(t){return n=t.get("k",!0),p})).then(function(t){return t.wrap(f,n,a)})),r})).then(function(t){if(t.once&&!o)return Promise.reject(new Error("cannot use 'alg':'"+f+"' with multiple recipients"));var e,i={};return t.data&&(e=r.base64url.encode(e=t.data)),t.direct&&e?g=s.asKey({kty:"oct",k:e}):e&&(i.encrypted_key=e),n.header&&Object.keys(n.header).length&&(i.header=l(n.header||{})),t.header&&(i.header=c(i.header||{},t.header)),i})}(n,o)}),Promise.all(n)})).then(function(t){return o.recipients=t.filter(function(t){return!!t}),o})});var b={};switch(v=(v=(v=v.then(function(n){var i,s,o,a;return o=l(e),p&&1===n.recipients.length||"compact"===h?(i={},i=c({},o,n.recipients[0].header),s=Object.keys(i).length,o=void 0,a=0,delete n.recipients[0].header,0===Object.keys(n.recipients[0]).length&&n.recipients.splice(0,1)):(i={},s=0,a=Object.keys(o).length,t.protect.forEach(function(t){t in o&&(i[t]=o[t],s++,delete o[t],a--)}),n.recipients=(n.recipients||[]).map(function(t){var e=(t=t||{}).header;return e&&(Object.keys(e).forEach(function(t){t in i&&delete e[t]}),Object.keys(e).length||delete t.header),t})),n.recipients&&0!==n.recipients.length||delete n.recipients,o&&a>0&&(b=c(b,o),n.unprotected=o),i&&s>0&&(b=c(b,i),i=JSON.stringify(i),n.protected=r.base64url.encode(i,"utf8")),n})).then(function(t){var e=f;return b.zip?"DEF"===b.zip?new Promise(function(n,r){try{var i=a.deflateRaw(Buffer.from(e,"binary"));t.plaintext=Buffer.from(i),n(t)}catch(s){r(s)}}):Promise.reject(new Error("unsupported 'zip' mode")):(t.plaintext=e,t)})).then(function(e){b.adata=e.protected,"aad"in t&&null!=t.aad&&(b.adata+="."+t.aad,b.adata=Buffer.from(b.adata,"utf8"));var n=t.iv||r.randomBytes(u.NONCELENGTH[y]/8);"string"==typeof n&&(n=r.base64url.decode(n)),b.iv=n,"recipients"in e&&1===e.recipients.length&&(b.kdata=e.recipients[0].encrypted_key),"epu"in t&&null!=t.epu&&(b.epu=t.epu),"epv"in t&&null!=t.epv&&(b.epv=t.epv);var i=e.plaintext;return delete e.plaintext,g.then(function(s){return s.encrypt(y,i,b).then(function(i){return e.iv=r.base64url.encode(n,"binary"),"aad"in t&&null!=t.aad&&(e.aad=t.aad),e.ciphertext=r.base64url.encode(i.data,"binary"),e.tag=r.base64url.encode(i.tag,"binary"),e})})}),h){case"compact":v=v.then(function(t){var e=new Array(5);return e[0]=t.protected,t.recipients&&t.recipients[0]&&(e[1]=t.recipients[0].encrypted_key),e[2]=t.iv,e[3]=t.ciphertext,e[4]=t.tag,e.join(".")});break;case"flattened":v=v.then(function(t){var e={},n=t.recipients&&t.recipients[0];return t.protected&&(e.protected=t.protected),t.unprotected&&(e.unprotected=t.unprotected),["header","encrypted_key"].forEach(function(t){n&&t in n&&n[t]&&("object"!=typeof n[t]||Object.keys(n[t]).length)&&(e[t]=n[t])}),t.aad&&(e.aad=t.aad),e.iv=t.iv,e.ciphertext=t.ciphertext,e.tag=t.tag,e});break;case"general":v=v.then(function(t){var e=t.recipients||[];return(e=(e=e.map(function(t){if(Object.keys(t).length)return t})).filter(function(t){return!!t})).length?t.recipients=e:delete t.recipients,t})}return v}})}t.exports={encrypter:p,createEncrypt:function(t,e){var n=t,i=1,a=e;if(0===arguments.length)throw new Error("at least one recipient must be provided");1===arguments.length||s.isKey(t)||t&&"kty"in t||t&&"key"in t&&(s.isKey(t.key)||"kty"in t.key)?(a=t,i=0,n={}):n=l(t),Array.isArray(a)||(a=o(arguments,i)),n=c(l(h),n);var u=l(n.fields||{});switch(n.zip&&(u.zip="boolean"==typeof n.zip?!!n.zip&&"DEF":n.zip),n.format=(n.compact?"compact":n.format)||"general",n.format){case"compact":if("aad"in t)throw new Error("additional authenticated data cannot be used for compact serialization");case"flattened":if(a.length>1)throw new Error("too many recipients for compact serialization")}var f=!1;if("compact"===n.format||"*"===n.protect)f=!0,n.protect=Object.keys(u).concat("enc");else if("string"==typeof n.protect)n.protect=[n.protect];else if(Array.isArray(n.protect))n.protect=n.protect.concat();else{if(n.protect)throw new Error("protect must be a list of fields");n.protect=[]}if(f&&1<a.length)throw new Error("too many recipients to protect all header parameters");a=a.map(function(t,e){var n;return n=t&&"kty"in t?(n=s.asKey(t)).then(function(t){return{key:t}}):t?(n=s.asKey(t.key)).then(function(e){return{header:t.header,reference:t.reference,key:e}}):Promise.reject(new Error("missing key for recipient "+e)),t.epk&&(n=n.then(function(e){return s.asKey(t.epk).then(function(t){return e.epk=t,e})})),n.then(function(t){var n=t.key,r=t.header||{};t.header=r;var i={};if(i=c(i,u),(i=c(i,t.header)).alg||(i.alg=n.algorithms(s.MODE_WRAP)[0],r.alg=i.alg),!i.alg)return Promise.reject(new Error("key not valid for encrypting to recipient "+e));r.alg=i.alg;var o,a=t.reference;if(delete t.reference,void 0===a?a=(a=["kid","jku","x5c","x5t","x5u"].some(function(t){return t in r}))?null:"kid":"boolean"==typeof a&&(a=a?"kid":null),a)if(o=n.toJSON(),"jwk"===a){if("oct"===n.kty)return Promise.reject(new Error("cannot embed key"));r.jwk=o}else a in o&&(r[a]=o[a]);return Object.freeze(t)})});var d={aad:"aad"in n?r.base64url.encode(n.aad||""):null,contentAlg:n.contentAlg,format:n.format,protect:n.protect,cek:n.cek,iv:n.iv,protectAll:f},m=new p(d,u,a);return m}}},8853:(t,e,n)=>{"use strict";var r=n(1815),i=n(9595);t.exports={slice:function(t,e){return Array.prototype.slice.call(t,e||0)},generateCEK:function(t){var e=i.createKeyStore(),n=r.KEYLENGTH[t];if(n)return e.generate("oct",n);throw new Error("unsupported encryption algorithm")}}},6415:(t,e,n)=>{"use strict";var r={createEncrypt:n(7390).createEncrypt,createDecrypt:n(8870).createDecrypt};t.exports=r},2752:(t,e,n)=>{"use strict";var r=n(2897);const{v4:i}=n(9503);var s=n(8115),o=n(3742),a=n(4694),u=n(8023),c=n(2482),l=n(1133),h=n(2699),p=n(6120),f=n(7047),d=n(2028),m=n(2407);t.exports=function(t,e,n,g){if(!t)throw new Error("kty cannot be null");if(!e)throw new Error("keystore cannot be null");if(!n)throw new Error("props cannot be null");if("string"==typeof n&&(n=JSON.parse(n)),!g)throw new Error("cfg cannot be null");var v,y,b=[],w={},x={};n=o(n),v=s({},n[d.INTERNALS.THUMBPRINT_KEY]||{}),delete n[d.INTERNALS.THUMBPRINT_KEY],Object.keys(v).forEach(function(t){var e=v[t];y||(y=e,Buffer.isBuffer(y)&&(y=m.base64url.encode(y))),Buffer.isBuffer(e)||(e=m.base64url.decode(e),v[t]=e)}),n.kty=t,n.kid=n.kid||y||i();var E,_=Object.keys(d.COMMON_PROPS).map(function(t){return d.COMMON_PROPS[t].name});x.base=l(n,_),b=b.concat(Object.keys(x.base)),x.public=o(n),w.public=g.publicKey(x.public),w.public&&(b=b.concat(Object.keys(x.public))),x.private=o(n),w.private=g.privateKey(x.private),w.private&&(b=b.concat(Object.keys(x.private))),x.extra=c(n,b),E=w.public&&"length"in w.public?w.public.length:w.private&&"length"in w.private?w.private.length:NaN,Object.defineProperty(this,"keystore",{value:e,enumerable:!0}),Object.defineProperty(this,"length",{value:E,enumerable:!0}),Object.defineProperty(this,"kty",{value:t,enumerable:!0}),Object.defineProperty(this,"kid",{value:x.base.kid,enumerable:!0}),Object.defineProperty(this,"use",{value:x.base.use||"",enumerable:!0}),Object.defineProperty(this,"alg",{value:x.base.alg||"",enumerable:!0}),Object.defineProperty(this,"thumbprint",{value:function(t){return t=(t||d.INTERNALS.THUMBPRINT_HASH).toUpperCase(),v[t]?Promise.resolve(v[t]):d.thumbprint(g,x,t).then(function(e){return e&&(v[t]=e),e})}}),Object.defineProperty(this,"algorithms",{value:function(e){var n=[];this.use&&"sig"!==this.use||(e&&f.MODE_SIGN!==e||n.push(f.MODE_SIGN),e&&f.MODE_VERIFY!==e||n.push(f.MODE_VERIFY)),this.use&&"enc"!==this.use||(e&&f.MODE_ENCRYPT!==e||n.push(f.MODE_ENCRYPT),e&&f.MODE_DECRYPT!==e||n.push(f.MODE_DECRYPT),e&&f.MODE_WRAP!==e||n.push(f.MODE_WRAP),e&&f.MODE_UNWRAP!==e||n.push(f.MODE_UNWRAP));var r=this,i=n.map(function(t){return g.algorithms.call(r,w,t)});return i=a(i),i=h(i),this.alg&&(i=u(i,"oct"===t?[this.alg,"dir"]:[this.alg])),i}}),Object.defineProperty(this,"supports",{value:function(t,e){return-1!==this.algorithms(e).indexOf(t)}}),Object.defineProperty(this,"has",{value:function(t,e){var n=!1;return(n=(n=(n=n||!(!x.base||!(t in x.base)))||!(!w.public||!(t in w.public)))||!(!x.extra||!(t in x.extra)))||!!(e&&w.private&&t in w.private)}}),Object.defineProperty(this,"get",{value:function(t,e){var n;return x.base&&t in x.base?n=x.base:w.public&&t in w.public?n=w.public:x.extra&&t in x.extra?n=x.extra:e&&w.private&&t in w.private&&(n=w.private),n&&n[t]||null}}),Object.defineProperty(this,"toJSON",{value:function(t,e){Array.isArray(t)&&(e=t,t=!1);var n={};return n=r(n,x.base,x.public,"boolean"==typeof t&&t?x.private:{},x.extra),c(n,e||[])}}),Object.defineProperty(this,"toPEM",{value:function(t){if(null===t&&(t=!1),!g.convertToPEM)throw new Error("Unsupported key type for PEM encoding");var e=t?w.private:w.public;if(!e)throw new Error("Invalid key");return g.convertToPEM.call(this,e,t)}}),Object.defineProperty(this,"toObject",{value:function(t,e){Array.isArray(t)&&(e=t,t=!1);var n={};return n=r(n,x.base,w.public,"boolean"==typeof t&&t?w.private:{},x.extra),c(n,(e||[]).concat("length"))}}),Object.defineProperty(this,"sign",{value:function(t,e,n){if(-1===this.algorithms("sign").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var i=g.signKey.call(this,t,w);return i?(n=n?o(n):{},g.signProps&&(n=r(n,g.signProps.call(this,t,n))),p.sign(t,i,e,n)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"verify",{value:function(t,e,n,i){if(-1===this.algorithms("verify").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var s=g.verifyKey.call(this,t,w);return s?(i=i?o(i):{},g.verifyProps&&(i=r(i,g.verifyProps.call(this,t,i))),p.verify(t,s,e,n,i)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"encrypt",{value:function(t,e,n){if(-1===this.algorithms("encrypt").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var i=g.encryptKey.call(this,t,w);return i?(n=n?o(n):{},g.encryptProps&&(n=r(n,g.encryptProps.call(this,t,n))),p.encrypt(t,i,e,n)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"decrypt",{value:function(t,e,n){if(-1===this.algorithms("decrypt").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var i=g.decryptKey.call(this,t,w);return i?(n=n?o(n):{},g.decryptProps&&(n=r(n,g.decryptProps.call(this,t,n))),p.decrypt(t,i,e,n)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"wrap",{value:function(t,e,n){if(-1===this.algorithms("wrap").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var i=g.wrapKey.call(this,t,w);return i?(n=n?o(n):{},g.wrapProps&&(n=r(n,g.wrapProps.call(this,t,n))),p.encrypt(t,i,e,n)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"unwrap",{value:function(t,e,n){if(-1===this.algorithms("unwrap").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var i=g.unwrapKey.call(this,t,w);return i?(n=n?o(n):{},g.unwrapProps&&(n=r(n,g.unwrapProps.call(this,t,n))),p.decrypt(t,i,e,n)):Promise.reject(new Error("improper key"))}})}},7047:t=>{"use strict";t.exports={MODE_SIGN:"sign",MODE_VERIFY:"verify",MODE_ENCRYPT:"encrypt",MODE_DECRYPT:"decrypt",MODE_WRAP:"wrap",MODE_UNWRAP:"unwrap"}},5785:(t,e,n)=>{"use strict";var r=n(233),i=n(3900),s=n(3754),o={BaseKey:n(2752),helpers:n(2028)},a=["ES256","ES384","ES512"],u=["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"],c=r.EC_OID;function l(t){switch(t){case"1.2.840.10045.3.1.7":return"P-256";case"1.3.132.0.34":return"P-384";case"1.3.132.0.35":return"P-521";default:return null}}var h={publicKey:function(t){var e=o.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"}]),n=o.helpers.unpackProps(t,e);return n&&n.crv&&n.x&&n.y?n.length=r.curveSize(n.crv):(delete n.crv,delete n.x,delete n.y),n},privateKey:function(t){var e=o.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"},{name:"d",type:"binary"}]),n=o.helpers.unpackProps(t,e);return n&&n.crv&&n.x&&n.y&&n.d?n.length=r.curveSize(n.crv):n=void 0,n},thumbprint:function(t){return t.public&&(t=t.public),{crv:t.crv,kty:"EC",x:t.x,y:t.y}},algorithms:function(t,e){var n=t.public&&t.public.length||t.private&&t.private.length||0;switch(521===n&&(n=512),e){case"encrypt":case"decrypt":return[];case"wrap":return t.public&&u||[];case"unwrap":return t.private&&u||[];case"sign":return t.private?a.filter(function(t){return t==="ES"+n}):[];case"verify":return t.public?a.filter(function(t){return t==="ES"+n}):[]}},encryptKey:function(t,e){return e.public},decryptKey:function(t,e){return e.private},wrapKey:function(t,e){return e.public},unwrapKey:function(t,e){return e.private},signKey:function(t,e){return e.private},verifyKey:function(t,e){return e.public}};h.convertToPEM=r.convertToPEM;var p={oid:c,privateKey:{name:"ECPrivateKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{tagClass:i.asn1.Class.CONTEXT_SPECIFIC,name:"ECPrivateKey.parameters",constructed:!0,value:[{name:"ECPrivateKey.namedCurve",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OID,constructed:!1,capture:"crv"}]},{name:"ECPrivateKey.publicKey",tagClass:i.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]},embeddedPrivateKey:{name:"ECPrivateKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{name:"ECPrivateKey.publicKey",tagClass:i.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]}},f={kty:"EC",validators:p,prepare:function(t){var e=h,n=Promise.resolve(t);return(n=n.then(function(t){return o.helpers.thumbprint(e,t)})).then(function(n){var r={};return r[o.helpers.INTERNALS.THUMBPRINT_HASH]=n,t[o.helpers.INTERNALS.THUMBPRINT_KEY]=r,e})},generate:function(t){var e=s.generateKeyPair(t);return Promise.resolve({crv:t,x:e.public.x,y:e.public.y,d:e.private.d})},import:function(t){if(p.oid!==t.keyOid)return null;var e;if(t.keyParams&&i.asn1.Type.OID===t.keyParams.type?e=l(e=i.asn1.derToOid(t.keyParams.value)):t.crv&&(e=l(e=i.asn1.derToOid(t.crv))),!e)return null;if(!t.parsed){var n={};if("private"===t.type){if("string"==typeof t.keyValue?t.keyValue=i.asn1.fromDer(t.keyValue):Array.isArray(t.keyValue)&&(t.keyValue=t.keyValue[0]),!i.asn1.validate(t.keyValue,p.embeddedPrivateKey,n,[]))return null}else n.point=t.keyValue;t=n}var r={kty:"EC",crv:e};if(t.d&&(r.d=Buffer.from(t.d,"binary")),t.point){var s=Buffer.from(t.point,"binary");if(4!==s.readUInt16BE(0))return null;var o=(s=s.slice(2)).length/2;r.x=s.slice(0,o),r.y=s.slice(o)}return r}};t.exports=Object.freeze({config:h,factory:f}),n(8855).registry.register(f)},2028:(t,e,n)=>{"use strict";var r=n(3742),i=n(2407),s=n(3900),o=n(6120),a={name:"SubjectPublicKeyInfo",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.BITSTRING,constructed:!1,capture:"keyValue"}]},u={THUMBPRINT_KEY:"internal\0thumbprint",THUMBPRINT_HASH:"SHA-256"};t.exports={validators:{privateKey:{name:"PrivateKeyInfo",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.INTEGER,constructed:!1,capture:"keyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"PrivateKeyInfo",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.OCTETSTRING,constructed:!1,capture:"keyValue"}]},publicKey:a,certificate:{name:"Certificate",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:s.asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},a,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:s.asn1.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:s.asn1.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:s.asn1.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.BITSTRING,constructed:!1,capture:"certSignature"}]}},thumbprint:function(t,e,n){if("function"!=typeof t.thumbprint)return Promise.reject(new Error("thumbprint not supported"));n=(n||u.THUMBPRINT_HASH).toUpperCase();var r=t.thumbprint(e),s=Object.keys(r).sort().map(function(t){var e=r[t];return Buffer.isBuffer(e)&&(e=i.base64url.encode(e)),JSON.stringify(t)+":"+JSON.stringify(e)});s="{"+s.join(",")+"}";try{return o.digest(n,Buffer.from(s,"utf8"))}catch(a){return Promise.reject(a)}},unpackProps:function(t,e){var n;e.forEach(function(e){if(e.name in t){n=n||{};var s=t[e.name];switch(e.type){case"binary":Buffer.isBuffer(s)?t[e.name]=i.base64url.encode(s):s=i.base64url.decode(s);break;case"string":case"number":case"boolean":break;case"array":s=[].concat(s);break;case"object":s=r(s)}n[e.name]=s}});var s=n||{};return Object.keys(t).forEach(function(e){e in s||delete t[e]}),n},COMMON_PROPS:[{name:"kty",type:"string"},{name:"kid",type:"string"},{name:"use",type:"string"},{name:"alg",type:"string"},{name:"x5c",type:"array"},{name:"x5t",type:"binary"},{name:"x5u",type:"string"},{name:"key_ops",type:"array"}],INTERNALS:u}},9595:(t,e,n)=>{"use strict";var r=n(8855);Object.keys(r.KeyStore).forEach(function(t){e[t]=r.KeyStore[t]});var i=n(7047);Object.keys(i).forEach(function(t){e[t]=i[t]}),n(5843),n(5670),n(5785)},8855:(t,e,n)=>{"use strict";var r=n(3742),i=n(2897),s=n(3900),o=n(2407),a={BaseKey:n(2752),helpers:n(2028)},u=function(){var t={};Object.defineProperty(this,"register",{value:function(e){if(!e||"string"!=typeof e.kty||!e.kty)throw new Error("invalid Key factory");return t[e.kty]=e,this}}),Object.defineProperty(this,"unregister",{value:function(e){if(!e||"string"!=typeof e.kty||!e.kty)throw new Error("invalid Key factory");var n=e.kty;return e===t[n]&&delete t[n],this}}),Object.defineProperty(this,"get",{value:function(e){return t[e||""]||void 0}}),Object.defineProperty(this,"all",{value:function(){return Object.keys(t).map(function(e){return t[e]})}})},c=new u,l=function(t,e){var n={};Object.defineProperty(this,"generate",{value:function(e,n,s){var o=t.get(e);if(!o)return Promise.reject(new Error("unsupported key type"));(s=r(s||{})).kty=e;var a=this;return o.generate(n).then(function(t){return t=i(s,t,{kty:e}),a.add(t)})}}),Object.defineProperty(this,"add",{value:function(e,i,u){var h;if(u=u||{},Buffer.isBuffer(e)||"string"==typeof e)if("json"===(i=(i||"json").toLowerCase()))e=JSON.parse(e.toString("utf8"));else try{if(h="pem"===i?function(t){var e={};if(!s.pem.decode(t).some(function(t){switch(t.type){case"CERTIFICATE":e.form="pkix";break;case"PUBLIC KEY":e.form="spki";break;case"PRIVATE KEY":e.form="pkcs8";break;case"EC PRIVATE KEY":case"RSA PRIVATE KEY":e.form="private";break;default:return!1}return e.body=t.body,!0}))throw new Error("supported PEM type not found");return e}(e):{body:e.toString("binary"),form:i},!(e=function(t,e){var n,r={},i=[],u=e.form,l=e.body,h=null;switch(e=s.asn1.fromDer(l),u){case"private":t.all().some(function(t){if(n)return!1;if(!t.validators)return!1;var o=t.validators.oid,a=t.validators.privateKey;return!!a&&((n=s.asn1.validate(e,a,r={},i=[]))&&(r.keyOid=s.asn1.oidToDer(o),r.parsed=!0),n)}),r.type="private";break;case"pkcs8":n=s.asn1.validate(e,a.helpers.validators.privateKey,r,i),r.type="private";break;case"public":case"spki":n=s.asn1.validate(e,a.helpers.validators.publicKey,r,i),r.type="public";break;case"pkix":case"x509":if(n=s.asn1.validate(e,a.helpers.validators.certificate,r,i)){r=function(t){return["certIssuer","certSubject"].forEach(function(e){var n=s.pki.RDNAttributesAsArray(t[e]),r=t[e]={};n.forEach(function(t){r[t.name||t.type]=t.value})}),t}(r);var p=s.md.sha1.create();p.update(l),h=o.base64url.encode(Buffer.from(p.digest().toHex(),"hex"))}r.type="public"}return n?(r.keyOid&&(r.keyOid=s.asn1.derToOid(r.keyOid)),n=null,c.all().forEach(function(t){n||t&&"function"==typeof t.import&&(n=t.import(r))}),n&&r.certSubject&&r.certSubject.commonName&&(n.kid=r.certSubject.commonName),n&&h&&(n.x5t=h),n):null}(t,h)))throw new Error("no importer for key");Object.keys(u).forEach(function(t){e[t]=u[t]})}catch(d){return Promise.reject(d)}else e=l.isKey(e)?e.toJSON(!0):r(e);var p=t.get(e.kty);if(!p)return Promise.reject(new Error("unsupported key type"));var f=this;return p.prepare(e).then(function(t){return new a.BaseKey(e.kty,f,e,t)}).then(function(t){var e=t.kid||"";return(n[e]=n[e]||[]).push(t),t})}}),Object.defineProperty(this,"remove",{value:function(t){if(t){var e=n[t.kid];if(e){var r=e.indexOf(t);-1!==r&&(e.splice(r,1),e.length||delete n[t.kid])}}}}),Object.defineProperty(this,"all",{value:function(t,r){null!=(t=t||{}).kid&&"string"!=typeof t.kid&&(t.kid=String(t.kid));var i=[],s=function(e){return(!t.kty||!e.kty||t.kty===e.kty)&&(!t.use||!e.use||t.use===e.use)&&(!t.alg||("dir"===t.alg||!e.alg||t.alg===e.alg)&&e.supports(t.alg))};return Object.keys(n).forEach(function(e){if(!t.kid||t.kid===e){var r=n[e].filter(s);r.length&&(i=i.concat(r))}}),!r&&e&&(i=i.concat(e.all(t))),i}}),Object.defineProperty(this,"get",{value:function(t,n,r){"boolean"==typeof t?(r=t,n=t=null):"object"==typeof t&&(r=n,n=t,t=null),n=n||{},t&&(n.kid=t),null!=n.kid&&"string"!=typeof n.kid&&(n.kid=String(n.kid));var i=this.all(n,!0);return i.length||!e||r||(i=e.get(n,r)),i[0]||null}}),Object.defineProperty(this,"temp",{value:function(){return new l(t,this)}}),Object.defineProperty(this,"toJSON",{value:function(t){var e=[];return Object.keys(n).forEach(function(r){var i=n[r].map(function(e){return e.toJSON(t)});e=e.concat(i)}),{keys:e}}})};l.isKeyStore=function(t){return!!t&&"object"==typeof t&&"function"==typeof t.get&&"function"==typeof t.all&&"function"==typeof t.generate&&"function"==typeof t.add&&"function"==typeof t.remove},l.createKeyStore=function(){return new l(c)},l.asKeyStore=function(t){if(l.isKeyStore(t))return Promise.resolve(t);var e,n=l.createKeyStore();if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t))e=t;else{if(!("keys"in t))return Promise.reject(new Error("invalid keystore"));e=t.keys}return e=e.map(function(t){return n.add(t)}),Promise.all(e).then(function(){return n})},l.isKey=function(t){return!!t&&"object"==typeof t&&!!l.isKeyStore(t.keystore)&&"string"==typeof t.kty&&"number"==typeof t.length&&"function"==typeof t.algorithms&&"function"==typeof t.supports&&"function"==typeof t.encrypt&&"function"==typeof t.decrypt&&"function"==typeof t.wrap&&"function"==typeof t.unwrap&&"function"==typeof t.sign&&"function"==typeof t.verify},l.createKey=function(t,e,n){return l.createKeyStore().generate(t,e,n)},l.asKey=function(t,e,n){return l.isKey(t)?Promise.resolve(t):t=l.createKeyStore().add(t,e,n)},t.exports={KeyRegistry:u,KeyStore:l,registry:c}},5843:(t,e,n)=>{"use strict";var r=n(2407),i={BaseKey:n(2752),helpers:n(2028)},s=["HS256","HS384","HS512"],o=["A128GCM","A192GCM","A256GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512","A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"],a=["A128KW","A192KW","A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW","dir"];function u(t,e){return"iv"in e&&(e.iv=Buffer.isBuffer(e.iv)?e.iv:r.base64url.decode(e.iv||"")),"adata"in e&&(e.adata=Buffer.isBuffer(e.adata)?e.adata:Buffer.from(e.adata||"","utf8")),"mac"in e&&(e.mac=Buffer.isBuffer(e.mac)?e.mac:r.base64url.decode(e.mac||"")),"tag"in e&&(e.tag=Buffer.isBuffer(e.tag)?e.tag:r.base64url.decode(e.tag||"")),e}function c(t,e){return"iv"in e&&(e.iv=Buffer.isBuffer(e.iv)?e.iv:r.base64url.decode(e.iv||"")),"adata"in e&&(e.adata=Buffer.isBuffer(e.adata)?e.adata:Buffer.from(e.adata||"","utf8")),e}var l={publicKey:function(t){var e=i.helpers.COMMON_PROPS.concat([]);return i.helpers.unpackProps(t,e)},privateKey:function(t){var e,n=i.helpers.COMMON_PROPS.concat([{name:"k",type:"binary"}]);return(e=i.helpers.unpackProps(t,n))&&e.k?e.length=8*e.k.length:e=void 0,e},thumbprint:function(t){return t.private&&(t=t.private),{k:t.k||"",kty:"oct"}},algorithms:function(t,e){var n=t.private&&8*t.private.k.length,r=[256,384,512];if(!n)return[];switch(e){case"encrypt":case"decrypt":return o.filter(function(t){return t==="A"+n/2+"CBC-HS"+n||t==="A"+n/2+"CBC+HS"+n||t==="A"+n+"GCM"});case"sign":case"verify":return s.filter(function(t){var e=!1;return r.forEach(function(r){r>n||(e|=t==="HS"+r)}),e});case"wrap":case"unwrap":return a.filter(function(t){return t==="A"+n+"KW"||t==="A"+n+"GCMKW"||0===t.indexOf("PBES2-")||"dir"===t})}return[]},encryptKey:function(t,e){return e.private&&e.private.k},encryptProps:c,decryptKey:function(t,e){return e.private&&e.private.k},decryptProps:u,wrapKey:function(t,e){return e.private&&e.private.k},wrapProps:c,unwrapKey:function(t,e){return e.private&&e.private.k},unwrapProps:u,signKey:function(t,e){return e.private&&e.private.k},verifyKey:function(t,e){return e.private&&e.private.k}},h={kty:"oct",prepare:function(t){var e=l,n=Promise.resolve(t);return(n=n.then(function(t){return i.helpers.thumbprint(e,t)})).then(function(n){var r={};return r[i.helpers.INTERNALS.THUMBPRINT_HASH]=n,t[i.helpers.INTERNALS.THUMBPRINT_KEY]=r,e})},generate:function(t){var e=r.randomBytes(t/8);return Promise.resolve({k:e})}};t.exports=Object.freeze({config:l,factory:h}),n(8855).registry.register(h)},5670:(t,e,n)=>{"use strict";var r=n(3900),i=n(3166),s=n(9439).nodeCrypto,o={BaseKey:n(2752),helpers:n(2028)},a=["RS256","RS384","RS512","PS256","PS384","PS512"],u=["RSA-OAEP","RSA-OAEP-256","RSA1_5"],c={publicKey:function(t){var e,n=o.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"}]);return(e=o.helpers.unpackProps(t,n))&&e.n&&e.e?e.length=8*e.n.length:(delete e.e,delete e.n),e},privateKey:function(t){var e,n=o.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"},{name:"d",type:"binary"},{name:"p",type:"binary"},{name:"q",type:"binary"},{name:"dp",type:"binary"},{name:"dq",type:"binary"},{name:"qi",type:"binary"}]);return(e=o.helpers.unpackProps(t,n))&&e.d&&e.n&&e.e&&e.p&&e.q&&e.dp&&e.dq&&e.qi?e.length=8*e.d.length:e=void 0,e},thumbprint:function(t){return t.public&&(t=t.public),{e:t.e,kty:"RSA",n:t.n}},algorithms:function(t,e){switch(e){case"encrypt":case"decrypt":return[];case"wrap":return t.public&&u.slice()||[];case"unwrap":return t.private&&u.slice()||[];case"sign":return t.private&&a.slice()||[];case"verify":return t.public&&a.slice()||[]}return[]},wrapKey:function(t,e){return e.public},unwrapKey:function(t,e){return e.private},signKey:function(t,e){return e.private},verifyKey:function(t,e){return e.public},convertToPEM:function(t,e){var n=i.convertToForge(t,!e);return e?r.pki.privateKeyToPem(n):r.pki.publicKeyToPem(n)}},l={oid:"1.2.840.113549.1.1.1",privateKey:{name:"RSAPrivateKey",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"version"},{name:"RSAPrivateKey.modulus",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPrivateKey.publicExponent",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"e"},{name:"RSAPrivateKey.privateExponent",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"d"},{name:"RSAPrivateKey.prime1",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"p"},{name:"RSAPrivateKey.prime2",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"q"},{name:"RSAPrivateKey.exponent1",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"dp"},{name:"RSAPrivateKey.exponent2",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"dq"},{name:"RSAPrivateKey.coefficient",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"qi"}]},publicKey:{name:"RSAPublicKey",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPublicKey.exponent",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"e"}]}},h={kty:"RSA",validators:l,prepare:function(t){var e=c,n=Promise.resolve(t);return(n=n.then(function(t){return o.helpers.thumbprint(e,t)})).then(function(n){var r={};return r[o.helpers.INTERNALS.THUMBPRINT_HASH]=n,t[o.helpers.INTERNALS.THUMBPRINT_KEY]=r,e})},generate:function(t){var e;if(s)e=new Promise(function(e,n){r.pki.rsa.generateKeyPair({bits:t,e:65537},function(t,r){if(t)return n(t);e(r.privateKey)})});else{var n=r.pki.rsa.generateKeyPair({bits:t,e:65537});e=Promise.resolve(n.privateKey)}return e.then(function(t){var e={};return["e","n","d","p","q",{incoming:"dP",outgoing:"dp"},{incoming:"dQ",outgoing:"dq"},{incoming:"qInv",outgoing:"qi"}].forEach(function(n){var r,i,s;"string"==typeof n?r=i=n:(r=n.incoming,i=n.outgoing),r in t&&(e[i]=((s=(s=t[r]).toString(16)).length%2&&(s="0"+s),Buffer.from(s,"hex")))}),e})},import:function(t){if(l.oid!==t.keyOid)return null;if(!t.parsed){"string"==typeof t.keyValue?t.keyValue=r.asn1.fromDer(t.keyValue):Array.isArray(t.keyValue)&&(t.keyValue=t.keyValue[0]);var e={};if(!r.asn1.validate(t.keyValue,"private"===t.type?l.privateKey:l.publicKey,e,[]))return null;t=e}var n={kty:"RSA"};return["n","e","d","p","q","dp","dq","qi"].forEach(function(e){if(e in t){var r=Buffer.from(t[e],"binary");0===r[0]&&(r=r.slice(1)),n[e]=r}}),n}};t.exports=Object.freeze({config:c,factory:h}),n(8855).registry.register(h)},9258:t=>{"use strict";t.exports={compact:!1,protect:"*"}},5386:t=>{"use strict";t.exports={slice:function(t,e){return Array.prototype.slice.call(t,e||0)}}},4681:(t,e,n)=>{"use strict";var r={createSign:n(3665).createSign,createVerify:n(2087).createVerify};t.exports=r},3665:(t,e,n)=>{"use strict";var r=n(2897),i=n(2407),s=n(9595),o=n(5386).slice,a=n(3742),u=n(2699),c=n(9258),l=function(t,e){var n=!1,r=t.format||"general",s=Buffer.alloc(0);Object.defineProperty(this,"compact",{get:function(){return"compact"===r},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return r},enumerable:!0}),Object.defineProperty(this,"update",{value:function(t,e){if(n)throw new Error("already final");return null!=t&&(t=i.asBuffer(t,e),s=s.length?Buffer.concat([s,t],s.length+t.length):t),this}}),Object.defineProperty(this,"final",{value:function(t,o){if(n)return Promise.reject(new Error("already final"));var u;switch(this.update(t,o),n=!0,u=(u=(u=Promise.all(e)).then(function(t){return s=i.base64url.encode(s),t=t.map(function(t){var e={},n=0,r=a(t.header),o=Object.keys(r).length;t.protected.forEach(function(t){t in r&&(e[t]=r[t],n++,delete r[t],o--)}),n>0?(e=JSON.stringify(e),e=i.base64url.encode(e)):e="";var u=Buffer.from(e+"."+s,"ascii");return(t=t.key.sign(t.header.alg,u,t.header)).then(function(t){var s={};return 0<n&&(s.protected=e),0<o&&(s.header=r),s.signature=i.base64url.encode(t.mac),s})}),t=[Promise.resolve(s)].concat(t),Promise.all(t)})).then(function(t){return{payload:t[0],signatures:t.slice(1)}}),r){case"compact":u=u.then(function(t){return[t.signatures[0].protected,t.payload,t.signatures[0].signature].join(".")});break;case"flattened":u=u.then(function(t){var e={};e.payload=t.payload;var n=t.signatures[0];return n.protected&&(e.protected=n.protected),n.header&&(e.header=n.header),e.signature=n.signature,e})}return u}})};t.exports={signer:l,createSign:function(t,e){var n=t,i=1,h=e;if(0===arguments.length)throw new Error("at least one signatory must be provided");1===arguments.length||s.isKey(t)||t&&"kty"in t||t&&"key"in t&&(s.isKey(t.key)||"kty"in t.key)?(h=t,i=0,n={}):n=a(t),Array.isArray(h)||(h=o(arguments,i));var p=(n=r(a(c),n)).fields||{},f=n.format;if(f||(f=n.compact?"compact":"general"),("compact"===f||"flattened"===f)&&1<h.length)throw new Error("too many signatories for compact or flattened JSON serialization");var d="*"===n.protect;n.compact&&(d=!0),h=h.map(function(t,e){return(t&&"kty"in t?s.asKey(t).then(function(t){return{key:t}}):t?s.asKey(t.key).then(function(e){return{header:t.header,reference:t.reference,protect:t.protect,key:e}}):Promise.reject(new Error("missing key for signatory "+e))).then(function(t){var e=t.key,n=t.header||{};n=r(r({},p),n),t.header=n,n.alg||(n.alg=e.algorithms(s.MODE_SIGN)[0]||"");var i,o=t.reference;if(delete t.reference,void 0===o?o=(o=["kid","jku","x5c","x5t","x5u"].some(function(t){return t in n}))?null:"kid":"boolean"==typeof o&&(o=o?"kid":null),o)if(i=e.toJSON(),"jwk"===o){if("oct"===e.kty)return Promise.reject(new Error("cannot embed key"));n.jwk=i}else o in i&&(n[o]=i[o]);var a=t.protect;if(d||"*"===a)a=Object.keys(n);else if("string"===a)a=[a];else if(Array.isArray(a))a=a.concat();else{if(a)return Promise.reject(new Error("protect must be a list of fields"));a=[]}return a=u(a),t.protected=a,Object.freeze(t)})});var m={format:f};return new l(m,h)}}},2087:(t,e,n)=>{"use strict";var r=n(3742),i=n(2897),s=n(326),o=n(7423),a=n(9595),u={algorithms:"*",allowEmbeddedKey:!1},c=function(t,e){var n,c;c=a.isKey(t)?(n=t).keystore:a.isKeyStore(t)?t:a.createKeyStore(),e=i(u,e),Object.defineProperty(this,"defaultKey",{value:n||void 0,enumerable:!0}),Object.defineProperty(this,"keystore",{value:c,enumerable:!0}),Object.defineProperty(this,"verify",{value:function(t,u){var l=(u=i({},e,u||{})).handlers||{},h=Object.keys(l),p=new o(u.algorithms);if("string"==typeof t)t={payload:(t=t.split("."))[1],signatures:[{protected:t[0],signature:t[2]}]};else if(!t||"object"!=typeof t)throw new Error("invalid input");t.signature&&(t.signatures=[{protected:t.protected||void 0,header:t.header||void 0,signature:t.signature}]);var f=t.signatures||[{}];return f=f.map(function(t){var e=r(t.header||{}),n=t.protected?JSON.parse(s.decode(t.protected,"utf8")):{};e=i(e,n);var o=s.decode(t.signature);if(!p.match(e.alg))return Promise.reject(new Error("Algorithm not allowed: "+e.alg));var a=n.crit;if(a){if(!Array.isArray(a))return Promise.reject(new Error("Invalid 'crit' header"));for(var u=0;a.length>u;u++)if(-1===h.indexOf(a[u]))return Promise.reject(new Error("Critical extension is not supported: "+a[u]))}return n=Object.keys(n),Promise.resolve({protected:n,aad:t.protected||"",header:e,signature:o})}),Promise.all(f).then(function(e){return new Promise(function(r,o){var p=function(){var f=e.shift();if(f){f=i({},f,{payload:t.payload});var d=Promise.resolve(f);(d=(d=(d=(d=(d=(d=d.then(function(t){var e;return u.allowEmbeddedKey&&t.header.jwk?e=a.asKey(t.header.jwk):u.allowEmbeddedKey&&t.header.x5c?(e=t.header.x5c[0],e=Buffer.from(e,"base64"),e=a.asKey(e,"pkix")):e=Promise.resolve(n||c.get({use:"sig",alg:t.header.alg,kid:t.header.kid})),e.then(function(e){return e?(t.key=e,t):Promise.reject(new Error("key does not match"))})})).then(function(t){var e=[];return h.forEach(function(n){var r;"function"==typeof(n=l[n])?r=n(t):"object"==typeof n&&"function"==typeof n.prepare&&(r=n.prepare(t)),r&&e.push(Promise.resolve(r))}),Promise.all(e).then(function(){return t})})).then(function(t){var e=t.aad||"",n=t.payload||"",r=Buffer.alloc(1+e.length+n.length),i=0;return r.write(e,i,"ascii"),r.write(".",i+=e.length,"ascii"),i++,Buffer.isBuffer(n)?n.copy(r,i):r.write(n,i,"binary"),t.content=r,t})).then(function(t){return t.key.verify(t.header.alg,t.content,t.signature)})).then(function(t){var e=f.payload;return e=s.decode(e),{protected:f.protected,header:f.header,payload:e,signature:t.mac,key:f.key}})).then(function(t){var e=[];return h.forEach(function(n){var r;"object"==typeof(n=l[n])&&"function"==typeof n.complete&&(r=n.complete(t)),r&&e.push(Promise.resolve(r))}),Promise.all(e).then(function(){return t})})).then(r,p)}else o(new Error("no key found"))};p()})})}})};t.exports={verifier:c,createVerify:function(t,e){return new c(t,e)}}},4673:(t,e,n)=>{"use strict";var r={JWE:n(6415),JWS:n(4681),util:n(2407)};t.exports=function(t){var e,n,i,s=t.split(".");if(3===s.length)e="JWS",n=function(e,n){return r.JWS.createVerify(e).verify(t,n)};else{if(5!==s.length)throw new TypeError("invalid jose serialization");e="JWE",n=function(e,n){return r.JWE.createDecrypt(e).decrypt(t,n)}}return i=r.util.base64url.decode(s[0],"utf8"),i=JSON.parse(i),{type:e,format:"compact",input:t,header:i,perform:n}}},9322:(t,e,n)=>{"use strict";var r=n(4673),i=n(5404),s=t.exports=function(t){if(Buffer.isBuffer(t))return r(t.toString("ascii"));if("string"==typeof t)return r(t);if(t)return i(t);throw new TypeError("invalid input")};s.compact=r,s.json=i},5404:(t,e,n)=>{"use strict";var r=n(2897),i={JWE:n(6415),JWS:n(4681),util:n(2407)};t.exports=function(t){var e,n,s;if("signatures"in t||"signature"in t)e="JWS",n=function(e,n){return i.JWS.createVerify(e).verify(t,n)},s=(s=t.signatures||[{protected:t.protected,header:t.header,signature:t.signature}]).map(function(t){var e,n={};return t.header&&(n=r(n,t.header)),t.protected&&(e=i.util.base64url.decode(e=t.protected,"utf8"),e=JSON.parse(e),n=r(n,e)),n});else if("ciphertext"in t){e="JWE",n=function(e,n){return i.JWE.createDecrypt(e).decrypt(t,n)};var o={};t.protected&&(o.protected=t.protected,o.protected=i.util.base64url.decode(o.protected,"utf8"),o.protected=JSON.parse(o.protected)),t.unprotected&&(o.unprotected=t.unprotected),s=(s=t.recipients||[{}]).map(function(t){var e={};return t.header&&(e=r(e,t.header)),o.unprotected&&(e=r(e,o.unprotected)),o.protected&&(e=r(e,o.protected)),e})}return{type:e,format:"json",input:t,all:s,perform:n}}},7423:t=>{"use strict";function e(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}t.exports=function(t){t?"string"==typeof t&&(t=t.split(" ")):t=[];var n,r=[],i=[],s=[],o=[],a=/^(!)?([^*]*)(\*?)([^*]*)$/;t.forEach(function(t){if(t){a.lastIndex=0;var u=a.exec(t);u&&(n="("+function(t,n,r){var i=[];return i.push("^"),t&&(t=e(t),i.push(t)),n&&i.push(t||r?".*":".+"),r&&(r=e(r),i.push(r)),i.push("$"),i.join("")}(u[2],u[3],u[4])+")",u[1]?(o.push(n),i.push(u[0])):(s.push(n),r.push(u[0])))}}),s=s.length?new RegExp(s.join("|")):null,o=o.length?new RegExp(o.join("|")):null,r.length||(r=["*"]),Object.defineProperty(this,"spec",{value:r.join(" ")+" "+i.join(" "),enumerable:!0}),Object.defineProperty(this,"match",{value:function(t){var e=Boolean(t);return e&&s&&(s.lastIndex=0,e=s.test(t)),e&&o&&(o.lastIndex=0,e=!o.test(t)),e}})}},326:(t,e,n)=>{"use strict";var r=n(7092);t.exports={encode:function(t,e){return t instanceof ArrayBuffer&&(t=new Uint8Array(t)),Buffer.isBuffer(t)||(t=Buffer.from(t,e)),r.encode(t)},decode:r.toBuffer}},724:(t,e,n)=>{"use strict";var r=n(3900),i=n(326);function s(t,e){e=e||{},Buffer.isBuffer(t)?this.data=t:r.util.isArrayBuffer(t)?(t=new Uint8Array(t),this.data=Buffer.from(t)):r.util.isArrayBufferView(t)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),this.data=Buffer.from(t)),this.data&&(this.write=this.data.length,t=void 0),this.growSize=e.growSize||s.DEFAULT_GROW_SIZE,this.write=this.write||0,this.read=this.read||0,t?this.putBytes(t):this.data||this.accommodate(0),e.readOffset="readOffset"in e?e.readOffset:this.read,this.write="writeOffset"in e?e.writeOffset:this.write,this.read=Math.min(e.readOffset,this.write)}s.DEFAULT_GROW_SIZE=16,s.prototype.length=function(){return this.write-this.read},s.prototype.available=function(){return this.data.length-this.write},s.prototype.isEmpty=function(){return this.length()<=0},s.prototype.accommodate=function(t){if(this.data){if(this.available()<t){t=Math.max(t,this.growSize);var e=this.data,n=Buffer.alloc(e.length+t);e.copy(n,0),this.data=n}}else t=Math.max(this.write+t,this.growSize),this.data=Buffer.alloc(t);return this.data.fill(0,this.write),this},s.prototype.clear=function(){return this.read=this.write=0,this.data=Buffer.alloc(0),this},s.prototype.truncate=function(t){return this.write=this.read+Math.max(0,this.length()-t),this.data.fill(0,this.write),this},s.prototype.compact=function(){return this.read>0&&(this.write===this.read?this.read=this.write=0:(this.data.copy(this.data,0,this.read,this.write),this.write=this.write-this.read,this.read=0),this.data.fill(0,this.write)),this},s.prototype.copy=function(){return new s(this,{readOffset:this.read,writeOffset:this.write,growSize:this.growSize})},s.prototype.equals=function(t){if(!s.isBuffer(t))return!1;if(t.length()!==this.length())return!1;for(var e=!0,n=this.read-t.read,r=t.read;t.write>r;r++)e=e&&this.data[r+n]===t.data[r];return e},s.prototype.at=function(t){return this.data[this.read+t]},s.prototype.setAt=function(t,e){return this.data[this.read+t]=e,this},s.prototype.last=function(){return this.data[this.write-1]},s.prototype.bytes=function(t){var e;if(void 0===t?t=this.length():t&&(t=Math.min(t,this.length())),0===t)e="";else{var n=this.read,r=this.data.slice(n,n+t);e=String.fromCharCode.apply(null,r)}return e},s.prototype.buffer=function(t){var e;if(void 0===t?t=this.length():t&&(t=Math.min(t,this.length())),0===t)e=new ArrayBuffer(0);else{var n=this.read,r=n+t,i=this.data.slice(n,r);(e=new Uint8Array(r-n)).set(i)}return e},s.prototype.native=function(t){var e;if(void 0===t?t=this.length():t&&(t=Math.min(t,this.length())),0===t)e=Buffer.alloc(0);else{var n=this.read;e=this.data.slice(n,n+t)}return e},s.prototype.toHex=function(){return this.toString("hex")},s.prototype.toString=function(t){if(0===this.length())return"";var e=this.data.slice(this.read,this.write);switch(t=t||"utf8"){case"raw":return e.toString("binary");case"base64url":return i.encode(e);case"utf16":return e.toString("ucs2");default:return e.toString(t)}},s.prototype.fillWithByte=function(t,e){return e||(e=this.available()),this.accommodate(e),this.data.fill(t,this.write,this.write+e),this.write+=e,this},s.prototype.getBuffer=function(t){var e=this.buffer(t);return this.read+=e.byteLength,e},s.prototype.putBuffer=function(t){return this.putBytes(t)},s.prototype.getBytes=function(t){var e=this.bytes(t);return this.read+=e.length,e},s.prototype.putBytes=function(t,e){if("string"==typeof t){switch(e=e||"binary"){case"utf16":e="ucs-2";break;case"raw":e="binary";break;case"base64url":t=i.decode(t)}Buffer.isBuffer(t)||(t=Buffer.from(t,e))}var n;if(t instanceof s){var o=t;t=o.data.slice(o.read,o.write),o.read=o.write}else t instanceof r.util.ByteStringBuffer&&(t=t.getBytes());if(Buffer.isBuffer(t))n=t;else if(Array.isArray(t))n=Buffer.from(t);else if(r.util.isArrayBuffer(t))n=new Uint8Array(t),n=Buffer.from(n);else{if(!r.util.isArrayBufferView(t))throw new TypeError("invalid source type");n=t instanceof Uint8Array?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=Buffer.from(n)}return this.accommodate(n.length),n.copy(this.data,this.write),this.write+=n.length,this},s.prototype.getNative=function(t){var e=this.native(t);return this.read+=e.length,e},s.prototype.putNative=s.prototype.putBuffer,s.prototype.getByte=function(){var t=this.data[this.read];return this.read=Math.min(this.read+1,this.write),t},s.prototype.putByte=function(t){return this.accommodate(1),this.data[this.write]=255&t,this.write++,this},s.prototype.getInt16=function(){var t=this.data[this.read]<<8^this.data[this.read+1];return this.read=Math.min(this.read+2,this.write),t},s.prototype.putInt16=function(t){return this.accommodate(2),this.data[this.write]=t>>>8&255,this.data[this.write+1]=255&t,this.write+=2,this},s.prototype.getInt24=function(){var t=this.data[this.read]<<16^this.data[this.read+1]<<8^this.data[this.read+2];return this.read=Math.min(this.read+3,this.write),t},s.prototype.putInt24=function(t){return this.accommodate(3),this.data[this.write]=t>>>16&255,this.data[this.write+1]=t>>>8&255,this.data[this.write+2]=255&t,this.write+=3,this},s.prototype.getInt32=function(){var t=this.data[this.read]<<24^this.data[this.read+1]<<16^this.data[this.read+2]<<8^this.data[this.read+3];return this.read=Math.min(this.read+4,this.write),t},s.prototype.putInt32=function(t){return this.accommodate(4),this.data[this.write]=t>>>24&255,this.data[this.write+1]=t>>>16&255,this.data[this.write+2]=t>>>8&255,this.data[this.write+3]=255&t,this.write+=4,this},s.prototype.getInt16Le=function(){var t=this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+2,this.write),t},s.prototype.putInt16Le=function(t){return this.accommodate(2),this.data[this.write+1]=t>>>8&255,this.data[this.write]=255&t,this.write+=2,this},s.prototype.getInt24Le=function(){var t=this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+3,this.write),t},s.prototype.putInt24Le=function(t){return this.accommodate(3),this.data[this.write+2]=t>>>16&255,this.data[this.write+1]=t>>>8&255,this.data[this.write]=255&t,this.write+=3,this},s.prototype.getInt32Le=function(){var t=this.data[this.read+3]<<24^this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+4,this.write),t},s.prototype.putInt32Le=function(t){return this.accommodate(4),this.data[this.write+3]=t>>>24&255,this.data[this.write+2]=t>>>16&255,this.data[this.write+1]=t>>>8&255,this.data[this.write]=255&t,this.write+=4,this},s.prototype.getInt=function(t){var e=0;do{e=e<<8|this.getByte(),t-=8}while(t>0);return e},s.prototype.putInt=function(t,e){this.accommodate(Math.ceil(e/8));do{this.putByte(t>>(e-=8)&255)}while(e>0);return this},s.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},s.prototype.putString=function(t){return this.putBytes(t,"utf16")},s.isBuffer=function(t){return t instanceof s},s.asBuffer=function(t){return s.isBuffer(t)?t:t?new s(t):new s},t.exports=s},2407:(t,e,n)=>{"use strict";var r,i=n(3900);r={base64url:n(326),utf8:n(512),asBuffer:function(t,e){return Buffer.isBuffer(t)?t:"string"==typeof t?"base64url"===(e=e||"binary")?r.base64url.decode(t):Buffer.from(t,e):(i.util.isArrayBufferView(t)?t=t instanceof Uint8Array?t:new Uint8Array(t.buffer,t.byteOffset,t.byteOffset+t.byteLength):i.util.isArrayBuffer(t)&&(t=new Uint8Array(t)),Buffer.from(t))},randomBytes:function(t){return Buffer.from(i.random.getBytes(t),"binary")}},t.exports=r},2897:(t,e,n)=>{"use strict";var r,i=n(464),s=n(3912),o=(r=[],"undefined"!=typeof Uint8ClampedArray&&r.push(Uint8ClampedArray),"undefined"!=typeof Uint8Array&&r.push(Uint8Array),"undefined"!=typeof Uint16Array&&r.push(Uint16Array),"undefined"!=typeof Uint32Array&&r.push(Uint32Array),"undefined"!=typeof Float32Array&&r.push(Float32Array),"undefined"!=typeof Float64Array&&r.push(Float64Array),r);t.exports=i(s,function(t,e){if(Buffer.isBuffer(e))e=Buffer.from(e);else{var n=function(t){for(var e,n=0;!e&&o.length>n;n++)t instanceof o[n]&&(e=o[n]);return e}(e);e=n?new n(e,e.byteOffset,e.byteLength):void 0}return e})},512:(t,e)=>{"use strict";var n=e;n.encode=function(t){return encodeURIComponent(t||"").replace(/%([0-9a-fA-F]{2})/g,function(t,e){return e=parseInt(e,16),String.fromCharCode(e)})},n.decode=function(t){var e=(t||"").replace(/[\u0080-\u00ff]/g,function(t){return"%"+(256|t.charCodeAt(0)).toString(16).substring(1)});return decodeURIComponent(e)}},5329:(t,e,n)=>{"use strict";const r=n(6434),i=n(2658),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=u,e.h2=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|m(t,e);let r=a(n);const i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(X(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return p(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,n);const i=function(t){if(u.isBuffer(t)){const e=0|d(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||Q(t.length)?a(0):p(t):"Buffer"===t.type&&Array.isArray(t.data)?p(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return l(t),a(t<0?0:0|d(t))}function p(t){const e=t.length<0?0:0|d(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,u.prototype),r}function d(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function m(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(i)return r?-1:W(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Q(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){let s,o=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,u/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let r=-1;for(s=n;s<a;s++)if(c(t,s)===c(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===u)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(n+u>a&&(n=a-u),s=n;s>=0;s--){let n=!0;for(let r=0;r<u;r++)if(c(t,s+r)!==c(e,r)){n=!1;break}if(n)return s}return-1}function w(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const s=e.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if(Q(r))return o;t[n+o]=r}return o}function x(t,e,n,r){return $(W(e,t.length-n),t,n,r)}function E(t,e,n,r){return $(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return $(G(e),t,n,r)}function S(t,e,n,r){return $(function(t,e){let n,r,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(e,t.length-n),t,n,r)}function C(t,e,n){return r.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=n){let n,r,a,u;switch(o){case 1:e<128&&(s=e);break;case 2:n=t[i+1],128==(192&n)&&(u=(31&e)<<6|63&n,u>127&&(s=u));break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&(u=(15&e)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(u=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(s=u))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=o}return function(t){const e=t.length;if(e<=I)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=I));return n}(r)}(u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return function(t,e,n){return l(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},u.allocUnsafe=function(t){return h(t)},u.allocUnsafeSlow=function(t){return h(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(X(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),X(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=u.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(X(e,Uint8Array))i+e.length>r.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const n=e.h2;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(t,e,n,r,i){if(X(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0);const a=Math.min(s,o),c=this.slice(r,i),l=t.slice(e,n);for(let u=0;u<a;++u)if(c[u]!==l[u]){s=c[u],o=l[u];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":case"latin1":case"binary":return E(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function T(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let s=e;s<n;++s)i+=Y[t[s]];return i}function R(t,e,n){const r=t.slice(e,n);let i="";for(let s=0;s<r.length-1;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,n,r,i,s){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function B(t,e,n,r,i){H(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function O(t,e,n,r,i){H(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n+7]=s,s>>=8,t[n+6]=s,s>>=8,t[n+5]=s,s>>=8,t[n+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function N(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,r,s){return e=+e,n>>>=0,s||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,s){return e=+e,n>>>=0,s||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=Z(function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),u.prototype.readBigUInt64BE=Z(function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);let r=e,i=1,s=this[t+--r];for(;r>0&&(i*=256);)s+=this[t+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},u.prototype.readInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||D(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||D(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=Z(function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];return void 0!==e&&void 0!==n||K(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),u.prototype.readBigInt64BE=Z(function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)}),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||D(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||D(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||D(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||D(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||F(this,t,e,n,Math.pow(2,8*n)-1,0);let i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||F(this,t,e,n,Math.pow(2,8*n)-1,0);let i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||F(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||F(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||F(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||F(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||F(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=Z(function(t,e=0){return B(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Z(function(t,e=0){return O(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);F(this,t,e,n,r-1,-r)}let i=0,s=1,o=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);F(this,t,e,n,r-1,-r)}let i=n-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||F(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||F(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||F(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||F(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||F(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=Z(function(t,e=0){return B(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Z(function(t,e=0){return O(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{const s=u.isBuffer(t)?t:u.from(t,r),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=s[i%o]}return this};const V={};function j(t,e,n){V[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function U(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function H(t,e,n,r,i,s){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new V.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,n){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||K(e,t.length-(n+1))}(r,i,s)}function z(t,e){if("number"!=typeof t)throw new V.ERR_INVALID_ARG_TYPE(e,"number",t)}function K(t,e,n){if(Math.floor(t)!==t)throw z(t,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}j("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),j("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),j("ERR_OUT_OF_RANGE",function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=U(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=U(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r},RangeError);const q=/[^+/0-9A-Za-z-_]/g;function W(t,e){let n;e=e||1/0;const r=t.length;let i=null;const s=[];for(let o=0;o<r;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function G(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function X(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Q(t){return t!=t}const Y=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function Z(t){return"undefined"==typeof BigInt?J:t}function J(){throw new Error("BigInt not supported")}},4121:(t,e)=>{var n,r=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(A){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}function i(t){var e=Math.clz32(t&-t);return t?31-e:e}Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var s={},o={};function a(t,e){var n,r,i;return e?(i=0<=(t>>>=0)&&t<256)&&(r=o[t])?r:(n=c(t,0,!0),i&&(o[t]=n),n):(i=-128<=(t|=0)&&t<128)&&(r=s[t])?r:(n=c(t,t<0?-1:0,!1),i&&(s[t]=n),n)}function u(t,e){if(isNaN(t))return e?y:v;if(e){if(t<0)return y;if(t>=d)return _}else{if(t<=-m)return S;if(t+1>=m)return E}return t<0?u(-t,e).neg():c(t%f|0,t/f|0,e)}function c(t,e,r){return new n(t,e,r)}n.fromInt=a,n.fromNumber=u,n.fromBits=c;var l=Math.pow;function h(t,e,n){if(0===t.length)throw Error("empty string");if("number"==typeof e?(n=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?y:v;if((n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(t.substring(1),e,n).neg();for(var i=u(l(n,8)),s=v,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+a),n);if(a<8){var p=u(l(n,a));s=s.mul(p).add(u(c))}else s=(s=s.mul(i)).add(u(c))}return s.unsigned=e,s}function p(t,e){return"number"==typeof t?u(t,e):"string"==typeof t?h(t,e):c(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=h,n.fromValue=p;var f=4294967296,d=f*f,m=d/2,g=a(1<<24),v=a(0);n.ZERO=v;var y=a(0,!0);n.UZERO=y;var b=a(1);n.ONE=b;var w=a(1,!0);n.UONE=w;var x=a(-1);n.NEG_ONE=x;var E=c(-1,2147483647,!1);n.MAX_VALUE=E;var _=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=_;var S=c(0,-2147483648,!1);n.MIN_VALUE=S;var C=n.prototype;return C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var e=u(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=u(l(t,6),this.unsigned),s=this,o="";;){var a=s.div(i),c=(s.sub(a.mul(i)).toInt()>>>0).toString(t);if((s=a).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(t){return r(t)||(t=p(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},C.eq=C.equals,C.notEquals=function(t){return!this.eq(t)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(t){return this.comp(t)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(t){return this.comp(t)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(t){return this.comp(t)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(t){return this.comp(t)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(t){if(r(t)||(t=p(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(b)},C.neg=C.negate,C.add=function(t){r(t)||(t=p(t));var e=0,n=0,i=0,s=0;return i+=(s+=(65535&this.low)+(65535&t.low))>>>16,n+=(i+=(this.low>>>16)+(t.low>>>16))>>>16,e+=(n+=(65535&this.high)+(65535&t.high))>>>16,e+=(this.high>>>16)+(t.high>>>16),c((i&=65535)<<16|(s&=65535),(e&=65535)<<16|(n&=65535),this.unsigned)},C.subtract=function(t){return r(t)||(t=p(t)),this.add(t.neg())},C.sub=C.subtract,C.multiply=function(t){if(this.isZero())return this;if(r(t)||(t=p(t)),e)return c(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return this.unsigned?y:v;if(this.eq(S))return t.isOdd()?S:v;if(t.eq(S))return this.isOdd()?S:v;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return u(this.toNumber()*t.toNumber(),this.unsigned);var n=65535&this.high,i=this.low>>>16,s=65535&this.low,o=65535&t.high,a=t.low>>>16,l=65535&t.low,h=0,f=0,d=0,m=0;return d+=(m+=s*l)>>>16,f+=(d+=i*l)>>>16,d&=65535,f+=(d+=s*a)>>>16,h+=(f+=n*l)>>>16,f&=65535,h+=(f+=i*a)>>>16,f&=65535,h+=(f+=s*o)>>>16,h+=(this.high>>>16)*l+n*a+i*o+s*(t.high>>>16),c((d&=65535)<<16|(m&=65535),(h&=65535)<<16|(f&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(t){if(r(t)||(t=p(t)),t.isZero())throw Error("division by zero");var n,i,s;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?c((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:v;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return w;s=y}else{if(this.eq(S))return t.eq(b)||t.eq(x)?S:t.eq(S)?b:(n=this.shr(1).div(t).shl(1)).eq(v)?t.isNegative()?b:x:(i=this.sub(t.mul(n)),s=n.add(i.div(t)));if(t.eq(S))return this.unsigned?y:v;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=v}for(i=this;i.gte(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),a=o<=48?1:l(2,o-48),h=u(n),f=h.mul(t);f.isNegative()||f.gt(i);)f=(h=u(n-=a,this.unsigned)).mul(t);h.isZero()&&(h=b),s=s.add(h),i=i.sub(f)}return s},C.div=C.divide,C.modulo=function(t){return r(t)||(t=p(t)),e?c((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},C.clz=C.countLeadingZeros,C.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},C.ctz=C.countTrailingZeros,C.and=function(t){return r(t)||(t=p(t)),c(this.low&t.low,this.high&t.high,this.unsigned)},C.or=function(t){return r(t)||(t=p(t)),c(this.low|t.low,this.high|t.high,this.unsigned)},C.xor=function(t){return r(t)||(t=p(t)),c(this.low^t.low,this.high^t.high,this.unsigned)},C.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):c(0,this.low<<t-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):c(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):c(32===t?this.high:this.high>>>t-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.rotateLeft=function(t){var e;return r(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?c(this.high,this.low,this.unsigned):t<32?c(this.low<<t|this.high>>>(e=32-t),this.high<<t|this.low>>>e,this.unsigned):c(this.high<<(t-=32)|this.low>>>(e=32-t),this.low<<t|this.high>>>e,this.unsigned)},C.rotl=C.rotateLeft,C.rotateRight=function(t){var e;return r(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?c(this.high,this.low,this.unsigned):t<32?c(this.high<<(e=32-t)|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned):c(this.low<<(e=32-(t-=32))|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)},C.rotr=C.rotateRight,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},C.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)},t.default=n,"default"in t?t.default:t}({});void 0===(n=(function(){return r}).apply(e,[]))||(t.exports=n)},4937:(t,e,n)=>{var r=n(716);function i(t,e){r.cipher.registerAlgorithm(t,function(){return new r.aes.Algorithm(t,e)})}n(5455),n(2437),n(2038),t.exports=r.aes=r.aes||{},r.aes.startEncrypting=function(t,e,n,r){var i=d({key:t,output:n,decrypt:!1,mode:r});return i.start(e),i},r.aes.createEncryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!1,mode:e})},r.aes.startDecrypting=function(t,e,n,r){var i=d({key:t,output:n,decrypt:!0,mode:r});return i.start(e),i},r.aes.createDecryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!0,mode:e})},r.aes.Algorithm=function(t,e){l||h();var n=this;n.name=t,n.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return f(n._w,t,e,!1)},decrypt:function(t,e){return f(n._w,t,e,!0)}}}),n._init=!1},r.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,n=t.key;if("string"!=typeof n||16!==n.length&&24!==n.length&&32!==n.length){if(r.util.isArray(n)&&(16===n.length||24===n.length||32===n.length)){e=n,n=r.util.createBuffer();for(var i=0;i<e.length;++i)n.putByte(e[i])}}else n=r.util.createBuffer(n);if(!r.util.isArray(n)){e=n,n=[];var s=e.length();if(16===s||24===s||32===s)for(s>>>=2,i=0;i<s;++i)n.push(e.getInt32())}if(!r.util.isArray(n)||4!==n.length&&6!==n.length&&8!==n.length)throw new Error("Invalid key parameter.");var o=-1!==["CFB","OFB","CTR","GCM"].indexOf(this.mode.name);this._w=p(n,t.decrypt&&!o),this._init=!0}},r.aes._expandKey=function(t,e){return l||h(),p(t,e)},r.aes._updateBlock=f,i("AES-ECB",r.cipher.modes.ecb),i("AES-CBC",r.cipher.modes.cbc),i("AES-CFB",r.cipher.modes.cfb),i("AES-OFB",r.cipher.modes.ofb),i("AES-CTR",r.cipher.modes.ctr),i("AES-GCM",r.cipher.modes.gcm);var s,o,a,u,c,l=!1;function h(){l=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;for(s=new Array(256),o=new Array(256),u=new Array(4),c=new Array(4),e=0;e<4;++e)u[e]=new Array(256),c[e]=new Array(256);var n,r,i,h,p,f,d,m=0,g=0;for(e=0;e<256;++e){s[m]=h=(h=g^g<<1^g<<2^g<<3^g<<4)>>8^255&h^99,o[h]=m,f=(p=t[h])<<24^h<<16^h<<8^h^p,d=((n=t[m])^(r=t[n])^(i=t[r]))<<24^(m^i)<<16^(m^r^i)<<8^m^n^i;for(var v=0;v<4;++v)u[v][m]=f,c[v][h]=d,f=f<<24|f>>>8,d=d<<24|d>>>8;0===m?m=g=1:(m=n^t[t[t[n^i]]],g^=t[t[g]])}}function p(t,e){for(var n,r=t.slice(0),i=1,o=r.length,u=4*(o+6+1),l=o;l<u;++l)n=r[l-1],l%o==0?(n=s[n>>>16&255]<<24^s[n>>>8&255]<<16^s[255&n]<<8^s[n>>>24]^a[i]<<24,i++):o>6&&l%o==4&&(n=s[n>>>24]<<24^s[n>>>16&255]<<16^s[n>>>8&255]<<8^s[255&n]),r[l]=r[l-o]^n;if(e){for(var h,p=c[0],f=c[1],d=c[2],m=c[3],g=r.slice(0),v=(l=0,(u=r.length)-4);l<u;l+=4,v-=4)if(0===l||l===u-4)g[l]=r[v],g[l+1]=r[v+3],g[l+2]=r[v+2],g[l+3]=r[v+1];else for(var y=0;y<4;++y)g[l+(3&-y)]=p[s[(h=r[v+y])>>>24]]^f[s[h>>>16&255]]^d[s[h>>>8&255]]^m[s[255&h]];r=g}return r}function f(t,e,n,r){var i,a,l,h,p,f,d,m,g,v,y,b,w=t.length/4-1;r?(i=c[0],a=c[1],l=c[2],h=c[3],p=o):(i=u[0],a=u[1],l=u[2],h=u[3],p=s),f=e[0]^t[0],d=e[r?3:1]^t[1],m=e[2]^t[2],g=e[r?1:3]^t[3];for(var x=3,E=1;E<w;++E)v=i[f>>>24]^a[d>>>16&255]^l[m>>>8&255]^h[255&g]^t[++x],y=i[d>>>24]^a[m>>>16&255]^l[g>>>8&255]^h[255&f]^t[++x],b=i[m>>>24]^a[g>>>16&255]^l[f>>>8&255]^h[255&d]^t[++x],g=i[g>>>24]^a[f>>>16&255]^l[d>>>8&255]^h[255&m]^t[++x],f=v,d=y,m=b;n[0]=p[f>>>24]<<24^p[d>>>16&255]<<16^p[m>>>8&255]<<8^p[255&g]^t[++x],n[r?3:1]=p[d>>>24]<<24^p[m>>>16&255]<<16^p[g>>>8&255]<<8^p[255&f]^t[++x],n[2]=p[m>>>24]<<24^p[g>>>16&255]<<16^p[f>>>8&255]<<8^p[255&d]^t[++x],n[r?1:3]=p[g>>>24]<<24^p[f>>>16&255]<<16^p[d>>>8&255]<<8^p[255&m]^t[++x]}function d(t){var e,n="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),i=(e=t.decrypt?r.cipher.createDecipher(n,t.key):r.cipher.createCipher(n,t.key)).start;return e.start=function(t,n){var s=null;n instanceof r.util.ByteBuffer&&(s=n,n={}),(n=n||{}).output=s,n.iv=t,i.call(e,n)},e}},8493:(t,e,n)=>{var r=n(716);n(2038),n(8865);var i=t.exports=r.asn1=r.asn1||{};function s(t,e,n){if(n>e){var r=new Error("Too few bytes to parse DER.");throw r.available=t.length(),r.remaining=e,r.requested=n,r}}function o(t,e,n,r){var a;s(t,e,2);var u=t.getByte();e--;var c=192&u,l=31&u;a=t.length();var h,p,f=function(t,e){var n=t.getByte();if(e--,128!==n){var r;if(128&n){var i=127&n;s(t,e,i),r=t.getInt(i<<3)}else r=n;if(r<0)throw new Error("Negative length: "+r);return r}}(t,e);if(e-=a-t.length(),void 0!==f&&f>e){if(r.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=t.length(),d.remaining=e,d.requested=f,d}f=e}var m=32==(32&u);if(m)if(h=[],void 0===f)for(;;){if(s(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}a=t.length(),h.push(o(t,e,n+1,r)),e-=a-t.length()}else for(;f>0;)a=t.length(),h.push(o(t,f,n+1,r)),e-=a-t.length(),f-=a-t.length();if(void 0===h&&c===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&(p=t.bytes(f)),void 0===h&&r.decodeBitStrings&&c===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&f>1){var g=t.read,v=e,y=0;if(l===i.Type.BITSTRING&&(s(t,e,1),y=t.getByte(),e--),0===y)try{a=t.length();var b=o(t,e,n+1,{strict:!0,decodeBitStrings:!0}),w=a-t.length();e-=w,l==i.Type.BITSTRING&&w++;var x=b.tagClass;w!==f||x!==i.Class.UNIVERSAL&&x!==i.Class.CONTEXT_SPECIFIC||(h=[b])}catch(E){}void 0===h&&(t.read=g,e=v)}if(void 0===h){if(void 0===f){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=e}if(l===i.Type.BMPSTRING)for(h="";f>0;f-=2)s(t,e,2),h+=String.fromCharCode(t.getInt16()),e-=2;else h=t.getBytes(f),e-=f}return i.create(c,l,m,h,void 0===p?null:{bitStringContents:p})}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(t,e,n,s,o){if(r.util.isArray(s)){for(var a=[],u=0;u<s.length;++u)void 0!==s[u]&&a.push(s[u]);s=a}var c={tagClass:t,type:e,constructed:n,composed:n||r.util.isArray(s),value:s};return o&&"bitStringContents"in o&&(c.bitStringContents=o.bitStringContents,c.original=i.copy(c)),c},i.copy=function(t,e){var n;if(r.util.isArray(t)){n=[];for(var s=0;s<t.length;++s)n.push(i.copy(t[s],e));return n}return"string"==typeof t?t:(n={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:i.copy(t.value,e)},e&&!e.excludeBitStringContents&&(n.bitStringContents=t.bitStringContents),n)},i.equals=function(t,e,n){if(r.util.isArray(t)){if(!r.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var s=0;s<t.length;++s)if(!i.equals(t[s],e[s]))return!1;return!0}if(typeof t!=typeof e)return!1;if("string"==typeof t)return t===e;var o=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&i.equals(t.value,e.value);return n&&n.includeBitStringContents&&(o=o&&t.bitStringContents===e.bitStringContents),o},i.getBerValueLength=function(t){var e=t.getByte();if(128!==e)return 128&e?t.getInt((127&e)<<3):e},i.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"==typeof t&&(t=r.util.createBuffer(t));var n=t.length(),i=o(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=n,s.remaining=t.length(),s}return i},i.toDer=function(t){var e=r.util.createBuffer(),n=t.tagClass|t.type,s=r.util.createBuffer(),o=!1;if("bitStringContents"in t&&(o=!0,t.original&&(o=i.equals(t,t.original))),o)s.putBytes(t.bitStringContents);else if(t.composed){t.constructed?n|=32:s.putByte(0);for(var a=0;a<t.value.length;++a)void 0!==t.value[a]&&s.putBuffer(i.toDer(t.value[a]))}else if(t.type===i.Type.BMPSTRING)for(a=0;a<t.value.length;++a)s.putInt16(t.value.charCodeAt(a));else t.type===i.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0==(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128==(128&t.value.charCodeAt(1)))?s.putBytes(t.value.substr(1)):s.putBytes(t.value);if(e.putByte(n),s.length()<=127)e.putByte(127&s.length());else{var u=s.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);for(e.putByte(128|c.length),a=c.length-1;a>=0;--a)e.putByte(c.charCodeAt(a))}return e.putBuffer(s),e},i.oidToDer=function(t){var e,n,i,s,o=t.split("."),a=r.util.createBuffer();a.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var u=2;u<o.length;++u){e=!0,n=[],i=parseInt(o[u],10);do{s=127&i,i>>>=7,e||(s|=128),n.push(s),e=!1}while(i>0);for(var c=n.length-1;c>=0;--c)a.putByte(n[c])}return a},i.derToOid=function(t){var e;"string"==typeof t&&(t=r.util.createBuffer(t));var n=t.getByte();e=Math.floor(n/40)+"."+n%40;for(var i=0;t.length()>0;)i<<=7,128&(n=t.getByte())?i+=127&n:(e+="."+(i+n),i=0);return e},i.utcTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var u=t.charAt(10),c=10;"+"!==u&&"-"!==u&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(n,r,i),e.setUTCHours(s,o,a,0),c&&("+"===(u=t.charAt(c))||"-"===u)){var l=60*parseInt(t.substr(c+1,2),10)+parseInt(t.substr(c+4,2),10);l*=6e4,e.setTime("+"===u?+e-l:+e+l)}return e},i.generalizedTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,4),10),r=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),u=0,c=0,l=!1;"Z"===t.charAt(t.length-1)&&(l=!0);var h=t.length-5,p=t.charAt(h);return"+"!==p&&"-"!==p||(c=60*parseInt(t.substr(h+1,2),10)+parseInt(t.substr(h+4,2),10),c*=6e4,"+"===p&&(c*=-1),l=!0),"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),l?(e.setUTCFullYear(n,r,i),e.setUTCHours(s,o,a,u),e.setTime(+e+c)):(e.setFullYear(n,r,i),e.setHours(s,o,a,u)),e},i.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",n=[];n.push((""+t.getUTCFullYear()).substr(2)),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+"Z"},i.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",n=[];n.push(""+t.getUTCFullYear()),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+"Z"},i.integerToDer=function(t){var e=r.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=t,n},i.derToInteger=function(t){"string"==typeof t&&(t=r.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},i.validate=function(t,e,n,s){var o=!1;if(t.tagClass!==e.tagClass&&void 0!==e.tagClass||t.type!==e.type&&void 0!==e.type)s&&(t.tagClass!==e.tagClass&&s.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&s.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||void 0===e.constructed){if(o=!0,e.value&&r.util.isArray(e.value))for(var a=0,u=0;o&&u<e.value.length;++u)o=e.value[u].optional||!1,t.value[a]&&((o=i.validate(t.value[a],e.value[u],n,s))?++a:e.value[u].optional&&(o=!0)),!o&&s&&s.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(o&&n&&(e.capture&&(n[e.capture]=t.value),e.captureAsn1&&(n[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(n[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)n[e.captureBitStringValue]="";else{if(0!==t.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");n[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else s&&s.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return o};var a=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(t,e,n){var s="";n=n||2,(e=e||0)>0&&(s+="\n");for(var o="",u=0;u<e*n;++u)o+=" ";switch(s+=o+"Tag: ",t.tagClass){case i.Class.UNIVERSAL:s+="Universal:";break;case i.Class.APPLICATION:s+="Application:";break;case i.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case i.Class.PRIVATE:s+="Private:"}if(t.tagClass===i.Class.UNIVERSAL)switch(s+=t.type,t.type){case i.Type.NONE:s+=" (None)";break;case i.Type.BOOLEAN:s+=" (Boolean)";break;case i.Type.INTEGER:s+=" (Integer)";break;case i.Type.BITSTRING:s+=" (Bit string)";break;case i.Type.OCTETSTRING:s+=" (Octet string)";break;case i.Type.NULL:s+=" (Null)";break;case i.Type.OID:s+=" (Object Identifier)";break;case i.Type.ODESC:s+=" (Object Descriptor)";break;case i.Type.EXTERNAL:s+=" (External or Instance of)";break;case i.Type.REAL:s+=" (Real)";break;case i.Type.ENUMERATED:s+=" (Enumerated)";break;case i.Type.EMBEDDED:s+=" (Embedded PDV)";break;case i.Type.UTF8:s+=" (UTF8)";break;case i.Type.ROID:s+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:s+=" (Sequence)";break;case i.Type.SET:s+=" (Set)";break;case i.Type.PRINTABLESTRING:s+=" (Printable String)";break;case i.Type.IA5String:s+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:s+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case i.Type.BMPSTRING:s+=" (BMP String)"}else s+=t.type;if(s+="\n",s+=o+"Constructed: "+t.constructed+"\n",t.composed){var c=0,l="";for(u=0;u<t.value.length;++u)void 0!==t.value[u]&&(c+=1,l+=i.prettyPrint(t.value[u],e+1,n),u+1<t.value.length&&(l+=","));s+=o+"Sub values: "+c+l}else{if(s+=o+"Value: ",t.type===i.Type.OID){var h=i.derToOid(t.value);s+=h,r.pki&&r.pki.oids&&h in r.pki.oids&&(s+=" ("+r.pki.oids[h]+") ")}if(t.type===i.Type.INTEGER)try{s+=i.derToInteger(t.value)}catch(f){s+="0x"+r.util.bytesToHex(t.value)}else if(t.type===i.Type.BITSTRING){if(s+=t.value.length>1?"0x"+r.util.bytesToHex(t.value.slice(1)):"(none)",t.value.length>0){var p=t.value.charCodeAt(0);1==p?s+=" (1 unused bit shown)":p>1&&(s+=" ("+p+" unused bits shown)")}}else if(t.type===i.Type.OCTETSTRING)a.test(t.value)||(s+="("+t.value+") "),s+="0x"+r.util.bytesToHex(t.value);else if(t.type===i.Type.UTF8)try{s+=r.util.decodeUtf8(t.value)}catch(d){if("URI malformed"!==d.message)throw d;s+="0x"+r.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===i.Type.PRINTABLESTRING||t.type===i.Type.IA5String?s+=t.value:a.test(t.value)?s+="0x"+r.util.bytesToHex(t.value):s+=0===t.value.length?"[null]":t.value}return s}},2285:t=>{var e={};t.exports=e;var n={};e.encode=function(t,e,n){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==n&&"number"!=typeof n)throw new TypeError('"maxline" must be a number.');var r="";if(t instanceof Uint8Array){var i=0,s=e.length,o=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var u=0,c=t[i];u<a.length;++u)a[u]=(c+=a[u]<<8)%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(i=0;0===t[i]&&i<t.length-1;++i)r+=o;for(i=a.length-1;i>=0;--i)r+=e[a[i]]}else r=function(t,e){var n=0,r=e.length,i=e.charAt(0),s=[0];for(n=0;n<t.length();++n){for(var o=0,a=t.at(n);o<s.length;++o)s[o]=(a+=s[o]<<8)%r,a=a/r|0;for(;a>0;)s.push(a%r),a=a/r|0}var u="";for(n=0;0===t.at(n)&&n<t.length()-1;++n)u+=i;for(n=s.length-1;n>=0;--n)u+=e[s[n]];return u}(t,e);if(n){var l=new RegExp(".{1,"+n+"}","g");r=r.match(l).join("\r\n")}return r},e.decode=function(t,e){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var r=n[e];if(!r){r=n[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");var s=e.length,o=e.charAt(0),a=[0];for(i=0;i<t.length;i++){var u=r[t.charCodeAt(i)];if(void 0===u)return;for(var c=0,l=u;c<a.length;++c)a[c]=255&(l+=a[c]*s),l>>=8;for(;l>0;)a.push(255&l),l>>=8}for(var h=0;t[h]===o&&h<t.length-1;++h)a.push(0);return"undefined"!=typeof Buffer?Buffer.from(a.reverse()):new Uint8Array(a.reverse())}},5455:(t,e,n)=>{var r=n(716);n(2038),t.exports=r.cipher=r.cipher||{},r.cipher.algorithms=r.cipher.algorithms||{},r.cipher.createCipher=function(t,e){var n=t;if("string"==typeof n&&(n=r.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+t);return new r.cipher.BlockCipher({algorithm:n,key:e,decrypt:!1})},r.cipher.createDecipher=function(t,e){var n=t;if("string"==typeof n&&(n=r.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+t);return new r.cipher.BlockCipher({algorithm:n,key:e,decrypt:!0})},r.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),r.cipher.algorithms[t]=e},r.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in r.cipher.algorithms?r.cipher.algorithms[t]:null};var i=r.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};i.prototype.start=function(t){t=t||{};var e={};for(var n in t)e[n]=t[n];e.decrypt=this._decrypt,this._finish=!1,this._input=r.util.createBuffer(),this.output=t.output||r.util.createBuffer(),this.mode.start(e)},i.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},i.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},2437:(t,e,n)=>{var r=n(716);n(2038),r.cipher=r.cipher||{};var i=t.exports=r.cipher.modes=r.cipher.modes||{};function s(t,e){if("string"==typeof t&&(t=r.util.createBuffer(t)),r.util.isArray(t)&&t.length>4){var n=t;t=r.util.createBuffer();for(var i=0;i<n.length;++i)t.putByte(n[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!r.util.isArray(t)){var s=[],o=e/4;for(i=0;i<o;++i)s.push(t.getInt32());t=s}return t}function o(t){t[t.length-1]=t[t.length-1]+1&4294967295}function a(t){return[t/4294967296|0,4294967295&t]}i.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(t){},i.ecb.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])},i.ecb.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])},i.ecb.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0},i.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return!(r>this.blockSize<<2||(t.truncate(r),0))},i.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)e.putInt32(this._outBlock[r]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)e.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0},i.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return!(r>this.blockSize<<2||(t.truncate(r),0))},i.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(t,e,n){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var s=(this.blockSize-r)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(t,e,n){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-r)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(t,e,n){var r=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-r)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(t,e,n){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-r)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,n=r.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?r.util.createBuffer(t.additionalData):r.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=r.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=n.length();if(12===i)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{for(this._j0=[0,0,0,0];n.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,e=r.util.createBuffer(e),this._aDataLength=a(8*e.length());var s=e.length()%this.blockSize;for(s&&e.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},i.gcm.prototype.encrypt=function(t,e,n){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-r)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s<=0||n){if(n){var a=r%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},i.gcm.prototype.decrypt=function(t,e,n){var r=t.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);this._cipherLength+=r<this.blockSize?r%this.blockSize:this.blockSize},i.gcm.prototype.afterFinish=function(t,e){var n=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=r.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},i.gcm.prototype.multiply=function(t,e){for(var n=[0,0,0,0],r=e.slice(0),i=0;i<128;++i)t[i/32|0]&1<<31-i%32&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r);return n},i.gcm.prototype.pow=function(t,e){for(var n=1&t[3],r=3;r>0;--r)e[r]=t[r]>>>1|(1&t[r-1])<<31;e[0]=t[0]>>>1,n&&(e[0]^=this._R)},i.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],n=0;n<32;++n){var r=this._m[n][t[n/8|0]>>>4*(7-n%8)&15];e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3]}return e},i.gcm.prototype.ghash=function(t,e,n){return e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],this.tableMultiply(e)},i.gcm.prototype.generateHashTable=function(t,e){for(var n=8/e,r=4*n,i=16*n,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0];a[o/r|0]=1<<e-1<<(r-1-o%r)*e,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s},i.gcm.prototype.generateSubHashTable=function(t,e){var n=1<<e,r=n>>>1,i=new Array(n);i[r]=t.slice(0);for(var s=r>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<r;){for(var o=1;o<s;++o){var a=i[s],u=i[o];i[s+o]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}s*=2}for(i[0]=[0,0,0,0],s=r+1;s<n;++s){var c=i[s^r];i[s]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i}},6269:(t,e,n)=>{var r=n(716);function i(t,e){r.cipher.registerAlgorithm(t,function(){return new r.des.Algorithm(t,e)})}n(5455),n(2437),n(2038),t.exports=r.des=r.des||{},r.des.startEncrypting=function(t,e,n,r){var i=d({key:t,output:n,decrypt:!1,mode:r||(null===e?"ECB":"CBC")});return i.start(e),i},r.des.createEncryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!1,mode:e})},r.des.startDecrypting=function(t,e,n,r){var i=d({key:t,output:n,decrypt:!0,mode:r||(null===e?"ECB":"CBC")});return i.start(e),i},r.des.createDecryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!0,mode:e})},r.des.Algorithm=function(t,e){var n=this;n.name=t,n.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return f(n._keys,t,e,!1)},decrypt:function(t,e){return f(n._keys,t,e,!0)}}}),n._init=!1},r.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=r.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(t){for(var e,n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=t.length()>8?3:1,v=[],y=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w=0;w<g;w++){var x=t.getInt32(),E=t.getInt32();x^=(e=252645135&(x>>>4^E))<<4,x^=e=65535&((E^=e)>>>-16^x),x^=(e=858993459&(x>>>2^(E^=e<<-16)))<<2,x^=e=65535&((E^=e)>>>-16^x),x^=(e=1431655765&(x>>>1^(E^=e<<-16)))<<1,x^=e=16711935&((E^=e)>>>8^x),e=(x^=(e=1431655765&(x>>>1^(E^=e<<8)))<<1)<<8|(E^=e)>>>20&240,x=E<<24|E<<8&16711680|E>>>8&65280|E>>>24&240,E=e;for(var _=0;_<y.length;++_){y[_]?(x=x<<2|x>>>26,E=E<<2|E>>>26):(x=x<<1|x>>>27,E=E<<1|E>>>27);var S=n[(x&=-15)>>>28]|r[x>>>24&15]|i[x>>>20&15]|s[x>>>16&15]|o[x>>>12&15]|a[x>>>8&15]|u[x>>>4&15],C=c[(E&=-15)>>>28]|l[E>>>24&15]|h[E>>>20&15]|p[E>>>16&15]|f[E>>>12&15]|d[E>>>8&15]|m[E>>>4&15];v[b++]=S^(e=65535&(C>>>16^S)),v[b++]=C^e<<16}}return v}(e),this._init=!0}},i("DES-ECB",r.cipher.modes.ecb),i("DES-CBC",r.cipher.modes.cbc),i("DES-CFB",r.cipher.modes.cfb),i("DES-OFB",r.cipher.modes.ofb),i("DES-CTR",r.cipher.modes.ctr),i("3DES-ECB",r.cipher.modes.ecb),i("3DES-CBC",r.cipher.modes.cbc),i("3DES-CFB",r.cipher.modes.cfb),i("3DES-OFB",r.cipher.modes.ofb),i("3DES-CTR",r.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],h=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],p=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function f(t,e,n,r){var i,f,d=32===t.length?3:9;i=3===d?r?[30,-2,-2]:[0,32,2]:r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var m=e[0],g=e[1];m^=(f=252645135&(m>>>4^g))<<4,m^=(f=65535&(m>>>16^(g^=f)))<<16,m^=f=858993459&((g^=f)>>>2^m),m^=f=16711935&((g^=f<<2)>>>8^m),m=(m^=(f=1431655765&(m>>>1^(g^=f<<8)))<<1)<<1|m>>>31,g=(g^=f)<<1|g>>>31;for(var v=0;v<d;v+=3){for(var y=i[v+1],b=i[v+2],w=i[v];w!=y;w+=b){var x=g^t[w],E=(g>>>4|g<<28)^t[w+1];f=m,m=g,g=f^(o[x>>>24&63]|u[x>>>16&63]|l[x>>>8&63]|p[63&x]|s[E>>>24&63]|a[E>>>16&63]|c[E>>>8&63]|h[63&E])}f=m,m=g,g=f}g=g>>>1|g<<31,g^=f=1431655765&((m=m>>>1|m<<31)>>>1^g),g^=(f=16711935&(g>>>8^(m^=f<<1)))<<8,g^=(f=858993459&(g>>>2^(m^=f)))<<2,g^=f=65535&((m^=f)>>>16^g),g^=f=252645135&((m^=f<<16)>>>4^g),n[0]=m^=f<<4,n[1]=g}function d(t){var e,n="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),i=(e=t.decrypt?r.cipher.createDecipher(n,t.key):r.cipher.createCipher(n,t.key)).start;return e.start=function(t,n){var s=null;n instanceof r.util.ByteBuffer&&(s=n,n={}),(n=n||{}).output=s,n.iv=t,i.call(e,n)},e}},716:t=>{t.exports={options:{usePureJavaScript:!1}}},7243:(t,e,n)=>{var r=n(716);n(2108),n(2038),(t.exports=r.hmac=r.hmac||{}).create=function(){var t=null,e=null,n=null,i=null,s={start:function(s,o){if(null!==s)if("string"==typeof s){if(!((s=s.toLowerCase())in r.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');e=r.md.algorithms[s].create()}else e=s;if(null===o)o=t;else{if("string"==typeof o)o=r.util.createBuffer(o);else if(r.util.isArray(o)){var a=o;o=r.util.createBuffer();for(var u=0;u<a.length;++u)o.putByte(a[u])}var c=o.length();for(c>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),n=r.util.createBuffer(),i=r.util.createBuffer(),c=o.length(),u=0;u<c;++u)a=o.at(u),n.putByte(54^a),i.putByte(92^a);if(c<e.blockLength)for(a=e.blockLength-c,u=0;u<a;++u)n.putByte(54),i.putByte(92);t=o,n=n.bytes(),i=i.bytes()}e.start(),e.update(n)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(i),e.update(t),e.digest()}};return s.digest=s.getMac,s}},9708:(t,e,n)=>{var r,i=n(716);function s(t,e,n){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,n):this.fromString(t,null==e&&"string"!=typeof t?256:e))}function o(){return new s(null)}function a(t,e,n,r,i,s){for(var o=16383&e,a=e>>14;--s>=0;){var u=16383&this.data[t],c=this.data[t++]>>14,l=a*u+c*o;i=((u=o*u+((16383&l)<<14)+n.data[r]+i)>>28)+(l>>14)+a*c,n.data[r++]=268435455&u}return i}t.exports=i.jsbn=i.jsbn||{},i.jsbn.BigInteger=s,"undefined"==typeof navigator?(s.prototype.am=a,r=28):"Microsoft Internet Explorer"==navigator.appName?(s.prototype.am=function(t,e,n,r,i,s){for(var o=32767&e,a=e>>15;--s>=0;){var u=32767&this.data[t],c=this.data[t++]>>15,l=a*u+c*o;i=((u=o*u+((32767&l)<<15)+n.data[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n.data[r++]=1073741823&u}return i},r=30):"Netscape"!=navigator.appName?(s.prototype.am=function(t,e,n,r,i,s){for(;--s>=0;){var o=e*this.data[t++]+n.data[r]+i;i=Math.floor(o/67108864),n.data[r++]=67108863&o}return i},r=26):(s.prototype.am=a,r=28),s.prototype.DB=r,s.prototype.DM=(1<<r)-1,s.prototype.DV=1<<r,s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-r,s.prototype.F2=2*r-52;var u,c,l=new Array;for(u="0".charCodeAt(0),c=0;c<=9;++c)l[u++]=c;for(u="a".charCodeAt(0),c=10;c<36;++c)l[u++]=c;for(u="A".charCodeAt(0),c=10;c<36;++c)l[u++]=c;function h(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function p(t,e){var n=l[t.charCodeAt(e)];return null==n?-1:n}function f(t){var e=o();return e.fromInt(t),e}function d(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function m(t){this.m=t}function g(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function v(t,e){return t&e}function y(t,e){return t|e}function b(t,e){return t^e}function w(t,e){return t&~e}function x(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function E(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function _(){}function S(t){return t}function C(t){this.r2=o(),this.q3=o(),s.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}m.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},m.prototype.revert=function(t){return t},m.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},m.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},m.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},g.prototype.convert=function(t){var e=o();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(s.ZERO)>0&&this.m.subTo(e,e),e},g.prototype.revert=function(t){var e=o();return t.copyTo(e),this.reduce(e),e},g.prototype.reduce=function(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t.data[e],r=n*this.mpl+((n*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t.data[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t.data[n]>=t.DV;)t.data[n]-=t.DV,t.data[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},g.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},g.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},s.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s},s.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0},s.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;--r>=0;){var a=8==n?255&t[r]:p(t,r);a<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==o?this.data[this.t++]=a:o+n>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t},s.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e.data[n+t]=this.data[n];for(n=t-1;n>=0;--n)e.data[n]=0;e.t=this.t+t,e.s=this.s},s.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e.data[n-t]=this.data[n];e.t=Math.max(this.t-t,0),e.s=this.s},s.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e.data[n+o+1]=this.data[n]>>i|a,a=(this.data[n]&s)<<r;for(n=o-1;n>=0;--n)e.data[n]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},s.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,s=(1<<r)-1;e.data[0]=this.data[n]>>r;for(var o=n+1;o<this.t;++o)e.data[o-n-1]|=(this.data[o]&s)<<i,e.data[o-n]=this.data[o]>>r;r>0&&(e.data[this.t-n-1]|=(this.s&s)<<i),e.t=this.t-n,e.clamp()}},s.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]-t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e.data[n++]=this.DV+r:r>0&&(e.data[n++]=r),e.t=n,e.clamp()},s.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e.data[i]=0;for(i=0;i<r.t;++i)e.data[i+n.t]=n.am(0,r.data[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&s.ZERO.subTo(e,e)},s.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t.data[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e.data[n],t,2*n,0,1);(t.data[n+e.t]+=e.am(n+1,2*e.data[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t.data[n+e.t]-=e.DV,t.data[n+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(n,e.data[n],t,2*n,0,1)),t.s=0,t.clamp()},s.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=o());var a=o(),u=this.s,c=t.s,l=this.DB-d(r.data[r.t-1]);l>0?(r.lShiftTo(l,a),i.lShiftTo(l,n)):(r.copyTo(a),i.copyTo(n));var h=a.t,p=a.data[h-1];if(0!=p){var f=p*(1<<this.F1)+(h>1?a.data[h-2]>>this.F2:0),m=this.FV/f,g=(1<<this.F1)/f,v=1<<this.F2,y=n.t,b=y-h,w=null==e?o():e;for(a.dlShiftTo(b,w),n.compareTo(w)>=0&&(n.data[n.t++]=1,n.subTo(w,n)),s.ONE.dlShiftTo(h,w),w.subTo(a,a);a.t<h;)a.data[a.t++]=0;for(;--b>=0;){var x=n.data[--y]==p?this.DM:Math.floor(n.data[y]*m+(n.data[y-1]+v)*g);if((n.data[y]+=a.am(0,x,n,b,0,h))<x)for(a.dlShiftTo(b,w),n.subTo(w,n);n.data[y]<--x;)n.subTo(w,n)}null!=e&&(n.drShiftTo(h,e),u!=c&&s.ZERO.subTo(e,e)),n.t=h,n.clamp(),l>0&&n.rShiftTo(l,n),u<0&&s.ZERO.subTo(n,n)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},s.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},s.prototype.exp=function(t,e){if(t>4294967295||t<1)return s.ONE;var n=o(),r=o(),i=e.convert(this),a=d(t)-1;for(i.copyTo(n);--a>=0;)if(e.sqrTo(n,r),(t&1<<a)>0)e.mulTo(r,i,n);else{var u=n;n=r,r=u}return e.revert(n)},s.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=h(n));o>=0;)a<e?(n=(this.data[o]&(1<<a)-1)<<e-a,n|=this.data[--o]>>(a+=this.DB-e)):(n=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=h(n));return i?s:"0"},s.prototype.negate=function(){var t=o();return s.ZERO.subTo(this,t),t},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this.data[n]-t.data[n]))return e;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this.data[this.t-1]^this.s&this.DM)},s.prototype.mod=function(t){var e=o();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(s.ZERO)>0&&t.subTo(e,e),e},s.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new m(e):new g(e),this.exp(t,n)},s.ZERO=f(0),s.ONE=f(1),_.prototype.convert=S,_.prototype.revert=S,_.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},_.prototype.sqrTo=function(t,e){t.squareTo(e)},C.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=o();return t.copyTo(e),this.reduce(e),e},C.prototype.revert=function(t){return t},C.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},C.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},C.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var A=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],I=(1<<26)/A[A.length-1];s.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},s.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=f(n),i=o(),s=o(),a="";for(this.divRemTo(r,i,s);i.signum()>0;)a=(n+s.intValue()).toString(t).substr(1)+a,i.divRemTo(r,i,s);return s.intValue().toString(t)+a},s.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,a=0,u=0;u<t.length;++u){var c=p(t,u);c<0?"-"==t.charAt(u)&&0==this.signum()&&(i=!0):(a=e*a+c,++o>=n&&(this.dMultiply(r),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(s.ONE.shiftLeft(t-1),y,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(s.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=1+(t>>3),e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},s.prototype.bitwiseTo=function(t,e,n){var r,i,s=Math.min(t.t,this.t);for(r=0;r<s;++r)n.data[r]=e(this.data[r],t.data[r]);if(t.t<this.t){for(i=t.s&this.DM,r=s;r<this.t;++r)n.data[r]=e(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<t.t;++r)n.data[r]=e(i,t.data[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},s.prototype.changeBit=function(t,e){var n=s.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},s.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]+t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e.data[n++]=r:r<-1&&(e.data[n++]=this.DV+r),e.t=n,e.clamp()},s.prototype.dMultiply=function(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}},s.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n.data[--i]=0;for(r=n.t-this.t;i<r;++i)n.data[i+this.t]=this.am(0,t.data[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t.data[i],n,i,0,e-i);n.clamp()},s.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n.data[this.t+r-e]=this.am(e-r,t.data[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},s.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this.data[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this.data[r])%t;return n},s.prototype.millerRabin=function(t){var e=this.subtract(s.ONE),n=e.getLowestSetBit();if(n<=0)return!1;for(var r,i=e.shiftRight(n),o={nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}},a=0;a<t;++a){do{r=new s(this.bitLength(),o)}while(r.compareTo(s.ONE)<=0||r.compareTo(e)>=0);var u=r.modPow(i,this);if(0!=u.compareTo(s.ONE)&&0!=u.compareTo(e)){for(var c=1;c++<n&&0!=u.compareTo(e);)if(0==(u=u.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0},s.prototype.clone=function(){var t=o();return this.copyTo(t),t},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},s.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},s.prototype.equals=function(t){return 0==this.compareTo(t)},s.prototype.min=function(t){return this.compareTo(t)<0?this:t},s.prototype.max=function(t){return this.compareTo(t)>0?this:t},s.prototype.and=function(t){var e=o();return this.bitwiseTo(t,v,e),e},s.prototype.or=function(t){var e=o();return this.bitwiseTo(t,y,e),e},s.prototype.xor=function(t){var e=o();return this.bitwiseTo(t,b,e),e},s.prototype.andNot=function(t){var e=o();return this.bitwiseTo(t,w,e),e},s.prototype.not=function(){for(var t=o(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t},s.prototype.shiftLeft=function(t){var e=o();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},s.prototype.shiftRight=function(t){var e=o();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},s.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+x(this.data[t]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=E(this.data[n]^e);return t},s.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)},s.prototype.setBit=function(t){return this.changeBit(t,y)},s.prototype.clearBit=function(t){return this.changeBit(t,w)},s.prototype.flipBit=function(t){return this.changeBit(t,b)},s.prototype.add=function(t){var e=o();return this.addTo(t,e),e},s.prototype.subtract=function(t){var e=o();return this.subTo(t,e),e},s.prototype.multiply=function(t){var e=o();return this.multiplyTo(t,e),e},s.prototype.divide=function(t){var e=o();return this.divRemTo(t,e,null),e},s.prototype.remainder=function(t){var e=o();return this.divRemTo(t,null,e),e},s.prototype.divideAndRemainder=function(t){var e=o(),n=o();return this.divRemTo(t,e,n),new Array(e,n)},s.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),s=f(1);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new m(e):e.isEven()?new C(e):new g(e);var a=new Array,u=3,c=n-1,l=(1<<n)-1;if(a[1]=r.convert(this),n>1){var h=o();for(r.sqrTo(a[1],h);u<=l;)a[u]=o(),r.mulTo(h,a[u-2],a[u]),u+=2}var p,v,y=t.t-1,b=!0,w=o();for(i=d(t.data[y])-1;y>=0;){for(i>=c?p=t.data[y]>>i-c&l:(p=(t.data[y]&(1<<i+1)-1)<<c-i,y>0&&(p|=t.data[y-1]>>this.DB+i-c)),u=n;0==(1&p);)p>>=1,--u;if((i-=u)<0&&(i+=this.DB,--y),b)a[p].copyTo(s),b=!1;else{for(;u>1;)r.sqrTo(s,w),r.sqrTo(w,s),u-=2;u>0?r.sqrTo(s,w):(v=s,s=w,w=v),r.mulTo(w,a[p],s)}for(;y>=0&&0==(t.data[y]&1<<i);)r.sqrTo(s,w),v=s,s=w,w=v,--i<0&&(i=this.DB-1,--y)}return r.revert(s)},s.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return s.ZERO;for(var n=t.clone(),r=this.clone(),i=f(1),o=f(0),a=f(0),u=f(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(t,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(a,i),o.subTo(u,o)):(r.subTo(n,r),e&&a.subTo(i,a),u.subTo(o,u))}return 0!=r.compareTo(s.ONE)?s.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},s.prototype.pow=function(t){return this.exp(t,new _)},s.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),n.rShiftTo(s,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n},s.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n.data[0]<=A[A.length-1]){for(e=0;e<A.length;++e)if(n.data[0]==A[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<A.length;){for(var r=A[e],i=e+1;i<A.length&&r<I;)r*=A[i++];for(r=n.modInt(r);e<i;)if(r%A[e++]==0)return!1}return n.millerRabin(t)}},2108:(t,e,n)=>{var r=n(716);t.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}},3744:(t,e,n)=>{var r=n(716);n(4947),t.exports=r.mgf=r.mgf||{},r.mgf.mgf1=r.mgf1},4947:(t,e,n)=>{var r=n(716);n(2038),r.mgf=r.mgf||{},(t.exports=r.mgf.mgf1=r.mgf1=r.mgf1||{}).create=function(t){return{generate:function(e,n){for(var i=new r.util.ByteBuffer,s=Math.ceil(n/t.digestLength),o=0;o<s;o++){var a=new r.util.ByteBuffer;a.putInt32(o),t.start(),t.update(e+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}}}},8865:(t,e,n)=>{var r=n(716);r.pki=r.pki||{};var i=t.exports=r.pki.oids=r.oids=r.oids||{};function s(t,e){i[t]=e,i[e]=t}function o(t,e){i[t]=e}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.101.112","EdDSA25519"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("1.3.14.3.2.29","sha1WithRSASignature"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("2.16.840.1.101.3.4.2.4","sha224"),s("2.16.840.1.101.3.4.2.5","sha512-224"),s("2.16.840.1.101.3.4.2.6","sha512-256"),s("1.2.840.113549.2.2","md2"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.4","surname"),s("2.5.4.5","serialNumber"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.9","streetAddress"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.12","title"),s("2.5.4.13","description"),s("2.5.4.15","businessCategory"),s("2.5.4.17","postalCode"),s("2.5.4.42","givenName"),s("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),s("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},2124:(t,e,n)=>{var r=n(716);if(n(4937),n(8493),n(6269),n(2108),n(8865),n(5369),n(3832),n(6200),n(433),n(140),n(2038),void 0===i)var i=r.jsbn.BigInteger;var s=r.asn1,o=r.pki=r.pki||{};t.exports=o.pbe=r.pbe=r.pbe||{};var a=o.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function h(t,e){return t.start().update(e).digest().getBytes()}function p(t){var e;if(t){if(!(e=o.oids[s.derToOid(t)])){var n=new Error("Unsupported PRF OID.");throw n.oid=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}}else e="hmacWithSHA1";return f(e)}function f(t){var e=r.md;switch(t){case"hmacWithSHA224":e=r.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}o.encryptPrivateKeyInfo=function(t,e,n){(n=n||{}).saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var i,u,c,l=r.random.getBytesSync(n.saltSize),h=n.count,p=s.integerToDer(h);if(0===n.algorithm.indexOf("aes")||"des"===n.algorithm){var d,m,g;switch(n.algorithm){case"aes128":i=16,d=16,m=a["aes128-CBC"],g=r.aes.createEncryptionCipher;break;case"aes192":i=24,d=16,m=a["aes192-CBC"],g=r.aes.createEncryptionCipher;break;case"aes256":i=32,d=16,m=a["aes256-CBC"],g=r.aes.createEncryptionCipher;break;case"des":i=8,d=8,m=a.desCBC,g=r.des.createEncryptionCipher;break;default:throw(E=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=n.algorithm,E}var v="hmacWith"+n.prfAlgorithm.toUpperCase(),y=f(v),b=r.pkcs5.pbkdf2(e,l,h,i,y),w=r.random.getBytesSync(d);(_=g(b)).start(w),_.update(s.toDer(t)),_.finish(),c=_.output.getBytes();var x=function(t,e,n,i){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,e.getBytes())]);return"hmacWithSHA1"!==i&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,r.util.hexToBytes(n.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[i]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])),a}(l,p,i,v);u=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBKDF2).getBytes()),x]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(m).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,w)])])])}else{var E;if("3des"!==n.algorithm)throw(E=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=n.algorithm,E;i=24;var _,S=new r.util.ByteBuffer(l);b=o.pbe.generatePkcs12Key(e,S,1,h,i),w=o.pbe.generatePkcs12Key(e,S,2,h,i),(_=r.des.createEncryptionCipher(b)).start(w),_.update(s.toDer(t)),_.finish(),c=_.output.getBytes(),u=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,l),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,p.getBytes())])])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[u,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,c)])},o.decryptPrivateKeyInfo=function(t,e){var n=null,i={},a=[];if(!s.validate(t,u,i,a)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=a,c}var l=s.derToOid(i.encryptionOid),h=o.pbe.getCipher(l,i.encryptionParams,e),p=r.util.createBuffer(i.encryptedData);return h.update(p),h.finish()&&(n=s.fromDer(h.output)),n},o.encryptedPrivateKeyToPem=function(t,e){var n={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(t).getBytes()};return r.pem.encode(n,{maxline:e})},o.encryptedPrivateKeyFromPem=function(t){var e=r.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(e.body)},o.encryptRsaPrivateKey=function(t,e,n){if(!(n=n||{}).legacy){var i=o.wrapRsaPrivateKey(o.privateKeyToAsn1(t));return i=o.encryptPrivateKeyInfo(i,e,n),o.encryptedPrivateKeyToPem(i)}var a,u,c,l;switch(n.algorithm){case"aes128":a="AES-128-CBC",c=16,u=r.random.getBytesSync(16),l=r.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",c=24,u=r.random.getBytesSync(16),l=r.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",c=32,u=r.random.getBytesSync(16),l=r.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",c=24,u=r.random.getBytesSync(8),l=r.des.createEncryptionCipher;break;case"des":a="DES-CBC",c=8,u=r.random.getBytesSync(8),l=r.des.createEncryptionCipher;break;default:var h=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw h.algorithm=n.algorithm,h}var p=l(r.pbe.opensslDeriveBytes(e,u.substr(0,8),c));p.start(u),p.update(s.toDer(o.privateKeyToAsn1(t))),p.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:r.util.bytesToHex(u).toUpperCase()},body:p.output.getBytes()};return r.pem.encode(f)},o.decryptRsaPrivateKey=function(t,e){var n=null,i=r.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw(c=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=c,c;if(i.procType&&"ENCRYPTED"===i.procType.type){var a,u;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,u=r.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,u=r.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,u=r.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,u=r.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,u=r.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,u=function(t){return r.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":a=8,u=function(t){return r.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":a=16,u=function(t){return r.rc2.createDecryptionCipher(t,128)};break;default:var c;throw(c=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".')).algorithm=i.dekInfo.algorithm,c}var l=r.util.hexToBytes(i.dekInfo.parameters),h=u(r.pbe.opensslDeriveBytes(e,l.substr(0,8),a));if(h.start(l),h.update(r.util.createBuffer(i.body)),!h.finish())return n;n=h.output.getBytes()}else n=i.body;return null!==(n="ENCRYPTED PRIVATE KEY"===i.type?o.decryptPrivateKeyInfo(s.fromDer(n),e):s.fromDer(n))&&(n=o.privateKeyFromAsn1(n)),n},o.pbe.generatePkcs12Key=function(t,e,n,i,s,o){var a,u;if(null==o){if(!("sha1"in r.md))throw new Error('"sha1" hash algorithm unavailable.');o=r.md.sha1.create()}var c=o.digestLength,l=o.blockLength,h=new r.util.ByteBuffer,p=new r.util.ByteBuffer;if(null!=t){for(u=0;u<t.length;u++)p.putInt16(t.charCodeAt(u));p.putInt16(0)}var f=p.length(),d=e.length(),m=new r.util.ByteBuffer;m.fillWithByte(n,l);var g=l*Math.ceil(d/l),v=new r.util.ByteBuffer;for(u=0;u<g;u++)v.putByte(e.at(u%d));var y=l*Math.ceil(f/l),b=new r.util.ByteBuffer;for(u=0;u<y;u++)b.putByte(p.at(u%f));var w=v;w.putBuffer(b);for(var x=Math.ceil(s/c),E=1;E<=x;E++){var _=new r.util.ByteBuffer;_.putBytes(m.bytes()),_.putBytes(w.bytes());for(var S=0;S<i;S++)o.start(),o.update(_.getBytes()),_=o.digest();var C=new r.util.ByteBuffer;for(u=0;u<l;u++)C.putByte(_.at(u%c));var A=Math.ceil(d/l)+Math.ceil(f/l),I=new r.util.ByteBuffer;for(a=0;a<A;a++){var T=new r.util.ByteBuffer(w.getBytes(l)),k=511;for(u=C.length()-1;u>=0;u--)k>>=8,k+=C.at(u)+T.at(u),T.setAt(u,255&k);I.putBuffer(T)}w=I,h.putBuffer(_)}return h.truncate(h.length()-s),h},o.pbe.getCipher=function(t,e,n){switch(t){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(t,e,n);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(t,e,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=t,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}},o.pbe.getCipherForPBES2=function(t,e,n){var i,a={},u=[];if(!s.validate(e,c,a,u))throw(i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,i;if((t=s.derToOid(a.kdfOid))!==o.oids.pkcs5PBKDF2)throw(i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,i.supportedOids=["pkcs5PBKDF2"],i;if((t=s.derToOid(a.encOid))!==o.oids["aes128-CBC"]&&t!==o.oids["aes192-CBC"]&&t!==o.oids["aes256-CBC"]&&t!==o.oids["des-EDE3-CBC"]&&t!==o.oids.desCBC)throw(i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i;var l,h,f=a.kdfSalt,d=r.util.createBuffer(a.kdfIterationCount);switch(d=d.getInt(d.length()<<3),o.oids[t]){case"aes128-CBC":l=16,h=r.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,h=r.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,h=r.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,h=r.des.createDecryptionCipher;break;case"desCBC":l=8,h=r.des.createDecryptionCipher}var m=p(a.prfOid),g=r.pkcs5.pbkdf2(n,f,d,l,m),v=a.encIv,y=h(g);return y.start(v),y},o.pbe.getCipherForPKCS12PBE=function(t,e,n){var i={},a=[];if(!s.validate(e,l,i,a))throw(m=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,m;var u,c,h,f=r.util.createBuffer(i.salt),d=r.util.createBuffer(i.iterations);switch(d=d.getInt(d.length()<<3),t){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,h=r.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,h=function(t,e){var n=r.rc2.createDecryptionCipher(t,40);return n.start(e,null),n};break;default:var m;throw(m=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,m}var g=p(i.prfOid),v=o.pbe.generatePkcs12Key(n,f,1,d,u,g);return g.start(),h(v,o.pbe.generatePkcs12Key(n,f,2,d,c,g))},o.pbe.opensslDeriveBytes=function(t,e,n,i){if(null==i){if(!("md5"in r.md))throw new Error('"md5" hash algorithm unavailable.');i=r.md.md5.create()}null===e&&(e="");for(var s=[h(i,t+e)],o=16,a=1;o<n;++a,o+=16)s.push(h(i,s[a-1]+t+e));return s.join("").substr(0,n)}},5369:(t,e,n)=>{var r=n(716);n(7243),n(2108),n(2038);var i,s=r.pkcs5=r.pkcs5||{};r.util.isNodejs&&!r.options.usePureJavaScript&&(i=n(5559)),t.exports=r.pbkdf2=s.pbkdf2=function(t,e,n,s,o,a){if("function"==typeof o&&(a=o,o=null),r.util.isNodejs&&!r.options.usePureJavaScript&&i.pbkdf2&&(null===o||"object"!=typeof o)&&(i.pbkdf2Sync.length>4||!o||"sha1"===o))return"string"!=typeof o&&(o="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),a?4===i.pbkdf2Sync.length?i.pbkdf2(t,e,n,s,function(t,e){if(t)return a(t);a(null,e.toString("binary"))}):i.pbkdf2(t,e,n,s,o,function(t,e){if(t)return a(t);a(null,e.toString("binary"))}):4===i.pbkdf2Sync.length?i.pbkdf2Sync(t,e,n,s).toString("binary"):i.pbkdf2Sync(t,e,n,s,o).toString("binary");if(null==o&&(o="sha1"),"string"==typeof o){if(!(o in r.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=r.md[o].create()}var u=o.digestLength;if(s>4294967295*u){var c=new Error("Derived key is too long.");if(a)return a(c);throw c}var l=Math.ceil(s/u),h=s-(l-1)*u,p=r.hmac.create();p.start(o,t);var f,d,m,g="";if(!a){for(var v=1;v<=l;++v){p.start(null,null),p.update(e),p.update(r.util.int32ToBytes(v)),f=m=p.digest().getBytes();for(var y=2;y<=n;++y)p.start(null,null),p.update(m),d=p.digest().getBytes(),f=r.util.xorBytes(f,d,u),m=d;g+=v<l?f:f.substr(0,h)}return g}function b(){if(v>l)return a(null,g);p.start(null,null),p.update(e),p.update(r.util.int32ToBytes(v)),f=m=p.digest().getBytes(),y=2,w()}function w(){if(y<=n)return p.start(null,null),p.update(m),d=p.digest().getBytes(),f=r.util.xorBytes(f,d,u),m=d,++y,r.util.setImmediate(w);g+=v<l?f:f.substr(0,h),++v,b()}v=1,b()}},3832:(t,e,n)=>{var r=n(716);n(2038);var i=t.exports=r.pem=r.pem||{};function s(t){for(var e=t.name+": ",n=[],r=function(t,e){return" "+e},i=0;i<t.values.length;++i)n.push(t.values[i].replace(/^(\S+\r\n)/,r));e+=n.join(",")+"\r\n";var s=0,o=-1;for(i=0;i<e.length;++i,++s)if(s>65&&-1!==o){var a=e[o];","===a?(++o,e=e.substr(0,o)+"\r\n "+e.substr(o)):e=e.substr(0,o)+"\r\n"+a+e.substr(o+1),s=i-o-1,o=-1,++i}else" "!==e[i]&&"\t"!==e[i]&&","!==e[i]||(o=i);return e}function o(t){return t.replace(/^\s+/,"")}i.encode=function(t,e){e=e||{};var n,i="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(i+=s(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(i+=s(n={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),i+=s(n)),t.headers)for(var o=0;o<t.headers.length;++o)i+=s(t.headers[o]);return t.procType&&(i+="\r\n"),(i+=r.util.encode64(t.body,e.maxline||64)+"\r\n")+"-----END "+t.type+"-----\r\n"},i.decode=function(t){for(var e,n=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;e=i.exec(t);){var u=e[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var c={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:r.util.decode64(e[3])};if(n.push(c),e[2]){for(var l=e[2].split(a),h=0;e&&h<l.length;){for(var p=l[h].replace(/\s+$/,""),f=h+1;f<l.length;++f){var d=l[f];if(!/\s/.test(d[0]))break;p+=d,h=f}if(e=p.match(s)){for(var m={name:e[1],values:[]},g=e[2].split(","),v=0;v<g.length;++v)m.values.push(o(g[v]));if(c.procType)if(c.contentDomain||"Content-Domain"!==m.name)if(c.dekInfo||"DEK-Info"!==m.name)c.headers.push(m);else{if(0===m.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.contentDomain=g[0]||"";else{if("Proc-Type"!==m.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==m.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++h}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===n.length)throw new Error("Invalid PEM formatted message.");return n}},2280:(t,e,n)=>{var r=n(716);n(2038),n(6200),n(736);var i=t.exports=r.pkcs1=r.pkcs1||{};function s(t,e,n){n||(n=r.md.sha1.create());for(var i="",s=Math.ceil(e/n.digestLength),o=0;o<s;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);n.start(),n.update(t+a),i+=n.digest().getBytes()}return i.substring(0,e)}i.encode_rsa_oaep=function(t,e,n){var i,o,a,u;"string"==typeof n?(i=n,o=arguments[3]||void 0,a=arguments[4]||void 0):n&&(i=n.label||void 0,o=n.seed||void 0,a=n.md||void 0,n.mgf1&&n.mgf1.md&&(u=n.mgf1.md)),a?a.start():a=r.md.sha1.create(),u||(u=a);var c=Math.ceil(t.n.bitLength()/8),l=c-2*a.digestLength-2;if(e.length>l)throw(g=new Error("RSAES-OAEP input message length is too long.")).length=e.length,g.maxLength=l,g;i||(i=""),a.update(i,"raw");for(var h=a.digest(),p="",f=l-e.length,d=0;d<f;d++)p+="\0";var m=h.getBytes()+p+"\x01"+e;if(o){if(o.length!==a.digestLength){var g;throw(g=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,g.digestLength=a.digestLength,g}}else o=r.random.getBytes(a.digestLength);var v=s(o,c-a.digestLength-1,u),y=r.util.xorBytes(m,v,m.length),b=s(y,a.digestLength,u),w=r.util.xorBytes(o,b,o.length);return"\0"+w+y},i.decode_rsa_oaep=function(t,e,n){var i,o,a;"string"==typeof n?(i=n,o=arguments[3]||void 0):n&&(i=n.label||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md));var u=Math.ceil(t.n.bitLength()/8);if(e.length!==u)throw(y=new Error("RSAES-OAEP encoded message length is invalid.")).length=e.length,y.expectedLength=u,y;if(void 0===o?o=r.md.sha1.create():o.start(),a||(a=o),u<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),o.update(i,"raw");for(var c=o.digest().getBytes(),l=e.charAt(0),h=e.substring(1,o.digestLength+1),p=e.substring(1+o.digestLength),f=s(p,o.digestLength,a),d=r.util.xorBytes(h,f,h.length),m=s(d,u-o.digestLength-1,a),g=r.util.xorBytes(p,m,p.length),v=g.substring(0,o.digestLength),y="\0"!==l,b=0;b<o.digestLength;++b)y|=c.charAt(b)!==v.charAt(b);for(var w=1,x=o.digestLength,E=o.digestLength;E<g.length;E++){var _=g.charCodeAt(E),S=1&_^1,C=w?65534:0;y|=_&C,x+=w&=S}if(y||1!==g.charCodeAt(x))throw new Error("Invalid RSAES-OAEP padding.");return g.substring(x+1)}},2174:(t,e,n)=>{var r=n(716);n(8493),n(7243),n(8865),n(5913),n(2124),n(6200),n(140),n(736),n(2038),n(5523);var i=r.asn1,s=r.pki,o=t.exports=r.pkcs12=r.pkcs12||{},a={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},u={name:"PFX",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},a,{name:"PFX.macData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},c={name:"SafeBag",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},l={name:"Attribute",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,capture:"values"}]},h={name:"CertBag",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:i.Class.UNIVERSAL,type:i.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function p(t,e,n,r){for(var i=[],s=0;s<t.length;s++)for(var o=0;o<t[s].safeBags.length;o++){var a=t[s].safeBags[o];void 0!==r&&a.type!==r||(null!==e?void 0!==a.attributes[e]&&a.attributes[e].indexOf(n)>=0&&i.push(a):i.push(a))}return i}function f(t){if(t.composed||t.constructed){for(var e=r.util.createBuffer(),n=0;n<t.value.length;++n)e.putBytes(t.value[n].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function d(t,e){var n={},o=[];if(!i.validate(t,r.pkcs7.asn1.encryptedDataValidator,n,o))throw(a=new Error("Cannot read EncryptedContentInfo.")).errors=o,a;var a,u=i.derToOid(n.contentType);if(u!==s.oids.data)throw(a=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=u,a;u=i.derToOid(n.encAlgorithm);var c=s.pbe.getCipher(u,n.encParameter,e),l=f(n.encryptedContentAsn1),h=r.util.createBuffer(l.value);if(c.update(h),!c.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return c.output.getBytes()}function m(t,e,n){if(!e&&0===t.length)return[];if((t=i.fromDer(t,e)).tagClass!==i.Class.UNIVERSAL||t.type!==i.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],o=0;o<t.value.length;o++){var a={},u=[];if(!i.validate(t.value[o],c,a,u))throw(m=new Error("Cannot read SafeBag.")).errors=u,m;var l,p,f={type:i.derToOid(a.bagId),attributes:g(a.bagAttributes)};r.push(f);var d=a.bagValue.value[0];switch(f.type){case s.oids.pkcs8ShroudedKeyBag:if(null===(d=s.decryptPrivateKeyInfo(d,n)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case s.oids.keyBag:try{f.key=s.privateKeyFromAsn1(d)}catch(v){f.key=null,f.asn1=d}continue;case s.oids.certBag:l=h,p=function(){if(i.derToOid(a.certId)!==s.oids.x509Certificate){var t=new Error("Unsupported certificate type, only X.509 supported.");throw t.oid=i.derToOid(a.certId),t}var n=i.fromDer(a.cert,e);try{f.cert=s.certificateFromAsn1(n,!0)}catch(v){f.cert=null,f.asn1=n}};break;default:var m;throw(m=new Error("Unsupported PKCS#12 SafeBag type.")).oid=f.type,m}if(void 0!==l&&!i.validate(d,l,a,u))throw(m=new Error("Cannot read PKCS#12 "+l.name)).errors=u,m;p()}return r}function g(t){var e={};if(void 0!==t)for(var n=0;n<t.length;++n){var r={},o=[];if(!i.validate(t[n],l,r,o)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=o,a}var u=i.derToOid(r.oid);if(void 0!==s.oids[u]){e[s.oids[u]]=[];for(var c=0;c<r.values.length;++c)e[s.oids[u]].push(r.values[c].value)}}return e}o.pkcs12FromAsn1=function(t,e,n){"string"==typeof e?(n=e,e=!0):void 0===e&&(e=!0);var c={};if(!i.validate(t,u,c,[]))throw(l=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=l,l;var l,h={version:c.version.charCodeAt(0),safeContents:[],getBags:function(t){var e,n={};return"localKeyId"in t?e=t.localKeyId:"localKeyIdHex"in t&&(e=r.util.hexToBytes(t.localKeyIdHex)),void 0===e&&!("friendlyName"in t)&&"bagType"in t&&(n[t.bagType]=p(h.safeContents,null,null,t.bagType)),void 0!==e&&(n.localKeyId=p(h.safeContents,"localKeyId",e,t.bagType)),"friendlyName"in t&&(n.friendlyName=p(h.safeContents,"friendlyName",t.friendlyName,t.bagType)),n},getBagsByFriendlyName:function(t,e){return p(h.safeContents,"friendlyName",t,e)},getBagsByLocalKeyId:function(t,e){return p(h.safeContents,"localKeyId",t,e)}};if(3!==c.version.charCodeAt(0))throw(l=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=c.version.charCodeAt(0),l;if(i.derToOid(c.contentType)!==s.oids.data)throw(l=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=i.derToOid(c.contentType),l;var g=c.content.value[0];if(g.tagClass!==i.Class.UNIVERSAL||g.type!==i.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(g=f(g),c.mac){var v=null,y=0,b=i.derToOid(c.macAlgorithm);switch(b){case s.oids.sha1:v=r.md.sha1.create(),y=20;break;case s.oids.sha256:v=r.md.sha256.create(),y=32;break;case s.oids.sha384:v=r.md.sha384.create(),y=48;break;case s.oids.sha512:v=r.md.sha512.create(),y=64;break;case s.oids.md5:v=r.md.md5.create(),y=16}if(null===v)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+b);var w=new r.util.ByteBuffer(c.macSalt),x="macIterations"in c?parseInt(r.util.bytesToHex(c.macIterations),16):1,E=o.generateKey(n,w,3,x,y,v),_=r.hmac.create();if(_.start(v,E),_.update(g.value),_.getMac().getBytes()!==c.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(t,e,n,r){if((e=i.fromDer(e,n)).tagClass!==i.Class.UNIVERSAL||e.type!==i.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var o=0;o<e.value.length;o++){var u={},c=[];if(!i.validate(e.value[o],a,u,c))throw(g=new Error("Cannot read ContentInfo.")).errors=c,g;var l={encrypted:!1},h=null,p=u.content.value[0];switch(i.derToOid(u.contentType)){case s.oids.data:if(p.tagClass!==i.Class.UNIVERSAL||p.type!==i.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");h=f(p).value;break;case s.oids.encryptedData:h=d(p,r),l.encrypted=!0;break;default:var g;throw(g=new Error("Unsupported PKCS#12 contentType.")).contentType=i.derToOid(u.contentType),g}l.safeBags=m(h,n,r),t.safeContents.push(l)}}(h,g.value,e,n),h},o.toPkcs12Asn1=function(t,e,n,a){(a=a||{}).saltSize=a.saltSize||8,a.count=a.count||2048,a.algorithm=a.algorithm||a.encAlgorithm||"aes128","useMac"in a||(a.useMac=!0),"localKeyId"in a||(a.localKeyId=null),"generateLocalKeyId"in a||(a.generateLocalKeyId=!0);var u,c=a.localKeyId;if(null!==c)c=r.util.hexToBytes(c);else if(a.generateLocalKeyId)if(e){var l=r.util.isArray(e)?e[0]:e;"string"==typeof l&&(l=s.certificateFromPem(l)),(I=r.md.sha1.create()).update(i.toDer(s.certificateToAsn1(l)).getBytes()),c=I.digest().getBytes()}else c=r.random.getBytes(20);var h=[];null!==c&&h.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.localKeyId).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,c)])])),"friendlyName"in a&&h.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.friendlyName).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.BMPSTRING,!1,a.friendlyName)])])),h.length>0&&(u=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,h));var p=[],f=[];null!==e&&(f=r.util.isArray(e)?e:[e]);for(var d=[],m=0;m<f.length;++m){"string"==typeof(e=f[m])&&(e=s.certificateFromPem(e));var g=0===m?u:void 0,v=s.certificateToAsn1(e),y=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.certBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.x509Certificate).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(v).getBytes())])])]),g]);d.push(y)}if(d.length>0){var b=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,d),w=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(b).getBytes())])]);p.push(w)}var x=null;if(null!==t){var E=s.wrapRsaPrivateKey(s.privateKeyToAsn1(t));x=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,null===n?[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.keyBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[E]),u]:[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.pkcs8ShroudedKeyBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[s.encryptPrivateKeyInfo(E,n,a)]),u]);var _=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[x]),S=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(_).getBytes())])]);p.push(S)}var C,A=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,p);if(a.useMac){var I=r.md.sha1.create(),T=new r.util.ByteBuffer(r.random.getBytes(a.saltSize)),k=a.count,P=(t=o.generateKey(n,T,3,k,20),r.hmac.create());P.start(I,t),P.update(i.toDer(A).getBytes());var R=P.getMac();C=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.sha1).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,R.getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,T.getBytes()),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(k).getBytes())])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(3).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(A).getBytes())])]),C])},o.generateKey=r.pbe.generatePkcs12Key},8469:(t,e,n)=>{var r=n(716);n(4937),n(8493),n(6269),n(8865),n(3832),n(5913),n(6200),n(2038),n(5523);var i=r.asn1,s=t.exports=r.pkcs7=r.pkcs7||{};function o(t){var e={},n=[];if(!i.validate(t,s.asn1.recipientInfoValidator,e,n)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=n,o}return{version:e.version.charCodeAt(0),issuer:r.pki.RDNAttributesAsArray(e.issuer),serialNumber:r.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:i.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function a(t){for(var e,n=[],s=0;s<t.length;++s)n.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer((e=t[s]).version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,r.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.encryptedContent.content)]));return n}function u(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,r.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var n=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]),s=0;s<t.unauthenticatedAttributes.length;++s)n.values.push(c(t.unauthenticatedAttributes[s]));e.value.push(n)}return e}function c(t){var e;if(t.type===r.pki.oids.contentType)e=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.value).getBytes());else if(t.type===r.pki.oids.messageDigest)e=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===r.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),o=t.value;if("string"==typeof o){var a=Date.parse(o);o=isNaN(a)?13===o.length?i.utcTimeToDate(o):i.generalizedTimeToDate(o):new Date(a)}e=o>=n&&o<s?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(o)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(o))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[e])])}function l(t,e,n){var s={};if(!i.validate(e,n,s,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(i.derToOid(s.contentType)!==r.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(s.encryptedContent){var a="";if(r.util.isArray(s.encryptedContent))for(var u=0;u<s.encryptedContent.length;++u){if(s.encryptedContent[u].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=s.encryptedContent[u].value}else a=s.encryptedContent;t.encryptedContent={algorithm:i.derToOid(s.encAlgorithm),parameter:r.util.createBuffer(s.encParameter.value),content:r.util.createBuffer(a)}}if(s.content){if(a="",r.util.isArray(s.content))for(u=0;u<s.content.length;++u){if(s.content[u].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=s.content[u].value}else a=s.content;t.content=r.util.createBuffer(a)}return t.version=s.version.charCodeAt(0),t.rawCapture=s,s}function h(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case r.pki.oids["aes128-CBC"]:case r.pki.oids["aes192-CBC"]:case r.pki.oids["aes256-CBC"]:e=r.aes.createDecryptionCipher(t.encryptedContent.key);break;case r.pki.oids.desCBC:case r.pki.oids["des-EDE3-CBC"]:e=r.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s.messageFromPem=function(t){var e=r.pem.decode(t)[0];if("PKCS7"!==e.type){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=e.type,n}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=i.fromDer(e.body);return s.messageFromAsn1(o)},s.messageToPem=function(t,e){var n={type:"PKCS7",body:i.toDer(t.toAsn1()).getBytes()};return r.pem.encode(n,{maxline:e})},s.messageFromAsn1=function(t){var e={},n=[];if(!i.validate(t,s.asn1.contentInfoValidator,e,n)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=n,o}var a,u=i.derToOid(e.contentType);switch(u){case r.pki.oids.envelopedData:a=s.createEnvelopedData();break;case r.pki.oids.encryptedData:a=s.createEncryptedData();break;case r.pki.oids.signedData:a=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a},s.createSignedData=function(){var t=null;return t={type:r.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(l(t,e,s.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var n=t.rawCapture.certificates.value,i=0;i<n.length;++i)t.certificates.push(r.pki.certificateFromAsn1(n[i]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],n=0;n<t.certificates.length;++n)e.push(r.pki.certificateToAsn1(t.certificates[n]));var s=[],o=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,e)),s.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),o])},addSigner:function(e){var n=e.issuer,i=e.serialNumber;if(e.certificate){var s=e.certificate;"string"==typeof s&&(s=r.pki.certificateFromPem(s)),n=s.issuer.attributes,i=s.serialNumber}var o=e.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof o&&(o=r.pki.privateKeyFromPem(o));var a=e.digestAlgorithm||r.pki.oids.sha1;switch(a){case r.pki.oids.sha1:case r.pki.oids.sha256:case r.pki.oids.sha384:case r.pki.oids.sha512:case r.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var u=e.authenticatedAttributes||[];if(u.length>0){for(var c=!1,l=!1,h=0;h<u.length;++h){var p=u[h];if(c||p.type!==r.pki.oids.contentType){if(l||p.type!==r.pki.oids.messageDigest);else if(l=!0,c)break}else if(c=!0,l)break}if(!c||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:o,version:1,issuer:n,serialNumber:i,digestAlgorithm:a,signatureAlgorithm:r.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(e){var n;e=e||{},("object"!=typeof t.content||null===t.contentInfo)&&(t.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(r.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof r.util.ByteBuffer?n=t.content.bytes():"string"==typeof t.content&&(n=r.util.encodeUtf8(t.content)),e.detached?t.detachedContent=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,n):t.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,n)])))),0!==t.signers.length&&function(e){var n;if(!(n=t.detachedContent?t.detachedContent:(n=t.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=i.derToOid(t.contentInfo.value[0].value),o=i.toDer(n);for(var a in o.getByte(),i.getBerValueLength(o),o=o.getBytes(),e)e[a].start().update(o);for(var l=new Date,h=0;h<t.signers.length;++h){var p=t.signers[h];if(0===p.authenticatedAttributes.length){if(s!==r.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{p.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]),d=0;d<p.authenticatedAttributes.length;++d){var m=p.authenticatedAttributes[d];m.type===r.pki.oids.messageDigest?m.value=e[p.digestAlgorithm].digest():m.type===r.pki.oids.signingTime&&(m.value||(m.value=l)),f.value.push(c(m)),p.authenticatedAttributesAsn1.value.push(c(m))}o=i.toDer(f).getBytes(),p.md.start().update(o)}p.signature=p.key.sign(p.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=function(t){for(var e=[],n=0;n<t.length;++n)e.push(u(t[n]));return e}(t.signers)}(function(){for(var e={},n=0;n<t.signers.length;++n){var s=t.signers[n];(o=s.digestAlgorithm)in e||(e[o]=r.md[r.pki.oids[o]].create()),s.md=0===s.authenticatedAttributes.length?e[o]:r.md[r.pki.oids[o]].create()}for(var o in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return e}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"==typeof e&&(e=r.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}}},s.createEncryptedData=function(){var t=null;return t={type:r.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(e){l(t,e,s.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),h(t)}}},s.createEnvelopedData=function(){var t=null;return t={type:r.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(e){var n=l(t,e,s.asn1.envelopedDataValidator);t.recipients=function(t){for(var e=[],n=0;n<t.length;++n)e.push(o(t[n]));return e}(n.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,a(t.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,(e=t.encryptedContent,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(r.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.algorithm).getBytes()),e.parameter?i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.content.getBytes())])]))])])]);var e},findRecipient:function(e){for(var n=e.issuer.attributes,r=0;r<t.recipients.length;++r){var i=t.recipients[r],s=i.issuer;if(i.serialNumber===e.serialNumber&&s.length===n.length){for(var o=!0,a=0;a<n.length;++a)if(s[a].type!==n[a].type||s[a].value!==n[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(e,n){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==n)switch(e.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:case r.pki.oids.desCBC:var i=n.decrypt(e.encryptedContent.content);t.encryptedContent.key=r.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}h(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:r.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,n){if(void 0===t.encryptedContent.content){var i,s,o;switch(e=e||t.encryptedContent.key,n=n||t.encryptedContent.algorithm){case r.pki.oids["aes128-CBC"]:i=16,s=16,o=r.aes.createEncryptionCipher;break;case r.pki.oids["aes192-CBC"]:i=24,s=16,o=r.aes.createEncryptionCipher;break;case r.pki.oids["aes256-CBC"]:i=32,s=16,o=r.aes.createEncryptionCipher;break;case r.pki.oids["des-EDE3-CBC"]:i=24,s=8,o=r.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(void 0===e)e=r.util.createBuffer(r.random.getBytes(i));else if(e.length()!=i)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=n,t.encryptedContent.key=e,t.encryptedContent.parameter=r.util.createBuffer(r.random.getBytes(s));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var u=0;u<t.recipients.length;++u){var c=t.recipients[u];if(void 0===c.encryptedContent.content)switch(c.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}}}},5913:(t,e,n)=>{var r=n(716);n(8493),n(2038);var i=r.asn1,s=t.exports=r.pkcs7asn1=r.pkcs7asn1||{};r.pkcs7=r.pkcs7||{},r.pkcs7.asn1=s;var o={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=o;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},s.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)},s.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[{name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]}]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},983:(t,e,n)=>{var r=n(716);n(8493),n(8865),n(2124),n(3832),n(5369),n(2174),n(7830),n(140),n(2038),n(5523);var i=r.asn1,s=t.exports=r.pki=r.pki||{};s.pemToDer=function(t){var e=r.pem.decode(t)[0];if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return r.util.createBuffer(e.body)},s.privateKeyFromPem=function(t){var e=r.pem.decode(t)[0];if("PRIVATE KEY"!==e.type&&"RSA PRIVATE KEY"!==e.type){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var o=i.fromDer(e.body);return s.privateKeyFromAsn1(o)},s.privateKeyToPem=function(t,e){var n={type:"RSA PRIVATE KEY",body:i.toDer(s.privateKeyToAsn1(t)).getBytes()};return r.pem.encode(n,{maxline:e})},s.privateKeyInfoToPem=function(t,e){var n={type:"PRIVATE KEY",body:i.toDer(t).getBytes()};return r.pem.encode(n,{maxline:e})}},1745:(t,e,n)=>{var r=n(716);n(2038),n(9708),n(6200),function(){if(r.prime)t.exports=r.prime;else{var e=t.exports=r.prime=r.prime||{},n=r.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],s=new n(null);s.fromInt(30);var o=function(t,e){return t|e};e.generateProbablePrime=function(t,e,i){"function"==typeof e&&(i=e,e={});var s=(e=e||{}).algorithm||"PRIMEINC";"string"==typeof s&&(s={name:s}),s.options=s.options||{};var o=e.prng||r.random;if("PRIMEINC"===s.name)return function(t,e,i,s){return"workers"in i?function(t,e,i,s){if("undefined"==typeof Worker)return a(t,e,i,s);var o=c(t,e),u=i.workers,l=i.workLoad||100,h=30*l/8,p=i.workerScript||"forge/prime.worker.js";if(-1===u)return r.util.estimateCores(function(t,e){t&&(e=2),u=e-1,f()});function f(){u=Math.max(1,u);for(var r=[],i=0;i<u;++i)r[i]=new Worker(p);for(i=0;i<u;++i)r[i].addEventListener("message",f);var a=!1;function f(i){if(!a){var u=i.data;if(u.found){for(var p=0;p<r.length;++p)r[p].terminate();return a=!0,s(null,new n(u.prime,16))}o.bitLength()>t&&(o=c(t,e));var f=o.toString(16);i.target.postMessage({hex:f,workLoad:l}),o.dAddOffset(h,0)}}}f()}(t,e,i,s):a(t,e,i,s)}(t,{nextBytes:function(t){for(var e=o.getBytesSync(t.length),n=0;n<t.length;++n)t[n]=e.charCodeAt(n)}},s.options,i);throw new Error("Invalid prime generation algorithm: "+s.name)}}function a(t,e,n,r){var i=c(t,e),s=function(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}(i.bitLength());"millerRabinTests"in n&&(s=n.millerRabinTests);var o=10;"maxBlockTime"in n&&(o=n.maxBlockTime),u(i,t,e,0,s,o,r)}function u(t,e,n,s,o,a,l){var h=+new Date;do{if(t.bitLength()>e&&(t=c(e,n)),t.isProbablePrime(o))return l(null,t);t.dAddOffset(i[s++%8],0)}while(a<0||+new Date-h<a);r.util.setImmediate(function(){u(t,e,n,s,o,a,l)})}function c(t,e){var r=new n(t,e),i=t-1;return r.testBit(i)||r.bitwiseTo(n.ONE.shiftLeft(i),o,r),r.dAddOffset(31-r.mod(s).byteValue(),0),r}}()},6907:(t,e,n)=>{var r=n(716);n(2038);var i=null;!r.util.isNodejs||r.options.usePureJavaScript||process.versions["node-webkit"]||(i=n(5559)),(t.exports=r.prng=r.prng||{}).create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=t.md,s=new Array(32),o=0;o<32;++o)s[o]=n.create();function a(){if(e.pools[0].messageLength>=32)return u();e.collect(e.seedFileSync(32-e.pools[0].messageLength<<5)),u()}function u(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var n=1,r=0;r<32;++r)e.reseeds%n==0&&(t.update(e.pools[r].digest().getBytes()),e.pools[r].start()),n<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var i=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(i),e.generated=0}function c(t){var e=null,n=r.util.globalScope,i=n.crypto||n.msCrypto;i&&i.getRandomValues&&(e=function(t){return i.getRandomValues(t)});var s=r.util.createBuffer();if(e)for(;s.length()<t;){var o=Math.max(1,Math.min(t-s.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{e(a);for(var u=0;u<a.length;++u)s.putInt32(a[u])}catch(f){if(!("undefined"!=typeof QuotaExceededError&&f instanceof QuotaExceededError))throw f}}if(s.length()<t)for(var c,l,h,p=Math.floor(65536*Math.random());s.length()<t;)for(l=16807*(65535&p),l+=(32767&(c=16807*(p>>16)))<<16,p=4294967295&(l=(2147483647&(l+=c>>15))+(l>>31)),u=0;u<3;++u)h=p>>>(u<<3),h^=Math.floor(256*Math.random()),s.putByte(255&h);return s.getBytes(t)}return e.pools=s,e.pool=0,e.generate=function(t,n){if(!n)return e.generateSync(t);var i=e.plugin.cipher,s=e.plugin.increment,o=e.plugin.formatKey,a=e.plugin.formatSeed,c=r.util.createBuffer();e.key=null,function l(h){if(h)return n(h);if(c.length()>=t)return n(null,c.getBytes(t));if(e.generated>1048575&&(e.key=null),null===e.key)return r.util.nextTick(function(){!function(t){if(e.pools[0].messageLength>=32)return u(),t();e.seedFile(32-e.pools[0].messageLength<<5,function(n,r){if(n)return t(n);e.collect(r),u(),t()})}(l)});var p=i(e.key,e.seed);e.generated+=p.length,c.putBytes(p),e.key=o(i(e.key,s(e.seed))),e.seed=a(i(e.key,e.seed)),r.util.setImmediate(l)}()},e.generateSync=function(t){var n=e.plugin.cipher,i=e.plugin.increment,s=e.plugin.formatKey,o=e.plugin.formatSeed;e.key=null;for(var u=r.util.createBuffer();u.length()<t;){e.generated>1048575&&(e.key=null),null===e.key&&a();var c=n(e.key,e.seed);e.generated+=c.length,u.putBytes(c),e.key=s(n(e.key,i(e.seed))),e.seed=o(n(e.key,e.seed))}return u.getBytes(t)},i?(e.seedFile=function(t,e){i.randomBytes(t,function(t,n){if(t)return e(t);e(null,n.toString())})},e.seedFileSync=function(t){return i.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,c(t))}catch(n){e(n)}},e.seedFileSync=c),e.collect=function(t){for(var n=t.length,r=0;r<n;++r)e.pools[e.pool].update(t.substr(r,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,n){for(var r="",i=0;i<n;i+=8)r+=String.fromCharCode(t>>i&255);e.collect(r)},e.registerWorker=function(t){t===self?e.seedFile=function(t,e){self.addEventListener("message",function t(n){var r=n.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",t),e(r.forge.prng.err,r.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:t}}})}:t.addEventListener("message",function(n){var r=n.data;r.forge&&r.forge.prng&&e.seedFile(r.forge.prng.needed,function(e,n){t.postMessage({forge:{prng:{err:e,bytes:n}}})})})},e}},7830:(t,e,n)=>{var r=n(716);n(6200),n(2038),(t.exports=r.pss=r.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,n=t.md,i=t.mgf,s=n.digestLength,o=t.salt||null;if("string"==typeof o&&(o=r.util.createBuffer(o)),"saltLength"in t)e=t.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");e=o.length()}if(null!==o&&o.length()!==e)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||r.random,u={encode:function(t,u){var c,l,h=u-1,p=Math.ceil(h/8),f=t.digest().getBytes();if(p<s+e+2)throw new Error("Message is too long to encrypt.");l=null===o?a.getBytesSync(e):o.bytes();var d=new r.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(f),d.putBytes(l),n.start(),n.update(d.getBytes());var m=n.digest().getBytes(),g=new r.util.ByteBuffer;g.fillWithByte(0,p-e-s-2),g.putByte(1),g.putBytes(l);var v=g.getBytes(),y=p-s-1,b=i.generate(m,y),w="";for(c=0;c<y;c++)w+=String.fromCharCode(v.charCodeAt(c)^b.charCodeAt(c));var x=65280>>8*p-h&255;return(w=String.fromCharCode(w.charCodeAt(0)&~x)+w.substr(1))+m+String.fromCharCode(188)},verify:function(t,o,a){var u,c=a-1,l=Math.ceil(c/8);if(o=o.substr(-l),l<s+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var h=l-s-1,p=o.substr(0,h),f=o.substr(h,s),d=65280>>8*l-c&255;if(0!=(p.charCodeAt(0)&d))throw new Error("Bits beyond keysize not zero as expected.");var m=i.generate(f,h),g="";for(u=0;u<h;u++)g+=String.fromCharCode(p.charCodeAt(u)^m.charCodeAt(u));g=String.fromCharCode(g.charCodeAt(0)&~d)+g.substr(1);var v=l-s-e-2;for(u=0;u<v;u++)if(0!==g.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(v))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var y=g.substr(-e),b=new r.util.ByteBuffer;return b.fillWithByte(0,8),b.putBytes(t),b.putBytes(y),n.start(),n.update(b.getBytes()),f===n.digest().getBytes()}};return u}},6200:(t,e,n)=>{var r=n(716);n(4937),n(2507),n(6907),n(2038),r.random&&r.random.getBytes?t.exports=r.random:function(e){var n={},i=new Array(4),s=r.util.createBuffer();function o(){var t=r.prng.create(n);return t.getBytes=function(e,n){return t.generate(e,n)},t.getBytesSync=function(e){return t.generate(e)},t}n.formatKey=function(t){var e=r.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),r.aes._expandKey(t,!1)},n.formatSeed=function(t){var e=r.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},n.cipher=function(t,e){return r.aes._updateBlock(t,e,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},n.increment=function(t){return++t[3],t},n.md=r.md.sha256;var a=o(),u=null,c=r.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(u=function(t){return l.getRandomValues(t)}),r.options.usePureJavaScript||!r.util.isNodejs&&!u){if("undefined"==typeof window||window,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var h="";for(var p in navigator)try{"string"==typeof navigator[p]&&(h+=navigator[p])}catch(f){}a.collect(h),h=null}e&&(e().mousemove(function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)}),e().keypress(function(t){a.collectInt(t.charCode,8)}))}if(r.random)for(var p in a)r.random[p]=a[p];else r.random=a;r.random.createInstance=o,t.exports=r.random}("undefined"!=typeof jQuery?jQuery:null)},433:(t,e,n)=>{var r=n(716);n(2038);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],o=function(t,e){return t<<e&65535|(65535&t)>>16-e},a=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=r.rc2=r.rc2||{},r.rc2.expandKey=function(t,e){"string"==typeof t&&(t=r.util.createBuffer(t)),e=e||128;var n,s=t,o=t.length(),a=e,u=Math.ceil(a/8),c=255>>(7&a);for(n=o;n<128;n++)s.putByte(i[s.at(n-1)+s.at(n-o)&255]);for(s.setAt(128-u,i[s.at(128-u)&c]),n=127-u;n>=0;n--)s.setAt(n,i[s.at(n+1)^s.at(n+u)]);return s};var u=function(t,e,n){var i,u,c,l,h=!1,p=null,f=null,d=null,m=[];for(t=r.rc2.expandKey(t,e),c=0;c<64;c++)m.push(t.getInt16Le());n?(i=function(t){for(c=0;c<4;c++)t[c]+=m[l]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),t[c]=o(t[c],s[c]),l++},u=function(t){for(c=0;c<4;c++)t[c]+=m[63&t[(c+3)%4]]}):(i=function(t){for(c=3;c>=0;c--)t[c]=a(t[c],s[c]),t[c]-=m[l]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),l--},u=function(t){for(c=3;c>=0;c--)t[c]-=m[63&t[(c+3)%4]]});var g=function(t){var e=[];for(c=0;c<4;c++){var r=p.getInt16Le();null!==d&&(n?r^=d.getInt16Le():d.putInt16Le(r)),e.push(65535&r)}l=n?0:63;for(var i=0;i<t.length;i++)for(var s=0;s<t[i][0];s++)t[i][1](e);for(c=0;c<4;c++)null!==d&&(n?d.putInt16Le(e[c]):e[c]^=d.getInt16Le()),f.putInt16Le(e[c])},v=null;return v={start:function(t,e){t&&"string"==typeof t&&(t=r.util.createBuffer(t)),h=!1,p=r.util.createBuffer(),f=e||new r.util.createBuffer,d=t,v.output=f},update:function(t){for(h||p.putBuffer(t);p.length()>=8;)g([[5,i],[1,u],[6,i],[1,u],[5,i]])},finish:function(t){var e=!0;if(n)if(t)e=t(8,p,!n);else{var r=8===p.length()?8:8-p.length();p.fillWithByte(r,r)}if(e&&(h=!0,v.update()),!n&&(e=0===p.length()))if(t)e=t(8,f,!n);else{var i=f.length(),s=f.at(i-1);s>i?e=!1:f.truncate(s)}return e}}};r.rc2.startEncrypting=function(t,e,n){var i=r.rc2.createEncryptionCipher(t,128);return i.start(e,n),i},r.rc2.createEncryptionCipher=function(t,e){return u(t,e,!0)},r.rc2.startDecrypting=function(t,e,n){var i=r.rc2.createDecryptionCipher(t,128);return i.start(e,n),i},r.rc2.createDecryptionCipher=function(t,e){return u(t,e,!1)}},140:(t,e,n)=>{var r=n(716);if(n(8493),n(9708),n(8865),n(2280),n(1745),n(6200),n(2038),void 0===i)var i=r.jsbn.BigInteger;var s=r.util.isNodejs?n(5559):null,o=r.asn1,a=r.util;r.pki=r.pki||{},t.exports=r.pki.rsa=r.rsa=r.rsa||{};var u=r.pki,c=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},h={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},p={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f=r.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d={name:"DigestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},m=function(t){if(!(t.algorithm in u.oids)){var e=new Error("Unknown message digest algorithm.");throw e.algorithm=t.algorithm,e}var n=o.oidToDer(u.oids[t.algorithm]).getBytes(),r=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);i.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,n)),i.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var s=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.digest().getBytes());return r.value.push(i),r.value.push(s),o.toDer(r).getBytes()},g=function(t,e,n){if(n)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var s;e.dP||(e.dP=e.d.mod(e.p.subtract(i.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(i.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{s=new i(r.util.bytesToHex(r.random.getBytes(e.n.bitLength()/8)),16)}while(s.compareTo(e.n)>=0||!s.gcd(e.n).equals(i.ONE));for(var o=(t=t.multiply(s.modPow(e.e,e.n)).mod(e.n)).mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);o.compareTo(a)<0;)o=o.add(e.p);return o.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a).multiply(s.modInverse(e.n)).mod(e.n)};function v(t,e,n){var i=r.util.createBuffer(),s=Math.ceil(e.n.bitLength()/8);if(t.length>s-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=s-11,o}i.putByte(0),i.putByte(n);var a,u=s-3-t.length;if(0===n||1===n){a=0===n?0:255;for(var c=0;c<u;++c)i.putByte(a)}else for(;u>0;){var l=0,h=r.random.getBytes(u);for(c=0;c<u;++c)0===(a=h.charCodeAt(c))?++l:i.putByte(a);u=l}return i.putByte(0),i.putBytes(t),i}function y(t,e,n,i){var s=Math.ceil(e.n.bitLength()/8),o=r.util.createBuffer(t),a=o.getByte(),u=o.getByte();if(0!==a||n&&0!==u&&1!==u||!n&&2!=u||n&&0===u&&void 0===i)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=s-3-i;for(var l=0;l<c;++l)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(c=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++c}else if(2===u)for(c=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++c}if(0!==o.getByte()||c!==s-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function b(t,e,n){"function"==typeof e&&(n=e,e={});var s={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function o(){a(t.pBits,function(e,r){return e?n(e):(t.p=r,null!==t.q?c(e,t.q):void a(t.qBits,c))})}function a(t,e){r.prime.generateProbablePrime(t,s,e)}function c(e,r){if(e)return n(e);if(t.q=r,t.p.compareTo(t.q)<0){var s=t.p;t.p=t.q,t.q=s}if(0!==t.p.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.p=null,void o();if(0!==t.q.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.q=null,void a(t.qBits,c);if(t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(i.ONE))return t.p=t.q=null,void o();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void a(t.qBits,c);var l=t.e.modInverse(t.phi);t.keys={privateKey:u.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:u.rsa.setPublicKey(t.n,t.e)},n(null,t.keys)}"prng"in e&&(s.prng=e.prng),o()}function w(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var n=r.util.hexToBytes(e);return n.length>1&&(0===n.charCodeAt(0)&&0==(128&n.charCodeAt(1))||255===n.charCodeAt(0)&&128==(128&n.charCodeAt(1)))?n.substr(1):n}function x(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function E(t){return r.util.isNodejs&&"function"==typeof s[t]}function _(t){return void 0!==a.globalScope&&"object"==typeof a.globalScope.crypto&&"object"==typeof a.globalScope.crypto.subtle&&"function"==typeof a.globalScope.crypto.subtle[t]}function S(t){return void 0!==a.globalScope&&"object"==typeof a.globalScope.msCrypto&&"object"==typeof a.globalScope.msCrypto.subtle&&"function"==typeof a.globalScope.msCrypto.subtle[t]}function C(t){for(var e=r.util.hexToBytes(t.toString(16)),n=new Uint8Array(e.length),i=0;i<e.length;++i)n[i]=e.charCodeAt(i);return n}u.rsa.encrypt=function(t,e,n){var s,o=n,a=Math.ceil(e.n.bitLength()/8);!1!==n&&!0!==n?(o=2===n,s=v(t,e,n)):(s=r.util.createBuffer()).putBytes(t);for(var u=new i(s.toHex(),16),c=g(u,e,o).toString(16),l=r.util.createBuffer(),h=a-Math.ceil(c.length/2);h>0;)l.putByte(0),--h;return l.putBytes(r.util.hexToBytes(c)),l.getBytes()},u.rsa.decrypt=function(t,e,n,s){var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=o,a}var u=new i(r.util.createBuffer(t).toHex(),16);if(u.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=g(u,e,n).toString(16),l=r.util.createBuffer(),h=o-Math.ceil(c.length/2);h>0;)l.putByte(0),--h;return l.putBytes(r.util.hexToBytes(c)),!1!==s?y(l.getBytes(),e,n):l.getBytes()},u.rsa.createKeyPairGenerationState=function(t,e,n){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048;var s,o=(n=n||{}).prng||r.random,a={nextBytes:function(t){for(var e=o.getBytesSync(t.length),n=0;n<t.length;++n)t[n]=e.charCodeAt(n)}},u=n.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(s={algorithm:u,state:0,bits:t,rng:a,eInt:e||65537,e:new i(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(s.eInt),s},u.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var n=new i(null);n.fromInt(30);for(var r,s=0,o=function(t,e){return t|e},a=+new Date,l=0;null===t.keys&&(e<=0||l<e);){if(0===t.state){var h=null===t.p?t.pBits:t.qBits,p=h-1;0===t.pqState?(t.num=new i(h,t.rng),t.num.testBit(p)||t.num.bitwiseTo(i.ONE.shiftLeft(p),o,t.num),t.num.dAddOffset(31-t.num.mod(n).byteValue(),0),s=0,++t.pqState):1===t.pqState?t.num.bitLength()>h?t.pqState=0:t.num.isProbablePrime(x(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(c[s++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(i.ONE).gcd(t.e).compareTo(i.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(i.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var f=t.e.modInverse(t.phi);t.keys={privateKey:u.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:u.rsa.setPublicKey(t.n,t.e)}}l+=(r=+new Date)-a,a=r}return null!==t.keys},u.rsa.generateKeyPair=function(t,e,n,i){if(1===arguments.length?"object"==typeof t?(n=t,t=void 0):"function"==typeof t&&(i=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(i=e,e=void 0):"number"!=typeof e&&(n=e,e=void 0):(n=t,i=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof n&&(i=n,n=void 0):(i=n,n=e,e=void 0)),n=n||{},void 0===t&&(t=n.bits||2048),void 0===e&&(e=n.e||65537),!r.options.usePureJavaScript&&!n.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(i){if(E("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(t,e,n){if(t)return i(t);i(null,{privateKey:u.privateKeyFromPem(n),publicKey:u.publicKeyFromPem(e)})});if(_("generateKey")&&_("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:C(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(t){return a.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)}).then(void 0,function(t){i(t)}).then(function(t){if(t){var e=u.privateKeyFromAsn1(o.fromDer(r.util.createBuffer(t)));i(null,{privateKey:e,publicKey:u.setRsaPublicKey(e.n,e.e)})}});if(S("generateKey")&&S("exportKey")){var c=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:C(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(t){var e=a.globalScope.msCrypto.subtle.exportKey("pkcs8",t.target.result.privateKey);e.oncomplete=function(t){var e=u.privateKeyFromAsn1(o.fromDer(r.util.createBuffer(t.target.result)));i(null,{privateKey:e,publicKey:u.setRsaPublicKey(e.n,e.e)})},e.onerror=function(t){i(t)}},void(c.onerror=function(t){i(t)})}}else if(E("generateKeyPairSync")){var l=s.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:u.privateKeyFromPem(l.privateKey),publicKey:u.publicKeyFromPem(l.publicKey)}}var h=u.rsa.createKeyPairGenerationState(t,e,n);if(!i)return u.rsa.stepKeyPairGenerationState(h,0),h.keys;b(h,n,i)},u.setRsaPublicKey=u.rsa.setPublicKey=function(t,e){var n={n:t,e:e,encrypt:function(t,e,i){if("string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,n){return v(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return r.pkcs1.encode_rsa_oaep(e,t,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"==typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var s=e.encode(t,n,!0);return u.rsa.encrypt(s,n,!0)},verify:function(t,e,i,s){"string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===s&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(t,e){e=y(e,n,!0);var i=o.fromDer(e,{parseAllBytes:s._parseAllDigestBytes}),a={},u=[];if(!o.validate(i,d,a,u))throw(c=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=u,c;var c,l=o.derToOid(a.algorithmIdentifier);if(l!==r.oids.md2&&l!==r.oids.md5&&l!==r.oids.sha1&&l!==r.oids.sha224&&l!==r.oids.sha256&&l!==r.oids.sha384&&l!==r.oids.sha512&&l!==r.oids["sha512-224"]&&l!==r.oids["sha512-256"])throw(c=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=l,c;if((l===r.oids.md2||l===r.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===a.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(t,e){return t===y(e,n,!0)}});var a=u.rsa.decrypt(e,n,!0,!1);return i.verify(t,a,n.n.bitLength())}};return n},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(t,e,n,i,s,o,a,c){var l={n:t,e:e,d:n,p:i,q:s,dP:o,dQ:a,qInv:c,decrypt:function(t,e,n){"string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var i=u.rsa.decrypt(t,l,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:y};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return r.pkcs1.decode_rsa_oaep(e,t,n)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(i,l,!1)},sign:function(t,e){var n=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:m},n=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},n=1);var r=e.encode(t,l.n.bitLength());return u.rsa.encrypt(r,l,n)}};return l},u.wrapRsaPrivateKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(t).getBytes())])},u.privateKeyFromAsn1=function(t){var e,n,s,a,c,p,f,d,m={},g=[];if(o.validate(t,l,m,g)&&(t=o.fromDer(r.util.createBuffer(m.privateKey))),!o.validate(t,h,m={},g=[])){var v=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw v.errors=g,v}return e=r.util.createBuffer(m.privateKeyModulus).toHex(),n=r.util.createBuffer(m.privateKeyPublicExponent).toHex(),s=r.util.createBuffer(m.privateKeyPrivateExponent).toHex(),a=r.util.createBuffer(m.privateKeyPrime1).toHex(),c=r.util.createBuffer(m.privateKeyPrime2).toHex(),p=r.util.createBuffer(m.privateKeyExponent1).toHex(),f=r.util.createBuffer(m.privateKeyExponent2).toHex(),d=r.util.createBuffer(m.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new i(e,16),new i(n,16),new i(s,16),new i(a,16),new i(c,16),new i(p,16),new i(f,16),new i(d,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.qInv))])},u.publicKeyFromAsn1=function(t){var e={},n=[];if(o.validate(t,f,e,n)){var s,a=o.derToOid(e.publicKeyOid);if(a!==u.oids.rsaEncryption)throw(s=new Error("Cannot read public key. Unknown OID.")).oid=a,s;t=e.rsaPublicKey}if(!o.validate(t,p,e,n=[]))throw(s=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=n,s;var c=r.util.createBuffer(e.publicKeyModulus).toHex(),l=r.util.createBuffer(e.publicKeyExponent).toHex();return u.setRsaPublicKey(new i(c,16),new i(l,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(t)])])},u.publicKeyToRSAPublicKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.e))])}},736:(t,e,n)=>{var r=n(716);n(2108),n(2038);var i=t.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=i,i.create=function(){o||(s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),o=!0);var t=null,e=r.util.createBuffer(),n=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=r.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=r.util.encodeUtf8(s));var u=s.length;i.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=i.fullMessageLength.length-1;c>=0;--c)i.fullMessageLength[c]+=u[1],u[1]=u[0]+(i.fullMessageLength[c]/4294967296>>>0),i.fullMessageLength[c]=i.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(s),a(t,n,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var o,u=r.util.createBuffer();u.putBytes(e.bytes()),u.putBytes(s.substr(0,i.blockLength-(i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1)));for(var c=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)u.putInt32((c+=(o=8*i.fullMessageLength[l+1])/4294967296>>>0)>>>0),c=o>>>0;u.putInt32(c);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};a(h,n,u);var p=r.util.createBuffer();return p.putInt32(h.h0),p.putInt32(h.h1),p.putInt32(h.h2),p.putInt32(h.h3),p.putInt32(h.h4),p},i};var s=null,o=!1;function a(t,e,n){for(var r,i,s,o,a,u,c,l=n.length();l>=64;){for(i=t.h0,s=t.h1,o=t.h2,a=t.h3,u=t.h4,c=0;c<16;++c)r=n.getInt32(),e[c]=r,r=(i<<5|i>>>27)+(a^s&(o^a))+u+1518500249+r,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;for(;c<20;++c)e[c]=r=(r=e[c-3]^e[c-8]^e[c-14]^e[c-16])<<1|r>>>31,r=(i<<5|i>>>27)+(a^s&(o^a))+u+1518500249+r,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;for(;c<32;++c)e[c]=r=(r=e[c-3]^e[c-8]^e[c-14]^e[c-16])<<1|r>>>31,r=(i<<5|i>>>27)+(s^o^a)+u+1859775393+r,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;for(;c<40;++c)e[c]=r=(r=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|r>>>30,r=(i<<5|i>>>27)+(s^o^a)+u+1859775393+r,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;for(;c<60;++c)e[c]=r=(r=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|r>>>30,r=(i<<5|i>>>27)+(s&o|a&(s^o))+u+2400959708+r,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;for(;c<80;++c)e[c]=r=(r=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|r>>>30,r=(i<<5|i>>>27)+(s^o^a)+u+3395469782+r,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;t.h0=t.h0+i|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+u|0,l-=64}}},2507:(t,e,n)=>{var r=n(716);n(2108),n(2038);var i=t.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=i,i.create=function(){o||(s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var t=null,e=r.util.createBuffer(),n=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=r.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=r.util.encodeUtf8(s));var a=s.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=i.fullMessageLength.length-1;c>=0;--c)i.fullMessageLength[c]+=a[1],a[1]=a[0]+(i.fullMessageLength[c]/4294967296>>>0),i.fullMessageLength[c]=i.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(s),u(t,n,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var o,a=r.util.createBuffer();a.putBytes(e.bytes()),a.putBytes(s.substr(0,i.blockLength-(i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1)));for(var c=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)a.putInt32((c+=(o=8*i.fullMessageLength[l+1])/4294967296>>>0)>>>0),c=o>>>0;a.putInt32(c);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};u(h,n,a);var p=r.util.createBuffer();return p.putInt32(h.h0),p.putInt32(h.h1),p.putInt32(h.h2),p.putInt32(h.h3),p.putInt32(h.h4),p.putInt32(h.h5),p.putInt32(h.h6),p.putInt32(h.h7),p},i};var s=null,o=!1,a=null;function u(t,e,n){for(var r,i,s,o,u,c,l,h,p,f,d,m,g=n.length();g>=64;){for(o=0;o<16;++o)e[o]=n.getInt32();for(;o<64;++o)e[o]=(r=((r=e[o-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)+e[o-7]+(i=((i=e[o-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)+e[o-16]|0;for(u=t.h0,c=t.h1,l=t.h2,h=t.h3,p=t.h4,f=t.h5,d=t.h6,m=t.h7,o=0;o<64;++o)s=u&c|l&(u^c),r=m+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(d^p&(f^d))+a[o]+e[o],m=d,d=f,f=p,p=h+r>>>0,h=l,l=c,c=u,u=r+(i=((u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10))+s)>>>0;t.h0=t.h0+u|0,t.h1=t.h1+c|0,t.h2=t.h2+l|0,t.h3=t.h3+h|0,t.h4=t.h4+p|0,t.h5=t.h5+f|0,t.h6=t.h6+d|0,t.h7=t.h7+m|0,g-=64}}},9458:(t,e,n)=>{var r=n(716);n(2108),n(2038);var i=t.exports=r.sha512=r.sha512||{};r.md.sha512=r.md.algorithms.sha512=i;var s=r.sha384=r.sha512.sha384=r.sha512.sha384||{};s.create=function(){return i.create("SHA-384")},r.md.sha384=r.md.algorithms.sha384=s,r.sha512.sha256=r.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},r.md["sha512/256"]=r.md.algorithms["sha512/256"]=r.sha512.sha256,r.sha512.sha224=r.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},r.md["sha512/224"]=r.md.algorithms["sha512/224"]=r.sha512.sha224,i.create=function(t){if(a||(o=String.fromCharCode(128),o+=r.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(c={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),void 0===t&&(t="SHA-512"),!(t in c))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=c[t],n=null,i=r.util.createBuffer(),s=new Array(80),h=0;h<80;++h)s[h]=new Array(2);var p=64;switch(t){case"SHA-384":p=48;break;case"SHA-512/256":p=32;break;case"SHA-512/224":p=28}var f={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:p,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var t=f.messageLengthSize/4,s=0;s<t;++s)f.fullMessageLength.push(0);for(i=r.util.createBuffer(),n=new Array(e.length),s=0;s<e.length;++s)n[s]=e[s].slice(0);return f}};return f.start(),f.update=function(t,e){"utf8"===e&&(t=r.util.encodeUtf8(t));var o=t.length;f.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=f.fullMessageLength.length-1;a>=0;--a)f.fullMessageLength[a]+=o[1],o[1]=o[0]+(f.fullMessageLength[a]/4294967296>>>0),f.fullMessageLength[a]=f.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return i.putBytes(t),l(n,s,i),(i.read>2048||0===i.length())&&i.compact(),f},f.digest=function(){var e,a=r.util.createBuffer();a.putBytes(i.bytes()),a.putBytes(o.substr(0,f.blockLength-(f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize&f.blockLength-1)));for(var u=8*f.fullMessageLength[0],c=0;c<f.fullMessageLength.length-1;++c)a.putInt32((u+=(e=8*f.fullMessageLength[c+1])/4294967296>>>0)>>>0),u=e>>>0;a.putInt32(u);var h=new Array(n.length);for(c=0;c<n.length;++c)h[c]=n[c].slice(0);l(h,s,a);var p,d=r.util.createBuffer();for(p="SHA-512"===t?h.length:"SHA-384"===t?h.length-2:h.length-4,c=0;c<p;++c)d.putInt32(h[c][0]),c===p-1&&"SHA-512/224"===t||d.putInt32(h[c][1]);return d},f};var o=null,a=!1,u=null,c=null;function l(t,e,n){for(var r,i,s,o,a,c,l,h,p,f,d,m,g,v,y,b,w,x,E,_,S,C,A,I,T,k,P,R=n.length();R>=128;){for(S=0;S<16;++S)e[S][0]=n.getInt32()>>>0,e[S][1]=n.getInt32()>>>0;for(;S<80;++S)i=(((C=(I=e[S-2])[0])<<13|(A=I[1])>>>19)^(A<<3|C>>>29)^(C<<26|A>>>6))>>>0,e[S][0]=(r=((C>>>19|A<<13)^(A>>>29|C<<3)^C>>>6)>>>0)+(T=e[S-7])[0]+(s=(((C=(k=e[S-15])[0])>>>1|(A=k[1])<<31)^(C>>>8|A<<24)^C>>>7)>>>0)+(P=e[S-16])[0]+((A=i+T[1]+(o=((C<<31|A>>>1)^(C<<24|A>>>8)^(C<<25|A>>>7))>>>0)+P[1])/4294967296>>>0)>>>0,e[S][1]=A>>>0;for(a=t[0][0],c=t[0][1],l=t[1][0],h=t[1][1],p=t[2][0],f=t[2][1],d=t[3][0],m=t[3][1],g=t[4][0],v=t[4][1],y=t[5][0],b=t[5][1],w=t[6][0],x=t[6][1],E=t[7][0],_=t[7][1],S=0;S<80;++S)r=E+(((g>>>14|v<<18)^(g>>>18|v<<14)^(v>>>9|g<<23))>>>0)+((w^g&(y^w))>>>0)+u[S][0]+e[S][0]+((A=_+(((g<<18|v>>>14)^(g<<14|v>>>18)^(v<<23|g>>>9))>>>0)+((x^v&(b^x))>>>0)+u[S][1]+e[S][1])/4294967296>>>0)>>>0,i=A>>>0,s=(((a>>>28|c<<4)^(c>>>2|a<<30)^(c>>>7|a<<25))>>>0)+((a&l|p&(a^l))>>>0)+((A=(((a<<4|c>>>28)^(c<<30|a>>>2)^(c<<25|a>>>7))>>>0)+((c&h|f&(c^h))>>>0))/4294967296>>>0)>>>0,o=A>>>0,E=w,_=x,w=y,x=b,y=g,b=v,g=d+r+((A=m+i)/4294967296>>>0)>>>0,v=A>>>0,d=p,m=f,p=l,f=h,l=a,h=c,a=r+s+((A=i+o)/4294967296>>>0)>>>0,c=A>>>0;t[0][0]=t[0][0]+a+((A=t[0][1]+c)/4294967296>>>0)>>>0,t[0][1]=A>>>0,t[1][0]=t[1][0]+l+((A=t[1][1]+h)/4294967296>>>0)>>>0,t[1][1]=A>>>0,t[2][0]=t[2][0]+p+((A=t[2][1]+f)/4294967296>>>0)>>>0,t[2][1]=A>>>0,t[3][0]=t[3][0]+d+((A=t[3][1]+m)/4294967296>>>0)>>>0,t[3][1]=A>>>0,t[4][0]=t[4][0]+g+((A=t[4][1]+v)/4294967296>>>0)>>>0,t[4][1]=A>>>0,t[5][0]=t[5][0]+y+((A=t[5][1]+b)/4294967296>>>0)>>>0,t[5][1]=A>>>0,t[6][0]=t[6][0]+w+((A=t[6][1]+x)/4294967296>>>0)>>>0,t[6][1]=A>>>0,t[7][0]=t[7][0]+E+((A=t[7][1]+_)/4294967296>>>0)>>>0,t[7][1]=A>>>0,R-=128}}},2038:(t,e,n)=>{var r=n(716),i=n(2285),s=t.exports=r.util=r.util||{};function o(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function a(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(s.isArrayBuffer(t)||s.isArrayBufferView(t))if("undefined"!=typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(r){for(var n=0;n<e.length;++n)this.putByte(e[n])}}else(t instanceof a||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return s.nextTick=process.nextTick,void(s.setImmediate="function"==typeof setImmediate?setImmediate:s.nextTick);if("function"==typeof setImmediate)return s.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(s.nextTick=function(t){return setImmediate(t)});if(s.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];s.setImmediate=function(n){e.push(n),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",function(n){if(n.source===window&&n.data===t){n.stopPropagation();var r=e.slice();e.length=0,r.forEach(function(t){t()})}},!0)}if("undefined"!=typeof MutationObserver){var n=Date.now(),r=!0,i=document.createElement("div");e=[],new MutationObserver(function(){var t=e.slice();e.length=0,t.forEach(function(t){t()})}).observe(i,{attributes:!0});var o=s.setImmediate;s.setImmediate=function(t){Date.now()-n>15?(n=Date.now(),o(t)):(e.push(t),1===e.length&&i.setAttribute("a",r=!r))}}s.nextTick=s.setImmediate}(),s.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,s.globalScope=s.isNodejs?global:"undefined"==typeof self?window:self,s.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},s.isArrayBufferView=function(t){return t&&s.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},s.ByteBuffer=a,s.ByteStringBuffer=a,s.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},s.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},s.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},s.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},s.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var n=this.data;e>0;)1&e&&(n+=t),(e>>>=1)>0&&(t+=t);return this.data=n,this._optimizeConstructedString(e),this},s.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},s.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(s.encodeUtf8(t))},s.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},s.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},s.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},s.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},s.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},s.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},s.ByteStringBuffer.prototype.putInt=function(t,e){o(e);var n="";do{e-=8,n+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(n)},s.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},s.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},s.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},s.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},s.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},s.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},s.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},s.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},s.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},s.ByteStringBuffer.prototype.getInt=function(t){o(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},s.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e},s.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},s.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},s.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},s.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},s.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},s.ByteStringBuffer.prototype.copy=function(){var t=s.createBuffer(this.data);return t.read=this.read,t},s.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},s.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},s.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},s.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t},s.ByteStringBuffer.prototype.toString=function(){return s.decodeUtf8(this.bytes())},s.DataBuffer=function(t,e){this.read=(e=e||{}).readOffset||0,this.growSize=e.growSize||1024;var n=s.isArrayBuffer(t),r=s.isArrayBufferView(t);if(n||r)return this.data=n?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},s.DataBuffer.prototype.length=function(){return this.write-this.read},s.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},s.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+e);return r.set(n),this.data=new DataView(r.buffer),this},s.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},s.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var n=0;n<e;++n)this.data.setUint8(t);return this},s.DataBuffer.prototype.putBytes=function(t,e){if(s.isArrayBufferView(t)){var n=(r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-r.byteOffset;return this.accommodate(n),new Uint8Array(this.data.buffer,this.write).set(r),this.write+=n,this}if(s.isArrayBuffer(t)){var r=new Uint8Array(t);return this.accommodate(r.byteLength),new Uint8Array(this.data.buffer).set(r,this.write),this.write+=r.byteLength,this}if(t instanceof s.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&s.isArrayBufferView(t.data))return r=new Uint8Array(t.data.byteLength,t.read,t.length()),this.accommodate(r.byteLength),new Uint8Array(t.data.byteLength,this.write).set(r),this.write+=r.byteLength,this;if(t instanceof s.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var i;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.hex.decode(t,i,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.base64.decode(t,i,this.write),this;if("utf8"===e&&(t=s.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.raw.decode(i),this;if("utf16"===e)return this.accommodate(2*t.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=s.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},s.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},s.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},s.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},s.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},s.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},s.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},s.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},s.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},s.DataBuffer.prototype.putInt=function(t,e){o(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},s.DataBuffer.prototype.putSignedInt=function(t,e){return o(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},s.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},s.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},s.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},s.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},s.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},s.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},s.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},s.DataBuffer.prototype.getInt=function(t){o(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},s.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e},s.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},s.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},s.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},s.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},s.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},s.DataBuffer.prototype.copy=function(){return new s.DataBuffer(this)},s.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},s.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},s.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},s.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var n=this.data.getUint8(e);n<16&&(t+="0"),t+=n.toString(16)}return t},s.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return s.binary.raw.encode(e);if("hex"===t)return s.binary.hex.encode(e);if("base64"===t)return s.binary.base64.encode(e);if("utf8"===t)return s.text.utf8.decode(e);if("utf16"===t)return s.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},s.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=s.encodeUtf8(t)),new s.ByteBuffer(t)},s.fillString=function(t,e){for(var n="";e>0;)1&e&&(n+=t),(e>>>=1)>0&&(t+=t);return n},s.xorBytes=function(t,e,n){for(var r="",i="",s="",o=0,a=0;n>0;--n,++o)i=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(r+=s,s="",a=0),s+=String.fromCharCode(i),++a;return r+s},s.hexToBytes=function(t){var e="",n=0;for(!0&t.length&&(n=1,e+=String.fromCharCode(parseInt(t[0],16)));n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e},s.bytesToHex=function(t){return s.createBuffer(t).toHex()},s.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],l="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";s.encode64=function(t,e){for(var n,r,i,s="",o="",a=0;a<t.length;)n=t.charCodeAt(a++),r=t.charCodeAt(a++),i=t.charCodeAt(a++),s+=u.charAt(n>>2),s+=u.charAt((3&n)<<4|r>>4),isNaN(r)?s+="==":(s+=u.charAt((15&r)<<2|i>>6),s+=isNaN(i)?"=":u.charAt(63&i)),e&&s.length>e&&(o+=s.substr(0,e)+"\r\n",s=s.substr(e));return o+s},s.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,n,r,i,s="",o=0;o<t.length;)e=c[t.charCodeAt(o++)-43],n=c[t.charCodeAt(o++)-43],r=c[t.charCodeAt(o++)-43],i=c[t.charCodeAt(o++)-43],s+=String.fromCharCode(e<<2|n>>4),64!==r&&(s+=String.fromCharCode((15&n)<<4|r>>2),64!==i&&(s+=String.fromCharCode((3&r)<<6|i)));return s},s.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},s.decodeUtf8=function(t){return decodeURIComponent(escape(t))},s.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:i.encode,decode:i.decode}},s.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},s.binary.raw.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length));for(var i=n=n||0,s=0;s<t.length;++s)r[i++]=t.charCodeAt(s);return e?i-n:r},s.binary.hex.encode=s.bytesToHex,s.binary.hex.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/2)));var i=0,s=n=n||0;for(1&t.length&&(i=1,r[s++]=parseInt(t[0],16));i<t.length;i+=2)r[s++]=parseInt(t.substr(i,2),16);return e?s-n:r},s.binary.base64.encode=function(t,e){for(var n,r,i,s="",o="",a=0;a<t.byteLength;)n=t[a++],r=t[a++],i=t[a++],s+=u.charAt(n>>2),s+=u.charAt((3&n)<<4|r>>4),isNaN(r)?s+="==":(s+=u.charAt((15&r)<<2|i>>6),s+=isNaN(i)?"=":u.charAt(63&i)),e&&s.length>e&&(o+=s.substr(0,e)+"\r\n",s=s.substr(e));return o+s},s.binary.base64.decode=function(t,e,n){var r,i,s,o,a=e;a||(a=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=n=n||0;u<t.length;)r=c[t.charCodeAt(u++)-43],i=c[t.charCodeAt(u++)-43],s=c[t.charCodeAt(u++)-43],o=c[t.charCodeAt(u++)-43],a[l++]=r<<2|i>>4,64!==s&&(a[l++]=(15&i)<<4|s>>2,64!==o&&(a[l++]=(3&s)<<6|o));return e?l-n:a.subarray(0,l)},s.binary.base58.encode=function(t,e){return s.binary.baseN.encode(t,l,e)},s.binary.base58.decode=function(t,e){return s.binary.baseN.decode(t,l,e)},s.text={utf8:{},utf16:{}},s.text.utf8.encode=function(t,e,n){t=s.encodeUtf8(t);var r=e;r||(r=new Uint8Array(t.length));for(var i=n=n||0,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r},s.text.utf8.decode=function(t){return s.decodeUtf8(String.fromCharCode.apply(null,t))},s.text.utf16.encode=function(t,e,n){var r=e;r||(r=new Uint8Array(2*t.length));for(var i=new Uint16Array(r.buffer),s=n=n||0,o=n,a=0;a<t.length;++a)i[o++]=t.charCodeAt(a),s+=2;return e?s-n:r},s.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},s.deflate=function(t,e,n){if(e=s.decode64(t.deflate(s.encode64(e)).rval),n){var r=2;32&e.charCodeAt(1)&&(r=6),e=e.substring(r,e.length-4)}return e},s.inflate=function(t,e,n){var r=t.inflate(s.encode64(e)).rval;return null===r?null:s.decode64(r)};var h=function(t,e,n){if(!t)throw new Error("WebStorage not available.");var r;if(null===n?r=t.removeItem(e):(n=s.encode64(JSON.stringify(n)),r=t.setItem(e,n)),void 0!==r&&!0!==r.rval){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},p=function(t,e){if(!t)throw new Error("WebStorage not available.");var n=t.getItem(e);if(t.init)if(null===n.rval){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(s.decode64(n))),n},f=function(t,e,n,r){var i=p(t,e);null===i&&(i={}),i[n]=r,h(t,e,i)},d=function(t,e,n){var r=p(t,e);return null!==r&&(r=n in r?r[n]:null),r},m=function(t,e,n){var r=p(t,e);if(null!==r&&n in r){delete r[n];var i=!0;for(var s in r){i=!1;break}i&&(r=null),h(t,e,r)}},g=function(t,e){h(t,e,null)},v=function(t,e,n){var r,i=null;void 0===n&&(n=["web","flash"]);var s=!1,o=null;for(var a in n){r=n[a];try{if("flash"===r||"both"===r){if(null===e[0])throw new Error("Flash local storage not available.");i=t.apply(this,e),s="flash"===r}"web"!==r&&"both"!==r||(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(u){o=u}if(s)break}if(!s)throw o;return i};s.setItem=function(t,e,n,r,i){v(f,arguments,i)},s.getItem=function(t,e,n,r){return v(d,arguments,r)},s.removeItem=function(t,e,n,r){v(m,arguments,r)},s.clearItems=function(t,e,n){v(g,arguments,n)},s.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},s.format=function(t){for(var e,n,r=/%./g,i=0,s=[],o=0;e=r.exec(t);){(n=t.substring(o,r.lastIndex-2)).length>0&&s.push(n),o=r.lastIndex;var a=e[0][1];switch(a){case"s":case"o":s.push(i<arguments.length?arguments[1+i++]:"<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")},s.formatNumber=function(t,e,n,r){var i=t,s=isNaN(e=Math.abs(e))?2:e,o=void 0===n?",":n,a=void 0===r?".":r,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+a:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-c).toFixed(s).slice(2):"")},s.formatSize=function(t){return t>=1073741824?s.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?s.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?s.formatNumber(t/1024,0)+" KiB":s.formatNumber(t,0)+" bytes"},s.bytesFromIP=function(t){return-1!==t.indexOf(".")?s.bytesFromIPv4(t):-1!==t.indexOf(":")?s.bytesFromIPv6(t):null},s.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=s.createBuffer(),n=0;n<t.length;++n){var r=parseInt(t[n],10);if(isNaN(r))return null;e.putByte(r)}return e.getBytes()},s.bytesFromIPv6=function(t){for(var e=0,n=2*(8-(t=t.split(":").filter(function(t){return 0===t.length&&++e,!0})).length+e),r=s.createBuffer(),i=0;i<8;++i)if(t[i]&&0!==t[i].length){var o=s.hexToBytes(t[i]);o.length<2&&r.putByte(0),r.putBytes(o)}else r.fillWithByte(0,n),n=0;return r.getBytes()},s.bytesToIP=function(t){return 4===t.length?s.bytesToIPv4(t):16===t.length?s.bytesToIPv6(t):null},s.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e.join(".")},s.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],n=[],r=0,i=0;i<t.length;i+=2){for(var o=s.bytesToHex(t[i]+t[i+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var a=n[n.length-1],u=e.length;a&&u===a.end+1?(a.end=u,a.end-a.start>n[r].end-n[r].start&&(r=n.length-1)):n.push({start:u,end:u})}e.push(o)}if(n.length>0){var c=n[r];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),0===c.start&&e.unshift(""),7===c.end&&e.push(""))}return e.join(":")},s.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in s&&!t.update)return e(null,s.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return s.cores=navigator.hardwareConcurrency,e(null,s.cores);if("undefined"==typeof Worker)return s.cores=1,e(null,s.cores);if("undefined"==typeof Blob)return s.cores=2,e(null,s.cores);var n=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(t){for(var e=Date.now(),n=e+4;Date.now()<n;);self.postMessage({st:e,et:n})})}).toString(),")()"],{type:"application/javascript"}));!function t(r,i,o){if(0===i){var a=Math.floor(r.reduce(function(t,e){return t+e},0)/r.length);return s.cores=Math.max(1,a),URL.revokeObjectURL(n),e(null,s.cores)}!function(t,e){for(var r=[],i=[],s=0;s<t;++s){var o=new Worker(n);o.addEventListener("message",function(n){if(i.push(n.data),i.length===t){for(var s=0;s<t;++s)r[s].terminate();e(0,i)}}),r.push(o)}for(s=0;s<t;++s)r[s].postMessage(s)}(o,function(e,n){r.push(function(t,e){for(var n=[],r=0;r<t;++r)for(var i=e[r],s=n[r]=[],o=0;o<t;++o)if(r!==o){var a=e[o];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&s.push(o)}return n.reduce(function(t,e){return Math.max(t,e.length)},0)}(o,n)),t(r,i-1,o)})}([],5,16)}},5523:(t,e,n)=>{var r=n(716);n(4937),n(8493),n(6269),n(2108),n(3744),n(8865),n(3832),n(7830),n(140),n(2038);var i=r.asn1,s=t.exports=r.pki=r.pki||{},o=s.oids,a={};a.CN=o.commonName,a.commonName="CN",a.C=o.countryName,a.countryName="C",a.L=o.localityName,a.localityName="L",a.ST=o.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=o.organizationName,a.organizationName="O",a.OU=o.organizationalUnitName,a.organizationalUnitName="OU",a.E=o.emailAddress,a.emailAddress="E";var u=r.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},u,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[{name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},u,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function p(t,e){"string"==typeof e&&(e={shortName:e});for(var n,r=null,i=0;null===r&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s.RDNAttributesAsArray=function(t,e){for(var n,r,s,u=[],c=0;c<t.value.length;++c){n=t.value[c];for(var l=0;l<n.value.length;++l)(s={}).type=i.derToOid((r=n.value[l]).value[0].value),s.value=r.value[1].value,s.valueTagClass=r.value[1].type,s.type in o&&(s.name=o[s.type],s.name in a&&(s.shortName=a[s.name])),e&&(e.update(s.type),e.update(s.value)),u.push(s)}return u},s.CRIAttributesAsArray=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=t[n],u=i.derToOid(r.value[0].value),c=r.value[1].value,l=0;l<c.length;++l){var h={};if(h.type=u,h.value=c[l].value,h.valueTagClass=c[l].type,h.type in o&&(h.name=o[h.type],h.name in a&&(h.shortName=a[h.name])),h.type===o.extensionRequest){h.extensions=[];for(var p=0;p<h.value.length;++p)h.extensions.push(s.certificateExtensionFromAsn1(h.value[p]))}e.push(h)}return e};var f=function(t,e,n){var r={};if(t!==o["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var s={},a=[];if(!i.validate(e,l,s,a)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=a,u}return void 0!==s.hashOid&&(r.hash=r.hash||{},r.hash.algorithmOid=i.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=i.derToOid(s.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=i.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(r.saltLength=s.saltLength.charCodeAt(0)),r},d=function(t){switch(o[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return r.md.sha1.create();case"md5WithRSAEncryption":return r.md.md5.create();case"sha256WithRSAEncryption":return r.md.sha256.create();case"sha384WithRSAEncryption":return r.md.sha384.create();case"sha512WithRSAEncryption":return r.md.sha512.create();case"RSASSA-PSS":return r.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},m=function(t){var e,n=t.certificate;switch(n.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var i,s,a;if(void 0===(i=o[n.signatureParameters.mgf.hash.algorithmOid])||void 0===r.md[i])throw(a=new Error("Unsupported MGF hash function.")).oid=n.signatureParameters.mgf.hash.algorithmOid,a.name=i,a;if(void 0===(s=o[n.signatureParameters.mgf.algorithmOid])||void 0===r.mgf[s])throw(a=new Error("Unsupported MGF function.")).oid=n.signatureParameters.mgf.algorithmOid,a.name=s,a;if(s=r.mgf[s].create(r.md[i].create()),void 0===(i=o[n.signatureParameters.hash.algorithmOid])||void 0===r.md[i])throw(a=new Error("Unsupported RSASSA-PSS hash function.")).oid=n.signatureParameters.hash.algorithmOid,a.name=i,a;e=r.pss.create(r.md[i].create(),s,n.signatureParameters.saltLength)}return n.publicKey.verify(t.md.digest().getBytes(),t.signature,e)};function g(t){for(var e,n,s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),o=t.attributes,a=0;a<o.length;++a){var u=(e=o[a]).value,c=i.Type.PRINTABLESTRING;"valueTagClass"in e&&(c=e.valueTagClass)===i.Type.UTF8&&(u=r.util.encodeUtf8(u)),n=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,c,!1,u)])]),s.value.push(n)}return s}function v(t){for(var e,n=0;n<t.length;++n){if(void 0===(e=t[n]).name&&(e.type&&e.type in s.oids?e.name=s.oids[e.type]:e.shortName&&e.shortName in a&&(e.name=s.oids[a[e.shortName]])),void 0===e.type){if(!e.name||!(e.name in s.oids))throw(u=new Error("Attribute type not specified.")).attribute=e,u;e.type=s.oids[e.name]}if(void 0===e.shortName&&e.name&&e.name in a&&(e.shortName=a[e.name]),e.type===o.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=i.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var r=0;r<e.extensions.length;++r)e.value.push(s.certificateExtensionToAsn1(y(e.extensions[r])))}var u;if(void 0===e.value)throw(u=new Error("Attribute value not specified.")).attribute=e,u}}function y(t,e){if(e=e||{},void 0===t.name&&t.id&&t.id in s.oids&&(t.name=s.oids[t.id]),void 0===t.id){if(!t.name||!(t.name in s.oids))throw(x=new Error("Extension ID not specified.")).extension=t,x;t.id=s.oids[t.name]}if(void 0!==t.value)return t;if("keyUsage"===t.name){var n=0,a=0,u=0;t.digitalSignature&&(a|=128,n=7),t.nonRepudiation&&(a|=64,n=6),t.keyEncipherment&&(a|=32,n=5),t.dataEncipherment&&(a|=16,n=4),t.keyAgreement&&(a|=8,n=3),t.keyCertSign&&(a|=4,n=2),t.cRLSign&&(a|=2,n=1),t.encipherOnly&&(a|=1,n=0),t.decipherOnly&&(u|=128,n=7);var c=String.fromCharCode(n);0!==u?c+=String.fromCharCode(a)+String.fromCharCode(u):0!==a&&(c+=String.fromCharCode(a)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,c)}else if("basicConstraints"===t.name)t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var h in t)!0===t[h]&&(h in o?l.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o[h]).getBytes())):-1!==h.indexOf(".")&&l.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(h).getBytes())))}else if("nsCertType"===t.name)n=0,a=0,t.client&&(a|=128,n=7),t.server&&(a|=64,n=6),t.email&&(a|=32,n=5),t.objsign&&(a|=16,n=4),t.reserved&&(a|=8,n=3),t.sslCA&&(a|=4,n=2),t.emailCA&&(a|=2,n=1),t.objCA&&(a|=1,n=0),c=String.fromCharCode(n),0!==a&&(c+=String.fromCharCode(a)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,c);else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var p=0;p<t.altNames.length;++p){if(c=(y=t.altNames[p]).value,7===y.type&&y.ip){if(null===(c=r.util.bytesFromIP(y.ip)))throw(x=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,x}else 8===y.type&&(c=i.oidToDer(y.oid?i.oidToDer(y.oid):c));t.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,y.type,!1,c))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var f=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=f.toHex(),t.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,f.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){if(t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),l=t.value.value,t.keyIdentifier){var d=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,d))}if(t.authorityCertIssuer){var m=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[g(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];l.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,m))}if(t.serialNumber){var v=r.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);l.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,v))}}else if("cRLDistributionPoints"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),l=t.value.value;var y,b=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),w=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(p=0;p<t.altNames.length;++p){if(c=(y=t.altNames[p]).value,7===y.type&&y.ip){if(null===(c=r.util.bytesFromIP(y.ip)))throw(x=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,x}else 8===y.type&&(c=i.oidToDer(y.oid?i.oidToDer(y.oid):c));w.value.push(i.create(i.Class.CONTEXT_SPECIFIC,y.type,!1,c))}b.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[w])),l.push(b)}var x;if(void 0===t.value)throw(x=new Error("Extension value not specified.")).extension=t,x;return t}function b(t,e){switch(t){case o["RSASSA-PSS"]:var n=[];return void 0!==e.hash.algorithmOid&&n.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&n.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&n.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,n);default:return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}}function w(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var n=t.attributes,s=0;s<n.length;++s){var o=n[s],a=o.value,u=i.Type.UTF8;"valueTagClass"in o&&(u=o.valueTagClass),u===i.Type.UTF8&&(a=r.util.encodeUtf8(a));var c=!1;"valueConstructed"in o&&(c=o.valueConstructed);var l=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,u,c,a)])]);e.value.push(l)}return e}s.certificateFromPem=function(t,e,n){var o=r.pem.decode(t)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=i.fromDer(o.body,n);return s.certificateFromAsn1(u,e)},s.certificateToPem=function(t,e){var n={type:"CERTIFICATE",body:i.toDer(s.certificateToAsn1(t)).getBytes()};return r.pem.encode(n,{maxline:e})},s.publicKeyFromPem=function(t){var e=r.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=e.type,n}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=i.fromDer(e.body);return s.publicKeyFromAsn1(o)},s.publicKeyToPem=function(t,e){var n={type:"PUBLIC KEY",body:i.toDer(s.publicKeyToAsn1(t)).getBytes()};return r.pem.encode(n,{maxline:e})},s.publicKeyToRSAPublicKeyPem=function(t,e){var n={type:"RSA PUBLIC KEY",body:i.toDer(s.publicKeyToRSAPublicKey(t)).getBytes()};return r.pem.encode(n,{maxline:e})},s.getPublicKeyFingerprint=function(t,e){var n,o=(e=e||{}).md||r.md.sha1.create();switch(e.type||"RSAPublicKey"){case"RSAPublicKey":n=i.toDer(s.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":n=i.toDer(s.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}o.start(),o.update(n);var a=o.digest();if("hex"===e.encoding){var u=a.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}if("binary"===e.encoding)return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return a},s.certificationRequestFromPem=function(t,e,n){var o=r.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==o.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=i.fromDer(o.body,n);return s.certificationRequestFromAsn1(u,e)},s.certificationRequestToPem=function(t,e){var n={type:"CERTIFICATE REQUEST",body:i.toDer(s.certificationRequestToAsn1(t)).getBytes()};return r.pem.encode(n,{maxline:e})},s.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return p(t.issuer,e)},t.issuer.addField=function(e){v([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return p(t.subject,e)},t.subject.addField=function(e){v([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,n){v(e),t.subject.attributes=e,delete t.subject.uniqueId,n&&(t.subject.uniqueId=n),t.subject.hash=null},t.setIssuer=function(e,n){v(e),t.issuer.attributes=e,delete t.issuer.uniqueId,n&&(t.issuer.uniqueId=n),t.issuer.hash=null},t.setExtensions=function(e){for(var n=0;n<e.length;++n)y(e[n],{cert:t});t.extensions=e},t.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var n,r=null,i=0;null===r&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,n){t.md=n||r.md.sha1.create();var a=o[t.md.algorithm+"WithRSAEncryption"];if(!a){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=a,t.tbsCertificate=s.getTBSCertificate(t);var c=i.toDer(t.tbsCertificate);t.md.update(c.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var n=!1;if(!t.issued(e)){var r=e.issuer,o=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=o.attributes,a.actualIssuer=r.attributes,a}var u=e.md;if(null===u){u=d({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||s.getTBSCertificate(e),l=i.toDer(c);u.update(l.getBytes())}return null!==u&&(n=m({certificate:t,md:u,signature:e.signature})),n},t.isIssuer=function(e){var n=!1,r=t.issuer,i=e.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){var s,o;n=!0;for(var a=0;n&&a<r.attributes.length;++a)(s=r.attributes[a]).type===(o=i.attributes[a]).type&&s.value===o.value||(n=!1)}return n},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=o.subjectKeyIdentifier,n=0;n<t.extensions.length;++n){var i=t.extensions[n];if(i.id===e){var s=t.generateSubjectKeyIdentifier().getBytes();return r.util.hexToBytes(i.subjectKeyIdentifier)===s}}return!1},t},s.certificateFromAsn1=function(t,e){var n={},o=[];if(!i.validate(t,c,n,o)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=o,a}if(i.derToOid(n.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=s.createCertificate();u.version=n.certVersion?n.certVersion.charCodeAt(0):0;var l=r.util.createBuffer(n.certSerialNumber);u.serialNumber=l.toHex(),u.signatureOid=r.asn1.derToOid(n.certSignatureOid),u.signatureParameters=f(u.signatureOid,n.certSignatureParams,!0),u.siginfo.algorithmOid=r.asn1.derToOid(n.certinfoSignatureOid),u.siginfo.parameters=f(u.siginfo.algorithmOid,n.certinfoSignatureParams,!1),u.signature=n.certSignature;var h=[];if(void 0!==n.certValidity1UTCTime&&h.push(i.utcTimeToDate(n.certValidity1UTCTime)),void 0!==n.certValidity2GeneralizedTime&&h.push(i.generalizedTimeToDate(n.certValidity2GeneralizedTime)),void 0!==n.certValidity3UTCTime&&h.push(i.utcTimeToDate(n.certValidity3UTCTime)),void 0!==n.certValidity4GeneralizedTime&&h.push(i.generalizedTimeToDate(n.certValidity4GeneralizedTime)),h.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(h.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=h[0],u.validity.notAfter=h[1],u.tbsCertificate=n.tbsCertificate,e){u.md=d({signatureOid:u.signatureOid,type:"certificate"});var m=i.toDer(u.tbsCertificate);u.md.update(m.getBytes())}var g=r.md.sha1.create(),y=i.toDer(n.certIssuer);g.update(y.getBytes()),u.issuer.getField=function(t){return p(u.issuer,t)},u.issuer.addField=function(t){v([t]),u.issuer.attributes.push(t)},u.issuer.attributes=s.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(u.issuer.uniqueId=n.certIssuerUniqueId),u.issuer.hash=g.digest().toHex();var b=r.md.sha1.create(),w=i.toDer(n.certSubject);return b.update(w.getBytes()),u.subject.getField=function(t){return p(u.subject,t)},u.subject.addField=function(t){v([t]),u.subject.attributes.push(t)},u.subject.attributes=s.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(u.subject.uniqueId=n.certSubjectUniqueId),u.subject.hash=b.digest().toHex(),u.extensions=n.certExtensions?s.certificateExtensionsFromAsn1(n.certExtensions):[],u.publicKey=s.publicKeyFromAsn1(n.subjectPublicKeyInfo),u},s.certificateExtensionsFromAsn1=function(t){for(var e=[],n=0;n<t.value.length;++n)for(var r=t.value[n],i=0;i<r.value.length;++i)e.push(s.certificateExtensionFromAsn1(r.value[i]));return e},s.certificateExtensionFromAsn1=function(t){var e={};if(e.id=i.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===i.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in o)if(e.name=o[e.id],"keyUsage"===e.name){var n=0,s=0;(a=i.fromDer(e.value)).value.length>1&&(n=a.value.charCodeAt(1),s=a.value.length>2?a.value.charCodeAt(2):0),e.digitalSignature=128==(128&n),e.nonRepudiation=64==(64&n),e.keyEncipherment=32==(32&n),e.dataEncipherment=16==(16&n),e.keyAgreement=8==(8&n),e.keyCertSign=4==(4&n),e.cRLSign=2==(2&n),e.encipherOnly=1==(1&n),e.decipherOnly=128==(128&s)}else if("basicConstraints"===e.name){var a=i.fromDer(e.value);e.cA=a.value.length>0&&a.value[0].type===i.Type.BOOLEAN&&0!==a.value[0].value.charCodeAt(0);var u=null;a.value.length>0&&a.value[0].type===i.Type.INTEGER?u=a.value[0].value:a.value.length>1&&(u=a.value[1].value),null!==u&&(e.pathLenConstraint=i.derToInteger(u))}else if("extKeyUsage"===e.name){a=i.fromDer(e.value);for(var c=0;c<a.value.length;++c){var l=i.derToOid(a.value[c].value);l in o?e[o[l]]=!0:e[l]=!0}}else if("nsCertType"===e.name)n=0,(a=i.fromDer(e.value)).value.length>1&&(n=a.value.charCodeAt(1)),e.client=128==(128&n),e.server=64==(64&n),e.email=32==(32&n),e.objsign=16==(16&n),e.reserved=8==(8&n),e.sslCA=4==(4&n),e.emailCA=2==(2&n),e.objCA=1==(1&n);else if("subjectAltName"===e.name||"issuerAltName"===e.name){var h;e.altNames=[],a=i.fromDer(e.value);for(var p=0;p<a.value.length;++p){var f={type:(h=a.value[p]).type,value:h.value};switch(e.altNames.push(f),h.type){case 1:case 2:case 6:break;case 7:f.ip=r.util.bytesToIP(h.value);break;case 8:f.oid=i.derToOid(h.value)}}}else"subjectKeyIdentifier"===e.name&&(a=i.fromDer(e.value),e.subjectKeyIdentifier=r.util.bytesToHex(a.value));return e},s.certificationRequestFromAsn1=function(t,e){var n={},o=[];if(!i.validate(t,h,n,o)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=o,a}if(i.derToOid(n.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=s.createCertificationRequest();if(u.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,u.signatureOid=r.asn1.derToOid(n.csrSignatureOid),u.signatureParameters=f(u.signatureOid,n.csrSignatureParams,!0),u.siginfo.algorithmOid=r.asn1.derToOid(n.csrSignatureOid),u.siginfo.parameters=f(u.siginfo.algorithmOid,n.csrSignatureParams,!1),u.signature=n.csrSignature,u.certificationRequestInfo=n.certificationRequestInfo,e){u.md=d({signatureOid:u.signatureOid,type:"certification request"});var c=i.toDer(u.certificationRequestInfo);u.md.update(c.getBytes())}var l=r.md.sha1.create();return u.subject.getField=function(t){return p(u.subject,t)},u.subject.addField=function(t){v([t]),u.subject.attributes.push(t)},u.subject.attributes=s.RDNAttributesAsArray(n.certificationRequestInfoSubject,l),u.subject.hash=l.digest().toHex(),u.publicKey=s.publicKeyFromAsn1(n.subjectPublicKeyInfo),u.getAttribute=function(t){return p(u,t)},u.addAttribute=function(t){v([t]),u.attributes.push(t)},u.attributes=s.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),u},s.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return p(t.subject,e)},t.subject.addField=function(e){v([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return p(t,e)},t.addAttribute=function(e){v([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){v(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){v(e),t.attributes=e},t.sign=function(e,n){t.md=n||r.md.sha1.create();var a=o[t.md.algorithm+"WithRSAEncryption"];if(!a){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=a,t.certificationRequestInfo=s.getCertificationRequestInfo(t);var c=i.toDer(t.certificationRequestInfo);t.md.update(c.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,n=t.md;if(null===n){n=d({signatureOid:t.signatureOid,type:"certification request"});var r=t.certificationRequestInfo||s.getCertificationRequestInfo(t),o=i.toDer(r);n.update(o.getBytes())}return null!==n&&(e=m({certificate:t,md:n,signature:t.signature})),e},t};var x=new Date("1950-01-01T00:00:00Z"),E=new Date("2050-01-01T00:00:00Z");function _(t){return t>=x&&t<E?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(t)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(t))}s.getTBSCertificate=function(t){var e=_(t.validity.notBefore),n=_(t.validity.notAfter),o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,r.util.hexToBytes(t.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.siginfo.algorithmOid).getBytes()),b(t.siginfo.algorithmOid,t.siginfo.parameters)]),g(t.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,n]),g(t.subject),s.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&o.value.push(s.certificateExtensionsToAsn1(t.extensions)),o},s.getCertificationRequestInfo=function(t){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),g(t.subject),s.publicKeyToAsn1(t.publicKey),w(t)])},s.distinguishedNameToAsn1=function(t){return g(t)},s.certificateToAsn1=function(t){var e=t.tbsCertificate||s.getTBSCertificate(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),b(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},s.certificateExtensionsToAsn1=function(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),n=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(n);for(var r=0;r<t.length;++r)n.value.push(s.certificateExtensionToAsn1(t[r]));return e},s.certificateExtensionToAsn1=function(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.id).getBytes())),t.critical&&e.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=t.value;return"string"!=typeof t.value&&(n=i.toDer(n).getBytes()),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,n)),e},s.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||s.getCertificationRequestInfo(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),b(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},s.createCaStore=function(t){var e={certs:{}};function n(t){return o(t),e.certs[t.hash]||null}function o(t){if(!t.hash){var e=r.md.sha1.create();t.attributes=s.RDNAttributesAsArray(g(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){return n(t.issuer)},e.addCertificate=function(t){if("string"==typeof t&&(t=r.pki.certificateFromPem(t)),o(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var n=e.certs[t.subject.hash];r.util.isArray(n)||(n=[n]),n.push(t),e.certs[t.subject.hash]=n}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"==typeof t&&(t=r.pki.certificateFromPem(t));var e=n(t.subject);if(!e)return!1;r.util.isArray(e)||(e=[e]);for(var o=i.toDer(s.certificateToAsn1(t)).getBytes(),a=0;a<e.length;++a)if(o===i.toDer(s.certificateToAsn1(e[a])).getBytes())return!0;return!1},e.listAllCertificates=function(){var t=[];for(var n in e.certs)if(e.certs.hasOwnProperty(n)){var i=e.certs[n];if(r.util.isArray(i))for(var s=0;s<i.length;++s)t.push(i[s]);else t.push(i)}return t},e.removeCertificate=function(t){var a;if("string"==typeof t&&(t=r.pki.certificateFromPem(t)),o(t.subject),!e.hasCertificate(t))return null;var u=n(t.subject);if(!r.util.isArray(u))return a=e.certs[t.subject.hash],delete e.certs[t.subject.hash],a;for(var c=i.toDer(s.certificateToAsn1(t)).getBytes(),l=0;l<u.length;++l)c===i.toDer(s.certificateToAsn1(u[l])).getBytes()&&(a=u[l],u.splice(l,1));return 0===u.length&&delete e.certs[t.subject.hash],a},t)for(var a=0;a<t.length;++a)e.addCertificate(t[a]);return e},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(t,e,n){"function"==typeof n&&(n={verify:n}),n=n||{};var i=(e=e.slice(0)).slice(0),o=n.validityCheckDate;void 0===o&&(o=new Date);var a=!0,u=null,c=0;do{var l=e.shift(),h=null,p=!1;if(o&&(o<l.validity.notBefore||o>l.validity.notAfter)&&(u={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o}),null===u){if(null===(h=e[0]||t.getIssuer(l))&&l.isIssuer(l)&&(p=!0,h=l),h){var f=h;r.util.isArray(f)||(f=[f]);for(var d=!1;!d&&f.length>0;){h=f.shift();try{d=h.verify(l)}catch(E){}}d||(u={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==u||h&&!p||t.hasCertificate(l)||(u={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===u&&h&&!l.isIssuer(h)&&(u={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===u)for(var m={keyUsage:!0,basicConstraints:!0},g=0;null===u&&g<l.extensions.length;++g){var v=l.extensions[g];v.critical&&!(v.name in m)&&(u={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===u&&(!a||0===e.length&&(!h||p))){var y=l.getExtension("basicConstraints"),b=l.getExtension("keyUsage");null!==b&&(b.keyCertSign&&null!==y||(u={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==u||null===y||y.cA||(u={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===u&&null!==b&&"pathLenConstraint"in y&&c-1>y.pathLenConstraint&&(u={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}var w=null===u||u.error,x=n.verify?n.verify(w,c,i):w;if(!0!==x)throw!0===w&&(u={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(x||0===x)&&("object"!=typeof x||r.util.isArray(x)?"string"==typeof x&&(u.error=x):(x.message&&(u.message=x.message),x.error&&(u.error=x.error))),u;u=null,a=!1,++c}while(e.length>0);return!0}},5105:(t,e,n)=>{"use strict";const{Deflate:r,deflate:i,deflateRaw:s,gzip:o}=n(2868),{Inflate:a,inflate:u,inflateRaw:c,ungzip:l}=n(6963),h=n(6582);t.exports.Deflate=r,t.exports.deflate=i,t.exports.deflateRaw=s,t.exports.gzip=o,t.exports.Inflate=a,t.exports.inflate=u,t.exports.inflateRaw=c,t.exports.ungzip=l,t.exports.constants=h},2868:(t,e,n)=>{"use strict";const r=n(1593),i=n(9510),s=n(3456),o=n(6587),a=n(9518),u=Object.prototype.toString,{Z_NO_FLUSH:c,Z_SYNC_FLUSH:l,Z_FULL_FLUSH:h,Z_FINISH:p,Z_OK:f,Z_STREAM_END:d,Z_DEFAULT_COMPRESSION:m,Z_DEFAULT_STRATEGY:g,Z_DEFLATED:v}=n(6582);function y(t){this.options=i.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==f)throw new Error(o[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=r.deflateSetDictionary(this.strm,t),n!==f)throw new Error(o[n]);this._dict_set=!0}}function b(t,e){const n=new y(e);if(n.push(t,!0),n.err)throw n.msg||o[n.err];return n.result}y.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize;let o,a;if(this.ended)return!1;for(a=e===~~e?e:!0===e?p:c,n.input="string"==typeof t?s.string2buf(t):"[object ArrayBuffer]"===u.call(t)?new Uint8Array(t):t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(a===l||a===h)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(o=r.deflate(n,a),o===d)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=r.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===f;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},y.prototype.onData=function(t){this.chunks.push(t)},y.prototype.onEnd=function(t){t===f&&(this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Deflate=y,t.exports.deflate=b,t.exports.deflateRaw=function(t,e){return(e=e||{}).raw=!0,b(t,e)},t.exports.gzip=function(t,e){return(e=e||{}).gzip=!0,b(t,e)},t.exports.constants=n(6582)},6963:(t,e,n)=>{"use strict";const r=n(8786),i=n(9510),s=n(3456),o=n(6587),a=n(9518),u=n(6909),c=Object.prototype.toString,{Z_NO_FLUSH:l,Z_FINISH:h,Z_OK:p,Z_STREAM_END:f,Z_NEED_DICT:d,Z_STREAM_ERROR:m,Z_DATA_ERROR:g,Z_MEM_ERROR:v}=n(6582);function y(t){this.options=i.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let n=r.inflateInit2(this.strm,e.windowBits);if(n!==p)throw new Error(o[n]);if(this.header=new u,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=r.inflateSetDictionary(this.strm,e.dictionary),n!==p)))throw new Error(o[n])}function b(t,e){const n=new y(e);if(n.push(t),n.err)throw n.msg||o[n.err];return n.result}y.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize,o=this.options.dictionary;let a,u,y;if(this.ended)return!1;for(u=e===~~e?e:!0===e?h:l,n.input="[object ArrayBuffer]"===c.call(t)?new Uint8Array(t):t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),a=r.inflate(n,u),a===d&&o&&(a=r.inflateSetDictionary(n,o),a===p?a=r.inflate(n,u):a===g&&(a=d));n.avail_in>0&&a===f&&n.state.wrap>0&&0!==t[n.next_in];)r.inflateReset(n),a=r.inflate(n,u);switch(a){case m:case g:case d:case v:return this.onEnd(a),this.ended=!0,!1}if(y=n.avail_out,n.next_out&&(0===n.avail_out||a===f))if("string"===this.options.to){let t=s.utf8border(n.output,n.next_out),e=n.next_out-t,r=s.buf2string(n.output,t);n.next_out=e,n.avail_out=i-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==p||0!==y){if(a===f)return a=r.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},y.prototype.onData=function(t){this.chunks.push(t)},y.prototype.onEnd=function(t){t===p&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Inflate=y,t.exports.inflate=b,t.exports.inflateRaw=function(t,e){return(e=e||{}).raw=!0,b(t,e)},t.exports.ungzip=b,t.exports.constants=n(6582)},9510:t=>{"use strict";const e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);t.exports.assign=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const r=n.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const n in r)e(r,n)&&(t[n]=r[n])}}return t},t.exports.flattenChunks=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let e=t[r];n.set(e,i),i+=e.length}return n}},3456:t=>{"use strict";let e=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){e=!1}const n=new Uint8Array(256);for(let i=0;i<256;i++)n[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;n[254]=n[254]=1,t.exports.string2buf=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},t.exports.buf2string=(t,r)=>{const i=r||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,r));let s,o;const a=new Array(2*i);for(o=0,s=0;s<i;){let e=t[s++];if(e<128){a[o++]=e;continue}let r=n[e];if(r>4)a[o++]=65533,s+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&s<i;)e=e<<6|63&t[s++],r--;r>1?a[o++]=65533:e<65536?a[o++]=e:(e-=65536,a[o++]=55296|e>>10&1023,a[o++]=56320|1023&e)}}return((t,n)=>{if(n<65534&&t.subarray&&e)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let r="";for(let e=0;e<n;e++)r+=String.fromCharCode(t[e]);return r})(a,o)},t.exports.utf8border=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+n[t[r]]>e?r:e}},8013:t=>{"use strict";t.exports=(t,e,n,r)=>{let i=65535&t|0,s=t>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+e[r++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16|0}},6582:t=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},8264:t=>{"use strict";const e=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());t.exports=(t,n,r,i)=>{const s=e,o=i+r;t^=-1;for(let e=i;e<o;e++)t=t>>>8^s[255&(t^n[e])];return-1^t}},1593:(t,e,n)=>{"use strict";const{_tr_init:r,_tr_stored_block:i,_tr_flush_block:s,_tr_tally:o,_tr_align:a}=n(9903),u=n(8013),c=n(8264),l=n(6587),{Z_NO_FLUSH:h,Z_PARTIAL_FLUSH:p,Z_FULL_FLUSH:f,Z_FINISH:d,Z_BLOCK:m,Z_OK:g,Z_STREAM_END:v,Z_STREAM_ERROR:y,Z_DATA_ERROR:b,Z_BUF_ERROR:w,Z_DEFAULT_COMPRESSION:x,Z_FILTERED:E,Z_HUFFMAN_ONLY:_,Z_RLE:S,Z_FIXED:C,Z_DEFAULT_STRATEGY:A,Z_UNKNOWN:I,Z_DEFLATED:T}=n(6582),k=258,P=262,R=42,D=113,F=666,B=(t,e)=>(t.msg=l[e],e),O=t=>2*t-(t>4?9:0),N=t=>{let e=t.length;for(;--e>=0;)t[e]=0},M=t=>{let e,n,r,i=t.w_size;e=t.hash_size,r=e;do{n=t.head[--r],t.head[r]=n>=i?n-i:0}while(--e);e=i,r=e;do{n=t.prev[--r],t.prev[r]=n>=i?n-i:0}while(--e)};let L=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const V=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},j=(t,e)=>{s(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,V(t.strm)},U=(t,e)=>{t.pending_buf[t.pending++]=e},H=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},z=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),1===t.state.wrap?t.adler=u(t.adler,e,i,n):2===t.state.wrap&&(t.adler=c(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},K=(t,e)=>{let n,r,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match;const u=t.strstart>t.w_size-P?t.strstart-(t.w_size-P):0,c=t.window,l=t.w_mask,h=t.prev,p=t.strstart+k;let f=c[s+o-1],d=c[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(n=e,c[n+o]===d&&c[n+o-1]===f&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<p);if(r=k-(p-s),s=p-k,r>o){if(t.match_start=e,o=r,r>=a)break;f=c[s+o-1],d=c[s+o]}}}while((e=h[e&l])>u&&0!=--i);return o<=t.lookahead?o:t.lookahead},q=t=>{const e=t.w_size;let n,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-P)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),M(t),r+=e),0===t.strm.avail_in)break;if(n=z(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=L(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=L(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<P&&0!==t.strm.avail_in)},W=(t,e)=>{let n,r,s,o=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,a=0,u=t.strm.avail_in;do{if(n=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s)break;if(s=t.strm.avail_out-s,r=t.strstart-t.block_start,n>r+t.strm.avail_in&&(n=r+t.strm.avail_in),n>s&&(n=s),n<o&&(0===n&&e!==d||e===h||n!==r+t.strm.avail_in))break;a=e===d&&n===r+t.strm.avail_in?1:0,i(t,0,0,a),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,V(t.strm),r&&(r>n&&(r=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,n-=r),n&&(z(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===a);return u-=t.strm.avail_in,u&&(u>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=u&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-u,t.strm.next_in),t.strstart),t.strstart+=u,t.insert+=u>t.w_size-t.insert?t.w_size-t.insert:u),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?4:e!==h&&e!==d&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(z(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,o=s>t.w_size?t.w_size:s,r=t.strstart-t.block_start,(r>=o||(r||e===d)&&e!==h&&0===t.strm.avail_in&&r<=s)&&(n=r>s?s:r,a=e===d&&0===t.strm.avail_in&&n===r?1:0,i(t,t.block_start,n,a),t.block_start+=n,V(t.strm)),a?3:1)},G=(t,e)=>{let n,r;for(;;){if(t.lookahead<P){if(q(t),t.lookahead<P&&e===h)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=L(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-P&&(t.match_length=K(t,n)),t.match_length>=3)if(r=o(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=L(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=L(t,t.ins_h,t.window[t.strstart+1]);else r=o(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(j(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===d?(j(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(j(t,!1),0===t.strm.avail_out)?1:2},$=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<P){if(q(t),t.lookahead<P&&e===h)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=L(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-P&&(t.match_length=K(t,n),t.match_length<=5&&(t.strategy===E||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=o(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=L(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(j(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=o(t,0,t.window[t.strstart-1]),r&&j(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===d?(j(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(j(t,!1),0===t.strm.avail_out)?1:2};function X(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const Q=[new X(0,0,0,0,W),new X(4,4,8,4,G),new X(4,5,16,8,G),new X(4,6,32,32,G),new X(4,4,16,16,$),new X(8,16,32,32,$),new X(8,16,128,128,$),new X(8,32,128,256,$),new X(32,128,258,1024,$),new X(32,258,258,4096,$)];function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),N(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Z=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==R&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==D&&e.status!==F?1:0},J=t=>{if(Z(t))return B(t,y);t.total_in=t.total_out=0,t.data_type=I;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?R:D,t.adler=2===e.wrap?0:1,e.last_flush=-2,r(e),g},tt=t=>{const e=J(t);var n;return e===g&&((n=t.state).window_size=2*n.w_size,N(n.head),n.max_lazy_match=Q[n.level].max_lazy,n.good_match=Q[n.level].good_length,n.nice_match=Q[n.level].nice_length,n.max_chain_length=Q[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},et=(t,e,n,r,i,s)=>{if(!t)return y;let o=1;if(e===x&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==T||r<8||r>15||e<0||e>9||s<0||s>C||8===r&&1!==o)return B(t,y);8===r&&(r=9);const a=new Y;return t.state=a,a.strm=t,a.status=R,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=e,a.strategy=s,a.method=n,tt(t)};t.exports.deflateInit=(t,e)=>et(t,e,T,15,8,A),t.exports.deflateInit2=et,t.exports.deflateReset=tt,t.exports.deflateResetKeep=J,t.exports.deflateSetHeader=(t,e)=>Z(t)||2!==t.state.wrap?y:(t.state.gzhead=e,g),t.exports.deflate=(t,e)=>{if(Z(t)||e>m||e<0)return t?B(t,y):y;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===F&&e!==d)return B(t,0===t.avail_out?w:y);const r=n.last_flush;if(n.last_flush=e,0!==n.pending){if(V(t),0===t.avail_out)return n.last_flush=-1,g}else if(0===t.avail_in&&O(e)<=O(r)&&e!==d)return B(t,w);if(n.status===F&&0!==t.avail_in)return B(t,w);if(n.status===R&&0===n.wrap&&(n.status=D),n.status===R){let e=T+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=_||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=r<<6,0!==n.strstart&&(e|=32),e+=31-e%31,H(n,e),0!==n.strstart&&(H(n,t.adler>>>16),H(n,65535&t.adler)),t.adler=1,n.status=D,V(t),0!==n.pending)return n.last_flush=-1,g}if(57===n.status)if(t.adler=0,U(n,31),U(n,139),U(n,8),n.gzhead)U(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),U(n,255&n.gzhead.time),U(n,n.gzhead.time>>8&255),U(n,n.gzhead.time>>16&255),U(n,n.gzhead.time>>24&255),U(n,9===n.level?2:n.strategy>=_||n.level<2?4:0),U(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(U(n,255&n.gzhead.extra.length),U(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=c(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(U(n,0),U(n,0),U(n,0),U(n,0),U(n,0),U(n,9===n.level?2:n.strategy>=_||n.level<2?4:0),U(n,3),n.status=D,V(t),0!==n.pending)return n.last_flush=-1,g;if(69===n.status){if(n.gzhead.extra){let e=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=c(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=i,V(t),0!==n.pending)return n.last_flush=-1,g;e=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>e&&(t.adler=c(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=c(t.adler,n.pending_buf,n.pending-r,r)),V(t),0!==n.pending)return n.last_flush=-1,g;r=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,U(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=c(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=c(t.adler,n.pending_buf,n.pending-r,r)),V(t),0!==n.pending)return n.last_flush=-1,g;r=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,U(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=c(t.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(V(t),0!==n.pending))return n.last_flush=-1,g;U(n,255&t.adler),U(n,t.adler>>8&255),t.adler=0}if(n.status=D,V(t),0!==n.pending)return n.last_flush=-1,g}if(0!==t.avail_in||0!==n.lookahead||e!==h&&n.status!==F){let r=0===n.level?W(n,e):n.strategy===_?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(q(t),0===t.lookahead)){if(e===h)return 1;break}if(t.match_length=0,n=o(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(j(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===d?(j(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(j(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===S?((t,e)=>{let n,r,i,s;const a=t.window;for(;;){if(t.lookahead<=k){if(q(t),t.lookahead<=k&&e===h)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){s=t.strstart+k;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);t.match_length=k-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=o(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(j(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===d?(j(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(j(t,!1),0===t.strm.avail_out)?1:2})(n,e):Q[n.level].func(n,e);if(3!==r&&4!==r||(n.status=F),1===r||3===r)return 0===t.avail_out&&(n.last_flush=-1),g;if(2===r&&(e===p?a(n):e!==m&&(i(n,0,0,!1),e===f&&(N(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),V(t),0===t.avail_out))return n.last_flush=-1,g}return e!==d?g:n.wrap<=0?v:(2===n.wrap?(U(n,255&t.adler),U(n,t.adler>>8&255),U(n,t.adler>>16&255),U(n,t.adler>>24&255),U(n,255&t.total_in),U(n,t.total_in>>8&255),U(n,t.total_in>>16&255),U(n,t.total_in>>24&255)):(H(n,t.adler>>>16),H(n,65535&t.adler)),V(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?g:v)},t.exports.deflateEnd=t=>{if(Z(t))return y;const e=t.state.status;return t.state=null,e===D?B(t,b):g},t.exports.deflateSetDictionary=(t,e)=>{let n=e.length;if(Z(t))return y;const r=t.state,i=r.wrap;if(2===i||1===i&&r.status!==R||r.lookahead)return y;if(1===i&&(t.adler=u(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===i&&(N(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0),e=t,n=r.w_size}const s=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,q(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=L(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,q(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=a,t.avail_in=s,r.wrap=i,g},t.exports.deflateInfo="pako deflate (from Nodeca project)"},6909:t=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},3549:t=>{"use strict";const e=16209;t.exports=function(t,n){let r,i,s,o,a,u,c,l,h,p,f,d,m,g,v,y,b,w,x,E,_,S,C,A;const I=t.state;r=t.next_in,C=t.input,i=r+(t.avail_in-5),s=t.next_out,A=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),u=I.dmax,c=I.wsize,l=I.whave,h=I.wnext,p=I.window,f=I.hold,d=I.bits,m=I.lencode,g=I.distcode,v=(1<<I.lenbits)-1,y=(1<<I.distbits)-1;t:do{d<15&&(f+=C[r++]<<d,d+=8,f+=C[r++]<<d,d+=8),b=m[f&v];e:for(;;){if(w=b>>>24,f>>>=w,d-=w,w=b>>>16&255,0===w)A[s++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(f&(1<<w)-1)];continue e}if(32&w){I.mode=16191;break t}t.msg="invalid literal/length code",I.mode=e;break t}x=65535&b,w&=15,w&&(d<w&&(f+=C[r++]<<d,d+=8),x+=f&(1<<w)-1,f>>>=w,d-=w),d<15&&(f+=C[r++]<<d,d+=8,f+=C[r++]<<d,d+=8),b=g[f&y];n:for(;;){if(w=b>>>24,f>>>=w,d-=w,w=b>>>16&255,!(16&w)){if(0==(64&w)){b=g[(65535&b)+(f&(1<<w)-1)];continue n}t.msg="invalid distance code",I.mode=e;break t}if(E=65535&b,w&=15,d<w&&(f+=C[r++]<<d,d+=8,d<w&&(f+=C[r++]<<d,d+=8)),E+=f&(1<<w)-1,E>u){t.msg="invalid distance too far back",I.mode=e;break t}if(f>>>=w,d-=w,w=s-o,E>w){if(w=E-w,w>l&&I.sane){t.msg="invalid distance too far back",I.mode=e;break t}if(_=0,S=p,0===h){if(_+=c-w,w<x){x-=w;do{A[s++]=p[_++]}while(--w);_=s-E,S=A}}else if(h<w){if(_+=c+h-w,w-=h,w<x){x-=w;do{A[s++]=p[_++]}while(--w);if(_=0,h<x){w=h,x-=w;do{A[s++]=p[_++]}while(--w);_=s-E,S=A}}}else if(_+=h-w,w<x){x-=w;do{A[s++]=p[_++]}while(--w);_=s-E,S=A}for(;x>2;)A[s++]=S[_++],A[s++]=S[_++],A[s++]=S[_++],x-=3;x&&(A[s++]=S[_++],x>1&&(A[s++]=S[_++]))}else{_=s-E;do{A[s++]=A[_++],A[s++]=A[_++],A[s++]=A[_++],x-=3}while(x>2);x&&(A[s++]=A[_++],x>1&&(A[s++]=A[_++]))}break}}break}}while(r<i&&s<a);x=d>>3,r-=x,d-=x<<3,f&=(1<<d)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=s<a?a-s+257:257-(s-a),I.hold=f,I.bits=d}},8786:(t,e,n)=>{"use strict";const r=n(8013),i=n(8264),s=n(3549),o=n(5024),{Z_FINISH:a,Z_BLOCK:u,Z_TREES:c,Z_OK:l,Z_STREAM_END:h,Z_NEED_DICT:p,Z_STREAM_ERROR:f,Z_DATA_ERROR:d,Z_MEM_ERROR:m,Z_BUF_ERROR:g,Z_DEFLATED:v}=n(6582),y=16180,b=16190,w=16191,x=16192,E=16194,_=16199,S=16200,C=16206,A=16209,I=16210,T=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function k(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const P=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<y||e.mode>16211?1:0},R=t=>{if(P(t))return f;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=y,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,l},D=t=>{if(P(t))return f;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,R(t)},F=(t,e)=>{let n;if(P(t))return f;const r=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?f:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,D(t))},B=(t,e)=>{if(!t)return f;const n=new k;t.state=n,n.strm=t,n.window=null,n.mode=y;const r=F(t,e);return r!==l&&(t.state=null),r};let O,N,M=!0;const L=t=>{if(M){O=new Int32Array(512),N=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(1,t.lens,0,288,O,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(2,t.lens,0,32,N,0,t.work,{bits:5}),M=!1}t.lencode=O,t.lenbits=9,t.distcode=N,t.distbits=5},V=(t,e,n,r)=>{let i;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};t.exports.inflateReset=D,t.exports.inflateReset2=F,t.exports.inflateResetKeep=R,t.exports.inflateInit=t=>B(t,15),t.exports.inflateInit2=B,t.exports.inflate=(t,e)=>{let n,k,R,D,F,B,O,N,M,j,U,H,z,K,q,W,G,$,X,Q,Y,Z,J=0;const tt=new Uint8Array(4);let et,nt;const rt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(P(t)||!t.output||!t.input&&0!==t.avail_in)return f;n=t.state,n.mode===w&&(n.mode=x),F=t.next_out,R=t.output,O=t.avail_out,D=t.next_in,k=t.input,B=t.avail_in,N=n.hold,M=n.bits,j=B,U=O,Z=l;t:for(;;)switch(n.mode){case y:if(0===n.wrap){n.mode=x;break}for(;M<16;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}if(2&n.wrap&&35615===N){0===n.wbits&&(n.wbits=15),n.check=0,tt[0]=255&N,tt[1]=N>>>8&255,n.check=i(n.check,tt,2,0),N=0,M=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&N)<<8)+(N>>8))%31){t.msg="incorrect header check",n.mode=A;break}if((15&N)!==v){t.msg="unknown compression method",n.mode=A;break}if(N>>>=4,M-=4,Y=8+(15&N),0===n.wbits&&(n.wbits=Y),Y>15||Y>n.wbits){t.msg="invalid window size",n.mode=A;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&N?16189:w,N=0,M=0;break;case 16181:for(;M<16;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}if(n.flags=N,(255&n.flags)!==v){t.msg="unknown compression method",n.mode=A;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=A;break}n.head&&(n.head.text=N>>8&1),512&n.flags&&4&n.wrap&&(tt[0]=255&N,tt[1]=N>>>8&255,n.check=i(n.check,tt,2,0)),N=0,M=0,n.mode=16182;case 16182:for(;M<32;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}n.head&&(n.head.time=N),512&n.flags&&4&n.wrap&&(tt[0]=255&N,tt[1]=N>>>8&255,tt[2]=N>>>16&255,tt[3]=N>>>24&255,n.check=i(n.check,tt,4,0)),N=0,M=0,n.mode=16183;case 16183:for(;M<16;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}n.head&&(n.head.xflags=255&N,n.head.os=N>>8),512&n.flags&&4&n.wrap&&(tt[0]=255&N,tt[1]=N>>>8&255,n.check=i(n.check,tt,2,0)),N=0,M=0,n.mode=16184;case 16184:if(1024&n.flags){for(;M<16;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}n.length=N,n.head&&(n.head.extra_len=N),512&n.flags&&4&n.wrap&&(tt[0]=255&N,tt[1]=N>>>8&255,n.check=i(n.check,tt,2,0)),N=0,M=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(H=n.length,H>B&&(H=B),H&&(n.head&&(Y=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(k.subarray(D,D+H),Y)),512&n.flags&&4&n.wrap&&(n.check=i(n.check,k,H,D)),B-=H,D+=H,n.length-=H),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===B)break t;H=0;do{Y=k[D+H++],n.head&&Y&&n.length<65536&&(n.head.name+=String.fromCharCode(Y))}while(Y&&H<B);if(512&n.flags&&4&n.wrap&&(n.check=i(n.check,k,H,D)),B-=H,D+=H,Y)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===B)break t;H=0;do{Y=k[D+H++],n.head&&Y&&n.length<65536&&(n.head.comment+=String.fromCharCode(Y))}while(Y&&H<B);if(512&n.flags&&4&n.wrap&&(n.check=i(n.check,k,H,D)),B-=H,D+=H,Y)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;M<16;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}if(4&n.wrap&&N!==(65535&n.check)){t.msg="header crc mismatch",n.mode=A;break}N=0,M=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=w;break;case 16189:for(;M<32;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}t.adler=n.check=T(N),N=0,M=0,n.mode=b;case b:if(0===n.havedict)return t.next_out=F,t.avail_out=O,t.next_in=D,t.avail_in=B,n.hold=N,n.bits=M,p;t.adler=n.check=1,n.mode=w;case w:if(e===u||e===c)break t;case x:if(n.last){N>>>=7&M,M-=7&M,n.mode=C;break}for(;M<3;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}switch(n.last=1&N,N>>>=1,M-=1,3&N){case 0:n.mode=16193;break;case 1:if(L(n),n.mode=_,e===c){N>>>=2,M-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=A}N>>>=2,M-=2;break;case 16193:for(N>>>=7&M,M-=7&M;M<32;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}if((65535&N)!=(N>>>16^65535)){t.msg="invalid stored block lengths",n.mode=A;break}if(n.length=65535&N,N=0,M=0,n.mode=E,e===c)break t;case E:n.mode=16195;case 16195:if(H=n.length,H){if(H>B&&(H=B),H>O&&(H=O),0===H)break t;R.set(k.subarray(D,D+H),F),B-=H,D+=H,O-=H,F+=H,n.length-=H;break}n.mode=w;break;case 16196:for(;M<14;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}if(n.nlen=257+(31&N),N>>>=5,M-=5,n.ndist=1+(31&N),N>>>=5,M-=5,n.ncode=4+(15&N),N>>>=4,M-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=A;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;M<3;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}n.lens[rt[n.have++]]=7&N,N>>>=3,M-=3}for(;n.have<19;)n.lens[rt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,et={bits:n.lenbits},Z=o(0,n.lens,0,19,n.lencode,0,n.work,et),n.lenbits=et.bits,Z){t.msg="invalid code lengths set",n.mode=A;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;J=n.lencode[N&(1<<n.lenbits)-1],q=J>>>24,W=J>>>16&255,G=65535&J,!(q<=M);){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}if(G<16)N>>>=q,M-=q,n.lens[n.have++]=G;else{if(16===G){for(nt=q+2;M<nt;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}if(N>>>=q,M-=q,0===n.have){t.msg="invalid bit length repeat",n.mode=A;break}Y=n.lens[n.have-1],H=3+(3&N),N>>>=2,M-=2}else if(17===G){for(nt=q+3;M<nt;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}N>>>=q,M-=q,Y=0,H=3+(7&N),N>>>=3,M-=3}else{for(nt=q+7;M<nt;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}N>>>=q,M-=q,Y=0,H=11+(127&N),N>>>=7,M-=7}if(n.have+H>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=A;break}for(;H--;)n.lens[n.have++]=Y}}if(n.mode===A)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=A;break}if(n.lenbits=9,et={bits:n.lenbits},Z=o(1,n.lens,0,n.nlen,n.lencode,0,n.work,et),n.lenbits=et.bits,Z){t.msg="invalid literal/lengths set",n.mode=A;break}if(n.distbits=6,n.distcode=n.distdyn,et={bits:n.distbits},Z=o(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,et),n.distbits=et.bits,Z){t.msg="invalid distances set",n.mode=A;break}if(n.mode=_,e===c)break t;case _:n.mode=S;case S:if(B>=6&&O>=258){t.next_out=F,t.avail_out=O,t.next_in=D,t.avail_in=B,n.hold=N,n.bits=M,s(t,U),F=t.next_out,R=t.output,O=t.avail_out,D=t.next_in,k=t.input,B=t.avail_in,N=n.hold,M=n.bits,n.mode===w&&(n.back=-1);break}for(n.back=0;J=n.lencode[N&(1<<n.lenbits)-1],q=J>>>24,W=J>>>16&255,G=65535&J,!(q<=M);){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}if(W&&0==(240&W)){for($=q,X=W,Q=G;J=n.lencode[Q+((N&(1<<$+X)-1)>>$)],q=J>>>24,W=J>>>16&255,G=65535&J,!($+q<=M);){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}N>>>=$,M-=$,n.back+=$}if(N>>>=q,M-=q,n.back+=q,n.length=G,0===W){n.mode=16205;break}if(32&W){n.back=-1,n.mode=w;break}if(64&W){t.msg="invalid literal/length code",n.mode=A;break}n.extra=15&W,n.mode=16201;case 16201:if(n.extra){for(nt=n.extra;M<nt;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}n.length+=N&(1<<n.extra)-1,N>>>=n.extra,M-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;J=n.distcode[N&(1<<n.distbits)-1],q=J>>>24,W=J>>>16&255,G=65535&J,!(q<=M);){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}if(0==(240&W)){for($=q,X=W,Q=G;J=n.distcode[Q+((N&(1<<$+X)-1)>>$)],q=J>>>24,W=J>>>16&255,G=65535&J,!($+q<=M);){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}N>>>=$,M-=$,n.back+=$}if(N>>>=q,M-=q,n.back+=q,64&W){t.msg="invalid distance code",n.mode=A;break}n.offset=G,n.extra=15&W,n.mode=16203;case 16203:if(n.extra){for(nt=n.extra;M<nt;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}n.offset+=N&(1<<n.extra)-1,N>>>=n.extra,M-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=A;break}n.mode=16204;case 16204:if(0===O)break t;if(H=U-O,n.offset>H){if(H=n.offset-H,H>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=A;break}H>n.wnext?(H-=n.wnext,z=n.wsize-H):z=n.wnext-H,H>n.length&&(H=n.length),K=n.window}else K=R,z=F-n.offset,H=n.length;H>O&&(H=O),O-=H,n.length-=H;do{R[F++]=K[z++]}while(--H);0===n.length&&(n.mode=S);break;case 16205:if(0===O)break t;R[F++]=n.length,O--,n.mode=S;break;case C:if(n.wrap){for(;M<32;){if(0===B)break t;B--,N|=k[D++]<<M,M+=8}if(U-=O,t.total_out+=U,n.total+=U,4&n.wrap&&U&&(t.adler=n.check=n.flags?i(n.check,R,U,F-U):r(n.check,R,U,F-U)),U=O,4&n.wrap&&(n.flags?N:T(N))!==n.check){t.msg="incorrect data check",n.mode=A;break}N=0,M=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;M<32;){if(0===B)break t;B--,N+=k[D++]<<M,M+=8}if(4&n.wrap&&N!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=A;break}N=0,M=0}n.mode=16208;case 16208:Z=h;break t;case A:Z=d;break t;case I:return m;case 16211:default:return f}return t.next_out=F,t.avail_out=O,t.next_in=D,t.avail_in=B,n.hold=N,n.bits=M,(n.wsize||U!==t.avail_out&&n.mode<A&&(n.mode<C||e!==a))&&V(t,t.output,t.next_out,U-t.avail_out)?(n.mode=I,m):(j-=t.avail_in,U-=t.avail_out,t.total_in+=j,t.total_out+=U,n.total+=U,4&n.wrap&&U&&(t.adler=n.check=n.flags?i(n.check,R,U,t.next_out-U):r(n.check,R,U,t.next_out-U)),t.data_type=n.bits+(n.last?64:0)+(n.mode===w?128:0)+(n.mode===_||n.mode===E?256:0),(0===j&&0===U||e===a)&&Z===l&&(Z=g),Z)},t.exports.inflateEnd=t=>{if(P(t))return f;let e=t.state;return e.window&&(e.window=null),t.state=null,l},t.exports.inflateGetHeader=(t,e)=>{if(P(t))return f;const n=t.state;return 0==(2&n.wrap)?f:(n.head=e,e.done=!1,l)},t.exports.inflateSetDictionary=(t,e)=>{const n=e.length;let i,s,o;return P(t)?f:(i=t.state,0!==i.wrap&&i.mode!==b?f:i.mode===b&&(s=1,s=r(s,e,n,0),s!==i.check)?d:(o=V(t,e,n,n),o?(i.mode=I,m):(i.havedict=1,l)))},t.exports.inflateInfo="pako inflate (from Nodeca project)"},5024:t=>{"use strict";const e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),r=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),i=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(t,s,o,a,u,c,l,h)=>{const p=h.bits;let f,d,m,g,v,y,b=0,w=0,x=0,E=0,_=0,S=0,C=0,A=0,I=0,T=0,k=null;const P=new Uint16Array(16),R=new Uint16Array(16);let D,F,B,O=null;for(b=0;b<=15;b++)P[b]=0;for(w=0;w<a;w++)P[s[o+w]]++;for(_=p,E=15;E>=1&&0===P[E];E--);if(_>E&&(_=E),0===E)return u[c++]=20971520,u[c++]=20971520,h.bits=1,0;for(x=1;x<E&&0===P[x];x++);for(_<x&&(_=x),A=1,b=1;b<=15;b++)if(A<<=1,A-=P[b],A<0)return-1;if(A>0&&(0===t||1!==E))return-1;for(R[1]=0,b=1;b<15;b++)R[b+1]=R[b]+P[b];for(w=0;w<a;w++)0!==s[o+w]&&(l[R[s[o+w]]++]=w);if(0===t?(k=O=l,y=20):1===t?(k=e,O=n,y=257):(k=r,O=i,y=0),T=0,w=0,b=x,v=c,S=_,C=0,m=-1,I=1<<_,g=I-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){D=b-C,l[w]+1<y?(F=0,B=l[w]):l[w]>=y?(F=O[l[w]-y],B=k[l[w]-y]):(F=96,B=0),f=1<<b-C,d=1<<S,x=d;do{d-=f,u[v+(T>>C)+d]=D<<24|F<<16|B|0}while(0!==d);for(f=1<<b-1;T&f;)f>>=1;if(0!==f?(T&=f-1,T+=f):T=0,w++,0==--P[b]){if(b===E)break;b=s[o+l[w]]}if(b>_&&(T&g)!==m){for(0===C&&(C=_),v+=x,S=b-C,A=1<<S;S+C<E&&(A-=P[S+C],!(A<=0));)S++,A<<=1;if(I+=1<<S,1===t&&I>852||2===t&&I>592)return 1;m=T&g,u[m]=_<<24|S<<16|v-c|0}}return 0!==T&&(u[v+T]=b-C<<24|64<<16|0),h.bits=_,0}},6587:t=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},9903:t=>{"use strict";function e(t){let e=t.length;for(;--e>=0;)t[e]=0}const n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),r=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),s=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);const a=new Array(60);e(a);const u=new Array(512);e(u);const c=new Array(256);e(c);const l=new Array(29);e(l);const h=new Array(30);function p(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let f,d,m;function g(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(h);const v=t=>t<256?u[t]:u[256+(t>>>7)],y=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},b=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,y(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},w=(t,e,n)=>{b(t,n[2*e],n[2*e+1])},x=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},E=(t,e,n)=>{const r=new Array(16);let i,s,o=0;for(i=1;i<=15;i++)o=o+n[i-1]<<1,r[i]=o;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=x(r[e]++,e))}},_=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},S=t=>{t.bi_valid>8?y(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},C=(t,e,n,r)=>{const i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]},A=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&C(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!C(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},I=(t,e,i)=>{let s,o,a,u,p=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+p++],s+=(255&t.pending_buf[t.sym_buf+p++])<<8,o=t.pending_buf[t.sym_buf+p++],0===s?w(t,o,e):(a=c[o],w(t,a+256+1,e),u=n[a],0!==u&&(o-=l[a],b(t,o,u)),s--,a=v(s),w(t,a,i),u=r[a],0!==u&&(s-=h[a],b(t,s,u)))}while(p<t.sym_next);w(t,256,e)},T=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,a,u,c=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):n[2*o+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=c<2?++c:0,n[2*u]=1,t.depth[u]=0,t.opt_len--,i&&(t.static_len-=r[2*u+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)A(t,n,o);u=s;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,n[2*u]=n[2*o]+n[2*a],t.depth[u]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,n[2*o+1]=n[2*a+1]=u,t.heap[1]=u++,A(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,u=e.stat_desc.max_length;let c,l,h,p,f,d,m=0;for(p=0;p<=15;p++)t.bl_count[p]=0;for(n[2*t.heap[t.heap_max]+1]=0,c=t.heap_max+1;c<573;c++)l=t.heap[c],p=n[2*n[2*l+1]+1]+1,p>u&&(p=u,m++),n[2*l+1]=p,l>r||(t.bl_count[p]++,f=0,l>=a&&(f=o[l-a]),d=n[2*l],t.opt_len+=d*(p+f),s&&(t.static_len+=d*(i[2*l+1]+f)));if(0!==m){do{for(p=u-1;0===t.bl_count[p];)p--;t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[u]--,m-=2}while(m>0);for(p=u;0!==p;p--)for(l=t.bl_count[p];0!==l;)h=t.heap[--c],h>r||(n[2*h+1]!==p&&(t.opt_len+=(p-n[2*h+1])*n[2*h],n[2*h+1]=p),l--)}})(t,e),E(n,c,t.bl_count)},k=(t,e,n)=>{let r,i,s=-1,o=e[1],a=0,u=7,c=4;for(0===o&&(u=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=e[2*(r+1)+1],++a<u&&i===o||(a<c?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))},P=(t,e,n)=>{let r,i,s=-1,o=e[1],a=0,u=7,c=4;for(0===o&&(u=138,c=3),r=0;r<=n;r++)if(i=o,o=e[2*(r+1)+1],!(++a<u&&i===o)){if(a<c)do{w(t,i,t.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(w(t,i,t.bl_tree),a--),w(t,16,t.bl_tree),b(t,a-3,2)):a<=10?(w(t,17,t.bl_tree),b(t,a-3,3)):(w(t,18,t.bl_tree),b(t,a-11,7));a=0,s=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4)}};let R=!1;const D=(t,e,n,r)=>{b(t,0+(r?1:0),3),S(t),y(t,n),y(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};t.exports._tr_init=t=>{R||((()=>{let t,e,s,g,v;const y=new Array(16);for(s=0,g=0;g<28;g++)for(l[g]=s,t=0;t<1<<n[g];t++)c[s++]=g;for(c[s-1]=g,v=0,g=0;g<16;g++)for(h[g]=v,t=0;t<1<<r[g];t++)u[v++]=g;for(v>>=7;g<30;g++)for(h[g]=v<<7,t=0;t<1<<r[g]-7;t++)u[256+v++]=g;for(e=0;e<=15;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<30;t++)a[2*t+1]=5,a[2*t]=x(t,5);f=new p(o,n,257,286,15),d=new p(a,r,0,30,15),m=new p(new Array(0),i,0,19,7)})(),R=!0),t.l_desc=new g(t.dyn_ltree,f),t.d_desc=new g(t.dyn_dtree,d),t.bl_desc=new g(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,_(t)},t.exports._tr_stored_block=D,t.exports._tr_flush_block=(t,e,n,r)=>{let i,u,c=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),T(t,t.l_desc),T(t,t.d_desc),c=(t=>{let e;for(k(t,t.dyn_ltree,t.l_desc.max_code),k(t,t.dyn_dtree,t.d_desc.max_code),T(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*s[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,u=t.static_len+3+7>>>3,u<=i&&(i=u)):i=u=n+5,n+4<=i&&-1!==e?D(t,e,n,r):4===t.strategy||u===i?(b(t,2+(r?1:0),3),I(t,o,a)):(b(t,4+(r?1:0),3),((t,e,n,r)=>{let i;for(b(t,e-257,5),b(t,n-1,5),b(t,r-4,4),i=0;i<r;i++)b(t,t.bl_tree[2*s[i]+1],3);P(t,t.dyn_ltree,e-1),P(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,c+1),I(t,t.dyn_ltree,t.dyn_dtree)),_(t),r&&S(t)},t.exports._tr_tally=(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(c[n]+256+1)]++,t.dyn_dtree[2*v(e)]++),t.sym_next===t.sym_end),t.exports._tr_align=t=>{b(t,2,3),w(t,256,o),(t=>{16===t.bi_valid?(y(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},9518:t=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},9849:t=>{var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var a,u=[],c=!1,l=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):l=-1,u.length&&p())}function p(){if(!c){var t=o(h);c=!0;for(var e=u.length;e;){for(a=u,u=[];++l<e;)a&&a[l].run();l=-1,e=u.length}a=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||c||o(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},6877:(t,e,n)=>{const r=n(436),i=n(1191),s=n(2158),o=n(173);function a(t,e,n,s,o){const a=[].slice.call(arguments,1),u=a.length,c="function"==typeof a[u-1];if(!c&&!r())throw new Error("Callback required as last argument");if(!c){if(u<1)throw new Error("Too few arguments provided");return 1===u?(n=e,e=s=void 0):2!==u||e.getContext||(s=n,n=e,e=void 0),new Promise(function(r,o){try{const o=i.create(n,s);r(t(o,e,s))}catch(a){o(a)}})}if(u<2)throw new Error("Too few arguments provided");2===u?(o=n,n=e,e=s=void 0):3===u&&(e.getContext&&void 0===o?(o=s,s=void 0):(o=s,s=n,n=e,e=void 0));try{const r=i.create(n,s);o(null,t(r,e,s))}catch(l){o(l)}}e.rT=a.bind(null,s.render),e.hz=a.bind(null,s.renderToDataURL),e.toString=a.bind(null,function(t,e,n){return o.render(t,n)})},436:t=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6448:(t,e,n)=>{const r=n(5402).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];const e=Math.floor(t/7)+2,n=r(t),i=145===n?26:2*Math.ceil((n-13)/(2*e-2)),s=[n-7];for(let r=1;r<e-1;r++)s[r]=s[r-1]-i;return s.push(6),s.reverse()},e.getPositions=function(t){const n=[],r=e.getRowColCoords(t),i=r.length;for(let e=0;e<i;e++)for(let t=0;t<i;t++)0===e&&0===t||0===e&&t===i-1||e===i-1&&0===t||n.push([r[e],r[t]]);return n}},2793:(t,e,n)=>{const r=n(3141),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(t){this.mode=r.ALPHANUMERIC,this.data=t}s.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=45*i.indexOf(this.data[e]);n+=i.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(i.indexOf(this.data[e]),6)},t.exports=s},7258:t=>{function e(){this.buffer=[],this.length=0}e.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=e},8104:t=>{function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}e.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)},e.prototype.get=function(t,e){return this.data[t*this.size+e]},e.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},e.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=e},2860:(t,e,n)=>{const r=n(1522),i=n(3141);function s(t){this.mode=i.BYTE,this.data=new Uint8Array(r(t))}s.getBitsLength=function(t){return 8*t},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)},t.exports=s},7291:(t,e,n)=>{const r=n(3997),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case r.L:return i[4*(t-1)+0];case r.M:return i[4*(t-1)+1];case r.Q:return i[4*(t-1)+2];case r.H:return i[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case r.L:return s[4*(t-1)+0];case r.M:return s[4*(t-1)+1];case r.Q:return s[4*(t-1)+2];case r.H:return s[4*(t-1)+3];default:return}}},3997:(t,e)=>{e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(r){return n}}},1224:(t,e,n)=>{const r=n(5402).getSymbolSize;e.getPositions=function(t){const e=r(t);return[[0,0],[e-7,0],[0,e-7]]}},4482:(t,e,n)=>{const r=n(5402),i=r.getBCHDigit(1335);e.getEncodedBits=function(t,e){const n=t.bit<<3|e;let s=n<<10;for(;r.getBCHDigit(s)-i>=0;)s^=1335<<r.getBCHDigit(s)-i;return 21522^(n<<10|s)}},567:(t,e)=>{const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let t=1;for(let e=0;e<255;e++)n[e]=t,r[t]=e,t<<=1,256&t&&(t^=285);for(let e=255;e<512;e++)n[e]=n[e-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return r[t]},e.exp=function(t){return n[t]},e.mul=function(t,e){return 0===t||0===e?0:n[r[t]+r[e]]}},1909:(t,e,n)=>{const r=n(3141),i=n(5402);function s(t){this.mode=r.KANJI,this.data=t}s.getBitsLength=function(t){return 13*t},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=i.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13)}},t.exports=s},1976:(t,e)=>{function n(t,n,r){switch(t){case e.Patterns.PATTERN000:return(n+r)%2==0;case e.Patterns.PATTERN001:return n%2==0;case e.Patterns.PATTERN010:return r%3==0;case e.Patterns.PATTERN011:return(n+r)%3==0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case e.Patterns.PATTERN101:return n*r%2+n*r%3==0;case e.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case e.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){const e=t.size;let n=0,r=0,i=0,s=null,o=null;for(let a=0;a<e;a++){r=i=0,s=o=null;for(let u=0;u<e;u++){let e=t.get(a,u);e===s?r++:(r>=5&&(n+=r-5+3),s=e,r=1),e=t.get(u,a),e===o?i++:(i>=5&&(n+=i-5+3),o=e,i=1)}r>=5&&(n+=r-5+3),i>=5&&(n+=i-5+3)}return n},e.getPenaltyN2=function(t){const e=t.size;let n=0;for(let r=0;r<e-1;r++)for(let i=0;i<e-1;i++){const e=t.get(r,i)+t.get(r,i+1)+t.get(r+1,i)+t.get(r+1,i+1);4!==e&&0!==e||n++}return 3*n},e.getPenaltyN3=function(t){const e=t.size;let n=0,r=0,i=0;for(let s=0;s<e;s++){r=i=0;for(let o=0;o<e;o++)r=r<<1&2047|t.get(s,o),o>=10&&(1488===r||93===r)&&n++,i=i<<1&2047|t.get(o,s),o>=10&&(1488===i||93===i)&&n++}return 40*n},e.getPenaltyN4=function(t){let e=0;const n=t.data.length;for(let r=0;r<n;r++)e+=t.data[r];return 10*Math.abs(Math.ceil(100*e/n/5)-10)},e.applyMask=function(t,e){const r=e.size;for(let i=0;i<r;i++)for(let s=0;s<r;s++)e.isReserved(s,i)||e.xor(s,i,n(t,s,i))},e.getBestMask=function(t,n){const r=Object.keys(e.Patterns).length;let i=0,s=1/0;for(let o=0;o<r;o++){n(o),e.applyMask(o,t);const r=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(o,t),r<s&&(s=r,i=o)}return i}},3141:(t,e,n)=>{const r=n(4200),i=n(2679);e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!r.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return i.testNumeric(t)?e.NUMERIC:i.testAlphanumeric(t)?e.ALPHANUMERIC:i.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(r){return n}}},580:(t,e,n)=>{const r=n(3141);function i(t){this.mode=r.NUMERIC,this.data=t.toString()}i.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e,n,r;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),r=parseInt(n,10),t.put(r,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),r=parseInt(n,10),t.put(r,3*i+1))},t.exports=i},830:(t,e,n)=>{const r=n(567);e.mul=function(t,e){const n=new Uint8Array(t.length+e.length-1);for(let i=0;i<t.length;i++)for(let s=0;s<e.length;s++)n[i+s]^=r.mul(t[i],e[s]);return n},e.mod=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){const t=n[0];for(let s=0;s<e.length;s++)n[s]^=r.mul(e[s],t);let i=0;for(;i<n.length&&0===n[i];)i++;n=n.slice(i)}return n},e.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let i=0;i<t;i++)n=e.mul(n,new Uint8Array([1,r.exp(i)]));return n}},1191:(t,e,n)=>{const r=n(5402),i=n(3997),s=n(7258),o=n(8104),a=n(6448),u=n(1224),c=n(1976),l=n(7291),h=n(6041),p=n(160),f=n(4482),d=n(3141),m=n(1769);function g(t,e,n){const r=t.size,i=f.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=1==(i>>s&1),t.set(s<6?s:s<8?s+1:r-15+s,8,o,!0),t.set(8,s<8?r-s-1:s<9?15-s-1+1:15-s-1,o,!0);t.set(r-8,8,1,!0)}e.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let n,f,v=i.M;return void 0!==e&&(v=i.from(e.errorCorrectionLevel,i.M),n=p.from(e.version),f=c.from(e.maskPattern),e.toSJISFunc&&r.setToSJISFunction(e.toSJISFunc)),function(t,e,n,i){let f;if(Array.isArray(t))f=m.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let r=e;if(!r){const e=m.rawSplit(t);r=p.getBestVersionForData(e,n)}f=m.fromString(t,r||40)}}const v=p.getBestVersionForData(f,n);if(!v)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<v)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+v+".\n")}else e=v;const y=function(t,e,n){const i=new s;n.forEach(function(e){i.put(e.mode.bit,4),i.put(e.getLength(),d.getCharCountIndicator(e.mode,t)),e.write(i)});const o=8*(r.getSymbolTotalCodewords(t)-l.getTotalCodewordsCount(t,e));for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);const a=(o-i.getLengthInBits())/8;for(let r=0;r<a;r++)i.put(r%2?17:236,8);return function(t,e,n){const i=r.getSymbolTotalCodewords(e),s=i-l.getTotalCodewordsCount(e,n),o=l.getBlocksCount(e,n),a=o-i%o,u=Math.floor(i/o),c=Math.floor(s/o),p=c+1,f=u-c,d=new h(f);let m=0;const g=new Array(o),v=new Array(o);let y=0;const b=new Uint8Array(t.buffer);for(let r=0;r<o;r++){const t=r<a?c:p;g[r]=b.slice(m,m+t),v[r]=d.encode(g[r]),m+=t,y=Math.max(y,t)}const w=new Uint8Array(i);let x,E,_=0;for(x=0;x<y;x++)for(E=0;E<o;E++)x<g[E].length&&(w[_++]=g[E][x]);for(x=0;x<f;x++)for(E=0;E<o;E++)w[_++]=v[E][x];return w}(i,t,e)}(e,n,f),b=r.getSymbolSize(e),w=new o(b);return function(t,e){const n=t.size,r=u.getPositions(e);for(let i=0;i<r.length;i++){const e=r[i][0],s=r[i][1];for(let r=-1;r<=7;r++)if(!(e+r<=-1||n<=e+r))for(let i=-1;i<=7;i++)s+i<=-1||n<=s+i||t.set(e+r,s+i,r>=0&&r<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===r||6===r)||r>=2&&r<=4&&i>=2&&i<=4,!0)}}(w,e),function(t){const e=t.size;for(let n=8;n<e-8;n++){const e=n%2==0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}(w),function(t,e){const n=a.getPositions(e);for(let r=0;r<n.length;r++){const e=n[r][0],i=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)t.set(e+n,i+r,-2===n||2===n||-2===r||2===r||0===n&&0===r,!0)}}(w,e),g(w,n,0),e>=7&&function(t,e){const n=t.size,r=p.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+n-8-3,o=1==(r>>a&1),t.set(i,s,o,!0),t.set(s,i,o,!0)}(w,e),function(t,e){const n=t.size;let r=-1,i=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(6===a&&a--;;){for(let n=0;n<2;n++)if(!t.isReserved(i,a-n)){let r=!1;o<e.length&&(r=1==(e[o]>>>s&1)),t.set(i,a-n,r),s--,-1===s&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}(w,y),isNaN(i)&&(i=c.getBestMask(w,g.bind(null,w,n))),c.applyMask(i,w),g(w,n,i),{modules:w,version:e,errorCorrectionLevel:n,maskPattern:i,segments:f}}(t,n,v,f)}},6041:(t,e,n)=>{const r=n(830);function i(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(t){this.degree=t,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=r.mod(e,this.genPoly),i=this.degree-n.length;if(i>0){const t=new Uint8Array(this.degree);return t.set(n,i),t}return n},t.exports=i},2679:(t,e)=>{let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+")(?:.|[\r\n]))+";e.KANJI=new RegExp(n,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(r,"g"),e.NUMERIC=new RegExp("[0-9]+","g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const i=new RegExp("^"+n+"$"),s=new RegExp("^[0-9]+$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return i.test(t)},e.testNumeric=function(t){return s.test(t)},e.testAlphanumeric=function(t){return o.test(t)}},1769:(t,e,n)=>{const r=n(3141),i=n(580),s=n(2793),o=n(2860),a=n(1909),u=n(2679),c=n(5402),l=n(8333);function h(t){return unescape(encodeURIComponent(t)).length}function p(t,e,n){const r=[];let i;for(;null!==(i=t.exec(n));)r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function f(t){const e=p(u.NUMERIC,r.NUMERIC,t),n=p(u.ALPHANUMERIC,r.ALPHANUMERIC,t);let i,s;return c.isKanjiModeEnabled()?(i=p(u.BYTE,r.BYTE,t),s=p(u.KANJI,r.KANJI,t)):(i=p(u.BYTE_KANJI,r.BYTE,t),s=[]),e.concat(n,i,s).sort(function(t,e){return t.index-e.index}).map(function(t){return{data:t.data,mode:t.mode,length:t.length}})}function d(t,e){switch(e){case r.NUMERIC:return i.getBitsLength(t);case r.ALPHANUMERIC:return s.getBitsLength(t);case r.KANJI:return a.getBitsLength(t);case r.BYTE:return o.getBitsLength(t)}}function m(t,e){let n;const u=r.getBestModeForData(t);if(n=r.from(e,u),n!==r.BYTE&&n.bit<u.bit)throw new Error('"'+t+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(u));switch(n!==r.KANJI||c.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new i(t);case r.ALPHANUMERIC:return new s(t);case r.KANJI:return new a(t);case r.BYTE:return new o(t)}}e.fromArray=function(t){return t.reduce(function(t,e){return"string"==typeof e?t.push(m(e,null)):e.data&&t.push(m(e.data,e.mode)),t},[])},e.fromString=function(t,n){const i=function(t,e){const n={},i={start:{}};let s=["start"];for(let o=0;o<t.length;o++){const a=t[o],u=[];for(let t=0;t<a.length;t++){const c=a[t],l=""+o+t;u.push(l),n[l]={node:c,lastCount:0},i[l]={};for(let t=0;t<s.length;t++){const o=s[t];n[o]&&n[o].node.mode===c.mode?(i[o][l]=d(n[o].lastCount+c.length,c.mode)-d(n[o].lastCount,c.mode),n[o].lastCount+=c.length):(n[o]&&(n[o].lastCount=c.length),i[o][l]=d(c.length,c.mode)+4+r.getCharCountIndicator(c.mode,e))}}s=u}for(let r=0;r<s.length;r++)i[s[r]].end=0;return{map:i,table:n}}(function(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n];switch(i.mode){case r.NUMERIC:e.push([i,{data:i.data,mode:r.ALPHANUMERIC,length:i.length},{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.ALPHANUMERIC:e.push([i,{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.KANJI:e.push([i,{data:i.data,mode:r.BYTE,length:h(i.data)}]);break;case r.BYTE:e.push([{data:i.data,mode:r.BYTE,length:h(i.data)}])}}return e}(f(t,c.isKanjiModeEnabled())),n),s=l.find_path(i.map,"start","end"),o=[];for(let e=1;e<s.length-1;e++)o.push(i.table[s[e]].node);return e.fromArray(o.reduce(function(t,e){const n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)},[]))},e.rawSplit=function(t){return e.fromArray(f(t,c.isKanjiModeEnabled()))}},5402:(t,e)=>{let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return r[t]},e.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');n=t},e.isKanjiModeEnabled=function(){return void 0!==n},e.toSJIS=function(t){return n(t)}},4200:(t,e)=>{e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},160:(t,e,n)=>{const r=n(5402),i=n(7291),s=n(3997),o=n(3141),a=n(4200),u=r.getBCHDigit(7973);function c(t,e){return o.getCharCountIndicator(t,e)+4}function l(t,e){let n=0;return t.forEach(function(t){const r=c(t.mode,e);n+=r+t.getBitsLength()}),n}e.from=function(t,e){return a.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,n){if(!a.isValid(t))throw new Error("Invalid QR Code version");void 0===n&&(n=o.BYTE);const s=8*(r.getSymbolTotalCodewords(t)-i.getTotalCodewordsCount(t,e));if(n===o.MIXED)return s;const u=s-c(n,t);switch(n){case o.NUMERIC:return Math.floor(u/10*3);case o.ALPHANUMERIC:return Math.floor(u/11*2);case o.KANJI:return Math.floor(u/13);case o.BYTE:default:return Math.floor(u/8)}},e.getBestVersionForData=function(t,n){let r;const i=s.from(n,s.M);if(Array.isArray(t)){if(t.length>1)return function(t,n){for(let r=1;r<=40;r++)if(l(t,r)<=e.getCapacity(r,n,o.MIXED))return r}(t,i);if(0===t.length)return 1;r=t[0]}else r=t;return function(t,n,r){for(let i=1;i<=40;i++)if(n<=e.getCapacity(i,r,t))return i}(r.mode,r.getLength(),i)},e.getEncodedBits=function(t){if(!a.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;r.getBCHDigit(e)-u>=0;)e^=7973<<r.getBCHDigit(e)-u;return t<<12|e}},2158:(t,e,n)=>{const r=n(5726);e.render=function(t,e,n){let i=n,s=e;void 0!==i||e&&e.getContext||(i=e,e=void 0),e||(s=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),i=r.getOptions(i);const o=r.getImageWidth(t.modules.size,i),a=s.getContext("2d"),u=a.createImageData(o,o);return r.qrToImageData(u.data,t,i),function(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}(a,s,o),a.putImageData(u,0,0),s},e.renderToDataURL=function(t,n,r){let i=r;return void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={}),e.render(t,n,i).toDataURL(i.type||"image/png",(i.rendererOpts||{}).quality)}},173:(t,e,n)=>{const r=n(5726);function i(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function s(t,e,n){let r=t+e;return void 0!==n&&(r+=" "+n),r}e.render=function(t,e,n){const o=r.getOptions(e),a=t.modules.size,u=t.modules.data,c=a+2*o.margin,l=o.color.light.a?"<path "+i(o.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",h="<path "+i(o.color.dark,"stroke")+' d="'+function(t,e,n){let r="",i=0,o=!1,a=0;for(let u=0;u<t.length;u++){const c=Math.floor(u%e),l=Math.floor(u/e);c||o||(o=!0),t[u]?(a++,u>0&&c>0&&t[u-1]||(r+=o?s("M",c+n,.5+l+n):s("m",i,0),i=0,o=!1),c+1<e&&t[u+1]||(r+=s("h",a),a=0)):i++}return r}(u,a,o.margin)+'"/>',p='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+'viewBox="0 0 '+c+" "+c+'" shape-rendering="crispEdges">'+l+h+"</svg>\n";return"function"==typeof n&&n(null,p),p}},5726:(t,e)=>{function n(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=t.width&&t.width>=21?t.width:void 0;return{width:e,scale:e?4:t.scale||4,margin:null==t.margin||t.margin<0?4:t.margin,color:{dark:n(t.color.dark||"#000000ff"),light:n(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,n){const r=e.getScale(t,n);return Math.floor((t+2*n.margin)*r)},e.qrToImageData=function(t,n,r){const i=n.modules.size,s=n.modules.data,o=e.getScale(i,r),a=Math.floor((i+2*r.margin)*o),u=r.margin*o,c=[r.color.light,r.color.dark];for(let e=0;e<a;e++)for(let n=0;n<a;n++){let l=4*(e*a+n),h=r.color.light;e>=u&&n>=u&&e<a-u&&n<a-u&&(h=c[s[Math.floor((e-u)/o)*i+Math.floor((n-u)/o)]?1:0]),t[l++]=h.r,t[l++]=h.g,t[l++]=h.b,t[l]=h.a}}},3576:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5730),i=n(7104),s=n(6232),o=n(3915),a=n(8273),u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,s=i.toSubscriber(t,e,n);if(s.add(r?r.call(s,this.source):this.source||a.config.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),a.config.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),r.canReportError(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=c(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[s.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:o.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=c(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function c(t){if(t||(t=a.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=u},6011:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8273),i=n(2434);e.empty={closed:!0,next:function(t){},error:function(t){if(r.config.useDeprecatedSynchronousErrorHandling)throw t;i.hostReportError(t)},complete:function(){}}},3409:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(3576),o=n(7241),a=n(3984),u=n(5639),c=n(5298),l=n(1476),h=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(o.Subscriber);e.SubjectSubscriber=h;var p=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[l.rxSubscriber]=function(){return new h(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new u.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new u.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(t.complete(),a.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new s.Observable;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(s.Observable);e.Subject=p;var f=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.Subscription.EMPTY},e}(p);e.AnonymousSubject=f},5298:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(3984).Subscription);e.SubjectSubscription=s},7241:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(7382),o=n(6011),a=n(3984),u=n(1476),c=n(8273),l=n(2434),h=function(t){function e(n,r,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o.empty;break;case 1:if(!n){s.destination=o.empty;break}if("object"==typeof n){n instanceof e?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new p(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new p(s,n,r,i)}return s}return i(e,t),e.prototype[u.rxSubscriber]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(a.Subscription);e.Subscriber=h;var p=function(t){function e(e,n,r,i){var a,u=t.call(this)||this;u._parentSubscriber=e;var c=u;return s.isFunction(n)?a=n:n&&(a=n.next,r=n.error,i=n.complete,n!==o.empty&&(c=Object.create(n),s.isFunction(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=a,u._error=r,u._complete=i,u}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):l.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;l.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};c.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw n;l.hostReportError(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return c.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(l.hostReportError(r),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(h);e.SafeSubscriber=p},3984:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(993),i=n(4720),s=n(7382),o=n(8574),a=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,a=n._parentOrParents,c=n._ctorUnsubscribe,l=n._unsubscribe,h=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof t)a.remove(this);else if(null!==a)for(var p=0;p<a.length;++p)a[p].remove(this);if(s.isFunction(l)){c&&(this._unsubscribe=void 0);try{l.call(this)}catch(m){e=m instanceof o.UnsubscriptionError?u(m.errors):[m]}}if(r.isArray(h)){p=-1;for(var f=h.length;++p<f;){var d=h[p];if(i.isObject(d))try{d.unsubscribe()}catch(m){e=e||[],m instanceof o.UnsubscriptionError?e=e.concat(u(m.errors)):e.push(m)}}}if(e)throw new o.UnsubscriptionError(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function u(t){return t.reduce(function(t,e){return t.concat(e instanceof o.UnsubscriptionError?e.errors:e)},[])}e.Subscription=a},8273:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else n&&console.log("RxJS: Back to a better error behavior. Thank you. <3");n=t},get useDeprecatedSynchronousErrorHandling(){return n}}},6232:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},1476:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),e.$$rxSubscriber=e.rxSubscriber},5639:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}();e.ObjectUnsubscribedError=n},8574:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}();e.UnsubscriptionError=n},5730:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7241);e.canReportError=function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof r.Subscriber?e:null}return!0}},2434:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hostReportError=function(t){setTimeout(function(){throw t},0)}},2516:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.identity=function(t){return t}},993:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},7382:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=function(t){return"function"==typeof t}},4720:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=function(t){return null!==t&&"object"==typeof t}},3915:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2516);function i(t){return 0===t.length?r.identity:1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(t)},e.pipeFromArray=i},7104:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7241),i=n(1476),s=n(6011);e.toSubscriber=function(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(s.empty)}},2360:function(t){t.exports=function(){var t={9662:function(t,e,n){var r=n(614),i=n(6330),s=TypeError;t.exports=function(t){if(r(t))return t;throw s(i(t)+" is not a function")}},9483:function(t,e,n){var r=n(4411),i=n(6330),s=TypeError;t.exports=function(t){if(r(t))return t;throw s(i(t)+" is not a constructor")}},6077:function(t,e,n){var r=n(614),i=String,s=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw s("Can't set "+i(t)+" as a prototype")}},1223:function(t,e,n){var r=n(5112),i=n(30),s=n(3070).f,o=r("unscopables"),a=Array.prototype;null==a[o]&&s(a,o,{configurable:!0,value:i(null)}),t.exports=function(t){a[o][t]=!0}},1530:function(t,e,n){"use strict";var r=n(8710).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},9670:function(t,e,n){var r=n(111),i=String,s=TypeError;t.exports=function(t){if(r(t))return t;throw s(i(t)+" is not an object")}},8533:function(t,e,n){"use strict";var r=n(2092).forEach,i=n(9341)("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},8457:function(t,e,n){"use strict";var r=n(9974),i=n(6916),s=n(7908),o=n(3411),a=n(7659),u=n(4411),c=n(6244),l=n(6135),h=n(4121),p=n(1246),f=Array;t.exports=function(t){var e=s(t),n=u(this),d=arguments.length,m=d>1?arguments[1]:void 0,g=void 0!==m;g&&(m=r(m,d>2?arguments[2]:void 0));var v,y,b,w,x,E,_=p(e),S=0;if(!_||this===f&&a(_))for(v=c(e),y=n?new this(v):f(v);v>S;S++)E=g?m(e[S],S):e[S],l(y,S,E);else for(x=(w=h(e,_)).next,y=n?new this:[];!(b=i(x,w)).done;S++)E=g?o(w,m,[b.value,S],!0):b.value,l(y,S,E);return y.length=S,y}},1318:function(t,e,n){var r=n(5656),i=n(1400),s=n(6244),o=function(t){return function(e,n,o){var a,u=r(e),c=s(u),l=i(o,c);if(t&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},2092:function(t,e,n){var r=n(9974),i=n(1702),s=n(8361),o=n(7908),a=n(6244),u=n(5417),c=i([].push),l=function(t){var e=1==t,n=2==t,i=3==t,l=4==t,h=6==t,p=7==t,f=5==t||h;return function(d,m,g,v){for(var y,b,w=o(d),x=s(w),E=r(m,g),_=a(x),S=0,C=v||u,A=e?C(d,_):n||p?C(d,0):void 0;_>S;S++)if((f||S in x)&&(b=E(y=x[S],S,w),t))if(e)A[S]=b;else if(b)switch(t){case 3:return!0;case 5:return y;case 6:return S;case 2:c(A,y)}else switch(t){case 4:return!1;case 7:c(A,y)}return h?-1:i||l?l:A}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},1194:function(t,e,n){var r=n(7293),i=n(5112),s=n(7392),o=i("species");t.exports=function(t){return s>=51||!r(function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},9341:function(t,e,n){"use strict";var r=n(7293);t.exports=function(t,e){var n=[][t];return!!n&&r(function(){n.call(null,e||function(){return 1},1)})}},3671:function(t,e,n){var r=n(9662),i=n(7908),s=n(8361),o=n(6244),a=TypeError,u=function(t){return function(e,n,u,c){r(n);var l=i(e),h=s(l),p=o(l),f=t?p-1:0,d=t?-1:1;if(u<2)for(;;){if(f in h){c=h[f],f+=d;break}if(f+=d,t?f<0:p<=f)throw a("Reduce of empty array with no initial value")}for(;t?f>=0:p>f;f+=d)f in h&&(c=n(c,h[f],f,l));return c}};t.exports={left:u(!1),right:u(!0)}},3658:function(t,e,n){"use strict";var r=n(9781),i=n(3157),s=TypeError,o=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!o(t,"length").writable)throw s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1589:function(t,e,n){var r=n(1400),i=n(6244),s=n(6135),o=Array,a=Math.max;t.exports=function(t,e,n){for(var u=i(t),c=r(e,u),l=r(void 0===n?u:n,u),h=o(a(l-c,0)),p=0;c<l;c++,p++)s(h,p,t[c]);return h.length=p,h}},206:function(t,e,n){var r=n(1702);t.exports=r([].slice)},4362:function(t,e,n){var r=n(1589),i=Math.floor,s=function(t,e){var n=t.length,u=i(n/2);return n<8?o(t,e):a(t,s(r(t,0,u),e),s(r(t,u),e),e)},o=function(t,e){for(var n,r,i=t.length,s=1;s<i;){for(r=s,n=t[s];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==s++&&(t[r]=n)}return t},a=function(t,e,n,r){for(var i=e.length,s=n.length,o=0,a=0;o<i||a<s;)t[o+a]=o<i&&a<s?r(e[o],n[a])<=0?e[o++]:n[a++]:o<i?e[o++]:n[a++];return t};t.exports=s},7475:function(t,e,n){var r=n(3157),i=n(4411),s=n(111),o=n(5112)("species"),a=Array;t.exports=function(t){var e;return r(t)&&(i(e=t.constructor)&&(e===a||r(e.prototype))||s(e)&&null===(e=e[o]))&&(e=void 0),void 0===e?a:e}},5417:function(t,e,n){var r=n(7475);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},3411:function(t,e,n){var r=n(9670),i=n(9212);t.exports=function(t,e,n,s){try{return s?e(r(n)[0],n[1]):e(n)}catch(e){i(t,"throw",e)}}},7072:function(t,e,n){var r=n(5112)("iterator"),i=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){i=!0}};o[r]=function(){return this},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var s={};s[r]=function(){return{next:function(){return{done:n=!0}}}},t(s)}catch(t){}return n}},4326:function(t,e,n){var r=n(84),i=r({}.toString),s=r("".slice);t.exports=function(t){return s(i(t),8,-1)}},648:function(t,e,n){var r=n(1694),i=n(614),s=n(4326),o=n(5112)("toStringTag"),a=Object,u="Arguments"==s(function(){return arguments}());t.exports=r?s:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),o))?n:u?s(e):"Object"==(r=s(e))&&i(e.callee)?"Arguments":r}},9920:function(t,e,n){var r=n(2597),i=n(3887),s=n(1236),o=n(3070);t.exports=function(t,e,n){for(var a=i(e),u=o.f,c=s.f,l=0;l<a.length;l++){var h=a[l];r(t,h)||n&&r(n,h)||u(t,h,c(e,h))}}},4964:function(t,e,n){var r=n(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},8544:function(t,e,n){var r=n(7293);t.exports=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},6178:function(t){t.exports=function(t,e){return{value:t,done:e}}},8880:function(t,e,n){var r=n(9781),i=n(3070),s=n(9114);t.exports=r?function(t,e,n){return i.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,n){"use strict";var r=n(4948),i=n(3070),s=n(9114);t.exports=function(t,e,n){var o=r(e);o in t?i.f(t,o,s(0,n)):t[o]=n}},8709:function(t,e,n){"use strict";var r=n(9670),i=n(2140),s=TypeError;t.exports=function(t){if(r(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw s("Incorrect hint");return i(this,t)}},8052:function(t,e,n){var r=n(614),i=n(3070),s=n(6339),o=n(3072);t.exports=function(t,e,n,a){a||(a={});var u=a.enumerable,c=void 0!==a.name?a.name:e;if(r(n)&&s(n,c,a),a.global)u?t[e]=n:o(e,n);else{try{a.unsafe?t[e]&&(u=!0):delete t[e]}catch(t){}u?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},3072:function(t,e,n){var r=n(7854),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},5117:function(t,e,n){"use strict";var r=n(6330),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw i("Cannot delete property "+r(e)+" of "+r(t))}},9781:function(t,e,n){var r=n(7293);t.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},4154:function(t){var e="object"==typeof document&&document.all;t.exports={all:e,IS_HTMLDDA:void 0===e&&void 0!==e}},317:function(t,e,n){var r=n(7854),i=n(111),s=r.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},7207:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(t,e,n){var r=n(317)("span").classList,i=r&&r.constructor&&r.constructor.prototype;t.exports=i===Object.prototype?void 0:i},8886:function(t,e,n){var r=n(8113).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},256:function(t,e,n){var r=n(8113);t.exports=/MSIE|Trident/.test(r)},5268:function(t,e,n){var r=n(4326),i=n(7854);t.exports="process"==r(i.process)},8113:function(t,e,n){var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,e,n){var r,i,s=n(7854),o=n(8113),a=s.process,u=s.Deno,c=a&&a.versions||u&&u.version,l=c&&c.v8;l&&(i=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=+r[1]),t.exports=i},8008:function(t,e,n){var r=n(8113).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var r=n(7854),i=n(1236).f,s=n(8880),o=n(8052),a=n(3072),u=n(9920),c=n(4705);t.exports=function(t,e){var n,l,h,p,f,d=t.target,m=t.global,g=t.stat;if(n=m?r:g?r[d]||a(d,{}):(r[d]||{}).prototype)for(l in e){if(p=e[l],h=t.dontCallGetSet?(f=i(n,l))&&f.value:n[l],!c(m?l:d+(g?".":"#")+l,t.forced)&&void 0!==h){if(typeof p==typeof h)continue;u(p,h)}(t.sham||h&&h.sham)&&s(p,"sham",!0),o(n,l,p,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},7007:function(t,e,n){"use strict";n(4916);var r=n(1702),i=n(8052),s=n(2261),o=n(7293),a=n(5112),u=n(8880),c=a("species"),l=RegExp.prototype;t.exports=function(t,e,n,h){var p=a(t),f=!o(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),d=f&&!o(function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e});if(!f||!d||n){var m=r(/./[p]),g=e(p,""[t],function(t,e,n,i,o){var a=r(t),u=e.exec;return u===s||u===l.exec?f&&!o?{done:!0,value:m(e,n,i)}:{done:!0,value:a(n,e,i)}:{done:!1}});i(String.prototype,t,g[0]),i(l,p,g[1])}h&&u(l[p],"sham",!0)}},2104:function(t,e,n){var r=n(4374),i=Function.prototype,s=i.apply,o=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(s):function(){return o.apply(s,arguments)})},9974:function(t,e,n){var r=n(1702),i=n(9662),s=n(4374),o=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:s?o(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,n){var r=n(7293);t.exports=!r(function(){var t=(function(){}).bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},6916:function(t,e,n){var r=n(4374),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(t,e,n){var r=n(9781),i=n(2597),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),u=a&&"something"===(function(){}).name,c=a&&(!r||r&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:u,CONFIGURABLE:c}},84:function(t,e,n){var r=n(4374),i=Function.prototype,s=i.call,o=r&&i.bind.bind(s,s);t.exports=r?o:function(t){return function(){return s.apply(t,arguments)}}},1702:function(t,e,n){var r=n(4326),i=n(84);t.exports=function(t){if("Function"===r(t))return i(t)}},5005:function(t,e,n){var r=n(7854),i=n(614),s=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(r[t]):r[t]&&r[t][e]}},1246:function(t,e,n){var r=n(648),i=n(8173),s=n(8554),o=n(7497),a=n(5112)("iterator");t.exports=function(t){if(!s(t))return i(t,a)||i(t,"@@iterator")||o[r(t)]}},4121:function(t,e,n){var r=n(6916),i=n(9662),s=n(9670),o=n(6330),a=n(1246),u=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(i(n))return s(r(n,t));throw u(o(t)+" is not iterable")}},8173:function(t,e,n){var r=n(9662),i=n(8554);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},647:function(t,e,n){var r=n(1702),i=n(7908),s=Math.floor,o=r("".charAt),a=r("".replace),u=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,h,p){var f=n+t.length,d=r.length,m=l;return void 0!==h&&(h=i(h),m=c),a(p,m,function(i,a){var c;switch(o(a,0)){case"$":return"$";case"&":return t;case"`":return u(e,0,n);case"'":return u(e,f);case"<":c=h[u(a,1,-1)];break;default:var l=+a;if(0===l)return i;if(l>d){var p=s(l/10);return 0===p?i:p<=d?void 0===r[p-1]?o(a,1):r[p-1]+o(a,1):i}c=r[l-1]}return void 0===c?"":c})}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var r=n(1702),i=n(7908),s=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(i(t),e)}},3501:function(t){t.exports={}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),i=n(7293),s=n(317);t.exports=!r&&!i(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},8361:function(t,e,n){var r=n(1702),i=n(7293),s=n(4326),o=Object,a=r("".split);t.exports=i(function(){return!o("z").propertyIsEnumerable(0)})?function(t){return"String"==s(t)?a(t,""):o(t)}:o},9587:function(t,e,n){var r=n(614),i=n(111),s=n(7674);t.exports=function(t,e,n){var o,a;return s&&r(o=e.constructor)&&o!==n&&i(a=o.prototype)&&a!==n.prototype&&s(t,a),t}},2788:function(t,e,n){var r=n(1702),i=n(614),s=n(5465),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},9909:function(t,e,n){var r,i,s,o=n(4811),a=n(7854),u=n(111),c=n(8880),l=n(2597),h=n(5465),p=n(6200),f=n(3501),d="Object already initialized",m=a.TypeError;if(o||h.state){var g=h.state||(h.state=new(0,a.WeakMap));g.get=g.get,g.has=g.has,g.set=g.set,r=function(t,e){if(g.has(t))throw m(d);return e.facade=t,g.set(t,e),e},i=function(t){return g.get(t)||{}},s=function(t){return g.has(t)}}else{var v=p("state");f[v]=!0,r=function(t,e){if(l(t,v))throw m(d);return e.facade=t,c(t,v,e),e},i=function(t){return l(t,v)?t[v]:{}},s=function(t){return l(t,v)}}t.exports={set:r,get:i,has:s,enforce:function(t){return s(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return n}}}},7659:function(t,e,n){var r=n(5112),i=n(7497),s=r("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[s]===t)}},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},614:function(t,e,n){var r=n(4154),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},4411:function(t,e,n){var r=n(1702),i=n(7293),s=n(614),o=n(648),a=n(5005),u=n(2788),c=function(){},l=[],h=a("Reflect","construct"),p=/^\s*(?:class|function)\b/,f=r(p.exec),d=!p.exec(c),m=function(t){if(!s(t))return!1;try{return h(c,l,t),!0}catch(t){return!1}},g=function(t){if(!s(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!f(p,u(t))}catch(t){return!0}};g.sham=!0,t.exports=!h||i(function(){var t;return m(m.call)||!m(Object)||!m(function(){t=!0})||t})?g:m},4705:function(t,e,n){var r=n(7293),i=n(614),s=/#|\.prototype\./,o=function(t,e){var n=u[a(t)];return n==l||n!=c&&(i(e)?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},u=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";t.exports=o},5988:function(t,e,n){var r=n(111),i=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&i(t)===t}},8554:function(t){t.exports=function(t){return null==t}},111:function(t,e,n){var r=n(614),i=n(4154),s=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===s}:function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},7850:function(t,e,n){var r=n(111),i=n(4326),s=n(5112)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},2190:function(t,e,n){var r=n(5005),i=n(614),s=n(7976),o=n(3307),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&s(e.prototype,a(t))}},9212:function(t,e,n){var r=n(6916),i=n(9670),s=n(8173);t.exports=function(t,e,n){var o,a;i(t);try{if(!(o=s(t,"return"))){if("throw"===e)throw n;return n}o=r(o,t)}catch(t){a=!0,o=t}if("throw"===e)throw n;if(a)throw o;return i(o),n}},3061:function(t,e,n){"use strict";var r=n(3383).IteratorPrototype,i=n(30),s=n(9114),o=n(8003),a=n(7497),u=function(){return this};t.exports=function(t,e,n,c){var l=e+" Iterator";return t.prototype=i(r,{next:s(+!c,n)}),o(t,l,!1,!0),a[l]=u,t}},1656:function(t,e,n){"use strict";var r=n(2109),i=n(6916),s=n(1913),o=n(6530),a=n(614),u=n(3061),c=n(9518),l=n(7674),h=n(8003),p=n(8880),f=n(8052),d=n(5112),m=n(7497),g=n(3383),v=o.PROPER,y=o.CONFIGURABLE,b=g.IteratorPrototype,w=g.BUGGY_SAFARI_ITERATORS,x=d("iterator"),E="keys",_="values",S="entries",C=function(){return this};t.exports=function(t,e,n,o,d,g,A){u(n,e,o);var I,T,k,P=function(t){if(t===d&&O)return O;if(!w&&t in F)return F[t];switch(t){case E:case _:case S:return function(){return new n(this,t)}}return function(){return new n(this)}},R=e+" Iterator",D=!1,F=t.prototype,B=F[x]||F["@@iterator"]||d&&F[d],O=!w&&B||P(d),N="Array"==e&&F.entries||B;if(N&&(I=c(N.call(new t)))!==Object.prototype&&I.next&&(s||c(I)===b||(l?l(I,b):a(I[x])||f(I,x,C)),h(I,R,!0,!0),s&&(m[R]=C)),v&&d==_&&B&&B.name!==_&&(!s&&y?p(F,"name",_):(D=!0,O=function(){return i(B,this)})),d)if(T={values:P(_),keys:g?O:P(E),entries:P(S)},A)for(k in T)(w||D||!(k in F))&&f(F,k,T[k]);else r({target:e,proto:!0,forced:w||D},T);return s&&!A||F[x]===O||f(F,x,O,{name:d}),m[e]=O,T}},3383:function(t,e,n){"use strict";var r,i,s,o=n(7293),a=n(614),u=n(111),c=n(30),l=n(9518),h=n(8052),p=n(5112),f=n(1913),d=p("iterator"),m=!1;[].keys&&("next"in(s=[].keys())?(i=l(l(s)))!==Object.prototype&&(r=i):m=!0),!u(r)||o(function(){var t={};return r[d].call(t)!==t})?r={}:f&&(r=c(r)),a(r[d])||h(r,d,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},7497:function(t){t.exports={}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){var r=n(7293),i=n(614),s=n(2597),o=n(9781),a=n(6530).CONFIGURABLE,u=n(2788),c=n(9909),l=c.enforce,h=c.get,p=Object.defineProperty,f=o&&!r(function(){return 8!==p(function(){},"length",{value:8}).length}),d=String(String).split("String"),m=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||a&&t.name!==e)&&(o?p(t,"name",{value:e,configurable:!0}):t.name=e),f&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?o&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=l(t);return s(r,"source")||(r.source=d.join("string"==typeof e?e:"")),t};Function.prototype.toString=m(function(){return i(this)&&h(this).source||u(this)},"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},3929:function(t,e,n){var r=n(7850),i=TypeError;t.exports=function(t){if(r(t))throw i("The method doesn't accept regular expressions");return t}},1574:function(t,e,n){"use strict";var r=n(9781),i=n(1702),s=n(6916),o=n(7293),a=n(1956),u=n(5181),c=n(5296),l=n(7908),h=n(8361),p=Object.assign,f=Object.defineProperty,d=i([].concat);t.exports=!p||o(function(){if(r&&1!==p({b:1},p(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=p({},t)[n]||a(p({},e)).join("")!=i})?function(t,e){for(var n=l(t),i=arguments.length,o=1,p=u.f,f=c.f;i>o;)for(var m,g=h(arguments[o++]),v=p?d(a(g),p(g)):a(g),y=v.length,b=0;y>b;)m=v[b++],r&&!s(f,g,m)||(n[m]=g[m]);return n}:p},30:function(t,e,n){var r,i=n(9670),s=n(6048),o=n(748),a=n(3501),u=n(490),c=n(317),l=n(6200)("IE_PROTO"),h=function(){},p=function(t){return"<script>"+t+"<\/script>"},f=function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e},d=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e;d="undefined"!=typeof document?document.domain&&r?f(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):f(r);for(var n=o.length;n--;)delete d.prototype[o[n]];return d()};a[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=i(t),n=new h,h.prototype=null,n[l]=t):n=d(),void 0===e?n:s.f(n,e)}},6048:function(t,e,n){var r=n(9781),i=n(3353),s=n(3070),o=n(9670),a=n(5656),u=n(1956);e.f=r&&!i?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),i=u(e),c=i.length,l=0;c>l;)s.f(t,n=i[l++],r[n]);return t}},3070:function(t,e,n){var r=n(9781),i=n(4664),s=n(3353),o=n(9670),a=n(4948),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor;e.f=r?s?function(t,e,n){if(o(t),e=a(e),o(n),"function"==typeof t&&"prototype"===e&&"value"in n&&"writable"in n&&!n.writable){var r=l(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(o(t),e=a(e),o(n),i)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),i=n(6916),s=n(5296),o=n(9114),a=n(5656),u=n(4948),c=n(2597),l=n(4664),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=u(e),l)try{return h(t,e)}catch(t){}if(c(t,e))return o(!i(s.f,t,e),t[e])}},1156:function(t,e,n){var r=n(4326),i=n(5656),s=n(8006).f,o=n(1589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"==r(t)?function(t){try{return s(t)}catch(t){return o(a)}}(t):s(i(t))}},8006:function(t,e,n){var r=n(6324),i=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(2597),i=n(614),s=n(7908),o=n(6200),a=n(8544),u=o("IE_PROTO"),c=Object,l=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=s(t);if(r(e,u))return e[u];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof c?l:null}},7976:function(t,e,n){var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){var r=n(1702),i=n(2597),s=n(5656),o=n(1318).indexOf,a=n(3501),u=r([].push);t.exports=function(t,e){var n,r=s(t),c=0,l=[];for(n in r)!i(a,n)&&i(r,n)&&u(l,n);for(;e.length>c;)i(r,n=e[c++])&&(~o(l,n)||u(l,n));return l}},1956:function(t,e,n){var r=n(6324),i=n(748);t.exports=Object.keys||function(t){return r(t,i)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},9026:function(t,e,n){"use strict";var r=n(1913),i=n(7854),s=n(7293),o=n(8008);t.exports=r||!s(function(){if(!(o&&o<535)){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete i[t]}})},7674:function(t,e,n){var r=n(1702),i=n(9670),s=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return i(n),s(r),e?t(n,r):n.__proto__=r,n}}():void 0)},288:function(t,e,n){"use strict";var r=n(1694),i=n(648);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},2140:function(t,e,n){var r=n(6916),i=n(614),s=n(111),o=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!s(a=r(n,t)))return a;if(i(n=t.valueOf)&&!s(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!s(a=r(n,t)))return a;throw o("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),i=n(1702),s=n(8006),o=n(5181),a=n(9670),u=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=s.f(a(t)),n=o.f;return n?u(e,n(t)):e}},857:function(t,e,n){var r=n(7854);t.exports=r},2626:function(t,e,n){var r=n(3070).f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},7651:function(t,e,n){var r=n(6916),i=n(9670),s=n(614),o=n(4326),a=n(2261),u=TypeError;t.exports=function(t,e){var n=t.exec;if(s(n)){var c=r(n,t,e);return null!==c&&i(c),c}if("RegExp"===o(t))return r(a,t,e);throw u("RegExp#exec called on incompatible receiver")}},2261:function(t,e,n){"use strict";var r,i,s=n(6916),o=n(1702),a=n(1340),u=n(7066),c=n(2999),l=n(2309),h=n(30),p=n(9909).get,f=n(9441),d=n(7168),m=l("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,v=g,y=o("".charAt),b=o("".indexOf),w=o("".replace),x=o("".slice),E=(i=/b*/g,s(g,r=/a/,"a"),s(g,i,"a"),0!==r.lastIndex||0!==i.lastIndex),_=c.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(E||S||_||f||d)&&(v=function(t){var e,n,r,i,o,c,l,f=this,d=p(f),C=a(t),A=d.raw;if(A)return A.lastIndex=f.lastIndex,e=s(v,A,C),f.lastIndex=A.lastIndex,e;var I=d.groups,T=_&&f.sticky,k=s(u,f),P=f.source,R=0,D=C;if(T&&(k=w(k,"y",""),-1===b(k,"g")&&(k+="g"),D=x(C,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==y(C,f.lastIndex-1))&&(P="(?: "+P+")",D=" "+D,R++),n=new RegExp("^(?:"+P+")",k)),S&&(n=new RegExp("^"+P+"$(?!\\s)",k)),E&&(r=f.lastIndex),i=s(g,T?n:f,D),T?i?(i.input=x(i.input,R),i[0]=x(i[0],R),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:E&&i&&(f.lastIndex=f.global?i.index+i[0].length:r),S&&i&&i.length>1&&s(m,i[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)}),i&&I)for(i.groups=c=h(null),o=0;o<I.length;o++)c[(l=I[o])[0]]=i[l[1]];return i}),t.exports=v},7066:function(t,e,n){"use strict";var r=n(9670);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},4706:function(t,e,n){var r=n(6916),i=n(2597),s=n(7976),o=n(7066),a=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in a||i(t,"flags")||!s(a,t)?e:r(o,t)}},2999:function(t,e,n){var r=n(7293),i=n(7854).RegExp,s=r(function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),o=s||r(function(){return!i("a","y").sticky}),a=s||r(function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")});t.exports={BROKEN_CARET:a,MISSED_STICKY:o,UNSUPPORTED_Y:s}},9441:function(t,e,n){var r=n(7293),i=n(7854).RegExp;t.exports=r(function(){var t=i(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})},7168:function(t,e,n){var r=n(7293),i=n(7854).RegExp;t.exports=r(function(){var t=i("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})},4488:function(t,e,n){var r=n(8554),i=TypeError;t.exports=function(t){if(r(t))throw i("Can't call method on "+t);return t}},6340:function(t,e,n){"use strict";var r=n(5005),i=n(3070),s=n(5112),o=n(9781),a=s("species");t.exports=function(t){var e=r(t);o&&e&&!e[a]&&(0,i.f)(e,a,{configurable:!0,get:function(){return this}})}},8003:function(t,e,n){var r=n(3070).f,i=n(2597),s=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!i(t,s)&&r(t,s,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(2309),i=n(9711),s=r("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},5465:function(t,e,n){var r=n(7854),i=n(3072),s="__core-js_shared__",o=r[s]||i(s,{});t.exports=o},2309:function(t,e,n){var r=n(1913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.26.0",mode:r?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(t,e,n){var r=n(9670),i=n(9483),s=n(8554),o=n(5112)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||s(n=r(a)[o])?e:i(n)}},8710:function(t,e,n){var r=n(1702),i=n(9303),s=n(1340),o=n(4488),a=r("".charAt),u=r("".charCodeAt),c=r("".slice),l=function(t){return function(e,n){var r,l,h=s(o(e)),p=i(n),f=h.length;return p<0||p>=f?t?"":void 0:(r=u(h,p))<55296||r>56319||p+1===f||(l=u(h,p+1))<56320||l>57343?t?a(h,p):r:t?c(h,p,p+2):l-56320+(r-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},6091:function(t,e,n){var r=n(6530).PROPER,i=n(7293),s=n(1361);t.exports=function(t){return i(function(){return!!s[t]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[t]()||r&&s[t].name!==t})}},3111:function(t,e,n){var r=n(1702),i=n(4488),s=n(1340),o=n(1361),a=r("".replace),u="["+o+"]",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),h=function(t){return function(e){var n=s(i(e));return 1&t&&(n=a(n,c,"")),2&t&&(n=a(n,l,"")),n}};t.exports={start:h(1),end:h(2),trim:h(3)}},6293:function(t,e,n){var r=n(7392),i=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!i(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41})},6532:function(t,e,n){var r=n(6916),i=n(5005),s=n(5112),o=n(8052);t.exports=function(){var t=i("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,a=s("toPrimitive");e&&!e[a]&&o(e,a,function(t){return r(n,this)},{arity:1})}},2015:function(t,e,n){var r=n(6293);t.exports=r&&!!Symbol.for&&!!Symbol.keyFor},863:function(t,e,n){var r=n(1702);t.exports=r(1..valueOf)},1400:function(t,e,n){var r=n(9303),i=Math.max,s=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):s(n,e)}},5656:function(t,e,n){var r=n(8361),i=n(4488);t.exports=function(t){return r(i(t))}},9303:function(t,e,n){var r=n(4758);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},7466:function(t,e,n){var r=n(9303),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488),i=Object;t.exports=function(t){return i(r(t))}},7593:function(t,e,n){var r=n(6916),i=n(111),s=n(2190),o=n(8173),a=n(2140),u=n(5112),c=TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!i(t)||s(t))return t;var n,u=o(t,l);if(u){if(void 0===e&&(e="default"),n=r(u,t,e),!i(n)||s(n))return n;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,n){var r=n(7593),i=n(2190);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},1694:function(t,e,n){var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},1340:function(t,e,n){var r=n(648),i=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9711:function(t,e,n){var r=n(1702),i=0,s=Math.random(),o=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+s,36)}},3307:function(t,e,n){var r=n(6293);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var r=n(9781),i=n(7293);t.exports=r&&i(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},4811:function(t,e,n){var r=n(7854),i=n(614),s=r.WeakMap;t.exports=i(s)&&/native code/.test(String(s))},6800:function(t,e,n){var r=n(857),i=n(2597),s=n(6061),o=n(3070).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||o(e,t,{value:s.f(t)})}},6061:function(t,e,n){var r=n(5112);e.f=r},5112:function(t,e,n){var r=n(7854),i=n(2309),s=n(2597),o=n(9711),a=n(6293),u=n(3307),c=i("wks"),l=r.Symbol,h=l&&l.for,p=u?l:l&&l.withoutSetter||o;t.exports=function(t){if(!s(c,t)||!a&&"string"!=typeof c[t]){var e="Symbol."+t;c[t]=a&&s(l,t)?l[t]:u&&h?h(e):p(e)}return c[t]}},1361:function(t){t.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},2222:function(t,e,n){"use strict";var r=n(2109),i=n(7293),s=n(3157),o=n(111),a=n(7908),u=n(6244),c=n(7207),l=n(6135),h=n(5417),p=n(1194),f=n(5112),d=n(7392),m=f("isConcatSpreadable"),g=d>=51||!i(function(){var t=[];return t[m]=!1,t.concat()[0]!==t}),v=p("concat"),y=function(t){if(!o(t))return!1;var e=t[m];return void 0!==e?!!e:s(t)};r({target:"Array",proto:!0,arity:1,forced:!g||!v},{concat:function(t){var e,n,r,i,s,o=a(this),p=h(o,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(y(s=-1===e?o:arguments[e]))for(i=u(s),c(f+i),n=0;n<i;n++,f++)n in s&&l(p,f,s[n]);else c(f+1),l(p,f++,s);return p.length=f,p}})},7327:function(t,e,n){"use strict";var r=n(2109),i=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},1038:function(t,e,n){var r=n(2109),i=n(8457);r({target:"Array",stat:!0,forced:!n(7072)(function(t){Array.from(t)})},{from:i})},6699:function(t,e,n){"use strict";var r=n(2109),i=n(1318).includes,s=n(7293),o=n(1223);r({target:"Array",proto:!0,forced:s(function(){return!Array(1).includes()})},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},2772:function(t,e,n){"use strict";var r=n(2109),i=n(1702),s=n(1318).indexOf,o=n(9341),a=i([].indexOf),u=!!a&&1/a([1],1,-0)<0,c=o("indexOf");r({target:"Array",proto:!0,forced:u||!c},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return u?a(this,t,e)||0:s(this,t,e)}})},6992:function(t,e,n){"use strict";var r=n(5656),i=n(1223),s=n(7497),o=n(9909),a=n(3070).f,u=n(1656),c=n(6178),l=n(1913),h=n(9781),p="Array Iterator",f=o.set,d=o.getterFor(p);t.exports=u(Array,"Array",function(t,e){f(this,{type:p,target:r(t),index:0,kind:e})},function(){var t=d(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,c(void 0,!0)):c("keys"==n?r:"values"==n?e[r]:[r,e[r]],!1)},"values");var m=s.Arguments=s.Array;if(i("keys"),i("values"),i("entries"),!l&&h&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(t){}},9600:function(t,e,n){"use strict";var r=n(2109),i=n(1702),s=n(8361),o=n(5656),a=n(9341),u=i([].join),c=s!=Object,l=a("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(t){return u(o(this),void 0===t?",":t)}})},1249:function(t,e,n){"use strict";var r=n(2109),i=n(2092).map;r({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},5827:function(t,e,n){"use strict";var r=n(2109),i=n(3671).left,s=n(9341),o=n(7392),a=n(5268);r({target:"Array",proto:!0,forced:!s("reduce")||!a&&o>79&&o<83},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},7042:function(t,e,n){"use strict";var r=n(2109),i=n(3157),s=n(4411),o=n(111),a=n(1400),u=n(6244),c=n(5656),l=n(6135),h=n(5112),p=n(1194),f=n(206),d=p("slice"),m=h("species"),g=Array,v=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var n,r,h,p=c(this),d=u(p),y=a(t,d),b=a(void 0===e?d:e,d);if(i(p)&&((s(n=p.constructor)&&(n===g||i(n.prototype))||o(n)&&null===(n=n[m]))&&(n=void 0),n===g||void 0===n))return f(p,y,b);for(r=new(void 0===n?g:n)(v(b-y,0)),h=0;y<b;y++,h++)y in p&&l(r,h,p[y]);return r.length=h,r}})},2707:function(t,e,n){"use strict";var r=n(2109),i=n(1702),s=n(9662),o=n(7908),a=n(6244),u=n(5117),c=n(1340),l=n(7293),h=n(4362),p=n(9341),f=n(8886),d=n(256),m=n(7392),g=n(8008),v=[],y=i(v.sort),b=i(v.push),w=l(function(){v.sort(void 0)}),x=l(function(){v.sort(null)}),E=p("sort"),_=!l(function(){if(m)return m<70;if(!(f&&f>3)){if(d)return!0;if(g)return g<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)v.push({k:e+r,v:n})}for(v.sort(function(t,e){return e.v-t.v}),r=0;r<v.length;r++)e=v[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}});r({target:"Array",proto:!0,forced:w||!x||!E||!_},{sort:function(t){void 0!==t&&s(t);var e=o(this);if(_)return void 0===t?y(e):y(e,t);var n,r,i=[],l=a(e);for(r=0;r<l;r++)r in e&&b(i,e[r]);for(h(i,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:c(e)>c(n)?1:-1}}(t)),n=a(i),r=0;r<n;)e[r]=i[r++];for(;r<l;)u(e,r++);return e}})},561:function(t,e,n){"use strict";var r=n(2109),i=n(7908),s=n(1400),o=n(9303),a=n(6244),u=n(3658),c=n(7207),l=n(5417),h=n(6135),p=n(5117),f=n(1194)("splice"),d=Math.max,m=Math.min;r({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var n,r,f,g,v,y,b=i(this),w=a(b),x=s(t,w),E=arguments.length;for(0===E?n=r=0:1===E?(n=0,r=w-x):(n=E-2,r=m(d(o(e),0),w-x)),c(w+n-r),f=l(b,r),g=0;g<r;g++)(v=x+g)in b&&h(f,g,b[v]);if(f.length=r,n<r){for(g=x;g<w-r;g++)y=g+n,(v=g+r)in b?b[y]=b[v]:p(b,y);for(g=w;g>w-r+n;g--)p(b,g-1)}else if(n>r)for(g=w-r;g>x;g--)y=g+n-1,(v=g+r-1)in b?b[y]=b[v]:p(b,y);for(g=0;g<n;g++)b[g+x]=arguments[g+2];return u(b,w-r+n),f}})},6078:function(t,e,n){var r=n(2597),i=n(8052),s=n(8709),o=n(5112)("toPrimitive"),a=Date.prototype;r(a,o)||i(a,o,s)},8309:function(t,e,n){var r=n(9781),i=n(6530).EXISTS,s=n(1702),o=n(3070).f,a=Function.prototype,u=s(a.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=s(c.exec);r&&!i&&o(a,"name",{configurable:!0,get:function(){try{return l(c,u(this))[1]}catch(t){return""}}})},8862:function(t,e,n){var r=n(2109),i=n(5005),s=n(2104),o=n(6916),a=n(1702),u=n(7293),c=n(3157),l=n(614),h=n(111),p=n(2190),f=n(206),d=n(6293),m=i("JSON","stringify"),g=a(/./.exec),v=a("".charAt),y=a("".charCodeAt),b=a("".replace),w=a(1..toString),x=/[\uD800-\uDFFF]/g,E=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,S=!d||u(function(){var t=i("Symbol")();return"[null]"!=m([t])||"{}"!=m({a:t})||"{}"!=m(Object(t))}),C=u(function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")}),A=function(t,e){var n=f(arguments),r=e;if((h(e)||void 0!==t)&&!p(t))return c(e)||(e=function(t,e){if(l(r)&&(e=o(r,this,t,e)),!p(e))return e}),n[1]=e,s(m,null,n)},I=function(t,e,n){var r=v(n,e-1),i=v(n,e+1);return g(E,t)&&!g(_,i)||g(_,t)&&!g(E,r)?"\\u"+w(y(t,0),16):t};m&&r({target:"JSON",stat:!0,arity:3,forced:S||C},{stringify:function(t,e,n){var r=f(arguments),i=s(S?A:m,null,r);return C&&"string"==typeof i?b(i,x,I):i}})},9653:function(t,e,n){"use strict";var r=n(9781),i=n(7854),s=n(1702),o=n(4705),a=n(8052),u=n(2597),c=n(9587),l=n(7976),h=n(2190),p=n(7593),f=n(7293),d=n(8006).f,m=n(1236).f,g=n(3070).f,v=n(863),y=n(3111).trim,b="Number",w=i.Number,x=w.prototype,E=i.TypeError,_=s("".slice),S=s("".charCodeAt),C=function(t){var e=p(t,"number");return"bigint"==typeof e?e:A(e)},A=function(t){var e,n,r,i,s,o,a,u,c=p(t,"number");if(h(c))throw E("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=y(c),43===(e=S(c,0))||45===e){if(88===(n=S(c,2))||120===n)return NaN}else if(48===e){switch(S(c,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(o=(s=_(c,2)).length,a=0;a<o;a++)if((u=S(s,a))<48||u>i)return NaN;return parseInt(s,r)}return+c};if(o(b,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var I,T=function(t){var e=arguments.length<1?0:w(C(t)),n=this;return l(x,n)&&f(function(){v(n)})?c(Object(e),n,T):e},k=r?d(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),P=0;k.length>P;P++)u(w,I=k[P])&&!u(T,I)&&g(T,I,m(w,I));T.prototype=x,x.constructor=T,a(i,b,T,{constructor:!0})}},3161:function(t,e,n){n(2109)({target:"Number",stat:!0},{isInteger:n(5988)})},9601:function(t,e,n){var r=n(2109),i=n(1574);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},9595:function(t,e,n){"use strict";var r=n(2109),i=n(9781),s=n(9026),o=n(9662),a=n(7908),u=n(3070);i&&r({target:"Object",proto:!0,forced:s},{__defineGetter__:function(t,e){u.f(a(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},5003:function(t,e,n){var r=n(2109),i=n(7293),s=n(5656),o=n(1236).f,a=n(9781),u=i(function(){o(1)});r({target:"Object",stat:!0,forced:!a||u,sham:!a},{getOwnPropertyDescriptor:function(t,e){return o(s(t),e)}})},9337:function(t,e,n){var r=n(2109),i=n(9781),s=n(3887),o=n(5656),a=n(1236),u=n(6135);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),i=a.f,c=s(r),l={},h=0;c.length>h;)void 0!==(n=i(r,e=c[h++]))&&u(l,e,n);return l}})},6210:function(t,e,n){var r=n(2109),i=n(7293),s=n(1156).f;r({target:"Object",stat:!0,forced:i(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:s})},9660:function(t,e,n){var r=n(2109),i=n(6293),s=n(7293),o=n(5181),a=n(7908);r({target:"Object",stat:!0,forced:!i||s(function(){o.f(1)})},{getOwnPropertySymbols:function(t){var e=o.f;return e?e(a(t)):[]}})},7941:function(t,e,n){var r=n(2109),i=n(7908),s=n(1956);r({target:"Object",stat:!0,forced:n(7293)(function(){s(1)})},{keys:function(t){return s(i(t))}})},1539:function(t,e,n){var r=n(1694),i=n(8052),s=n(288);r||i(Object.prototype,"toString",s,{unsafe:!0})},4603:function(t,e,n){var r=n(9781),i=n(7854),s=n(1702),o=n(4705),a=n(9587),u=n(8880),c=n(8006).f,l=n(7976),h=n(7850),p=n(1340),f=n(4706),d=n(2999),m=n(2626),g=n(8052),v=n(7293),y=n(2597),b=n(9909).enforce,w=n(6340),x=n(5112),E=n(9441),_=n(7168),S=x("match"),C=i.RegExp,A=C.prototype,I=i.SyntaxError,T=s(A.exec),k=s("".charAt),P=s("".replace),R=s("".indexOf),D=s("".slice),F=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,B=/a/g,O=/a/g,N=new C(B)!==B,M=d.MISSED_STICKY,L=d.UNSUPPORTED_Y;if(o("RegExp",r&&(!N||M||E||_||v(function(){return O[S]=!1,C(B)!=B||C(O)==O||"/a/i"!=C(B,"i")})))){for(var V=function(t,e){var n,r,i,s,o,c,d=l(A,this),m=h(t),g=void 0===e,v=[],w=t;if(!d&&m&&g&&t.constructor===V)return t;if((m||l(A,t))&&(t=t.source,g&&(e=f(w))),t=void 0===t?"":p(t),e=void 0===e?"":p(e),w=t,E&&"dotAll"in B&&(r=!!e&&R(e,"s")>-1)&&(e=P(e,/s/g,"")),n=e,M&&"sticky"in B&&(i=!!e&&R(e,"y")>-1)&&L&&(e=P(e,/y/g,"")),_&&(t=(s=function(t){for(var e,n=t.length,r=0,i="",s=[],o={},a=!1,u=!1,c=0,l="";r<=n;r++){if("\\"===(e=k(t,r)))e+=k(t,++r);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:T(F,D(t,r+1))&&(r+=2,u=!0),i+=e,c++;continue;case">"===e&&u:if(""===l||y(o,l))throw new I("Invalid capture group name");o[l]=!0,s[s.length]=[l,c],u=!1,l="";continue}u?l+=e:i+=e}return[i,s]}(t))[0],v=s[1]),o=a(C(t,e),d?this:A,V),(r||i||v.length)&&(c=b(o),r&&(c.dotAll=!0,c.raw=V(function(t){for(var e,n=t.length,r=0,i="",s=!1;r<=n;r++)"\\"!==(e=k(t,r))?s||"."!==e?("["===e?s=!0:"]"===e&&(s=!1),i+=e):i+="[\\s\\S]":i+=e+k(t,++r);return i}(t),n)),i&&(c.sticky=!0),v.length&&(c.groups=v)),t!==w)try{u(o,"source",""===w?"(?:)":w)}catch(t){}return o},j=c(C),U=0;j.length>U;)m(V,C,j[U++]);A.constructor=V,V.prototype=A,g(i,"RegExp",V,{constructor:!0})}w("RegExp")},4916:function(t,e,n){"use strict";var r=n(2109),i=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},9714:function(t,e,n){"use strict";var r=n(6530).PROPER,i=n(8052),s=n(9670),o=n(1340),a=n(7293),u=n(4706),c="toString",l=RegExp.prototype.toString;(a(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})||r&&l.name!=c)&&i(RegExp.prototype,c,function(){var t=s(this);return"/"+o(t.source)+"/"+o(u(t))},{unsafe:!0})},2023:function(t,e,n){"use strict";var r=n(2109),i=n(1702),s=n(3929),o=n(4488),a=n(1340),u=n(4964),c=i("".indexOf);r({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~c(a(o(this)),a(s(t)),arguments.length>1?arguments[1]:void 0)}})},8783:function(t,e,n){"use strict";var r=n(8710).charAt,i=n(1340),s=n(9909),o=n(1656),a=n(6178),u="String Iterator",c=s.set,l=s.getterFor(u);o(String,"String",function(t){c(this,{type:u,string:i(t),index:0})},function(){var t,e=l(this),n=e.string,i=e.index;return i>=n.length?a(void 0,!0):(t=r(n,i),e.index+=t.length,a(t,!1))})},6373:function(t,e,n){"use strict";var r=n(2109),i=n(6916),s=n(1702),o=n(3061),a=n(6178),u=n(4488),c=n(7466),l=n(1340),h=n(9670),p=n(8554),f=n(4326),d=n(7850),m=n(4706),g=n(8173),v=n(8052),y=n(7293),b=n(5112),w=n(6707),x=n(1530),E=n(7651),_=n(9909),S=n(1913),C=b("matchAll"),A="RegExp String Iterator",I=_.set,T=_.getterFor(A),k=RegExp.prototype,P=TypeError,R=s("".indexOf),D=s("".matchAll),F=!!D&&!y(function(){D("a",/./)}),B=o(function(t,e,n,r){I(this,{type:A,regexp:t,string:e,global:n,unicode:r,done:!1})},"RegExp String",function(){var t=T(this);if(t.done)return a(void 0,!0);var e=t.regexp,n=t.string,r=E(e,n);return null===r?(t.done=!0,a(void 0,!0)):t.global?(""===l(r[0])&&(e.lastIndex=x(n,c(e.lastIndex),t.unicode)),a(r,!1)):(t.done=!0,a(r,!1))}),O=function(t){var e,n,r,i=h(this),s=l(t),o=w(i,RegExp),a=l(m(i));return e=new o(o===RegExp?i.source:i,a),n=!!~R(a,"g"),r=!!~R(a,"u"),e.lastIndex=c(i.lastIndex),new B(e,s,n,r)};r({target:"String",proto:!0,forced:F},{matchAll:function(t){var e,n,r,s,o=u(this);if(p(t)){if(F)return D(o,t)}else{if(d(t)&&(e=l(u(m(t))),!~R(e,"g")))throw P("`.matchAll` does not allow non-global regexes");if(F)return D(o,t);if(void 0===(r=g(t,C))&&S&&"RegExp"==f(t)&&(r=O),r)return i(r,t,o)}return n=l(o),s=new RegExp(t,"g"),S?i(O,s,n):s[C](n)}}),S||C in k||v(k,C,O)},4723:function(t,e,n){"use strict";var r=n(6916),i=n(7007),s=n(9670),o=n(8554),a=n(7466),u=n(1340),c=n(4488),l=n(8173),h=n(1530),p=n(7651);i("match",function(t,e,n){return[function(e){var n=c(this),i=o(e)?void 0:l(e,t);return i?r(i,e,n):new RegExp(e)[t](u(n))},function(t){var r=s(this),i=u(t),o=n(e,r,i);if(o.done)return o.value;if(!r.global)return p(r,i);var c=r.unicode;r.lastIndex=0;for(var l,f=[],d=0;null!==(l=p(r,i));){var m=u(l[0]);f[d]=m,""===m&&(r.lastIndex=h(i,a(r.lastIndex),c)),d++}return 0===d?null:f}]})},5306:function(t,e,n){"use strict";var r=n(2104),i=n(6916),s=n(1702),o=n(7007),a=n(7293),u=n(9670),c=n(614),l=n(8554),h=n(9303),p=n(7466),f=n(1340),d=n(4488),m=n(1530),g=n(8173),v=n(647),y=n(7651),b=n(5112)("replace"),w=Math.max,x=Math.min,E=s([].concat),_=s([].push),S=s("".indexOf),C=s("".slice),A="$0"==="a".replace(/./,"$0"),I=!!/./[b]&&""===/./[b]("a","$0");o("replace",function(t,e,n){var s=I?"$":"$0";return[function(t,n){var r=d(this),s=l(t)?void 0:g(t,b);return s?i(s,t,r,n):i(e,f(r),t,n)},function(t,i){var o=u(this),a=f(t);if("string"==typeof i&&-1===S(i,s)&&-1===S(i,"$<")){var l=n(e,o,a,i);if(l.done)return l.value}var d=c(i);d||(i=f(i));var g=o.global;if(g){var b=o.unicode;o.lastIndex=0}for(var A=[];;){var I=y(o,a);if(null===I)break;if(_(A,I),!g)break;""===f(I[0])&&(o.lastIndex=m(a,p(o.lastIndex),b))}for(var T,k="",P=0,R=0;R<A.length;R++){for(var D=f((I=A[R])[0]),F=w(x(h(I.index),a.length),0),B=[],O=1;O<I.length;O++)_(B,void 0===(T=I[O])?T:String(T));var N=I.groups;if(d){var M=E([D],B,F,a);void 0!==N&&_(M,N);var L=f(r(i,void 0,M))}else L=v(D,a,F,B,N,i);F>=P&&(k+=C(a,P,F)+L,P=F+D.length)}return k+C(a,P)}]},!!a(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})||!A||I)},3123:function(t,e,n){"use strict";var r=n(2104),i=n(6916),s=n(1702),o=n(7007),a=n(9670),u=n(8554),c=n(7850),l=n(4488),h=n(6707),p=n(1530),f=n(7466),d=n(1340),m=n(8173),g=n(1589),v=n(7651),y=n(2261),b=n(2999),w=n(7293),x=b.UNSUPPORTED_Y,E=4294967295,_=Math.min,S=[].push,C=s(/./.exec),A=s(S),I=s("".slice);o("split",function(t,e,n){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var s=d(l(this)),o=void 0===n?E:n>>>0;if(0===o)return[];if(void 0===t)return[s];if(!c(t))return i(e,s,t,o);for(var a,u,h,p=[],f=0,m=new RegExp(t.source,(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":"")+"g");(a=i(y,m,s))&&!((u=m.lastIndex)>f&&(A(p,I(s,f,a.index)),a.length>1&&a.index<s.length&&r(S,p,g(a,1)),h=a[0].length,f=u,p.length>=o));)m.lastIndex===a.index&&m.lastIndex++;return f===s.length?!h&&C(m,"")||A(p,""):A(p,I(s,f)),p.length>o?g(p,0,o):p}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:i(e,this,t,n)}:e,[function(e,n){var r=l(this),o=u(e)?void 0:m(e,t);return o?i(o,e,r,n):i(s,d(r),e,n)},function(t,r){var i=a(this),o=d(t),u=n(s,i,o,r,s!==e);if(u.done)return u.value;var c=h(i,RegExp),l=i.unicode,m=new c(x?"^(?:"+i.source+")":i,(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(x?"g":"y")),g=void 0===r?E:r>>>0;if(0===g)return[];if(0===o.length)return null===v(m,o)?[o]:[];for(var y=0,b=0,w=[];b<o.length;){m.lastIndex=x?0:b;var S,C=v(m,x?I(o,b):o);if(null===C||(S=_(f(m.lastIndex+(x?b:0)),o.length))===y)b=p(o,b,l);else{if(A(w,I(o,y,b)),w.length===g)return w;for(var T=1;T<=C.length-1;T++)if(A(w,C[T]),w.length===g)return w;b=y=S}}return A(w,I(o,y)),w}]},!!w(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),x)},3210:function(t,e,n){"use strict";var r=n(2109),i=n(3111).trim;r({target:"String",proto:!0,forced:n(6091)("trim")},{trim:function(){return i(this)}})},4032:function(t,e,n){"use strict";var r=n(2109),i=n(7854),s=n(6916),o=n(1702),a=n(1913),u=n(9781),c=n(6293),l=n(7293),h=n(2597),p=n(7976),f=n(9670),d=n(5656),m=n(4948),g=n(1340),v=n(9114),y=n(30),b=n(1956),w=n(8006),x=n(1156),E=n(5181),_=n(1236),S=n(3070),C=n(6048),A=n(5296),I=n(8052),T=n(2309),k=n(6200),P=n(3501),R=n(9711),D=n(5112),F=n(6061),B=n(6800),O=n(6532),N=n(8003),M=n(9909),L=n(2092).forEach,V=k("hidden"),j="Symbol",U=M.set,H=M.getterFor(j),z=Object.prototype,K=i.Symbol,q=K&&K.prototype,W=i.TypeError,G=i.QObject,$=_.f,X=S.f,Q=x.f,Y=A.f,Z=o([].push),J=T("symbols"),tt=T("op-symbols"),et=T("wks"),nt=!G||!G.prototype||!G.prototype.findChild,rt=u&&l(function(){return 7!=y(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=$(z,e);r&&delete z[e],X(t,e,n),r&&t!==z&&X(z,e,r)}:X,it=function(t,e){var n=J[t]=y(q);return U(n,{type:j,tag:t,description:e}),u||(n.description=e),n},st=function(t,e,n){t===z&&st(tt,e,n),f(t);var r=m(e);return f(n),h(J,r)?(n.enumerable?(h(t,V)&&t[V][r]&&(t[V][r]=!1),n=y(n,{enumerable:v(0,!1)})):(h(t,V)||X(t,V,v(1,{})),t[V][r]=!0),rt(t,r,n)):X(t,r,n)},ot=function(t,e){f(t);var n=d(e),r=b(n).concat(lt(n));return L(r,function(e){u&&!s(at,n,e)||st(t,e,n[e])}),t},at=function(t){var e=m(t),n=s(Y,this,e);return!(this===z&&h(J,e)&&!h(tt,e))&&(!(n||!h(this,e)||!h(J,e)||h(this,V)&&this[V][e])||n)},ut=function(t,e){var n=d(t),r=m(e);if(n!==z||!h(J,r)||h(tt,r)){var i=$(n,r);return!i||!h(J,r)||h(n,V)&&n[V][r]||(i.enumerable=!0),i}},ct=function(t){var e=Q(d(t)),n=[];return L(e,function(t){h(J,t)||h(P,t)||Z(n,t)}),n},lt=function(t){var e=t===z,n=Q(e?tt:d(t)),r=[];return L(n,function(t){!h(J,t)||e&&!h(z,t)||Z(r,J[t])}),r};c||(I(q=(K=function(){if(p(q,this))throw W("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,e=R(t),n=function(t){this===z&&s(n,tt,t),h(this,V)&&h(this[V],e)&&(this[V][e]=!1),rt(this,e,v(1,t))};return u&&nt&&rt(z,e,{configurable:!0,set:n}),it(e,t)}).prototype,"toString",function(){return H(this).tag}),I(K,"withoutSetter",function(t){return it(R(t),t)}),A.f=at,S.f=st,C.f=ot,_.f=ut,w.f=x.f=ct,E.f=lt,F.f=function(t){return it(D(t),t)},u&&(X(q,"description",{configurable:!0,get:function(){return H(this).description}}),a||I(z,"propertyIsEnumerable",at,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:K}),L(b(et),function(t){B(t)}),r({target:j,stat:!0,forced:!c},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!u},{create:function(t,e){return void 0===e?y(t):ot(y(t),e)},defineProperty:st,defineProperties:ot,getOwnPropertyDescriptor:ut}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ct}),O(),N(K,j),P[V]=!0},1817:function(t,e,n){"use strict";var r=n(2109),i=n(9781),s=n(7854),o=n(1702),a=n(2597),u=n(614),c=n(7976),l=n(1340),h=n(3070).f,p=n(9920),f=s.Symbol,d=f&&f.prototype;if(i&&u(f)&&(!("description"in d)||void 0!==f().description)){var m={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=c(d,this)?new f(t):void 0===t?f():f(t);return""===t&&(m[e]=!0),e};p(g,f),g.prototype=d,d.constructor=g;var v="Symbol(test)"==String(f("test")),y=o(d.valueOf),b=o(d.toString),w=/^Symbol\((.*)\)[^)]+$/,x=o("".replace),E=o("".slice);h(d,"description",{configurable:!0,get:function(){var t=y(this);if(a(m,t))return"";var e=b(t),n=v?E(e,7,-1):x(e,w,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:g})}},763:function(t,e,n){var r=n(2109),i=n(5005),s=n(2597),o=n(1340),a=n(2309),u=n(2015),c=a("string-to-symbol-registry"),l=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!u},{for:function(t){var e=o(t);if(s(c,e))return c[e];var n=i("Symbol")(e);return c[e]=n,l[n]=e,n}})},2165:function(t,e,n){n(6800)("iterator")},2526:function(t,e,n){n(4032),n(763),n(6620),n(8862),n(9660)},6620:function(t,e,n){var r=n(2109),i=n(2597),s=n(2190),o=n(6330),a=n(2309),u=n(2015),c=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!u},{keyFor:function(t){if(!s(t))throw TypeError(o(t)+" is not a symbol");if(i(c,t))return c[t]}})},6649:function(t,e,n){var r=n(6800),i=n(6532);r("toPrimitive"),i()},3728:function(t,e,n){n(6373)},4747:function(t,e,n){var r=n(7854),i=n(8324),s=n(8509),o=n(8533),a=n(8880),u=function(t){if(t&&t.forEach!==o)try{a(t,"forEach",o)}catch(e){t.forEach=o}};for(var c in i)i[c]&&u(r[c]&&r[c].prototype);u(s)},3948:function(t,e,n){var r=n(7854),i=n(8324),s=n(8509),o=n(6992),a=n(8880),u=n(5112),c=u("iterator"),l=u("toStringTag"),h=o.values,p=function(t,e){if(t){if(t[c]!==h)try{a(t,c,h)}catch(e){t[c]=h}if(t[l]||a(t,l,e),i[e])for(var n in o)if(t[n]!==o[n])try{a(t,n,o[n])}catch(e){t[n]=o[n]}}};for(var f in i)p(r[f]&&r[f].prototype,f);p(s,"DOMTokenList")}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return function(){"use strict";function t(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function a(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===s(e)?e:String(e)}n.r(r),n.d(r,{SimpleKeyboard:function(){return A},default:function(){return I}}),n(3210),n(4916),n(5306),n(2772),n(8309),n(3123),n(1539),n(9714),n(561),n(9600),n(9595),n(7042),"undefined"==typeof Element||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"undefined"!=typeof self&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(t){if("Element"in t){var e="classList",n=t.Element.prototype,r=Object,i=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},o=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new o("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new o("INVALID_CHARACTER_ERR","The token must not contain space characters.");return s.call(t,e)},u=function(t){for(var e=i.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],r=0,s=n.length;r<s;r++)this.push(n[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=u.prototype=[],l=function(){return new u(this)};if(o.prototype=Error.prototype,c.item=function(t){return this[t]||null},c.contains=function(t){return~a(this,t+"")},c.add=function(){var t,e=arguments,n=0,r=e.length,i=!1;do{~a(this,t=e[n]+"")||(this.push(t),i=!0)}while(++n<r);i&&this._updateClassName()},c.remove=function(){var t,e,n=arguments,r=0,i=n.length,s=!1;do{for(e=a(this,t=n[r]+"");~e;)this.splice(e,1),s=!0,e=a(this,t)}while(++r<i);s&&this._updateClassName()},c.toggle=function(t,e){var n=this.contains(t),r=n?!0!==e&&"remove":!1!==e&&"add";return r&&this[r](t),!0===e||!1===e?e:!n},c.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},c.toString=function(){return this.join(" ")},r.defineProperty){var h={get:l,enumerable:!0,configurable:!0};try{r.defineProperty(n,e,h)}catch(t){void 0!==t.number&&-2146823252!==t.number||(h.enumerable=!1,r.defineProperty(n,e,h))}}else r.prototype.__defineGetter__&&n.__defineGetter__(e,l)}}(self),function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)e.call(this,t=arguments[n])}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),r=n.indexOf(t+"");~r&&(n=n.slice(r),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}()),n(7327),n(2222),n(7941),n(4603),n(3728),n(2707),n(6699),n(2023),n(4747),n(9601),n(1249),n(1038),n(8783),n(6649),n(6078),n(2526),n(1817),n(9653),n(5003),n(9337),n(2165),n(6992),n(3948),n(3161),n(4723),n(5827),n(6210);var c=function(){function n(t){var e=t.getOptions,r=t.getCaretPosition,i=t.getCaretPositionEnd,s=t.dispatch;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),a(this,"getOptions",void 0),a(this,"getCaretPosition",void 0),a(this,"getCaretPositionEnd",void 0),a(this,"dispatch",void 0),a(this,"maxLengthReached",void 0),a(this,"isStandardButton",function(t){return t&&!("{"===t[0]&&"}"===t[t.length-1])}),this.getOptions=e,this.getCaretPosition=r,this.getCaretPositionEnd=i,this.dispatch=s,n.bindMethods(n,this)}var r,i,u;return r=n,u=[{key:"bindMethods",value:function(t,n){var r,i=function(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=e(t))){r&&(t=r);var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(Object.getOwnPropertyNames(t.prototype));try{for(i.s();!(r=i.n()).done;){var s=r.value;"constructor"===s||"bindMethods"===s||(n[s]=n[s].bind(n))}}catch(t){i.e(t)}finally{i.f()}}}],(i=[{key:"getButtonType",value:function(t){return t.includes("{")&&t.includes("}")&&"{//}"!==t?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(t){var e=this.getButtonType(t),n=t.replace("{","").replace("}",""),r="";return"standardBtn"!==e&&(r=" hg-button-".concat(n)),"hg-".concat(e).concat(r)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"\u2191","{arrowleft}":"\u2190","{arrowdown}":"\u2193","{arrowright}":"\u2192","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(t,e,n){return(e=n?Object.assign({},this.getDefaultDiplay(),e):e||this.getDefaultDiplay())[t]||t}},{key:"getUpdatedInput",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=this.getOptions(),o=[n,r,i],a=e;return("{bksp}"===t||"{backspace}"===t)&&a.length>0?a=this.removeAt.apply(this,[a].concat(o)):("{delete}"===t||"{forwarddelete}"===t)&&a.length>0?a=this.removeForwardsAt.apply(this,[a].concat(o)):"{space}"===t?a=this.addStringAt.apply(this,[a," "].concat(o)):"{tab}"!==t||"boolean"==typeof s.tabCharOnTab&&!1===s.tabCharOnTab?"{enter}"!==t&&"{numpadenter}"!==t||!s.newLineOnEnter?t.includes("numpad")&&Number.isInteger(Number(t[t.length-2]))?a=this.addStringAt.apply(this,[a,t[t.length-2]].concat(o)):"{numpaddivide}"===t?a=this.addStringAt.apply(this,[a,"/"].concat(o)):"{numpadmultiply}"===t?a=this.addStringAt.apply(this,[a,"*"].concat(o)):"{numpadsubtract}"===t?a=this.addStringAt.apply(this,[a,"-"].concat(o)):"{numpadadd}"===t?a=this.addStringAt.apply(this,[a,"+"].concat(o)):"{numpaddecimal}"===t?a=this.addStringAt.apply(this,[a,"."].concat(o)):"{"===t||"}"===t?a=this.addStringAt.apply(this,[a,t].concat(o)):t.includes("{")||t.includes("}")||(a=this.addStringAt.apply(this,[a,t].concat(o))):a=this.addStringAt.apply(this,[a,"\n"].concat(o)):a=this.addStringAt.apply(this,[a,"\t"].concat(o)),a}},{key:"updateCaretPos",value:function(t){var e=this.updateCaretPosAction(t,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);this.dispatch(function(t){t.setCaretPosition(e)})}},{key:"updateCaretPosAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getOptions(),r=this.getCaretPosition();return null!=r&&(e?r>0&&(r-=t):r+=t),n.debug&&console.log("Caret at:",r),r}},{key:"addStringAt",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return r||0===r?(n=[t.slice(0,r),e,t.slice(i)].join(""),this.isMaxLengthReached()||s&&this.updateCaretPos(e.length)):n=t+e,n}},{key:"removeAt",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0===n&&0===r)return t;if(n===r){var s=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;n&&n>=0?t.substring(n-2,n).match(s)?(e=t.substr(0,n-2)+t.substr(n),i&&this.updateCaretPos(2,!0)):(e=t.substr(0,n-1)+t.substr(n),i&&this.updateCaretPos(1,!0)):t.slice(-2).match(s)?(e=t.slice(0,-2),i&&this.updateCaretPos(2,!0)):(e=t.slice(0,-1),i&&this.updateCaretPos(1,!0))}else e=t.slice(0,n)+t.slice(r),i&&this.dispatch(function(t){t.setCaretPosition(n)});return e}},{key:"removeForwardsAt",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null==t||!t.length||null===n)return t;if(n===r){var s=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;e=t.substring(n,n+2).match(s)?t.substr(0,n)+t.substr(n+2):t.substr(0,n)+t.substr(n+1)}else e=t.slice(0,n)+t.slice(r),i&&this.dispatch(function(t){t.setCaretPosition(n)});return e}},{key:"handleMaxLength",value:function(t,e){var n=this.getOptions(),r=n.maxLength,i=e.length-1>=r;if(e.length<=t[n.inputName||"default"].length)return!1;if(Number.isInteger(r))return n.debug&&console.log("maxLength (num) reached:",i),i?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if("object"===s(r)){var o=e.length-1>=r[n.inputName||"default"];return n.debug&&console.log("maxLength (obj) reached:",o),o?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return Boolean(this.maxLengthReached)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(t){return t?t.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(t,e){return e.length?t+e[0].toUpperCase()+e.slice(1):t}):""}},{key:"chunkArray",value:function(e,n){return t(Array(Math.ceil(e.length/n))).map(function(t,r){return e.slice(n*r,n+n*r)})}},{key:"escapeRegex",value:function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(t,e){var n=t,r=e.indexOf("\u202b");return r<t&&-1!=r&&n--,e.indexOf("\u202c")<t&&-1!=r&&n--,n<0?0:n}}])&&o(r.prototype,i),u&&o(r,u),Object.defineProperty(r,"prototype",{writable:!1}),n}();a(c,"noop",function(){});var l=c;function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e,n){return(e=f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){var e=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===h(e)?e:String(e)}var d=function(){function t(e){var n=e.dispatch,r=e.getOptions;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"getOptions",void 0),p(this,"dispatch",void 0),this.dispatch=n,this.getOptions=r,l.bindMethods(t,this)}var e,n;return e=t,(n=[{key:"handleHighlightKeyDown",value:function(t){var e=this.getOptions(),n=this.getSimpleKeyboardLayoutKey(t);this.dispatch(function(r){var i,s,o=r.getButtonElement(n),a=r.getButtonElement("{".concat(n,"}"));if(o)i=o,s=n;else{if(!a)return;i=a,s="{".concat(n,"}")}i&&(i.style.background=e.physicalKeyboardHighlightBgColor||"#dadce4",i.style.color=e.physicalKeyboardHighlightTextColor||"black",e.physicalKeyboardHighlightPress&&(e.physicalKeyboardHighlightPressUsePointerEvents?i.onpointerdown():e.physicalKeyboardHighlightPressUseClick?i.click():r.handleButtonClicked(s,t)))})}},{key:"handleHighlightKeyUp",value:function(t){var e=this.getOptions(),n=this.getSimpleKeyboardLayoutKey(t);this.dispatch(function(t){var r=t.getButtonElement(n)||t.getButtonElement("{".concat(n,"}"));r&&r.removeAttribute&&(r.removeAttribute("style"),e.physicalKeyboardHighlightPressUsePointerEvents&&r.onpointerup())})}},{key:"getSimpleKeyboardLayoutKey",value:function(t){var e,n,r=t.code||t.key||this.keyCodeToKey(null==t?void 0:t.keyCode);return(n=null!=r&&r.includes("Numpad")||null!=r&&r.includes("Shift")||null!=r&&r.includes("Space")||null!=r&&r.includes("Backspace")||null!=r&&r.includes("Control")||null!=r&&r.includes("Alt")||null!=r&&r.includes("Meta")?t.code||"":t.key||this.keyCodeToKey(null==t?void 0:t.keyCode)||"").length>1?null===(e=n)||void 0===e?void 0:e.toLowerCase():n}},{key:"keyCodeToKey",value:function(t){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}var y=function(){function t(e){var n=e.utilities;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,"utilities",void 0),g(this,"candidateBoxElement",void 0),g(this,"pageIndex",0),g(this,"pageSize",void 0),this.utilities=n,l.bindMethods(t,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var e,n;return e=t,(n=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(t){var e=this,n=t.candidateValue,r=t.targetElement,i=t.onSelect;if(n&&n.length){var s=this.utilities.chunkArray(n.split(" "),this.pageSize);this.renderPage({candidateListPages:s,targetElement:r,pageIndex:this.pageIndex,nbPages:s.length,onItemSelected:function(t,n){i(t,n),e.destroy()}})}}},{key:"renderPage",value:function(t){var e,n=this,r=t.candidateListPages,i=t.targetElement,s=t.pageIndex,o=t.nbPages,a=t.onItemSelected;null===(e=this.candidateBoxElement)||void 0===e||e.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var u=document.createElement("ul");u.className="hg-candidate-box-list",r[s].forEach(function(t){var e=document.createElement("li"),n=function(){var t=new MouseEvent("click");return Object.defineProperty(t,"target",{value:e}),t};e.className="hg-candidate-box-list-item",e.textContent=t,e.onclick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n();return a(t,e)},u.appendChild(e)});var c=s>0,l=document.createElement("div");l.classList.add("hg-candidate-box-prev"),c&&l.classList.add("hg-candidate-box-btn-active"),l.onclick=function(){c&&n.renderPage({candidateListPages:r,targetElement:i,pageIndex:s-1,nbPages:o,onItemSelected:a})},this.candidateBoxElement.appendChild(l),this.candidateBoxElement.appendChild(u);var h=s<o-1,p=document.createElement("div");p.classList.add("hg-candidate-box-next"),h&&p.classList.add("hg-candidate-box-btn-active"),p.onclick=function(){h&&n.renderPage({candidateListPages:r,targetElement:i,pageIndex:s+1,nbPages:o,onItemSelected:a})},this.candidateBoxElement.appendChild(p),i.prepend(this.candidateBoxElement)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _(t,e,n){return(e=S(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t){var e=function(t,e){if("object"!==x(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===x(e)?e:String(e)}var C=function(){function t(e,n){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,"input",void 0),_(this,"options",void 0),_(this,"utilities",void 0),_(this,"caretPosition",void 0),_(this,"caretPositionEnd",void 0),_(this,"keyboardDOM",void 0),_(this,"keyboardPluginClasses",void 0),_(this,"keyboardDOMClass",void 0),_(this,"buttonElements",void 0),_(this,"currentInstanceName",void 0),_(this,"allKeyboardInstances",void 0),_(this,"keyboardInstanceNames",void 0),_(this,"isFirstKeyboardInstance",void 0),_(this,"physicalKeyboard",void 0),_(this,"modules",void 0),_(this,"activeButtonClass",void 0),_(this,"holdInteractionTimeout",void 0),_(this,"holdTimeout",void 0),_(this,"isMouseHold",void 0),_(this,"initialized",void 0),_(this,"candidateBox",void 0),_(this,"keyboardRowsDOM",void 0),_(this,"defaultName","default"),_(this,"activeInputElement",null),_(this,"handleParams",function(t,e){var n,r,i;if("string"==typeof t)n=t.split(".").join(""),r=document.querySelector(".".concat(n)),i=e;else if(t instanceof HTMLDivElement){if(!t.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");n=t.className.split(" ")[0],r=t,i=e}else n="simple-keyboard",r=document.querySelector(".".concat(n)),i=t;return{keyboardDOMClass:n,keyboardDOM:r,options:i}}),_(this,"getOptions",function(){return r.options}),_(this,"getCaretPosition",function(){return r.caretPosition}),_(this,"getCaretPositionEnd",function(){return r.caretPositionEnd}),_(this,"registerModule",function(t,e){r.modules[t]||(r.modules[t]={}),e(r.modules[t])}),_(this,"getKeyboardClassString",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return[r.keyboardDOMClass].concat(e).filter(function(t){return!!t}).join(" ")}),"undefined"!=typeof window){var i=this.handleParams(e,n),s=i.keyboardDOMClass,o=i.keyboardDOM,a=i.options,u=void 0===a?{}:a;this.utilities=new l({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=o,this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach(function(e){_(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},u),this.keyboardPluginClasses="",l.bindMethods(t,this);var c=this.options.inputName,h=void 0===c?this.defaultName:c;if(this.input={},this.input[h]="",this.keyboardDOMClass=s,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new d({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new y({utilities:this.utilities}):null,!this.keyboardDOM)throw console.warn('".'.concat(s,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var e,n;return e=t,(n=[{key:"setCaretPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.caretPosition=t,this.caretPositionEnd=e}},{key:"getInputCandidates",value:function(t){var e=this,n=this.options,r=n.layoutCandidates,i=n.layoutCandidatesCaseSensitiveMatch;if(!r||"object"!==x(r))return{};var s=Object.keys(r).filter(function(n){var r=t.substring(0,e.getCaretPositionEnd()||0)||t,s=new RegExp("".concat(e.utilities.escapeRegex(n),"$"),i?"g":"gi");return!!b(r.matchAll(s)).length});if(s.length>1){var o=s.sort(function(t,e){return e.length-t.length})[0];return{candidateKey:o,candidateValue:r[o]}}if(s.length){var a=s[0];return{candidateKey:a,candidateValue:r[a]}}return{}}},{key:"showCandidatesBox",value:function(t,e,n){var r=this;this.candidateBox&&this.candidateBox.show({candidateValue:e,targetElement:n,onSelect:function(e,n){var i=r.options,s=i.layoutCandidatesCaseSensitiveMatch,o=e;i.disableCandidateNormalization||(o=e.normalize("NFD"));var a=r.getInput(r.options.inputName,!0),u=r.getCaretPositionEnd()||0,c=a.substring(0,u||0)||a,l=new RegExp("".concat(r.utilities.escapeRegex(t),"$"),s?"g":"gi"),h=c.replace(l,o),p=a.replace(c,h),f=(u||a.length)+(h.length-c.length);f<0&&(f=0),r.setInput(p,r.options.inputName,!0),r.setCaretPosition(f),"function"==typeof r.options.onChange&&r.options.onChange(r.getInput(r.options.inputName,!0),n),"function"==typeof r.options.onChangeAll&&r.options.onChangeAll(r.getAllInputs(),n)}})}},{key:"handleButtonClicked",value:function(t,e){var n=this.options,r=n.inputName,i=void 0===r?this.defaultName:r,s=n.debug;if("{//}"!==t){this.input[i]||(this.input[i]="");var o=this.utilities.getUpdatedInput(t,this.input[i],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(t)&&this.activeInputElement&&this.input[i]&&this.input[i]===o&&0===this.caretPosition&&this.caretPositionEnd===o.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(t,e);if("function"==typeof this.options.onKeyPress&&this.options.onKeyPress(t,e),this.input[i]!==o&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(o))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,o))return;var a=this.utilities.getUpdatedInput(t,this.input[i],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(a,this.options.inputName,!0),s&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")")),this.options.syncInstanceInputs&&this.syncInstanceInputs(),"function"==typeof this.options.onChange&&this.options.onChange(this.getInput(this.options.inputName,!0),e),"function"==typeof this.options.onChangeAll&&this.options.onChangeAll(this.getAllInputs(),e),null!=e&&e.target&&this.options.enableLayoutCandidates){var u,c=this.getInputCandidates(o),l=c.candidateKey,h=c.candidateValue;l&&h?this.showCandidatesBox(l,h,this.keyboardDOM):null===(u=this.candidateBox)||void 0===u||u.destroy()}}s&&console.log("Key pressed:",t)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(t){this.options.syncInstanceInputs?this.dispatch(function(e){e.isMouseHold=t}):this.isMouseHold=t}},{key:"handleButtonMouseDown",value:function(t,e){var n=this;e&&(this.options.preventMouseDownDefault&&e.preventDefault(),this.options.stopMouseDownPropagation&&e.stopPropagation(),e.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(n.getMouseHold()&&(!t.includes("{")&&!t.includes("}")||"{delete}"===t||"{backspace}"===t||"{bksp}"===t||"{space}"===t||"{tab}"===t)||"{arrowright}"===t||"{arrowleft}"===t||"{arrowup}"===t||"{arrowdown}"===t)&&(n.options.debug&&console.log("Button held:",t),n.handleButtonHold(t)),clearTimeout(n.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(t,e){var n=this;e&&(this.options.preventMouseUpDefault&&e.preventDefault&&e.preventDefault(),this.options.stopMouseUpPropagation&&e.stopPropagation&&e.stopPropagation(),!(e.target===this.keyboardDOM||e.target&&this.keyboardDOM.contains(e.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(e.target===this.candidateBox.candidateBoxElement||e.target&&this.candidateBox.candidateBoxElement.contains(e.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(t){t.classList.remove(n.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),t&&"function"==typeof this.options.onKeyReleased&&this.options.onKeyReleased(t)}},{key:"handleKeyboardContainerMouseDown",value:function(t){this.options.preventMouseDownDefault&&t.preventDefault()}},{key:"handleButtonHold",value:function(t){var e=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){e.getMouseHold()?(e.handleButtonClicked(t),e.handleButtonHold(t)):clearTimeout(e.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var t=this;this.dispatch(function(e){e.replaceInput(t.input),e.setCaretPosition(t.caretPosition,t.caretPositionEnd)})}},{key:"clearInput",value:function(){this.input[arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName;return this.options.syncInstanceInputs&&!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.syncInstanceInputs(),this.options.rtl?"\u202b"+this.input[t].replace("\u202b","").replace("\u202c","")+"\u202c":this.input[t]}},{key:"getAllInputs",value:function(){var t=this,e={};return Object.keys(this.input).forEach(function(n){e[n]=t.getInput(n,!0)}),e}},{key:"setInput",value:function(t){var e=arguments.length>2?arguments[2]:void 0;this.input[arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.inputName||this.defaultName]=t,!e&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(t){this.input=t}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.changedOptions(t);this.options=Object.assign(this.options,t),e.length&&(this.options.debug&&console.log("changedOptions",e),this.onSetOptions(e),this.render())}},{key:"changedOptions",value:function(t){var e=this;return Object.keys(t).filter(function(n){return JSON.stringify(t[n])!==JSON.stringify(e.options[n])})}},{key:"onSetOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(t.includes("layoutCandidatesPageSize")||t.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new y({utilities:this.utilities}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(t){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(e){t(window.SimpleKeyboardInstances[e],e)})}},{key:"addButtonTheme",value:function(t,e){var n=this;e&&t&&(t.split(" ").forEach(function(r){e.split(" ").forEach(function(e){n.options.buttonTheme||(n.options.buttonTheme=[]);var i=!1;n.options.buttonTheme.map(function(t){if(null!=t&&t.class.split(" ").includes(e)){i=!0;var n=t.buttons.split(" ");n.includes(r)||(i=!0,n.push(r),t.buttons=n.join(" "))}return t}),i||n.options.buttonTheme.push({class:e,buttons:t})})}),this.render())}},{key:"removeButtonTheme",value:function(t,e){var n=this;if(!t&&!e)return this.options.buttonTheme=[],void this.render();t&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(t.split(" ").forEach(function(t){var r,i;null===(r=n.options)||void 0===r||null===(i=r.buttonTheme)||void 0===i||i.map(function(r,i){if(r&&e&&e.includes(r.class)||!e){var s,o,a=null===(s=r)||void 0===s?void 0:s.buttons.split(" ").filter(function(e){return e!==t});r&&null!=a&&a.length?r.buttons=a.join(" "):(null===(o=n.options.buttonTheme)||void 0===o||o.splice(i,1),r=null)}return r})}),this.render())}},{key:"getButtonElement",value:function(t){var e,n=this.buttonElements[t];return n&&(e=n.length>1?n:n[0]),e}},{key:"inputPatternIsValid",value:function(t){var e,n=this.options.inputPattern;if((e=n instanceof RegExp?n:n[this.options.inputName||this.defaultName])&&t){var r=e.test(t);return this.options.debug&&console.log('inputPattern ("'.concat(e,'"): ').concat(r?"passed":"did not pass!")),r}return!0}},{key:"setEventListeners",value:function(){!this.isFirstKeyboardInstance&&this.allKeyboardInstances||(this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")")),document.addEventListener("keyup",this.handleKeyUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("select",this.handleSelect),document.addEventListener("selectionchange",this.handleSelectionChange))}},{key:"handleKeyUp",value:function(t){this.caretEventHandler(t),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(t)}},{key:"handleKeyDown",value:function(t){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(t)}},{key:"handleMouseUp",value:function(t){this.caretEventHandler(t)}},{key:"handleTouchEnd",value:function(t){this.caretEventHandler(t)}},{key:"handleSelect",value:function(t){this.caretEventHandler(t)}},{key:"handleSelectionChange",value:function(t){this.caretEventHandler(t)}},{key:"caretEventHandler",value:function(t){var e,n=this;t.target.tagName&&(e=t.target.tagName.toLowerCase()),this.dispatch(function(r){var i=t.target===r.keyboardDOM||t.target&&r.keyboardDOM.contains(t.target);if(n.options.syncInstanceInputs&&Array.isArray(t.path)&&(i=t.path.some(function(t){var e;return null==t||null===(e=t.hasAttribute)||void 0===e?void 0:e.call(t,"data-skInstance")})),("textarea"===e||"input"===e&&["text","search","url","tel","password"].includes(t.target.type))&&!r.options.disableCaretPositioning){var s=t.target.selectionStart,o=t.target.selectionEnd;r.options.rtl&&(s=r.utilities.getRtlOffset(s,r.getInput()),o=r.utilities.getRtlOffset(o,r.getInput())),r.setCaretPosition(s,o),n.activeInputElement=t.target,r.options.debug&&console.log("Caret at: ",r.getCaretPosition(),r.getCaretPositionEnd(),t&&t.target.tagName.toLowerCase(),"(".concat(r.keyboardDOMClass,")"))}else!r.options.disableCaretPositioning&&i||"selectionchange"===(null==t?void 0:t.type)||(r.setCaretPosition(null),n.activeInputElement=null,r.options.debug&&console.log('Caret position reset due to "'.concat(null==t?void 0:t.type,'" event'),t))})}},{key:"recurseButtons",value:function(t){var e=this;t&&Object.keys(this.buttonElements).forEach(function(n){return e.buttonElements[n].forEach(t)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName)),document.removeEventListener("keyup",this.handleKeyUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(t){t&&(t.onpointerdown=null,t.onpointerup=null,t.onpointercancel=null,t.ontouchstart=null,t.ontouchend=null,t.ontouchcancel=null,t.onclick=null,t.onmousedown=null,t.onmouseup=null,t.remove(),t=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(t){var e=this.options.buttonTheme,n=[];return Array.isArray(e)&&e.forEach(function(e){if(e&&e.class&&"string"==typeof e.class&&e.buttons&&"string"==typeof e.buttons){var r=e.class.split(" ");e.buttons.split(" ").includes(t)&&(n=[].concat(b(n),b(r)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',e)}),n}},{key:"setDOMButtonAttributes",value:function(t,e){var n=this.options.buttonAttributes;Array.isArray(n)&&n.forEach(function(n){n.attribute&&"string"==typeof n.attribute&&n.value&&"string"==typeof n.value&&n.buttons&&"string"==typeof n.buttons?n.buttons.split(" ").includes(t)&&e(n.attribute,n.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',n)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(t){if(t.target.classList.contains("hg-button"))return t.preventDefault(),t.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),"function"==typeof this.options.onInit&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),"function"==typeof this.options.beforeFirstRender&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){"function"==typeof this.options.beforeRender&&this.options.beforeRender(this)}},{key:"onRender",value:function(){"function"==typeof this.options.onRender&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){"function"==typeof this.options.onModulesLoaded&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var t=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(e){var n=new e(t);n.init&&n.init(t)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(t,e){return!!this.modules[t]&&this.modules[t][e]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(t,e,n,r){var i=this,s=Array.from(t.children),o=0;return s.length&&n.forEach(function(n,a){var u=r[a];if(!(u&&u>n))return!1;var c=n-o,l=u-o,h=document.createElement("div");h.className+="hg-button-container";var p="".concat(i.options.layoutName,"-r").concat(e,"c").concat(a);h.setAttribute("data-skUID",p);var f=s.splice(c,l-c+1);o=l-c,f.forEach(function(t){return h.appendChild(t)}),s.splice(c,0,h),t.innerHTML="",s.forEach(function(e){return t.appendChild(e)}),i.options.debug&&console.log("rowDOMContainer",f,c,l,o+1)}),t}},{key:"render",value:function(){var t=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var e="hg-layout-".concat(this.options.layoutName),n=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},r=this.options.useTouchEvents||!1,i=this.options.useMouseEvents||!1,s=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,e,this.keyboardPluginClasses,r?"hg-touch-events":""),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",n[this.options.layoutName||this.defaultName].forEach(function(e,n){var o=e.split(" ");t.options.excludeFromLayout&&t.options.excludeFromLayout[t.options.layoutName||t.defaultName]&&(o=o.filter(function(e){return t.options.excludeFromLayout&&!t.options.excludeFromLayout[t.options.layoutName||t.defaultName].includes(e)}));var a=document.createElement("div");a.className+="hg-row";var u=[],c=[];o.forEach(function(e,o){var l,h=!s&&"string"==typeof e&&e.length>1&&0===e.indexOf("["),p=!s&&"string"==typeof e&&e.length>1&&e.indexOf("]")===e.length-1;h&&(u.push(o),e=e.replace(/\[/g,"")),p&&(c.push(o),e=e.replace(/\]/g,""));var f=t.utilities.getButtonClass(e),d=t.utilities.getButtonDisplayName(e,t.options.display,t.options.mergeDisplay),m=document.createElement(t.options.useButtonTag?"button":"div");m.className+="hg-button ".concat(f),(l=m.classList).add.apply(l,b(t.getButtonThemeClasses(e))),t.setDOMButtonAttributes(e,function(t,e){m.setAttribute(t,e)}),t.activeButtonClass="hg-activeButton",!t.utilities.pointerEventsSupported()||r||i?r?(m.ontouchstart=function(n){t.handleButtonClicked(e,n),t.handleButtonMouseDown(e,n)},m.ontouchend=function(n){t.handleButtonMouseUp(e,n)},m.ontouchcancel=function(n){t.handleButtonMouseUp(e,n)}):(m.onclick=function(n){t.setMouseHold(!1),"function"!=typeof t.options.onKeyReleased&&t.handleButtonClicked(e,n)},m.onmousedown=function(n){"function"!=typeof t.options.onKeyReleased||t.isMouseHold||t.handleButtonClicked(e,n),t.handleButtonMouseDown(e,n)},m.onmouseup=function(n){t.handleButtonMouseUp(e,n)}):(m.onpointerdown=function(n){t.handleButtonClicked(e,n),t.handleButtonMouseDown(e,n)},m.onpointerup=function(n){t.handleButtonMouseUp(e,n)},m.onpointercancel=function(n){t.handleButtonMouseUp(e,n)}),m.setAttribute("data-skBtn",e);var g="".concat(t.options.layoutName,"-r").concat(n,"b").concat(o);m.setAttribute("data-skBtnUID",g);var v=document.createElement("span");v.innerHTML=d,m.appendChild(v),t.buttonElements[e]||(t.buttonElements[e]=[]),t.buttonElements[e].push(m),a.appendChild(m)}),a=t.parseRowDOMContainers(a,n,u,c),t.keyboardRowsDOM.appendChild(a)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||r||i?r?(document.ontouchend=function(e){return t.handleButtonMouseUp(void 0,e)},document.ontouchcancel=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.ontouchstart=function(e){return t.handleKeyboardContainerMouseDown(e)}):r||(document.onmouseup=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.onmousedown=function(e){return t.handleKeyboardContainerMouseDown(e)}):(document.onpointerup=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.onpointerdown=function(e){return t.handleKeyboardContainerMouseDown(e)}),this.onInit())}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),A=C,I=C}(),r}()},9503:(t,e,n)=>{"use strict";var r;n.r(e),n.d(e,{NIL:()=>P,parse:()=>g,stringify:()=>l,v1:()=>m,v3:()=>C,v4:()=>A,v5:()=>k,validate:()=>a,version:()=>R});var i=new Uint8Array(16);function s(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(t){return"string"==typeof t&&o.test(t)};for(var u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));const l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!a(n))throw TypeError("Stringified UUID is invalid");return n};var h,p,f=0,d=0;const m=function(t,e,n){var r=e&&n||0,i=e||new Array(16),o=(t=t||{}).node||h,a=void 0!==t.clockseq?t.clockseq:p;if(null==o||null==a){var u=t.random||(t.rng||s)();null==o&&(o=h=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==a&&(a=p=16383&(u[6]<<8|u[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),m=void 0!==t.nsecs?t.nsecs:d+1,g=c-f+(m-d)/1e4;if(g<0&&void 0===t.clockseq&&(a=a+1&16383),(g<0||c>f)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=c,d=m,p=a;var v=(1e4*(268435455&(c+=122192928e5))+m)%4294967296;i[r++]=v>>>24&255,i[r++]=v>>>16&255,i[r++]=v>>>8&255,i[r++]=255&v;var y=c/4294967296*1e4&268435455;i[r++]=y>>>8&255,i[r++]=255&y,i[r++]=y>>>24&15|16,i[r++]=y>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var b=0;b<6;++b)i[r+b]=o[b];return e||l(i)},g=function(t){if(!a(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n};function v(t,e,n){function r(t,r,i,s){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=g(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+t.length);if(o.set(r),o.set(t,r.length),(o=n(o))[6]=15&o[6]|e,o[8]=63&o[8]|128,i){s=s||0;for(var a=0;a<16;++a)i[s+a]=o[a];return i}return l(o)}try{r.name=t}catch(i){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function y(t){return 14+(t+64>>>9<<4)+1}function b(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function w(t,e,n,r,i,s){return b((o=b(b(e,t),b(r,s)))<<(a=i)|o>>>32-a,n);var o,a}function x(t,e,n,r,i,s,o){return w(e&n|~e&r,t,e,i,s,o)}function E(t,e,n,r,i,s,o){return w(e&r|n&~r,t,e,i,s,o)}function _(t,e,n,r,i,s,o){return w(e^n^r,t,e,i,s,o)}function S(t,e,n,r,i,s,o){return w(n^(e|~r),t,e,i,s,o)}const C=v("v3",48,function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){for(var e=[],n=32*t.length,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(15&s),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[y(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,u=r,c=i,l=s;n=x(n,r,i,s,t[o],7,-680876936),s=x(s,n,r,i,t[o+1],12,-389564586),i=x(i,s,n,r,t[o+2],17,606105819),r=x(r,i,s,n,t[o+3],22,-1044525330),n=x(n,r,i,s,t[o+4],7,-176418897),s=x(s,n,r,i,t[o+5],12,1200080426),i=x(i,s,n,r,t[o+6],17,-1473231341),r=x(r,i,s,n,t[o+7],22,-45705983),n=x(n,r,i,s,t[o+8],7,1770035416),s=x(s,n,r,i,t[o+9],12,-1958414417),i=x(i,s,n,r,t[o+10],17,-42063),r=x(r,i,s,n,t[o+11],22,-1990404162),n=x(n,r,i,s,t[o+12],7,1804603682),s=x(s,n,r,i,t[o+13],12,-40341101),i=x(i,s,n,r,t[o+14],17,-1502002290),n=E(n,r=x(r,i,s,n,t[o+15],22,1236535329),i,s,t[o+1],5,-165796510),s=E(s,n,r,i,t[o+6],9,-1069501632),i=E(i,s,n,r,t[o+11],14,643717713),r=E(r,i,s,n,t[o],20,-373897302),n=E(n,r,i,s,t[o+5],5,-701558691),s=E(s,n,r,i,t[o+10],9,38016083),i=E(i,s,n,r,t[o+15],14,-660478335),r=E(r,i,s,n,t[o+4],20,-405537848),n=E(n,r,i,s,t[o+9],5,568446438),s=E(s,n,r,i,t[o+14],9,-1019803690),i=E(i,s,n,r,t[o+3],14,-187363961),r=E(r,i,s,n,t[o+8],20,1163531501),n=E(n,r,i,s,t[o+13],5,-1444681467),s=E(s,n,r,i,t[o+2],9,-51403784),i=E(i,s,n,r,t[o+7],14,1735328473),n=_(n,r=E(r,i,s,n,t[o+12],20,-1926607734),i,s,t[o+5],4,-378558),s=_(s,n,r,i,t[o+8],11,-2022574463),i=_(i,s,n,r,t[o+11],16,1839030562),r=_(r,i,s,n,t[o+14],23,-35309556),n=_(n,r,i,s,t[o+1],4,-1530992060),s=_(s,n,r,i,t[o+4],11,1272893353),i=_(i,s,n,r,t[o+7],16,-155497632),r=_(r,i,s,n,t[o+10],23,-1094730640),n=_(n,r,i,s,t[o+13],4,681279174),s=_(s,n,r,i,t[o],11,-358537222),i=_(i,s,n,r,t[o+3],16,-722521979),r=_(r,i,s,n,t[o+6],23,76029189),n=_(n,r,i,s,t[o+9],4,-640364487),s=_(s,n,r,i,t[o+12],11,-421815835),i=_(i,s,n,r,t[o+15],16,530742520),n=S(n,r=_(r,i,s,n,t[o+2],23,-995338651),i,s,t[o],6,-198630844),s=S(s,n,r,i,t[o+7],10,1126891415),i=S(i,s,n,r,t[o+14],15,-1416354905),r=S(r,i,s,n,t[o+5],21,-57434055),n=S(n,r,i,s,t[o+12],6,1700485571),s=S(s,n,r,i,t[o+3],10,-1894986606),i=S(i,s,n,r,t[o+10],15,-1051523),r=S(r,i,s,n,t[o+1],21,-2054922799),n=S(n,r,i,s,t[o+8],6,1873313359),s=S(s,n,r,i,t[o+15],10,-30611744),i=S(i,s,n,r,t[o+6],15,-1560198380),r=S(r,i,s,n,t[o+13],21,1309151649),n=S(n,r,i,s,t[o+4],6,-145523070),s=S(s,n,r,i,t[o+11],10,-1120210379),i=S(i,s,n,r,t[o+2],15,718787259),r=S(r,i,s,n,t[o+9],21,-343485551),n=b(n,a),r=b(r,u),i=b(i,c),s=b(s,l)}return[n,r,i,s]}(function(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(y(e)),r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))}),A=function(t,e,n){var r=(t=t||{}).random||(t.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return l(r)};function I(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function T(t,e){return t<<e|t>>>32-e}const k=v("v5",80,function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=Math.ceil((t.length/4+2)/16),o=new Array(s),a=0;a<s;++a){for(var u=new Uint32Array(16),c=0;c<16;++c)u[c]=t[64*a+4*c]<<24|t[64*a+4*c+1]<<16|t[64*a+4*c+2]<<8|t[64*a+4*c+3];o[a]=u}o[s-1][14]=8*(t.length-1)/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<s;++l){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=o[l][p];for(var f=16;f<80;++f)h[f]=T(h[f-3]^h[f-8]^h[f-14]^h[f-16],1);for(var d=n[0],m=n[1],g=n[2],v=n[3],y=n[4],b=0;b<80;++b){var w=Math.floor(b/20),x=T(d,5)+I(w,m,g,v)+y+e[w]+h[b]>>>0;y=v,v=g,g=T(m,30)>>>0,m=d,d=x}n[0]=n[0]+d>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+y>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}),P="00000000-0000-0000-0000-000000000000",R=function(t){if(!a(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},9565:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},u=Array.isArray||(t=>t&&"number"==typeof t.length);function c(t){return null!==t&&"object"==typeof t}const l=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class h{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof h)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if(r(i)){n&&(this._unsubscribe=void 0);try{i.call(this)}catch(BA){t=BA instanceof l?p(BA.errors):[BA]}}if(u(s)){let e=-1,n=s.length;for(;++e<n;){const n=s[e];if(c(n))try{n.unsubscribe()}catch(BA){t=t||[],BA instanceof l?t=t.concat(p(BA.errors)):t.push(BA)}}}if(t)throw new l(t)}add(t){let e=t;if(!t)return h.EMPTY;switch(typeof t){case"function":e=new h(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof h)){const t=e;e=new h,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof h){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}function p(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}h.EMPTY=function(t){return t.closed=!0,t}(new h);const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class d extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof d?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new d(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class m extends d{constructor(t,e,n,i){let s;super(),this._parentSubscriber=t;let o=this;r(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==a&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const g="function"==typeof Symbol&&Symbol.observable||"@@observable";function v(t){return t}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof d)return t;if(t[f])return t[f]()}return t||e||n?new d(t,e,n):new d(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof d?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=b(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[g](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?v:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=b(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function b(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const w=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class x extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class E extends d{constructor(t){super(t),this.destination=t}}let _=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new E(this)}lift(t){const e=new S(this,this);return e.operator=t,e}next(t){if(this.closed)throw new w;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new w;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new w;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new w;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new x(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new S(t,e),t})();class S extends _{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function C(t){return t&&"function"==typeof t.schedule}function A(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new I(t,e))}}class I{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new T(t,this.project,this.thisArg))}}class T extends d{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const k=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},P="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",R=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function D(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const F=t=>{if(t&&"function"==typeof t[g])return n=t,t=>{const e=n[g]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(R(t))return k(t);if(D(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e))(t);if(t&&"function"==typeof t[P])return e=t,t=>{const n=e[P]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n};function B(t,e){return new y(n=>{const r=new h;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function O(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[g]}(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[g]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(D(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(R(t))return B(t,e);if(function(t){return t&&"function"==typeof t[P]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new y(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[P](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof y?t:new y(F(t))}class N extends d{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class M extends d{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function L(t,e){if(e.closed)return;if(t instanceof y)return t.subscribe(e);let n;try{n=F(t)(e)}catch(r){e.error(r)}return n}function V(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(V((n,r)=>O(t(n,r)).pipe(A((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new j(t,n)))}class j{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new U(t,this.project,this.concurrent))}}class U extends M{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new N(this),n=this.destination;n.add(e);const r=L(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(t=Number.POSITIVE_INFINITY){return V(v,t)}function z(t,e){return e?B(t,e):new y(k(t))}function K(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return C(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof y?t[0]:H(e)(z(t,n))}function q(){return function(t){return t.lift(new W(t))}}class W{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new G(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class G extends d{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class $ extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new Q(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return q()(this)}}const X=(()=>{const t=$.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Q extends E{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Y(t,e){return function(n){let r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new Z(r,e));const i=Object.create(n,X);return i.source=n,i.subjectFactory=r,i}}class Z{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}function J(){return new _}function tt(){return t=>q()(Y(J)(t))}function et(t){for(let e in t)if(t[e]===et)return e;throw Error("Could not find renamed property on target object.")}function nt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function rt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(rt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function it(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const st=et({__forward_ref__:et});function ot(t){return t.__forward_ref__=ot,t.toString=function(){return rt(this())},t}function at(t){return ut(t)?t():t}function ut(t){return"function"==typeof t&&t.hasOwnProperty(st)&&t.__forward_ref__===ot}class ct extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function lt(t){return"string"==typeof t?t:null==t?"":String(t)}function ht(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():lt(t)}function pt(t,e){const n=e?` in ${e}`:"";throw new ct("201",`No provider for ${ht(t)} found${n}`)}function ft(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dt(t){return{providers:t.providers||[],imports:t.imports||[]}}function mt(t){return gt(t,yt)||gt(t,wt)}function gt(t,e){return t.hasOwnProperty(e)?t[e]:null}function vt(t){return t&&(t.hasOwnProperty(bt)||t.hasOwnProperty(xt))?t[bt]:null}const yt=et({"\u0275prov":et}),bt=et({"\u0275inj":et}),wt=et({ngInjectableDef:et}),xt=et({ngInjectorDef:et});var Et=(()=>((Et=Et||{})[Et.Default=0]="Default",Et[Et.Host=1]="Host",Et[Et.Self=2]="Self",Et[Et.SkipSelf=4]="SkipSelf",Et[Et.Optional=8]="Optional",Et))();let _t;function St(t){const e=_t;return _t=t,e}function Ct(t,e,n){const r=mt(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Et.Optional?null:void 0!==e?e:void pt(rt(t),"Injector")}function At(t){return{toString:t}.toString()}var It=(()=>((It=It||{})[It.OnPush=0]="OnPush",It[It.Default=1]="Default",It))(),Tt=(()=>((Tt=Tt||{})[Tt.Emulated=0]="Emulated",Tt[Tt.None=2]="None",Tt[Tt.ShadowDom=3]="ShadowDom",Tt))();const kt="undefined"!=typeof globalThis&&globalThis,Pt="undefined"!=typeof window&&window,Rt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dt="undefined"!=typeof global&&global,Ft=kt||Dt||Pt||Rt,Bt={},Ot=[],Nt=et({"\u0275cmp":et}),Mt=et({"\u0275dir":et}),Lt=et({"\u0275pipe":et}),Vt=et({"\u0275mod":et}),jt=et({"\u0275loc":et}),Ut=et({"\u0275fac":et}),Ht=et({__NG_ELEMENT_ID__:et});let zt=0;function Kt(t){return At(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===It.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Tt.Emulated,id:"c",styles:t.styles||Ot,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=zt++,n.inputs=Xt(t.inputs,e),n.outputs=Xt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(qt):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(Wt):null,n})}function qt(t){return Zt(t)||function(t){return t[Mt]||null}(t)}function Wt(t){return function(t){return t[Lt]||null}(t)}const Gt={};function $t(t){return At(()=>{const e={type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Gt[t.id]=t.type),e})}function Xt(t,e){if(null==t)return Bt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const Qt=Kt;function Yt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Zt(t){return t[Nt]||null}function Jt(t,e){const n=t[Vt]||null;if(!n&&!0===e)throw new Error(`Type ${rt(t)} does not have '\u0275mod' property.`);return n}const te=20,ee=10;function ne(t){return Array.isArray(t)&&"object"==typeof t[1]}function re(t){return Array.isArray(t)&&!0===t[1]}function ie(t){return 0!=(8&t.flags)}function se(t){return 2==(2&t.flags)}function oe(t){return 1==(1&t.flags)}function ae(t){return null!==t.template}function ue(t,e){return t.hasOwnProperty(Ut)?t[Ut]:null}class ce{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function le(){return he}function he(t){return t.type.prototype.ngOnChanges&&(t.setInput=fe),pe}function pe(){const t=de(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Bt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function fe(t,e,n,r){const i=de(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Bt,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new ce(u&&u.currentValue,e,o===Bt),t[r]=e}function de(t){return t.__ngSimpleChanges__||null}le.ngInherit=!0;const me="http://www.w3.org/2000/svg";let ge;function ve(){return void 0!==ge?ge:"undefined"!=typeof document?document:void 0}function ye(t){return!!t.listen}const be={createRenderer:(t,e)=>ve()};function we(t){for(;Array.isArray(t);)t=t[0];return t}function xe(t,e){return we(e[t])}function Ee(t,e){return we(e[t.index])}function _e(t,e){return t.data[e]}function Se(t,e){return t[e]}function Ce(t,e){const n=e[t];return ne(n)?n:n[0]}function Ae(t){return 4==(4&t[2])}function Ie(t){return 128==(128&t[2])}function Te(t,e){return null==e?null:t[e]}function ke(t){t[18]=0}function Pe(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Re={lFrame:nn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function De(){return Re.bindingsEnabled}function Fe(){return Re.lFrame.lView}function Be(){return Re.lFrame.tView}function Oe(t){return Re.lFrame.contextLView=t,t[8]}function Ne(){let t=Me();for(;null!==t&&64===t.type;)t=t.parent;return t}function Me(){return Re.lFrame.currentTNode}function Le(t,e){const n=Re.lFrame;n.currentTNode=t,n.isParent=e}function Ve(){return Re.lFrame.isParent}function je(){Re.lFrame.isParent=!1}function Ue(){return Re.isInCheckNoChangesMode}function He(t){Re.isInCheckNoChangesMode=t}function ze(){const t=Re.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ke(){return Re.lFrame.bindingIndex}function qe(){return Re.lFrame.bindingIndex++}function We(t){const e=Re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Ge(t,e){const n=Re.lFrame;n.bindingIndex=n.bindingRootIndex=t,$e(e)}function $e(t){Re.lFrame.currentDirectiveIndex=t}function Xe(t){const e=Re.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function Qe(){return Re.lFrame.currentQueryIndex}function Ye(t){Re.lFrame.currentQueryIndex=t}function Ze(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Je(t,e,n){if(n&Et.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&Et.Host||(r=Ze(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Re.lFrame=en();return r.currentTNode=e,r.lView=t,!0}function tn(t){const e=en(),n=t[1];Re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function en(){const t=Re.lFrame,e=null===t?null:t.child;return null===e?nn(t):e}function nn(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function rn(){const t=Re.lFrame;return Re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const sn=rn;function on(){const t=rn();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function an(){return Re.lFrame.selectedIndex}function un(t){Re.lFrame.selectedIndex=t}function cn(){const t=Re.lFrame;return _e(t.tView,t.selectedIndex)}function ln(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function hn(t,e,n){dn(t,e,3,n)}function pn(t,e,n,r){(3&t[2])===n&&dn(t,e,n,r)}function fn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function dn(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(mn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function mn(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const gn=-1;class vn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function yn(t,e,n){const r=ye(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];wn(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function bn(t){return 3===t||4===t||6===t}function wn(t){return 64===t.charCodeAt(0)}function xn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||En(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function En(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function _n(t){return t!==gn}function Sn(t){return 32767&t}function Cn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let An=!0;function In(t){const e=An;return An=t,e}let Tn=0;function kn(t,e){const n=Rn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Pn(r.data,t),Pn(e,null),Pn(r.blueprint,null));const i=Dn(t,e),s=t.injectorIndex;if(_n(i)){const t=Sn(i),n=Cn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Pn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Rn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Dn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return gn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return gn}function Fn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ht)&&(r=n[Ht]),null==r&&(r=n[Ht]=Tn++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Bn(t,e,n){if(n&Et.Optional)return t;pt(e,"NodeInjector")}function On(t,e,n,r){if(n&Et.Optional&&void 0===r&&(r=null),0==(n&(Et.Self|Et.Host))){const i=t[9],s=St(void 0);try{return i?i.get(e,r,n&Et.Optional):Ct(e,r,n&Et.Optional)}finally{St(s)}}return Bn(r,e,n)}function Nn(t,e,n,r=Et.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ht)?t[Ht]:void 0;return"number"==typeof e?e>=0?255&e:Ln:e}(n);if("function"==typeof s){if(!Je(e,t,r))return r&Et.Host?Bn(i,n,r):On(e,n,r,i);try{const t=s(r);if(null!=t||r&Et.Optional)return t;pt(n)}finally{sn()}}else if("number"==typeof s){let i=null,o=Rn(t,e),a=gn,u=r&Et.Host?e[16][6]:null;for((-1===o||r&Et.SkipSelf)&&(a=-1===o?Dn(t,e):e[o+8],a!==gn&&zn(r,!1)?(i=e[1],o=Sn(a),e=Cn(a,e)):o=-1);-1!==o;){const t=e[1];if(Hn(s,o,t.data)){const t=Vn(o,e,n,i,r,u);if(t!==Mn)return t}a=e[o+8],a!==gn&&zn(r,e[1].data[o+8]===u)&&Hn(s,o,e)?(i=t,o=Sn(a),e=Cn(a,e)):o=-1}}}return On(e,n,r,i)}const Mn={};function Ln(){return new Kn(Ne(),Fe())}function Vn(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=jn(a,o,n,null==r?se(a)&&An:r!=o&&0!=(3&a.type),i&Et.Host&&s===a);return null!==u?Un(e,o,u,a):Mn}function jn(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&ae(t)&&t.type===n)return u}return null}function Un(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof vn){const o=i;o.resolving&&function(t,e){throw new ct("200",`Circular dependency in DI detected for ${t}`)}(ht(s[n]));const a=In(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?St(o.injectImpl):null;Je(t,r,Et.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=he(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&St(u),In(a),o.resolving=!1,sn()}}return i}function Hn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function zn(t,e){return!(t&Et.Self||t&Et.Host&&e)}class Kn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Nn(this._tNode,this._lView,t,void 0,e)}}function qn(t){return At(()=>{const e=t.prototype.constructor,n=e[Ut]||Wn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Ut]||Wn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Wn(t){return ut(t)?()=>{const e=Wn(at(t));return e&&e()}:ue(t)}function Gn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(bn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ne(),t)}const $n="__parameters__";function Xn(t,e,n){return At(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty($n)?t[$n]:Object.defineProperty(t,$n,{value:[]})[$n];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Qn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ft({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Yn=new Qn("AnalyzeForEntryComponents"),Zn=Function;function Jn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Jn(r,e)):e!==t&&e.push(r)}return e}function tr(t,e){t.forEach(t=>Array.isArray(t)?tr(t,e):e(t))}function er(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function nr(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function rr(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function ir(t,e,n){let r=or(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function sr(t,e){const n=or(t,e);if(n>=0)return t[1|n]}function or(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const ar={},ur=/\n/gm,cr="__source",lr=et({provide:String,useValue:et});let hr;function pr(t){const e=hr;return hr=t,e}function fr(t,e=Et.Default){if(void 0===hr)throw new Error("inject() must be called from an injection context");return null===hr?Ct(t,void 0,e):hr.get(t,e&Et.Optional?null:void 0,e)}function dr(t,e=Et.Default){return(_t||fr)(at(t),e)}const mr=dr;function gr(t){const e=[];for(let n=0;n<t.length;n++){const r=at(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=Et.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(dr(t,n))}else e.push(dr(r))}return e}function vr(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const yr=vr(Xn("Inject",t=>({token:t})),-1),br=vr(Xn("Optional"),8),wr=vr(Xn("SkipSelf"),4);let xr,Er;function _r(t){var e;return(null===(e=function(){if(void 0===xr&&(xr=null,Ft.trustedTypes))try{xr=Ft.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return xr}())||void 0===e?void 0:e.createHTML(t))||t}function Sr(t){var e;return(null===(e=function(){if(void 0===Er&&(Er=null,Ft.trustedTypes))try{Er=Ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Er}())||void 0===e?void 0:e.createHTML(t))||t}class Cr{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ar extends Cr{getTypeName(){return"HTML"}}class Ir extends Cr{getTypeName(){return"Style"}}class Tr extends Cr{getTypeName(){return"Script"}}class kr extends Cr{getTypeName(){return"URL"}}class Pr extends Cr{getTypeName(){return"ResourceURL"}}function Rr(t){return t instanceof Cr?t.changingThisBreaksApplicationSecurity:t}function Dr(t,e){const n=Fr(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Fr(t){return t instanceof Cr&&t.getTypeName()||null}class Br{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(_r(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(wS){return null}}}class Or{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=_r(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=_r(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Nr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Mr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Lr(t){return(t=String(t)).match(Nr)||t.match(Mr)?t:"unsafe:"+t}function Vr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function jr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Ur=Vr("area,br,col,hr,img,wbr"),Hr=Vr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zr=Vr("rp,rt"),Kr=jr(zr,Hr),qr=jr(Ur,jr(Hr,Vr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),jr(zr,Vr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kr),Wr=Vr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Gr=Vr("srcset"),$r=jr(Wr,Gr,Vr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xr=Vr("script,style,template");class Qr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!qr.hasOwnProperty(e))return this.sanitizedSomething=!0,!Xr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!$r.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;Wr[s]&&(o=Lr(o)),Gr[s]&&(r=o,o=(r=String(r)).split(",").map(t=>Lr(t.trim())).join(", ")),this.buf.push(" ",e,'="',Jr(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();qr.hasOwnProperty(e)&&!Ur.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Jr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Yr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zr=/([^\#-~ |!])/g;function Jr(t){return t.replace(/&/g,"&amp;").replace(Yr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Zr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ti;function ei(t,e){let n=null;try{ti=ti||function(t){const e=new Or(t);return function(){try{return!!(new window.DOMParser).parseFromString(_r(""),"text/html")}catch(wS){return!1}}()?new Br(e):e}(t);let r=e?String(e):"";n=ti.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=ti.getInertBodyElement(r)}while(r!==s);return _r((new Qr).sanitizeChildren(ni(n)||n))}finally{if(n){const t=ni(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ni(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ri=(()=>((ri=ri||{})[ri.NONE=0]="NONE",ri[ri.HTML=1]="HTML",ri[ri.STYLE=2]="STYLE",ri[ri.SCRIPT=3]="SCRIPT",ri[ri.URL=4]="URL",ri[ri.RESOURCE_URL=5]="RESOURCE_URL",ri))();function ii(t){const e=oi();return e?Sr(e.sanitize(ri.HTML,t)||""):Dr(t,"HTML")?Sr(Rr(t)):ei(ve(),lt(t))}function si(t){const e=oi();return e?e.sanitize(ri.URL,t)||"":Dr(t,"URL")?Rr(t):Lr(lt(t))}function oi(){const t=Fe();return t&&t[12]}function ai(t,e){t.__ngContext__=e}function ui(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ci(t){return t.ngOriginalError}function li(t,...e){t.error(...e)}class hi{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t&&t.ngErrorLogger||li}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(ci(t)):null}_findOriginalError(t){let e=t&&ci(t);for(;e&&ci(e);)e=ci(e);return e||null}}const pi=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function fi(t){return t.ownerDocument.defaultView}function di(t){return t.ownerDocument}function mi(t){return t instanceof Function?t():t}var gi=(()=>((gi=gi||{})[gi.Important=1]="Important",gi[gi.DashCase=2]="DashCase",gi))();function vi(t,e){return(void 0)(t,e)}function yi(t){const e=t[3];return re(e)?e[3]:e}function bi(t){return xi(t[13])}function wi(t){return xi(t[4])}function xi(t){for(;null!==t&&!re(t);)t=t[4];return t}function Ei(t,e,n,r,i){if(null!=r){let s,o=!1;re(r)?s=r:ne(r)&&(o=!0,r=r[0]);const a=we(r);0===t&&null!==n?null==i?Pi(e,n,a):ki(e,n,a,i||null,!0):1===t&&null!==n?ki(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Di(t,e);r&&function(t,e,n,r){ye(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==we(n)&&Ei(e,t,r,s,i);for(let o=ee;o<n.length;o++){const i=n[o];ji(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function _i(t,e,n){return ye(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Si(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Pe(i,-1)),n.splice(r,1)}function Ci(t,e){if(t.length<=ee)return;const n=ee+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Si(s,r),e>0&&(t[n-1][4]=r[4]);const o=nr(t,ee+e);ji(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ai(t,e){if(!(256&e[2])){const n=e[11];ye(n)&&n.destroyNode&&ji(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ii(t[1],t);for(;e;){let n=null;if(ne(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ne(e)&&Ii(e[1],e),e=e[3];null===e&&(e=t),ne(e)&&Ii(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ii(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof vn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):we(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&ye(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&re(e[3])){n!==e[3]&&Si(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ti(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===Tt.None||e===Tt.Emulated)return null}return Ee(r,n)}(t,e.parent,n)}function ki(t,e,n,r,i){ye(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Pi(t,e,n){ye(t)?t.appendChild(e,n):e.appendChild(n)}function Ri(t,e,n,r,i){null!==r?ki(t,e,n,r,i):Pi(t,e,n)}function Di(t,e){return ye(t)?t.parentNode(e):e.parentNode}function Fi(t,e,n){return Bi(t,e,n)}let Bi=function(t,e,n){return 40&t.type?Ee(t,n):null};function Oi(t,e,n,r){const i=Ti(t,r,e),s=e[11],o=Fi(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Ri(s,i,n[a],o,!1);else Ri(s,i,n,o,!1)}function Ni(t,e){if(null!==e){const n=e.type;if(3&n)return Ee(e,t);if(4&n)return Li(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Ni(t,n);{const n=t[e.index];return re(n)?Li(-1,n):we(n)}}if(32&n)return vi(e,t)()||we(t[e.index]);{const n=Mi(t,e);return null!==n?Array.isArray(n)?n[0]:Ni(yi(t[16]),n):Ni(t,e.next)}}return null}function Mi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Li(t,e){const n=ee+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Ni(t,r)}return e[7]}function Vi(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&ai(we(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Vi(t,e,n.child,r,i,s,!1),Ei(e,t,i,a,s);else if(32&u){const o=vi(n,r);let u;for(;u=o();)Ei(e,t,i,u,s);Ei(e,t,i,a,s)}else 16&u?Ui(t,e,r,n,i,s):Ei(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ji(t,e,n,r,i,s){Vi(n,r,t.firstChild,e,i,s,!1)}function Ui(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ei(e,t,i,a[u],s);else Vi(t,e,a,o[3],i,s,!0)}function Hi(t,e,n){ye(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function zi(t,e,n){ye(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Ki(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const qi="ng-template";function Wi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Ki(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Gi(t){return 4===t.type&&t.value!==qi}function $i(t,e,n){return e===(4!==t.type||n?t.value:qi)}function Xi(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(bn(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!$i(t,u,n)||""===u&&1===e.length){if(Qi(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Wi(t.attrs,c,n)){if(Qi(r))return!1;o=!0}continue}const l=Yi(8&r?"class":u,i,Gi(t),n);if(-1===l){if(Qi(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Ki(e,c,0)||2&r&&c!==t){if(Qi(r))return!1;o=!0}}}}else{if(!o&&!Qi(r)&&!Qi(u))return!1;if(o&&Qi(u))continue;o=!1,r=u|1&r}}return Qi(r)||o}function Qi(t){return 0==(1&t)}function Yi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Zi(t,e,n=!1){for(let r=0;r<e.length;r++)if(Xi(t,e[r],n))return!0;return!1}function Ji(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ts(t,e){return t?":not("+e.trim()+")":e}function es(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Qi(o)||(e+=ts(s,i),i=""),r=o,s=s||!Qi(r);n++}return""!==i&&(e+=ts(s,i)),e}const ns={};function rs(t){is(Be(),Fe(),an()+t,Ue())}function is(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&hn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&pn(e,r,0,n)}un(n)}function ss(t,e){return t<<17|e<<2}function os(t){return t>>17&32767}function as(t){return 2|t}function us(t){return(131068&t)>>2}function cs(t,e){return-131069&t|e<<2}function ls(t){return 1|t}function hs(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];Ye(i),n.contentQueries(2,e[s],s)}}}function ps(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,ke(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function fs(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=Me(),o=Ve(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),Re.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=Re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return Le(s,!0),s}function ds(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ms(t,e,n){tn(e);try{const r=t.viewQuery;null!==r&&qs(1,r,n);const i=t.template;null!==i&&ys(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&hs(t,e),t.staticViewQueries&&qs(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)js(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,on()}}function gs(t,e,n,r){const i=e[2];if(256==(256&i))return;tn(e);const s=Ue();try{ke(e),Re.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ys(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&hn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&pn(e,n,0,null),fn(e,0)}if(function(t){for(let e=bi(t);null!==e;e=wi(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Pe(r,1),n[2]|=1024}}}(e),function(t){for(let e=bi(t);null!==e;e=wi(e))for(let t=ee;t<e.length;t++){const n=e[t],r=n[1];Ie(n)&&gs(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&hs(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&hn(e,n)}else{const n=t.contentHooks;null!==n&&pn(e,n,1),fn(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)un(~r);else{const i=r,s=n[++t],o=n[++t];Ge(s,i),o(2,e[i])}}}finally{un(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ls(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&qs(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&hn(e,n)}else{const n=t.viewHooks;null!==n&&pn(e,n,2),fn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Pe(e[3],-1))}finally{on()}}function vs(t,e,n,r){const i=e[10],s=!Ue(),o=Ae(e);try{s&&!o&&i.begin&&i.begin(),o&&ms(t,e,r),gs(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function ys(t,e,n,r,i){const s=an(),o=2&r;try{un(-1),o&&e.length>te&&is(t,e,te,Ue()),n(r,i)}finally{un(s)}}function bs(t,e,n){if(ie(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function ws(t,e,n){De()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||kn(n,e),ai(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=ae(r);s&&Bs(e,n,r);const u=Un(e,t,a,n);ai(u,e),null!==o&&Os(0,a-i,u,r,0,o),s&&(Ce(n.index,e)[8]=u)}}(t,e,n,Ee(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Re.lFrame.currentDirectiveIndex;try{un(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];$e(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ks(r,i)}}finally{un(-1),$e(o)}}(t,e,n))}function xs(t,e,n=Ee){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Es(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=_s(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function _s(t,e,n,r,i,s,o,a,u,c){const l=te+r,h=l+i,p=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ns);return n}(l,h),f="function"==typeof c?c():c;return p[1]={type:t,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ss(t,e,n,r){const i=Gs(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&$s(t).push(r,i.length-1))}function Cs(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function As(t,e,n,r,i,s,o,a){const u=Ee(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Ys(t,n,c,r,i),se(e)&&function(t,e){const n=Ce(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,ye(s)?s.setProperty(u,r,i):wn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Is(t,e,n,r){let i=!1;if(De()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Zi(n,o.selectors,!1)&&(i||(i=[]),Fn(kn(n,e),t,o.type),ae(o)?(Ps(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Ds(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=ds(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=xn(n.mergedAttrs,c.hostAttrs),Fs(t,n,e,u,c),Rs(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Gi(e)?null:Ns(n,i);s.push(c),o=Cs(n,u,o),a=Cs(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new ct("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=xn(n.mergedAttrs,n.attrs),i}function Ts(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function ks(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ps(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Rs(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ae(e)&&(n[""]=t)}}function Ds(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Fs(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=ue(i.type)),o=new vn(s,ae(i),null);t.blueprint[r]=o,n[r]=o,Ts(t,e,0,r,ds(t,n,i.hostVars,ns),i)}function Bs(t,e,n){const r=Ee(e,t),i=Es(n),s=t[10],o=Us(t,ps(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Os(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function Ns(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ms(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ls(t,e){const n=Ce(e,t);if(Ie(n)){const t=n[1];80&n[2]?gs(t,n,t.template,n[8]):n[5]>0&&Vs(n)}}function Vs(t){for(let n=bi(t);null!==n;n=wi(n))for(let t=ee;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];gs(t,e,t.template,e[8])}else e[5]>0&&Vs(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ce(e[n],t);Ie(r)&&r[5]>0&&Vs(r)}}function js(t,e){const n=Ce(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),ms(r,n,n[8])}function Us(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Hs(t){for(;t;){t[2]|=64;const e=yi(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function zs(t,e,n){const r=e[10];r.begin&&r.begin();try{gs(t,e,t.template,n)}catch(i){throw Qs(e,i),i}finally{r.end&&r.end()}}function Ks(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=ui(n),i=r[1];vs(i,r,i.template,n)}}(t[8])}function qs(t,e,n){Ye(0),e(t,n)}const Ws=(()=>Promise.resolve(null))();function Gs(t){return t[7]||(t[7]=[])}function $s(t){return t.cleanup||(t.cleanup=[])}function Xs(t,e,n){return(null===t||ae(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function Qs(t,e){const n=t[9],r=n?n.get(hi,null):null;r&&r.handleError(e)}function Ys(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Zs(t,e,n){const r=xe(e,t);!function(t,e,n){ye(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Js(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=it(i,t):2==s&&(r=it(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const to=new Qn("INJECTOR",-1);class eo{get(t,e=ar){if(e===ar){const e=new Error(`NullInjectorError: No provider for ${rt(t)}!`);throw e.name="NullInjectorError",e}return e}}const no=new Qn("Set Injector scope."),ro={},io={};let so;function oo(){return void 0===so&&(so=new eo),so}function ao(t,e=null,n=null,r){return new uo(t,n,e||oo(),r)}class uo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&tr(e,n=>this.processProvider(n,t,e)),tr([t],t=>this.processInjectorType(t,[],i)),this.records.set(to,ho(void 0,this));const s=this.records.get(no);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:rt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ar,n=Et.Default){this.assertNotDestroyed();const r=pr(this),i=St(void 0);try{if(!(n&Et.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(s=t)||"object"==typeof s&&s instanceof Qn)&&mt(t);e=n&&this.injectableDefInScope(n)?ho(co(t),ro):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&Et.Self?oo():this.parent).get(t,e=n&Et.Optional&&e===ar?null:e)}catch(BA){if("NullInjectorError"===BA.name){if((BA.ngTempTokenPath=BA.ngTempTokenPath||[]).unshift(rt(t)),r)throw BA;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[cr]&&i.unshift(e[cr]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=rt(e);if(Array.isArray(e))i=e.map(rt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):rt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ur,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(BA,t,"R3InjectorError",this.source)}throw BA}finally{St(i),pr(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(rt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=at(t)))return!1;let r=vt(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=vt(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{tr(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];tr(r,t=>this.processProvider(t,n,r||Ot))}}this.injectorDefTypes.add(s);const a=ue(s)||(()=>new s);this.records.set(s,ho(a,ro));const u=r.providers;if(null!=u&&!o){const e=t;tr(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=fo(t=at(t))?t:at(t&&t.provide);const i=function(t,e,n){return po(t)?ho(void 0,t.useValue):ho(lo(t),ro)}(t);if(fo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ho(void 0,ro,!0),e.factory=()=>gr(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ro&&(e.value=io,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=at(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function co(t){const e=mt(t),n=null!==e?e.factory:ue(t);if(null!==n)return n;if(t instanceof Qn)throw new Error(`Token ${rt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=rr(e,"?");throw new Error(`Can't resolve all parameters for ${rt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[yt]||t[wt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function lo(t,e,n){let r;if(fo(t)){const e=at(t);return ue(e)||co(e)}if(po(t))r=()=>at(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...gr(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>dr(at(t.useExisting));else{const e=at(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ue(e)||co(e);r=()=>new e(...gr(t.deps))}var i;return r}function ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function po(t){return null!==t&&"object"==typeof t&&lr in t}function fo(t){return"function"==typeof t}const mo=function(t,e,n){return function(t,e=null,n=null,r){const i=ao(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class go{static create(t,e){return Array.isArray(t)?mo(t,e,""):mo(t.providers,t.parent,t.name||"")}}function vo(t,e){ln(ui(t)[1],Ne())}function yo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(ae(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=bo(t.inputs),e.declaredInputs=bo(t.declaredInputs),e.outputs=bo(t.outputs);const n=i.hostBindings;n&&Eo(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&wo(t,s),o&&xo(t,o),nt(t.inputs,i.inputs),nt(t.declaredInputs,i.declaredInputs),nt(t.outputs,i.outputs),ae(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===yo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xn(i.hostAttrs,n=xn(n,i.hostAttrs))}}(r)}function bo(t){return t===Bt?{}:t===Ot?[]:t}function wo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function xo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Eo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}go.THROW_IF_NOT_FOUND=ar,go.NULL=new eo,go.\u0275prov=ft({token:go,providedIn:"any",factory:()=>dr(to)}),go.__NG_ELEMENT_ID__=-1;let _o=null;function So(){if(!_o){const t=Ft.Symbol;if(t&&t.iterator)_o=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(_o=n)}}}return _o}class Co{constructor(t){this.wrapped=t}static wrap(t){return new Co(t)}static unwrap(t){return Co.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Co}}function Ao(t){return!!Io(t)&&(Array.isArray(t)||!(t instanceof Map)&&So()in t)}function Io(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function To(t,e,n){return t[e]=n}function ko(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Po(t,e,n,r){const i=ko(t,e,n);return ko(t,e+1,r)||i}function Ro(t,e,n,r){const i=Fe();return ko(i,qe(),e)&&(Be(),function(t,e,n,r,i,s){const o=Ee(t,e);!function(t,e,n,r,i,s,o){if(null==s)ye(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?lt(s):o(s,r||"",i);ye(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(cn(),i,t,e,n,r)),Ro}function Do(t,e,n,r){return ko(t,qe(),n)?e+lt(n)+r:ns}function Fo(t,e,n,r,i,s,o,a){const u=Fe(),c=Be(),l=t+te,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=fs(e,t,4,o||null,Te(c,a));Is(e,n,l,Te(c,u)),ln(e,l);const h=l.tViews=_s(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Le(h,!1);const p=u[11].createComment("");Oi(c,u,p,h),ai(p,u),Us(u,u[l]=Ms(p,u,p,h)),oe(h)&&ws(c,u,h),null!=o&&xs(u,h,a)}function Bo(t){return Se(Re.lFrame.contextLView,te+t)}function Oo(t,e=Et.Default){const n=Fe();return null===n?dr(t,e):Nn(Ne(),n,at(t),e)}function No(t,e,n){const r=Fe();return ko(r,qe(),e)&&As(Be(),cn(),r,t,e,r[11],n,!1),No}function Mo(t,e,n,r,i){const s=i?"class":"style";Ys(t,n,e.inputs[s],s,r)}function Lo(t,e,n,r){const i=Fe(),s=Be(),o=te+t,a=i[11],u=i[o]=_i(a,e,Re.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=fs(e,t,2,i,Te(a,s));return Is(e,n,u,Te(a,o)),null!==u.attrs&&Js(u,u.attrs,!1),null!==u.mergedAttrs&&Js(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];Le(c,!0);const l=c.mergedAttrs;null!==l&&yn(a,u,l);const h=c.classes;null!==h&&zi(a,u,h);const p=c.styles;null!==p&&Hi(a,u,p),64!=(64&c.flags)&&Oi(s,i,u,c),0===Re.lFrame.elementDepthCount&&ai(u,i),Re.lFrame.elementDepthCount++,oe(c)&&(ws(s,i,c),bs(s,c,i)),null!==r&&xs(i,c)}function Vo(){let t=Ne();Ve()?je():(t=t.parent,Le(t,!1));const e=t;Re.lFrame.elementDepthCount--;const n=Be();n.firstCreatePass&&(ln(n,t),ie(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Mo(n,e,Fe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Mo(n,e,Fe(),e.stylesWithoutHost,!1)}function jo(t,e,n,r){Lo(t,e,n,r),Vo()}function Uo(t,e,n){const r=Fe(),i=Be(),s=t+te,o=i.firstCreatePass?function(t,e,n,r,i){const s=e.consts,o=Te(s,r),a=fs(e,t,8,"ng-container",o);return null!==o&&Js(a,o,!0),Is(e,n,a,Te(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];Le(o,!0);const a=r[s]=r[11].createComment("");Oi(i,r,a,o),ai(a,r),oe(o)&&(ws(i,r,o),bs(i,o,r)),null!=n&&xs(r,o)}function Ho(){let t=Ne();const e=Be();Ve()?je():(t=t.parent,Le(t,!1)),e.firstCreatePass&&(ln(e,t),ie(t)&&e.queries.elementEnd(t))}function zo(){return Fe()}function Ko(t){return!!t&&"function"==typeof t.then}const qo=function(t){return!!t&&"function"==typeof t.subscribe};function Wo(t,e,n,r){const i=Fe(),s=Be(),o=Ne();return $o(s,i,i[11],o,t,e,!!n,r),Wo}function Go(t,e){const n=Ne(),r=Fe(),i=Be();return $o(i,r,Xs(Xe(i.data),n,r),n,t,e,!1),Go}function $o(t,e,n,r,i,s,o,a){const u=oe(r),c=t.firstCreatePass&&$s(t),l=Gs(e);let h=!0;if(3&r.type||a){const p=Ee(r,e),f=a?a(p):p,d=l.length,m=a?t=>a(we(t[r.index])):r.index;if(ye(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Qo(r,e,0,s,!1);const t=n.listen(f,i,s);l.push(s,t),c&&c.push(i,m,d,d+1)}}else s=Qo(r,e,0,s,!0),f.addEventListener(i,s,o),l.push(s),c&&c.push(i,m,d,o)}else s=Qo(r,e,0,s,!1);const p=r.outputs;let f;if(h&&null!==p&&(f=p[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}function Xo(t,e,n,r){try{return!1!==n(r)}catch(i){return Qs(t,i),!1}}function Qo(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Ce(t.index,e):e;0==(32&e[2])&&Hs(o);let a=Xo(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=Xo(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Yo(t=1){return function(t){return(Re.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Re.lFrame.contextLView))[8]}(t)}function Zo(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Zi(t,s,!0):Ji(r,s))return i}else n=i}return n}function Jo(t){const e=Fe()[16][6];if(!e.projection){const n=e.projection=rr(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Zo(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function ta(t,e=0,n){const r=Fe(),i=Be(),s=fs(i,te+t,16,null,n||null);null===s.projection&&(s.projection=e),je(),64!=(64&s.flags)&&function(t,e,n){Ui(e[11],0,e,n,Ti(t,n,e),Fi(n.parent||e[6],n,e))}(i,r,s)}function ea(t,e,n){return na(t,"",e,"",n),ea}function na(t,e,n,r,i){const s=Fe(),o=Do(s,e,n,r);return o!==ns&&As(Be(),cn(),s,t,o,s[11],i,!1),na}function ra(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?os(s):us(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];ia(t[a],e)&&(u=!0,t[a+1]=r?ls(n):as(n)),a=r?os(n):us(n)}u&&(t[n+1]=r?as(s):ls(s))}function ia(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&or(t,e)>=0}const sa={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function oa(t){return t.substring(sa.key,sa.keyEnd)}function aa(t,e){const n=sa.textEnd;return n===e?-1:(e=sa.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,sa.key=e,n),ua(t,e,n))}function ua(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ca(t,e,n){return fa(t,e,n,!1),ca}function la(t,e){return fa(t,e,null,!0),la}function ha(t){!function(t,e,n,r){const i=Be(),s=We(2);i.firstUpdatePass&&ma(i,null,s,r);const o=Fe();if(n!==ns&&ko(o,s,n)){const a=i.data[an()];if(xa(a,r)&&!da(i,s)){let t=a.classesWithoutHost;null!==t&&(n=it(t,n||"")),Mo(i,a,o,n,r)}else!function(t,e,n,r,i,s,o,a){i===ns&&(i=Ot);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const o=u<i.length?i[u+1]:void 0,p=c<s.length?s[c+1]:void 0;let f,d=null;l===h?(u+=2,c+=2,o!==p&&(d=h,f=p)):null===h||null!==l&&l<h?(u+=2,d=l):(c+=2,d=h,f=p),null!==d&&ya(t,e,n,r,d,f,true,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return Ot;const r=[],i=Rr(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,s)}}(ir,pa,t,!0)}function pa(t,e){for(let n=function(t){return function(t){sa.key=0,sa.keyEnd=0,sa.value=0,sa.valueEnd=0,sa.textEnd=t.length}(t),aa(t,ua(t,0,sa.textEnd))}(e);n>=0;n=aa(e,n))ir(t,oa(e),!0)}function fa(t,e,n,r){const i=Fe(),s=Be(),o=We(2);s.firstUpdatePass&&ma(s,t,o,r),e!==ns&&ko(i,o,e)&&ya(s,s.data[an()],i,i[11],t,i[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=rt(Rr(t)))),t}(e,n),r,o)}function da(t,e){return e>=t.expandoStartIndex}function ma(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[an()],o=da(t,n);xa(s,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=Xe(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=va(n=ga(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=ga(i,t,e,n,r),null===s){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==us(r))return t[os(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ga(null,t,e,n[1],r),n=va(n,e.attrs,r),function(t,e,n,r){t[os(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=va(r,t[s].hostAttrs,n);return va(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=os(o),u=us(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||or(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=os(t[a+1]);t[r+1]=ss(e,a),0!==e&&(t[e+1]=cs(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ss(a,0),0!==a&&(t[a+1]=cs(t[a+1],r)),a=r;else t[r+1]=ss(u,0),0===a?a=r:t[u+1]=cs(t[u+1],r),u=r;l&&(t[r+1]=as(t[r+1])),ra(t,c,r,!0),ra(t,c,r,!1),function(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&or(s,e)>=0&&(n[r+1]=ls(n[r+1]))}(e,c,t,r,s),o=ss(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function ga(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=va(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function va(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ir(t,o,!!n||e[++s]))}return void 0===t?null:t}function ya(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];wa(1==(1&c)?ba(u,e,n,i,us(c),o):void 0)||(wa(s)||2==(2&c)&&(s=ba(u,null,n,i,a,o)),function(t,e,n,r,i){const s=ye(t);if(e)i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:gi.DashCase;if(null==i)s?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),e|=gi.Important),s?t.setStyle(n,r,i,e):n.style.setProperty(r,i,o?"important":"")}}}(r,o,xe(an(),n),i,s))}function ba(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===ns&&(l=c?Ot:void 0);let h=c?sr(l,r):u===r?l:void 0;if(s&&!wa(h)&&(h=sr(e,r)),wa(h)&&(a=h,o))return a;const p=t[i+1];i=o?os(p):us(p)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=sr(t,r))}return a}function wa(t){return void 0!==t}function xa(t,e){return 0!=(t.flags&(e?16:32))}function Ea(t,e=""){const n=Fe(),r=Be(),i=t+te,s=r.firstCreatePass?fs(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return ye(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Oi(r,n,o,s),Le(s,!1)}function _a(t){return Sa("",t,""),_a}function Sa(t,e,n){const r=Fe(),i=Do(r,t,e,n);return i!==ns&&Zs(r,an(),i),Sa}function Ca(t,e,n,r,i){const s=Fe(),o=function(t,e,n,r,i,s){const o=Po(t,Ke(),n,i);return We(2),o?e+lt(n)+r+lt(i)+s:ns}(s,t,e,n,r,i);return o!==ns&&Zs(s,an(),o),Ca}function Aa(t,e,n){const r=Fe();return ko(r,qe(),e)&&As(Be(),cn(),r,t,e,r[11],n,!0),Aa}function Ia(t,e,n){const r=Fe();if(ko(r,qe(),e)){const i=Be(),s=cn();As(i,s,r,t,e,Xs(Xe(i.data),s,r),n,!0)}return Ia}const Ta=void 0;var ka=["en",[["a","p"],["AM","PM"],Ta],[["AM","PM"],Ta,Ta],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ta,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ta,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ta,"{1} 'at' {0}",Ta],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Pa={};function Ra(t){return t in Pa||(Pa[t]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[t]),Pa[t]}var Da=(()=>((Da=Da||{})[Da.LocaleId=0]="LocaleId",Da[Da.DayPeriodsFormat=1]="DayPeriodsFormat",Da[Da.DayPeriodsStandalone=2]="DayPeriodsStandalone",Da[Da.DaysFormat=3]="DaysFormat",Da[Da.DaysStandalone=4]="DaysStandalone",Da[Da.MonthsFormat=5]="MonthsFormat",Da[Da.MonthsStandalone=6]="MonthsStandalone",Da[Da.Eras=7]="Eras",Da[Da.FirstDayOfWeek=8]="FirstDayOfWeek",Da[Da.WeekendRange=9]="WeekendRange",Da[Da.DateFormat=10]="DateFormat",Da[Da.TimeFormat=11]="TimeFormat",Da[Da.DateTimeFormat=12]="DateTimeFormat",Da[Da.NumberSymbols=13]="NumberSymbols",Da[Da.NumberFormats=14]="NumberFormats",Da[Da.CurrencyCode=15]="CurrencyCode",Da[Da.CurrencySymbol=16]="CurrencySymbol",Da[Da.CurrencyName=17]="CurrencyName",Da[Da.Currencies=18]="Currencies",Da[Da.Directionality=19]="Directionality",Da[Da.PluralCase=20]="PluralCase",Da[Da.ExtraData=21]="ExtraData",Da))();const Fa="en-US";let Ba=Fa;function Oa(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ba=t.toLowerCase().replace(/_/g,"-"))}function Na(t,e,n,r,i){if(t=at(t),Array.isArray(t))for(let s=0;s<t.length;s++)Na(t[s],e,n,r,i);else{const s=Be(),o=Fe();let a=fo(t)?t:at(t.provide),u=lo(t);const c=Ne(),l=1048575&c.providerIndexes,h=c.directiveStart,p=c.providerIndexes>>20;if(fo(t)||!t.multi){const r=new vn(u,i,Oo),f=Va(a,e,i?l:l+p,h);-1===f?(Fn(kn(c,o),s,a),Ma(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=Va(a,e,l+p,h),d=Va(a,e,l,l+p),m=f>=0&&n[f],g=d>=0&&n[d];if(i&&!g||!i&&!m){Fn(kn(c,o),s,a);const l=function(t,e,n,r,i){const s=new vn(t,n,Oo);return s.multi=[],s.index=e,s.componentProviders=0,La(s,i,r&&!n),s}(i?Ua:ja,n.length,i,r,u);!i&&g&&(n[d].providerFactory=l),Ma(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else Ma(s,t,f>-1?f:d,La(n[i?d:f],u,!i&&r));!i&&r&&g&&n[d].componentProviders++}}}function Ma(t,e,n,r){const i=fo(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function La(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Va(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ja(t,e,n,r){return Ha(this.multi,[])}function Ua(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Un(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),Ha(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Ha(i,s);return s}function Ha(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function za(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Be();if(r.firstCreatePass){const i=ae(t);Na(n,r.data,r.blueprint,i,!0),Na(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Ka{}class qa{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${rt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class Wa{}function Ga(...t){}function $a(t,e){return new Qa(Ee(t,e))}Wa.NULL=new qa;const Xa=function(){return $a(Ne(),Fe())};let Qa=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Xa,t})();function Ya(t){return t instanceof Qa?t.nativeElement:t}class Za{}let Ja=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>tu(),t})();const tu=function(){const t=Fe(),e=Ce(Ne().index,t);return function(t){return t[11]}(ne(e)?e:t)};let eu=(()=>{class t{}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>null}),t})();class nu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ru=new nu("12.1.5");class iu{constructor(){}supports(t){return Ao(t)}create(t){return new ou(t)}}const su=(t,e)=>e;class ou{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||su}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<lu(n,r,i)?e:n,o=lu(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ao(t))throw new Error(`Error trying to diff '${rt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[So()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new au(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new cu),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cu),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class au{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class cu{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new uu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lu(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class hu{constructor(){}supports(t){return t instanceof Map||Io(t)}create(){return new pu}}class pu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Io(t)))throw new Error(`Error trying to diff '${rt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new fu(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class fu{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function du(){return new mu([new iu])}let mu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||du()),deps:[[t,new wr,new br]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ft({token:t,providedIn:"root",factory:du}),t})();function gu(){return new vu([new hu])}let vu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||gu()),deps:[[t,new wr,new br]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ft({token:t,providedIn:"root",factory:gu}),t})();function yu(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(we(s)),re(s))for(let t=ee;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&yu(e[1],e,n,r)}const o=n.type;if(8&o)yu(t,e,n.child,r);else if(32&o){const t=vi(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Mi(e,n);if(Array.isArray(t))r.push(...t);else{const n=yi(e[16]);yu(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class bu{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return yu(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(re(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ci(t,n),nr(e,n))}this._attachedToViewContainer=!1}Ai(this._lView[1],this._lView)}onDestroy(t){Ss(this._lView[1],this._lView,null,t)}markForCheck(){Hs(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){zs(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){He(!0);try{zs(t,e,n)}finally{He(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ji(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class wu extends bu{constructor(t){super(t),this._view=t}detectChanges(){Ks(this._view)}checkNoChanges(){!function(t){He(!0);try{Ks(t)}finally{He(!1)}}(this._view)}get context(){return null}}const xu=function(t){return function(t,e,n){if(se(t)&&!n){const n=Ce(t.index,e);return new bu(n,n)}return 47&t.type?new bu(e[16],e):null}(Ne(),Fe(),16==(16&t))};let Eu=(()=>{class t{}return t.__NG_ELEMENT_ID__=xu,t})();const _u=[new hu],Su=new mu([new iu]),Cu=new vu(_u),Au=function(){return Pu(Ne(),Fe())};let Iu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Au,t})();const Tu=Iu,ku=class extends Tu{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ps(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),ms(e,n,t),new bu(n)}};function Pu(t,e){return 4&t.type?new ku(e,t,$a(t,e)):null}class Ru{}class Du{}const Fu=function(){return Vu(Ne(),Fe())};let Bu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Fu,t})();const Ou=Bu,Nu=class extends Ou{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return $a(this._hostTNode,this._hostLView)}get injector(){return new Kn(this._hostTNode,this._hostLView)}get parentInjector(){const t=Dn(this._hostTNode,this._hostLView);if(_n(t)){const e=Cn(t,this._hostLView),n=Sn(t);return new Kn(e[1].data[n+8],e)}return new Kn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Mu(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ee}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(Ru,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(re(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Nu(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=ee+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-ee?(e[4]=n[i],er(n,ee+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=Li(i,s),a=n[11],u=Di(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,ji(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),er(Lu(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Mu(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ci(this._lContainer,e);n&&(nr(Lu(this._lContainer),e),Ai(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ci(this._lContainer,e);return n&&null!=nr(Lu(this._lContainer),e)?new bu(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Mu(t){return t[8]}function Lu(t){return t[8]||(t[8]=[])}function Vu(t,e){let n;const r=e[t.index];if(re(r))n=r;else{let i;if(8&t.type)i=we(r);else{const n=e[11];i=n.createComment("");const r=Ee(t,e);ki(n,Di(n,r),i,function(t,e){return ye(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ms(r,e,i,t),Us(e,n)}return new Nu(n,t,e)}const ju={};class Uu extends Wa{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Zt(t);return new Ku(e,this.ngModule)}}function Hu(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const zu=new Qn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pi});class Ku extends Ka{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(es).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Hu(this.componentDef.inputs)}get outputs(){return Hu(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,ju,i);return s!==ju||r===ju?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(Za,be),o=i.get(eu,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(ye(t))return t.selectRootElement(e,n===Tt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):_i(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?me:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:pi,clean:Ws,playerHandler:null,flags:0},p=_s(0,null,null,1,0,null,null,null,null,null),f=ps(null,p,h,l,null,null,s,a,o,i);let d,m;tn(f);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=fs(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Js(a,u,!0),null!==t&&(yn(i,t,u),null!==a.classes&&zi(i,t,a.classes),null!==a.styles&&Hi(i,t,a.styles)));const c=r.createRenderer(t,e),l=ps(n,Es(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Fn(kn(a,n),o,e.type),Ps(o,a),Ds(a,n.length,1)),Us(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)yn(a,c,["ng-version",ru.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Qi(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&yn(a,c,t),e&&e.length>0&&zi(a,c,e.join(" "))}if(m=_e(p,te),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}d=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Ne();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Fs(t,r,e,ds(t,e,1,null),n));const i=Un(e,t,r.directiveStart,r);ai(i,e);const s=Ee(r,e);return s&&ai(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Ne();e.contentQueries(1,o,t.directiveStart)}const a=Ne();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(un(a.index),Ts(n[1],a,0,a.directiveStart,a.directiveEnd,e),ks(e,o)),o}(t,this.componentDef,f,h,[vo]),ms(p,f,null)}finally{on()}return new qu(this.componentType,d,$a(m,f),f,m)}}class qu extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new wu(r),this.componentType=t}get injector(){return new Kn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Wu=new Map;class Gu extends Ru{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Uu(this);const n=Jt(t),r=t[jt]||null;r&&Oa(r),this._bootstrapComponents=mi(n.bootstrap),this._r3Injector=ao(t,e,[{provide:Ru,useValue:this},{provide:Wa,useValue:this.componentFactoryResolver}],rt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=go.THROW_IF_NOT_FOUND,n=Et.Default){return t===go||t===Ru||t===to?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class $u extends Du{constructor(t){super(),this.moduleType=t,null!==Jt(t)&&function(t){const e=new Set;!function t(n){const r=Jt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${rt(e)} vs ${rt(e.name)}`)}(i,Wu.get(i),n),Wu.set(i,n));const s=mi(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Gu(this.moduleType,t)}}function Xu(t,e,n,r){return function(t,e,n,r,i,s){const o=e+n;return ko(t,o,i)?To(t,o+1,s?r.call(s,i):r(i)):Qu(t,o+1)}(Fe(),ze(),t,e,n,r)}function Qu(t,e){const n=t[e];return n===ns?void 0:n}function Yu(t,e,n,r,i){const s=t+te,o=Fe(),a=Se(o,s);return function(t,e){return Co.isWrapped(e)&&(e=Co.unwrap(e),t[Ke()]=ns),e}(o,function(t,e){return t[1].data[e].pure}(o,s)?function(t,e,n,r,i,s,o,a){const u=e+n;return function(t,e,n,r,i){const s=Po(t,e,n,r);return ko(t,e+2,i)||s}(t,u,i,s,o)?To(t,u+3,a?r.call(a,i,s,o):r(i,s,o)):Qu(t,u+3)}(o,ze(),e,a.transform,n,r,i,a):a.transform(n,r,i))}function Zu(t){return e=>{setTimeout(t,void 0,e)}}const Ju=class extends _{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,i,s;let o=t,a=e||(()=>null),u=n;if(t&&"object"==typeof t){const e=t;o=null===(r=e.next)||void 0===r?void 0:r.bind(e),a=null===(i=e.error)||void 0===i?void 0:i.bind(e),u=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(a=Zu(a),o&&(o=Zu(o)),u&&(u=Zu(u)));const c=super.subscribe({next:o,error:a,complete:u});return t instanceof h&&t.add(c),c}};function tc(){return this._results[So()]()}class ec{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=So(),n=ec.prototype;n[e]||(n[e]=tc)}get changes(){return this._changes||(this._changes=new Ju)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Jn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class nc{constructor(t){this.queryList=t,this.matches=null}clone(){return new nc(this.queryList)}setDirty(){this.queryList.setDirty()}}class rc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new rc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==vc(t,e).matches&&this.queries[e].setDirty()}}class ic{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class sc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new sc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class oc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new oc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,ac(e,i)),this.matchTNodeWithReadOption(t,e,jn(e,t,i,!1,!1))}else n===Iu?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,jn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Qa||r===Bu||r===Iu&&4&e.type)this.addMatch(e.index,-2);else{const n=jn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function ac(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function uc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?$a(t,e):4&t.type?Pu(t,e):null}(e,t):-2===n?function(t,e,n){return n===Qa?$a(e,t):n===Iu?Pu(e,t):n===Bu?Vu(e,t):void 0}(t,e,r):Un(t,t[1],n,e)}function cc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:uc(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function lc(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=cc(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=ee;t<o.length;t++){const e=o[t];e[17]===e[3]&&lc(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];lc(n[1],n,i,r)}}}}}return r}function hc(t){const e=Fe(),n=Be(),r=Qe();Ye(r+1);const i=vc(n,r);if(t.dirty&&Ae(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?lc(n,e,r,[]):cc(n,e,i,r);t.reset(s,Ya),t.notifyOnChanges()}return!0}return!1}function pc(t,e,n){const r=Be();r.firstCreatePass&&(gc(r,new ic(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),mc(r,Fe(),e)}function fc(t,e,n,r){const i=Be();if(i.firstCreatePass){const s=Ne();gc(i,new ic(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}mc(i,Fe(),n)}function dc(){return t=Fe(),e=Qe(),t[19].queries[e].queryList;var t,e}function mc(t,e,n){const r=new ec(4==(4&n));Ss(t,e,r,r.destroy),null===e[19]&&(e[19]=new rc),e[19].queries.push(new nc(r))}function gc(t,e,n){null===t.queries&&(t.queries=new sc),t.queries.track(new oc(e,n))}function vc(t,e){return t.queries.getByIndex(e)}function yc(t,e){return Pu(t,e)}const bc=new Qn("Application Initializer");let wc=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ga,this.reject=Ga,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Ko(e))t.push(e);else if(qo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(dr(bc,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const xc=new Qn("AppId"),Ec={provide:xc,useFactory:function(){return`${_c()}${_c()}${_c()}`},deps:[]};function _c(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sc=new Qn("Platform Initializer"),Cc=new Qn("Platform ID"),Ac=new Qn("appBootstrapListener");let Ic=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Tc=new Qn("LocaleId"),kc=new Qn("DefaultCurrencyCode");class Pc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Rc=function(t){return new $u(t)},Dc=Rc,Fc=function(t){return Promise.resolve(Rc(t))},Bc=function(t){const e=Rc(t),n=mi(Jt(t).declarations).reduce((t,e)=>{const n=Zt(e);return n&&t.push(new Ku(n)),t},[]);return new Pc(e,n)},Oc=Bc,Nc=function(t){return Promise.resolve(Bc(t))};let Mc=(()=>{class t{constructor(){this.compileModuleSync=Dc,this.compileModuleAsync=Fc,this.compileModuleAndAllComponentsSync=Oc,this.compileModuleAndAllComponentsAsync=Nc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Lc=(()=>Promise.resolve(0))();function Vc(t){"undefined"==typeof Zone?Lc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class jc{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ju(!1),this.onMicrotaskEmpty=new Ju(!1),this.onStable=new Ju(!1),this.onError=new Ju(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=Ft.requestAnimationFrame,e=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ft,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,zc(t),t.isCheckStableRunning=!0,Hc(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),zc(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Kc(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),qc(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Kc(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),qc(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,zc(t),Hc(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!jc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(jc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,Uc,Ga,Ga);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Uc={};function Hc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function zc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Kc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function qc(t){t._nesting--,Hc(t)}class Wc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ju,this.onMicrotaskEmpty=new Ju,this.onStable=new Ju,this.onError=new Ju}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Gc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{jc.assertNotInAngularZone(),Vc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(dr(jc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),$c=(()=>{class t{constructor(){this._applications=new Map,Yc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Yc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class Xc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Qc,Yc=new Xc,Zc=!0,Jc=!1;function tl(){return Jc=!0,Zc}const el=new Qn("AllowMultipleToken");class nl{constructor(t,e){this.name=t,this.token=e}}function rl(t,e,n=[]){const r=`Platform: ${e}`,i=new Qn(r);return(e=[])=>{let s=il();if(!s||s.injector.get(el,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:no,useValue:"platform"});!function(t){if(Qc&&!Qc.destroyed&&!Qc.injector.get(el,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Qc=t.get(sl);const e=t.get(Sc,null);e&&e.forEach(t=>t())}(go.create({providers:t,name:r}))}return function(t){const e=il();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function il(){return Qc&&!Qc.destroyed?Qc:null}let sl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Wc:("zone.js"===t?void 0:t)||new jc({enableLongStackTrace:tl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:jc,useValue:n}];return n.run(()=>{const e=go.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(hi,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{ul(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ko(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(BA){throw e.runOutsideAngular(()=>t.handleError(BA)),BA}}(s,n,()=>{const t=i.injector.get(wc);return t.runInitializers(),t.donePromise.then(()=>(Oa(i.injector.get(Tc,Fa)||Fa),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=ol({},e);return function(t,e,n){const r=new $u(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(al);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${rt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(dr(go))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function ol(t,e){return Array.isArray(e)?e.reduce(ol,t):Object.assign(Object.assign({},t),e)}let al=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),o=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{jc.assertNotInAngularZone(),Vc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{jc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=K(s,o.pipe(tt()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ka?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=function(t){return t.isBoundToModule}(n)?void 0:this._injector.get(Ru),i=n.create(go.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(Gc,null),a=o&&i.injector.get($c);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),ul(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(BA){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(BA))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ul(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ac,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(dr(jc),dr(go),dr(hi),dr(Wa),dr(wc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function ul(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class cl{}class ll{}const hl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let pl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||hl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>fl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>fl(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(dr(Mc),dr(ll,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function fl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const dl=rl(null,"core",[{provide:Cc,useValue:"unknown"},{provide:sl,deps:[go]},{provide:$c,deps:[]},{provide:Ic,deps:[]}]),ml=[{provide:al,useClass:al,deps:[jc,go,hi,Wa,wc]},{provide:zu,deps:[jc],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:wc,useClass:wc,deps:[[new br,bc]]},{provide:Mc,useClass:Mc,deps:[]},Ec,{provide:mu,useFactory:function(){return Su},deps:[]},{provide:vu,useFactory:function(){return Cu},deps:[]},{provide:Tc,useFactory:function(t){return Oa(t=t||"undefined"!=typeof $localize&&$localize.locale||Fa),t},deps:[[new yr(Tc),new br,new wr]]},{provide:kc,useValue:"USD"}];let gl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(dr(al))},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:ml}),t})(),vl=null;function yl(){return vl}const bl=new Qn("DocumentToken");let wl=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:xl,token:t,providedIn:"platform"}),t})();function xl(){return dr(_l)}const El=new Qn("Location Initialized");let _l=(()=>{class t extends wl{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return yl().getBaseHref(this._doc)}onPopState(t){const e=yl().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=yl().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Sl()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Sl()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(dr(bl))},t.\u0275prov=ft({factory:Cl,token:t,providedIn:"platform"}),t})();function Sl(){return!!window.history.pushState}function Cl(){return new _l(dr(bl))}function Al(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Il(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Tl(t){return t&&"?"!==t[0]?"?"+t:t}let kl=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:Pl,token:t,providedIn:"root"}),t})();function Pl(t){const e=dr(bl).location;return new Dl(dr(wl),e&&e.origin||"")}const Rl=new Qn("appBaseHref");let Dl=(()=>{class t extends kl{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Al(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Tl(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Tl(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Tl(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(dr(wl),dr(Rl,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Fl=(()=>{class t extends kl{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Al(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Tl(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Tl(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(dr(wl),dr(Rl,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Bl=(()=>{class t{constructor(t,e){this._subject=new Ju,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Il(Nl(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Tl(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Nl(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tl(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tl(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(dr(kl),dr(wl))},t.normalizeQueryParams=Tl,t.joinWithSlash=Al,t.stripTrailingSlash=Il,t.\u0275prov=ft({factory:Ol,token:t,providedIn:"root"}),t})();function Ol(){return new Bl(dr(kl),dr(wl))}function Nl(t){return t.replace(/\/index.html$/,"")}var Ml=(()=>((Ml=Ml||{})[Ml.Zero=0]="Zero",Ml[Ml.One=1]="One",Ml[Ml.Two=2]="Two",Ml[Ml.Few=3]="Few",Ml[Ml.Many=4]="Many",Ml[Ml.Other=5]="Other",Ml))();class Ll{}let Vl=(()=>{class t extends Ll{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ra(e);if(n)return n;const r=e.split("-")[0];if(n=Ra(r),n)return n;if("en"===r)return ka;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Da.PluralCase]}(e||this.locale)(t)){case Ml.Zero:return"zero";case Ml.One:return"one";case Ml.Two:return"two";case Ml.Few:return"few";case Ml.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(dr(Tc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function jl(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let Ul=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Ao(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${rt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(Oo(mu),Oo(vu),Oo(Qa),Oo(Ja))},t.\u0275dir=Qt({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class Hl{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zl=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(wS){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Hl(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Kl(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new Kl(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Oo(Bu),Oo(Iu),Oo(mu))},t.\u0275dir=Qt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Kl{constructor(t,e){this.record=t,this.view=e}}let ql=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Wl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Gl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Gl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Oo(Bu),Oo(Iu))},t.\u0275dir=Qt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Wl{constructor(){this.$implicit=null,this.ngIf=null}}function Gl(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${rt(e)}'.`)}class $l{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Xl=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),Ql=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new $l(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(Oo(Bu),Oo(Iu),Oo(Xl,9))},t.\u0275dir=Qt({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),Yl=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(vu),Oo(Ja))},t.\u0275dir=Qt({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),Zl=(()=>{class t{transform(e,n,r){if(null==e)return null;if(!this.supports(e))throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${rt(t)}'`)}(t,e);return e.slice(n,r)}supports(t){return"string"==typeof t||Array.isArray(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Yt({name:"slice",type:t,pure:!1}),t})(),Jl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[{provide:Ll,useClass:Vl}]}),t})();function th(t){return"browser"===t}let eh=(()=>{class t{}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>new nh(dr(bl),window)}),t})();class nh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=rh(this.window.history)||rh(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(wS){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(wS){return!1}}}function rh(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class ih{}class sh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new sh,vl||(vl=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(ah=ah||document.querySelector("base"),ah?ah.getAttribute("href"):null);return null==e?null:function(t){oh=oh||document.createElement("a"),oh.setAttribute("href",t);const e=oh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){ah=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return jl(document.cookie,t)}}let oh,ah=null;const uh=new Qn("TRANSITION_ID"),ch=[{provide:bc,useFactory:function(t,e,n){return()=>{n.get(wc).donePromise.then(()=>{const n=yl();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[uh,bl,go],multi:!0}];class lh{static init(){var t;t=new lh,Yc=t}addToWindow(t){Ft.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Ft.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ft.getAllAngularRootElements=()=>t.getAllRootElements(),Ft.frameworkStabilizers||(Ft.frameworkStabilizers=[]),Ft.frameworkStabilizers.push(t=>{const e=Ft.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?yl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let hh=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const ph=new Qn("EventManagerPlugins");let fh=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(dr(ph),dr(jc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class dh{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=yl().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let mh=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),gh=(()=>{class t extends mh{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(vh),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(vh))}}return t.\u0275fac=function(e){return new(e||t)(dr(bl))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function vh(t){yl().remove(t)}const yh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bh=/%COMP%/g;function wh(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?wh(t,i,n):(i=i.replace(bh,t),n.push(i))}return n}function xh(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Eh=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new _h(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Tt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Sh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case Tt.ShadowDom:return new Ch(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=wh(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(dr(fh),dr(gh),dr(xc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class _h{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(yh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=yh[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=yh[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(gi.DashCase|gi.Important)?t.style.setProperty(e,n,r&gi.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&gi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,xh(n)):this.eventManager.addEventListener(t,e,xh(n))}}class Sh extends _h{constructor(t,e,n,r){super(t),this.component=n;const i=wh(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(bh,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(bh,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Ch extends _h{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=wh(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ah=(()=>{class t extends dh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(dr(bl))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Ih=["alt","control","meta","shift"],Th={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ph={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Rh=(()=>{class t extends dh{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yl().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(Ih.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&kh.hasOwnProperty(e)&&(e=kh[e]))}return Th[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Ih.forEach(r=>{r!=n&&(0,Ph[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(dr(bl))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Dh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return dr(Bh)},token:t,providedIn:"root"}),t})();function Fh(t){return new Bh(t.get(bl))}let Bh=(()=>{class t extends Dh{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case ri.NONE:return e;case ri.HTML:return Dr(e,"HTML")?Rr(e):ei(this._doc,String(e)).toString();case ri.STYLE:return Dr(e,"Style")?Rr(e):e;case ri.SCRIPT:if(Dr(e,"Script"))return Rr(e);throw new Error("unsafe value used in a script context");case ri.URL:return Fr(e),Dr(e,"URL")?Rr(e):Lr(String(e));case ri.RESOURCE_URL:if(Dr(e,"ResourceURL"))return Rr(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new Ar(t)}bypassSecurityTrustStyle(t){return new Ir(t)}bypassSecurityTrustScript(t){return new Tr(t)}bypassSecurityTrustUrl(t){return new kr(t)}bypassSecurityTrustResourceUrl(t){return new Pr(t)}}return t.\u0275fac=function(e){return new(e||t)(dr(bl))},t.\u0275prov=ft({factory:function(){return Fh(dr(to))},token:t,providedIn:"root"}),t})();const Oh=rl(dl,"browser",[{provide:Cc,useValue:"browser"},{provide:Sc,useValue:function(){sh.makeCurrent(),lh.init()},multi:!0},{provide:bl,useFactory:function(){return function(t){ge=t}(document),document},deps:[]}]),Nh=[[],{provide:no,useValue:"root"},{provide:hi,useFactory:function(){return new hi},deps:[]},{provide:ph,useClass:Ah,multi:!0,deps:[bl,jc,Cc]},{provide:ph,useClass:Rh,multi:!0,deps:[bl]},[],{provide:Eh,useClass:Eh,deps:[fh,gh,xc]},{provide:Za,useExisting:Eh},{provide:mh,useExisting:gh},{provide:gh,useClass:gh,deps:[bl]},{provide:Gc,useClass:Gc,deps:[jc]},{provide:fh,useClass:fh,deps:[ph,jc]},{provide:ih,useClass:hh,deps:[]},[]];let Mh=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:xc,useValue:e.appId},{provide:uh,useExisting:xc},ch]}}}return t.\u0275fac=function(e){return new(e||t)(dr(t,12))},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:Nh,imports:[Jl,gl]}),t})();function Lh(...t){let e=t[t.length-1];return C(e)?(t.pop(),B(t,e)):z(t)}"undefined"!=typeof window&&window;class Vh extends _{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new w;return this._value}next(t){super.next(this._value=t)}}class jh extends d{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Uh extends d{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Hh(t,e,n,r,i=new Uh(t,n,r)){if(!i.closed)return e instanceof y?e.subscribe(i):F(e)(i)}const zh={};class Kh{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new qh(t,this.resultSelector))}}class qh extends jh{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(zh),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Hh(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===zh?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Wh=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Gh(...t){return H(1)(Lh(...t))}const $h=new y(t=>t.complete());function Xh(t){return t?function(t){return new y(e=>t.schedule(()=>e.complete()))}(t):$h}function Qh(t){return new y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?O(n):Xh()).subscribe(e)})}function Yh(t,e){return"function"==typeof e?n=>n.pipe(Yh((n,r)=>O(t(n,r)).pipe(A((t,i)=>e(n,t,r,i))))):e=>e.lift(new Zh(t))}class Zh{constructor(t){this.project=t}call(t,e){return e.subscribe(new Jh(t,this.project))}}class Jh extends M{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new N(this),r=this.destination;r.add(n),this.innerSubscription=L(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const tp=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function ep(t){return e=>0===t?Xh():e.lift(new np(t))}class np{constructor(t){if(this.total=t,this.total<0)throw new tp}call(t,e){return e.subscribe(new rp(t,this.total))}}class rp extends d{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ip(...t){const e=t[t.length-1];return C(e)?(t.pop(),n=>Gh(t,n,e)):e=>Gh(t,e)}function sp(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new op(t,e,n))}}class op{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ap(t,this.accumulator,this.seed,this.hasSeed))}}class ap extends d{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function up(t,e){return function(n){return n.lift(new cp(t,e))}}class cp{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new lp(t,this.predicate,this.thisArg))}}class lp extends d{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function hp(t){return function(e){const n=new pp(t),r=e.lift(n);return n.caught=r}}class pp{constructor(t){this.selector=t}call(t,e){return e.subscribe(new fp(t,this.selector,this.caught))}}class fp extends M{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new N(this);this.add(r);const i=L(n,r);i!==r&&this.add(i)}}}function dp(t,e){return V(t,e,1)}function mp(t){return function(e){return 0===t?Xh():e.lift(new gp(t))}}class gp{constructor(t){if(this.total=t,this.total<0)throw new tp}call(t,e){return e.subscribe(new vp(t,this.total))}}class vp extends d{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function yp(t=xp){return e=>e.lift(new bp(t))}class bp{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new wp(t,this.errorFactory))}}class wp extends d{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(BA){t=BA}this.destination.error(t)}}}function xp(){return new Wh}function Ep(t=null){return e=>e.lift(new _p(t))}class _p{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Sp(t,this.defaultValue))}}class Sp extends d{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Cp(t,e){const n=arguments.length>=2;return r=>r.pipe(t?up((e,n)=>t(e,n,r)):v,ep(1),n?Ep(e):yp(()=>new Wh))}function Ap(){}function Ip(t,e,n){return function(r){return r.lift(new Tp(t,e,n))}}class Tp{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new kp(t,this.nextOrObserver,this.error,this.complete))}}class kp extends d{constructor(t,e,n,i){super(t),this._tapNext=Ap,this._tapError=Ap,this._tapComplete=Ap,this._tapError=n||Ap,this._tapComplete=i||Ap,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Ap,this._tapError=e.error||Ap,this._tapComplete=e.complete||Ap)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function Pp(t){return e=>e.lift(new Rp(t))}class Rp{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Dp(t,this.callback))}}class Dp extends d{constructor(t,e){super(t),this.add(new h(e))}}class Fp{constructor(t,e){this.id=t,this.url=e}}class Bp extends Fp{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Op extends Fp{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Np extends Fp{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mp extends Fp{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lp extends Fp{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vp extends Fp{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jp extends Fp{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Up extends Fp{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hp extends Fp{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zp{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Kp{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qp{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wp{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gp{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $p{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xp{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qp="primary";class Yp{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Zp(t){return new Yp(t)}function Jp(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function tf(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ef(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!nf(t[i],e[i]))return!1;return!0}function nf(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function rf(t){return Array.prototype.concat.apply([],t)}function sf(t){return t.length>0?t[t.length-1]:null}function of(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function af(t){return qo(t)?t:Ko(t)?O(Promise.resolve(t)):Lh(t)}const uf={exact:function t(e,n,r){if(!vf(e.segments,n.segments))return!1;if(!ff(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:hf},cf={exact:function(t,e){return ef(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>nf(t[n],e[n]))},ignored:()=>!0};function lf(t,e,n){return uf[n.paths](t.root,e.root,n.matrixParams)&&cf[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function hf(t,e,n){return pf(t,e,e.segments,n)}function pf(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!vf(i,n)&&!e.hasChildren()&&!!ff(i,n,r)}if(t.segments.length===n.length){if(!vf(t.segments,n))return!1;if(!ff(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!hf(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!vf(t.segments,i)&&!!ff(t.segments,i,r)&&!!t.children.primary&&pf(t.children.primary,e,s,r)}}function ff(t,e,n){return e.every((e,r)=>cf[n](t[r].parameters,e.parameters))}class df{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zp(this.queryParams)),this._queryParamMap}toString(){return wf.serialize(this)}}class mf{constructor(t,e){this.segments=t,this.children=e,this.parent=null,of(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xf(this)}}class gf{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Zp(this.parameters)),this._parameterMap}toString(){return Tf(this)}}function vf(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class yf{}class bf{parse(t){const e=new Ff(t);return new df(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`/${Ef(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Sf(e)}=${Sf(t)}`).join("&"):`${Sf(e)}=${Sf(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(t){return encodeURI(t)}(t.fragment)}`:""}`}}const wf=new bf;function xf(t){return t.segments.map(t=>Tf(t)).join("/")}function Ef(t,e){if(!t.hasChildren())return xf(t);if(e){const e=t.children.primary?Ef(t.children.primary,!1):"",n=[];return of(t.children,(t,e)=>{e!==Qp&&n.push(`${e}:${Ef(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return of(t.children,(t,r)=>{r===Qp&&(n=n.concat(e(t,r)))}),of(t.children,(t,r)=>{r!==Qp&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Qp?[Ef(t.children.primary,!1)]:[`${n}:${Ef(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${xf(t)}/${e[0]}`:`${xf(t)}/(${e.join("//")})`}}function _f(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sf(t){return _f(t).replace(/%3B/gi,";")}function Cf(t){return _f(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Af(t){return decodeURIComponent(t)}function If(t){return Af(t.replace(/\+/g,"%20"))}function Tf(t){return`${Cf(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Cf(t)}=${Cf(e[t])}`).join("")}`;var e}const kf=/^[^\/()?;=#]+/;function Pf(t){const e=t.match(kf);return e?e[0]:""}const Rf=/^[^=?&#]+/,Df=/^[^?&#]+/;class Ff{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mf([],{}):new mf([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new mf(t,e)),n}parseSegment(){const t=Pf(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new gf(Af(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Pf(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Pf(this.remaining);t&&(n=t,this.capture(n))}t[Af(e)]=Af(n)}parseQueryParam(t){const e=function(t){const e=t.match(Rf);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Df);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=If(e),i=If(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Pf(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Qp);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new mf([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Bf{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Of(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Of(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Nf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Nf(t,this._root).map(t=>t.value)}}function Of(t,e){if(t===e.value)return e;for(const n of e.children){const e=Of(t,n);if(e)return e}return null}function Nf(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Nf(t,n);if(r.length)return r.unshift(e),r}return[]}class Mf{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Lf(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Vf extends Bf{constructor(t,e){super(t),this.snapshot=e,qf(this,t)}toString(){return this.snapshot.toString()}}function jf(t,e){const n=function(t,e){const n=new zf([],{},{},"",{},Qp,e,null,t.root,-1,{});return new Kf("",new Mf(n,[]))}(t,e),r=new Vh([new gf("",{})]),i=new Vh({}),s=new Vh({}),o=new Vh({}),a=new Vh(""),u=new Uf(r,i,o,a,s,Qp,e,n.root);return u.snapshot=n.root,new Vf(new Mf(u,[]),n)}class Uf{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(A(t=>Zp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(A(t=>Zp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hf(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class zf{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Kf extends Bf{constructor(t,e){super(e),this.url=t,qf(this,e)}toString(){return Wf(this._root)}}function qf(t,e){e.value._routerState=t,e.children.forEach(e=>qf(t,e))}function Wf(t){const e=t.children.length>0?` { ${t.children.map(Wf).join(", ")} } `:"";return`${t.value}${e}`}function Gf(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ef(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ef(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ef(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ef(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function $f(t,e){return ef(t.params,e.params)&&function(t,e){return vf(t,e)&&t.every((t,n)=>ef(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||$f(t.parent,e.parent))}function Xf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Xf(t,e,r);return Xf(t,e)})}(t,e,n);return new Mf(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Qf(e,t),t}}const n=function(t){return new Uf(new Vh(t.url),new Vh(t.params),new Vh(t.queryParams),new Vh(t.fragment),new Vh(t.data),t.outlet,t.component,t)}(e.value),r=e.children.map(e=>Xf(t,e));return new Mf(n,r)}}function Qf(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Qf(t.children[n],e.children[n])}function Yf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Zf(t){return"object"==typeof t&&null!=t&&t.outlets}function Jf(t,e,n,r,i){let s={};return r&&of(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new df(n.root===t?e:td(n.root,t,e),s,i)}function td(t,e,n){const r={};return of(t.children,(t,i)=>{r[i]=t===e?n:td(t,e,n)}),new mf(t.segments,r)}class ed{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Yf(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Zf);if(r&&r!==sf(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nd{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function rd(t,e,n){if(t||(t=new mf([],{})),0===t.segments.length&&t.hasChildren())return id(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(Zf(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!ud(a,u,e))return s;r+=2}else{if(!ud(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new mf(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new mf(t.segments.slice(r.pathIndex),t.children),id(e,0,i)}return r.match&&0===i.length?new mf(t.segments,{}):r.match&&!t.hasChildren()?sd(t,e,n):r.match?id(t,0,i):sd(t,e,n)}function id(t,e,n){if(0===n.length)return new mf(t.segments,{});{const r=function(t){return Zf(t[0])?t[0].outlets:{[Qp]:t}}(n),i={};return of(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=rd(t.children[r],e,n))}),of(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new mf(t.segments,i)}}function sd(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Zf(s)){const t=od(s.outlets);return new mf(r,t)}if(0===i&&Yf(n[0])){r.push(new gf(t.segments[e].path,ad(n[0]))),i++;continue}const o=Zf(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Yf(a)?(r.push(new gf(o,ad(a))),i+=2):(r.push(new gf(o,{})),i++)}return new mf(r,{})}function od(t){const e={};return of(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=sd(new mf([],{}),0,t))}),e}function ad(t){const e={};return of(t,(t,n)=>e[n]=`${t}`),e}function ud(t,e,n){return t==n.path&&ef(e,n.parameters)}class cd{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Gf(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Lf(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),of(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Lf(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Lf(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new $p(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Wp(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Gf(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ld(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ld(t){Gf(t.value),t.children.forEach(ld)}class hd{constructor(t,e){this.routes=t,this.module=e}}function pd(t){return"function"==typeof t}function fd(t){return t instanceof df}const dd=Symbol("INITIAL_VALUE");function md(){return Yh(t=>function(...t){let e,n;return C(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),z(t,n).lift(new Kh(e))}(t.map(t=>t.pipe(ep(1),ip(dd)))).pipe(sp((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==dd)return t;if(r===dd&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||fd(r))return r}return t},t)},dd),up(t=>t!==dd),A(t=>fd(t)?t:!0===t),ep(1)))}let gd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Kt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&jo(0,"router-outlet")},directives:function(){return[pm]},encapsulation:2}),t})();function vd(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];yd(r,bd(e,r))}}function yd(t,e){t.children&&vd(t.children,e)}function bd(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function wd(t){const e=t.children&&t.children.map(wd),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Qp&&(n.component=gd),n}function xd(t){return t.outlet||Qp}function Ed(t,e){const n=t.filter(t=>xd(t)===e);return n.push(...t.filter(t=>xd(t)!==e)),n}const _d={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Sd(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},_d):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||tf)(n,t,e);if(!i)return Object.assign({},_d);const s={};of(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Cd(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Ad(t,e,n)&&xd(n)!==Qp)}(t,n,r)){const i=new mf(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&xd(s)!==Qp){const n=new mf([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[xd(s)]=n}return i}(t,e,r,new mf(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Ad(t,e,n))}(t,n,r)){const s=new mf(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(Ad(t,n,a)&&!i[xd(a)]){const n=new mf([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[xd(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new mf(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Ad(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Id(t,e,n,r){return!!(xd(t)===r||r!==Qp&&Ad(e,n,t))&&("**"===t.path||Sd(e,t,n).matched)}function Td(t,e,n){return 0===e.length&&!t.children[n]}class kd{constructor(t){this.segmentGroup=t||null}}class Pd{constructor(t){this.urlTree=t}}function Rd(t){return new y(e=>e.error(new kd(t)))}function Dd(t){return new y(e=>e.error(new Pd(t)))}function Fd(t){return new y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Bd{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Ru)}apply(){const t=Cd(this.urlTree.root,[],[],this.config).segmentGroup,e=new mf(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Qp).pipe(A(t=>this.createUrlTree(Od(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(hp(t=>{if(t instanceof Pd)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof kd)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Qp).pipe(A(e=>this.createUrlTree(Od(e),t.queryParams,t.fragment))).pipe(hp(t=>{if(t instanceof kd)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new mf([],{[Qp]:t}):t;return new df(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(A(t=>new mf([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return O(r).pipe(dp(r=>{const i=n.children[r],s=Ed(e,r);return this.expandSegmentGroup(t,s,i,r).pipe(A(t=>({segment:t,outlet:r})))}),sp((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?up((e,n)=>t(e,n,r)):v,mp(1),n?Ep(e):yp(()=>new Wh))}())}expandSegment(t,e,n,r,i,s){return O(n).pipe(dp(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(hp(t=>{if(t instanceof kd)return Lh(null);throw t}))),Cp(t=>!!t),hp((t,n)=>{if(t instanceof Wh||"EmptyError"===t.name){if(Td(e,r,i))return Lh(new mf([],{}));throw new kd(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return Id(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):Rd(e):Rd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Dd(i):this.lineralizeSegments(n,i).pipe(V(n=>{const i=new mf(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Sd(e,r,i);if(!o)return Rd(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Dd(l):this.lineralizeSegments(r,l).pipe(V(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Lh(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(A(t=>(n._loadedConfig=t,new mf(r,{})))):Lh(new mf(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=Sd(e,n,r);if(!s)return Rd(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(V(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=Cd(e,o,u,s),l=new mf(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe(A(t=>new mf(o,t)));if(0===s.length&&0===c.length)return Lh(new mf(o,{}));const h=xd(n)===i;return this.expandSegment(r,l,s,c,h?Qp:i,!0).pipe(A(t=>new mf(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Lh(new hd(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Lh(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(V(n=>n?this.configLoader.load(t.injector,e).pipe(A(t=>(e._loadedConfig=t,t))):function(t){return new y(e=>e.error(Jp(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Lh(new hd([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Lh(r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&pd(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!pd(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return af(s)})).pipe(md(),Ip(t=>{if(!fd(t))return;const e=Jp(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),A(t=>!0===t)):Lh(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Lh(n);if(r.numberOfChildren>1||!r.children.primary)return Fd(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new df(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return of(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return of(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new mf(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Od(t){const e={};for(const n of Object.keys(t.children)){const r=Od(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new mf(t.segments.concat(e.segments),e.children)}return t}(new mf(t.segments,e))}class Nd{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Md{constructor(t,e){this.component=t,this.route=e}}function Ld(t,e,n){const r=t._root;return jd(r,e?e._root:null,n,[r.value])}function Vd(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function jd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Lf(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!vf(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vf(t.url,e.url)||!ef(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$f(t,e)||!ef(t.queryParams,e.queryParams);case"paramsChange":default:return!$f(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Nd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),jd(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Md(a.outlet.component,o))}else o&&Ud(e,a,i),i.canActivateChecks.push(new Nd(r)),jd(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),of(s,(t,e)=>Ud(t,n.getContext(e),i)),i}function Ud(t,e,n){const r=Lf(t),i=t.value;of(r,(t,r)=>{Ud(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Md(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Hd{}function zd(t){return new y(e=>e.error(t))}class Kd{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=Cd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Qp);if(null===e)return null;const n=new zf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qp,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Mf(n,e),i=new Kf(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Hf(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=Ed(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=Wd(n);return r.sort((t,e)=>t.value.outlet===Qp?-1:e.value.outlet===Qp?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Td(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Id(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?sf(n).parameters:{};i=new zf(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xd(t),xd(t),t.component,t,Gd(e),$d(e)+n.length,Qd(t))}else{const r=Sd(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new zf(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xd(t),xd(t),t.component,t,Gd(e),$d(e)+s.length,Qd(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Cd(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Mf(i,t)]}if(0===a.length&&0===c.length)return[new Mf(i,[])];const l=xd(t)===r,h=this.processSegment(a,u,c,l?Qp:r);return null===h?null:[new Mf(i,h)]}}function qd(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Wd(t){const e=[],n=new Set;for(const r of t){if(!qd(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Wd(r.children);e.push(new Mf(r.value,t))}return e.filter(t=>!n.has(t))}function Gd(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function $d(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Xd(t){return t.data||{}}function Qd(t){return t.resolve||{}}function Yd(t){return Yh(e=>{const n=t(e);return n?O(n).pipe(A(()=>e)):Lh(e)})}class Zd extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Jd=new Qn("ROUTES");class tm{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(A(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new hd(rf(r.injector.get(Jd,void 0,Et.Self|Et.Optional)).map(wd),r)}),hp(t=>{throw e._loader$=void 0,t}));return e._loader$=new $(n,()=>new _).pipe(q()),e._loader$}loadModuleFactory(t){return"string"==typeof t?O(this.loader.load(t)):af(t()).pipe(V(t=>t instanceof Du?Lh(t):O(this.compiler.compileModuleAsync(t))))}}class em{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new nm,this.attachRef=null}}class nm{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new em,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class rm{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function im(t){throw t}function sm(t,e,n){return e.parse("/")}function om(t,e){return Lh(null)}const am={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},um={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let cm=(()=>{class t{constructor(t,e,n,r,i,s,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _,this.errorHandler=im,this.malformedUriErrorHandler=sm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:om,afterPreactivation:om},this.urlHandlingStrategy=new rm,this.routeReuseStrategy=new Zd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=i.get(Ru),this.console=i.get(Ic);const u=i.get(jc);this.isNgZoneEnabled=u instanceof jc&&jc.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new df(new mf([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new tm(s,o,t=>this.triggerEvent(new zp(t)),t=>this.triggerEvent(new Kp(t))),this.routerState=jf(this.currentUrlTree,this.rootComponentType),this.transitions=new Vh({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe(up(t=>0!==t.id),A(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Yh(t=>{let n=!1,r=!1;return Lh(t).pipe(Ip(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Yh(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Lh(t).pipe(Yh(t=>{const n=this.transitions.getValue();return e.next(new Bp(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?$h:Promise.resolve(t)}),function(t,e,n,r){return Yh(i=>function(t,e,n,r,i){return new Bd(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(A(t=>Object.assign(Object.assign({},i),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ip(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return V(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new Kd(t,e,n,r,i,s).recognize();return null===o?zd(new Hd):Lh(o)}catch(BA){return zd(BA)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(A(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ip(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Lp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new Bp(n,this.serializeUrl(r),i,s);e.next(a);const u=jf(r,this.rootComponentType).snapshot;return Lh(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),$h}),Yd(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),Ip(t=>{const e=new Vp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),A(t=>Object.assign(Object.assign({},t),{guards:Ld(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return V(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Lh(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return O(t).pipe(V(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Lh(s.map(s=>{const o=Vd(s,e,i);let a;if(function(t){return t&&pd(t.canDeactivate)}(o))a=af(o.canDeactivate(t,e,n,r));else{if(!pd(o))throw new Error("Invalid CanDeactivate guard");a=af(o(t,e,n,r))}return a.pipe(Cp())})).pipe(md()):Lh(!0)}(t.component,t.route,n,e,r)),Cp(t=>!0!==t,!0))}(o,r,i,t).pipe(V(n=>n&&"boolean"==typeof n?function(t,e,n,r){return O(e).pipe(dp(e=>Gh(function(t,e){return null!==t&&e&&e(new qp(t)),Lh(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Gp(t)),Lh(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Qh(()=>Lh(e.guards.map(i=>{const s=Vd(i,e.node,n);let o;if(function(t){return t&&pd(t.canActivateChild)}(s))o=af(s.canActivateChild(r,t));else{if(!pd(s))throw new Error("Invalid CanActivateChild guard");o=af(s(r,t))}return o.pipe(Cp())})).pipe(md())));return Lh(i).pipe(md())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Lh(r.map(r=>Qh(()=>{const i=Vd(r,e,n);let s;if(function(t){return t&&pd(t.canActivate)}(i))s=af(i.canActivate(e,t));else{if(!pd(i))throw new Error("Invalid CanActivate guard");s=af(i(e,t))}return s.pipe(Cp())}))).pipe(md()):Lh(!0)}(t,e.route,n))),Cp(t=>!0!==t,!0))}(r,s,t,e):Lh(n)),A(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Ip(t=>{if(fd(t.guardsResult)){const e=Jp(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new jp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),up(t=>!!t.guardsResult||(this.restoreHistory(t),this.cancelNavigationTransition(t,""),!1)),Yd(t=>{if(t.guards.canActivateChecks.length)return Lh(t).pipe(Ip(t=>{const e=new Up(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Yh(t=>{let e=!1;return Lh(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,V(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return Lh(t);let s=0;return O(i).pipe(dp(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Lh({});const s={};return O(i).pipe(V(i=>function(t,e,n,r){const i=Vd(t,e,r);return af(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Ip(t=>{s[i]=t}))),mp(1),V(()=>Object.keys(s).length===i.length?Lh(s):$h))}(t._resolve,t,e,r).pipe(A(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Hf(t,n).resolve),null)))}(t.route,e,n,r)),Ip(()=>s++),mp(1),V(e=>s===i.length?Lh(t):$h))})),Ip({next:()=>e=!0,complete:()=>{e||(this.restoreHistory(t),this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value."))}}));var n,r}),Ip(t=>{const e=new Hp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Yd(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),A(t=>{const e=function(t,e,n){const r=Xf(t,e._root,n?n._root:void 0);return new Vf(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Ip(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,s=this.routeReuseStrategy,o=t=>this.triggerEvent(t),A(t=>(new cd(s,t.targetRouterState,t.currentRouterState,o).activate(i),t))),Ip({next(){n=!0},complete(){n=!0}}),Pp(()=>{if(!n&&!r){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(t),this.cancelNavigationTransition(t,e)):this.cancelNavigationTransition(t,e)}this.currentNavigation=null}),hp(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=fd(n.url);r||(this.navigated=!0,this.restoreHistory(t,!0));const i=new Np(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.restoreHistory(t,!0);const r=new Mp(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(_T){t.reject(_T)}}var i;return $h}));var i,s,o}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){vd(t),this.config=t.map(wd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Jf(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ed(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return of(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new ed(n,e,r)}(n);if(s.toRoot())return Jf(e.root,new mf([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new nd(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new nd(t,t===e.root,0)}const r=Yf(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new nd(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?id(o.segmentGroup,o.index,s.commands):rd(o.segmentGroup,o.index,s.commands);return Jf(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=fd(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(BA){e=this.malformedUriErrorHandler(BA,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},am):!1===e?Object.assign({},um):e,fd(t))return lf(this.currentUrlTree,t,n);const r=this.parseUrl(t);return lf(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Op(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==e&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(u&&c)return Promise.resolve(!0);let l,h,p;i?(l=i.resolve,h=i.reject,p=i.promise):p=new Promise((t,e)=>{l=t,h=e});const f=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),d=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):d=0,this.setTransition({id:f,targetPageId:d,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:h,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(t,e=!1){var n,r;if("computed"===this.canceledNavigationResolution){const e=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===e?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===e&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(e)}else"replace"===this.canceledNavigationResolution&&(e&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){const n=new Np(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(dr(Zn),dr(yf),dr(nm),dr(Bl),dr(go),dr(cl),dr(Mc),dr(void 0))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),lm=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new _,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:hm(this.skipLocationChange),replaceUrl:hm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:hm(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Oo(cm),Oo(Uf),Gn("tabindex"),Oo(Ja),Oo(Qa))},t.\u0275dir=Qt({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Wo("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[le]}),t})();function hm(t){return""===t||!!t}let pm=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ju,this.deactivateEvents=new Ju,this.name=r||Qp,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new fm(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Oo(nm),Oo(Bu),Oo(Wa),Gn("name"),Oo(Eu))},t.\u0275dir=Qt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class fm{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Uf?this.route:t===nm?this.childContexts:this.parent.get(t,e)}}class dm{}class mm{preload(t,e){return Lh(null)}}let gm=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new tm(e,n,e=>t.triggerEvent(new zp(e)),e=>t.triggerEvent(new Kp(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(up(t=>t instanceof Op),dp(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Ru);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return O(n).pipe(H(),A(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Lh(e._loadedConfig):this.loader.load(t.injector,e)).pipe(V(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(dr(cm),dr(cl),dr(Mc),dr(go),dr(dm))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),vm=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Bp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Op&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Xp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(dr(cm),dr(eh),dr(void 0))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const ym=new Qn("ROUTER_CONFIGURATION"),bm=new Qn("ROUTER_FORROOT_GUARD"),wm=[Bl,{provide:yf,useClass:bf},{provide:cm,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new cm(null,t,e,n,r,i,s,rf(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[yf,nm,Bl,go,cl,Mc,Jd,ym,[class{},new br],[class{},new br]]},nm,{provide:Uf,useFactory:function(t){return t.routerState.root},deps:[cm]},{provide:cl,useClass:pl},gm,mm,class{preload(t,e){return e().pipe(hp(()=>Lh(null)))}},{provide:ym,useValue:{enableTracing:!1}}];function xm(){return new nl("Router",cm)}let Em=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[wm,Am(e),{provide:bm,useFactory:Cm,deps:[[cm,new br,new wr]]},{provide:ym,useValue:n||{}},{provide:kl,useFactory:Sm,deps:[wl,[new yr(Rl),new br],ym]},{provide:vm,useFactory:_m,deps:[cm,eh,ym]},{provide:dm,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:mm},{provide:nl,multi:!0,useFactory:xm},[Im,{provide:bc,multi:!0,useFactory:Tm,deps:[Im]},{provide:Pm,useFactory:km,deps:[Im]},{provide:Ac,multi:!0,useExisting:Pm}]]}}static forChild(e){return{ngModule:t,providers:[Am(e)]}}}return t.\u0275fac=function(e){return new(e||t)(dr(bm,8),dr(cm,8))},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})();function _m(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new vm(t,e,n)}function Sm(t,e,n={}){return n.useHash?new Fl(t,e):new Dl(t,e)}function Cm(t){return"guarded"}function Am(t){return[{provide:Yn,multi:!0,useValue:t},{provide:Jd,multi:!0,useValue:t}]}let Im=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new _}appInitializer(){return this.injector.get(El,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(cm),r=this.injector.get(ym);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Lh(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ym),n=this.injector.get(gm),r=this.injector.get(vm),i=this.injector.get(cm),s=this.injector.get(al);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(dr(go))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function Tm(t){return t.appInitializer.bind(t)}function km(t){return t.bootstrapListener.bind(t)}const Pm=new Qn("Router Initializer");class Rm{}class Dm{}class Fm{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Fm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Fm;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Fm?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Bm{encodeKey(t){return Om(t)}encodeValue(t){return Om(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Om(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Nm(t){return`${t}`}class Mm{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Bm,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,s]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Mm({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Nm(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(Nm(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Lm{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function Vm(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function jm(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Um(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Hm{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Fm),this.context||(this.context=new Lm),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Mm,this.urlWithParams=e}serializeBody(){return null===this.body?null:Vm(this.body)||jm(this.body)||Um(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Mm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Um(this.body)?null:jm(this.body)?this.body.type||null:Vm(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Mm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const l=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new Hm(n,r,s,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:o})}}var zm=(()=>((zm=zm||{})[zm.Sent=0]="Sent",zm[zm.UploadProgress=1]="UploadProgress",zm[zm.ResponseHeader=2]="ResponseHeader",zm[zm.DownloadProgress=3]="DownloadProgress",zm[zm.Response=4]="Response",zm[zm.User=5]="User",zm))();class Km{constructor(t,e=200,n="OK"){this.headers=t.headers||new Fm,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class qm extends Km{constructor(t={}){super(t),this.type=zm.ResponseHeader}clone(t={}){return new qm({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Wm extends Km{constructor(t={}){super(t),this.type=zm.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Wm({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Gm extends Km{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function $m(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Xm=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Hm)r=t;else{let i,s;i=n.headers instanceof Fm?n.headers:new Fm(n.headers),n.params&&(s=n.params instanceof Mm?n.params:new Mm({fromObject:n.params})),r=new Hm(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Lh(r).pipe(dp(t=>this.handler.handle(t)));if(t instanceof Hm||"events"===n.observe)return i;const s=i.pipe(up(t=>t instanceof Wm));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe(A(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe(A(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe(A(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe(A(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Mm).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,$m(n,e))}post(t,e,n={}){return this.request("POST",t,$m(n,e))}put(t,e,n={}){return this.request("PUT",t,$m(n,e))}}return t.\u0275fac=function(e){return new(e||t)(dr(Rm))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class Qm{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Ym=new Qn("HTTP_INTERCEPTORS");let Zm=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Jm=/^\)\]\}',?\n/;let tg=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",s=new Fm(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new qm({headers:s,status:e,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Jm,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Wm({body:u,headers:r,status:i,statusText:o,url:a||void 0})),e.complete()):e.error(new Gm({error:u,headers:r,status:i,statusText:o,url:a||void 0}))},a=t=>{const{url:r}=s(),i=new Gm({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(s()),u=!0);let i={type:zm.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:zm.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:zm.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(dr(ih))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const eg=new Qn("XSRF_COOKIE_NAME"),ng=new Qn("XSRF_HEADER_NAME");class rg{}let ig=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=jl(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(dr(bl),dr(Cc),dr(eg))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),sg=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(dr(rg),dr(ng))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),og=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Ym,[]);this.chain=t.reduceRight((t,e)=>new Qm(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(dr(Dm),dr(go))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),ag=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:sg,useClass:Zm}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:eg,useValue:e.cookieName}:[],e.headerName?{provide:ng,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[sg,{provide:Ym,useExisting:sg,multi:!0},{provide:rg,useClass:ig},{provide:eg,useValue:"XSRF-TOKEN"},{provide:ng,useValue:"X-XSRF-TOKEN"}]}),t})(),ug=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[Xm,{provide:Rm,useClass:og},tg,{provide:Dm,useExisting:tg}],imports:[[ag.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();const cg="-----BEGIN PRIVATE KEY-----\n  MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQD3flPqBbFINjqd\n  r2KAZ6jbX7etw/YMo8yylK461Ron3UdPOd62at4oysPLeNoGEL6V5B0ytMwz4DGS\n  XbZutKSda0J1ERDcQfOquxvN6klBUlA4xUEWvoM4RQl6iKDckTI36Q6EU1Smv/9U\n  NuIx1PaeOhRTpJIstL3vOFAxQBkAB8uO8Zu1z0BRSyJqkWlPBbeUHMbvRa5uabDP\n  c+Ngc13mJp6DVVtZTQ5AWM09IaK0f0uNu0uwbMe8NNL9DTInM/gM6yqVmbGPf9xd\n  fzFwC9L7Ki5abIlsCuuVXWMI+dY765vUxYDFV5+PSyudksuyHHlX/sNybNfTUOWR\n  fXz4EVdjAgMBAAECggEAEk6sxrpeEfaPoRtt9gv08H6k7Sck5mwgF7OqLF2YHjZ0\n  RcGE88nK84na2uHD1ZVb1mWgh/WEx2+VldCgeTxGkwMcpYvkyzjbspeS/R6QBajL\n  mK91WvPZFrVQoq5ES/HiR5gnQ+rlb6JIhle6+q8DVn1QWfGUrdbpgoO6ttyZcigm\n  4oT6Xotykz+lbDjQjRx2c/d9rDWFDOdSI+lV11Va1V39aDXdoNI5SF0nDaXuj41Z\n  CKelsZpqSDoo61ckplv9IGRF87ROPI/1tVM9TKtXrUvSa6xvh4V4SBk3tQtxJxra\n  rN8XbqS3lVITVl8u0tO6O87ns4tB1BZHlmOAzHcKeQKBgQD964NHAYEQ2DpBoJ/i\n  UcC8jB+XAwtmGjpkA2zz6txUuAhScU/OcxckNlTxhpyxoxjVe2izmfQl+IVxks5d\n  t2s6Rp1ggHLsr1whKYHbtcr32Kp4R7PCOLdDWeM7Sguz/MOEH9GadyZoYLN8h7ft\n  XeSE1adgaTomXjp++XEr4x5/uwKBgQD5hVaS1KaPgoY5WDF4mDIpB6hT37PE56NF\n  VsLskotZDogL5jHquAMgO2/n7AOAHUujtJ/eH4fa7eqNTDZmGJnicliLPAxBE3Us\n  AqlmdGHOk7MiRm1yZ0M6GXpt9yTv5sZXNot75UG0r1PskH1T9w4sNb8C8EH2D+CC\n  vXLHbJloeQKBgQCrCKg0e97j6cHT0s3fNBIO7pOYtIRJEgGivGv3IIuoxQ1V+t02\n  wm8kBTTSO0nwnVts8ONllp3Ntcis56X5mkKvzkDTb7H5m2UDMWI3DAzbRSYOPr3m\n  ZS2MQE++7/FSGz/XD1ewI/HK/NfpWcGaMVRr5T4IwthYX8AnJv4EAcfZYQKBgH5I\n  DViiZumalXPQPrlZzYkWZwqL3N96nBcrods5D20y/YeIKRsxpeNaMXie6eac7Psd\n  Hwu7yXXzkxGP0Lg7GyaP2GAfM9R7lIGBl1pS7G0wMyjVm+6adFujKWMeAYOouBjL\n  cixyCp73XPIM7mDgWDvnt5Q1JCz0PBvu5XgobjuBAoGAX91Rnn3v0zeejD7pB9a3\n  C05NB+RqEm4Q8bJojc19dkUTQvO4ffhumhGkKK5hsjslMz2rw/ONcblrdKoQsNv4\n  XVSL/Pi6Fph35e/zb2HUzC18TOJxQ75ltXze9h3DXcn0MPvrtt+eFcWJ6vq/zPR+\n  JXNAH020mCroJT6wG3BFcKE=\n  -----END PRIVATE KEY-----";class lg{}class hg{}class pg{}class fg{}class dg{}class mg{}class gg{}class vg{}class yg{}class bg{}class wg{}class xg{}class Eg{}class _g{}class Sg{}class Cg{}class Ag{}var Ig=(()=>(function(t){t[t.None=0]="None",t[t.OnBoarding=1]="OnBoarding",t[t.UpdateCardId=2]="UpdateCardId"}(Ig||(Ig={})),Ig))(),Tg=(()=>(function(t){t[t.DashBoard=0]="DashBoard",t[t.CaptureGuide=1]="CaptureGuide",t[t.CaptureFace=2]="CaptureFace",t[t.InputFinger=3]="InputFinger",t[t.CollectCardId=4]="CollectCardId",t[t.VerifyCustomerInfo=5]="VerifyCustomerInfo",t[t.RecheckInfo=6]="RecheckInfo",t[t.UpdateCustomerInfo=7]="UpdateCustomerInfo",t[t.FillInfo=8]="FillInfo",t[t.AccountAndAlert=9]="AccountAndAlert",t[t.RequestOtp=10]="RequestOtp",t[t.VerifyOtp=11]="VerifyOtp",t[t.CustomerEnroll=12]="CustomerEnroll",t[t.OpenAccount=13]="OpenAccount",t[t.End=14]="End"}(Tg||(Tg={})),Tg))(),kg=(()=>(function(t){t[t.None=0]="None",t[t.Phone=1]="Phone",t[t.DOB=2]="DOB",t[t.CardId=3]="CardId",t[t.Custom=4]="Custom",t[t.Random=5]="Random"}(kg||(kg={})),kg))(),Pg=(()=>(function(t){t.None="",t.OnlySPay="P",t.SmsAndSPay="A"}(Pg||(Pg={})),Pg))(),Rg=(()=>(function(t){t.None="0",t.SMSOTP="1",t.DeviceToken="2",t.mCodeOTP="3",t.mConnect="4",t.SMSTTT="5",t.AdvToken="6",t.SmartOTP="8",t.SmartOTPCode="9"}(Rg||(Rg={})),Rg))(),Dg=n(4133);class Fg{}var Bg=(()=>(function(t){t[t.Simple=0]="Simple",t[t.ExistAccount=1]="ExistAccount",t[t.FingerPrintFailed=2]="FingerPrintFailed"}(Bg||(Bg={})),Bg))();function Og(t){return null!=t&&"false"!=`${t}`}function Ng(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function Mg(t){return Array.isArray(t)?t:[t]}function Lg(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Vg(t){return t instanceof Qa?t.nativeElement:t}function jg(t,e,n,i){return r(n)&&(i=n,n=void 0),i?jg(t,e,n).pipe(A(t=>u(t)?i(...t):i(t))):new y(r=>{Ug(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function Ug(t,e,n,r,i){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),s=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),s=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),s=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,o=t.length;s<o;s++)Ug(t[s],e,n,r,i)}r.add(s)}class Hg extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class zg extends Hg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(BA){r=!0,n=!!BA&&BA||new Error(BA)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let Kg=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class qg extends Kg{constructor(t,e=Kg.now){super(t,()=>qg.delegate&&qg.delegate!==this?qg.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return qg.delegate&&qg.delegate!==this?qg.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Wg=new class extends qg{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends zg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}});let Gg=1;const $g=Promise.resolve(),Xg={};function Qg(t){return t in Xg&&(delete Xg[t],!0)}const Yg={setImmediate(t){const e=Gg++;return Xg[e]=!0,$g.then(()=>Qg(e)&&t()),e},clearImmediate(t){Qg(t)}};new class extends qg{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends zg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=Yg.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(Yg.clearImmediate(e),t.scheduled=void 0)}});class Zg{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Jg(t,this.compare,this.keySelector))}}class Jg extends d{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}const tv=new qg(zg);class ev{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new nv(t,this.durationSelector))}}class nv extends M{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=L(n,new N(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function rv(t){return!u(t)&&t-parseFloat(t)+1>=0}function iv(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function sv(t,e=tv){return n=()=>function(t=0,e,n){let r=-1;return rv(e)?r=Number(e)<1?1:Number(e):C(e)&&(n=e),C(n)||(n=tv),new y(e=>{const i=rv(t)?t:+t-n.now();return n.schedule(iv,i,{index:0,period:r,subscriber:e})})}(t,e),function(t){return t.lift(new ev(n))};var n}function ov(t){return e=>e.lift(new av(t))}class av{constructor(t){this.notifier=t}call(t,e){const n=new uv(t),r=L(this.notifier,new N(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class uv extends M{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const cv=new class extends qg{}(class extends zg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}});function lv(t,e){return new y(e?n=>e.schedule(hv,0,{error:t,subscriber:n}):e=>e.error(t))}function hv({error:t,subscriber:e}){e.error(t)}class pv{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Lh(this.value);case"E":return lv(this.error);case"C":return Xh()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new pv("N",t):pv.undefinedValueNotification}static createError(t){return new pv("E",void 0,t)}static createComplete(){return pv.completeNotification}}pv.completeNotification=new pv("C"),pv.undefinedValueNotification=new pv("N",void 0);class fv{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new dv(t,this.scheduler,this.delay))}}class dv extends d{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(dv.dispatch,this.delay,new mv(t,this.destination)))}_next(t){this.scheduleMessage(pv.createNext(t))}_error(t){this.scheduleMessage(pv.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(pv.createComplete()),this.unsubscribe()}}class mv{constructor(t,e){this.notification=t,this.destination=e}}class gv extends _{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new vv(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new w;if(this.isStopped||this.hasError?s=h.EMPTY:(this.observers.push(t),s=new x(this,t)),r&&t.add(t=new dv(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||cv).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class vv{constructor(t,e){this.time=t,this.value=e}}let yv;try{yv="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(wS){yv=!1}let bv,wv=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?th(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!yv)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(dr(Cc))},t.\u0275prov=ft({factory:function(){return new t(dr(Cc))},token:t,providedIn:"root"}),t})(),xv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})();const Ev=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function _v(){if(bv)return bv;if("object"!=typeof document||!document)return bv=new Set(Ev),bv;let t=document.createElement("input");return bv=new Set(Ev.filter(e=>(t.setAttribute("type",e),t.type===e))),bv}let Sv,Cv,Av;function Iv(t){return function(){if(null==Sv&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Sv=!0}))}finally{Sv=Sv||!1}return Sv}()?t:!!t.capture}function Tv(){if(null==Cv){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Cv=!1,Cv;if("scrollBehavior"in document.documentElement.style)Cv=!0;else{const t=Element.prototype.scrollTo;Cv=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Cv}function kv(){let t="undefined"!=typeof document&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Pv(t){return t.composedPath?t.composedPath()[0]:t.target}function Rv(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const Dv=new Qn("cdk-dir-doc",{providedIn:"root",factory:function(){return mr(bl)}});let Fv=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new Ju,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(dr(Dv,8))},t.\u0275prov=ft({factory:function(){return new t(dr(Dv,8))},token:t,providedIn:"root"}),t})(),Bv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})(),Ov=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new _,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new y(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(sv(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Lh()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(up(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=Vg(e),r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>jg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(dr(jc),dr(wv),dr(bl,8))},t.\u0275prov=ft({factory:function(){return new t(dr(jc),dr(wv),dr(bl,8))},token:t,providedIn:"root"}),t})(),Nv=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new _,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(sv(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(dr(wv),dr(jc),dr(bl,8))},t.\u0275prov=ft({factory:function(){return new t(dr(wv),dr(jc),dr(bl,8))},token:t,providedIn:"root"}),t})(),Mv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})(),Lv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Bv,xv,Mv],Bv,Mv]}),t})();class Vv{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class jv extends Vv{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class Uv extends Vv{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Hv extends Vv{constructor(t){super(),this.element=t instanceof Qa?t.nativeElement:t}}class zv{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof jv?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Uv?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Hv?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Kv extends zv{constructor(t,e,n,r,i){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=i}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),this._attachedPortal=t,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let qv=(()=>{class t extends zv{constructor(t,e,n){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new Ju,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(n,e),this._getRootNode().appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r=e.createComponent(n,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return t.\u0275fac=function(e){return new(e||t)(Oo(Wa),Oo(Bu),Oo(bl))},t.\u0275dir=Qt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[yo]}),t})(),Wv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})();const Gv=Tv();class $v{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Lg(-this._previousScrollPosition.left),t.style.top=Lg(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Gv&&(e.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Gv&&(e.scrollBehavior=r,n.scrollBehavior=i)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class Xv{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Qv{enable(){}disable(){}attach(){}}function Yv(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function Zv(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class Jv{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();Yv(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ty=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new Qv,this.close=t=>new Xv(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new $v(this._viewportRuler,this._document),this.reposition=t=>new Jv(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.\u0275fac=function(e){return new(e||t)(dr(Ov),dr(Nv),dr(jc),dr(bl))},t.\u0275prov=ft({factory:function(){return new t(dr(Ov),dr(Nv),dr(jc),dr(bl))},token:t,providedIn:"root"}),t})();class ey{constructor(t){if(this.scrollStrategy=new Qv,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class ny{constructor(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class ry{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let iy=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(dr(bl))},t.\u0275prov=ft({factory:function(){return new t(dr(bl))},token:t,providedIn:"root"}),t})(),sy=(()=>{class t extends iy{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(dr(bl))},t.\u0275prov=ft({factory:function(){return new t(dr(bl))},token:t,providedIn:"root"}),t})(),oy=(()=>{class t extends iy{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._pointerDownListener=t=>{this._pointerDownEventTarget=Pv(t)},this._clickListener=t=>{const e=Pv(t),n="click"===t.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:e;this._pointerDownEventTarget=null;const r=this._attachedOverlays.slice();for(let i=r.length-1;i>-1;i--){const s=r[i];if(!(s._outsidePointerEvents.observers.length<1)&&s.hasAttached()){if(s.overlayElement.contains(e)||s.overlayElement.contains(n))break;s._outsidePointerEvents.next(t)}}}}add(t){if(super.add(t),!this._isAttached){const t=this._document.body;t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return t.\u0275fac=function(e){return new(e||t)(dr(bl),dr(wv))},t.\u0275prov=ft({factory:function(){return new t(dr(bl),dr(wv))},token:t,providedIn:"root"}),t})(),ay=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||Rv()){const e=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add(t),Rv()?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(dr(bl),dr(wv))},t.\u0275prov=ft({factory:function(){return new t(dr(bl),dr(wv))},token:t,providedIn:"root"}),t})();class uy{constructor(t,e,n,r,i,s,o,a,u){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=s,this._document=o,this._location=a,this._outsideClickDispatcher=u,this._backdropElement=null,this._backdropClick=new _,this._attachments=new _,this._detachments=new _,this._locationChanges=h.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new _,this._outsidePointerEvents=new _,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ep(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Lg(this._config.width),t.height=Lg(this._config.height),t.minWidth=Lg(this._config.minWidth),t.minHeight=Lg(this._config.minHeight),t.maxWidth=Lg(this._config.maxWidth),t.maxHeight=Lg(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const n=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",n),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",n)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const r=t.classList;Mg(e).forEach(t=>{t&&(n?r.add(t):r.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(ov(K(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.parentNode&&t.parentNode.removeChild(t),this._backdropElement===t&&(this._backdropElement=null))}}const cy="cdk-overlay-connected-position-bounding-box",ly=/([A-Za-z%]+)$/;class hy{constructor(t,e,n,r,i){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new _,this._resizeSubscription=h.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(cy),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let i;for(let s of this._preferredPositions){let o=this._getOriginPoint(t,s),a=this._getOverlayPoint(o,e,s),u=this._getOverlayFit(a,e,n,s);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,o);this._canFitWithFlexibleDimensions(u,a,n)?r.push({position:s,origin:o,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(o,s)}):(!i||i.overlayFit.visibleArea<u.visibleArea)&&(i={overlayFit:u,overlayPoint:a,originPoint:o,position:s,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&py(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(cy),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:r}}_getOverlayPoint(t,e,n){let r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}_getOverlayFit(t,e,n,r){const i=dy(e);let{x:s,y:o}=t,a=this._getOffset(r,"x"),u=this._getOffset(r,"y");a&&(s+=a),u&&(o+=u);let c=0-o,l=o+i.height-n.height,h=this._subtractOverflows(i.width,0-s,s+i.width-n.width),p=this._subtractOverflows(i.height,c,l),f=h*p;return{visibleArea:f,isCompletelyWithinViewport:i.width*i.height===f,fitsInViewportVertically:p===i.height,fitsInViewportHorizontally:h==i.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,i=n.right-e.x,s=fy(this._overlayRef.getConfig().minHeight),o=fy(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=o&&o<=i;return(t.fitsInViewportVertically||null!=s&&s<=r)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=dy(e),i=this._viewportRect,s=Math.max(t.x+r.width-i.width,0),o=Math.max(t.y+r.height-i.height,0),a=Math.max(i.top-n.top-t.y,0),u=Math.max(i.left-n.left-t.x,0);let c=0,l=0;return c=r.width<=i.width?u||-s:t.x<this._viewportMargin?i.left-n.left-t.x:0,l=r.height<=i.height?a||-o:t.y<this._viewportMargin?i.top-n.top-t.y:0,this._previousPushAmount={x:c,y:l},{x:t.x+c,y:t.y+l}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new ry(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let i,s,o,a,u,c;if("top"===e.overlayY)s=t.y,i=n.height-s+this._viewportMargin;else if("bottom"===e.overlayY)o=n.height-t.y+2*this._viewportMargin,i=n.height-o+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;i=2*e,s=t.y-e,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)c=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)u=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;a=2*e,u=t.x-e,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-r/2)}return{top:s,left:u,bottom:o,right:c,width:a,height:i}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=Lg(n.height),r.top=Lg(n.top),r.bottom=Lg(n.bottom),r.width=Lg(n.width),r.left=Lg(n.left),r.right=Lg(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(r.maxHeight=Lg(t)),i&&(r.maxWidth=Lg(i))}this._lastBoundingBoxSize=n,py(this._boundingBox.style,r)}_resetBoundingBoxStyles(){py(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){py(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();py(n,this._getExactOverlayY(e,t,r)),py(n,this._getExactOverlayX(e,t,r))}else n.position="static";let o="",a=this._getOffset(e,"x"),u=this._getOffset(e,"y");a&&(o+=`translateX(${a}px) `),u&&(o+=`translateY(${u}px)`),n.transform=o.trim(),s.maxHeight&&(r?n.maxHeight=Lg(s.maxHeight):i&&(n.maxHeight="")),s.maxWidth&&(r?n.maxWidth=Lg(s.maxWidth):i&&(n.maxWidth="")),py(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=s,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=Lg(i.y),r}_getExactOverlayX(t,e,n){let r,i={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===r?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Lg(s.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Zv(t,n),isOriginOutsideView:Yv(t,n),isOverlayClipped:Zv(e,n),isOverlayOutsideView:Yv(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Mg(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Qa)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function py(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function fy(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(ly);return n&&"px"!==n?null:parseFloat(e)}return t||null}function dy(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class my{constructor(t,e,n,r,i,s,o){this._preferredPositions=[],this._positionStrategy=new hy(n,r,i,s,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const i=new ny(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const gy="cdk-global-overlay-wrapper";class vy{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(gy),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:s,maxHeight:o}=n,a=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),u=!("100%"!==i&&"100vh"!==i||o&&"100%"!==o&&"100vh"!==o);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(gy),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let yy=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new vy}connectedTo(t,e,n){return new my(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new hy(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(dr(Nv),dr(bl),dr(wv),dr(ay))},t.\u0275prov=ft({factory:function(){return new t(dr(Nv),dr(bl),dr(wv),dr(ay))},token:t,providedIn:"root"}),t})(),by=0,wy=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u,c,l){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=s,this._ngZone=o,this._document=a,this._directionality=u,this._location=c,this._outsideClickDispatcher=l}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new ey(t);return i.direction=i.direction||this._directionality.value,new uy(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+by++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(al)),new Kv(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(dr(ty),dr(ay),dr(Wa),dr(yy),dr(sy),dr(go),dr(jc),dr(bl),dr(Fv),dr(Bl),dr(oy))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const xy={provide:new Qn("cdk-connected-overlay-scroll-strategy"),deps:[wy],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let Ey=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[wy,xy],imports:[[Bv,Wv,Lv],Lv]}),t})();class _y{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Sy(t,this.dueTime,this.scheduler))}}class Sy extends d{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Cy,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Cy(t){t.debouncedNext()}class Ay{constructor(t){this.total=t}call(t,e){return e.subscribe(new Iy(t,this.total))}}class Iy extends d{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}let Ty=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})(),ky=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=Vg(t);return new y(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new _,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(dr(Ty))},t.\u0275prov=ft({factory:function(){return new t(dr(Ty))},token:t,providedIn:"root"}),t})(),Py=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new Ju,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Og(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Ng(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(t,e=tv){return n=>n.lift(new _y(t,e))}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Oo(ky),Oo(Qa),Oo(jc))},t.\u0275dir=Qt({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),Ry=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[Ty]}),t})(),Dy=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(wS){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){if(-1===By(e))return!1;if(!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),i=By(t);return t.hasAttribute("contenteditable")?-1!==i:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==i:"video"===r?-1!==i&&(null!==i||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||Fy(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(dr(wv))},t.\u0275prov=ft({factory:function(){return new t(dr(wv))},token:t,providedIn:"root"}),t})();function Fy(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function By(t){if(!Fy(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Oy{constructor(t,e,n,r,i=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ep(1)).subscribe(t)}}let Ny=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new Oy(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(dr(Dy),dr(jc),dr(bl))},t.\u0275prov=ft({factory:function(){return new t(dr(Dy),dr(jc),dr(bl))},token:t,providedIn:"root"}),t})();function My(t){return 0===t.offsetX&&0===t.offsetY}function Ly(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const Vy=new Qn("cdk-input-modality-detector-options"),jy={ignoreKeys:[18,17,224,91,16]},Uy=Iv({passive:!0,capture:!0});let Hy=(()=>{class t{constructor(t,e,n,r){this._platform=t,this._mostRecentTarget=null,this._modality=new Vh(null),this._lastTouchMs=0,this._onKeydown=t=>{var e,n;(null===(n=null===(e=this._options)||void 0===e?void 0:e.ignoreKeys)||void 0===n?void 0:n.some(e=>e===t.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Pv(t))},this._onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(My(t)?"keyboard":"mouse"),this._mostRecentTarget=Pv(t))},this._onTouchstart=t=>{Ly(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Pv(t))},this._options=Object.assign(Object.assign({},jy),r),this.modalityDetected=this._modality.pipe(t=>t.lift(new Ay(1))),this.modalityChanged=this.modalityDetected.pipe(t=>t.lift(new Zg(void 0,void 0))),t.isBrowser&&e.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,Uy),n.addEventListener("mousedown",this._onMousedown,Uy),n.addEventListener("touchstart",this._onTouchstart,Uy)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Uy),document.removeEventListener("mousedown",this._onMousedown,Uy),document.removeEventListener("touchstart",this._onTouchstart,Uy))}}return t.\u0275fac=function(e){return new(e||t)(dr(wv),dr(jc),dr(bl),dr(Vy,8))},t.\u0275prov=ft({factory:function(){return new t(dr(wv),dr(jc),dr(bl),dr(Vy,8))},token:t,providedIn:"root"}),t})();const zy=new Qn("cdk-focus-monitor-default-options"),Ky=Iv({passive:!0,capture:!0});let qy=(()=>{class t{constructor(t,e,n,r,i){this._ngZone=t,this._platform=e,this._inputModalityDetector=n,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new _,this._rootNodeFocusAndBlurListener=t=>{const e=Pv(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=r,this._detectionMode=(null==i?void 0:i.detectionMode)||0}monitor(t,e=!1){const n=Vg(t);if(!this._platform.isBrowser||1!==n.nodeType)return Lh(null);const r=function(t){if(function(){if(null==Av){const t="undefined"!=typeof document?document.head:null;Av=!(!t||!t.createShadowRoot&&!t.attachShadow)}return Av}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const s={checkChildren:e,subject:new _,rootNode:r};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(t){const e=Vg(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=Vg(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOrigin(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOrigin(t,e=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&e,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,e){const n=this._elementInfo.get(e),r=Pv(t);n&&(n.checkChildren||e===r)&&this._originChanged(e,this._getFocusOrigin(r),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ky),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ky)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ov(this._stopInputModalityDetector)).subscribe(t=>{this._setOrigin(t,!0)}))}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ky),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ky),this._rootNodeFocusListenerCount.delete(e))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,r)=>{(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(dr(jc),dr(wv),dr(Hy),dr(bl,8),dr(zy,8))},t.\u0275prov=ft({factory:function(){return new t(dr(jc),dr(wv),dr(Hy),dr(bl,8),dr(zy,8))},token:t,providedIn:"root"}),t})();const Wy="cdk-high-contrast-black-on-white",Gy="cdk-high-contrast-white-on-black",$y="cdk-high-contrast-active";let Xy=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove($y),t.remove(Wy),t.remove(Gy),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add($y),t.add(Wy)):2===e&&(t.add($y),t.add(Gy))}}}return t.\u0275fac=function(e){return new(e||t)(dr(wv),dr(bl))},t.\u0275prov=ft({factory:function(){return new t(dr(wv),dr(bl))},token:t,providedIn:"root"}),t})();const Qy=new nu("12.2.13");class Yy{}const Zy="*";function Jy(t,e){return{type:7,name:t,definitions:e,options:{}}}function tb(t,e=null){return{type:4,styles:e,timings:t}}function eb(t,e=null){return{type:2,steps:t,options:e}}function nb(t){return{type:6,styles:t,offset:null}}function rb(t,e,n){return{type:0,name:t,styles:e,options:n}}function ib(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function sb(t){Promise.resolve(null).then(t)}class ob{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){sb(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class ab{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?sb(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function ub(){return"undefined"!=typeof window&&void 0!==window.document}function cb(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function lb(t){switch(t.length){case 0:return new ob;case 1:return t[0];default:return new ab(t)}}function hb(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case Zy:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function pb(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&fb(n,"start",t)));break;case"done":t.onDone(()=>r(n&&fb(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&fb(n,"destroy",t)))}}function fb(t,e,n){const r=n.totalTime,i=db(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function db(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function mb(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function gb(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let vb=(t,e)=>!1,yb=(t,e)=>!1,bb=(t,e,n)=>[];const wb=cb();(wb||"undefined"!=typeof Element)&&(vb=ub()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),yb=(()=>{if(wb||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):yb}})(),bb=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let xb=null,Eb=!1;function _b(t){xb||(xb=("undefined"!=typeof document?document.body:null)||{},Eb=!!xb.style&&"WebkitAppearance"in xb.style);let e=!0;return xb.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in xb.style,!e&&Eb)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in xb.style),e}const Sb=yb,Cb=vb,Ab=bb;function Ib(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let Tb=(()=>{class t{validateStyleProperty(t){return _b(t)}matchesElement(t,e){return Sb(t,e)}containsElement(t,e){return Cb(t,e)}query(t,e,n){return Ab(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new ob(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class kb{}kb.NOOP=new Tb;const Pb="ng-enter",Rb="ng-leave",Db="ng-trigger",Fb=".ng-trigger",Bb="ng-animating",Ob=".ng-animating";function Nb(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Mb(parseFloat(e[1]),e[2])}function Mb(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Lb(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Mb(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=Mb(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Vb(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function jb(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Vb(t,n);return n}function Ub(t,e,n){return n?e+":"+n+";":""}function Hb(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Ub(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Ub(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function zb(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Yb(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),cb()&&Hb(t))}function Kb(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Yb(e);t.style[n]=""}),cb()&&Hb(t))}function qb(t){return Array.isArray(t)?1==t.length?t[0]:eb(t):t}const Wb=new RegExp("{{\\s*(.+?)\\s*}}","g");function Gb(t){let e=[];if("string"==typeof t){let n;for(;n=Wb.exec(t);)e.push(n[1]);Wb.lastIndex=0}return e}function $b(t,e,n){const r=t.toString(),i=r.replace(Wb,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Xb(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Qb=/-+([a-z0-9])/g;function Yb(t){return t.replace(Qb,(...t)=>t[1].toUpperCase())}function Zb(t,e){return 0===t||0===e}function Jb(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=ew(t,e)})}}return e}function tw(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function ew(t,e){return window.getComputedStyle(t)[e]}const nw="*";function rw(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(ow(i,o)),"<"!=s[0]||i==nw&&o==nw||e.push(ow(o,i))}(t,n,e)):n.push(t),n}const iw=new Set(["true","1"]),sw=new Set(["false","0"]);function ow(t,e){const n=iw.has(t)||sw.has(t),r=iw.has(e)||sw.has(e);return(i,s)=>{let o=t==nw||t==i,a=e==nw||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?iw.has(t):sw.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?iw.has(e):sw.has(e)),o&&a}}const aw=new RegExp("s*:selfs*,?","g");function uw(t,e,n){return new cw(t).build(e,n)}class cw{constructor(t){this._driver=t}build(t,e){const n=new lw(e);return this._resetContextStyleTimingState(n),tw(this,qb(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(hw(t)){const e=t;Object.keys(e).forEach(t=>{Gb(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Xb(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=tw(this,qb(t.animation),e);return{type:1,matchers:rw(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:pw(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>tw(this,t,e)),options:pw(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=tw(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:pw(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return fw(Lb(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=fw(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Lb(r,e),fw(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:nb({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=nb(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Zy?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(hw(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Gb(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(hw(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(hw(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,p=e.currentTime,f=e.currentAnimateTimings,d=f.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*d;e.currentTime=p+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:tw(this,qb(t.animation),e),options:pw(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:pw(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:pw(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(aw,"")),[t=t.replace(/@\*/g,Fb).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Ob),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,mb(e.collectedStyles,e.currentQuerySelector,{});const o=tw(this,qb(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:pw(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Lb(t.timings,e.errors,!0);return{type:12,animation:tw(this,qb(t.animation),e),timings:n,options:null}}}class lw{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function hw(t){return!Array.isArray(t)&&"object"==typeof t}function pw(t){var e;return t?(t=Vb(t)).params&&(t.params=(e=t.params)?Vb(e):null):t={},t}function fw(t,e,n){return{duration:t,delay:e,easing:n}}function dw(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class mw{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const gw=new RegExp(":enter","g"),vw=new RegExp(":leave","g");function yw(t,e,n,r,i,s={},o={},a,u,c=[]){return(new bw).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class bw{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new mw;const l=new xw(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),tw(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[dw(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Nb(n.duration):null,s=null!=n.delay?Nb(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),tw(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ww);const t=Nb(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>tw(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Nb(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),tw(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Lb(e.params?$b(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Nb(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=ww);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),tw(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;tw(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const ww={};class xw{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ww,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Ew(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Nb(n.duration)),null!=n.delay&&(r.delay=Nb(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=$b(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new xw(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=ww,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new _w(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(gw,"."+this._enterClassName)).replace(vw,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class Ew{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Ew(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Zy,this._currentKeyframe[t]=Zy}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Zy})):jb(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=$b(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Zy),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=jb(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==Zy&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?Xb(t.values()):[],s=e.size?Xb(e.values()):[];if(n){const t=r[0],e=Vb(t);t.offset=0,e.offset=1,r=[t,e]}return dw(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class _w extends Ew{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=jb(t[0],!1);a.offset=0,i.push(a);const u=jb(t[0],!1);u.offset=Sw(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=jb(t[r],!1);o.offset=Sw((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return dw(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function Sw(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Cw{}class Aw extends Cw{normalizePropertyName(t,e){return Yb(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(Iw[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const Iw=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Tw(t,e,n,r,i,s,o,a,u,c,l,h,p){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:p}}const kw={};class Pw{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||kw,p=this.buildStyles(n,o&&o.params||kw,l),f=a&&a.params||kw,d=this.buildStyles(r,f,l),m=new Set,g=new Map,v=new Map,y="void"===r,b={params:Object.assign(Object.assign({},h),f)},w=c?[]:yw(t,e,this.ast.animation,i,s,p,d,b,u,l);let x=0;if(w.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),l.length)return Tw(e,this._triggerName,n,r,y,p,d,[],[],g,v,x,l);w.forEach(t=>{const n=t.element,r=mb(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=mb(v,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const E=Xb(m.values());return Tw(e,this._triggerName,n,r,y,p,d,w,E,g,v,x)}}class Rw{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},r=Vb(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=$b(s,r,e));const o=this.normalizer.normalizePropertyName(t,e);s=this.normalizer.normalizeStyleValue(t,o,s,e),n[o]=s})}}),n}}class Dw{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Rw(t.style,t.options&&t.options.params||{},n)}),Fw(this.states,"true","1"),Fw(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Pw(t,e,this.states))}),this.fallbackTransition=new Pw(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Fw(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Bw=new mw;class Ow{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=uw(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=hb(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=yw(this._driver,e,i,Pb,Rb,{},{},n,Bw,r),s.forEach(t=>{const e=mb(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Zy)})});const a=lb(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=db(e,"","","");return pb(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Nw="ng-animate-queued",Mw="ng-animate-disabled",Lw=".ng-animate-disabled",Vw=[],jw={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Uw={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Hw{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Vb(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const zw="void",Kw=new Hw(zw);class qw{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Zw(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=mb(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=mb(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Zw(t,Db),Zw(t,"ng-trigger-"+e),a[e]=Kw),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new Gw(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Zw(t,Db),Zw(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new Hw(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=Kw),u.value!==zw&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Kb(t,n),zb(t,r)})}return}const c=mb(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(Zw(t,Nw),s.onStart(()=>{Jw(t,Nw)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Fb,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,zw,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&lb(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||Kw,a=new Hw(zw),u=new Gw(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==jw||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Zw(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=db(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,pb(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Ww{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new qw(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if($w(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!$w(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Zw(t,Mw)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Jw(t,Mw))}removeNode(t,e,n,r){if($w(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return $w(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Fb,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Ob,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return lb(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=jw,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Lw)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Lw,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Zw(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?lb(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new mw,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),p=Yw(h,this.collectedEnterElements),f=new Map;let d=0;p.forEach((t,e)=>{const n=Pb+d++;f.set(e,n),t.forEach(t=>Zw(t,n))});const m=[],g=new Set,v=new Set;for(let P=0;P<this.collectedLeaveElements.length;P++){const t=this.collectedLeaveElements[P],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):v.add(t))}const y=new Map,b=Yw(h,Array.from(g));b.forEach((t,e)=>{const n=Rb+d++;y.set(e,n),t.forEach(t=>Zw(t,n))}),t.push(()=>{p.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Jw(t,n))}),b.forEach((t,e)=>{const n=y.get(e);t.forEach(t=>Jw(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const w=[],x=[];for(let P=this._namespaceList.length-1;P>=0;P--)this._namespaceList[P].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(w.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=y.get(i),p=f.get(i),d=this._buildInstruction(t,n,p,h,c);if(d.errors&&d.errors.length)x.push(d);else{if(c)return e.onStart(()=>Kb(i,d.fromStyles)),e.onDestroy(()=>zb(i,d.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Kb(i,d.fromStyles)),e.onDestroy(()=>zb(i,d.toStyles)),void r.push(e);d.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,d.timelines),s.push({instruction:d,player:e,element:i}),d.queriedElements.forEach(t=>mb(o,t,[]).push(e)),d.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),d.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(x.length){const t=[];x.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),w.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,_=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(_.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{mb(E,e,[]).push(t),t.destroy()})});const S=m.filter(t=>nx(t,a,u)),C=new Map;Qw(C,this.driver,v,u,Zy).forEach(t=>{nx(t,a,u)&&S.push(t)});const A=new Map;p.forEach((t,e)=>{Qw(A,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=C.get(t),n=A.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const I=[],T=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>zb(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(_.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=_.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>_.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,E,i,A,C);if(s.setRealPlayer(n),t===k)I.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=lb(e)),r.push(s)}}else Kb(e,o.fromStyles),s.onDestroy(()=>zb(e,o.toStyles)),T.push(s),c.has(e)&&r.push(s)}),T.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=lb(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let P=0;P<m.length;P++){const t=m[P],e=t.__ng_removed;if(Jw(t,Rb),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Ob,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?tx(this,t,r):this.processLeaveNode(t)}return m.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==zw;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=mb(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Kb(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const p=h.__ng_removed;if(p&&p.removedBeforeQueried)return new ob(e.duration,e.delay);const f=h!==a,d=function(t){const e=[];return ex(t,e),e}((n.get(h)||Vw).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=s.get(h),v=hb(0,this._normalizer,0,e.keyframes,m,g),y=this._buildPlayer(e,v,d);if(e.subTimeline&&r&&l.add(h),f){const e=new Gw(t,o,h);e.setRealPlayer(y),u.push(e)}return y});u.forEach(t=>{mb(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Zw(t,Bb));const p=lb(h);return p.onDestroy(()=>{c.forEach(t=>Jw(t,Bb)),zb(a,e.toStyles)}),l.forEach(t=>{mb(r,t,[]).push(p)}),p}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new ob(t.duration,t.delay)}}class Gw{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new ob,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>pb(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){mb(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function $w(t){return t&&1===t.nodeType}function Xw(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Qw(t,e,n,r,i){const s=[];n.forEach(t=>s.push(Xw(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Uw,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>Xw(t,s[a++])),o}function Yw(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function Zw(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Jw(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function tx(t,e,n){lb(n).onDone(()=>t.processLeaveNode(e))}function ex(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof ab?ex(r.players,e):e.push(r)}}function nx(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class rx{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Ww(t,e,n),this._timelineEngine=new Ow(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=uw(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e,n){return new Dw(t,e,n)}(r,e,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=gb(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=gb(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ix(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=ox(e[0]),e.length>1&&(r=ox(e[e.length-1]))):e&&(n=ox(e)),n||r?new sx(t,n,r):null}class sx{constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let r=sx.initialStylesByElement.get(t);r||sx.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&zb(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(zb(this._element,this._initialStyles),this._endStyles&&(zb(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(sx.initialStylesByElement.delete(this._element),this._startStyles&&(Kb(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Kb(this._element,this._endStyles),this._endStyles=null),zb(this._element,this._initialStyles),this._state=3)}}function ox(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];ax(i)&&(e=e||{},e[i]=t[i])}return e}function ax(t){return"display"===t||"position"===t}sx.initialStylesByElement=new WeakMap;const ux="animation",cx="animationend";class lx{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=gx(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),mx(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),dx(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){hx(this._element,this._name,"paused")}resume(){hx(this._element,this._name,"running")}setPosition(t){const e=px(this._element,this._name);this._position=t*this._duration,mx(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),dx(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=gx(t,"").split(","),r=fx(n,e);r>=0&&(n.splice(r,1),mx(t,"",n.join(",")))}(this._element,this._name))}}function hx(t,e,n){mx(t,"PlayState",n,px(t,e))}function px(t,e){const n=gx(t,"");return n.indexOf(",")>0?fx(n.split(","),e):fx([n],e)}function fx(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function dx(t,e,n){n?t.removeEventListener(cx,e):t.addEventListener(cx,e)}function mx(t,e,n,r){const i=ux+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function gx(t,e){return t.style[ux+e]||""}class vx{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new lx(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:ew(this.element,n))})}this.currentSnapshot=t}}class yx extends ob{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Ib(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class bx{constructor(){this._count=0}validateStyleProperty(t){return _b(t)}matchesElement(t,e){return Sb(t,e)}containsElement(t,e){return Cb(t,e)}query(t,e,n){return Ab(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Ib(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof vx),u={};Zb(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Jb(t,e,u));if(0==n)return new yx(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const p=ix(t,e),f=new vx(t,e,l,n,r,i,c,p);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class wx{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:ew(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class xx{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Ex().toString()),this._cssKeyframesDriver=new bx}validateStyleProperty(t){return _b(t)}matchesElement(t,e){return Sb(t,e)}containsElement(t,e){return Cb(t,e)}query(t,e,n){return Ab(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof wx);Zb(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=ix(t,e=Jb(t,e=e.map(t=>jb(t,!1)),u));return new wx(t,e,a,l)}}function Ex(){return ub()&&Element.prototype.animate||{}}let _x=(()=>{class t extends Yy{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:Tt.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?eb(t):t;return Ax(this._renderer,null,e,"register",[n]),new Sx(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(dr(Za),dr(bl))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class Sx extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Cx(this._id,t,e||{},this._renderer)}}class Cx{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Ax(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Ax(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const Ix="@",Tx="@.disabled";let kx=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Px("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new Rx(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(dr(Za),dr(rx),dr(jc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class Px{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Ix&&e==Tx?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Rx extends Px{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Ix?"."==e.charAt(1)&&e==Tx?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==Ix){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=Ix&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Dx=(()=>{class t extends rx{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(dr(bl),dr(kb),dr(Cw))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Fx=new Qn("AnimationModuleType"),Bx=[{provide:Yy,useClass:_x},{provide:Cw,useFactory:function(){return new Aw}},{provide:rx,useClass:Dx},{provide:Za,useFactory:function(t,e,n){return new kx(t,e,n)},deps:[Eh,rx,jc]}],Ox=[{provide:kb,useFactory:function(){return"function"==typeof Ex()?new xx:new bx}},{provide:Fx,useValue:"BrowserAnimations"},...Bx],Nx=[{provide:kb,useClass:Tb},{provide:Fx,useValue:"NoopAnimations"},...Bx];let Mx=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Nx:Ox}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:Ox,imports:[Mh]}),t})();const Lx=new nu("12.2.13"),Vx=new Qn("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let jx,Ux=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!(!tl()||Rv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&Lx.full!==Qy.full&&console.warn("The Angular Material version ("+Lx.full+") does not match the Angular CDK version ("+Qy.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(dr(Xy),dr(Vx,8),dr(bl))},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Bv],Bv]}),t})();function Hx(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Og(t)}}}function zx(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}function Kx(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Og(t)}}}function qx(t,e=0){return class extends t{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Ng(t):this.defaultTabIndex}}}function Wx(t){return class extends t{constructor(...t){super(...t),this.stateChanges=new _,this.errorState=!1}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}try{jx="undefined"!=typeof Intl}catch(wS){jx=!1}let Gx=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})();class $x{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Xx={enterDuration:225,exitDuration:150},Qx=Iv({passive:!0}),Yx=["mousedown","touchstart"],Zx=["mouseup","mouseleave","touchend","touchcancel"];class Jx{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Vg(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},Xx),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const s=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),o=t-r.left,a=e-r.top,u=i.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=o-s+"px",c.style.top=a-s+"px",c.style.height=2*s+"px",c.style.width=2*s+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const l=new $x(this,c,n);return l.state=0,this._activeRipples.add(l),n.persistent||(this._mostRecentTransientRipple=l),this._runTimeoutOutsideZone(()=>{const t=l===this._mostRecentTransientRipple;l.state=1,n.persistent||t&&this._isPointerDown||l.fadeOut()},u),l}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},Xx),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Vg(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(Yx))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Zx),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=My(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Ly(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,Qx)})})}_removeTriggerEvents(){this._triggerElement&&(Yx.forEach(t=>{this._triggerElement.removeEventListener(t,this,Qx)}),this._pointerUpEventsRegistered&&Zx.forEach(t=>{this._triggerElement.removeEventListener(t,this,Qx)}))}}const tE=new Qn("mat-ripple-global-options");let eE=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Jx(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(jc),Oo(wv),Oo(tE,8),Oo(Fx,8))},t.\u0275dir=Qt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&la("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),nE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Ux,xv],Ux]}),t})(),rE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Ux]]}),t})(),iE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[nE,Jl,Ux,rE]]}),t})();function sE(t,e){}class oE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const aE={dialogContainer:Jy("dialogContainer",[rb("void, exit",nb({opacity:0,transform:"scale(0.7)"})),rb("enter",nb({transform:"none"})),ib("* => enter",tb("150ms cubic-bezier(0, 0, 0.2, 1)",nb({transform:"none",opacity:1}))),ib("* => void, * => exit",tb("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",nb({opacity:0})))])};let uE=(()=>{class t extends zv{constructor(t,e,n,r,i,s){super(),this._elementRef=t,this._focusTrapFactory=e,this._changeDetectorRef=n,this._config=i,this._focusMonitor=s,this._animationStateChanged=new Ju,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=t=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(t)),this._ariaLabelledBy=i.ariaLabelledBy||null,this._document=r}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const e=kv(),n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=kv())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,e=kv();return t===e||t.contains(e)}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(Ny),Oo(Eu),Oo(bl,8),Oo(oE),Oo(qy))},t.\u0275dir=Qt({type:t,viewQuery:function(t,e){if(1&t&&pc(qv,7),2&t){let t;hc(t=dc())&&(e._portalOutlet=t.first)}},features:[yo]}),t})(),cE=(()=>{class t extends uE{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:e}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:e}))}_onAnimationStart({toState:t,totalTime:e}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:e}):"exit"!==t&&"void"!==t||this._animationStateChanged.next({state:"closing",totalTime:e})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=qn(t)))(n||t)}}(),t.\u0275cmp=Kt({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&Go("@dialogContainer.start",function(t){return e._onAnimationStart(t)})("@dialogContainer.done",function(t){return e._onAnimationDone(t)}),2&t&&(Aa("id",e._id),Ro("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),Ia("@dialogContainer",e._state))},features:[yo],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&Fo(0,sE,0,0,"ng-template",0)},directives:[qv],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[aE.dialogContainer]}}),t})(),lE=0;class hE{constructor(t,e,n="mat-dialog-"+lE++){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new _,this._afterClosed=new _,this._beforeClosed=new _,this._state=0,e._id=n,e._animationStateChanged.pipe(up(t=>"opened"===t.state),ep(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(up(t=>"closed"===t.state),ep(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(up(t=>27===t.keyCode&&!this.disableClose&&!function(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(t))).subscribe(t=>{t.preventDefault(),pE(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():pE(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(up(t=>"closing"===t.state),ep(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function pE(t,e,n){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=e),t.close(n)}const fE=new Qn("MatDialogData"),dE=new Qn("mat-dialog-default-options"),mE=new Qn("mat-dialog-scroll-strategy"),gE={provide:mE,deps:[wy],useFactory:function(t){return()=>t.scrollStrategies.block()}};let vE=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this._overlay=t,this._injector=e,this._defaultOptions=n,this._parentDialog=r,this._overlayContainer=i,this._dialogRefConstructor=o,this._dialogContainerType=a,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new _,this._afterOpenedAtThisLevel=new _,this._ariaHiddenElements=new Map,this.afterAllClosed=Qh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ip(void 0))),this._scrollStrategy=s}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,e){(e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new oE)).id&&this.getDialogById(e.id);const n=this._createOverlay(e),r=this._attachDialogContainer(n,e),i=this._attachDialogContent(t,r,n,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(i),i.afterClosed().subscribe(()=>this._removeOpenDialog(i)),this.afterOpened.next(i),r._initializeWithAttachedContent(),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const e=this._getOverlayConfig(t);return this._overlay.create(e)}_getOverlayConfig(t){const e=new ey({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachDialogContainer(t,e){const n=go.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:oE,useValue:e}]}),r=new jv(this._dialogContainerType,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(r).instance}_attachDialogContent(t,e,n,r){const i=new this._dialogRefConstructor(n,e,r.id);if(t instanceof Iu)e.attachTemplatePortal(new Uv(t,null,{$implicit:r.data,dialogRef:i}));else{const n=this._createInjector(r,i,e),s=e.attachComponentPortal(new jv(t,r.viewContainerRef,n));i.componentInstance=s.instance}return i.updateSize(r.width,r.height).updatePosition(r.position),i}_createInjector(t,e,n){const r=t&&t.viewContainerRef&&t.viewContainerRef.injector,i=[{provide:this._dialogContainerType,useValue:n},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:e}];return!t.direction||r&&r.get(Fv,null,Et.Optional)||i.push({provide:Fv,useValue:{value:t.direction,change:Lh()}}),go.create({parent:r||this._injector,providers:i})}_removeOpenDialog(t){const e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const e=t.parentElement.children;for(let n=e.length-1;n>-1;n--){let r=e[n];r===t||"SCRIPT"===r.nodeName||"STYLE"===r.nodeName||r.hasAttribute("aria-live")||(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}}return t.\u0275fac=function(e){return new(e||t)(Oo(wy),Oo(go),Oo(void 0),Oo(void 0),Oo(ay),Oo(void 0),Oo(Zn),Oo(Zn),Oo(Qn))},t.\u0275dir=Qt({type:t}),t})(),yE=(()=>{class t extends vE{constructor(t,e,n,r,i,s,o){super(t,e,r,s,o,i,hE,cE,fE)}}return t.\u0275fac=function(e){return new(e||t)(dr(wy),dr(go),dr(Bl,8),dr(dE,8),dr(mE),dr(t,12),dr(ay))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),bE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),t})(),wE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[yE,gE],imports:[[Ey,Wv,Ux],Ux]}),t})();function xE(...t){if(1===t.length){const e=t[0];if(u(e))return EE(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return EE(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return EE(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(A(t=>e(...t)))}return EE(t,null)}function EE(t,e){return new y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=O(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const _E=["*"];function SE(t){return Error(`Unable to find icon with the name "${t}"`)}function CE(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function AE(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class IE{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let TE=(()=>{class t{constructor(t,e,n,r){this._httpClient=t,this._sanitizer=e,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,r){return this._addSvgIconConfig(t,e,new IE(n,null,r))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,r){const i=this._sanitizer.sanitize(ri.HTML,n);if(!i)throw AE(n);return this._addSvgIconConfig(t,e,new IE("",i,r))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new IE(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const r=this._sanitizer.sanitize(ri.HTML,e);if(!r)throw AE(e);return this._addSvgIconSetConfig(t,new IE("",r,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(ri.RESOURCE_URL,t);if(!e)throw CE(t);const n=this._cachedIconsByUrl.get(e);return n?Lh(kE(n)):this._loadSvgIconFromConfig(new IE(t,null)).pipe(Ip(t=>this._cachedIconsByUrl.set(e,t)),A(t=>kE(t)))}getNamedSvgIcon(t,e=""){const n=PE(e,t);let r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(e,t),r)return this._svgIconConfigs.set(n,r),this._getSvgFromConfig(r);const i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):lv(SE(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Lh(kE(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(A(t=>kE(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?Lh(n):xE(e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(hp(e=>{const n=this._sanitizer.sanitize(ri.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),Lh(null)})))).pipe(A(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw SE(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.svgText&&r.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(r),n=this._extractSvgIconFromSet(e,t,r.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ip(e=>t.svgText=e),A(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Lh(null):this._fetchIcon(t).pipe(Ip(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const r=t.querySelector(`[id="${e}"]`);if(!r)return null;const i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);const s=this._svgElementFromString("<svg></svg>");return s.appendChild(i),this._setSvgAttributes(s,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let r=0;r<n.length;r++){const{name:t,value:i}=n[r];"id"!==t&&e.setAttribute(t,i)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[r].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:r}=t,i=null!==(e=null==r?void 0:r.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(ri.RESOURCE_URL,n);if(!s)throw CE(n);const o=this._inProgressUrlFetches.get(s);if(o)return o;const a=this._httpClient.get(s,{responseType:"text",withCredentials:i}).pipe(Pp(()=>this._inProgressUrlFetches.delete(s)),tt());return this._inProgressUrlFetches.set(s,a),a}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(PE(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let r=0;r<this._resolvers.length;r++){const i=this._resolvers[r](e,t);if(i)return(n=i).url&&n.options?new IE(i.url,null,i.options):new IE(i,null)}var n}}return t.\u0275fac=function(e){return new(e||t)(dr(Xm,8),dr(Dh),dr(bl,8),dr(hi))},t.\u0275prov=ft({factory:function(){return new t(dr(Xm,8),dr(Dh),dr(bl,8),dr(hi))},token:t,providedIn:"root"}),t})();function kE(t){return t.cloneNode(!0)}function PE(t,e){return t+":"+e}const RE=zx(class{constructor(t){this._elementRef=t}}),DE=new Qn("mat-icon-location",{providedIn:"root",factory:function(){const t=mr(bl),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),FE=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],BE=FE.map(t=>`[${t}]`).join(", "),OE=/^url\(['"]?#(.*?)['"]?\)$/;let NE=(()=>{class t extends RE{constructor(t,e,n,r,i){super(t),this._iconRegistry=e,this._location=r,this._errorHandler=i,this._inline=!1,this._currentIconFetch=h.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Og(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let r=0;r<e.length;r++)e[r].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(BE),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<e.length;r++)FE.forEach(t=>{const i=e[r],s=i.getAttribute(t),o=s?s.match(OE):null;if(o){let e=n.get(i);e||(e=[],n.set(i,e)),e.push({name:t,value:o[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(ep(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(TE),Gn("aria-hidden"),Oo(DE),Oo(hi))},t.\u0275cmp=Kt({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(Ro("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),la("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[yo],ngContentSelectors:_E,decls:1,vars:0,template:function(t,e){1&t&&(Jo(),ta(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),ME=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Ux],Ux]}),t})();const LE=["underline"],VE=["connectionContainer"],jE=["inputContainer"],UE=["label"];function HE(t,e){1&t&&(Uo(0),Lo(1,"div",14),jo(2,"div",15),jo(3,"div",16),jo(4,"div",17),Vo(),Lo(5,"div",18),jo(6,"div",15),jo(7,"div",16),jo(8,"div",17),Vo(),Ho())}function zE(t,e){1&t&&(Lo(0,"div",19),ta(1,1),Vo())}function KE(t,e){if(1&t&&(Uo(0),ta(1,2),Lo(2,"span"),Ea(3),Vo(),Ho()),2&t){const t=Yo(2);rs(3),_a(t._control.placeholder)}}function qE(t,e){1&t&&ta(0,3,["*ngSwitchCase","true"])}function WE(t,e){1&t&&(Lo(0,"span",23),Ea(1," *"),Vo())}function GE(t,e){if(1&t){const t=zo();Lo(0,"label",20,21),Wo("cdkObserveContent",function(){return Oe(t),Yo().updateOutlineGap()}),Fo(2,KE,4,1,"ng-container",12),Fo(3,qE,1,0,"ng-content",12),Fo(4,WE,2,0,"span",22),Vo()}if(2&t){const t=Yo();la("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),No("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Ro("for",t._control.id)("aria-owns",t._control.id),rs(2),No("ngSwitchCase",!1),rs(1),No("ngSwitchCase",!0),rs(1),No("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function $E(t,e){1&t&&(Lo(0,"div",24),ta(1,4),Vo())}function XE(t,e){if(1&t&&(Lo(0,"div",25,26),jo(2,"span",27),Vo()),2&t){const t=Yo();rs(2),la("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function QE(t,e){1&t&&(Lo(0,"div"),ta(1,5),Vo()),2&t&&No("@transitionMessages",Yo()._subscriptAnimationState)}function YE(t,e){if(1&t&&(Lo(0,"div",31),Ea(1),Vo()),2&t){const t=Yo(2);No("id",t._hintLabelId),rs(1),_a(t.hintLabel)}}function ZE(t,e){if(1&t&&(Lo(0,"div",28),Fo(1,YE,2,2,"div",29),ta(2,6),jo(3,"div",30),ta(4,7),Vo()),2&t){const t=Yo();No("@transitionMessages",t._subscriptAnimationState),rs(1),No("ngIf",t.hintLabel)}}const JE=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],t_=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],e_=new Qn("MatError"),n_={transitionMessages:Jy("transitionMessages",[rb("enter",nb({opacity:1,transform:"translateY(0%)"})),ib("void => enter",[nb({opacity:0,transform:"translateY(-5px)"}),tb("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let r_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t}),t})();const i_=new Qn("MatHint");let s_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t,selectors:[["mat-label"]]}),t})(),o_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t,selectors:[["mat-placeholder"]]}),t})();const a_=new Qn("MatPrefix"),u_=new Qn("MatSuffix");let c_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t,selectors:[["","matSuffix",""]],features:[za([{provide:u_,useExisting:t}])]}),t})(),l_=0;const h_=zx(class{constructor(t){this._elementRef=t}},"primary"),p_=new Qn("MAT_FORM_FIELD_DEFAULT_OPTIONS"),f_=new Qn("MatFormField");let d_=(()=>{class t extends h_{constructor(t,e,n,r,i,s,o,a){super(t),this._changeDetectorRef=e,this._dir=r,this._defaults=i,this._platform=s,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new _,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+l_++,this._labelId="mat-form-field-label-"+l_++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=i&&i.appearance?i.appearance:"legacy",this._hideRequiredMarker=!(!i||null==i.hideRequiredMarker)&&i.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Og(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(ip(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(ov(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ov(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),K(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ip(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ip(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(ov(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,jg(this._label.nativeElement,"transitionend").pipe(ep(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&t.push(...this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),s=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const i=r.getBoundingClientRect();if(0===i.width&&0===i.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const s=this._getStartEnd(i),o=t.children,a=this._getStartEnd(o[0].getBoundingClientRect());let u=0;for(let t=0;t<o.length;t++)u+=o[t].offsetWidth;e=Math.abs(a-s)-5,n=u>0?.75*u+10:0}for(let o=0;o<i.length;o++)i[o].style.width=`${e}px`;for(let o=0;o<s.length;o++)s[o].style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(Eu),Oo(Qa),Oo(Fv,8),Oo(p_,8),Oo(wv),Oo(jc),Oo(Fx,8))},t.\u0275cmp=Kt({type:t,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){if(1&t&&(fc(n,r_,5),fc(n,r_,7),fc(n,s_,5),fc(n,s_,7),fc(n,o_,5),fc(n,e_,5),fc(n,i_,5),fc(n,a_,5),fc(n,u_,5)),2&t){let t;hc(t=dc())&&(e._controlNonStatic=t.first),hc(t=dc())&&(e._controlStatic=t.first),hc(t=dc())&&(e._labelChildNonStatic=t.first),hc(t=dc())&&(e._labelChildStatic=t.first),hc(t=dc())&&(e._placeholderChild=t.first),hc(t=dc())&&(e._errorChildren=t),hc(t=dc())&&(e._hintChildren=t),hc(t=dc())&&(e._prefixChildren=t),hc(t=dc())&&(e._suffixChildren=t)}},viewQuery:function(t,e){if(1&t&&(pc(LE,5),pc(VE,7),pc(jE,5),pc(UE,5)),2&t){let t;hc(t=dc())&&(e.underlineRef=t.first),hc(t=dc())&&(e._connectionContainerRef=t.first),hc(t=dc())&&(e._inputContainerRef=t.first),hc(t=dc())&&(e._label=t.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,e){2&t&&la("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat())("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[za([{provide:f_,useExisting:t}]),yo],ngContentSelectors:t_,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(Jo(JE),Lo(0,"div",0),Lo(1,"div",1,2),Wo("click",function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)}),Fo(3,HE,9,0,"ng-container",3),Fo(4,zE,2,0,"div",4),Lo(5,"div",5,6),ta(7),Lo(8,"span",7),Fo(9,GE,5,16,"label",8),Vo(),Vo(),Fo(10,$E,2,0,"div",9),Vo(),Fo(11,XE,3,4,"div",10),Lo(12,"div",11),Fo(13,QE,2,1,"div",12),Fo(14,ZE,5,2,"div",13),Vo(),Vo()),2&t&&(rs(3),No("ngIf","outline"==e.appearance),rs(1),No("ngIf",e._prefixChildren.length),rs(5),No("ngIf",e._hasFloatingLabel()),rs(1),No("ngIf",e._suffixChildren.length),rs(1),No("ngIf","outline"!=e.appearance),rs(1),No("ngSwitch",e._getDisplayedMessages()),rs(1),No("ngSwitchCase","error"),rs(1),No("ngSwitchCase","hint"))},directives:[ql,Xl,Ql,Py],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[n_.transitionMessages]},changeDetection:0}),t})(),m_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Jl,Ux,Ry],Ux]}),t})();function g_(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"div",1),Lo(2,"mat-icon",2),Wo("click",function(){return Oe(t),Yo().dialogRef.close()}),Ea(3,"close"),Vo(),Vo(),Lo(4,"div",3),Lo(5,"h3"),Ea(6),Vo(),jo(7,"div",4),Vo(),Ho()}if(2&t){const t=Yo();rs(6),_a(t.data.title),rs(1),No("innerHTML",t.data.content,ii)}}function v_(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"div",1),Lo(2,"mat-icon",2),Wo("click",function(){return Oe(t),Yo().dialogRef.close()}),Ea(3,"close"),Vo(),Vo(),Lo(4,"div",3),Lo(5,"h3"),Ea(6,"Th\xf4ng b\xe1o"),Vo(),Lo(7,"div",5),Ea(8," T\xe0i kho\u1ea3n Qu\xfd kh\xe1ch ch\u1ecdn hi\u1ec7n \u0111\xe3 c\xf3 ng\u01b0\u1eddi s\u1eed d\u1ee5ng. "),jo(9,"br"),Ea(10," Vui l\xf2ng ch\u1ecdn s\u1ed1 T\xe0i kho\u1ea3n kh\xe1c "),Vo(),Lo(11,"button",6),Wo("click",function(){return Oe(t),Yo().action("back")}),Ea(12,"Tr\u1edf v\u1ec1"),Vo(),Lo(13,"button",7),Wo("click",function(){return Oe(t),Yo().action("again")}),Ea(14," Nh\u1eadp s\u1ed1 kh\xe1c "),Vo(),Vo(),Ho()}}function y_(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"div",1),Lo(2,"mat-icon",2),Wo("click",function(){return Oe(t),Yo().dialogRef.close()}),Ea(3,"close"),Vo(),Vo(),Lo(4,"div",3),Lo(5,"h3"),Ea(6,"Th\xf4ng b\xe1o"),Vo(),Lo(7,"div",5),Ea(8," X\xe1c th\u1ef1c v\xe2n tay kh\xf4ng th\xe0nh c\xf4ng. "),jo(9,"br"),Ea(10," Qu\xfd kh\xe1ch vui l\xf2ng th\u1eed l\u1ea1i "),Vo(),Lo(11,"button",6),Wo("click",function(){return Oe(t),Yo().action("back")}),Ea(12,"Tho\xe1t"),Vo(),Lo(13,"button",7),Wo("click",function(){return Oe(t),Yo().action("again")}),Ea(14,"Th\u1eed l\u1ea1i"),Vo(),Vo(),Ho()}}let b_=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.template=Bg}ngOnInit(){console.log(this.data)}action(t){this.data.action=t,this.dialogRef.close(this.data)}}return t.\u0275fac=function(e){return new(e||t)(Oo(hE),Oo(fE))},t.\u0275cmp=Kt({type:t,selectors:[["app-alert"]],decls:3,vars:3,consts:[[4,"ngIf"],[1,"text-right"],["matSuffix","",3,"click"],[1,"text-center",".exist-account"],[1,"py-4",3,"innerHTML"],[1,"py-4"],[1,"btn","btn-back","mx-2",3,"click"],[1,"btn","btn-next","mx-2",3,"click"]],template:function(t,e){1&t&&(Fo(0,g_,8,2,"ng-container",0),Fo(1,v_,15,0,"ng-container",0),Fo(2,y_,15,0,"ng-container",0)),2&t&&(No("ngIf",e.data.template==e.template.Simple),rs(1),No("ngIf",e.data.template==e.template.ExistAccount),rs(1),No("ngIf",e.data.template==e.template.FingerPrintFailed))},directives:[ql,NE,c_],styles:["[_ngcontent-%COMP%]:not(.mat-icon){font-family:Manrope,sans-serif!important}.btn-back[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{width:150px;height:50px;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#fff;background-color:#2a81d0;font-size:1rem}.btn-next[_ngcontent-%COMP%]:hover{background-color:#1966af}.btn-next[_ngcontent-%COMP%]:disabled:hover{background-color:#2a81d0}.btn-next[_ngcontent-%COMP%]:disabled{opacity:.5}.btn-back[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #2a81d0;color:#2a81d0}.exist-account[_ngcontent-%COMP%]{max-width:400px}"]}),t})();class w_{}class x_{}function E_(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function __(t,e){return t&e}function S_(t,e){return t|e}function C_(t,e){return t^e}function A_(t,e){return t&~e}function I_(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function T_(t){for(var e=0;0!=t;)t&=t-1,++e;return e}var k_,P_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function R_(t){var e,n,r="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),r+=P_.charAt(n>>6)+P_.charAt(63&n);for(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),r+=P_.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),r+=P_.charAt(n>>2)+P_.charAt((3&n)<<4));(3&r.length)>0;)r+="=";return r}function D_(t){var e,n="",r=0,i=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e){var s=P_.indexOf(t.charAt(e));s<0||(0==r?(n+=E_(s>>2),i=3&s,r=1):1==r?(n+=E_(i<<2|s>>4),i=15&s,r=2):2==r?(n+=E_(i),n+=E_(s>>2),i=3&s,r=3):(n+=E_(i<<2|s>>4),n+=E_(15&s),r=0))}return 1==r&&(n+=E_(i<<2)),n}var F_,B_={decode:function(t){var e;if(void 0===F_){var n="= \f\n\r\t\xa0\u2028\u2029";for(F_=Object.create(null),e=0;e<64;++e)F_["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(F_["-"]=62,F_._=63,e=0;e<n.length;++e)F_[n.charAt(e)]=-1}var r=[],i=0,s=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(-1!=(o=F_[o])){if(void 0===o)throw new Error("Illegal character at offset "+e);i|=o,++s>=4?(r[r.length]=i>>16,r[r.length]=i>>8&255,r[r.length]=255&i,i=0,s=0):i<<=6}}switch(s){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:r[r.length]=i>>10;break;case 3:r[r.length]=i>>16,r[r.length]=i>>8&255}return r},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=B_.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return B_.decode(t)}},O_=1e13,N_=function(){function t(t){this.buf=[+t||0]}return t.prototype.mulAdd=function(t,e){var n,r,i=this.buf,s=i.length;for(n=0;n<s;++n)(r=i[n]*t+e)<O_?e=0:r-=(e=0|r/O_)*O_,i[n]=r;e>0&&(i[n]=e)},t.prototype.sub=function(t){var e,n,r=this.buf,i=r.length;for(e=0;e<i;++e)(n=r[e]-t)<0?(n+=O_,t=1):t=0,r[e]=n;for(;0===r[r.length-1];)r.pop()},t.prototype.toString=function(t){if(10!=(t||10))throw new Error("only base 10 is supported");for(var e=this.buf,n=e[e.length-1].toString(),r=e.length-2;r>=0;--r)n+=(O_+e[r]).toString().substring(1);return n},t.prototype.valueOf=function(){for(var t=this.buf,e=0,n=t.length-1;n>=0;--n)e=e*O_+t[n];return e},t.prototype.simplify=function(){var t=this.buf;return 1==t.length?t[0]:this},t}(),M_=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,L_=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function V_(t,e){return t.length>e&&(t=t.substring(0,e)+"\u2026"),t}var j_,U_=function(){function t(e,n){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=n)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset ".concat(t," on a stream of length ").concat(this.enc.length));return"string"==typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,n){for(var r="",i=t;i<e;++i)if(r+=this.hexByte(this.get(i)),!0!==n)switch(15&i){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},t.prototype.isASCII=function(t,e){for(var n=t;n<e;++n){var r=this.get(n);if(r<32||r>176)return!1}return!0},t.prototype.parseStringISO=function(t,e){for(var n="",r=t;r<e;++r)n+=String.fromCharCode(this.get(r));return n},t.prototype.parseStringUTF=function(t,e){for(var n="",r=t;r<e;){var i=this.get(r++);n+=String.fromCharCode(i<128?i:i>191&&i<224?(31&i)<<6|63&this.get(r++):(15&i)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return n},t.prototype.parseStringBMP=function(t,e){for(var n,r,i="",s=t;s<e;)n=this.get(s++),r=this.get(s++),i+=String.fromCharCode(n<<8|r);return i},t.prototype.parseTime=function(t,e,n){var r=this.parseStringISO(t,e),i=(n?M_:L_).exec(r);return i?(n&&(i[1]=+i[1],i[1]+=+i[1]<70?2e3:1900),r=i[1]+"-"+i[2]+"-"+i[3]+" "+i[4],i[5]&&(r+=":"+i[5],i[6]&&(r+=":"+i[6],i[7]&&(r+="."+i[7]))),i[8]&&(r+=" UTC","Z"!=i[8]&&(r+=i[8],i[9]&&(r+=":"+i[9]))),r):"Unrecognized time: "+r},t.prototype.parseInteger=function(t,e){for(var n,r=this.get(t),i=r>127,s=i?255:0,o="";r==s&&++t<e;)r=this.get(t);if(0==(n=e-t))return i?-1:0;if(n>4){for(o=r,n<<=3;0==(128&(+o^s));)o=+o<<1,--n;o="("+n+" bit)\n"}i&&(r-=256);for(var a=new N_(r),u=t+1;u<e;++u)a.mulAdd(256,this.get(u));return o+a.toString()},t.prototype.parseBitString=function(t,e,n){for(var r=this.get(t),i="("+((e-t-1<<3)-r)+" bit)\n",s="",o=t+1;o<e;++o){for(var a=this.get(o),u=o==e-1?r:0,c=7;c>=u;--c)s+=a>>c&1?"1":"0";if(s.length>n)return i+V_(s,n)}return i+s},t.prototype.parseOctetString=function(t,e,n){if(this.isASCII(t,e))return V_(this.parseStringISO(t,e),n);var r=e-t,i="("+r+" byte)\n";r>(n/=2)&&(e=t+n);for(var s=t;s<e;++s)i+=this.hexByte(this.get(s));return r>n&&(i+="\u2026"),i},t.prototype.parseOID=function(t,e,n){for(var r="",i=new N_,s=0,o=t;o<e;++o){var a=this.get(o);if(i.mulAdd(128,127&a),s+=7,!(128&a)){if(""===r)if((i=i.simplify())instanceof N_)i.sub(80),r="2."+i.toString();else{var u=i<80?i<40?0:1:2;r=u+"."+(i-40*u)}else r+="."+i.toString();if(r.length>n)return V_(r,n);i=new N_,s=0}}return s>0&&(r+=".incomplete"),r},t}(),H_=function(){function t(t,e,n,r,i){if(!(r instanceof z_))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=n,this.tag=r,this.sub=i}return t.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},t.prototype.content=function(t){if(void 0===this.tag)return null;void 0===t&&(t=1/0);var e=this.posContent(),n=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+n,t);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(e)?"false":"true";case 2:return this.stream.parseInteger(e,e+n);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(e,e+n,t);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+n,t);case 6:return this.stream.parseOID(e,e+n,t);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return V_(this.stream.parseStringUTF(e,e+n),t);case 18:case 19:case 20:case 21:case 22:case 26:return V_(this.stream.parseStringISO(e,e+n),t);case 30:return V_(this.stream.parseStringBMP(e,e+n),t);case 23:case 24:return this.stream.parseTime(e,e+n,23==this.tag.tagNumber)}return null},t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.toPrettyString=function(t){void 0===t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,this.tag.tagConstructed?e+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(e+=" (encapsulates)"),e+="\n",null!==this.sub){t+="  ";for(var n=0,r=this.sub.length;n<r;++n)e+=this.sub[n].toPrettyString(t)}return e},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),n=127&e;if(n==e)return n;if(n>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===n)return null;e=0;for(var r=0;r<n;++r)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){return this.toHexString().substr(2*this.header,2*this.length)},t.decode=function(e){var n;n=e instanceof U_?e:new U_(e,0);var r=new U_(n),i=new z_(n),s=t.decodeLength(n),o=n.pos,a=o-r.pos,u=null,c=function(){var e=[];if(null!==s){for(var r=o+s;n.pos<r;)e[e.length]=t.decode(n);if(n.pos!=r)throw new Error("Content size is not correct for container starting at offset "+o)}else try{for(;;){var i=t.decode(n);if(i.tag.isEOC())break;e[e.length]=i}s=o-n.pos}catch(BA){throw new Error("Exception while decoding undefined length content: "+BA)}return e};if(i.tagConstructed)u=c();else if(i.isUniversal()&&(3==i.tagNumber||4==i.tagNumber))try{if(3==i.tagNumber&&0!=n.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");u=c();for(var l=0;l<u.length;++l)if(u[l].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(BA){u=null}if(null===u){if(null===s)throw new Error("We can't skip over an invalid tag with undefined length at offset "+o);n.pos=o+Math.abs(s)}return new t(r,a,s,i,u)},t}(),z_=function(){function t(t){var e=t.get();if(this.tagClass=e>>6,this.tagConstructed=0!=(32&e),this.tagNumber=31&e,31==this.tagNumber){var n=new N_;do{e=t.get(),n.mulAdd(128,127&e)}while(128&e);this.tagNumber=n.simplify()}}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),K_=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],q_=(1<<26)/K_[K_.length-1],W_=function(){function t(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):this.fromString(t,null==e&&"string"!=typeof t?256:e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,s=E_(n));o>=0;)a<e?(n=(this[o]&(1<<a)-1)<<e-a,n|=this[--o]>>(a+=this.DB-e)):(n=this[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=E_(n));return i?s:"0"},t.prototype.negate=function(){var e=Y_();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+sS(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var n=Y_();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(t.ZERO)>0&&e.subTo(n,n),n},t.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new $_(e):new X_(e),this.exp(t,n)},t.prototype.clone=function(){var t=Y_();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.toByteArray=function(){var t=this.t,e=[];e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=Y_();return this.bitwiseTo(t,__,e),e},t.prototype.or=function(t){var e=Y_();return this.bitwiseTo(t,S_,e),e},t.prototype.xor=function(t){var e=Y_();return this.bitwiseTo(t,C_,e),e},t.prototype.andNot=function(t){var e=Y_();return this.bitwiseTo(t,A_,e),e},t.prototype.not=function(){for(var t=Y_(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=Y_();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=Y_();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+I_(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=T_(this[n]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,S_)},t.prototype.clearBit=function(t){return this.changeBit(t,A_)},t.prototype.flipBit=function(t){return this.changeBit(t,C_)},t.prototype.add=function(t){var e=Y_();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=Y_();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=Y_();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=Y_();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=Y_();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=Y_(),n=Y_();return this.divRemTo(t,e,n),[e,n]},t.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),s=iS(1);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new $_(e):e.isEven()?new Q_(e):new X_(e);var o=[],a=3,u=n-1,c=(1<<n)-1;if(o[1]=r.convert(this),n>1){var l=Y_();for(r.sqrTo(o[1],l);a<=c;)o[a]=Y_(),r.mulTo(l,o[a-2],o[a]),a+=2}var h,p,f=t.t-1,d=!0,m=Y_();for(i=sS(t[f])-1;f>=0;){for(i>=u?h=t[f]>>i-u&c:(h=(t[f]&(1<<i+1)-1)<<u-i,f>0&&(h|=t[f-1]>>this.DB+i-u)),a=n;0==(1&h);)h>>=1,--a;if((i-=a)<0&&(i+=this.DB,--f),d)o[h].copyTo(s),d=!1;else{for(;a>1;)r.sqrTo(s,m),r.sqrTo(m,s),a-=2;a>0?r.sqrTo(s,m):(p=s,s=m,m=p),r.mulTo(m,o[h],s)}for(;f>=0&&0==(t[f]&1<<i);)r.sqrTo(s,m),p=s,s=m,m=p,--i<0&&(i=this.DB-1,--f)}return r.revert(s)},t.prototype.modInverse=function(e){var n=e.isEven();if(this.isEven()&&n||0==e.signum())return t.ZERO;for(var r=e.clone(),i=this.clone(),s=iS(1),o=iS(0),a=iS(0),u=iS(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),n?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(e,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);r.compareTo(i)>=0?(r.subTo(i,r),n&&s.subTo(a,s),o.subTo(u,o)):(i.subTo(r,i),n&&a.subTo(s,a),u.subTo(o,u))}return 0!=i.compareTo(t.ONE)?t.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u},t.prototype.pow=function(t){return this.exp(t,new G_)},t.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),n.rShiftTo(s,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n},t.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=K_[K_.length-1]){for(e=0;e<K_.length;++e)if(n[0]==K_[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<K_.length;){for(var r=K_[e],i=e+1;i<K_.length&&r<q_;)r*=K_[i++];for(r=n.modInt(r);e<i;)if(r%K_[e++]==0)return!1}return n.millerRabin(t)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(e,n);r=2}this.t=0,this.s=0;for(var i=e.length,s=!1,o=0;--i>=0;){var a=8==r?255&+e[i]:rS(e,i);a<0?"-"==e.charAt(i)&&(s=!0):(s=!1,0==o?this[this.t++]=a:o+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(t/this.DB),o=this.s<<n&this.DM,a=this.t-1;a>=0;--a)e[a+s+1]=this[a]>>r|o,o=(this[a]&i)<<n;for(a=s-1;a>=0;--a)e[a]=0;e[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,s=(1<<r)-1;e[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&s)<<i,e[o-n]=this[o]>>r;r>0&&(e[this.t-n-1]|=(this.s&s)<<i),e.t=this.t-n,e.clamp()}},t.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},t.prototype.multiplyTo=function(e,n){var r=this.abs(),i=e.abs(),s=r.t;for(n.t=s+i.t;--s>=0;)n[s]=0;for(s=0;s<i.t;++s)n[s+r.t]=r.am(0,i[s],n,s,0,r.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)},t.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,n,r){var i=e.abs();if(!(i.t<=0)){var s=this.abs();if(s.t<i.t)return null!=n&&n.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=Y_());var o=Y_(),a=this.s,u=e.s,c=this.DB-sS(i[i.t-1]);c>0?(i.lShiftTo(c,o),s.lShiftTo(c,r)):(i.copyTo(o),s.copyTo(r));var l=o.t,h=o[l-1];if(0!=h){var p=h*(1<<this.F1)+(l>1?o[l-2]>>this.F2:0),f=this.FV/p,d=(1<<this.F1)/p,m=1<<this.F2,g=r.t,v=g-l,y=null==n?Y_():n;for(o.dlShiftTo(v,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),t.ONE.dlShiftTo(l,y),y.subTo(o,o);o.t<l;)o[o.t++]=0;for(;--v>=0;){var b=r[--g]==h?this.DM:Math.floor(r[g]*f+(r[g-1]+m)*d);if((r[g]+=o.am(0,b,r,v,0,l))<b)for(o.dlShiftTo(v,y),r.subTo(y,r);r[g]<--b;)r.subTo(y,r)}null!=n&&(r.drShiftTo(l,n),a!=u&&t.ZERO.subTo(n,n)),r.t=l,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&t.ZERO.subTo(r,r)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,n){if(e>4294967295||e<1)return t.ONE;var r=Y_(),i=Y_(),s=n.convert(this),o=sS(e)-1;for(s.copyTo(r);--o>=0;)if(n.sqrTo(r,i),(e&1<<o)>0)n.mulTo(i,s,r);else{var a=r;r=i,i=a}return n.revert(r)},t.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},t.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=iS(n),i=Y_(),s=Y_(),o="";for(this.divRemTo(r,i,s);i.signum()>0;)o=(n+s.intValue()).toString(t).substr(1)+o,i.divRemTo(r,i,s);return s.intValue().toString(t)+o},t.prototype.fromRadix=function(e,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),s=!1,o=0,a=0,u=0;u<e.length;++u){var c=rS(e,u);c<0?"-"==e.charAt(u)&&0==this.signum()&&(s=!0):(a=n*a+c,++o>=r&&(this.dMultiply(i),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(n,o)),this.dAddOffset(a,0)),s&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,n,r){if("number"==typeof n)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),S_,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var i=[],s=7&e;i.length=1+(e>>3),n.nextBytes(i),s>0?i[0]&=(1<<s)-1:i[0]=0,this.fromString(i,256)}},t.prototype.bitwiseTo=function(t,e,n){var r,i,s=Math.min(t.t,this.t);for(r=0;r<s;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=s;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},t.prototype.changeBit=function(e,n){var r=t.ONE.shiftLeft(e);return this.bitwiseTo(r,n,r),r},t.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},t.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},t.prototype.multiplyLowerTo=function(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n[--r]=0;for(var i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,t[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t[r],n,r,0,e-r);n.clamp()},t.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},t.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},t.prototype.millerRabin=function(e){var n=this.subtract(t.ONE),r=n.getLowestSetBit();if(r<=0)return!1;var i=n.shiftRight(r);(e=e+1>>1)>K_.length&&(e=K_.length);for(var s=Y_(),o=0;o<e;++o){s.fromInt(K_[Math.floor(Math.random()*K_.length)]);var a=s.modPow(i,this);if(0!=a.compareTo(t.ONE)&&0!=a.compareTo(n)){for(var u=1;u++<r&&0!=a.compareTo(n);)if(0==(a=a.modPowInt(2,this)).compareTo(t.ONE))return!1;if(0!=a.compareTo(n))return!1}}return!0},t.prototype.square=function(){var t=Y_();return this.squareTo(t),t},t.prototype.gcda=function(t,e){var n=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(n.compareTo(r)<0){var i=n;n=r,r=i}var s=n.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)e(n);else{s<o&&(o=s),o>0&&(n.rShiftTo(o,n),r.rShiftTo(o,r));var a=function(){(s=n.getLowestSetBit())>0&&n.rShiftTo(s,n),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),n.compareTo(r)>=0?(n.subTo(r,n),n.rShiftTo(1,n)):(r.subTo(n,r),r.rShiftTo(1,r)),n.signum()>0?setTimeout(a,0):(o>0&&r.lShiftTo(o,r),setTimeout(function(){e(r)},0))};setTimeout(a,10)}},t.prototype.fromNumberAsync=function(e,n,r,i){if("number"==typeof n)if(e<2)this.fromInt(1);else{this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),S_,this),this.isEven()&&this.dAddOffset(1,0);var s=this,o=function(){s.dAddOffset(2,0),s.bitLength()>e&&s.subTo(t.ONE.shiftLeft(e-1),s),s.isProbablePrime(n)?setTimeout(function(){i()},0):setTimeout(o,0)};setTimeout(o,0)}else{var a=[],u=7&e;a.length=1+(e>>3),n.nextBytes(a),u>0?a[0]&=(1<<u)-1:a[0]=0,this.fromString(a,256)}},t}(),G_=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),$_=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),X_=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=Y_();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(W_.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=Y_();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),Q_=function(){function t(t){this.m=t,this.r2=Y_(),this.q3=Y_(),W_.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t)}return t.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Y_();return t.copyTo(e),this.reduce(e),e},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();function Y_(){return new W_(null)}function Z_(t,e){return new W_(t,e)}var J_="undefined"!=typeof navigator;J_&&"Microsoft Internet Explorer"==navigator.appName?(W_.prototype.am=function(t,e,n,r,i,s){for(var o=32767&e,a=e>>15;--s>=0;){var u=32767&this[t],c=this[t++]>>15,l=a*u+c*o;i=((u=o*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},j_=30):J_&&"Netscape"!=navigator.appName?(W_.prototype.am=function(t,e,n,r,i,s){for(;--s>=0;){var o=e*this[t++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},j_=26):(W_.prototype.am=function(t,e,n,r,i,s){for(var o=16383&e,a=e>>14;--s>=0;){var u=16383&this[t],c=this[t++]>>14,l=a*u+c*o;i=((u=o*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},j_=28),W_.prototype.DB=j_,W_.prototype.DM=(1<<j_)-1,W_.prototype.DV=1<<j_,W_.prototype.FV=Math.pow(2,52),W_.prototype.F1=52-j_,W_.prototype.F2=2*j_-52;var tS,eS,nS=[];for(tS="0".charCodeAt(0),eS=0;eS<=9;++eS)nS[tS++]=eS;for(tS="a".charCodeAt(0),eS=10;eS<36;++eS)nS[tS++]=eS;for(tS="A".charCodeAt(0),eS=10;eS<36;++eS)nS[tS++]=eS;function rS(t,e){var n=nS[t.charCodeAt(e)];return null==n?-1:n}function iS(t){var e=Y_();return e.fromInt(t),e}function sS(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}W_.ZERO=iS(0),W_.ONE=iS(1);var oS,aS,uS=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)r=this.S[e],this.S[e]=this.S[n=n+this.S[e]+t[e%t.length]&255],this.S[n]=r;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}(),cS=null;if(null==cS){cS=[],aS=0;var lS=void 0;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var hS=new Uint32Array(256);for(window.crypto.getRandomValues(hS),lS=0;lS<hS.length;++lS)cS[aS++]=255&hS[lS]}var pS=0,fS=function(t){if((pS=pS||0)>=256||aS>=256)window.removeEventListener?window.removeEventListener("mousemove",fS,!1):window.detachEvent&&window.detachEvent("onmousemove",fS);else try{cS[aS++]=255&t.x+t.y,pS+=1}catch(BA){}};"undefined"!=typeof window&&(window.addEventListener?window.addEventListener("mousemove",fS,!1):window.attachEvent&&window.attachEvent("onmousemove",fS))}function dS(){if(null==oS){for(oS=new uS;aS<256;){var t=Math.floor(65536*Math.random());cS[aS++]=255&t}for(oS.init(cS),aS=0;aS<cS.length;++aS)cS[aS]=0;aS=0}return oS.next()}var mS=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=dS()},t}(),gS=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=Z_(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=this.n.bitLength()+7>>3,n=function(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;for(var n=[],r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=63&i|128,n[--e]=i>>6|192):(n[--e]=63&i|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var s=new mS,o=[];e>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);n[--e]=o[0]}return n[--e]=2,n[--e]=0,new W_(n)}(t,e);if(null==n)return null;var r=this.doPublic(n);if(null==r)return null;for(var i=r.toString(16),s=i.length,o=0;o<2*e-s;o++)i="0"+i;return i},t.prototype.setPrivate=function(t,e,n){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=Z_(t,16),this.e=parseInt(e,16),this.d=Z_(n,16)):console.error("Invalid RSA private key")},t.prototype.setPrivateEx=function(t,e,n,r,i,s,o,a){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=Z_(t,16),this.e=parseInt(e,16),this.d=Z_(n,16),this.p=Z_(r,16),this.q=Z_(i,16),this.dmp1=Z_(s,16),this.dmq1=Z_(o,16),this.coeff=Z_(a,16)):console.error("Invalid RSA private key")},t.prototype.generate=function(t,e){var n=new mS,r=t>>1;this.e=parseInt(e,16);for(var i=new W_(e,16);;){for(;this.p=new W_(t-r,1,n),0!=this.p.subtract(W_.ONE).gcd(i).compareTo(W_.ONE)||!this.p.isProbablePrime(10););for(;this.q=new W_(r,1,n),0!=this.q.subtract(W_.ONE).gcd(i).compareTo(W_.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(W_.ONE),a=this.q.subtract(W_.ONE),u=o.multiply(a);if(0==u.gcd(i).compareTo(W_.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(u),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}},t.prototype.decrypt=function(t){var e=Z_(t,16),n=this.doPrivate(e);return null==n?null:function(t,e){for(var n=t.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=e-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var s=255&n[r];s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((31&s)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&s)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}(n,this.n.bitLength()+7>>3)},t.prototype.generateAsync=function(t,e,n){var r=new mS,i=t>>1;this.e=parseInt(e,16);var s=new W_(e,16),o=this,a=function(){var e=function(){if(o.p.compareTo(o.q)<=0){var t=o.p;o.p=o.q,o.q=t}var e=o.p.subtract(W_.ONE),r=o.q.subtract(W_.ONE),i=e.multiply(r);0==i.gcd(s).compareTo(W_.ONE)?(o.n=o.p.multiply(o.q),o.d=s.modInverse(i),o.dmp1=o.d.mod(e),o.dmq1=o.d.mod(r),o.coeff=o.q.modInverse(o.p),setTimeout(function(){n()},0)):setTimeout(a,0)},u=function(){o.q=Y_(),o.q.fromNumberAsync(i,1,r,function(){o.q.subtract(W_.ONE).gcda(s,function(t){0==t.compareTo(W_.ONE)&&o.q.isProbablePrime(10)?setTimeout(e,0):setTimeout(u,0)})})},c=function(){o.p=Y_(),o.p.fromNumberAsync(t-i,1,r,function(){o.p.subtract(W_.ONE).gcda(s,function(t){0==t.compareTo(W_.ONE)&&o.p.isProbablePrime(10)?setTimeout(u,0):setTimeout(c,0)})})};setTimeout(c,0)};setTimeout(a,0)},t.prototype.sign=function(t,e,n){var r=function(t,e){if(e<t.length+22)return console.error("Message too long for RSA"),null;for(var n=e-t.length-6,r="",i=0;i<n;i+=2)r+="ff";return Z_("0001"+r+"00"+t,16)}((vS[n]||"")+e(t).toString(),this.n.bitLength()/4);if(null==r)return null;var i=this.doPrivate(r);if(null==i)return null;var s=i.toString(16);return 0==(1&s.length)?s:"0"+s},t.prototype.verify=function(t,e,n){var r=Z_(e,16),i=this.doPublic(r);return null==i?null:function(t){for(var e in vS)if(vS.hasOwnProperty(e)){var n=vS[e],r=n.length;if(t.substr(0,r)==n)return t.substr(r)}return t}(i.toString(16).replace(/^1f+00/,""))==n(t).toString()},t}(),vS={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"},yS={};yS.lang={extend:function(t,e,n){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var r=function(){};if(r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),n){var i;for(i in n)t.prototype[i]=n[i];var s=function(){},o=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(s=function(t,e){for(i=0;i<o.length;i+=1){var n=o[i],r=e[n];"function"==typeof r&&r!=Object.prototype[n]&&(t[n]=r)}})}catch(a){}s(t.prototype,n)}}};var bS={};void 0!==bS.asn1&&bS.asn1||(bS.asn1={}),bS.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1).length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";e=new W_(r,16).xor(t).add(W_.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return hextopem(t,e)},this.newObject=function(t){var e=bS.asn1,n=e.DERBoolean,r=e.DERInteger,i=e.DERBitString,s=e.DEROctetString,o=e.DERNull,a=e.DERObjectIdentifier,u=e.DEREnumerated,c=e.DERUTF8String,l=e.DERNumericString,h=e.DERPrintableString,p=e.DERTeletexString,f=e.DERIA5String,d=e.DERUTCTime,m=e.DERGeneralizedTime,g=e.DERSequence,v=e.DERSet,y=e.DERTaggedObject,b=e.ASN1Util.newObject,w=Object.keys(t);if(1!=w.length)throw"key of param shall be only one.";var x=w[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+x+":"))throw"undefined key: "+x;if("bool"==x)return new n(t[x]);if("int"==x)return new r(t[x]);if("bitstr"==x)return new i(t[x]);if("octstr"==x)return new s(t[x]);if("null"==x)return new o(t[x]);if("oid"==x)return new a(t[x]);if("enum"==x)return new u(t[x]);if("utf8str"==x)return new c(t[x]);if("numstr"==x)return new l(t[x]);if("prnstr"==x)return new h(t[x]);if("telstr"==x)return new p(t[x]);if("ia5str"==x)return new f(t[x]);if("utctime"==x)return new d(t[x]);if("gentime"==x)return new m(t[x]);if("seq"==x){for(var E=t[x],_=[],S=0;S<E.length;S++){var C=b(E[S]);_.push(C)}return new g({array:_})}if("set"==x){for(E=t[x],_=[],S=0;S<E.length;S++)C=b(E[S]),_.push(C);return new v({array:_})}if("tag"==x){var A=t[x];if("[object Array]"===Object.prototype.toString.call(A)&&3==A.length){var I=b(A[2]);return new y({tag:A[0],explicit:A[1],obj:I})}var T={};if(void 0!==A.explicit&&(T.explicit=A.explicit),void 0!==A.tag&&(T.tag=A.tag),void 0===A.obj)throw"obj shall be specified for 'tag'.";return T.obj=b(A.obj),new y(T)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},bS.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",n=parseInt(t.substr(0,2),16),r=(e=Math.floor(n/40)+"."+n%40,""),i=2;i<t.length;i+=2){var s=("00000000"+parseInt(t.substr(i,2),16).toString(2)).slice(-8);r+=s.substr(1,7),"0"==s.substr(0,1)&&(e=e+"."+new W_(r,2).toString(10),r="")}return e},bS.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new W_(t,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=e(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},bS.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var n=e.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+n).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},bS.asn1.DERAbstractString=function(t){bS.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},yS.lang.extend(bS.asn1.DERAbstractString,bS.asn1.ASN1Object),bS.asn1.DERAbstractTime=function(t){bS.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,n){var r=this.zeroPadding,i=this.localDateToUTC(t),s=String(i.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=s+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var a=i.getMilliseconds();if(0!=a){var u=r(String(a),3);o=o+"."+(u=u.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(t)},this.setByDateValue=function(t,e,n,r,i,s){var o=new Date(Date.UTC(t,e-1,n,r,i,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},yS.lang.extend(bS.asn1.DERAbstractTime,bS.asn1.ASN1Object),bS.asn1.DERAbstractStructured=function(t){bS.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},yS.lang.extend(bS.asn1.DERAbstractStructured,bS.asn1.ASN1Object),bS.asn1.DERBoolean=function(){bS.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},yS.lang.extend(bS.asn1.DERBoolean,bS.asn1.ASN1Object),bS.asn1.DERInteger=function(t){bS.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=bS.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new W_(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},yS.lang.extend(bS.asn1.DERInteger,bS.asn1.ASN1Object),bS.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=bS.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}bS.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var n="0"+t;this.hTLV=null,this.isModified=!0,this.hV=n+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var n=0;n<=e;n++)t+="0";var r="";for(n=0;n<t.length-1;n+=8){var i=t.substr(n,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",n=0;n<t.length;n++)e+=1==t[n]?"1":"0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},yS.lang.extend(bS.asn1.DERBitString,bS.asn1.ASN1Object),bS.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=bS.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}bS.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},yS.lang.extend(bS.asn1.DEROctetString,bS.asn1.DERAbstractString),bS.asn1.DERNull=function(){bS.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},yS.lang.extend(bS.asn1.DERNull,bS.asn1.ASN1Object),bS.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new W_(t,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};bS.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=e(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var e=bS.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},yS.lang.extend(bS.asn1.DERObjectIdentifier,bS.asn1.ASN1Object),bS.asn1.DEREnumerated=function(t){bS.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=bS.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new W_(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},yS.lang.extend(bS.asn1.DEREnumerated,bS.asn1.ASN1Object),bS.asn1.DERUTF8String=function(t){bS.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},yS.lang.extend(bS.asn1.DERUTF8String,bS.asn1.DERAbstractString),bS.asn1.DERNumericString=function(t){bS.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},yS.lang.extend(bS.asn1.DERNumericString,bS.asn1.DERAbstractString),bS.asn1.DERPrintableString=function(t){bS.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},yS.lang.extend(bS.asn1.DERPrintableString,bS.asn1.DERAbstractString),bS.asn1.DERTeletexString=function(t){bS.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},yS.lang.extend(bS.asn1.DERTeletexString,bS.asn1.DERAbstractString),bS.asn1.DERIA5String=function(t){bS.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},yS.lang.extend(bS.asn1.DERIA5String,bS.asn1.DERAbstractString),bS.asn1.DERUTCTime=function(t){bS.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},yS.lang.extend(bS.asn1.DERUTCTime,bS.asn1.DERAbstractTime),bS.asn1.DERGeneralizedTime=function(t){bS.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},yS.lang.extend(bS.asn1.DERGeneralizedTime,bS.asn1.DERAbstractTime),bS.asn1.DERSequence=function(t){bS.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++)t+=this.asn1Array[e].getEncodedHex();return this.hV=t,this.hV}},yS.lang.extend(bS.asn1.DERSequence,bS.asn1.DERAbstractStructured),bS.asn1.DERSet=function(t){bS.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++)t.push(this.asn1Array[e].getEncodedHex());return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},yS.lang.extend(bS.asn1.DERSet,bS.asn1.DERAbstractStructured),bS.asn1.DERTaggedObject=function(t){bS.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,n){this.hT=e,this.isExplicit=t,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},yS.lang.extend(bS.asn1.DERTaggedObject,bS.asn1.ASN1Object);var wS,xS=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ES=function(t){function e(n){var r=t.call(this)||this;return n&&("string"==typeof n?r.parseKey(n):(e.hasPrivateKeyProperty(n)||e.hasPublicKeyProperty(n))&&r.parsePropertiesFrom(n)),r}return xS(e,t),e.prototype.parseKey=function(t){try{var e=0,n=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?function(t){var e;if(void 0===k_){var n="0123456789ABCDEF",r=" \f\n\r\t\xa0\u2028\u2029";for(k_={},e=0;e<16;++e)k_[n.charAt(e)]=e;for(n=n.toLowerCase(),e=10;e<16;++e)k_[n.charAt(e)]=e;for(e=0;e<r.length;++e)k_[r.charAt(e)]=-1}var i=[],s=0,o=0;for(e=0;e<t.length;++e){var a=t.charAt(e);if("="==a)break;if(-1!=(a=k_[a])){if(void 0===a)throw new Error("Illegal character at offset "+e);s|=a,++o>=2?(i[i.length]=s,s=0,o=0):s<<=4}}if(o)throw new Error("Hex encoding incomplete: 4 bits missing");return i}(t):B_.unarmor(t),i=H_.decode(r);if(3===i.sub.length&&(i=i.sub[2].sub[0]),9===i.sub.length){e=i.sub[1].getHexStringValue(),this.n=Z_(e,16),n=i.sub[2].getHexStringValue(),this.e=parseInt(n,16);var s=i.sub[3].getHexStringValue();this.d=Z_(s,16);var o=i.sub[4].getHexStringValue();this.p=Z_(o,16);var a=i.sub[5].getHexStringValue();this.q=Z_(a,16);var u=i.sub[6].getHexStringValue();this.dmp1=Z_(u,16);var c=i.sub[7].getHexStringValue();this.dmq1=Z_(c,16);var l=i.sub[8].getHexStringValue();this.coeff=Z_(l,16)}else{if(2!==i.sub.length)return!1;if(i.sub[0].sub){var h=i.sub[1].sub[0];e=h.sub[0].getHexStringValue(),this.n=Z_(e,16),n=h.sub[1].getHexStringValue(),this.e=parseInt(n,16)}else e=i.sub[0].getHexStringValue(),this.n=Z_(e,16),n=i.sub[1].getHexStringValue(),this.e=parseInt(n,16)}return!0}catch(p){return!1}},e.prototype.getPrivateBaseKey=function(){var t={array:[new bS.asn1.DERInteger({int:0}),new bS.asn1.DERInteger({bigint:this.n}),new bS.asn1.DERInteger({int:this.e}),new bS.asn1.DERInteger({bigint:this.d}),new bS.asn1.DERInteger({bigint:this.p}),new bS.asn1.DERInteger({bigint:this.q}),new bS.asn1.DERInteger({bigint:this.dmp1}),new bS.asn1.DERInteger({bigint:this.dmq1}),new bS.asn1.DERInteger({bigint:this.coeff})]};return new bS.asn1.DERSequence(t).getEncodedHex()},e.prototype.getPrivateBaseKeyB64=function(){return R_(this.getPrivateBaseKey())},e.prototype.getPublicBaseKey=function(){var t=new bS.asn1.DERSequence({array:[new bS.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new bS.asn1.DERNull]}),e=new bS.asn1.DERSequence({array:[new bS.asn1.DERInteger({bigint:this.n}),new bS.asn1.DERInteger({int:this.e})]}),n=new bS.asn1.DERBitString({hex:"00"+e.getEncodedHex()});return new bS.asn1.DERSequence({array:[t,n]}).getEncodedHex()},e.prototype.getPublicBaseKeyB64=function(){return R_(this.getPublicBaseKey())},e.wordwrap=function(t,e){return e=e||64,t?t.match(RegExp("(.{1,"+e+"})( +|$\n?)|(.{1,"+e+"})","g")).join("\n"):t},e.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return(t+=e.wordwrap(this.getPrivateBaseKeyB64())+"\n")+"-----END RSA PRIVATE KEY-----"},e.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return(t+=e.wordwrap(this.getPublicBaseKeyB64())+"\n")+"-----END PUBLIC KEY-----"},e.hasPublicKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")},e.hasPrivateKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},e.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)},e}(gS),_S="undefined"!=typeof process?null===(wS=process.env)||void 0===wS?void 0:wS.npm_package_version:void 0,SS=function(){function t(t){void 0===t&&(t={}),this.default_key_size=(t=t||{}).default_key_size?parseInt(t.default_key_size,10):1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new ES(t)},t.prototype.setPrivateKey=function(t){this.setKey(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.prototype.decrypt=function(t){try{return this.getKey().decrypt(D_(t))}catch(e){return!1}},t.prototype.encrypt=function(t){try{return R_(this.getKey().encrypt(t))}catch(e){return!1}},t.prototype.sign=function(t,e,n){try{return R_(this.getKey().sign(t,e,n))}catch(r){return!1}},t.prototype.verify=function(t,e,n){try{return this.getKey().verify(t,D_(e),n)}catch(r){return!1}},t.prototype.getKey=function(t){if(!this.key){if(this.key=new ES,t&&"[object Function]"==={}.toString.call(t))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},t.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},t.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},t.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},t.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},t.version=_S,t}(),CS=n(2527),AS=n(7184),IS=n(2025);class TS{static sign(t){return console.log(Buffer.from(t)),this.importKey().pipe(V(e=>(console.log(e),AS.JWS.createSign({alg:"RS256",format:"compact"},e).update(Buffer.from(t)).final())))}static sign2(t){let e=new IS.fs.crypto.Signature({alg:"SHA256withRSA"});e.init(cg),e.updateString(t);let n=e.sign();console.log("sigHex",n)}static sign3(t){let e=new SS({default_key_size:"2048"});return e.setPrivateKey(cg),e.sign(t,this.SHA256,"sha256")}static SHA256(t){return CS.SHA256(t).toString(CS.enc.Base64)}static importKey(){return O(AS.JWK.asKey(cg,"pem"))}static encrypt(t){return this.encryptMod.setPublicKey("-----BEGIN PUBLIC KEY-----\n  MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuKwQibnz77qMV1EvF5Or\n  gaT0gPtaag3RnImqkh0SLxBVKdplNk+qG+pAT/NJp0CSvmudgHTSbD7q7SHeD4ll\n  vJ6NvjJ/siS9Ehs2W5WcolggYHqSzu7xKcFevBbLOKIRmRuMTbRrT5py42TFFZ6i\n  0I54W2UeDYBPNegkbnK9vDDIFb/L2toh3nhvgDP2QZ+XGPuEt1ziIwsQceyCgOoR\n  pyHfXwfQGQmEv4NMAF28EyUnA5byyA/JS5EE+bqfXECfJdVUREJDxVJIRQ2d2jnb\n  nIC8FlA+e5Mel/cUtpvk12lDih80XkA9uHMaP5zUqUBVowbWxORN91OonmtKnSMb\n  NQIDAQAB\n  -----END PUBLIC KEY-----"),this.encryptMod.encrypt(t)}static decrypt(t){return this.encryptMod.setPrivateKey(cg),this.encryptMod.decrypt(t)}static randomId(t){for(var e="",n="0123456789",r=n.length,i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}static formatDate(t){let e=t.split("/");return e[2]+e[1]+e[0]}static strToDate(t){let e=t.slice(0,4),n=t.slice(4,6);return[t.slice(6,8),n,e].join("/")}}TS.issPlace="CTCCSQLHCVTTXH",TS.encryptMod=new SS;let kS=(()=>{class t{constructor(t,e,n,r){this.router=t,this.http=e,this.baseUrl=n,this.dialog=r,this.currentSerice=Ig.None,this.currentStep=Tg.DashBoard,this.isProcessing=!1,this.apiUrl="https://cardtest.sacombank.com.vn:9443/digizone/",this.deviceID="00000001",this.sessionID="",this.refNumber="",this.customerEnrollInfo=new bg,this.customerInfo=new gg,this.registerAlert=new yg,this.fpResponse=new w_,this.openAccountResponseData=new wg,this.checkCustomerByIdNoResponseData=new Ag,this.fpAttemp=0,this.faceCaptured="",this.frontCardId="",this.backCardId="",this.authenInfo=[],this.headerDict={"Content-Type":"application/json;ngann",Accept:"*/*","Access-Control-Allow-Origin":"*"}}release(){this.isProcessing=!1,this.currentSerice=Ig.None,this.currentStep=Tg.DashBoard,this.refNumber="",this.sessionID="",this.customerEnrollInfo=new bg,this.customerInfo=new gg,this.registerAlert=new yg,this.fpResponse=new w_,this.openAccountResponseData=new wg,this.checkCustomerByIdNoResponseData=new Ag,this.frontCardId="",this.backCardId="",this.faceCaptured="",this.fpAttemp=0,this.authenInfo=[],this.router.navigate(["/aio/dash-board"])}postAsync(t,e){return this.http.post(`${this.apiUrl}${t}`,e,{headers:new Fm(this.headerDict)})}getTestCase(){return this.http.get("https://script.googleusercontent.com/macros/echo?user_content_key=51ggE-tGOfKm5pHh-TI9ya8gF0L7FZtI_78goLzKEOb7RSEpFmAFtCP1w6EGFUbggpGcPXMmXOerPw68OpBR01KlJ-PMbKNim5_BxDlH2jW0nuo2oDemN9CCS2h10ox_1xSncGQajx_ryfhECjZEnLcmh-ftdXUoLC-snEeYhvYipzZ81i4aAU7lEl4TR6BinQ38WpmQm1TXteMJsW-0eIZp7UDGMETJPFCn-R5LuM_0bsUVe31J1A&lib=Ms7HLW8aIvZno15AlAhQeXu7_LOrhYMhx",{headers:new Fm(this.headerDict)})}getSessionId(){let t=this.newRequest({serviceCode:Ig[this.currentSerice]});return console.log(t),this.http.post(this.apiUrl+"get-sessionId",t,{headers:new Fm(this.headerDict)})}testRSA(){let t=this.newRequest({serviceCode:Ig[this.currentSerice]});return console.log(t),t='{"refNumber":"f74ec3ae-a3a6-264c-7e06-6c0cf21a9803","refDateTime":"2022-12-30T09:19:11.237","deviceID":"00000002","sessionID":"","data":{"serviceCode":"None"}}',TS.sign2(t),console.log("sign"),console.log(TS.sign3(t)),console.log("payload"),console.log(TS.encrypt(t)),TS.sign(t).pipe(V(e=>(console.log(e),this.http.post(this.apiUrl+"test-rsa",btoa(TS.encrypt(t).toString()),{headers:new Fm({"Content-Type":"application/json;",Accept:"*/*","Access-Control-Allow-Origin":"*",sign:btoa(e)})}))))}verifySessionID(t,e){let n=this.newRequest(null,t,e);return console.log(n),this.http.post(this.apiUrl+"verify-sessionId",n,{headers:new Fm(this.headerDict)})}uploadImage(t,e,n=this.deviceID,r=this.sessionID){let i=this.newRequest({imageBas64:t,imageType:e},n,r);return this.http.post(this.apiUrl+"upload-image",i,{headers:new Fm(this.headerDict)})}loadImage(){let t=this.newRequest(null,this.deviceID,this.sessionID,!1);return this.http.post(this.apiUrl+"load-image",t,{headers:new Fm(this.headerDict)})}compareFace(){let t=this.newRequest();return this.http.post(this.apiUrl+"compareFace",t,{headers:new Fm(this.headerDict)})}verifyEmail(t){let e=this.newRequest({email:t});return this.http.post(this.apiUrl+"verify-email",e,{headers:new Fm(this.headerDict)})}checkAccount(t){let e=this.newRequest({accountNo:t});return this.http.post(this.apiUrl+"check-account",e,{headers:new Fm(this.headerDict)})}checkCustomerByIdNo(t){let e=this.newRequest({legalId:t,legalIdType:"1"});return this.http.post(this.apiUrl+"check-customer",e,{headers:new Fm(this.headerDict)})}checkCustomerSDB(t){let e=this.newRequest(t);return this.http.post(this.apiUrl+"check-customer-sdb",e,{headers:new Fm(this.headerDict)})}updateCustomer(t){let e=this.newRequest(t);return this.http.post(this.apiUrl+"update-customer",e,{headers:new Fm(this.headerDict)})}getAuthMethod(t){let e=this.newRequest(t);return this.http.post(this.apiUrl+"get-authMethod",e,{headers:new Fm(this.headerDict)})}requestOtp(t){let e=this.newRequest(t);return this.http.post(this.apiUrl+"request-otp",e,{headers:new Fm(this.headerDict)})}verifyOtp(t){let e=this.newRequest(t);return this.http.post(this.apiUrl+"verify-otp",e,{headers:new Fm(this.headerDict)})}customerEnroll(){let t=this.newRequest(this.customerEnrollInfo);return this.http.post(this.apiUrl+"create-customer",t,{headers:new Fm(this.headerDict)})}openAccount(t){let e=this.newRequest(t);return this.http.post(this.apiUrl+"create-account",e,{headers:new Fm(this.headerDict)})}verifyAuthMethod(t){let e=this.newRequest(t);return this.http.post(this.apiUrl+"verify-authMethod",e,{headers:new Fm(this.headerDict)})}checkCustomer(t){let e=this.newRequest(t);return this.http.post(this.apiUrl+"check-customer",e,{headers:new Fm(this.headerDict)})}getProvinces(){let t=this.newRequest();return this.http.post(this.apiUrl+"provinces",t,{headers:new Fm(this.headerDict)})}getDistricts(t){let e=this.newRequest({provinceID:t});return this.http.post(this.apiUrl+"districts",e,{headers:new Fm(this.headerDict)})}getWards(t){let e=this.newRequest({districtID:t});return this.http.post(this.apiUrl+"wards",e,{headers:new Fm(this.headerDict)})}getOccupations(){let t=this.newRequest();return this.http.post(this.apiUrl+"occupations",t,{headers:new Fm(this.headerDict)})}findAddressByText(t){let e=this.newRequest({addressText:t});return this.http.post(this.apiUrl+"find-address-by-text",e,{headers:new Fm(this.headerDict)})}alert(t){let e=new Fg;e.template=Bg.Simple,e.title="Th\xf4ng b\xe1o",e.content=t,this.dialog.open(b_,{data:e,autoFocus:!1}).afterClosed().subscribe(t=>{this.release()})}updateLogStep(t="",e="",n="",r="",i=!0){let s=new hg;s.stepName=Tg[this.currentStep],s.identityID=t,s.lastRespCode=""==e?"00":e,s.lastRespDescription=""==n?"Success":n,s.lastChildStep=r||s.stepName;let o=this.newRequest(s);this.http.post(this.apiUrl+"log-step",o,{headers:this.headerDict}).subscribe(t=>{console.log(t),t&&("00"!=t.respCode?(this.isProcessing=!1,this.alert("C\xf3 l\u1ed7i x\u1ea3y ra: updateLogStep")):(this.isProcessing=!1,i?this.navigate():this.release()))},t=>{this.isProcessing=!1,this.alert("C\xf3 l\u1ed7i x\u1ea3y ra: updateLogStep")})}navigate(){if(this.currentSerice==Ig.OnBoarding)switch(this.currentStep){case Tg.DashBoard:this.router.navigate(["/aio/shared/input-finger"]);break;case Tg.CaptureGuide:this.router.navigate(["/aio/shared/capture-face"]);break;case Tg.CaptureFace:this.router.navigate(["/aio/shared/input-finger"]);break;case Tg.InputFinger:this.router.navigate(["/aio/shared/collect-card-id"]);break;case Tg.CollectCardId:this.router.navigate(["/aio/shared/verify-customer-info"]);break;case Tg.VerifyCustomerInfo:this.router.navigate(["/aio/shared/fill-info"]);break;case Tg.FillInfo:this.router.navigate(["/aio/on-boarding/account-and-alert"]);break;case Tg.AccountAndAlert:this.router.navigate(["/aio/shared/verify-otp"]);break;case Tg.VerifyOtp:this.router.navigate(["/aio/on-boarding"]);break;case Tg.CustomerEnroll:this.router.navigate(["/aio/on-boarding/end"]);break;case Tg.End:default:this.router.navigate(["/aio"])}if(this.currentSerice==Ig.UpdateCardId)switch(this.currentStep){case Tg.DashBoard:this.router.navigate(["/aio/shared/capture-guide"]);break;case Tg.CaptureGuide:this.router.navigate(["/aio/shared/capture-face"]);break;case Tg.CaptureFace:this.router.navigate(["/aio/shared/input-finger"]);break;case Tg.InputFinger:this.router.navigate(["/aio/shared/collect-card-id"]);break;case Tg.CollectCardId:this.router.navigate(["/aio/update-card-id/recheck-info"]);break;case Tg.RecheckInfo:this.router.navigate(["/aio/shared/verify-otp"]);break;case Tg.VerifyOtp:this.router.navigate(["/aio/update-card-id"]);break;case Tg.UpdateCustomerInfo:this.router.navigate(["/aio/update-card-id/update-success"]);break;case Tg.End:default:this.router.navigate(["/aio"])}}newRequest(t=null,e=this.deviceID,n=this.sessionID,r=!0){this.isProcessing=r;let i=new lg;return i.refNumber=Dg.h.UUID(),i.refDateTime=(new Date).toISOString().replace("Z",""),i.deviceID=e,i.sessionID=n,i.data=t,JSON.stringify(i)}next(){this.navigate()}fakeData(){this.getTestCase().subscribe(t=>{console.log(t);let e=t.content[1];console.log("fake data",e);let n=new gg;n.fullName=e[1],n.customerID=e[2],n.customerIDOld=e[3],n.gender=e[4],n.dob=e[5],n.mobileNo=e[6],n.nationality=e[7],n.towncountry=e[8],n.expireDate=e[9],n.issueDate=e[10],n.address=e[11];let r=e[12].split(",");for(let i=0;i<r.length;i++){let t=new Cg;t.authType=r[i],t.authDesVN="",this.authenInfo.push(t)}this.customerInfo=n,this.next()})}}return t.\u0275fac=function(e){return new(e||t)(dr(cm),dr(Xm),dr("BASE_URL"),dr(yE))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const PS=["container"],RS=new Qn("LottieOptions");let DS=(()=>{class t{constructor(t,e){this.ngZone=t,this.options=e,this.player$=function(t){const e=t();return e instanceof Promise?O(e).pipe(A(t=>t.default||t),function(t,e,n,r){const i=new gv(1,void 0,void 0);return t=>Y(()=>i,void 0)(t)}(),q()):Lh(e)}(this.options.player).pipe(function(t,e=0){return function(n){return n.lift(new fv(t,e))}}(Wg))}loadAnimation(t){return this.player$.pipe(A(e=>this.createAnimationItem(e,t)))}resolveOptions(t,e){return Object.assign({container:e,renderer:"svg",loop:!0,autoplay:!0},t)}createAnimationItem(t,e){return this.ngZone.runOutsideAngular(()=>t.loadAnimation(e))}}return t.\u0275fac=function(e){return new(e||t)(dr(jc),dr(RS))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),FS=(()=>{class t{constructor(t,e,n){this.ngZone=t,this.platformId=e,this.animationLoader=n,this.options=null,this.containerClass=null,this.styles=null,this.animationCreated=this.getAnimationItem(),this.complete=this.awaitAnimationItemAndStartListening("complete"),this.loopComplete=this.awaitAnimationItemAndStartListening("loopComplete"),this.enterFrame=this.awaitAnimationItemAndStartListening("enterFrame"),this.segmentStart=this.awaitAnimationItemAndStartListening("segmentStart"),this.configReady=this.awaitAnimationItemAndStartListening("config_ready"),this.dataReady=this.awaitAnimationItemAndStartListening("data_ready"),this.domLoaded=this.awaitAnimationItemAndStartListening("DOMLoaded"),this.destroy=this.awaitAnimationItemAndStartListening("destroy"),this.error=this.awaitAnimationItemAndStartListening("error"),this.destroy$=new _,this.loadAnimation$=new _,this.animationItem$=new Vh(null),this.setupLoadAnimationListener()}ngOnDestroy(){this.destroy$.next(),this.destroyAnimation()}loadAnimation(t,e){this.loadAnimation$.next([t,e])}getAnimationItem(){return Qh(()=>this.animationItem$).pipe(up(t=>null!==t))}awaitAnimationItemAndStartListening(t){return this.getAnimationItem().pipe(Yh(e=>new y(n=>{e.addEventListener(t,t=>{this.ngZone.runOutsideAngular(()=>{n.next(t)})})})))}setupLoadAnimationListener(){this.loadAnimation$.pipe(up(([t])=>th(this.platformId)&&void 0!==t.options),Yh(([t,e])=>(this.destroyAnimation(),this.animationLoader.loadAnimation(this.animationLoader.resolveOptions(t.options.currentValue,e)))),ov(this.destroy$)).subscribe(t=>{this.animationItem$.next(t)})}destroyAnimation(){const t=this.animationItem$.getValue();null!==t&&(t.destroy(),this.animationItem$.next(null))}}return t.\u0275fac=function(e){return new(e||t)(Oo(jc),Oo(Cc),Oo(DS))},t.\u0275dir=Qt({type:t,selectors:[["","lottie",""]],inputs:{options:"options",containerClass:"containerClass",styles:"styles"},outputs:{animationCreated:"animationCreated",complete:"complete",loopComplete:"loopComplete",enterFrame:"enterFrame",segmentStart:"segmentStart",configReady:"configReady",dataReady:"dataReady",domLoaded:"domLoaded",destroy:"destroy",error:"error"}}),t})(),BS=(()=>{class t extends FS{constructor(t,e,n){super(t,e,n),this.width=null,this.height=null,this.container=null}ngOnChanges(t){super.loadAnimation(t,this.container.nativeElement)}}return t.\u0275fac=function(e){return new(e||t)(Oo(jc),Oo(Cc),Oo(DS))},t.\u0275cmp=Kt({type:t,selectors:[["ng-lottie"]],viewQuery:function(t,e){if(1&t&&pc(PS,7),2&t){let t;hc(t=dc())&&(e.container=t.first)}},inputs:{width:"width",height:"height"},features:[yo,le],decls:2,vars:6,consts:[[3,"ngStyle","ngClass"],["container",""]],template:function(t,e){1&t&&jo(0,"div",0,1),2&t&&(ca("width",e.width||"100%")("height",e.height||"100%"),No("ngStyle",e.styles)("ngClass",e.containerClass))},directives:[Yl,Ul],encapsulation:2,changeDetection:0}),t})(),OS=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[DS,{provide:RS,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Jl]]}),t})(),NS=(()=>{class t{constructor(){this.processing={path:"assets/all-in-one/shared/img/processing.json"}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Kt({type:t,selectors:[["app-processing"]],decls:10,vars:1,consts:[[1,"processing-panel"],[1,"processing-box"],[1,"processing-animate"],[3,"options"],[1,"text-center","processing-text"],[1,"small","font-weight-light"]],template:function(t,e){1&t&&(Lo(0,"section",0),Lo(1,"div",1),Lo(2,"div",2),jo(3,"ng-lottie",3),Vo(),Lo(4,"div",4),Lo(5,"b"),Ea(6,"H\u1ec7 th\u1ed1ng \u0111ang x\u1eed l\xfd"),Vo(),jo(7,"br"),Lo(8,"div",5),Ea(9," Qu\xfd kh\xe1ch vui l\xf2ng ch\u1edd trong gi\xe2y l\xe1t "),Vo(),Vo(),Vo(),Vo()),2&t&&(rs(3),No("options",e.processing))},directives:[BS],styles:[".processing-panel[_ngcontent-%COMP%]{position:absolute!important;width:100vw!important;height:100vh!important;top:0;background-color:#fff;display:table;z-index:9999!important}.processing-box[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.processing-animate[_ngcontent-%COMP%]{width:10%!important;margin-inline:auto}.processing-text[_ngcontent-%COMP%]{font-size:1.8rem;color:#0058a0!important;line-height:3rem}"]}),t})();function MS(t,e){1&t&&jo(0,"app-processing")}let LS=(()=>{class t{constructor(t){this.aioSvc=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-all-in-one"]],decls:3,vars:1,consts:[[1,"aio"],[4,"ngIf"]],template:function(t,e){1&t&&(Lo(0,"section",0),jo(1,"router-outlet"),Fo(2,MS,1,0,"app-processing",1),Vo()),2&t&&(rs(2),No("ngIf",e.aioSvc.isProcessing))},directives:[pm,ql,NS],styles:[".aio[_ngcontent-%COMP%]{background-color:#f1f2f7!important;min-height:100vh;position:relative;font-family:Manrope,sans-serif!important}"]}),t})(),VS=(()=>{class t{constructor(t){this.aioSvc=t}getSessionId(){let t=this.aioSvc.newRequest({serviceCode:Ig[this.aioSvc.currentSerice]});return console.log(t),this.aioSvc.postAsync("get-sessionId",t)}}return t.\u0275fac=function(e){return new(e||t)(dr(kS))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),jS=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Kt({type:t,selectors:[["app-aio-header"]],decls:8,vars:0,consts:[[1,"container-fluid","bg-white","header"],[1,"p-3"],[1,"w-50","d-inline-block"],["routerLink","/aio",1,"logo"],["src","assets/all-in-one/shared/img/logo.png","alt","",1,"img","img-fluid","w-25"],[1,"w-50","text-right","d-inline-block","contact-header"]],template:function(t,e){1&t&&(Lo(0,"section"),Lo(1,"div",0),Lo(2,"div",1),Lo(3,"div",2),Lo(4,"div",3),jo(5,"img",4),Vo(),Vo(),Lo(6,"div",5),Ea(7,"Li\xean h\u1ec7"),Vo(),Vo(),Vo(),Vo())},directives:[lm],styles:[".header[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:all .3s cubic-bezier(.25,.8,.25,1)}.contact-header[_ngcontent-%COMP%]{vertical-align:middle;color:#005aa3;font-weight:700}"]}),t})(),US=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Oo(Ja),Oo(Qa))},t.\u0275dir=Qt({type:t}),t})(),HS=(()=>{class t extends US{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=qn(t)))(n||t)}}(),t.\u0275dir=Qt({type:t,features:[yo]}),t})();const zS=new Qn("NgValueAccessor"),KS={provide:zS,useExisting:ot(()=>WS),multi:!0},qS=new Qn("CompositionEventMode");let WS=(()=>{class t extends US{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=yl()?yl().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Oo(Ja),Oo(Qa),Oo(qS,8))},t.\u0275dir=Qt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Wo("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[za([KS]),yo]}),t})();const GS=new Qn("NgValidators"),$S=new Qn("NgAsyncValidators");function XS(t){return null}function QS(t){return null!=t}function YS(t){const e=Ko(t)?O(t):t;return qo(e),e}function ZS(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function JS(t,e){return e.map(e=>e(t))}function tC(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function eC(t){return null!=t?function(t){if(!t)return null;const e=t.filter(QS);return 0==e.length?null:function(t){return ZS(JS(t,e))}}(tC(t)):null}function nC(t){return null!=t?function(t){if(!t)return null;const e=t.filter(QS);return 0==e.length?null:function(t){return xE(JS(t,e).map(YS)).pipe(A(ZS))}}(tC(t)):null}function rC(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function iC(t){return t._rawValidators}function sC(t){return t._rawAsyncValidators}let oC=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=eC(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=nC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t}),t})(),aC=(()=>{class t extends oC{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=qn(t)))(n||t)}}(),t.\u0275dir=Qt({type:t,features:[yo]}),t})();class uC extends oC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let cC=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Oo(uC,2))},t.\u0275dir=Qt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&la("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[yo]}),t})();function lC(t,e){fC(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&mC(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&mC(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function hC(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),dC(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function pC(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function fC(t,e){const n=iC(t);null!==e.validator?t.setValidators(rC(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=sC(t);null!==e.asyncValidator?t.setAsyncValidators(rC(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();pC(e._rawValidators,i),pC(e._rawAsyncValidators,i)}function dC(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=iC(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.validator);i.length!==r.length&&(n=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const r=sC(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.asyncValidator);i.length!==r.length&&(n=!0,t.setAsyncValidators(i))}}}const r=()=>{};return pC(e._rawValidators,r),pC(e._rawAsyncValidators,r),n}function mC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function gC(t,e){fC(t,e)}function vC(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function yC(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const bC="VALID",wC="INVALID",xC="PENDING",EC="DISABLED";function _C(t){return(IC(t)?t.validators:t)||null}function SC(t){return Array.isArray(t)?eC(t):t||null}function CC(t,e){return(IC(e)?e.asyncValidators:t)||null}function AC(t){return Array.isArray(t)?nC(t):t||null}function IC(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class TC{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=SC(this._rawValidators),this._composedAsyncValidatorFn=AC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===bC}get invalid(){return this.status===wC}get pending(){return this.status==xC}get disabled(){return this.status===EC}get enabled(){return this.status!==EC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=SC(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=AC(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=xC,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=EC,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=bC,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==bC&&this.status!==xC||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?EC:bC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=xC,this._hasOwnPendingAsyncValidator=!0;const e=YS(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof PC?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof RC&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Ju,this.statusChanges=new Ju}_calculateStatus(){return this._allControlsDisabled()?EC:this.errors?wC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xC)?xC:this._anyControlsHaveStatus(wC)?wC:bC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){IC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class kC extends TC{constructor(t=null,e,n){super(_C(e),CC(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){yC(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){yC(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class PC extends TC{constructor(t,e,n){super(_C(e),CC(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof kC?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class RC extends TC{constructor(t,e,n){super(_C(e),CC(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof kC?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const DC={provide:aC,useExisting:ot(()=>BC)},FC=(()=>Promise.resolve(null))();let BC=(()=>{class t extends aC{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Ju,this.form=new PC({},eC(t),nC(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){FC.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),lC(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){FC.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),yC(this._directives,t)})}addFormGroup(t){FC.then(()=>{const e=this._findContainer(t.path),n=new PC({});gC(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){FC.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){FC.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,vC(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Oo(GS,10),Oo($S,10))},t.\u0275dir=Qt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Wo("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[za([DC]),yo]}),t})();const OC={provide:uC,useExisting:ot(()=>MC)},NC=(()=>Promise.resolve(null))();let MC=(()=>{class t extends uC{constructor(t,e,n,r){super(),this.control=new kC,this._registered=!1,this.update=new Ju,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===WS?n=t:Object.getPrototypeOf(t.constructor)===HS?r=t:i=t}),i||r||n||null}(0,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){lC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){NC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;NC.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Oo(aC,9),Oo(GS,10),Oo($S,10),Oo(zS,10))},t.\u0275dir=Qt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[za([OC]),yo,le]}),t})(),LC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})();const VC=new Qn("NgModelWithFormControlWarning"),jC={provide:aC,useExisting:ot(()=>UC)};let UC=(()=>{class t extends aC{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ju,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return lC(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){hC(t.control||null,t,!1),yC(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,vC(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(hC(e||null,t),n instanceof kC&&(lC(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);gC(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return dC(t,e)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fC(this.form,this),this._oldForm&&dC(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(Oo(GS,10),Oo($S,10))},t.\u0275dir=Qt({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&Wo("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[za([jC]),yo,le]}),t})();const HC={provide:GS,useExisting:ot(()=>zC),multi:!0};let zC=(()=>{class t{constructor(){this._validator=XS}ngOnChanges(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null!=this.maxlength?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){var t;this._validator=(t="number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10),e=>{return null!=(n=e.value)&&"number"==typeof n.length&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null;var n})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Ro("maxlength",e.maxlength?e.maxlength:null)},inputs:{maxlength:"maxlength"},features:[za([HC]),le]}),t})(),KC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[LC]]}),t})(),qC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[KC]}),t})(),WC=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:VC,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[KC]}),t})();const GC=["*"];let $C=(()=>{class t{constructor(t,e,n){this.el=t,this.zone=e,this.platformId=n,this.afterChange=new Ju,this.beforeChange=new Ju,this.breakpoint=new Ju,this.destroy=new Ju,this.init=new Ju,this.currentIndex=0,this.slides=[],this.initialized=!1,this._removedSlides=[],this._addedSlides=[]}ngOnDestroy(){this.unslick()}ngAfterViewInit(){this.ngAfterViewChecked()}ngAfterViewChecked(){if("server"!==this.platformId&&(this._addedSlides.length>0||this._removedSlides.length>0)){const t=this.slides.length-this._removedSlides.length+this._addedSlides.length;this.initialized?0===t?this.unslick():(this._addedSlides.forEach(t=>{this.slides.push(t),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickAdd",t.el.nativeElement)})}),this._addedSlides=[],this._removedSlides.forEach(t=>{const e=this.slides.indexOf(t);this.slides=this.slides.filter(e=>e!==t),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickRemove",e)})}),this._removedSlides=[]):t>0&&this.initSlick()}}initSlick(){this.slides=this._addedSlides,this._addedSlides=[],this._removedSlides=[],this.zone.runOutsideAngular(()=>{this.$instance=jQuery(this.el.nativeElement),this.$instance.on("init",(t,e)=>{this.zone.run(()=>{this.init.emit({event:t,slick:e})})}),this.$instance.slick(this.config),this.zone.run(()=>{this.initialized=!0,this.currentIndex=this.config?.initialSlide||0}),this.$instance.on("afterChange",(t,e,n)=>{this.zone.run(()=>{this.afterChange.emit({event:t,slick:e,currentSlide:n,first:0===n,last:e.$slides.length===n+e.options.slidesToScroll}),this.currentIndex=n})}),this.$instance.on("beforeChange",(t,e,n,r)=>{this.zone.run(()=>{this.beforeChange.emit({event:t,slick:e,currentSlide:n,nextSlide:r}),this.currentIndex=r})}),this.$instance.on("breakpoint",(t,e,n)=>{this.zone.run(()=>{this.breakpoint.emit({event:t,slick:e,breakpoint:n})})}),this.$instance.on("destroy",(t,e)=>{this.zone.run(()=>{this.destroy.emit({event:t,slick:e}),this.initialized=!1})})})}addSlide(t){this._addedSlides.push(t)}removeSlide(t){this._removedSlides.push(t)}slickGoTo(t){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickGoTo",t)})}slickNext(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickNext")})}slickPrev(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPrev")})}slickPause(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPause")})}slickPlay(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPlay")})}unslick(){this.$instance&&(this.zone.runOutsideAngular(()=>{this.$instance.slick("unslick")}),this.$instance=void 0),this.initialized=!1}ngOnChanges(t){if(this.initialized){const e=t.config;if(e.previousValue!==e.currentValue&&void 0!==e.currentValue){const t=e.currentValue.refresh,n=Object.assign({},e.currentValue);delete n.refresh,this.zone.runOutsideAngular(()=>{this.$instance.slick("slickSetOption",n,t)})}}}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(jc),Oo(Cc))},t.\u0275cmp=Kt({type:t,selectors:[["ngx-slick-carousel"]],inputs:{config:"config"},outputs:{afterChange:"afterChange",beforeChange:"beforeChange",breakpoint:"breakpoint",destroy:"destroy",init:"init"},exportAs:["slick-carousel"],features:[za([{provide:zS,useExisting:ot(()=>t),multi:!0}]),le],ngContentSelectors:GC,decls:1,vars:0,template:function(t,e){1&t&&(Jo(),ta(0))},encapsulation:2}),t})(),XC=(()=>{class t{constructor(t,e,n){this.el=t,this.platformId=e,this.carousel=n}ngOnInit(){th(this.platformId)&&this.carousel.addSlide(this)}ngOnDestroy(){th(this.platformId)&&this.carousel.removeSlide(this)}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(Cc),Oo($C,1))},t.\u0275dir=Qt({type:t,selectors:[["","ngxSlickItem",""]]}),t})(),QC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Jl]]}),t})();function YC(t,e){if(1&t&&(Lo(0,"div",12),jo(1,"img",13),Vo()),2&t){const t=e.$implicit;rs(1),ea("src",t.img,si)}}let ZC=(()=>{class t{constructor(t,e,n){this.aioSvc=t,this.dbSvc=e,this.router=n,this.service=Ig,this.slides=[{img:"https://www.sacombank.com.vn/BannerHomeDK/283/Sacombank_ChienDich500kTheTD2022_PC.jpg"},{img:"https://www.sacombank.com.vn/BannerHomeDK/283/Sacombank_OnlyOne_1920.jpg"},{img:"https://www.sacombank.com.vn/BannerHomeDK/283/Sacombank_GiamHetCoSaleBatNgo_Web.jpg"},{img:"https://www.sacombank.com.vn/BannerHomeDK/283/Sacombank_NapasCombo_BannerWeb.png"}],this.slideConfig={slidesToShow:1,slidesToScroll:1,infinite:!0,autoplay:!0,autoplaySpeed:4e3,arrows:!1,fade:!0,cssEase:"ease-out"},t.currentStep=Tg.DashBoard}ngOnInit(){}startService(t){this.aioSvc.currentSerice=t,console.log("serviceCd",t),this.aioSvc.next()}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS),Oo(VS),Oo(cm))},t.\u0275cmp=Kt({type:t,selectors:[["app-dash-board"]],decls:34,vars:2,consts:[[1,"dash-board"],[1,"slick-wrapper"],[1,"carousel",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide",4,"ngFor","ngForOf"],[1,"container","position-relative"],[1,"row","bg-white","text-center","p-4","tab-bar"],[1,"col-3",3,"click"],[1,"material-icons","md-48"],[1,"col-3"],[1,"container","mt-5","footer"],["src","assets/all-in-one/dash-board/bo3-app.png","alt","",1,"img","img-fluid"],["ngxSlickItem","",1,"slide"],["alt","","width","100%",3,"src"]],template:function(t,e){1&t&&(Lo(0,"section",0),jo(1,"app-aio-header"),Lo(2,"div",1),Lo(3,"ngx-slick-carousel",2,3),Fo(5,YC,2,1,"div",4),Vo(),Vo(),Lo(6,"div",5),Lo(7,"div",6),Lo(8,"div",7),Wo("click",function(){return e.startService(e.service.OnBoarding)}),Lo(9,"div"),Lo(10,"span",8),Ea(11," person_add "),Vo(),Vo(),Lo(12,"div"),Ea(13,"\u0110\u0103ng k\xfd t\xe0i kho\u1ea3n"),Vo(),Vo(),Lo(14,"div",7),Wo("click",function(){return e.startService(e.service.UpdateCardId)}),Lo(15,"div"),Lo(16,"span",8),Ea(17," contact_mail "),Vo(),Vo(),Lo(18,"div"),Ea(19,"C\u1eadp nh\u1eadt CCCD"),Vo(),Vo(),Lo(20,"div",9),Lo(21,"div"),Lo(22,"span",8),Ea(23," category "),Vo(),Vo(),Lo(24,"div"),Ea(25,"S\u1ea3n ph\u1ea9m d\u1ecbch v\u1ee5"),Vo(),Vo(),Lo(26,"div",9),Lo(27,"div"),Lo(28,"span",8),Ea(29," sports_esports "),Vo(),Vo(),Lo(30,"div"),Ea(31,"Games l\u1ea5y qu\xe0"),Vo(),Vo(),Vo(),Vo(),Lo(32,"div",10),jo(33,"img",11),Vo(),Vo()),2&t&&(rs(3),No("config",e.slideConfig),rs(2),No("ngForOf",e.slides))},directives:[jS,$C,zl,XC],styles:[".header[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:all .3s cubic-bezier(.25,.8,.25,1)}.contact-header[_ngcontent-%COMP%]{vertical-align:middle;color:#005aa3;font-weight:700}.tab-bar[_ngcontent-%COMP%]{border-radius:100px;position:absolute;width:100%;top:-60px;color:#005aa3}.dash-board[_ngcontent-%COMP%]{min-height:100vh;position:relative}.footer[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translateX(-50%);bottom:0}.material-icons.md-18[_ngcontent-%COMP%]{font-size:18px}.material-icons.md-24[_ngcontent-%COMP%]{font-size:24px}.material-icons.md-36[_ngcontent-%COMP%]{font-size:36px}.material-icons.md-48[_ngcontent-%COMP%]{font-size:48px}.material-icons.md-dark[_ngcontent-%COMP%]{color:#0000008a}.material-icons.md-dark.md-inactive[_ngcontent-%COMP%]{color:#00000042}.material-icons.md-light[_ngcontent-%COMP%]{color:#fff}.material-icons.md-light.md-inactive[_ngcontent-%COMP%]{color:#ffffff4d}"]}),t})();const JC=function(t){return{active:t}};function tA(t,e){if(1&t&&(Uo(0),jo(1,"div",12),Ho()),2&t){const t=Yo().index,e=Yo(2);rs(1),No("ngClass",Xu(1,JC,t+1<2*e.currentStep))}}function eA(t,e){if(1&t&&(Lo(0,"div",10),Fo(1,tA,2,3,"ng-container",11),Vo()),2&t){const t=e.first,n=e.last;rs(1),No("ngIf",!t&&!n)}}function nA(t,e){if(1&t&&(Lo(0,"div",10),Lo(1,"div"),Lo(2,"div",13),Ea(3),Vo(),Vo(),Lo(4,"div",14),Ea(5),Vo(),Vo()),2&t){const t=e.$implicit,n=Yo(2);rs(2),No("ngClass",Xu(4,JC,n.currentStep>=t.stepNumber)),rs(1),Sa(" ",t.stepNumber," "),rs(1),No("ngClass",Xu(6,JC,n.currentStep>=t.stepNumber)),rs(1),Sa(" ",t.label," ")}}function rA(t,e){if(1&t&&(Lo(0,"div",6),Lo(1,"div",7),Fo(2,eA,2,1,"div",8),Vo(),Lo(3,"div",9),Fo(4,nA,6,8,"div",8),Vo(),Vo()),2&t){const t=Yo();rs(2),No("ngForOf",t.stepLines),rs(2),No("ngForOf",t.steps)}}let iA=(()=>{class t{constructor(t){this.aioSvc=t,this.currentStep=1,this.isShowStepper=!0,this.steps=[],this.masterStepper=[{service:Ig.OnBoarding,steps:[{stepNumber:1,label:"Ch\u1ee5p h\xecnh khu\xf4n m\u1eb7t"},{stepNumber:2,label:"X\xe1c th\u1ef1c CCCD & v\xe2n tay"},{stepNumber:3,label:"Thu th\u1eadp th\xf4ng tin"},{stepNumber:4,label:"T\u1ea1o t\xe0i kho\u1ea3n"}]},{service:Ig.UpdateCardId,steps:[{stepNumber:1,label:"X\xe1c minh nh\xe2n d\u1ea1ng"},{stepNumber:2,label:"X\xe1c th\u1ef1c th\xf4ng tin"},{stepNumber:3,label:"Nh\u1eadp m\xe3 OTP"}]}],this.length=0;let e=this.masterStepper.findIndex(t=>t.service==this.aioSvc.currentSerice);e>-1&&(this.stepLines=[...Array(2*this.masterStepper[e].steps.length).keys()],this.steps=this.masterStepper[e].steps)}ngOnInit(){}goHome(){this.aioSvc.release()}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-aio-back-and-stepper"]],inputs:{currentStep:"currentStep",isShowStepper:"isShowStepper"},decls:9,vars:1,consts:[[1,"container-fluid","p-5"],[1,"row"],[1,"col-2"],[1,"btn","btn-light","btn-back",3,"click"],[1,"fa-solid","fa-house"],["class","col-8 stepper-box",4,"ngIf"],[1,"col-8","stepper-box"],[1,"row","step-line"],["class","col",4,"ngFor","ngForOf"],[1,"stepper","row","text-center"],[1,"col"],[4,"ngIf"],[1,"line",3,"ngClass"],[1,"step-circle",3,"ngClass"],[1,"step-text",3,"ngClass"]],template:function(t,e){1&t&&(Lo(0,"section"),Lo(1,"div",0),Lo(2,"div",1),Lo(3,"div",2),Lo(4,"button",3),Wo("click",function(){return e.goHome()}),jo(5,"i",4),Ea(6," Trang ch\u1ee7 "),Vo(),Vo(),Fo(7,rA,5,2,"div",5),jo(8,"div",2),Vo(),Vo(),Vo()),2&t&&(rs(7),No("ngIf",e.isShowStepper))},directives:[ql,zl,Ul],styles:[".btn-back[_ngcontent-%COMP%], .step-circle[_ngcontent-%COMP%]{color:#0058a0}.step-circle[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;margin:0 auto;border-radius:2rem;background-color:#fff;line-height:2.5rem;font-size:1rem}.step-circle.active[_ngcontent-%COMP%]{background-color:#0058a0;color:#fff}.step-text[_ngcontent-%COMP%]{margin-top:1rem;color:#000}.step-text.active[_ngcontent-%COMP%]{color:#0058a0}.line[_ngcontent-%COMP%]{height:1px;background-color:#b9c0c6}.line.active[_ngcontent-%COMP%]{background-color:#0058a0}.col-2[_ngcontent-%COMP%]{padding:0!important}.step-line[_ngcontent-%COMP%]{position:absolute;top:20px;height:100%;width:100%;z-index:0}.stepper-box[_ngcontent-%COMP%]{position:relative}.step-line[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0!important}"]}),t})();const sA=["input"],oA=function(t){return{enterDuration:t}},aA=["*"],uA=new Qn("mat-checkbox-default-options",{providedIn:"root",factory:cA});function cA(){return{color:"accent",clickAction:"check-indeterminate"}}let lA=0;const hA=cA(),pA={provide:zS,useExisting:ot(()=>mA),multi:!0};class fA{}const dA=qx(zx(Kx(Hx(class{constructor(t){this._elementRef=t}}))));let mA=(()=>{class t extends dA{constructor(t,e,n,r,i,s,o){super(t),this._changeDetectorRef=e,this._focusMonitor=n,this._ngZone=r,this._animationMode=s,this._options=o,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++lA,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new Ju,this.indeterminateChange=new Ju,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||hA,this.color=this.defaultColor=this._options.color||hA.color,this.tabIndex=parseInt(i)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=Og(t)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(t){t!=this.checked&&(this._checked=t,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const e=Og(t);e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const e=t!=this._indeterminate;this._indeterminate=Og(t),e&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let e=this._currentCheckState,n=this._elementRef.nativeElement;if(e!==t&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(e,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);const t=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(t)},1e3)})}}_emitChangeEvent(){const t=new fA;t.source=this,t.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(t),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked}_onInputClick(t){var e;const n=null===(e=this._options)||void 0===e?void 0:e.clickAction;t.stopPropagation(),this.disabled||"noop"===n?this.disabled||"noop"!==n||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==n&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(t,e){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}_onInteractionEvent(t){t.stopPropagation()}_getAnimationClassForCheckStateTransition(t,e){if("NoopAnimations"===this._animationMode)return"";let n="";switch(t){case 0:if(1===e)n="unchecked-checked";else{if(3!=e)return"";n="unchecked-indeterminate"}break;case 2:n=1===e?"unchecked-checked":"unchecked-indeterminate";break;case 1:n=2===e?"checked-unchecked":"checked-indeterminate";break;case 3:n=1===e?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${n}`}_syncIndeterminate(t){const e=this._inputElement;e&&(e.nativeElement.indeterminate=t)}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(Eu),Oo(qy),Oo(jc),Gn("tabindex"),Oo(Fx,8),Oo(uA,8))},t.\u0275cmp=Kt({type:t,selectors:[["mat-checkbox"]],viewQuery:function(t,e){if(1&t&&(pc(sA,5),pc(eE,5)),2&t){let t;hc(t=dc())&&(e._inputElement=t.first),hc(t=dc())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(t,e){2&t&&(Aa("id",e.id),Ro("tabindex",null),la("mat-checkbox-indeterminate",e.indeterminate)("mat-checkbox-checked",e.checked)("mat-checkbox-disabled",e.disabled)("mat-checkbox-label-before","before"==e.labelPosition)("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[za([pA]),yo],ngContentSelectors:aA,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,e){if(1&t&&(Jo(),Lo(0,"label",0,1),Lo(2,"span",2),Lo(3,"input",3,4),Wo("change",function(t){return e._onInteractionEvent(t)})("click",function(t){return e._onInputClick(t)}),Vo(),Lo(5,"span",5),jo(6,"span",6),Vo(),jo(7,"span",7),Lo(8,"span",8),Re.lFrame.currentNamespace=me,Lo(9,"svg",9),jo(10,"path",10),Vo(),Re.lFrame.currentNamespace=null,jo(11,"span",11),Vo(),Vo(),Lo(12,"span",12,13),Wo("cdkObserveContent",function(){return e._onLabelTextChange()}),Lo(14,"span",14),Ea(15,"\xa0"),Vo(),ta(16),Vo(),Vo()),2&t){const t=Bo(1),n=Bo(13);Ro("for",e.inputId),rs(2),la("mat-checkbox-inner-container-no-side-margin",!n.textContent||!n.textContent.trim()),rs(1),No("id",e.inputId)("required",e.required)("checked",e.checked)("disabled",e.disabled)("tabIndex",e.tabIndex),Ro("value",e.value)("name",e.name)("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby)("aria-checked",e._getAriaChecked())("aria-describedby",e.ariaDescribedby),rs(2),No("matRippleTrigger",t)("matRippleDisabled",e._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",Xu(19,oA,"NoopAnimations"===e._animationMode?0:150))}},directives:[eE,Py],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),t})(),gA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})(),vA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[nE,Ux,Ry,gA],Ux,gA]}),t})(),yA=(()=>{class t{constructor(){this.inputNumberEvent=new Ju}ngOnInit(){}inputNumber(t){this.inputNumberEvent.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Kt({type:t,selectors:[["app-keyboard-number"]],outputs:{inputNumberEvent:"inputNumberEvent"},decls:42,vars:1,consts:[[1,"keyboard-panel","bg-white","mt-3"],[1,"btn-keyboard",3,"click"],[1,"btn-disabled",3,"disabled"]],template:function(t,e){1&t&&(Lo(0,"div",0),Lo(1,"table"),Lo(2,"tr"),Lo(3,"td"),Lo(4,"button",1),Wo("click",function(){return e.inputNumber("1")}),Ea(5,"1"),Vo(),Vo(),Lo(6,"td"),Lo(7,"button",1),Wo("click",function(){return e.inputNumber("2")}),Ea(8,"2"),Vo(),Vo(),Lo(9,"td"),Lo(10,"button",1),Wo("click",function(){return e.inputNumber("3")}),Ea(11,"3"),Vo(),Vo(),Vo(),Lo(12,"tr"),Lo(13,"td"),Lo(14,"button",1),Wo("click",function(){return e.inputNumber("4")}),Ea(15,"4"),Vo(),Vo(),Lo(16,"td"),Lo(17,"button",1),Wo("click",function(){return e.inputNumber("5")}),Ea(18,"5"),Vo(),Vo(),Lo(19,"td"),Lo(20,"button",1),Wo("click",function(){return e.inputNumber("6")}),Ea(21,"6"),Vo(),Vo(),Vo(),Lo(22,"tr"),Lo(23,"td"),Lo(24,"button",1),Wo("click",function(){return e.inputNumber("7")}),Ea(25,"7"),Vo(),Vo(),Lo(26,"td"),Lo(27,"button",1),Wo("click",function(){return e.inputNumber("8")}),Ea(28,"8"),Vo(),Vo(),Lo(29,"td"),Lo(30,"button",1),Wo("click",function(){return e.inputNumber("9")}),Ea(31,"9"),Vo(),Vo(),Vo(),Lo(32,"tr"),Lo(33,"td"),Lo(34,"button",1),Wo("click",function(){return e.inputNumber("c")}),Ea(35,"X\xf3a"),Vo(),Vo(),Lo(36,"td"),Lo(37,"button",1),Wo("click",function(){return e.inputNumber("0")}),Ea(38,"0"),Vo(),Vo(),Lo(39,"td"),Lo(40,"button",2),Ea(41,"+"),Vo(),Vo(),Vo(),Vo(),Vo()),2&t&&(rs(40),No("disabled",!0))},styles:["input[type=text][_ngcontent-%COMP%]{width:100%;height:55px;border-radius:6px;outline:none;border:1px solid #dcdcdc;font-size:2rem;text-align:center}.keyboard-item[_ngcontent-%COMP%]{border:1px solid #2a81d0;border-radius:4px;height:60px}.keyboard-panel[_ngcontent-%COMP%]{border:1px solid #dcdcdc;padding:5px;background-color:#f8f8f8}.keyboard-panel[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%;border-radius:6px}td[_ngcontent-%COMP%]{width:33.33%;height:70px;padding:5px;border:3px}.btn-disabled[_ngcontent-%COMP%], .btn-keyboard[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{width:100%;height:100%;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#2a81d0;background-color:#fff;font-size:1.2rem}.btn-keyboard[_ngcontent-%COMP%]:active, .btn-keyboard[_ngcontent-%COMP%]:visited{animation:changeColor .3s ease-in-out}.btn-disabled[_ngcontent-%COMP%]:disabled{opacity:.5}@keyframes changeColor{0%{background-color:#2a81d0;color:#fff}25%{background-color:#2a81d0;color:#fff}50%{background-color:#2a81d0;color:#fff}75%{background-color:#2a81d0;color:#fff}to{background-color:#fff}}.keyboard-box[_ngcontent-%COMP%]{max-width:450px!important;margin:0 auto!important}"]}),t})();function bA(t,e){1&t&&(Uo(0),Ea(1,"Nh\u1eadp s\u1ed1"),Ho())}function wA(t,e){if(1&t&&(Uo(0),Ea(1),Ho()),2&t){const t=Yo(2);rs(1),_a(t.customAccount)}}const xA=function(t){return{active:t}};function EA(t,e){if(1&t){const t=zo();Lo(0,"section"),Lo(1,"div",2),Lo(2,"div",3),Lo(3,"h3",4),Ea(4,"L\u1ef1a ch\u1ecdn t\xe0i kho\u1ea3n"),Vo(),Vo(),Lo(5,"div",5),jo(6,"div",6),Lo(7,"div",7),Lo(8,"div",8),Wo("click",function(){Oe(t);const e=Yo();return e.selectAccountType(e.accountType.Phone)}),Lo(9,"div",9),Lo(10,"span",10),Ea(11,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),Vo(),Vo(),Lo(12,"div",11),Ea(13),Vo(),Vo(),Lo(14,"div",8),Wo("click",function(){Oe(t);const e=Yo();return e.selectAccountType(e.accountType.CardId)}),Lo(15,"div",9),Lo(16,"span",10),Ea(17,"S\u1ed1 CCCD"),Vo(),Vo(),Lo(18,"div",11),Ea(19),Vo(),Vo(),Lo(20,"div",12),Wo("click",function(){Oe(t);const e=Yo();return e.selectAccountType(e.accountType.Random)}),Lo(21,"div",9),Lo(22,"span",10),Ea(23,"Ng\xe2n h\xe0ng t\u1ea1o t\u1ef1 \u0111\u1ed9ng"),Vo(),Vo(),Vo(),Vo(),Lo(24,"div",7),Lo(25,"div",8),Wo("click",function(){Oe(t);const e=Yo();return e.selectAccountType(e.accountType.DOB)}),Lo(26,"div",9),Lo(27,"span",10),Ea(28,"Ng\xe0y th\xe1ng n\u0103m sinh"),Vo(),Vo(),Lo(29,"div",11),Ea(30),Vo(),Vo(),Lo(31,"div",12),Wo("click",function(){Oe(t);const e=Yo();return e.selectAccountType(e.accountType.Custom)}),Lo(32,"div",9),Lo(33,"span",10),Ea(34,"S\u1ed1 t\xe0i kho\u1ea3n t\u1ef1 ch\u1ecdn"),Vo(),Vo(),Lo(35,"div",11),Fo(36,bA,2,0,"ng-container",1),Fo(37,wA,2,1,"ng-container",1),Vo(),Vo(),Vo(),jo(38,"div",6),Vo(),Lo(39,"div",13),Lo(40,"h3",14),Ea(41,"\u0110\u0103ng k\xed b\xe1o giao d\u1ecbch t\u1ef1 \u0111\u1ed9ng"),Vo(),Vo(),Lo(42,"div",5),jo(43,"div",6),Lo(44,"div",7),Lo(45,"div",8),Wo("click",function(){Oe(t);const e=Yo();return e.selectAlertType(e.alertType.OnlySPay)}),Lo(46,"div",9),Lo(47,"span",10),Ea(48,"\u1ee8ng d\u1ee5ng Sacombank Pay"),Vo(),Vo(),Lo(49,"div",11),Ea(50,"Mi\u1ec5n ph\xed"),Vo(),Vo(),Vo(),Lo(51,"div",7),Lo(52,"div",8),Wo("click",function(){Oe(t);const e=Yo();return e.selectAlertType(e.alertType.SmsAndSPay)}),Lo(53,"div",9),Lo(54,"span",10),Ea(55,"SMS v\xe0 Sacombank Pay"),Vo(),Vo(),Lo(56,"div",11),Ea(57,"C\xf3 ph\xed"),Vo(),Vo(),Vo(),jo(58,"div",6),Vo(),Lo(59,"div",5),jo(60,"div",6),Lo(61,"div",15),Lo(62,"mat-checkbox",16),Wo("ngModelChange",function(e){return Oe(t),Yo().tc=e}),Ea(63,"T\xf4i \u0111\xe3 \u0111\u1ecdc v\xe0 \u0111\u1ed3ng \xfd v\u1edbi \u0110i\u1ec1u kho\u1ea3n v\xe0 \u0110i\u1ec1u ki\u1ec7n m\u1edf v\xe0 s\u1eed d\u1ee5ng t\xe0i kho\u1ea3n c\u1ee7a Sacombank"),Vo(),Vo(),jo(64,"div",6),Vo(),Lo(65,"div",17),Lo(66,"button",18),Wo("click",function(){return Oe(t),Yo().confirm()}),Ea(67," Ti\u1ebfp t\u1ee5c "),Vo(),Vo(),Vo(),Vo()}if(2&t){const t=Yo();rs(8),No("ngClass",Xu(22,xA,t.currentAccountType==t.accountType.Phone)),rs(2),No("ngClass",Xu(24,xA,t.currentAccountType==t.accountType.Phone)),rs(3),Sa(" ",t.aioSvc.customerInfo.mobileNo.substr(-9)," "),rs(1),No("ngClass",Xu(26,xA,t.currentAccountType==t.accountType.CardId)),rs(2),No("ngClass",Xu(28,xA,t.currentAccountType==t.accountType.CardId)),rs(3),Sa(" ",t.aioSvc.customerInfo.customerID.substr(-10)," "),rs(1),No("ngClass",Xu(30,xA,t.currentAccountType==t.accountType.Random)),rs(2),No("ngClass",Xu(32,xA,t.currentAccountType==t.accountType.Random)),rs(3),No("ngClass",Xu(34,xA,t.currentAccountType==t.accountType.DOB)),rs(2),No("ngClass",Xu(36,xA,t.currentAccountType==t.accountType.DOB)),rs(3),Sa(" ",t.aioSvc.customerInfo.dob.replaceAll("/","")," "),rs(1),No("ngClass",Xu(38,xA,t.currentAccountType==t.accountType.Custom)),rs(2),No("ngClass",Xu(40,xA,t.currentAccountType==t.accountType.Custom)),rs(3),No("ngIf",!t.customAccount),rs(1),No("ngIf",t.customAccount),rs(8),No("ngClass",Xu(42,xA,t.currentAlertType==t.alertType.OnlySPay)),rs(2),No("ngClass",Xu(44,xA,t.currentAlertType==t.alertType.OnlySPay)),rs(5),No("ngClass",Xu(46,xA,t.currentAlertType==t.alertType.SmsAndSPay)),rs(2),No("ngClass",Xu(48,xA,t.currentAlertType==t.alertType.SmsAndSPay)),rs(8),No("color","primary")("ngModel",t.tc),rs(4),No("disabled",!t.currentAccountType||!t.currentAlertType||!t.tc||!t.currentAccountNumber&&t.currentAccountType!=t.accountType.Random)}}function _A(t,e){1&t&&jo(0,"i",34)}function SA(t,e){1&t&&jo(0,"i",35)}function CA(t,e){1&t&&jo(0,"i",36)}function AA(t,e){if(1&t&&(Lo(0,"tr"),Lo(1,"td"),Uo(2),Fo(3,_A,1,0,"i",31),Ho(),Uo(4),Fo(5,SA,1,0,"i",32),Ho(),Fo(6,CA,1,0,"i",33),Vo(),Lo(7,"td"),Ea(8),Vo(),Vo()),2&t){const t=e.$implicit,n=e.last;rs(3),No("ngIf",!n&&t.valid),rs(2),No("ngIf",!n&&!t.valid),rs(1),No("ngIf",n),rs(2),Sa(" ",t.text," ")}}function IA(t,e){if(1&t){const t=zo();Lo(0,"section"),Lo(1,"div",19),Lo(2,"div",5),Lo(3,"div",7),Lo(4,"div"),Lo(5,"h4"),Ea(6,"Quy \u0111\u1ecbnh nh\u1eadp s\u1ed1 TKTT t\u1ef1 ch\u1ecdn"),Vo(),Vo(),Lo(7,"div"),Lo(8,"table",20),Fo(9,AA,9,4,"tr",21),Vo(),Vo(),Vo(),Lo(10,"div",7),Lo(11,"div",22),Lo(12,"div",23),Lo(13,"h4"),Ea(14,"Nh\u1eadp s\u1ed1 t\xe0i kho\u1ea3n t\u1ef1 ch\u1ecdn"),Vo(),Vo(),Lo(15,"div"),Lo(16,"input",24),Wo("ngModelChange",function(e){return Oe(t),Yo().customAccountTemp=e}),Vo(),Vo(),Lo(17,"app-keyboard-number",25),Wo("inputNumberEvent",function(e){return Oe(t),Yo().handleInputNumber(e)}),Vo(),Lo(18,"div",26),Lo(19,"div",27),Lo(20,"button",28),Wo("click",function(){return Oe(t),Yo().back()}),Ea(21,"Quay l\u1ea1i"),Vo(),Vo(),Lo(22,"div",29),Lo(23,"button",30),Wo("click",function(){return Oe(t),Yo().verifyCustomAccount()}),Ea(24," X\xe1c nh\u1eadn "),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&t){const t=Yo();rs(9),No("ngForOf",t.rules),rs(7),No("ngModel",t.customAccountTemp),rs(7),No("disabled",!t.isValidCustomAccount)}}let TA=(()=>{class t{constructor(t,e,n){this.aioSvc=t,this.dialog=e,this.router=n,this.accountType=kg,this.alertType=Pg,this.currentAccountType=this.accountType.None,this.currentAlertType=this.alertType.None,this.isCustomAccount=!1,this.customAccountTemp="",this.customAccount="",this.isValidCustomAccount=!1,this.currentAccountNumber="",this.tc=!1,this.rules=[{text:"\u0110\u1ed9 d\xe0i t\u1ed1i thi\u1ec3u 6 ch\u1eef s\u1ed1 t\u1ed1i \u0111a 9 ch\u1eef s\u1ed1;",valid:!1},{text:"Kh\xf4ng b\u1eaft \u0111\u1ea7u b\u1eb1ng s\u1ed1 7;",valid:!1},{text:"D\xe3y s\u1ed1 mi\u1ec5n ph\xed kh\xf4ng c\xf3 t\u1ed1i thi\u1ec3u 1/2 d\xe3y s\u1ed1 li\xean t\u1ee5c c\xf3 ch\u1ee9a c\u1eb7p th\u1ea7n t\xe0i(39,79), ph\xe1t l\u1ed9c (68,86), s\u1ed1 th\u1ee9 t\u1ef1, s\u1ed1 ti\u1ebfn, s\u1ed1 tr\xf9ng, s\u1ed1 l\u1eb7p, s\u1ed1 g\xe1nh, s\u1ed1 soi g\u01b0\u01a1ng.",valid:!0}],t.currentStep=Tg.AccountAndAlert}ngOnInit(){}selectAccountType(t){this.currentAccountType=t,t==this.accountType.Phone&&(this.currentAccountNumber=this.aioSvc.customerInfo.mobileNo.substr(-9)),t==this.accountType.DOB&&(this.currentAccountNumber=this.aioSvc.customerInfo.dob.replace("/","")),t==this.accountType.CardId&&(this.currentAccountNumber=this.aioSvc.customerInfo.customerID.substr(-10)),t==this.accountType.Random&&(this.currentAccountNumber=""),t==this.accountType.Custom&&(this.isCustomAccount=t==this.accountType.Custom,this.customAccountTemp=this.customAccount),console.log(this.currentAccountType)}selectAlertType(t){this.currentAlertType=t,console.log(this.currentAlertType)}confirm(){this.currentAccountType!=this.accountType.Custom&&this.currentAccountType!=this.accountType.Random?this.checkAccount(this.currentAccountNumber):this.next()}back(){this.isCustomAccount=!1,this.customAccount||(this.currentAccountType=this.accountType.None)}handleInputNumber(t){if("c"==t)this.customAccountTemp=this.customAccountTemp.substring(0,this.customAccountTemp.length-1),this.validateCustomAccount();else{if(this.customAccountTemp.length>=12)return;this.customAccountTemp=this.customAccountTemp+t,this.validateCustomAccount()}}validateCustomAccount(){let t=this.customAccountTemp.substring(0,1),e=this.customAccountTemp.length;this.rules[0].valid=e>5&&e<10,this.rules[1].valid=e>0&&"7"!=t,this.isValidCustomAccount=!(!this.rules[0].valid||!this.rules[1].valid),console.log(this.isValidCustomAccount)}verifyCustomAccount(){this.checkAccount(this.customAccountTemp)}next(){this.aioSvc.registerAlert.methodAlert=this.currentAlertType,this.aioSvc.customerEnrollInfo.accountType=this.currentAccountType==kg.Random?"R":"O",this.aioSvc.customerEnrollInfo.accountCurrency="704",this.aioSvc.customerEnrollInfo.prefixNumberAccount=this.currentAccountNumber,this.aioSvc.customerEnrollInfo.branchCode="VN0010001",this.aioSvc.next()}checkAccount(t){this.aioSvc.checkAccount(t).subscribe(t=>{this.aioSvc.isProcessing=!1,"00"==t.respCode?(console.log(t.data),t.data.accountExist?this.alert():t.data.price>0?this.alert(t.data.price):this.currentAccountType==this.accountType.Custom?(this.customAccount=this.customAccountTemp,this.currentAccountNumber=this.customAccount,this.isCustomAccount=!1):this.next()):(this.aioSvc.updateLogStep("",t.respCode,t.respDescription,"checkAccount"),this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra checkAccount"))},t=>{this.aioSvc.isProcessing=!1,this.aioSvc.updateLogStep("","01","HttpError","checkAccount"),this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra checkAccount"),console.log(t)})}numberWithCommas(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}alert(t=0){let e=new Fg;e.template=Bg.Simple,e.title="Th\xf4ng b\xe1o",e.content=t>0?`T\xe0i kho\u1ea3n Qu\xfd kh\xe1ch ch\u1ecdn c\xf3 gi\xe1 <b>${this.numberWithCommas(t)}</b> <u>\u0111</u>.<br> Vui l\xf2ng li\xean h\u1ec7 qu\u1ea7y giao d\u1ecbch \u0111\u1ec3 thanh to\xe1n ph\xed <br>tr\u01b0\u1edbc khi m\u1edf T\xe0i kho\u1ea3n ho\u1eb7c l\u1ef1a ch\u1ecdn T\xe0i kho\u1ea3n kh\xe1c`:"T\xe0i kho\u1ea3n Qu\xfd kh\xe1ch ch\u1ecdn hi\u1ec7n \u0111\xe3 c\xf3 ng\u01b0\u1eddi s\u1eed d\u1ee5ng. <br />\n      Vui l\xf2ng ch\u1ecdn s\u1ed1 T\xe0i kho\u1ea3n kh\xe1c",this.dialog.open(b_,{data:e,autoFocus:!1}).afterClosed().subscribe(t=>{t&&"back"==t.action&&this.back(),console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS),Oo(yE),Oo(cm))},t.\u0275cmp=Kt({type:t,selectors:[["app-account-and-alert"]],decls:4,vars:3,consts:[[3,"currentStep"],[4,"ngIf"],[1,"container"],[1,"text-center"],[1,"font-weight-bold","mb-4"],[1,"row"],[1,"col-2"],[1,"col-4"],[1,"bg-white","p-3","account-type","mb-4",3,"ngClass","click"],[1,"d-inline-block"],[1,"account-type-label",3,"ngClass"],[1,"d-inline-block","float-right","text-secondary"],[1,"bg-white","p-3","account-type",3,"ngClass","click"],[1,"text-center","py-4"],[1,"font-weight-bold"],[1,"col-8"],[1,"example-margin",3,"color","ngModel","ngModelChange"],[1,"text-center","pt-5"],[1,"btn","btn-next","w-25",3,"disabled","click"],[1,"container-fluid","px-5"],[1,"table-rule"],[4,"ngFor","ngForOf"],[1,"text-center","keyboard-box"],[1,"mb-4"],["type","text","readonly","","maxlength","10",3,"ngModel","ngModelChange"],[3,"inputNumberEvent"],[1,"mt-4"],[1,"w-50","d-inline-block","pr-2"],[1,"btn-back",3,"click"],[1,"w-50","d-inline-block","pl-2"],[1,"btn-next",3,"disabled","click"],["class","fa fa-check-circle text-success","aria-hidden","true",4,"ngIf"],["class","fa fa-circle text-secondary","aria-hidden","true",4,"ngIf"],["class","fa fa-info-circle text-warning","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-check-circle","text-success"],["aria-hidden","true",1,"fa","fa-circle","text-secondary"],["aria-hidden","true",1,"fa","fa-info-circle","text-warning"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Fo(2,EA,68,50,"section",1),Fo(3,IA,25,3,"section",1)),2&t&&(rs(1),No("currentStep",4),rs(1),No("ngIf",!e.isCustomAccount),rs(1),No("ngIf",e.isCustomAccount))},directives:[jS,iA,ql,Ul,mA,cC,MC,zl,WS,zC,yA],styles:['.account-type-label[_ngcontent-%COMP%]:before{content:"";height:20px;width:20px;border-radius:30px;background-color:#f0f2f7;display:inline-block;margin-right:7px;vertical-align:sub}.active.account-type-label[_ngcontent-%COMP%]:before{background-color:#fff;border:5px solid #2a81d0;transition:.2s ease-out}.account-type[_ngcontent-%COMP%]{cursor:pointer;border:2px solid #fff;border-radius:6px}.active.account-type[_ngcontent-%COMP%]{border:2px solid #2a81d0;transition:.2s ease-in-out}.mat-checkbox-background[_ngcontent-%COMP%]{background-color:#000!important}.table-rule[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top;padding:1rem .5rem}.keyboard-box[_ngcontent-%COMP%]{max-width:450px;margin:0 auto}input[type=text][_ngcontent-%COMP%]{width:100%;height:55px;border-radius:6px;outline:none;border:1px solid #dcdcdc;font-size:2rem;text-align:center}.btn-back[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{width:100%;height:60px;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#fff;background-color:#2a81d0;font-size:1.2rem}.btn-next[_ngcontent-%COMP%]:hover{background-color:#1966af}.btn-next[_ngcontent-%COMP%]:disabled:hover{background-color:#2a81d0}.btn-next[_ngcontent-%COMP%]:disabled{opacity:.5}.btn-back[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #2a81d0;color:#2a81d0}mat-checkbox[_ngcontent-%COMP%]{font-family:Manrope,sans-serif!important}']}),t})(),kA=(()=>{class t{constructor(t){this.aioSvc=t,t.currentStep=Tg.End}ngOnInit(){}confirm(){this.aioSvc.release()}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-end"]],decls:35,vars:4,consts:[[3,"currentStep","isShowStepper"],[1,"container"],[1,"text-center"],[1,"font-weight-bold","mb-4"],[1,"row","bg-white","rounded","p-4"],[1,"col-4"],[1,"mb-3"],[1,"text-center","py-4"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Lo(2,"section"),Lo(3,"div",1),Lo(4,"div",2),Lo(5,"h3",3),Ea(6," Xin ch\xfac m\u1eebng, Qu\xfd kh\xe1ch \u0111\xe3 m\u1edf t\xe0i kho\u1ea3n th\xe0nh c\xf4ng "),Vo(),Vo(),Lo(7,"div",4),Lo(8,"div",5),Lo(9,"div",6),Ea(10,"H\u1ecd v\xe0 t\xean"),Vo(),Lo(11,"div"),Lo(12,"b"),Ea(13),Vo(),Vo(),Vo(),Lo(14,"div",5),Lo(15,"div",6),Ea(16,"S\u1ed1 t\xe0i kho\u1ea3n"),Vo(),Lo(17,"div",6),Lo(18,"b"),Ea(19),Vo(),Vo(),Lo(20,"div"),Ea(21,"Ng\xe0y hi\u1ec7u l\u1ef1c "),Lo(22,"b"),Ea(23,"(Unknow)"),Vo(),Vo(),Vo(),Lo(24,"div",5),Lo(25,"div",6),Ea(26,"Chi nh\xe1nh"),Vo(),Lo(27,"div",6),Lo(28,"b"),Ea(29," Sacombank H\u1ed9i S\u1edf"),Vo(),Vo(),Lo(30,"div"),Ea(31,"266-268 Nam K\u1ef3 Kh\u1edfi Ngh\u0129a, P. 8, Q.3, TP.HCM"),Vo(),Vo(),Vo(),Lo(32,"div",7),Lo(33,"h4"),Ea(34,"M\u1eddi Qu\xfd kh\xe1ch \u0111\xe1nh gi\xe1 tr\u1ea3i nghi\u1ec7m d\u1ecbch v\u1ee5"),Vo(),Vo(),Vo(),Vo()),2&t&&(rs(1),No("currentStep",3)("isShowStepper",!1),rs(12),Sa(" ",e.aioSvc.customerInfo.fullName,""),rs(6),Sa(" ",e.aioSvc.openAccountResponseData.accountNumber,""))},directives:[jS,iA],styles:[".stepper-box[_ngcontent-%COMP%]{opacity:0!important}"]}),t})(),PA=(()=>{class t{constructor(t){this.aioSvc=t,this.idEKYCPersonal="",this.cifNo="",this.aioSvc.currentStep=Tg.CustomerEnroll}ngOnInit(){this.customerEnroll()}customerEnroll(){this.aioSvc.customerEnrollInfo.customerInfo=this.aioSvc.customerInfo,this.aioSvc.customerEnrollInfo.registerAlert=this.aioSvc.registerAlert,this.formatCustomerInfoData(),console.log(this.aioSvc.customerEnrollInfo),this.aioSvc.customerEnroll().subscribe(t=>{console.log("customerEnroll",t),"00"==t.respCode?(this.idEKYCPersonal=t.data.idEKYCPersonal,this.cifNo=t.data.cifNo,this.openAccount()):(this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra customerEnroll"),this.aioSvc.isProcessing=!1)},t=>{console.log(t),this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra customerEnroll"),this.aioSvc.isProcessing=!1})}formatCustomerInfoData(){this.aioSvc.customerEnrollInfo.customerInfo.gender="nam"==this.aioSvc.customerEnrollInfo.customerInfo.gender.toLocaleLowerCase()?"M":"F",this.aioSvc.customerEnrollInfo.customerInfo.dob=TS.formatDate(this.aioSvc.customerEnrollInfo.customerInfo.dob),this.aioSvc.customerEnrollInfo.customerInfo.issueDate=TS.formatDate(this.aioSvc.customerEnrollInfo.customerInfo.issueDate),this.aioSvc.customerEnrollInfo.customerInfo.expireDate=TS.formatDate(this.aioSvc.customerEnrollInfo.customerInfo.expireDate),this.aioSvc.customerEnrollInfo.customerInfo.country="VN",this.aioSvc.customerEnrollInfo.customerInfo.customerType="1",this.aioSvc.customerEnrollInfo.customerInfo.categoryCustomer="N",this.aioSvc.customerEnrollInfo.customerInfo.issuePlace="CTCCSQLHCVTTXH",this.aioSvc.customerEnrollInfo.customerInfo.issueDate="20200101"}openAccount(){let t=new fg;t.registerAlert=this.aioSvc.customerEnrollInfo.registerAlert,t.fullName=this.aioSvc.customerEnrollInfo.customerInfo.fullName,t.mobileNo="84"+this.aioSvc.customerEnrollInfo.customerInfo.mobileNo.substr(-9),t.accountCurrency=this.aioSvc.customerEnrollInfo.accountCurrency,t.accountType=this.aioSvc.customerEnrollInfo.accountType,t.branchCode=this.aioSvc.customerEnrollInfo.branchCode,t.cifNo=this.cifNo,t.idEKYCPersonal=this.idEKYCPersonal,t.prefixNumberAccount=this.aioSvc.customerEnrollInfo.prefixNumberAccount,this.aioSvc.openAccount(t).subscribe(t=>{console.log(t),this.aioSvc.isProcessing=!1,"00"==t.respCode?(this.aioSvc.openAccountResponseData=t.data,this.aioSvc.next()):this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra openAccount")},t=>{console.log(t),this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra openAccount"),this.aioSvc.isProcessing=!1})}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-on-boarding"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})();function RA(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function DA(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(t){RA(s,r,i,o,a,"next",t)}function a(t){RA(s,r,i,o,a,"throw",t)}o(void 0)})}}var FA=function(t,e){return(FA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function BA(t,e){function n(){this.constructor=t}FA(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function OA(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,a)}u((r=r.apply(t,e||[])).next())})}function NA(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var MA=function(){function t(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(t,e){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=t,this.platform=e},t.prototype.registerFlag=function(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){var r=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+r+"."),this.set(t,r)}},t.prototype.get=function(t){return t in this.flags||(this.flags[t]=this.evaluateFlag(t)),this.flags[t]},t.prototype.getNumber=function(t){return this.get(t)},t.prototype.getBool=function(t){return this.get(t)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){if(null==this.flagRegistry[t])throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)},t.prototype.evaluateFlag=function(t){if(null==this.flagRegistry[t])throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},t.prototype.setFlags=function(t){this.flags=Object.assign({},t)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var t=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var e,n=(e={},this.global.location.search.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return LA(e,n[0],n[1]),n.join("=")}),e);"tfjsflags"in n&&n.tfjsflags.split(",").forEach(function(e){var n=e.split(":"),r=n[0];t.urlFlags[r]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error("Could not parse value flag value "+e+" for flag "+t+".")}(r,n[1])})}},t}();function LA(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function VA(){return jA}var jA=null,UA=new Map,HA=new Map;function zA(t,e){var n=GA(t,e);return UA.get(n)}function KA(t){for(var e=UA.entries(),n=[];;){var r=e.next(),i=r.value;if(r.done)break;var s=i[1];i[0].split("_")[0]===t&&n.push(s)}return n}function qA(t){var e=t.kernelName,n=t.backendName,r=GA(e,n);if(UA.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");UA.set(r,t)}function WA(t){var e=t.kernelName;HA.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),HA.set(e,t)}function GA(t,e){return e+"_"+t}function $A(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function XA(t,e,n){return Math.max(t,Math.min(e,n))}function QA(t){return t%2==0?t:t+1}function YA(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function ZA(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function JA(t,e,n){void 0===n&&(n=""),ZA(rI(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function tI(t){ZA(null!=t,function(){return"The input to the tensor constructor must be a non-null value."})}function eI(t,e,n){if(void 0===e&&(e=[]),void 0===n&&(n=!1),null==e&&(e=[]),Array.isArray(t)||vI(t)&&!n)for(var r=0;r<t.length;++r)eI(t[r],e,n);else e.push(t);return e}function nI(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function rI(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function iI(t){return t%1==0}function sI(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function oI(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function aI(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function uI(t,e,n){return void 0===e&&(e=function(t){return 0}),new Promise(function(r,i){var s=0,o=function(){if(t())r();else{s++;var a=e(s);null!=n&&s>=n?i():setTimeout(o,a)}};o()})}function cI(t,e){for(var n=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(-1===t[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(-1===r){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(0===n)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var s=t.slice();return s[r]=e/n,s}function lI(t,e){var n=e.length;return ZA((t=null==t?e.map(function(t,e){return e}):[].concat(t)).every(function(t){return t>=-n&&t<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),ZA(t.every(function(t){return iI(t)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(t){return t<0?n+t:t})}function hI(t,e){for(var n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,s=null==e||i?null:lI(e,t).sort(),o=0,a=0;a<t.length;++a){if(null!=s){if(s[o]===a&&1!==t[a])throw new Error("Can't squeeze axis "+a+" since its dim '"+t[a]+"' is not 1");(null==s[o]||s[o]>a)&&1===t[a]&&(n.push(t[a]),r.push(a)),s[o]<=a&&o++}1!==t[a]&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function pI(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function fI(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type "+t);n=new Array(e)}return n}function dI(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function mI(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function gI(t,e){return!("complex64"===e||"float32"===e&&"complex64"!==t||"int32"===e&&"float32"!==t&&"complex64"!==t||"bool"===e&&"bool"===t)}function vI(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function yI(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function bI(t){if(null==t)return 0;var e=0;return t.forEach(function(t){return e+=t.length}),e}function wI(t){return"string"==typeof t||t instanceof String}function xI(t){return"boolean"==typeof t}function EI(t){return"number"==typeof t}function _I(t){return Array.isArray(t)?_I(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":EI(t)?"float32":wI(t)?"string":xI(t)?"bool":"float32"}function SI(t){return!!(t&&t.constructor&&t.call&&t.apply)}function CI(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function AI(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function II(t,e,n){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=eI(t)),n&&dI(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)0!==Math.round(t[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function TI(t,e){if(0===t.length)return e[0];var n=t.reduce(function(t,e){return t*e});if(0===n)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function t(e,n,r){var i=new Array;if(1===n.length)for(var s=n[0],o=0;o<s;o++)i[o]=r[e+o];else{s=n[0];var a=n.slice(1),u=a.reduce(function(t,e){return t*e});for(o=0;o<s;o++)i[o]=t(e+o*u,a,r)}return i}(0,t,e)}function kI(t,e){for(var n=PI(t,e),r=0;r<n.length;r++)n[r]=1;return n}function PI(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function RI(){return VA().platform.now()}function DI(t){t.forEach(function(e){ZA(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function FI(t,e){return void 0===e&&(e="utf-8"),e=e||"utf-8",VA().platform.encode(t,e)}function BI(t,e){return void 0===e&&(e="utf-8"),e=e||"utf-8",VA().platform.decode(t,e)}function OI(t,e,n){if(0===e)return 0;if(1===e)return t[0];for(var r=t[t.length-1],i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function NI(t,e,n){if(0===e)return[];if(1===e)return[t];for(var r=new Array(e),i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}Object.freeze({shuffle:$A,clamp:XA,nearestLargerEven:QA,sum:YA,randUniform:function(t,e){var n=Math.random();return e*n+(1-n)*t},distSquared:function(t,e){for(var n=0,r=0;r<t.length;r++){var i=Number(t[r])-Number(e[r]);n+=i*i}return n},assert:ZA,assertShapesMatch:JA,assertNonNull:tI,flatten:eI,sizeFromShape:nI,isScalarShape:function(t){return 0===t.length},arraysEqual:rI,isInt:iI,tanh:sI,sizeToSquarishShape:oI,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return $A(e),e},rightPad:aI,repeatedTry:uI,inferFromImplicitShape:cI,parseAxisParam:lI,squeezeShape:hI,getTypedArrayFromDType:pI,getArrayFromDType:fI,checkConversionForErrors:dI,isValidDtype:mI,hasEncodingLoss:gI,isTypedArray:vI,bytesPerElement:yI,bytesFromStringArray:bI,isString:wI,isBoolean:xI,isNumber:EI,inferDtype:_I,isFunction:SI,nearestDivisor:CI,computeStrides:AI,toTypedArray:II,toNestedArray:TI,makeOnesTypedArray:kI,makeZerosTypedArray:PI,now:RI,assertNonNegativeIntegerDimensions:DI,fetch:function(t,e){return VA().platform.fetch(t,e)},encodeString:FI,decodeString:BI,locToIndex:OI,indexToLoc:NI});var MI=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new LI)}return t.prototype.profileKernel=function(t,e,n){var r,i=this,s=this.backendTimer.time(function(){r=n()});return r.forEach(function(n){n.data().then(function(r){!function(t,e,n){if("float32"!==e)return!1;for(var r=0;r<t.length;r++){var i=t[r];if(isNaN(i)||!isFinite(i))return console.warn("Found "+i+" in the result of '"+n+"'"),!0}}(r,n.dtype,t),s.then(function(s){var o="";null!=s.getExtraProfileInfo&&(o=s.getExtraProfileInfo()),i.logger.logKernelProfile(t,n,r,s.kernelMs,e,o)})})}),r},t}(),LI=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,r,i,s){var o="number"==typeof r?aI(r+"ms",9):r.error,a=aI(t,25),u=e.rank,c=e.size,l=aI(e.shape.toString(),14),h="";for(var p in i){var f=i[p].shape||e.shape,d=f.length;h+=p+": "+d+"D "+(d>0?f:"")+" "}console.log("%c"+a+"\t%c"+o+"\t%c"+u+"D "+l+"\t%c"+c+"\t%c"+h+"\t%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}();function VI(t,e,n){return aI(Array.isArray(t)?parseFloat(t[0].toFixed(7))+" + "+parseFloat(t[1].toFixed(7))+"j":wI(t)?"'"+t+"'":"bool"===n?jI(t):parseFloat(t.toFixed(7)).toString(),e)}function jI(t){return 0===t?"false":"true"}function UI(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var HI=function(){function t(t,e,n){var r=this;if(this.dtype=e,this.shape=t.slice(),this.size=nI(t),null!=n){var i=n.length;ZA(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."})}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||fI(e,this.size),this.strides=AI(t)}return t.prototype.set=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),ZA(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+e.rank+")"});var i=this.locToIndex(n);this.values[i]=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var n=0,r=0,i=t;r<i.length;r++){var s=i[r];if(s<0||s>=this.shape[n]){var o="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(o)}n++}for(var a=t[t.length-1],u=0;u<t.length-1;++u)a+=this.strides[u]*t[u];return this.values[a]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return zI().makeTensor(this.values,this.shape,this.dtype)},t}(),zI=null,KI=null,qI=null,WI=function(){function t(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=nI(t),this.strides=AI(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),ZA(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),this.reshape([t,e,n,r,i])},t.prototype.asType=function(t){return this.throwIfDisposed(),KI.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return OA(this,void 0,void 0,function(){var t;return NA(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,KI.buffer(this.shape,this.dtype,t)]}})})},t.prototype.bufferSync=function(){return KI.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return OA(this,void 0,void 0,function(){var t;return NA(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,TI(this.shape,t)]}})})},t.prototype.arraySync=function(){return TI(this.shape,this.dataSync())},t.prototype.data=function(){return OA(this,void 0,void 0,function(){var t,e;return NA(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),t=zI().read(this.dataId),"string"!==this.dtype?[3,2]:[4,t];case 1:e=n.sent();try{return[2,e.map(function(t){return BI(t)})]}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,t]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var t=zI().readSync(this.dataId);if("string"===this.dtype)try{return t.map(function(t){return BI(t)})}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},t.prototype.bytes=function(){return OA(this,void 0,void 0,function(){var t;return NA(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,zI().read(this.dataId)];case 1:return t=e.sent(),"string"===this.dtype?[2,t]:[2,new Uint8Array(t.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(zI().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(t){return void 0===t&&(t=!1),KI.print(this,t)},t.prototype.reshape=function(t){return this.throwIfDisposed(),KI.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.expandDims=function(t){return void 0===t&&(t=0),KI.expandDims(this,t)},t.prototype.cumsum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=!1),void 0===n&&(n=!1),KI.cumsum(this,t,e,n)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),KI.squeeze(this,t)},t.prototype.clone=function(){return this.throwIfDisposed(),KI.clone(this)},t.prototype.oneHot=function(t,e,n){return this.throwIfDisposed(),KI.oneHot(this,t,e,n)},t.prototype.toString=function(t){return void 0===t&&(t=!1),function(t,e,n,r){var i=AI(e),s=function(t,e,n,r){var i=nI(e),s=r[r.length-1],o=new Array(s).fill(0),a=e.length,u="complex64"===n?UI(t):t;if(a>1)for(var c=0;c<i/s;c++)for(var l=c*s,h=0;h<s;h++)o[h]=Math.max(o[h],VI(u[l+h],0,n).length);return o}(t,e,n,i),o=e.length,a=function t(e,n,r,i,s,o){void 0===o&&(o=!0);var a="complex64"===r?2:1,u=n[0],c=n.length;if(0===c)return"complex64"===r?[VI(UI(e)[0],0,r)]:"bool"===r?[jI(e[0])]:[e[0].toString()];if(1===c){if(u>20){var l=Array.from(e.slice(0,3*a)),h=Array.from(e.slice((u-3)*a,u*a));return"complex64"===r&&(l=UI(l),h=UI(h)),["["+l.map(function(t,e){return VI(t,s[e],r)}).join(", ")+", ..., "+h.map(function(t,e){return VI(t,s[u-3+e],r)}).join(", ")+"]"]}return["["+("complex64"===r?UI(e):Array.from(e)).map(function(t,e){return VI(t,s[e],r)}).join(", ")+"]"]}var p=n.slice(1),f=i.slice(1),d=i[0]*a,m=[];if(u>20){for(var g=0;g<3;g++){var v=(y=g*d)+d;m.push.apply(m,t(e.slice(y,v),p,r,f,s,!1))}for(m.push("..."),g=u-3;g<u;g++)v=(y=g*d)+d,m.push.apply(m,t(e.slice(y,v),p,r,f,s,g===u-1))}else for(g=0;g<u;g++){var y;v=(y=g*d)+d,m.push.apply(m,t(e.slice(y,v),p,r,f,s,g===u-1))}var b=2===c?",":"";for(m[0]="["+m[0]+b,g=1;g<m.length-1;g++)m[g]=" "+m[g]+b;var w=",\n";for(g=2;g<c;g++)w+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":w),m}(t,e,n,i,s),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+o),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(a.map(function(t){return"    "+t}).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,t)},t.prototype.tile=function(t){return this.throwIfDisposed(),KI.tile(this,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),KI.gather(this,t,e)},t.prototype.matMul=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.throwIfDisposed(),KI.matMul(this,t,e,n)},t.prototype.dot=function(t){return this.throwIfDisposed(),KI.dot(this,t)},t.prototype.norm=function(t,e,n){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===n&&(n=!1),this.throwIfDisposed(),KI.norm(this,t,e,n)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),KI.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),KI.reverse(this,t)},t.prototype.concat=function(e,n){return void 0===n&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),KI.concat([this].concat(e),n)},t.prototype.split=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),KI.split(this,t,e)},t.prototype.stack=function(t,e){return void 0===e&&(e=0),KI.stack([this,t],e)},t.prototype.unstack=function(t){return void 0===t&&(t=0),KI.unstack(this,t)},t.prototype.pad=function(t,e){return void 0===e&&(e=0),KI.pad(this,t,e)},t.prototype.batchNormalization=function(t,e,n,r,i){return void 0===n&&(n=.001),qI("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,e,i,r,n)},t.prototype.batchNorm=function(t,e,n,r,i){return void 0===i&&(i=.001),this.throwIfDisposed(),KI.batchNorm(this,t,e,n,r,i)},t.prototype.all=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),KI.all(this,t,e)},t.prototype.any=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),KI.any(this,t,e)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),KI.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),KI.sum(this,t,e)},t.prototype.prod=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),KI.prod(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),KI.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),KI.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),KI.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),KI.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),KI.argMax(this,t)},t.prototype.cast=function(t){return this.throwIfDisposed(),KI.cast(this,t)},t.prototype.add=function(t){return this.throwIfDisposed(),KI.add(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),KI.addStrict(this,t)},t.prototype.atan2=function(t){return this.throwIfDisposed(),KI.atan2(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),KI.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),KI.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),KI.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),KI.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),KI.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),KI.mulStrict(this,t)},t.prototype.div=function(t){return this.throwIfDisposed(),KI.div(this,t)},t.prototype.divNoNan=function(t){return this.throwIfDisposed(),KI.divNoNan(this,t)},t.prototype.floorDiv=function(t){return this.throwIfDisposed(),KI.floorDiv(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),KI.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),KI.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),KI.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),KI.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),KI.maximumStrict(this,t)},t.prototype.mod=function(t){return this.throwIfDisposed(),KI.mod(this,t)},t.prototype.modStrict=function(t){return this.throwIfDisposed(),KI.modStrict(this,t)},t.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),KI.squaredDifferenceStrict(this,t)},t.prototype.transpose=function(t){return this.throwIfDisposed(),KI.transpose(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),KI.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),KI.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),KI.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),KI.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),KI.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),KI.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),KI.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),KI.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),KI.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),KI.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),KI.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),KI.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),KI.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),KI.logicalOr(this,t)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),KI.logicalNot(this)},t.prototype.logicalXor=function(t){return this.throwIfDisposed(),KI.logicalXor(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),KI.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),KI.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),KI.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),KI.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),KI.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),KI.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),KI.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),KI.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),KI.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),KI.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),KI.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),KI.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),KI.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),KI.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),KI.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),KI.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),KI.abs(this)},t.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),KI.clipByValue(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),KI.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),KI.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),KI.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),KI.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),KI.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),KI.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),KI.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),KI.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),KI.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),KI.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),KI.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),KI.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),KI.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),KI.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),KI.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),KI.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),KI.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),KI.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),KI.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),KI.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),KI.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),KI.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),KI.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),KI.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),KI.round(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),KI.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),KI.softmax(this,t)},t.prototype.logSoftmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),KI.logSoftmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),KI.image.resizeBilinear(this,t,e)},t.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),KI.image.resizeNearestNeighbor(this,t,e)},t.prototype.conv1d=function(t,e,n,r,i,s){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),KI.conv1d(this,t,e,n,r,i,s)},t.prototype.conv2d=function(t,e,n,r,i,s){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),KI.conv2d(this,t,e,n,r,i,s)},t.prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),KI.conv2dTranspose(this,t,e,n,r,i)},t.prototype.depthwiseConv2D=function(t,e,n,r,i,s){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),KI.depthwiseConv2d(this,t,e,n,r,i,s)},t.prototype.separableConv2d=function(t,e,n,r,i,s){return void 0===i&&(i=[1,1]),void 0===s&&(s="NHWC"),this.throwIfDisposed(),KI.separableConv2d(this,t,e,n,r,i,s)},t.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),KI.avgPool(this,t,e,n,r)},t.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),KI.maxPool(this,t,e,n,r)},t.prototype.localResponseNormalization=function(t,e,n,r){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=.5),KI.localResponseNormalization(this,t,e,n,r)},t.prototype.pool=function(t,e,n,r,i){return this.throwIfDisposed(),KI.pool(this,t,e,n,r,i)},t.prototype.variable=function(t,e,n){return void 0===t&&(t=!0),this.throwIfDisposed(),zI().makeVariable(this,t,e,n)},t.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),KI.unsortedSegmentSum(this,t,e)},t.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),KI.batchToSpaceND(this,t,e)},t.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),KI.spaceToBatchND(this,t,e)},t.prototype.topk=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!0),this.throwIfDisposed(),KI.topk(this,t,e)},t.prototype.stridedSlice=function(t,e,n,r,i,s,o,a){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),this.throwIfDisposed(),KI.stridedSlice(this,t,e,n,r,i,s,o,a)},t.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),KI.depthToSpace(this,t,e)},t.prototype.fft=function(){return this.throwIfDisposed(),KI.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),KI.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),KI.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),KI.spectral.irfft(this)},t}();Object.defineProperty(WI,Symbol.hasInstance,{value:function(t){return!!t&&null!=t.dataId&&null!=t.shape&&null!=t.dtype}});var GI,$I,XI,QI,YI,ZI=function(t){function e(e,n,r,i){var s=t.call(this,e.shape,e.dtype,e.dataId,i)||this;return s.trainable=n,s.name=r,s}return BA(e,t),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!rI(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");zI().disposeTensor(this),this.dataId=t.dataId,zI().incRef(this,null)},e.prototype.dispose=function(){zI().disposeVariable(this),this.isDisposedInternal=!0},e}(WI);Object.defineProperty(ZI,Symbol.hasInstance,{value:function(t){return t instanceof WI&&null!=t.assign&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(GI||(GI={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}($I||($I={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(XI||(XI={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(QI||(QI={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(YI||(YI={}));var JI={float32:QI,int32:$I,bool:XI,complex64:YI};function tT(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error("Can not upcast "+t+" with "+e)}return JI[t][e]}function eT(t){return tT(t,"int32")}function nT(t,e){if(t.dtype===e.dtype)return[t,e];var n=tT(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function rT(t,e){ZA(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function iT(t){var e=[];return function t(e,n,r){if(null!=e)if(e instanceof WI)n.push(e);else if(i=e,Array.isArray(i)||"object"==typeof i){var i,s=e;for(var o in s){var a=s[o];r.has(a)||(r.add(a),t(a,n,r))}}}(t,e,new Set),e}Object.freeze({makeTypesMatch:nT,assertTypesMatch:rT,isTensorInList:function(t,e){return e.some(function(e){return e.id===t.id})},getTensorsInContainer:iT});var sT,oT=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},t}(),aT=function(){function t(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new oT}return t.prototype.ready=function(){return OA(this,void 0,void 0,function(){var t,e,n;return NA(this,function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})];if(null!=this.backendInstance)return[2];t=this.getSortedBackends(),e=0,r.label=1;case 1:return e<t.length?[4,this.initializeBackend(n=t[e]).success]:[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;if(this.initializeBackend(t).asyncInit)return null}return this.registry[t]},t.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},t.prototype.registerBackend=function(t,e,n){return void 0===n&&(n=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)},t.prototype.setBackend=function(t){return OA(this,void 0,void 0,function(){var e,n,r;return NA(this,function(i){switch(i.label){case 0:if(null==this.registryFactory[t])throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,null!=this.registry[t]?[3,4]:(this.backendInstance=null,e=this.initializeBackend(t),n=e.success,e.asyncInit?[4,n]:[3,2]);case 1:return r=i.sent(),[3,3];case 2:r=n,i.label=3;case 3:if(!r)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new MI(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var t=this;KA(this.backendName).forEach(function(e){null!=e.setupFunc&&e.setupFunc(t.backendInstance)})},t.prototype.disposeRegisteredKernels=function(t){var e=this;KA(t).forEach(function(n){null!=n.disposeFunc&&n.disposeFunc(e.registry[t])})},t.prototype.initializeBackend=function(t){var e=this,n=this.registryFactory[t];if(null==n)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,s=r.then(function(n){return!(i<e.pendingBackendInitId||(e.registry[t]=n,e.pendingBackendInit=null,0))}).catch(function(n){return!(i<e.pendingBackendInitId||(e.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(n.stack||n.message),1))});return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(e){return console.warn("Initialization of backend "+t+" failed"),console.warn(e.stack||e.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var t=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,n){return t.registryFactory[n].priority-t.registryFactory[e].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var n=t[e],r=this.initializeBackend(n),i=r.asyncInit;if(i||r.success)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(t,e){var n=this.state.tensorInfo.get(e),r=n.backend,i=this.readSync(e);r.disposeData(e),n.backend=t,t.move(e,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(t,e){var n,r=this,i=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return r.startScope(i)},function(){return r.endScope(n)},function(){return(n=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},t.prototype.scopedRun=function(t,e,n){t();try{var r=n();return e(),r}catch(t){throw e(),t}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(t){var e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype);return this.addTapeNode(this.state.activeScope.name,{x:t},[e],function(t){return{x:function(){return t.toFloat()}}},[]),e},t.prototype.runKernel=function(t,e,n,r,i){return this.runKernelFunc(null,e,null,t,n,r,i)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(t,e,n){var r=this.backend.numDataIds(),i=0;n.forEach(function(t){i+="complex64"===t.dtype?3:1});var s=r-e-i-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+t+"'")},t.prototype.runKernelFunc=function(t,e,n,r,i,s,o){var a,u=this;void 0===s&&(s=[]),void 0===o&&(o=[]);var c=[],l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var h,p=function(t){l&&(c=t.map(function(t){return u.keep(u.clone(t))}))},f=this.state.numBytes,d=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=zA(r,this.backendName);return h=null!=g?function(){var t=u.backend.numDataIds();m=g.kernelFunc({inputs:e,attrs:i,backend:u.backend});var n=Array.isArray(m)?m:[m];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n);var a=n.map(function(t){return u.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),c=a.filter(function(t,e){return o[e]});return p((s||[]).slice().concat(c)),a}:function(){var e=u.backend.numDataIds();m=u.tidy(function(){return t(u.backend,p)});var n=Array.isArray(m)?m:[m];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n),n},this.scopedRun(function(){return u.state.kernelDepth++},function(){return u.state.kernelDepth--},function(){a=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,e,function(){return h()}):h()}),l&&this.addTapeNode(r,e,a,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-d,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(t){return e[t].shape}),outputShapes:a.map(function(t){return t.shape})}),Array.isArray(m)?a:a[0]},t.prototype.makeTensor=function(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;var i=t;"string"===(n=n||"float32")&&wI(t[0])&&(i=t.map(function(t){return FI(t)}));var s=r.write(i,e,n),o=new WI(e,n,s,this.nextTensorId());if(this.incRef(o,r),"string"===n){var a=this.state.tensorInfo.get(s),u=bI(i);this.state.numBytes+=u-a.bytes,a.bytes=u}return o},t.prototype.makeTensorFromDataId=function(t,e,n,r){var i=new WI(e,n=n||"float32",t,this.nextTensorId());return this.incRef(i,r),i},t.prototype.makeVariable=function(t,e,n,r){void 0===e&&(e=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.asType(r));var i=new ZI(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},t.prototype.incRef=function(t,e){var n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(r=t.size*yI(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof ZI||this.track(t)},t.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[t])},t.prototype.disposeVariable=function(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},t.prototype.profile=function(t){return OA(this,void 0,void 0,function(){var e,n;return NA(this,function(r){return this.state.profiling=!0,e=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(t){return t.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},t.prototype.addTapeNode=function(t,e,n,r,i){var s=this,o={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:i},a=function(t){return HA.get(t)}(t);null!=a&&(r=a.gradFunc),null!=r&&(o.gradient=function(t){return t=t.map(function(t,e){if(null==t){var r=n[e],i=PI(r.size,r.dtype);return s.makeTensor(i,r.shape,r.dtype)}return t}),r(t.length>1?t:t[0],i)}),this.state.activeTape.push(o)},t.prototype.keep=function(t){return t.kept=!0,t},t.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(t){for(var e=this,n=iT(t),r=new Set(n.map(function(t){return t.id})),i=0;i<this.state.activeScope.track.length;i++){var s=this.state.activeScope.track[i];s.kept||r.has(s.id)||s.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(t){t.kept||t.scopeId!==o.id||e.track(t)})},t.prototype.gradients=function(t,e,n,r){var i=this;if(void 0===r&&(r=!1),ZA(e.length>0,function(){return"gradients() received an empty list of xs."}),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var s=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});ZA(s instanceof WI,function(){return"The result y returned by f() must be a tensor."});var o=function(t,e,n){for(var r={},i={},s=0;s<e.length;s++)r[e[s].id]=!0;for(s=0;s<t.length;s++){var o=(d=t[s]).inputs;for(var a in o){for(var u=o[a],c=!1,l=0;l<e.length;l++)if(r[u.id]){d.outputs.forEach(function(t){return r[t.id]=!0}),c=!0,i[d.id]=!0;break}if(c)break}}var h={};h[n.id]=!0;var p={};for(s=t.length-1;s>=0;s--)for(o=(d=t[s]).inputs,l=0;l<d.outputs.length;l++)if(h[d.outputs[l].id]){for(var a in o)h[o[a].id]=!0,p[d.id]=!0;break}var f=[];for(s=0;s<t.length;s++){var d;if(i[(d=t[s]).id]&&p[d.id]){var m={};for(var a in d.inputs){var g=d.inputs[a];r[g.id]&&(m[a]=g)}var v=Object.assign({},d);v.inputs=m,v.outputs=d.outputs,f.push(v)}}return f}(this.state.activeTape,e,s);if(!r&&0===o.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var t,r,a={};a[s.id]=null==n?(r=kI(nI(t=s.shape),"float32"),uT.makeTensor(r,t,"float32")):n,function(t,e,n){for(var r=function(r){var i=e[r],s=[];if(i.outputs.forEach(function(e){var n=t[e.id];s.push(null!=n?n:null)}),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.kernelName+".");var o=i.gradient(s),a=function(e){if(!(e in o))throw new Error("Cannot backprop through input "+e+". Available gradients found: "+Object.keys(o)+".");var r=n(function(){return o[e]()});if("float32"!==r.dtype)throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input "+e+" must have 'float32' dtype, but has '"+r.dtype+"'");var s=i.inputs[e];if(!rI(r.shape,s.shape))throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input '"+e+"' has shape '"+r.shape+"', which does not match the shape of the input '"+s.shape+"'");if(null==t[s.id])t[s.id]=r;else{var a=t[s.id];t[s.id]=a.add(r),a.dispose()}};for(var u in i.inputs)a(u)},i=e.length-1;i>=0;i--)r(i)}(a,o,function(t){return i.tidy(t)});var u=e.map(function(t){return a[t.id]});return 0===i.state.gradientDepth&&(i.state.activeTape.forEach(function(t){for(var e=0,n=t.saved;e<n.length;e++)n[e].dispose()}),i.state.activeTape=null),{value:s,grads:u}})},t.prototype.customGrad=function(t){var e=this;return ZA(SI(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];ZA(r.every(function(t){return t instanceof WI}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s={};return r.forEach(function(t,e){s[e]=t}),e.runKernelFunc(function(e,i){return ZA((n=t.apply(void 0,r.concat([i]))).value instanceof WI,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),ZA(SI(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},s,function(t,e){var i=n.gradFunc(t,e),s=Array.isArray(i)?i:[i];ZA(s.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),ZA(s.every(function(t){return t instanceof WI}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var o={};return s.forEach(function(t,e){o[e]=function(){return t}}),o})}},t.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},t.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},t.prototype.time=function(t){return OA(this,void 0,void 0,function(){var e,n;return NA(this,function(r){switch(r.label){case 0:return e=RI(),[4,this.backend.time(t)];case 1:return(n=r.sent()).wallMs=RI()-e,[2,n]}})})},t.prototype.track=function(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new oT,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),uT=function(){var t=function(){if(null==sT){var t=void 0;if("undefined"!=typeof window)t=window;else if("undefined"!=typeof global)t=global;else if("undefined"!=typeof process)t=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");t=self}sT=t}return sT}();if(null==t._tfengine){var e=new MA(t);t._tfengine=new aT(e)}return function(t){jA=t}(t._tfengine.ENV),zI=function(){return t._tfengine},t._tfengine}();function cT(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var lT=VA();lT.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),lT.registerFlag("IS_BROWSER",function(){return cT()}),lT.registerFlag("IS_NODE",function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}),lT.registerFlag("IS_CHROME",function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),lT.registerFlag("PROD",function(){return!1}),lT.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return lT.getBool("DEBUG")}),lT.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),lT.registerFlag("IS_TEST",function(){return!1});var hT,pT,fT,dT={},mT={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function gT(t,e){dT[t]=e}function vT(t){t in dT||(dT[t]=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=function(t){if("undefined"!=typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",function(e){e.preventDefault(),delete dT[t]},!1),1===t?e.getContext("webgl",mT)||e.getContext("experimental-webgl",mT):e.getContext("webgl2",mT)}(t));var e=dT[t];return e.isContextLost()?(delete dT[t],vT(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),dT[t])}function yT(t,e){return[e,t]}function bT(t){var e=nI(t);return oI(Math.ceil(e/4))}function wT(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function xT(t,e){var n,r,i,s,o,a,u,c,l,h=t;return 2===VA().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,i=h.RGBA16F,s=h.RGBA32F,o=h.RED,a=4,u=1,c=h.HALF_FLOAT,l=h.FLOAT):(n=t.RGBA,r=t.RGBA,i=t.RGBA,s=h.RGBA,o=t.RGBA,a=4,u=4,c=null!=e?e.HALF_FLOAT_OES:null,l=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}}function ET(t,e,n){var r=n();return e&&function(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+ST(t,e))}(t),r}function _T(t){return!!(VA().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||5.96e-8<Math.abs(t)&&Math.abs(t)<65504)}function ST(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function CT(t,e,n){return $T(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function AT(t,e,n){var r=$T(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(ET(t,e,function(){return t.shaderSource(r,n)}),ET(t,e,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function IT(t,e,n){var r=$T(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(ET(t,e,function(){return t.shaderSource(r,n)}),ET(t,e,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw function(t,e){var n=PT.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],i=t.split("\n"),s=i.length.toString().length+2,o=i.map(function(t,e){return aI((e+1).toString(),s)+t}),a=0,u=0;u<o.length;u++)a=Math.max(o[u].length,a);var c=o.slice(0,r-1),l=o.slice(r-1,r),h=o.slice(r);console.log(c.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+aI(l[0],a),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(hT||(hT={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(pT||(pT={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(fT||(fT={}));var TT,kT,PT=/ERROR: [0-9]+:([0-9]+):/g;function RT(t,e){return $T(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function DT(t,e,n){if(ET(t,e,function(){return t.linkProgram(n)}),!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function FT(t,e,n){if(ET(t,e,function(){return t.validateProgram(n)}),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function BT(t,e,n){var r=$T(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ET(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),ET(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function OT(t,e,n){var r=$T(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ET(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),ET(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function NT(t,e){return $T(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function MT(t,e){var n=VA().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function LT(t,e){return $T(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function VT(t,e,n,r,i,s,o,a){var u=t.getAttribLocation(n,r);return-1!==u&&(ET(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),ET(t,e,function(){return t.vertexAttribPointer(u,s,t.FLOAT,!1,o,a)}),ET(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function jT(t,e,n,r){XT(t,r),ET(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),ET(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function UT(t,e,n,r){return $T(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function HT(t,e,n){return t.getUniformLocation(e,n)}function zT(t,e,n,r,i,s){ET(t,e,function(){return jT(t,e,r,s)}),ET(t,e,function(){return t.uniform1i(i,s)})}function KT(t,e,n,r){ET(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),ET(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function qT(t,e,n){ET(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),ET(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function WT(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+GT(t,e))}function GT(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function $T(t,e,n,r){var i=ET(t,e,function(){return n()});if(null==i)throw new Error(r);return i}function XT(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function QT(t,e){return void 0===e&&(e=2),nI(t.slice(0,t.length-e))}function YT(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function ZT(t){var e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[QT(t)].concat(YT(t))),e}function JT(t,e){var n;void 0===e&&(e=!1);var r=VA().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,1===(t=t.map(function(e,n){return n>=t.length-2?QA(t[n]):t[n]})).length&&(t=[2,t[0]])),2!==t.length){var i=hI(t);t=i.newShape}var s=nI(t);if(t.length<=1&&s<=r)return[1,s];if(2===t.length&&t[0]<=r&&t[1]<=r)return t;if(3===t.length&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var o=QT(t),a=2,u=2;return t.length&&(a=(n=YT(t))[0],u=n[1]),oI(s=o*(a/2)*(u/2)).map(function(t){return 2*t})}return oI(s)}function tk(t){return t%2==0}function ek(t,e){if(rI(t=t.slice(-2),e=e.slice(-2)))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(tk(n)&&tk(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&tk(t[0])&&tk(e[0])}function nk(t){if(null==TT){var e=vT(t);TT=e.getParameter(e.MAX_TEXTURE_SIZE)}return TT}function rk(t){if(null==kT){var e=vT(t);kT=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,kT)}function ik(t){if(0===t)return 0;var e=vT(t);return sk(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:sk(e,"EXT_disjoint_timer_query")?1:0}function sk(t,e){return null!=t.getExtension(e)}function ok(t){try{if(null!=vT(t))return!0}catch(t){return!1}return!1}function ak(t){if(0===t)return!1;var e=vT(t);if(1===t){if(!sk(e,"OES_texture_float"))return!1}else if(!sk(e,"EXT_color_buffer_float"))return!1;return ck(e)}function uk(t){if(0===t)return!1;var e=vT(t);if(1!==t){if(sk(e,"EXT_color_buffer_float"))return ck(e);if(sk(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(t,e){var n=xT(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),s}(e,n)}return!1}return!!sk(e,"OES_texture_float")&&!!sk(e,"WEBGL_color_buffer_float")&&ck(e)}function ck(t){var e=xT(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function lk(t){return 2===t&&null!=vT(t).fenceSync}var hk=Object.freeze({callAndCheck:ET,canBeRepresented:_T,getWebGLErrorMessage:ST,getExtensionOrThrow:CT,createVertexShader:AT,createFragmentShader:IT,createProgram:RT,linkProgram:DT,validateProgram:FT,createStaticVertexBuffer:BT,createStaticIndexBuffer:OT,getNumChannels:function(){return 2===VA().getNumber("WEBGL_VERSION")?1:4},createTexture:NT,validateTextureSize:MT,createFramebuffer:LT,bindVertexBufferToProgramAttribute:VT,bindTextureUnit:jT,unbindTextureUnit:function(t,e,n){XT(t,n),ET(t,e,function(){return t.activeTexture(t.TEXTURE0+n)}),ET(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:UT,getProgramUniformLocation:HT,bindTextureToProgramUniformSampler:zT,bindCanvasToFramebuffer:function(t,e){ET(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),ET(t,e,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),ET(t,e,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:KT,unbindColorTextureFromFramebuffer:qT,validateFramebuffer:WT,getFramebufferErrorMessage:GT,getBatchDim:QT,getRowsCols:YT,getShapeAs3D:ZT,getTextureShapeFromLogicalShape:JT,isReshapeFree:ek,getWebGLMaxTextureSize:nk,resetMaxTextureSize:function(){TT=null},resetMaxTexturesInShader:function(){kT=null},getMaxTexturesInShader:rk,getWebGLDisjointQueryTimerVersion:ik,hasExtension:sk,isWebGLVersionEnabled:ok,isCapableOfRenderingToFloatTexture:ak,isDownloadFloatTextureEnabled:uk,isWebGLFenceEnabled:lk}),pk=VA();function fk(t){VA().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function dk(t,e){return uT.tidy(t,e)}function mk(t){iT(t).forEach(function(t){return t.dispose()})}function gk(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];VA().getBool("IS_TEST")||console.warn.apply(console,t)}function vk(t,e){var n=t;if(vI(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||vI(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&VA().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(e,n,r){if(r=r||[],Array.isArray(e)||vI(e)){ZA(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"}),ZA(e.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+e.length+" elements"});for(var i=n.slice(1),s=0;s<e.length;++s)t(e[s],i,r.concat(s))}else ZA(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}(t,r,[]),r}function yk(t,e,n,r){if(null!=t&&("numeric"!==t&&t!==e||"numeric"===t&&"string"===e))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function bk(t,e,n,r){if(void 0===r&&(r="numeric"),t instanceof WI)return yk(r,t.dtype,e,n),t;var i=_I(t);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),yk(r,i,e,n),null==t||!vI(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+(null==t?"null":t.constructor.name)+"'");var s=vk(t,i);vI(t)||Array.isArray(t)||(t=[t]);var o="string"!==i?II(t,i,VA().getBool("DEBUG")):eI(t,[],!0);return uT.makeTensor(o,s,i)}function wk(t,e,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(t,r){return bk(t,e+"["+r+"]",n)},r)}function xk(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Ek(t,e,n){for(var r=t.length+e.length,i=[],s=0,o=0,a=0;a<r;a++)-1===n.indexOf(a)?i.push(t[s++]):i.push(e[o++]);return i}function _k(t,e){for(var n=[],r=t.length,i=0;i<r;i++)-1===e.indexOf(i)&&n.push(t[i]);return[n,e.map(function(e){return t[e]})]}function Sk(t,e){return Ek(t,e.map(function(t){return 1}),e)}function Ck(t,e,n){ZA(xk(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function Ak(t,e){if(xk(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(function(t){return n.push(t)}),n}function Ik(t){return t.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}function Tk(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function kk(t,e){var n=t[0].length;t.forEach(function(t,e){ZA(t.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+e+"] must be the same as the rank of the rest ("+n+")"})}),ZA(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(t,i){for(var s=0;s<n;s++)ZA(s===e||t[s]===r[s],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+t+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Pk(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function Rk(t){var e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];uT.startScope(n);try{var i=r.apply(void 0,t);return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),uT.endScope(i),i}catch(t){throw uT.endScope(null),t}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}pk.registerFlag("HAS_WEBGL",function(){return pk.getNumber("WEBGL_VERSION")>0}),pk.registerFlag("WEBGL_VERSION",function(){return ok(2)?2:ok(1)?1:0}),pk.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===pk.get("WEBGL_VERSION")}),pk.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),pk.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),pk.registerFlag("WEBGL_PACK",function(){return pk.getBool("HAS_WEBGL")}),pk.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return pk.getBool("WEBGL_PACK")}),pk.registerFlag("WEBGL_PACK_CLIP",function(){return pk.getBool("WEBGL_PACK")}),pk.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),pk.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return pk.getBool("WEBGL_PACK")}),pk.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return pk.getBool("WEBGL_PACK")}),pk.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return pk.getBool("WEBGL_PACK")}),pk.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return pk.getBool("WEBGL_PACK")}),pk.registerFlag("WEBGL_PACK_REDUCE",function(){return pk.getBool("WEBGL_PACK")}),pk.registerFlag("WEBGL_LAZILY_UNPACK",function(){return pk.getBool("WEBGL_PACK")}),pk.registerFlag("WEBGL_CONV_IM2COL",function(){return pk.getBool("WEBGL_PACK")}),pk.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return nk(pk.getNumber("WEBGL_VERSION"))}),pk.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return rk(pk.getNumber("WEBGL_VERSION"))}),pk.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=pk.getNumber("WEBGL_VERSION");return 0===t?0:ik(t)}),pk.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return pk.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),pk.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return ak(pk.getNumber("WEBGL_VERSION"))}),pk.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!pk.getBool("WEBGL_FORCE_F16_TEXTURES")&&pk.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),pk.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return uk(pk.getNumber("WEBGL_VERSION"))}),pk.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return lk(pk.getNumber("WEBGL_VERSION"))}),pk.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return pk.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),qI=fk;var Dk=Rk({complex_:function(t,e){var n=bk(t,"real","complex"),r=bk(e,"imag","complex");return JA(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),uT.runKernelFunc(function(t){return t.complex(n,r)},{$real:n,$imag:r})}}),Fk=Rk({real_:function(t){var e=bk(t,"input","real");return uT.runKernelFunc(function(t){return t.real(e)},{$input:e})}}),Bk=Rk({imag_:function(t){var e=bk(t,"input","imag");return uT.runKernelFunc(function(t){return t.imag(e)},{$input:e})}});function Ok(t,e,n){return Nk(t,e,vk(t,n),n)}function Nk(t,e,n,r){if(null==r&&(r=_I(t)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!vI(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){DI(e);var i=nI(e),s=nI(n);ZA(i===s,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+s});for(var o=0;o<n.length;++o){var a=o!==n.length-1||n[o]!==nI(e.slice(o));ZA(n[o]===e[o]||!a,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return vI(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==r?II(t,r,VA().getBool("DEBUG")):eI(t,[],!0),uT.makeTensor(t,e,r)}function Mk(t,e){if((vI(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&vI(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Nk(t,[],[],e)}function Lk(t,e){tI(t);var n=vk(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Nk(t,null,n,e)}function Vk(t,e,n){if(tI(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");var r=vk(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Nk(t,e,r,n)}function jk(t,e,n){if(tI(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");var r=vk(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Nk(t,e,r,n)}function Uk(t,e,n){if(tI(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");var r=vk(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Nk(t,e,r,n)}function Hk(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=Hk(t,"float32"),r=zk(t,"float32");return Dk(n,r)}var i=kI(nI(t),e);return uT.makeTensor(i,t,e)}function zk(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=zk(t,"float32"),r=zk(t,"float32");return Dk(n,r)}var i=PI(nI(t),e);return uT.makeTensor(i,t,e)}function Kk(t,e,n){return uT.runKernelFunc(function(r){return r.fill(t,e,n)},{})}function qk(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return zk([0],r);var i=PI(Math.abs(Math.ceil((e-t)/n)),r);e<t&&1===n&&(n=-1),i[0]=t;for(var s=1;s<i.length;s++)i[s]=i[s-1]+n;return Lk(i,r)}var Wk=Rk({onesLike_:function(t){var e=bk(t,"x","onesLike");if("complex64"===e.dtype){var n=Wk(Fk(e)),r=Gk(Bk(e));return Dk(n,r)}return uT.runKernelFunc(function(t){return t.onesLike(e)},{$x:e},function(t,e){return{$x:function(){return Gk(t)}}})}}),Gk=Rk({zerosLike_:function(t){var e=bk(t,"x","zerosLike");return uT.runKernelFunc(function(t){return t.zerosLike(e)},{$x:e},function(t,e){return{$x:function(){return Gk(t)}}})}}),$k=Rk({concat_:function(t,e){void 0===e&&(e=0),ZA(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=wk(t,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(function(t){if("complex64"!==t.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+t.dtype+". ")}),e=lI(e,n[0].shape)[0];var r=Pk(n.map(function(t){return t.shape}),e);if(0===nI(r))return Ok([],r);if(1===(n=n.filter(function(t){return t.size>0})).length)return n[0];var i=n.map(function(t){return t.shape});return kk(i,e),uT.runKernelFunc(function(t){return t.concat(n,e)},n,function(t){var n=i.map(function(t){return t[e]});return Jk(t,n,e).map(function(t){return function(){return t}})},"Concat",{axis:e})}}),Xk=Rk({concat1d_:function(t){return $k(t,0)}}),Qk=Rk({concat2d_:function(t,e){return $k(t,e)}}),Yk=Rk({concat3d_:function(t,e){return $k(t,e)}}),Zk=Rk({concat4d_:function(t,e){return $k(t,e)}}),Jk=Rk({split_:function(t,e,n){void 0===n&&(n=0);var r,i=bk(t,"x","split");return n=lI(n,i.shape)[0],"number"==typeof e?(ZA(i.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(i.shape[n]/e)):(ZA(i.shape[n]===e.reduce(function(t,e){return t+e}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),uT.runKernelFunc(function(t){return t.split(i,r,n)},{$x:i},function(t){return{$x:function(){return $k(t,n)}}})}});function tP(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var eP=tP(function(t){!function(t,e,n){function r(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function s(t,e){var n=new r(t),s=e&&e.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=s:this.alea=s}(0,t)}),nP=tP(function(t){!function(t,e,n){function r(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function s(t,e){var n=new r(t),s=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=s:this.xor128=s}(0,t)}),rP=tP(function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function s(t,e){var n=new r(t),s=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=s:this.xorwow=s}(0,t)}),iP=tP(function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function s(t,e){null==t&&(t=+new Date);var n=new r(t),s=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,s&&(s.x&&i(s,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=s:this.xorshift7=s}(0,t)}),sP=tP(function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,s=e.i;return e.w=r=r+1640531527|0,n=i[s+34&127],t=i[s=s+1&127],n^=n<<13,t^=t<<17,n=i[s]=(n^=n>>>15)^(t^=t>>>12),e.i=s,n+(r^r>>>16)|0},function(t,e){var n,r,i,s,o,a=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,s=-32;s<u;++s)e&&(r^=e.charCodeAt((s+32)%e.length)),0===s&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(i=0==(n=a[127&s]^=r+(o=o+1640531527|0))?i+1:0);for(i>=128&&(a[127&(e&&e.length||0)]=-1),i=127,s=512;s>0;--s)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,a[i]=(r^=r>>>15)^(n^=n>>>12);t.w=o,t.X=a,t.i=i}(e,t)}function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function s(t,e){null==t&&(t=+new Date);var n=new r(t),s=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,s&&(s.X&&i(s,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=s:this.xor4096=s}(0,t)}),oP=tP(function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function s(t,e){var n=new r(t),s=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=s:this.tychei=s}(0,t)}),aP=tP(function(t){!function(e,r){var i,s=this,o=256,a="random",u=r.pow(o,6),c=r.pow(2,52),l=2*c,h=255;function p(t,n,h){var p=[],v=m(function t(e,n){var r,i=[],s=typeof e;if(n&&"object"==s)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==s?e:e+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(e)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(o):(t=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(t)),g(t)}catch(t){var n=s.navigator,r=n&&n.plugins;return[+new Date,s,r,s.screen,g(e)]}}():t,3),p),y=new f(p),b=function(){for(var t=y.g(6),e=u,n=0;t<c;)t=(t+n)*o,e*=o,n=y.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,m(g(y.S),e),(n.pass||h||function(t,e,n,i){return i&&(i.S&&d(i,y),t.state=function(){return d(y,{})}),n?(r[a]=t,e):t})(b,v,"global"in n?n.global:this==r,n.state)}function f(t){var e,n=t.length,r=this,i=0,s=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);i<o;)a[i]=i++;for(i=0;i<o;i++)a[i]=a[s=h&s+t[i%n]+(e=a[i])],a[s]=e;(r.g=function(t){for(var e,n=0,i=r.i,s=r.j,a=r.S;t--;)e=a[i=h&i+1],n=n*o+a[h&(a[i]=a[s=h&s+e])+(a[s]=e)];return r.i=i,r.j=s,n})(o)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,e){for(var n,r=t+"",i=0;i<r.length;)e[h&i]=h&(n^=19*e[h&i])+r.charCodeAt(i++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(r["seed"+a]=p,m(r.random(),e),t.exports){t.exports=p;try{i=n(8369)}catch(t){}}}([],Math)});aP.alea=eP,aP.xor128=nP,aP.xorwow=rP,aP.xorshift7=iP,aP.xor4096=sP,aP.tychei=oP;var uP=aP.alea,cP=function(){function t(t,e,n,r,i){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=i||Math.random();this.random=uP(s.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var i=void 0,s=void 0,o=void 0;do{o=(i=2*this.random()-1)*i+(s=2*this.random()-1)*s}while(o>=1||0===o);var a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*s*a,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}(),lP=function(){function t(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;var i=r||Math.random();this.randu=uP(i.toString()),this.randn=new cP(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var t,e,n,r,i,s;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-(s*=s*s)+Math.log(s)),(i=this.randu())<e||Math.log(i)<n)break}return s*=1/this.beta*this.d,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},t.prototype.convertValue=function(t){return"float32"===this.dtype?t:Math.round(t)},t}(),hP=function(){function t(t,e,n,r){var i=this;if(void 0===t&&(t=0),void 0===e&&(e=1),this.canReturnFloat=function(){return null==i.dtype||"float32"===i.dtype},this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+e+" <= 1 and dtype is not float");this.random=uP(r)}return t.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function pP(t,e,n){return void 0===e&&(e="float32"),e=e||"float32",DI(t),new HI(t,e,n)}var fP=Rk({batchToSpaceND_:function(t,e,n){var r=bk(t,"x","batchToSpaceND"),i=e.reduce(function(t,e){return t*e});return ZA(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),ZA(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),ZA(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i}),uT.runKernelFunc(function(t){return t.batchToSpaceND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.spaceToBatchND(e,n)}}})}}),dP=Rk({broadcastTo_:function(t,e){var n=bk(t,"broadcastTo","x"),r=n.shape;if(e.some(function(t){return!(t>0)||t%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var i=n.shape.slice();i.length<e.length;)i.unshift(1);n=n.reshape(i)}for(var s=Array.from(e),o=e.length-1;o>=0;o--)if(n.shape[o]===e[o])s[o]=1;else if(1!==n.shape[o])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var a=s.map(function(t,e){return t>1?e:-1}).filter(function(t){return t>=0});return 0===a.length?n.clone():uT.runKernelFunc(function(t){return t.tile(n,s)},{input:n},function(t){return{input:function(){return t.sum(a,!0)}}})}}),mP=Rk({cast_:function(t,e){var n=bk(t,"x","cast");if(!mI(e))throw new Error("Failed to cast to unknown dtype "+e);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return uT.runKernelFunc(function(t){return t.cast(n,e)},{x:n},function(t){return{x:function(){return t.clone()}}},"Cast",{dtype:e})}}),gP=Rk({clone_:function(t){var e=bk(t,"x","clone",null);return uT.runKernelFunc(function(){return uT.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),vP=Rk({cumsum_:function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var i=bk(t,"x","cumsum"),s=Ak([e|=0],i.rank),o=i;null!=s&&(o=i.transpose(s));var a=Tk(1,i.rank)[0],u=uT.runKernelFunc(function(t){return t.cumsum(o,a,n,r)},{permutedX:o},function(t){return{permutedX:function(){return t.cumsum(e,n,!r)}}});return null!=s&&(u=u.transpose(s)),u}}),yP=Rk({depthToSpace_:function(t,e,n){void 0===n&&(n="NHWC");var r=bk(t,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return ZA(i*e>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+e+"  for depthToSpace with input shape\n      "+r.shape}),ZA(s*e>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+s+" and "+e+" for depthToSpace with input shape\n          "+r.shape}),ZA(o%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+r.shape}),uT.runKernelFunc(function(t){return t.depthToSpace(r,e,n)},{$x:r})}}),bP=Rk({expandDims_:function(t,e){void 0===e&&(e=0);var n=bk(t,"x","expandDims",null);ZA(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(ZA(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),DP(n,r)}}),wP=Rk({eye_:function(t,e,n,r){void 0===r&&(r="float32"),null==e&&(e=t);for(var i=pP([t,e],r),s=t<=e?t:e,o=0;o<s;++o)i.set(1,o,o);var a=i.toTensor().as2D(t,e);if(null==n)return a;if(1===n.length)return NP(bP(a,0),[n[0],1,1]);if(2===n.length)return NP(bP(bP(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return NP(bP(bP(bP(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),xP=Rk({multinomial_:function(t,e,n,r){void 0===r&&(r=!1);var i=bk(t,"logits","multinomial"),s=i.size,o=i.rank;if(s<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+s+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var a=1===o?i.as2D(1,-1):i,u=uT.runKernelFunc(function(t){return t.multinomial(a,r,e,n)},{logits2D:a});return 1===o?u.as1D():u}}),EP=Rk({oneHot_:function(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=bk(t,"indices","oneHot","int32"),s=i.shape.concat([e]);return i=i.flatten(),uT.runKernelFunc(function(t){return t.oneHot(i,e,n,r)},{$indices:i},function(t){return{$indices:function(){return zk(i.shape,"float32")}}}).reshape(s)}}),_P=Rk({pad_:function(t,e,n){void 0===n&&(n=0);var r=bk(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return uT.runKernelFunc(function(t){return t.pad(r,e,n)},{x:r},function(t){var n=e.map(function(t){return t[0]});return{x:function(){return t.slice(n,r.shape)}}},"PadV2",{paddings:e,constantValue:n})}}),SP=Rk({pad1d_:function(t,e,n){return void 0===n&&(n=0),ZA(2===e.length,function(){return"Invalid number of paddings. Must be length of 2."}),_P(t,[e],n)}}),CP=Rk({pad2d_:function(t,e,n){return void 0===n&&(n=0),ZA(2===e.length&&2===e[0].length&&2===e[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),_P(t,e,n)}}),AP=Rk({pad3d_:function(t,e,n){return void 0===n&&(n=0),ZA(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),_P(t,e,n)}}),IP=Rk({pad4d_:function(t,e,n){return void 0===n&&(n=0),ZA(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),_P(t,e,n)}}),TP=Rk({rand_:function(t,e,n){var r=nI(t),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var s=0;s<r;s++)i[s]=e();return uT.makeTensor(i,t,n)}}),kP=Rk({randomNormal_:function(t,e,n,r,i){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var s=new cP(e,n,r,!1,i),o=pP(t,r),a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),PP=Rk({randomGamma_:function(t,e,n,r,i){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var s=new lP(e,n,r,i),o=pP(t,r),a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),RP=Rk({randomUniform_:function(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var s=pP(t,r),o=new hP(e,n,null,i),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),DP=Rk({reshape_:function(t,e){var n=bk(t,"x","reshape",null);return e=cI(e,n.size),ZA(n.size===nI(e),function(){return"new shape and old shape must have the same number of elements."}),uT.runKernelFunc(function(t){return t.reshape(n,e)},{x:n},function(t){return{x:function(){return t.reshape(n.shape)}}},"Reshape",{shape:e})}}),FP=Rk({spaceToBatchND_:function(t,e,n){var r=bk(t,"x","spaceToBatchND");return ZA(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),ZA(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),ZA(r.shape.reduce(function(t,r,i){return i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]==0:t},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),uT.runKernelFunc(function(t){return t.spaceToBatchND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.batchToSpaceND(e,n)}}})}}),BP=Rk({squeeze_:function(t,e){var n=bk(t,"x","squeeze");return DP(n,hI(n.shape,e).newShape)}}),OP=Rk({stack_:function(t,e){void 0===e&&(e=0);var n=wk(t,"tensors","stack");if(ZA(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===n.length)return n[0].expandDims(e);var r=n[0].shape,i=n[0].dtype;ZA(e<=n[0].rank,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(t){JA(r,t.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(t){ZA(i===t.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=n.map(function(t){return t.expandDims(e)});return $k(s,e)}}),NP=Rk({tile_:function(t,e){var n=bk(t,"x","tile",null);return ZA(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."}),uT.runKernelFunc(function(t,r){var i=t.tile(n,e);return r([n]),i},{x:n},function(t,n){var r=n[0];return{x:function(){var n=Gk(r);if(1===r.rank)for(var i=0;i<e[0];++i)n=n.add(t.slice([i*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(i=0;i<e[0];++i)for(var s=0;s<e[1];++s)n=n.add(t.slice([i*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(i=0;i<e[0];++i)for(s=0;s<e[1];++s)for(var o=0;o<e[2];++o)n=n.add(t.slice([i*r.shape[0],s*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(i=0;i<e[0];++i)for(s=0;s<e[1];++s)for(o=0;o<e[2];++o)for(var a=0;a<e[3];++a)n=n.add(t.slice([i*r.shape[0],s*r.shape[1],o*r.shape[2],a*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}},"Tile",{reps:e},[n])}}),MP=Rk({truncatedNormal_:function(t,e,n,r,i){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var s=new cP(e,n,r,!0,i),o=pP(t,r),a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),LP=Rk({unstack_:function(t,e){void 0===e&&(e=0),e=e||0;var n=bk(t,"x","unstack");return ZA(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length),uT.runKernelFunc(function(t){return t.unstack(n,e)},{x:n},function(t){return{x:function(){return OP(t,e)}}},"Unpack",{axis:e})}});function VP(t,e,n,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var s=e.length,o=0;o<s;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(s+1))}return i}function jP(t,e,n){void 0===n&&(n=!0);var r=[];if(n){r.push(e);for(var i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var s=[],o=[];for(i=1;i<t;++i)i>=2*e+1||i%2==1?o.push(i):s.push(i);r.push.apply(r,s),r.push(0),r.push.apply(r,o)}return r}function UP(t,e,n,r){void 0===r&&(r=!0);var i=[];i.push(r?t[0]/n:t[0]*n);for(var s=1;s<t.length;++s)i.push(s<=e.length?r?e[s-1]*t[s]:t[s]/e[s-1]:t[s]);return i}function HP(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function zP(t,e,n){for(var r=t.slice(0,1),i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}function KP(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==e.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(0===t.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],i=1,s=0;s<n.length-1;++s)i*=n[s];var o=t.shape,a=n.slice();a.pop();var u=1;for(s=r;s<t.rank;++s)u*=o[s],a.push(o[s]);var c=AI(t.shape).map(function(t){return t/u}).concat([1]).slice(0,r);return[a,i,u,c]}function qP(t){return t<=30?t:CI(t,Math.floor(Math.sqrt(t)))}function WP(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(s+" update.rank < "+i+". ");if(t.length<r+(n.rank-i))throw new Error(s+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(s+" update.rank != "+(i+t.length-r));for(var o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+").");for(o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(s+" updates.shape["+(o+i)+"] ("+n.shape[o+i]+") != shape["+(o+i)+"] ("+t[o+i]+")")}function GP(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}WP(n,e,t)}function $P(t,e,n){for(var r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length,o=1,a=i;a<s;++a)o*=n[a];var u=i<1?1:i;return{sliceRank:i,numUpdates:nI(e.shape)/u,sliceSize:o,strides:AI(n.slice(0,i)).concat([1]),outputSize:nI(n)}}function XP(t,e,n){ZA(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),ZA(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(r){ZA(e[r]+n[r]<=t.shape[r],function(){return"Error in slice"+t.rank+"D: begin["+r+"] + size["+r+"] ("+(e[r]+n[r])+") would overflow input.shape["+r+"] ("+t.shape[r]+")"})},i=0;i<t.rank;++i)r(i)}function QP(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function YP(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function ZP(t,e,n,r,i){var s=e[i];(t&1<<i||null==s)&&(s=(n[i]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var o=r[i];return s<0&&(s+=o),XA(0,s,o-1)}function JP(t,e,n,r,i){var s=e[i],o=n[i]||1;(t&1<<i||null==s)&&(s=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[i];return s<0&&(s+=a),o>0?XA(0,s,a):XA(-1,s,a-1)}function tR(t,e,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function eR(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function nR(t){return uT.customGrad(t)}Object.freeze({prepareAndValidate:KP}),Object.freeze({validateUpdateShape:WP,validateInput:GP,calculateShapes:$P}),Object.freeze({assertParamsValid:XP,maskToAxes:QP,computeOutShape:YP,startForAxis:ZP,stopForAxis:JP,isSliceContinous:tR,computeFlatOffset:eR});var rR=Rk({softmax_:function(t,e){void 0===e&&(e=-1);var n=bk(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return uT.runKernelFunc(function(t,r){var i=t.softmax(n,e);return r([i]),i},{logits:n},function(t,n){var r=n[0],i=t.mul(r);return{logits:function(){return i.sub(i.sum([e],!0).mul(r))}}},"Softmax",{dim:e},[],[!0])}}),iR=Rk({logSoftmax_:function(t,e){void 0===e&&(e=-1);var n=bk(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return nR(function(t,n){var r=t.max(e,!0),i=t.sub(r),s=i.toFloat().sub(i.exp().sum(e,!0).log());return n([s]),{value:s,gradFunc:function(t,n){var r=n[0].exp();return t.sub(t.sum(e,!0).mul(r))}}})(n)}}),sR=function(){function t(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},t.prototype.set=function(t,e){this.dataIdsCount++,this.data.set(t,e)},t.prototype.has=function(t){return this.data.has(t)},t.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),oR=function(){function t(){}return t.prototype.time=function(t){return aR("time")},t.prototype.read=function(t){return aR("read")},t.prototype.readSync=function(t){return aR("readSync")},t.prototype.numDataIds=function(){return aR("numDataIds")},t.prototype.disposeData=function(t){return aR("disposeData")},t.prototype.write=function(t,e,n){return aR("write")},t.prototype.move=function(t,e,n,r){return aR("move")},t.prototype.memory=function(){return aR("memory")},t.prototype.floatPrecision=function(){return aR("floatPrecision")},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.batchMatMul=function(t,e,n,r){return aR("batchMatMul")},t.prototype.fusedBatchMatMul=function(t){return aR("fusedBatchMatMul")},t.prototype.slice=function(t,e,n){return aR("slice")},t.prototype.stridedSlice=function(t,e,n,r){return aR("stridedSlice")},t.prototype.unstack=function(t,e){return aR("unstack")},t.prototype.reverse=function(t,e){return aR("reverse")},t.prototype.concat=function(t,e){return aR("concat")},t.prototype.neg=function(t){return aR("neg")},t.prototype.add=function(t,e){return aR("add")},t.prototype.addN=function(t){return aR("addN")},t.prototype.subtract=function(t,e){return aR("subtract")},t.prototype.multiply=function(t,e){return aR("multiply")},t.prototype.realDivide=function(t,e){return aR("realDivide")},t.prototype.floorDiv=function(t,e){return aR("floorDiv")},t.prototype.sum=function(t,e){return aR("sum")},t.prototype.prod=function(t,e){return aR("prod")},t.prototype.unsortedSegmentSum=function(t,e,n){return aR("unsortedSegmentSum")},t.prototype.argMin=function(t,e){return aR("argMin")},t.prototype.argMax=function(t,e){return aR("argMax")},t.prototype.equal=function(t,e){return aR("equal")},t.prototype.notEqual=function(t,e){return aR("notEqual")},t.prototype.less=function(t,e){return aR("less")},t.prototype.lessEqual=function(t,e){return aR("lessEqual")},t.prototype.greater=function(t,e){return aR("greater")},t.prototype.greaterEqual=function(t,e){return aR("greaterEqual")},t.prototype.logicalNot=function(t){return aR("logicalNot")},t.prototype.logicalAnd=function(t,e){return aR("logicalAnd")},t.prototype.logicalOr=function(t,e){return aR("logicalOr")},t.prototype.where=function(t){return aR("where")},t.prototype.select=function(t,e,n){return aR("select")},t.prototype.topk=function(t,e,n){return aR("topk")},t.prototype.min=function(t,e){return aR("min")},t.prototype.minimum=function(t,e){return aR("minimum")},t.prototype.mod=function(t,e){return aR("mod")},t.prototype.max=function(t,e){return aR("max")},t.prototype.maximum=function(t,e){return aR("maximum")},t.prototype.all=function(t,e){return aR("all")},t.prototype.any=function(t,e){return aR("any")},t.prototype.squaredDifference=function(t,e){return aR("squaredDifference")},t.prototype.ceil=function(t){return aR("ceil")},t.prototype.floor=function(t){return aR("floor")},t.prototype.round=function(t){return aR("round")},t.prototype.sign=function(t){return aR("sign")},t.prototype.isNaN=function(t){return aR("isNaN")},t.prototype.isInf=function(t){return aR("isInf")},t.prototype.isFinite=function(t){return aR("isFinite")},t.prototype.pow=function(t,e){return aR("pow")},t.prototype.exp=function(t){return aR("exp")},t.prototype.expm1=function(t){return aR("expm1")},t.prototype.softmax=function(t,e){return aR("softmax")},t.prototype.log=function(t){return aR("log")},t.prototype.log1p=function(t){return aR("log1p")},t.prototype.sqrt=function(t){return aR("sqrt")},t.prototype.rsqrt=function(t){return aR("rsqrt")},t.prototype.square=function(t){return aR("square")},t.prototype.reciprocal=function(t){return aR("reciprocal")},t.prototype.relu=function(t){return aR("relu")},t.prototype.relu6=function(t){return aR("relu6")},t.prototype.prelu=function(t,e){return aR("prelu")},t.prototype.elu=function(t){return aR("elu")},t.prototype.eluDer=function(t,e){return aR("eluDer")},t.prototype.selu=function(t){return aR("selu")},t.prototype.int=function(t){return aR("int")},t.prototype.clip=function(t,e,n){return aR("clip")},t.prototype.abs=function(t){return aR("abs")},t.prototype.complexAbs=function(t){return aR("complexAbs")},t.prototype.sigmoid=function(t){return aR("sigmoid")},t.prototype.softplus=function(t){return aR("softplus")},t.prototype.sin=function(t){return aR("sin")},t.prototype.cos=function(t){return aR("cos")},t.prototype.tan=function(t){return aR("tan")},t.prototype.asin=function(t){return aR("asin")},t.prototype.acos=function(t){return aR("acos")},t.prototype.atan=function(t){return aR("atan")},t.prototype.atan2=function(t,e){return aR("atan2")},t.prototype.sinh=function(t){return aR("sinh")},t.prototype.cosh=function(t){return aR("cosh")},t.prototype.tanh=function(t){return aR("tanh")},t.prototype.asinh=function(t){return aR("asinh")},t.prototype.acosh=function(t){return aR("acosh")},t.prototype.atanh=function(t){return aR("atanh")},t.prototype.erf=function(t){return aR("erf")},t.prototype.step=function(t,e){return aR("step")},t.prototype.fusedConv2d=function(t){return aR("fusedConv2d")},t.prototype.conv2d=function(t,e,n){return aR("conv2d")},t.prototype.conv2dDerInput=function(t,e,n){return aR("conv2dDerInput")},t.prototype.conv2dDerFilter=function(t,e,n){return aR("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(t){return aR("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(t,e,n){return aR("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(t,e,n){return aR("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){return aR("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(t,e,n){return aR("conv3d")},t.prototype.conv3dDerInput=function(t,e,n){return aR("conv3dDerInput")},t.prototype.conv3dDerFilter=function(t,e,n){return aR("conv3dDerFilter")},t.prototype.maxPool=function(t,e){return aR("maxPool")},t.prototype.maxPoolBackprop=function(t,e,n,r){return aR("maxPoolBackprop")},t.prototype.avgPool=function(t,e){return aR("avgPool")},t.prototype.avgPoolBackprop=function(t,e,n){return aR("avgPoolBackprop")},t.prototype.avgPool3d=function(t,e){return aR("avgPool3d")},t.prototype.avgPool3dBackprop=function(t,e,n){return aR("avgPool3dBackprop")},t.prototype.maxPool3d=function(t,e){return aR("maxPool3d")},t.prototype.maxPool3dBackprop=function(t,e,n,r){return aR("maxPool3dBackprop")},t.prototype.reshape=function(t,e){return aR("reshape")},t.prototype.cast=function(t,e){return aR("cast")},t.prototype.tile=function(t,e){return aR("tile")},t.prototype.pad=function(t,e,n){return aR("pad")},t.prototype.transpose=function(t,e){return aR("transpose")},t.prototype.gather=function(t,e,n){return aR("gather")},t.prototype.gatherND=function(t,e){return aR("gatherND")},t.prototype.scatterND=function(t,e,n){return aR("scatterND")},t.prototype.batchToSpaceND=function(t,e,n){return aR("batchToSpaceND")},t.prototype.spaceToBatchND=function(t,e,n){return aR("spaceToBatchND")},t.prototype.resizeBilinear=function(t,e,n,r){return aR("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(t,e,n){return aR("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(t,e,n,r){return aR("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){return aR("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(t,e,n,r,i,s){return aR("batchNormalization")},t.prototype.localResponseNormalization4D=function(t,e,n,r,i){return aR("localResponseNormalization4D")},t.prototype.LRNGrad=function(t,e,n,r,i,s,o){return aR("LRNGrad")},t.prototype.multinomial=function(t,e,n,r){return aR("multinomial")},t.prototype.oneHot=function(t,e,n,r){return aR("oneHot")},t.prototype.cumsum=function(t,e,n,r){return aR("cumsum")},t.prototype.nonMaxSuppression=function(t,e,n,r,i){return aR("nonMaxSuppression")},t.prototype.fft=function(t){return aR("fft")},t.prototype.ifft=function(t){return aR("ifft")},t.prototype.complex=function(t,e){return aR("complex")},t.prototype.real=function(t){return aR("real")},t.prototype.imag=function(t){return aR("imag")},t.prototype.cropAndResize=function(t,e,n,r,i,s){return aR("cropAndResize")},t.prototype.depthToSpace=function(t,e,n){return aR("depthToSpace")},t.prototype.split=function(t,e,n){return aR("split")},t.prototype.sparseToDense=function(t,e,n,r){return aR("sparseToDense")},t.prototype.diag=function(t){return aR("diag")},t.prototype.fill=function(t,e,n){return aR("fill")},t.prototype.onesLike=function(t){return aR("onesLike")},t.prototype.zerosLike=function(t){return aR("zerosLike")},t.prototype.linspace=function(t,e,n){return aR("linspace")},t.prototype.dispose=function(){return aR("dispose")},t}();function aR(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function uR(t,e){for(var n=t.length,r=[],i=0;i<n;i++){var s=n-1-i;(e[e.length-1-i]||1)>1&&1===(t[s]||1)&&r.unshift(s)}return r}function cR(t,e){for(var n=[],r=0;r<e.length;r++){var i=t[t.length-r-1],s=e.length-r-1;(null==i||1===i&&e[s]>1)&&n.unshift(s)}return n}function lR(t,e){for(var n=[],r=Math.max(t.length,e.length),i=0;i<r;i++){var s=t[t.length-i-1];null==s&&(s=1);var o=e[e.length-i-1];if(null==o&&(o=1),1===s)n.unshift(o);else if(1===o)n.unshift(s);else{if(s!==o)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(s)}}return n}function hR(t,e,n,r,i,s,o){void 0===o&&(o="channelsLast");var a,u=gR(e),c=u[0],l=u[1];if("channelsLast"===o)a=[c,l,t[3],t[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);a=[c,l,t[1],t[1]]}return fR(t,a,n,r,i,s,!1,o)}function pR(t,e,n,r,i,s,o){void 0===o&&(o="NDHWC");var a,u,c=vR(e),l=c[0],h=c[1],p=c[2];if("NDHWC"===o)u="channelsLast",a=[l,h,p,t[4],t[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);u="channelsFirst",a=[l,h,p,t[1],t[1]]}return dR(t,a,n,r,i,!1,u,s)}function fR(t,e,n,r,i,s,o,a){void 0===o&&(o=!1),void 0===a&&(a="channelsLast");var u=[-1,-1,-1,-1],c=u[0],l=u[1],h=u[2],p=u[3];if("channelsLast"===a)c=t[0],l=t[1],h=t[2],p=t[3];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);c=t[0],p=t[1],l=t[2],h=t[3]}var f,d=e[0],m=e[1],g=e[3],v=gR(n),y=v[0],b=v[1],w=gR(r),x=w[0],E=w[1],_=yR(d,x),S=yR(m,E),C=function(t,e,n,r,i,s,o,a){var u,c,l;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var h=function(t,e,n,r,i){null==r&&(r=mR(t,e,n));var s=t[1],o=bR((t[0]-e+2*r)/n+1,i);ZA(iI(o),function(){return"The output # of rows ("+o+") must be an integer. Change the stride and/or zero pad parameters"});var a=bR((s-e+2*r)/n+1,i);return ZA(iI(a),function(){return"The output # of columns ("+a+") must be an integer. Change the stride and/or zero pad parameters"}),[o,a]}([e,n],s,r,t,a);c=h[0],l=h[1]}else if("same"===t){c=Math.ceil(e/r),l=Math.ceil(n/i);var p=Math.max(0,(c-1)*r+s-e),f=Math.max(0,(l-1)*i+o-n),d=Math.floor(p/2),m=p-d,g=Math.floor(f/2);u={top:d,bottom:m,left:g,right:f-g,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),l=Math.ceil((n-o+1)/i)}return{padInfo:u,outHeight:c,outWidth:l}}(i,l,h,y,b,_,S,s),A=C.outHeight,I=C.outWidth,T=o?g*p:g;return"channelsFirst"===a?f=[c,T,A,I]:"channelsLast"===a&&(f=[c,A,I,T]),{batchSize:c,dataFormat:a,inHeight:l,inWidth:h,inChannels:p,outHeight:A,outWidth:I,outChannels:T,padInfo:C.padInfo,strideHeight:y,strideWidth:b,filterHeight:d,filterWidth:m,effectiveFilterHeight:_,effectiveFilterWidth:S,dilationHeight:x,dilationWidth:E,inShape:t,outShape:f,filterShape:e}}function dR(t,e,n,r,i,s,o,a){void 0===s&&(s=!1),void 0===o&&(o="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],l=u[1],h=u[2],p=u[3],f=u[4];if("channelsLast"===o)c=t[0],l=t[1],h=t[2],p=t[3],f=t[4];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);c=t[0],f=t[1],l=t[2],h=t[3],p=t[4]}var d,m=e[0],g=e[1],v=e[2],y=e[4],b=vR(n),w=b[0],x=b[1],E=b[2],_=vR(r),S=_[0],C=_[1],A=_[2],I=yR(m,S),T=yR(g,C),k=yR(v,A),P=function(t,e,n,r,i,s,o,a,u,c,l){var h,p,f,d;if("number"==typeof t){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};var m=function(t,e,n,r,i,s){null==i&&(i=mR(t,e,r));var o=t[1],a=t[2],u=bR((t[0]-e+2*i)/r+1,s);ZA(iI(u),function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"});var c=bR((o-e+2*i)/r+1,s);ZA(iI(c),function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"});var l=bR((a-e+2*i)/r+1,s);return ZA(iI(l),function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"}),[u,c,l,1]}([e,n,r,1],a,0,i,t,l);p=m[0],f=m[1],d=m[2]}else if("same"===t){var g=((p=Math.ceil(e/i))-1)*i+a-e,v=((f=Math.ceil(n/s))-1)*s+u-n,y=((d=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(g/2),w=g-b,x=Math.floor(v/2),E=v-x,_=Math.floor(y/2);h={top:x,bottom:E,left:_,right:y-_,front:b,back:w,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-a+1)/i),f=Math.ceil((n-u+1)/s),d=Math.ceil((r-c+1)/o)}return{padInfo:h,outDepth:p,outHeight:f,outWidth:d}}(i,l,h,p,w,x,E,I,T,k,a),R=P.outDepth,D=P.outHeight,F=P.outWidth,B=s?y*f:y;return"channelsFirst"===o?d=[c,B,R,D,F]:"channelsLast"===o&&(d=[c,R,D,F,B]),{batchSize:c,dataFormat:o,inDepth:l,inHeight:h,inWidth:p,inChannels:f,outDepth:R,outHeight:D,outWidth:F,outChannels:B,padInfo:P.padInfo,strideDepth:w,strideHeight:x,strideWidth:E,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:I,effectiveFilterHeight:T,effectiveFilterWidth:k,dilationDepth:S,dilationHeight:C,dilationWidth:A,inShape:t,outShape:d,filterShape:e}}function mR(t,e,n,r){void 0===r&&(r=1);var i=yR(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function gR(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function vR(t){return"number"==typeof t?[t,t,t]:t}function yR(t,e){return e<=1?t:t+(t-1)*(e-1)}function bR(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function wR(t){var e=gR(t);return 1===e[0]&&1===e[1]&&1===e[2]}function xR(t,e){return wR(t)||wR(e)}function ER(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function _R(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();var r=zk(t.shape),i=t.toFloat(),s=n.complex(i,r);return r.dispose(),i.dispose(),s}if(!gI(t.dtype,e))return uT.makeTensorFromDataId(t.dataId,t.shape,e);if("complex64"===t.dtype){var o=n.real(t);return s=o.cast(e),o.dispose(),s}if("int32"===e)return n.int(t);if("bool"===e){var a=Mk(0,t.dtype);return s=n.notEqual(t,a),a.dispose(),s}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function SR(t,e){return uT.makeTensorFromDataId(t.dataId,e,t.dtype)}function CR(t,e,n){var r=(e-t)/(n-1),i=PI(n,"float32");i[0]=t;for(var s=1;s<i.length;s++)i[s]=i[s-1]+r;return Lk(i,"float32")}function AR(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function IR(t,e){return{real:t[2*e],imag:t[2*e+1]}}function TR(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function kR(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function PR(t,e,n){var r=function(t,e,n){return function(t,e,n){for(var r=0,i=t.length,s=0,o=!1;r<i;){var a=n(e,t[s=r+(i-r>>>1)]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}(t,e,n||RR)}(t,e,n);t.splice(r<0?-(r+1):r,0,e)}function RR(t,e){return t>e?1:t<e?-1:0}function DR(t,e,n,r,i){return BR(t,e,n,r,i,0).selectedIndices}function FR(t,e,n,r,i,s){var o=BR(t,e,n,r,i,s,!0);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function BR(t,e,n,r,i,s,o,a){void 0===o&&(o=!1),void 0===a&&(a=!1);for(var u=Array.from(e).map(function(t,e){return{score:t,boxIndex:e,suppressBeginIndex:0}}).filter(function(t){return t.score>i}).sort(MR),c=s>0?-.5/s:0,l=[],h=[];l.length<n&&u.length>0;){var p=u.pop(),f=p.score,d=p.boxIndex,m=p.suppressBeginIndex;if(f<i)break;for(var g=!1,v=l.length-1;v>=m;--v){var y=OR(t,d,l[v]);if(y>=r){g=!0;break}if(p.score=p.score*NR(r,c,y),p.score<=i)break}p.suppressBeginIndex=l.length,g||(p.score===f?(l.push(d),h.push(p.score)):p.score>i&&PR(u,p,MR))}var b=l.length;return a&&(l.fill(0,b),h.fill(0,b)),{selectedIndices:Lk(l,"int32"),selectedScores:Lk(h,"float32"),numValidOutputs:Mk(b,"int32")}}function OR(t,e,n){var r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),l=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),f=(a-s)*(u-o),d=(h-c)*(p-l);if(f<=0||d<=0)return 0;var m=Math.max(s,c),g=Math.max(o,l),v=Math.min(a,h),y=Math.min(u,p),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(f+d-b)}function NR(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function MR(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function LR(t,e,n){var r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(function(e){i[n]=e;var s=t.slice(r,i);return r[n]+=e,s})}function VR(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var i=pP(n,t.dtype);for(r=0;r<i.values.length;++r){for(var s=i.indexToLoc(r),o=new Array(t.rank),a=0;a<o.length;a++)o[a]=s[a]%t.shape[a];var u=t.locToIndex(o);i.values[r]=t.values[u]}return i.toTensor()}function jR(t,e,n,r,i){for(var s=e[e.length-1],o=[t.length/s,s],a=o[0],u=o[1],c=pI(n,a*r),l=pI("int32",a*r),h=0;h<a;h++){for(var p=h*u,f=t.subarray(p,p+u),d=[],m=0;m<f.length;m++)d.push({value:f[m],index:m});d.sort(function(t,e){return e.value-t.value});var g=h*r,v=c.subarray(g,g+r),y=l.subarray(g,g+r);for(m=0;m<r;m++)v[m]=d[m].value,y[m]=d[m].index}var b=e.slice();return b[b.length-1]=r,[Ok(c,b,n),Ok(l,b,"int32")]}function UR(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var i=pP(t,"int32"),s=pP([n.length,t.length],"int32");for(r=0;r<n.length;r++){var o=i.indexToLoc(n[r]);s.values.set(o,r*t.length)}return s.toTensor()}Object.freeze({castTensor:_R,reshapeTensor:SR,linspaceImpl:CR,upcastType:tT,axesAreInnerMostDims:xk,combineLocations:Ek,computeOutAndReduceShapes:_k,expandShapeToKeepDim:Sk,assertAxesAreInnerMostDims:Ck,getAxesPermutation:Ak,getUndoAxesPermutation:Ik,getInnerMostAxes:Tk,getBroadcastDims:uR,getReductionAxes:cR,assertAndGetBroadcastShape:lR,assertParamsConsistent:kk,computeOutShape:Pk,computePool2DInfo:hR,computePool3DInfo:pR,computeConv2DInfo:fR,computeConv3DInfo:dR,computeDefaultPad:mR,tupleValuesAreOne:wR,eitherStridesOrDilationsAreOne:xR,convertConv2DDataFormat:ER,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:qP});var HR=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(t,e){return"T"+e});var n=[];this.variableNames.forEach(function(t){n.push("float v"+t+" = get"+t+"AtOutCoords();")});var r=this.variableNames.map(function(t){return"v"+t}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},zR=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(function(t,e){return"T"+e});var n=[];this.variableNames.forEach(function(t){n.push("vec4 v"+t+" = get"+t+"AtOutCoords();")});var r=this.variableNames.map(function(t){return"v"+t}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},KR=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,s=Math.ceil(t.inSize/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+(n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));")+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+("max"===e?">":"<")+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function qR(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(e){return t+"."+e})}function WR(t,e){return 1===e?[t]:qR(t,e)}function GR(){var t,e,n,r,i,s,o,a,u,c;return 2===VA().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:u,defineRound:c}}function $R(t,e,n){void 0===n&&(n="index");var r=AI(e);return r.map(function(e,i){return"int "+t[i]+" = "+n+" / "+e+"; "+(i===r.length-1?"int "+t[i+1]+" = "+n+" - "+t[i]+" * "+e:"index -= "+t[i]+" * "+e)+";"}).join("")}function XR(t){var e=AI(t).map(function(t){return t.toString()});return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+e[0]+" + coords.y * "+e[1]+" + coords.z;\n  }\n"}var QR="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function YR(t,e,n,r){var i=[];t.forEach(function(t){var e=nI(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?i.push("uniform float "+t.name+(e>1?"["+e+"]":"")+";"):(i.push("uniform sampler2D "+t.name+";"),i.push("uniform int offset"+t.name+";"))});var s,o,a=i.join("\n"),u=t.map(function(t){return function(t,e,n){void 0===n&&(n=!1);var r="";return r+=n?JR(t):ZR(t),t.shapeInfo.logicalShape.length<=e.logicalShape.length&&(r+=n?function(t,e){var n,r,i=t.name,s=i.charAt(0).toUpperCase()+i.slice(1),o="get"+s+"AtOutCoords",a=t.shapeInfo.logicalShape.length,u=e.logicalShape.length,c=uR(t.shapeInfo.logicalShape,e.logicalShape),l=oD(u),h=u-a,p=["x","y","z","w","u","v"];n=0===a?"":u<2&&c.length>=1?"coords = 0;":c.map(function(t){return"coords."+p[t+h]+" = 0;"}).join("\n"),r=u<2&&a>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords."+p[e+h]}).join(", ");var f="return outputValue;",d=1===nI(t.shapeInfo.logicalShape),m=1===nI(e.logicalShape);if(1!==a||d||m){if(d&&!m)f=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){var g=a-2,v=a-1;c.indexOf(g)>-1&&c.indexOf(v)>-1?f="return vec4(outputValue.x);":c.indexOf(g)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+o+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+s+"("+r+");\n      "+f+"\n    }\n  "}(t,e):function(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,o=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===o&&null==t.shapeInfo.flatOffset&&rI(t.shapeInfo.texShape,e.texShape))return"\n      float "+i+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var a=oD(o),u=uR(t.shapeInfo.logicalShape,e.logicalShape),c=o-s,l=["x","y","z","w","u","v"];return"\n    float "+i+"() {\n      "+a+" coords = getOutputCoords();\n      "+(0===s?"":o<2&&u.length>=1?"coords = 0;":u.map(function(t){return"coords."+l[t+c]+" = 0;"}).join("\n"))+"\n      return get"+r+"("+(o<2&&s>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords."+l[e+c]}).join(", "))+");\n    }\n  "}(t,e)),r}(t,e,r)}).join("\n"),c=e.texShape,l=GR(),h=function(t){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+t.texture2D+"(textureSampler, uv).r;\n    }\n  "}(l),p=function(t){return t.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+t.varyingFs+" vec2 resultUV;\n    "+t.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+t.defineSpecialNaN+"\n    "+t.defineSpecialInf+"\n    "+t.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+tD+"\n    "+eD+"\n    "+nD+"\n  "}(l);return e.isPacked?(s=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,e);case 2:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(rI(t,e))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(t[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=t,r=e,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=(s=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+s+");\n      int c = imod(index, "+s+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(t,e){for(var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),i=r*Math.ceil(t[t.length-2]/2),s=i,o="",a="b, r, c",u=2;u<t.length-1;u++)o="\n      int b"+u+" = index / "+(s*=t[t.length-u-1])+";\n      index -= b"+u+" * "+s+";\n    "+o,a="b"+u+", "+a;return"\n    ivec"+t.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+o+"\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+t.length+"("+a+");\n    }\n  "}(t,e)}var n,r,i,s,o}(e.logicalShape,c),o=function(t){return"\n    void setOutput(vec4 val) {\n      "+t.output+" = val;\n    }\n  "}(l)):(s=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return rI(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=e,r=$R(["r","c","d"],t),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(t,e){var n=$R(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);case 5:return function(t,e){var n=$R(["r","c","d","d2","d3"],t);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+e[0]+",\n                             "+e[1]+"));\n\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(t,e);case 6:return function(t,e){var n=$R(["r","c","d","d2","d3","d4"],t);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}var n,r}(e.logicalShape,c),o=function(t){return"\n    void setOutput(float val) {\n      "+t.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(l)),r&&(p+=rD),[p,h,o,a,s,u,n].join("\n")}function ZR(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"float "+n+"() {return "+e+";}";var r=t.shapeInfo.texShape;if(1===r[0]&&1===r[1])return"\n      float "+n+"() {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var i=t.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+i[0]+", "+i[1]+", "+iD(e)+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+sD(t)+"\n      }\n    ";var r=t.shapeInfo.texShape,i=r[0],s=r[1];if(1===s&&1===i)return"\n      float "+n+"(int index) {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var o=iD(e);return 1===s?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+o+") + 0.5) / "+i+".0);\n        return sampleTexture("+e+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+o+") + 0.5) / "+s+".0, 0.5);\n        return sampleTexture("+e+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+i+", "+s+", index + "+o+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape;if(null!=i&&rI(e,i))return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+i[1]+".0, "+i[0]+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ";var s=hI(e),o=s.newShape,a=s.keptDims;if(o.length<e.length)return"\n      "+ZR(aD(t,o))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+uD(["row","col"],a)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+e[1]+", 1)));\n        "+sD(t)+"\n      }\n    ";var u=i[0],c=i[1],l=iD(n);return 1===c?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+l+"), vec3("+e[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+u+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===u?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+l+"), vec3("+e[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+c+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+e[1]+" + col + "+l+";\n    vec2 uv = uvFromFlat("+u+", "+c+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[1]*e[2],s=e[2],o=hI(e),a=o.newShape,u=o.keptDims;if(a.length<e.length)return"\n        "+ZR(aD(t,a))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+uD(["row","col","depth"],u)+");\n        }\n      ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+i+", "+s+", 1)));\n        "+sD(t)+"\n      }\n    ";var c=t.shapeInfo.texShape,l=c[0],h=c[1],p=t.shapeInfo.flatOffset;return h===i&&null==p?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+s+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+l+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":h===s&&null==p?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+e[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+l+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+i+" + col * "+s+" + depth + "+iD(n)+";\n        vec2 uv = uvFromFlat("+l+", "+h+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(t);case 4:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[3],s=e[2]*i,o=e[1]*s,a=hI(e),u=a.newShape,c=a.keptDims;if(u.length<e.length)return"\n      "+ZR(aD(t,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+uD(["row","col","depth","depth2"],c)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+o+", "+s+", "+i+", 1)));\n        "+sD(t)+"\n      }\n    ";var l=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],f=h[1];return f===o&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+s+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===i&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+e[1]*e[2]+", "+e[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+o+" + col * "+s+" +\n          depth * "+i+" + depth2;\n      vec2 uv = uvFromFlat("+p+", "+f+", index + "+iD(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);case 5:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,o=e[2]*s,a=e[1]*o,u=hI(e),c=u.newShape,l=u.keptDims;if(c.length<e.length)return"\n      "+ZR(aD(t,c))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+uD(["row","col","depth","depth2","depth3"],l)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+a+", "+o+", "+s+", "+i+")) +\n          depth3;\n        "+sD(t)+"\n      }\n    ";var h=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],d=p[1];return d===a&&null==h?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+o+", "+s+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":d===i&&null==h?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+e[1]*e[2]*e[3]+",\n               "+e[2]*e[3]+", "+e[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+a+" + col * "+o+" + depth * "+s+" +\n          depth2 * "+i+" + depth3 + "+iD(n)+";\n      vec2 uv = uvFromFlat("+f+", "+d+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);case 6:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=hI(e),s=i.newShape,o=i.keptDims;if(s.length<e.length)return"\n      "+ZR(aD(t,s))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+uD(["row","col","depth","depth2","depth3","depth4"],o)+");\n      }\n    ";var a=e[5],u=e[4]*a,c=e[3]*u,l=e[2]*c,h=e[1]*l;if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+h+", "+l+", "+c+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+a+", 1)));\n        "+sD(t)+"\n      }\n    ";var p=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],m=f[1];return m===h&&null==p?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+l+", "+c+", "+u+", "+a+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===a&&null==p?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+e[1]*e[2]*e[3]*e[4]+",\n               "+e[2]*e[3]*e[4]+",\n               "+e[3]*e[4]+",\n               "+e[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+h+" + col * "+l+" + depth * "+c+" +\n          depth2 * "+u+" + depth3 * "+a+" + depth4 + "+iD(n)+";\n      vec2 uv = uvFromFlat("+d+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function JR(t){var e;switch(t.shapeInfo.logicalShape.length){case 0:return"\n    vec4 get"+(e=t.name).charAt(0).toUpperCase()+e.slice(1)+"() {\n      return "+GR().texture2D+"("+e+", halfCR);\n    }\n  ";case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],s=GR();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+i[0]+", "+i[1]+", index);\n      return "+s.texture2D+"("+e+", uv);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=i[0],o=i[1],a=GR();if(null!=i&&rI(e,i))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+o+".0, "+s+".0);\n\n        return "+a.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(e[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+a.texture2D+"("+n+", uv);\n    }\n  "}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===e[0])return"\n        "+JR(aD(t,e.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+uD(["b","row","col"],[1,2])+");\n        }\n      ";var o=s[0],a=s[1],u=Math.ceil(e[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+o+", "+a+", "+u*Math.ceil(e[1]/2)+", "+u+", b, row, col);\n      return "+GR().texture2D+"("+n+", uv);\n    }\n  "}(t);default:return function(t){for(var e=t.shapeInfo.logicalShape,n=e.length,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],a=o[0],u=o[1],c=Math.ceil(e[n-1]/2),l=c*Math.ceil(e[n-2]/2),h="int b, int row, int col",p="b * "+l+" + (row / 2) * "+c+" + (col / 2)",f=2;f<n-1;f++)h="int b"+f+", "+h,p="b"+f+" * "+(l*=e[n-f-1])+" + "+p;return"\n    vec4 "+i+"("+h+") {\n      int index = "+p+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+a+");\n      return "+GR().texture2D+"("+r+", uv);\n    }\n  "}(t)}}var tD="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",eD="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",nD="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",rD="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function iD(t){return"offset"+t}function sD(t){var e=t.name,n=nI(t.shapeInfo.logicalShape);return n<2?"return "+e+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+e+"[i];\n      }\n    }\n  "}function oD(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function aD(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function uD(t,e){return e.map(function(e){return t[e]}).join(", ")}var cD=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ZA(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var i=Math.ceil(t[t.length-1]/e);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var s,o,a=this.outputShape,u=a.length,c=oD(u),l=WR("coords",u);if(1===i){var h=oD(o=u+1);s="\n        "+h+" sourceLocR = "+h+"("+l.join()+", 0);\n        ++"+l[u-1]+";\n        "+h+" sourceLocG = "+h+"("+l.join()+", 0);\n        ++"+l[u-2]+";\n        "+h+" sourceLocA = "+h+"("+l.join()+", 0);\n        --"+l[u-1]+";\n        "+h+" sourceLocB = "+h+"("+l.join()+", 0);\n        --"+l[u-2]+";"}else o=u,s="\n        "+c+" sourceLocR = coords;\n        ++"+l[u-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+l[u-2]+";\n        "+c+" sourceLocA = coords;\n        --"+l[u-1]+";\n        "+c+" sourceLocB = coords;\n        --"+l[u-2]+";";var p=["x","y","z","w","u","v"].slice(0,o),f="."+p[o-1],d=p.map(function(t){return"int "+t}),m=WR("sourceLocR",o-1).concat("inIdx.r"),g=WR("sourceLocG",o-1).concat("inIdx.g"),v=WR("sourceLocB",o-1).concat("inIdx.b"),y=WR("sourceLocA",o-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+y.join()+")));",x="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+v.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+y.join()+") : 0.)",E=r?"":"\n      float getBestIndicesAChannel("+d.join()+") {\n        return getChannel(getBestIndicesA("+p.join()+"),\n                                          vec2("+p.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+d.join()+") {\n        return getChannel(getA("+p.join()+"),\n                               vec2("+p.slice(-2).join()+"));\n      }\n      "+E+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+l[u-1]+" < "+(a[u-1]-1)+";\n        bool hasNextRow = "+l[u-2]+" < "+(a[u-2]-1)+";\n        "+s+"\n        ivec4 srcIdx = ivec4(sourceLocR"+f+", sourceLocG"+f+",\n          sourceLocB"+f+", sourceLocA"+f+") * "+e+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+x+";\n\n        for (int i = 0; i < "+e+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+x+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+b+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},lD=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n      const float avgMultiplier = float("+1/(t.filterHeight*t.filterWidth)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+";\n            wR += "+t.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+";\n            wC+= "+t.dilationWidth+") {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},hD=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(e-1-t.padInfo.front)+", "+(n-1-t.padInfo.top)+", "+(r-1-t.padInfo.left)+");\n      const float avgMultiplier = float("+1/(t.filterDepth*t.filterHeight*t.filterWidth)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+e+";\n            wD += "+t.dilationDepth+") {\n          float dyD = float(dyDCorner + wD) / "+t.strideDepth+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+n+";\n              wR += "+t.dilationHeight+") {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+r+";\n                wC += "+t.dilationWidth+") {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},pD=function(t,e,n,r,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],lR(t,e),lR(t,n);var o="0.0";null!=r&&(lR(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var a="1.0";null!=i&&(lR(t,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+a+";\n        float inv = scale * inversesqrt(variance + float("+s+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},fD=function(t,e,n,r,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],lR(t,e),lR(t,n);var o="vec4(0.0)";null!=r&&(lR(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var a="vec4(1.0)";null!=i&&(lR(t,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = "+o+";\n        vec4 scale = "+a+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+s+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},dD=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=lR(e,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+t+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},mD="return a + b;",gD="return a - b;",vD="return a * b;",yD="return (a < 0.) ? b * a : a;",bD=function(t,e,n){this.variableNames=["A","B"],this.outputShape=lR(e,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},wD="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",xD=function(t,e,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=lR(e,n);var i=this.outputShape.length,s="";if(r)if(0===i||1===nI(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(s="\n          "+oD(i)+" coords = getOutputCoords();\n        ",1===i)s+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var o=WR("coords",i);s+="\n            bool nextRowOutOfBounds =\n              ("+o[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+o[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+s+"\n\n        setOutput(result);\n      }\n    "},ED=function(){function t(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),_D=function(){function t(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),SD=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},CD=function(t){this.outputShape=[],this.outputShape=Pk(t,1),this.variableNames=t.map(function(t,e){return"T"+e});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++)r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+e[n-1]+"));");r.push("else setOutput(getT"+e.length+"(yR, yC-"+e[e.length-1]+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},AD=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Pk(t,e);var n=this.outputShape,r=n.length,i=oD(r),s=WR("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(t,e){return"T"+e});var a=new Array(t.length-1);a[0]=t[0][e];for(var u=1;u<a.length;u++)a[u]=a[u-1]+t[u][e];var c=o[e],l=o.slice(-2),h=o.join(),p="if ("+c+" < "+a[0]+") {\n        return getChannel(\n            getT0("+h+"), vec2("+l.join()+"));\n        }";for(u=1;u<a.length;u++){var f=a[u-1];p+="\n        if ("+c+" < "+a[u]+"  && "+c+" >= "+a[u-1]+") {\n          return getChannel(\n            getT"+u+"("+ID(o,c,f)+"),\n            vec2("+ID(l,c,f)+"));\n        }"}var d=a[a.length-1];p+="\n        return getChannel(\n          getT"+a.length+"("+ID(o,c,d)+"),\n          vec2("+ID(l,c,d)+"));",this.userCode="\n      float getValue("+o.map(function(t){return"int "+t})+") {\n        "+p+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+s+"), 0., 0., 0.);\n\n        "+s[r-1]+" = "+s[r-1]+" + 1;\n        if ("+s[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+s+");\n        }\n\n        "+s[r-2]+" = "+s[r-2]+" + 1;\n        if ("+s[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+s+");\n        }\n\n        "+s[r-1]+" = "+s[r-1]+" - 1;\n        if ("+s[r-2]+" < "+n[r-2]+" &&\n            "+s[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+s+");\n        }\n        setOutput(result);\n      }\n    "};function ID(t,e,n){var r=t.indexOf(e);return t.map(function(t,e){return e===r?t+" - "+n:t}).join()}var TD=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              if ("+("channelsLast"===t.dataFormat)+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},kD=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r="channelsLast"===t.dataFormat;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+(r?3:1)+"];\n\n        ivec2 dyCorner = ivec2(coords["+(r?1:2)+"], coords["+(r?2:3)+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n\n              if ("+r+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},PD=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yF = 0; yF < "+t.outDepth+"; yF++) {\n            int xF = wF + yF * "+t.strideDepth+" - "+t.padInfo.front+";\n\n            if (xF < 0 || xF >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n              int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n                int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},RD=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(e-1-t.padInfo.front)+", "+(n-1-t.padInfo.top)+", "+(r-1-t.padInfo.left)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+e+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+t.strideDepth+".0;\n\n          if (dyF < 0.0 || dyF >= "+t.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+e+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},DD=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+t.outChannels/t.inChannels+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},FD=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+r+"; dm++) {\n              int d2 = d1 * "+r+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},BD=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,s=t.padInfo.left,o=t.strideHeight,a=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),f=t.inChannels%4,d="channelsLast"===t.dataFormat,m=d?1:2,g=d?2:3,v=d?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var w=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+o+", "+a+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+v+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+m+"], coords["+g+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+p+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+d+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===f)+") {\n\n              if ("+d+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+p+") *\n                    getW(wR, wC, "+p+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+p+", xR, xC) *\n                    getW(wR, wC, "+p+", d2);\n              }\n\n            } else if ("+(2===f)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+p+", d2),\n                getW(wR, wC, "+p+" + 1, d2)\n              );\n\n              if ("+d+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+p+"),\n                  getX(batch, xR, xC, "+p+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+p+", xR, xC),\n                  getX(batch, "+p+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===f)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+p+", d2),\n                getW(wR, wC, "+p+" + 1, d2),\n                getW(wR, wC, "+p+" + 2, d2)\n              );\n\n              if ("+d+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+p+"),\n                  getX(batch, xR, xC, "+p+" + 1),\n                  getX(batch, xR, xC, "+p+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+p+", xR, xC),\n                  getX(batch, "+p+" + 1, xR, xC),\n                  getX(batch, "+p+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+w+"\n        "+b+"\n        setOutput(result);\n      }\n    "},OD=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,s=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterDepth,h=t.filterHeight,p=t.filterWidth,f=4*Math.floor(t.inChannels/4),d=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+s+", "+o+");\n      const ivec3 pads = ivec3("+e+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+a+";\n\n          if (xF < 0 || xF >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+p+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===d)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+f+") *\n                  getW(wF, wR, wC, "+f+", d2);\n              } else if ("+(2===d)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===d)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1),\n                  getX(batch, xF, xR, xC, "+f+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2),\n                  getW(wF, wR, wC, "+f+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ND=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,s=t.inWidth,o=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,h=t.dilationWidth,p=t.filterHeight,f=t.filterWidth,d=t.outChannels/t.inChannels,m="",g="";n&&(m=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",g="result = activation(result);");var v=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+m+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+d+";\n        int q = d2 - d1 * "+d+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+p+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+h+";\n\n            if (xC < 0 || xC >= "+s+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+v+"\n        "+g+"\n        setOutput(result);\n      }\n    "},MD=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,s=t.inWidth,o=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,h=t.dilationWidth,p=t.filterHeight,f=t.filterWidth,d=f,m="int xR; int xC; int xCOffset;",g=0;g<p;g++)for(var v=0;v<f;v++)m+="\n          vec4 xTexelR"+g+"C"+2*v+" = vec4(0.);\n          vec4 wR"+g+"C"+v+" = vec4(0.);\n          vec4 xR"+g+"C"+v+" = vec4(0.);";for(g=0;g<p;g++)for(var y=0;y<d;y++){if(m+="\n          xR = xRCorner + "+g*l+";\n          xC = xCCorner + "+(v=2*y)*h+";\n        ",1===c){if(v<f&&(m+=a%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+s+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+s+") {\n                    xTexelR"+g+"C"+v+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+s+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+s+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+g+"C"+v+" = vec4(previous.zw, xTexelR"+g+"C"+v+".xy);\n                } else {\n                  xR"+g+"C"+v+" = vec4(0, 0, xTexelR"+g+"C"+v+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+s+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = xTexelR"+g+"C"+v+";\n              ",v+1<f)){var b=a%2==0?QA(h):h;h%2==0&&a%2==1||h%2!=0&&a%2!=1?(m+="\n                  xCOffset = xC + "+a%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+s+") {\n                    xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",h>1&&(m+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+s+") {\n                      xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+g+"C"+v+" = vec4(0.);\n                    }\n                  "),m+="\n                  xR"+g+"C"+(v+1)+" = vec4(\n                    xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".xy);\n                "):m+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+s+") {\n                    xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+g+"C"+(v+1)+" = xTexelR"+g+"C"+(v+2)+";\n                "}}else v<f&&(m+="\n              if(xR >= 0 && xR < "+i+") {\n            ",a%2==1?(m+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+s+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+s+") {\n                  xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+g+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = vec4(\n                  xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".zw);\n              ",v+1<f&&(m+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+s+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+g+"C"+(v+1)+" = vec4(xTexelR"+g+"C"+(v+2)+".xy, final.xy);\n                ")):(m+="\n                if(xC >= 0 && xC < "+s+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+s+") {\n                  xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = vec4(\n                  xTexelR"+g+"C"+v+".xy, xTexelR"+g+"C"+(v+2)+".xy);\n              ",v+1<f&&(m+="\n                  xR"+g+"C"+(v+1)+" = vec4(\n                    xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".zw);\n                ")),m+="}");v<f&&(m+="\n            vec4 wTexelR"+g+"C"+v+" = getW("+g+", "+v+", d1, q);\n            wR"+g+"C"+v+" = vec4(wTexelR"+g+"C"+v+".xz, wTexelR"+g+"C"+v+".xz);\n          ",v+1<f&&(m+="\n              vec4 wTexelR"+g+"C"+(v+1)+" = getW("+g+", "+(v+1)+", d1, q);\n              wR"+g+"C"+(v+1)+" =\n                vec4(wTexelR"+g+"C"+(v+1)+".xz, wTexelR"+g+"C"+(v+1)+".xz);"))}for(g=0;g<p;g++)for(v=0;v<f;v++)m+="dotProd += xR"+g+"C"+v+" * wR"+g+"C"+v+";";var w="",x="";n&&(w=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",x="result = activation(result);");var E=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+w+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+m+"\n\n        vec4 result = dotProd;\n        "+E+"\n        "+x+"\n        setOutput(result);\n      }\n    "},LD=function(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var s=t[0],o=t[1],a=t[2],u=n[0],c=n[1];this.outputShape=[e[0],u,c,t[3]];var l=[o-1+".0",a-1+".0"],h=l[0],p=l[1],f=u>1?[""+(o-1)/(u-1),"(y2-y1) * height_ratio","y1*"+h+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+h],d=c>1?[""+(a-1)/(c-1),"(x2-x1) * width_ratio","x1*"+p+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+p];this.userCode="\n      const float height_ratio = float("+f[0]+");\n      const float width_ratio = float("+d[0]+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+s+") {\n          return;\n        }\n\n        float height_scale = "+f[1]+";\n        float width_scale = "+d[1]+";\n\n        float in_y = "+f[2]+";\n        if( in_y < 0.0 || in_y > "+h+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+d[2]+";\n        if( in_x < 0.0 || in_x > "+p+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+("bilinear"===r?1:0)+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},VD=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],s=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+oD(r)+" coords = getOutputCoords();\n        int end = "+jD(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+s+" end) {\n            continue;\n          }\n          if (idx == end && "+e+") {\n            continue;\n          }\n          "+jD(r,"coords")+" = idx;\n          val += getX("+function(t,e){if(1===t)return""+e;if(2===t)return e+".x, "+e+".y";if(3===t)return e+".x, "+e+".y, "+e+".z";if(4===t)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function jD(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var UD=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=hT.DENSE;var e=bT(t),n=GR();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+$R(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},HD=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=hT.DENSE;var e=bT(t),n=GR();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+$R(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},zD=function(){function t(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+e+";\n      int offset_h = imod(h, "+e+");\n      int in_w = w / "+e+";\n      int offset_w = imod(w, "+e+");\n      int offset_d = (offset_h * "+e+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return t.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),KD=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},qD=function(t){this.variableNames=["A"],this.outTexUsage=pT.DOWNLOAD;var e=GR();this.outputShape=t,this.userCode="\n      "+QR+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+e.output+" = encode_float(x);\n      }\n    "},WD=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=pT.DOWNLOAD;var e=GR();this.outputShape=t,this.userCode="\n      "+QR+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+e.output+" = encode_float(x);\n      }\n    "},GD=function(t,e,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=GR(),i=e[0],s=e[1];this.outputShape=t;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode="\n      "+XR(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+s+";\n        int c = imod(flatIndex, "+s+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+s+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+o+", 0., 0., 0.);\n      }\n    "},$D=function(t,e,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=GR(),i=e[0],s=e[1];this.outputShape=t;var o="",a="result";n&&(a="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c;o+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+t[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+u+" < "+t[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+s+";\n              c = imod(flatIndex, "+s+");\n              uv = (vec2(c, r) + halfCR) / vec2("+s+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+XR(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+o+"\n\n        "+r.output+" = "+a+";\n      }\n    "},XD=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI;this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+t+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+(n?r+".0":"1.0")+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},QD=function(){function t(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.valueLoc&&(e.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(e.valueLoc,t)}},t}(),YD=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var i=oD(this.rank),s=function(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=0;s<t.length;s++)i.push(s===e?"int(getIndices("+r[s]+"))":""+r[s]);return i.join()}(t,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+s+"));\n      }\n    "},ZD=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=oD(e.length),i=oD(n.length);this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+(this.sliceDim>1?"strides[j]":"strides")+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function JD(t,e){var n=GR();return AT(t,e,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function tF(t,e){return BT(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function eF(t,e){return OT(t,e,new Uint16Array([0,1,2,2,1,3]))}function nF(t,e,n,r,i,s,o){MT(n,r);var a=NT(t,e),u=t.TEXTURE_2D;return ET(t,e,function(){return t.bindTexture(u,a)}),ET(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),ET(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),ET(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),ET(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),ET(t,e,function(){return t.texImage2D(u,0,i,n,r,0,s,o,null)}),ET(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),a}function rF(t,e,n,r,i){var s=yT(n,r);return nF(t,e,s[0],s[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function iF(t,e,n,r,i){var s=yT(n,r);return nF(t,e,s[0],s[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function sF(t,e,n,r,i){var s=yT(n,r);return nF(t,e,s[0],s[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function oF(t,e,n,r,i){var s=wT(n,r);return nF(t,e,s[0],s[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function aF(t,e,n,r,i){var s=wT(n,r);return nF(t,e,s[0],s[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function uF(t,e,n,r){return ET(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),VT(t,e,n,"clipSpacePos",r,3,20,0)&&VT(t,e,n,"uv",r,2,20,12)}function cF(t,e,n,r,i,s,o){var a,u,c;ET(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),s instanceof Uint8Array?(a=new Uint8Array(r*i*4),u=t.UNSIGNED_BYTE,c=t.RGBA):(a=new Float32Array(r*i*4),u=t.FLOAT,c=o.internalFormatPackedFloat),a.set(s),ET(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,c,r,i,0,t.RGBA,u,a)}),ET(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function lF(t,e,n,r){ET(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?ET(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):ET(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),ET(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function hF(t,e,n,r,i){var s=t.createBuffer();ET(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,s)});var o=16*n*r;return ET(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)}),ET(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),ET(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),s}function pF(t,e,n){var r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function fF(t,e,n,r,i){var s=yT(n,r),o=s[0],a=s[1],u=new Uint8Array(n*r*4);return ET(t,e,function(){return t.readPixels(0,0,o,a,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function dF(t,e,n,r,i,s,o,a){var u=t,c=new Float32Array(function(t,e){var n=wT(t,e);return n[0]*n[1]*4}(s,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function mF(t,e,n,r){var i=new Float32Array(n*r*4);return ET(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i)}),i}var gF=Object.freeze({createVertexShader:JD,createVertexBuffer:tF,createIndexBuffer:eF,createFloat32MatrixTexture:rF,createFloat16MatrixTexture:iF,createUnsignedBytesMatrixTexture:sF,createPackedMatrixTexture:oF,createFloat16PackedMatrixTexture:aF,bindVertexProgramAttributeStreams:uF,uploadDenseMatrixToTexture:cF,uploadPixelDataToTexture:lF,createBufferFromOutputTexture:hF,downloadFloat32MatrixFromBuffer:pF,downloadByteEncodedFloatMatrixFromOutputTexture:fF,downloadPackedMatrixFromBuffer:dF,downloadMatrixFromPackedOutputTexture:mF}),vF=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=VA().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,gT(e,t)):this.gl=vT(e);var n="WEBGL_color_buffer_float";if(1===VA().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=CT(this.gl,this.debug,"OES_texture_float"),sk(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=CT(this.gl,this.debug,"OES_texture_half_float");else if(VA().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),sk(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=CT(this.gl,this.debug,"EXT_color_buffer_half_float");else if(VA().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(sk(this.gl,n="EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!sk(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=tF(this.gl,this.debug),this.indexBuffer=eF(this.gl,this.debug),this.framebuffer=LT(this.gl,this.debug),this.textureConfig=xT(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return VA().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;ET(e,this.debug,function(){return e.finish()}),ET(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),ET(e,this.debug,function(){return e.deleteFramebuffer(t.framebuffer)}),ET(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),ET(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),ET(e,this.debug,function(){return e.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),rF(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),iF(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),sF(this.gl,this.debug,t,e)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),lF(this.gl,this.debug,t,e)},t.prototype.uploadDenseMatrixToTexture=function(t,e,n,r){this.throwIfDisposed(),cF(this.gl,this.debug,t,e,n,r,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(t,e){return this.throwIfDisposed(),aF(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),oF(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(qT(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ET(this.gl,this.debug,function(){return e.gl.deleteTexture(t)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return fF(r.gl,r.debug,e,n,r.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(t,e,n,r,i,s){return dF(this.gl,t,0,0,0,i,s)},t.prototype.downloadFloat32MatrixFromBuffer=function(t,e){return pF(this.gl,t,e)},t.prototype.createBufferFromTexture=function(t,e,n){this.bindTextureToFrameBuffer(t);var r=hF(this.gl,this.debug,e,n);return this.unbindTextureToFrameBuffer(),r},t.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},t.prototype.createFence=function(t){var e,n,r=this;if(VA().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var t=i.clientWaitSync(s,0,0);return t===i.ALREADY_SIGNALED||t===i.CONDITION_SATISFIED},e=s}else VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(e,VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:e,isFencePassed:n}},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return mF(r.gl,r.debug,e,n)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=IT(e,this.debug,t),r=JD(e,this.debug),i=RT(e,this.debug);return ET(e,this.debug,function(){return e.attachShader(i,r)}),ET(e,this.debug,function(){return e.attachShader(i,n)}),DT(e,this.debug,i),this.debug&&FT(e,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=uF(e,this.debug,this.program,this.vertexBuffer)),i},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&ET(this.gl,this.debug,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&FT(this.gl,this.debug,this.program),ET(this.gl,this.debug,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?UT(this.gl,this.debug,t,e):HT(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),ET(this.gl,this.debug,function(){return n.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),zT(this.gl,this.debug,0,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=wT(e,n);this.setOutputMatrixTextureDriver(t,r[0],r[1])},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&FT(this.gl,this.debug,this.program),WT(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),ET(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),ET(this.gl,this.debug,function(){return t.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=CT(this.gl,this.debug,2===VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(2===VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},t.prototype.endQuery=function(){if(2!==VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(t){return OA(this,void 0,void 0,function(){var e=this;return NA(this,function(n){switch(n.label){case 0:return[4,uI(function(){return e.disposed||e.isQueryAvailable(t,VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(t,VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},t.prototype.pollFence=function(t){var e=this;return new Promise(function(n){e.addItemToPoll(function(){return t.isFencePassed()},function(){return n()})})},t.prototype.pollItems=function(){for(var t=function(t){for(var e=0;e<t.length&&t[e]();++e);return e-1}(this.itemsToPoll.map(function(t){return t.isDoneFn})),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||uI(function(){return n.pollItems(),0===n.itemsToPoll.length})},t.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),KT(this.gl,this.debug,t,this.framebuffer),this.debug&&WT(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(KT(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&WT(this.gl)):qT(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var n=e();return this.unbindTextureToFrameBuffer(),n},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;KT(r,this.debug,t,this.framebuffer),this.debug&&WT(r),this.outputTexture=t,ET(r,this.debug,function(){return r.viewport(0,0,e,n)}),ET(r,this.debug,function(){return r.scissor(0,0,e,n)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var i=this;this.throwIfDisposed(),ET(this.gl,this.debug,function(){return i.gl.scissor(t,e,n,r)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();function yF(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(t,n){var r=t.logicalShape,i=e[n],s=i.shape;if(!rI(r,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+s+" must match");if(!t.isUniform||!i.isUniform){var o=t.texShape,a=i.isUniform?null:i.texData.texShape;if(!rI(o,a))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+a+" must match")}})}var bF=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.inChannels,i=n.strideWidth,s=n.strideHeight,o=n.padInfo,a=n.outWidth,u=n.dilationWidth,c=n.dilationHeight,l=n.dataFormat,h=o.left,p=o.top,f=r*n.filterWidth,d=GR(),m="channelsLast"===l,g=m?0:1,v=m?1:2,y="",b=0;b<=1;b++)for(var w=0;w<=1;w++)y+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+b+";\n\n          if(blockIndex < "+t[1]+" && pos < "+t[0]+") {\n            offsetY = int(blockIndex / ("+a+")) * "+s+" - "+p+";\n            d0 = offsetY + "+c+" * (pos / "+f+");\n\n            if(d0 < "+e[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+a+".) * "+i+". - "+h+".);\n              d1 = offsetX + "+u+" * (int(mod(float(pos), "+f+".) / "+r+".));\n\n              if(d1 < "+e[v]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+r+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+y+"\n\n        "+d.output+" = result;\n      }\n    "},wF=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];var s=e,o=t[3]-1;this.outputShape=t;var a="float("+n+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+s+"; j <= "+s+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+o+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+(.5===i?"inversesqrt("+a+")":1===i?"1.0/("+a+")":"exp(log("+a+") * float(-"+i+"));")+";\n        setOutput(val);\n      }\n    "},xF=function(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+e+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+e+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},EF=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var s=e,o=t[3]-1;this.outputShape=t;var a="float("+n+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+s+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+s+"; j <= "+s+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+o+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+(.5===i?"inversesqrt("+a+")":1===i?"1.0/("+a+")":"exp(log("+a+") * float(-"+i+"));")+";\n        setOutput(result);\n      }\n    "},_F=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+";\n          wR += "+t.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+(e*n-1)+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},SF=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(e-1-t.padInfo.front)+", "+(n-1-t.padInfo.top)+", "+(r-1-t.padInfo.left)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+e+";\n           wD += "+t.dilationDepth+") {\n          float dyD = float(dyDCorner + wD) / "+t.strideDepth+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+n+";\n              wR += "+t.dilationHeight+") {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+r+";\n                wC += "+t.dilationWidth+") {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+(e*n*r-1)+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+n+" * "+r+" +\n                  wR * "+r+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},CF=function(t,e,n,r,i,s,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===s&&(s=null),void 0===o&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var a=Math.ceil((n?t[1]:t[2])/2),u=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",l=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",f="";s&&(p=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+s+"\n        }":"vec4 activation(vec4 x) {\n          "+s+"\n        }",f="result = activation(result);");var d=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+p+"\n\n      const float sharedDimension = "+a+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+a+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+u+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+l[0]+" * "+h[0]+");\n          result += ("+l[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+d+"\n\n        "+f+"\n\n        setOutput(result);\n      }\n    "},AF=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}(),IF=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},TF=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=WR("rc",e),r=oD(e),i=function(t,e,n){if(1===t)return"rc > "+e[0];for(var r="",i=t-2;i<t;i++)r+=n[i]+" >= "+e[i],i<t-1&&(r+="||");return r}(e,t,n),s=function(t,e,n,r){if(1===t)return"";var i=r.slice(-2);return"\n    int r = "+i[0]+";\n    int c = "+i[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+e+";\n    bool rEdge = rp1 >= "+n+";\n  "}(e,t[t.length-1],t[t.length-2],n),o=function(t,e){var n=t.length,r=function(t,e){for(var n=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var s=(0===r?"r":"rp1")+", "+(0===i?"c":"cp1"),o=2;o<t;o++)s=e[e.length-1-o]+","+s;n.push(s)}return n}(n,e);return 1===n?"getA(rc),\n            rc + 1 >= "+t[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(t,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+s+"\n\n            setOutput(vec4("+o+"));\n          }\n        }\n      "}},kF=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});var r=t.length,i=oD(r),s=e.map(function(t){return t[0]}).join(","),o=e.map(function(e,n){return e[0]+t[n]}).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+s+");\n      "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+a+"));\n        }\n      }\n    ":"\n        int start = "+s+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},PF=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});for(var r=t.length,i=oD(r),s=e.map(function(t){return t[0]}).join(","),o=e.map(function(e,n){return e[0]+t[n]}).join(","),a=WR("rc",r),u=WR("source",r),c=a[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+u.slice(-2).join()+")",h=[i+" rc = outputLoc;",a[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+a[r-2]+" += 1;\n       if("+a[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+a[r-1]+" += 1;\n         if("+c+") {"],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",d=0,m=1===r?2:4;d<m;d++)f+="\n        "+h[d]+"\n        if ("+p+") {\n          result["+d+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+d+"] = getChannel(getX("+u.join()+"), "+l+");\n        }\n      ";this.userCode="\n      const "+i+" start = "+i+"("+s+");\n      const "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+(f+=1===r?"} ":"}}")+"\n        setOutput(result);\n      }\n    "},RF=function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,s=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var p="avg"===e,f="0.0";if(p||(f="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+s+");\n        const ivec2 pads = ivec2("+l+", "+h+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+o+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+a+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var d=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(d="avgValue / count");var m=4*Math.floor(r/4),g=r%4,v="\n      if ("+p+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+s+");\n      const ivec2 pads = ivec2("+l+", "+h+");\n      const float initializationValue = "+f+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+f+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+o+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+m+"; wC += 4) {\n            int xC = xCCorner + wC * "+a+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              getValue(batch, xR, xC + 2 * "+a+", d),\n              getValue(batch, xR, xC + 3 * "+a+", d)\n            );\n\n            "+v+"\n          }\n\n          int xC = xCCorner + "+m+";\n          if ("+(1===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(2===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(3===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              getValue(batch, xR, xC + 2 * "+a+", d),\n              initializationValue\n            );\n\n            "+v+"\n          }\n        }\n        setOutput("+d+");\n      }\n    "}},DF=function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideDepth,s=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,h=t.effectiveFilterHeight,p=t.effectiveFilterWidth,f=t.padInfo.front,d=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var g="avg"===e,v="0.0";if(g||(v="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+s+", "+o+");\n        const ivec3 pads = ivec3("+f+", "+d+", "+m+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+l+";\n              wD += "+a+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+h+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+p+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+h+" * "+p+" +\n                      wR * "+p+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(y="avgValue / count");var b=4*Math.floor(r/4),w=r%4,x="\n      if ("+g+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+s+", "+o+");\n      const ivec3 pads = ivec3("+f+", "+d+", "+m+");\n      const float initializationValue = "+v+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+v+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+a+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+x+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+x+"\n            } else if ("+(2===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+x+"\n            } else if ("+(3===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+x+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},FF=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,i=t.inSize,s=Math.ceil(i/n);this.outputShape=[r,s];var o="0.0",a="";"prod"===e?o="1.0":"min"===e?(o="1.0 / 1e-20",a="min"):"max"===e&&(o="-1.0 / 1e-20",a="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?u="sumValue":"prod"===e?u="prodValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");var c=4*Math.floor(n/4),l=n%4,h="\n      if ("+("sum"===e)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===e)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+a+"(values, minMaxValue);\n      }\n    ",p="vec4";"all"===e?(o="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===e&&(o="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var f="";i%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+h+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(2===l)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(3===l)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+h+"\n        }\n        setOutput("+u+");\n      }\n    "},BF=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+$R(["r","c","d"],e)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+XR(t)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+t[1]+";\n        int cols = "+t[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},OF=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],s=r[2],o=t.shape,a=o[1],u=o[2],c=[n&&a>1?i-1:i,n&&u>1?s-1:s],l=[n&&a>1?a-1:a,n&&u>1?u-1:u],h=c[0]/l[0],p=c[1]/l[1],f=1/h,d=1/p,m=2*Math.ceil(f)+2,g=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+d+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+a+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(s-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},NF=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[1],s=t[2];this.outputShape=[t[0],e,n,t[3]];var o=[r&&e>1?i-1:i,r&&n>1?s-1:s],a=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+o[0]/a[0]+",\n          "+o[1]/a[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},MF=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=t[1],s=t[2],o=t[3];this.outputShape=[t[0],e,n,o];var a=[r&&e>1?i-1:i,r&&n>1?s-1:s],u=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+a[0]/u[0]+",\n          "+a[1]/u[1]+",\n          "+a[1]/u[1]+");\n      const vec3 inputShapeRC = vec3("+i+".0, "+s+".0,\n                                     "+s+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(o-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},LF=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],s=r[2],o=t.shape,a=o[1],u=o[2],c=[n&&a>1?i-1:i,n&&u>1?s-1:s],l=[n&&a>1?a-1:a,n&&u>1?u-1:u],h=c[0]/l[0],p=c[1]/l[1],f=1/h,d=1/p,m=2*Math.ceil(f)+2,g=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+d+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+a+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+s+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},VF=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[1],s=t[2];this.outputShape=[t[0],e,n,t[3]];var o=[r&&e>1?i-1:i,r&&n>1?s-1:s],a=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+o[0]/a[0]+",\n          "+o[1]/a[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+(r?"0.5":"0.0")+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},jF=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,1!==n){var r=t.map(function(n,r){return function(n){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),i=oD(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "},UF=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=WR("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],s=r[n-2]+" + 1 < "+this.outputShape[n-2],o=oD(n);function a(n){var r=t.map(function(r,i){return function(n,r){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - "+r[n]+" - 1":""+r[n]}(i,n)});return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+t[0]+" - rc - 1),\n            "+t[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+t[0]+" - (rc  + 1) - 1),\n                "+t[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+o+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(t){return a(t)}(r.slice())+";\n          if("+i+"){\n            result.g = "+function(t){return t[n-1]="("+t[n-1]+" + 1)",a(t)}(r.slice())+";\n          }\n          if("+s+") {\n            result.b = "+function(t){return t[n-2]="("+t[n-2]+" + 1)",a(t)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",a(t)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},HF=function(t,e,n,r,i,s,o){void 0===o&&(o=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;var a=oD(i.length),u=oD(s.length),c="";1===n?c="i":2===n&&(c="i, j");var l="";1===r?l="i":2===r&&(l="i, coords[1]"),this.userCode="\n        "+a+" strides = "+a+"("+i+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+t+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+e+"; j++) {\n              int index = round(getIndices("+c+"));\n              flattenedIndex += index * "+(e>1?"strides[j]":"strides")+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates("+l+");\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},zF=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,i=t.inSize,s=t.numSegments,o=s*Math.ceil(i/n);this.outputShape=[r,o];var a=4*Math.floor(n/4),u=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",l="";i%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var h="";i%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+h+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+s+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+s+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+a+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+a+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},KF=function(t,e,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)i="resRC",r="resRC";else{for(var s=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=[],u=0;u<e.length;u++)a.push(""+s[u]),u<t&&o.push(""+s[u]);r=o.join(),i=a.join()}var c=oD(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},qF=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e,n=oD(this.rank),r="uniform int start["+this.rank+"];",i=function(t){if(1===t)return"sourceLoc";if(t<=6)return WF.slice(0,t).map(function(t){return"sourceLoc."+t}).join(",");throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);e="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+t.map(function(t,e){return"sourceLoc."+WF[e]+" = start["+e+"] + coords."+WF[e]+";"}).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+e+"\n        setOutput(getSource("+i+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),WF=["x","y","z","w","u","v"],GF=function(){function t(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var e=oD(this.rank),n=WR("coords",this.rank),r=WR("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",s="getChannel(getSource("+r.join()+"), "+i+")",o="\n      result.x = "+s+";\n      if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+s+";\n        --"+r[this.rank-1]+";\n      }\n    ",a=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+t[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+s+";\n        if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+s+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+e+"("+t.map(function(t,e){return"start["+e+"]"}).join()+");":t.map(function(t,e){return r[e]+" = "+n[e]+" + start["+e+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+e+" coords = getOutputCoords();\n        "+e+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+o+"\n        "+a+"\n        setOutput(result);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),$F=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=oD(n.length),s=oD(n.length),o="";if(1===r)o="coords * strides + begin";else{var a=0;o=n.map(function(t,e){return a++,1===n.length?"coords * strides["+e+"] + begin["+e+"]":"coords["+(a-1)+"] * strides["+e+"] + begin["+e+"]"}).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+t+");\n      "+i+" strides = "+i+"("+e+");\n\n      void main() {\n        "+s+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "},XF=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(t,e,n){var r,i=QF(e,n),s=YF(t,i,n);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var o=this.freeTextures[s].shift();return this.usedTextures[s].push(o),o}return this.numUsedTextures++,this.log(),i===fT.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===fT.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===fT.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===fT.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===fT.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[s].push(r),r},t.prototype.releaseTexture=function(t,e,n,r){if(null!=this.freeTextures){var i=YF(e,QF(n,r),r);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[i],o=s.indexOf(t);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(o,1),this.log()}},t.prototype.log=function(){this.logEnabled&&console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+(this.numFreeTextures+this.numUsedTextures)+")")},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function QF(t,e){if(t===pT.UPLOAD)return fT.PACKED_2X2_FLOAT32;if(t===pT.RENDER||null==t)return function(t){return VA().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?fT.PACKED_2X2_FLOAT32:fT.UNPACKED_FLOAT32:t?fT.PACKED_2X2_FLOAT16:fT.UNPACKED_FLOAT16}(e);if(t===pT.DOWNLOAD||t===pT.PIXELS)return fT.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function YF(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var ZF=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var i=oD(this.rank),s=function(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<t.length;i++)r.push("imod("+n[i]+", "+t[i]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+s+"));\n      }\n    "},JF=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var i=oD(this.rank),s=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}(e);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+s+"));\n    }\n    "},tB=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=oD(this.rank),s=qR("rc",this.rank),o=new Array(this.rank);for(r=0;r<e.length;r++)o[e[r]]=s[r];var a="vec2("+o.slice(-2).join()+")",u="++"+s[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+o.join()+"), "+a+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+s[this.rank-1]+";\n      if(++"+s[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},eB=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},nB="if (isnan(x)) return x;",rB="return abs(x);",iB=nB+"\n  return (x < 0.0) ? 0.0 : x;\n",sB=nB+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",oB="return (x >= 0.0) ? x : (exp(x) - 1.0);",aB="return -x;",uB="return ceil(x);",cB="return floor(x);",lB="return exp(x);",hB="return exp(x) - 1.0;",pB="return x;",fB="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",dB="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",mB="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",gB=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},vB=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=WR("rc",e),r=oD(e),i=function(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(e,n),s=n.slice(-2),o=e<=1?"rc":"vec2("+s.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+o+"));\n      }\n    "},yB={};function bB(t,e){if(void 0===e&&(e=!1),"linear"===t)return"return x;";if("relu"===t)return e?fB:iB;if("elu"===t)return e?mB:oB;if("relu6"===t)return e?dB:sB;if("prelu"===t)return e?wD:yD;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var wB=function(t){function e(e){var n,r=t.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!VA().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var i=vT(VA().getNumber("WEBGL_VERSION"));r.binaryCache=((n=VA().getNumber("WEBGL_VERSION"))in yB||(yB[n]={}),yB[n]),r.gpgpu=new vF(i),r.canvas=i.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=e,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=e.gl.canvas;return r.textureManager=new XF(r.gpgpu),r.numMBBeforeWarning=null==VA().global.screen?1024:VA().global.screen.height*VA().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new sR(r,uT),r}return BA(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,e,n){if(VA().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:pT.UPLOAD}),r},e.prototype.move=function(t,e,n,r){if(VA().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:pT.UPLOAD})},e.prototype.readSync=function(t){var e=this.texData.get(t),n=e.values,r=e.dtype,i=e.complexTensors,s=e.shape;if(null!=e.slice){var o;o=e.isPacked?new gB(s,pB):new eB(s,pB);var a=this.runWebGLProgram(o,[{dataId:t,shape:s,dtype:r}],r),u=this.readSync(a.dataId);return this.disposeData(a.dataId),u}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;var c,l,h=null!=this.activeTimers;return h&&(c=RI()),l="complex64"===r?AR(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(t),h&&(this.downloadWaitMs+=RI()-c),this.convertAndCacheOnCPU(t,l)},e.prototype.read=function(t){return OA(this,void 0,void 0,function(){var e,n,r,i,s,o,a,u,c,l,h,p,f,d,m,g,v,y,b;return NA(this,function(w){switch(w.label){case 0:if(this.pendingRead.has(t))return e=this.pendingRead.get(t),[2,new Promise(function(t){return e.push(t)})];if(n=this.texData.get(t),r=n.values,i=n.shape,s=n.dtype,o=n.complexTensors,a=n.isPacked,null!=n.slice)return u=a?new gB(i,pB):new eB(i,pB),c=this.runWebGLProgram(u,[{dataId:t,shape:i,dtype:s}],s),l=this.read(c.dataId),this.disposeData(c.dataId),[2,l];if(null!=r)return[2,this.convertAndCacheOnCPU(t)];if(!VA().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===VA().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,"complex64"!==s&&VA().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),f=this.texData.get(p.dataId),h=(b=this.gpgpu).createBufferFromTexture.apply(b,[f.texture].concat(bT(i)))),this.pendingRead.set(t,[]),"complex64"===s?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:w.sent(),w.label=2;case 2:return"complex64"!==s?[3,4]:[4,Promise.all([o.real.data(),o.imag.data()])];case 3:return m=w.sent(),d=AR(m[0],m[1]),[3,5];case 4:null==h?d=this.getValuesFromTexture(t):(g=nI(i),d=this.gpgpu.downloadFloat32MatrixFromBuffer(h,g)),w.label=5;case 5:return null!=p&&this.disposeData(p.dataId),v=this.convertAndCacheOnCPU(t,d),y=this.pendingRead.get(t),this.pendingRead.delete(t),y.forEach(function(t){return t(v)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,v]}})})},e.prototype.checkNumericalProblems=function(t){if(null!=t)for(var e=0;e<t.length;e++){var n=t[e];if(!_T(n)){if(VA().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},e.prototype.getValuesFromTexture=function(t){var e,n=this.texData.get(t),r=n.shape,i=n.dtype,s=n.isPacked,o=nI(r);if(VA().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var a=this.decode(t),u=this.texData.get(a.dataId),c=(e=this.gpgpu).downloadMatrixFromPackedTexture.apply(e,[u.texture].concat(bT(r))).subarray(0,o);return this.disposeData(a.dataId),c}var l=VA().getBool("WEBGL_PACK")&&!0===s,h=l?ZT(r):r,p=l?new WD(h):new qD(h),f=this.runWebGLProgram(p,[{shape:h,dtype:i,dataId:t}],"float32"),d=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture,d.texShape[0],d.texShape[1]).subarray(0,o);return this.disposeData(f.dataId),m},e.prototype.time=function(t){return OA(this,void 0,void 0,function(){var e,n,r,i,s,o,a;return NA(this,function(u){switch(u.label){case 0:return e=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t(),i=eI(this.activeTimers.map(function(t){return t.query})).filter(function(t){return null!=t}),s=eI(this.activeTimers.map(function(t){return t.name})).filter(function(t){return null!=t}),this.activeTimers=e,r&&(this.programTimersStack=null),o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return a=u.sent(),o.kernelMs=YA(a),o.getExtraProfileInfo=function(){return a.map(function(t,e){return{name:s[e],ms:t}}).map(function(t){return t.name+": "+t.ms}).join(", ")},[3,3];case 2:o.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,o]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:RI(),endMs:null}},e.prototype.endTimer=function(t){return VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=RI(),t)},e.prototype.getQueryTime=function(t){return OA(this,void 0,void 0,function(){var e;return NA(this,function(n){return VA().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(e=t).endMs-e.startMs]})})},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var e=this.texData.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var e=this.texData.get(t),n=e.texture,r=e.dtype,i=e.texShape,s=e.usage,o=e.isPacked,a=e.slice,u=a&&a.origDataId||t,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,o)));var l=this.texData.get(t);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return VA().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=uT.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,e){var n=this;return void 0===e&&(e=128),null!=this.getCPUBackend()&&t.every(function(t){return null==n.texData.get(t.dataId).texture&&t.size<e})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,e){var n=this.makeOutput(t.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:uT.keep(t.clone()),imag:uT.keep(e.clone())},n},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,e,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,e,n);if(0===nI(n))return Ok([],n,t.dtype);var r=this.texData.get(t.dataId).isPacked,i=tR(t.shape,e,n);if(r||!i){var s=VA().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GF(n):new qF(n),o=s.getCustomSetupFunc(e);return this.compileAndRun(s,[t],null,o)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n)},e.prototype.shallowSlice=function(t,e,n){var r=this.texData.get(t.dataId),i=this.makeOutput(n,t.dtype),s=this.texData.get(i.dataId);Object.assign(s,r),s.shape=n,s.dtype=t.dtype;var o=eR(e,t.strides);r.slice&&(o+=r.slice.flatOffset),s.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||t.dataId};var a=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,a+1),i},e.prototype.stridedSlice=function(t,e,n,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,e,n,r);var i=YP(e,n,r);if(i.some(function(t){return 0===t}))return Ok([],i);var s=new $F(e,r,i);return this.compileAndRun(s,[t])},e.prototype.reverse=function(t,e){var n=VA().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new UF(t.shape,e):new jF(t.shape,e);return this.compileAndRun(n,[t])},e.prototype.concat=function(t,e){if("complex64"===t[0].dtype){var n=t.map(function(t){return Fk(t)}),r=t.map(function(t){return Bk(t)});return Dk(this.concat(n,e),this.concat(r,e))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,e);if(1===t.length)return t[0];if(t.length>VA().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(t.length/2),s=this.concat(t.slice(0,i),e),o=this.concat(t.slice(i),e);return this.concat([s,o],e)}if(VA().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var a=new AD(t.map(function(t){return t.shape}),e);return this.compileAndRun(a,t)}var u=Pk(t.map(function(t){return t.shape}),e),c=t.map(function(t){return t.as2D(-1,nI(t.shape.slice(e)))}),l=new CD(c.map(function(t){return t.shape}));return this.compileAndRun(l,c).reshape(u)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(VA().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,aB,t.dtype);var e=new eB(t.shape,aB);return this.compileAndRun(e,[t])},e.prototype.batchMatMul=function(t,e,n,r){var i=n?t.shape[2]:t.shape[1],s=r?e.shape[1]:e.shape[2],o=n?t.shape[1]:t.shape[2],a=t.shape[0];if((1===i||1===s)&&o>1e3){n&&(t=t.transpose([0,2,1])),r&&(e=e.transpose([0,2,1]));var u=1===s?t:t.as3D(a,o,1),c=1===s?2:1,l=1===s?e.as3D(a,1,o):e;return this.multiply(u,l).sum(c,!0)}var h=tT(t.dtype,e.dtype),p=new CF(t.shape,[a,i,s],n,r);return this.compileAndRun(p,[t,e],h)},e.prototype.fusedBatchMatMul=function(t){var e=t.a,n=t.b,r=t.transposeA,i=t.transposeB,s=t.bias,o=t.activation,a=t.preluActivationWeights,u=r?e.shape[2]:e.shape[1],c=i?n.shape[1]:n.shape[2],l=e.shape[0],h=tT(e.dtype,n.dtype),p=null!=s,f=null!=a,d=o?bB(o,!0):null,m=new CF(e.shape,[l,u,c],r,i,p,d,f),g=[e,n];return s&&g.push(s),a&&g.push(a),this.compileAndRun(m,g,h)},e.prototype.multiply=function(t,e){if("complex64"===t.dtype){var n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),i=new dD("return areal * breal - aimag * bimag;",t.shape,e.shape),s=new dD("return areal * bimag + aimag * breal;",t.shape,e.shape),o=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag),this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)],a=this.compileAndRun(i,o),u=this.compileAndRun(s,o),c=this.complex(a,u);return a.dispose(),u.dispose(),c}if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.multiply(t,e);if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,vD,t.dtype);var l=new bD(vD,t.shape,e.shape);return this.compileAndRun(l,[t,e],t.dtype)},e.prototype.batchNormalization=function(t,e,n,r,i,s){var o=[t,e,n],a=null;null!=s&&(a=s.shape,o.push(s));var u=null;if(null!=i&&(u=i.shape,o.push(i)),VA().getBool("WEBGL_PACK_NORMALIZATION")){var c=new fD(t.shape,e.shape,n.shape,a,u,r);return this.compileAndRun(c,o)}var l=new pD(t.shape,e.shape,n.shape,a,u,r);return this.compileAndRun(l,o)},e.prototype.localResponseNormalization4D=function(t,e,n,r,i){var s=VA().getBool("WEBGL_PACK_NORMALIZATION")?new EF(t.shape,e,n,r,i):new wF(t.shape,e,n,r,i);return this.compileAndRun(s,[t])},e.prototype.LRNGrad=function(t,e,n,r,i,s,o){var a=new xF(e.shape,r,i,s,o);return this.compileAndRun(a,[e,n,t])},e.prototype.tile=function(t,e){if("string"===t.dtype){var n=this.readSync(t.dataId).map(function(t){return BI(t)});return VR(pP(t.shape,t.dtype,n),e)}var r=new ZF(t.shape,e);return this.compileAndRun(r,[t])},e.prototype.pad=function(t,e,n){var r=VA().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PF(t.shape,e,n):new kF(t.shape,e,n);return this.compileAndRun(r,[t])},e.prototype.transpose=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,e);var n=VA().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tB(t.shape,e):new JF(t.shape,e);return this.compileAndRun(n,[t])},e.prototype.gather=function(t,e,n){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.gather(t,e,n);var r=new YD(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},e.prototype.batchToSpaceND=function(t,e,n){ZA(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var r=e.reduce(function(t,e){return t*e}),i=VP(t.shape,e,r),s=jP(i.length,e.length),o=UP(t.shape,e,r),a=HP(n,e.length),u=zP(o,n,e.length);return t.reshape(i).transpose(s).reshape(o).slice(a,u)},e.prototype.spaceToBatchND=function(t,e,n){ZA(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var r=e.reduce(function(t,e){return t*e}),i=[[0,0]];i.push.apply(i,n);for(var s=1+e.length;s<t.shape.length;++s)i.push([0,0]);var o=t.pad(i),a=VP(o.shape,e,r,!1),u=jP(a.length,e.length,!1),c=UP(o.shape,e,r,!1);return o.reshape(a).transpose(u).reshape(c)},e.prototype.reduce=function(t,e,n){var r=t.shape[0],i=t.shape[1],s=qP(i),o=new FF({windowSize:s,inSize:i,batchSize:r},e),a=this.compileAndRun(o,[t],n);return 1===a.shape[1]?a:this.reduce(a,e,n)},e.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],i=t.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);var s=qP(i),o=new KR({windowSize:s,inSize:i,batchSize:r},e,null==n),a=[t];null!=n&&a.push(n);var u=this.compileAndRun(o,a,"int32");return 1===u.shape[1]?u:this.argReduce(t,e,u)},e.prototype.argReducePacked=function(t,e,n){void 0===n&&(n=null);var r=null!=n?n.shape:t.shape,i=qP(r[r.length-1]),s=new cD(r,i,e,null==n),o=this.compileAndRun(s,null==n?[t]:[t,n],"int32");return o.rank===t.rank?this.argReducePacked(t,e,o):o},e.prototype.sum=function(t,e){Ck("sum",e,t.rank);var n=_k(t.shape,e),r=n[0],i=nI(n[1]),s=t.as2D(-1,i),o=eT(t.dtype);return this.reduce(s,"sum",o).reshape(r)},e.prototype.prod=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,e);var n=_k(t.shape,e),r=n[0],i=nI(n[1]),s=t.as2D(-1,i),o=eT(t.dtype);return this.reduce(s,"prod",o).reshape(r)},e.prototype.unsortedSegmentSum=function(t,e,n){var r=0,i=Ak([r],t.rank),s=t;null!=i&&(s=t.transpose(i),r=Tk(1,t.rank)[0]);var o=function(t,e,n){for(var r=[],i=t.length,s=0;s<i;s++)r.push(s!==e?t[s]:n);return r}(s.shape,r,n),a=nI([s.shape[r]]),u=s.as2D(-1,a),c=eT(t.dtype),l=this.segOpCompute(u,"unsortedSegmentSum",e,c,n).reshape(o);return null!=i&&(l=l.transpose(Ik(i))),l},e.prototype.segOpCompute=function(t,e,n,r,i){var s=t.shape[0],o=t.shape[1],a=function(t,e){var n,r=!1;for(t<=30?(n=t,r=!0):n=CI(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=CI(t,n+1);return n}(o,i),u=new zF({windowSize:a,inSize:o,batchSize:s,numSegments:i},e),c=this.compileAndRun(u,[t,n],r);return c.shape[1]===i?c:(n=qk(0,i).tile([o/a]),this.segOpCompute(c,e,n,r,i))},e.prototype.argMinMaxReduce=function(t,e,n){var r=[e];if(Ck("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,t.rank),!VA().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var i=_k(t.shape,r),s=i[0],o=nI(i[1]),a=t.as2D(-1,o);return this.argReduce(a,n).reshape(s)}return this.argReducePacked(t,n)},e.prototype.argMin=function(t,e){return this.argMinMaxReduce(t,e,"min")},e.prototype.argMax=function(t,e){return this.argMinMaxReduce(t,e,"max")},e.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+e);var i=new VD(t.shape,n,r);return this.compileAndRun(i,[t])},e.prototype.equal=function(t,e){if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(equal(a, b));\n","bool");var n=new bD("return float(a == b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.notEqual=function(t,e){if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(notEqual(a, b));\n","bool");var n=new bD("return float(a != b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.less=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.less(t,e);if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThan(a, b));\n","bool");var n=new bD("return float(a < b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.lessEqual=function(t,e){if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new bD("return float(a <= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.greater=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.greater(t,e);if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new bD("return float(a > b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.greaterEqual=function(t,e){if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new bD("return float(a >= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.logicalNot=function(t){var e=new eB(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[t])},e.prototype.logicalAnd=function(t,e){if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new bD("return float(a >= 1.0 && b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.logicalOr=function(t,e){if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new bD("return float(a >= 1.0 || b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.select=function(t,e,n){var r=new KF(t.rank,e.shape,e.rank);return this.compileAndRun(r,[t,e,n],tT(e.dtype,n.dtype))},e.prototype.where=function(t){gk("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=t.dataSync();return UR(t.shape,e)},e.prototype.topk=function(t,e,n){return jR(t.dataSync(),t.shape,t.dtype,e)},e.prototype.min=function(t,e){Ck("min",e,t.rank);var n=_k(t.shape,e),r=n[0],i=nI(n[1]),s=t.as2D(-1,i);return this.reduce(s,"min",s.dtype).reshape(r)},e.prototype.minimum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.minimum(t,e);var n=VA().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xD("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new bD("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.mod=function(t,e){var n=VA().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xD("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new bD("if (b == 0.0) return NAN;\n  return mod(a, b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.max=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,e);Ck("max",e,t.rank);var n=_k(t.shape,e),r=n[0],i=nI(n[1]),s=t.as2D(-1,i);return this.reduce(s,"max",s.dtype).reshape(r)},e.prototype.maximum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.maximum(t,e);var n=VA().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xD("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new bD("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.all=function(t,e){Ck("all",e,t.rank);var n=_k(t.shape,e),r=n[0],i=nI(n[1]),s=t.as2D(-1,i);return this.reduce(s,"all",s.dtype).reshape(r)},e.prototype.any=function(t,e){Ck("any",e,t.rank);var n=_k(t.shape,e),r=n[0],i=nI(n[1]),s=t.as2D(-1,i);return this.reduce(s,"any",s.dtype).reshape(r)},e.prototype.realDivide=function(t,e){if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new bD("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t.shape,e.shape);return this.compileAndRun(n,[t,e],"float32")},e.prototype.floorDiv=function(t,e){if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new bD("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",t.shape,e.shape);return this.compileAndRun(n,[t,e],"int32")},e.prototype.add=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,mD);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.add(t,e);var n=tT(t.dtype,e.dtype);if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,mD,n);var r=new bD(mD,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)},e.prototype.packedUnaryOp=function(t,e,n){var r=new gB(t.shape,e);return this.compileAndRun(r,[t],n)},e.prototype.packedBinaryOp=function(t,e,n,r,i){void 0===i&&(i=!1);var s=new xD(n,t.shape,e.shape,i);return this.compileAndRun(s,[t,e],r)},e.prototype.complexSeparableBinaryOp=function(t,e,n){var r=this,i=this.texData.get(t.dataId),s=this.texData.get(e.dataId),o=[[i.complexTensors.real,s.complexTensors.real],[i.complexTensors.imag,s.complexTensors.imag]].map(function(i){var s=i[0],o=i[1],a=r.makeComplexComponentTensorInfo(t,s),u=r.makeComplexComponentTensorInfo(e,o),c=new bD(n,t.shape,e.shape);return r.compileAndRun(c,[a,u],tT(s.dtype,o.dtype))}),a=o[0],u=o[1],c=this.complex(a,u);return a.dispose(),u.dispose(),c},e.prototype.makeComplexComponentTensorInfo=function(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}},e.prototype.addN=function(t){if(1===t.length)return t[0];if(t.length>VA().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}var i=t.map(function(t){return t.dtype}).reduce(function(t,e){return tT(t,e)}),s=t.map(function(t){return t.shape}),o=VA().getBool("WEBGL_PACK")?new zR(t[0].shape,s):new HR(t[0].shape,s);return this.compileAndRun(o,t,i)},e.prototype.subtract=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,gD);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.subtract(t,e);var n=tT(t.dtype,e.dtype);if(VA().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,gD,t.dtype);var r=new bD(gD,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)},e.prototype.pow=function(t,e){var n=VA().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xD("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new bD("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.shape,e.shape),r=tT(t.dtype,e.dtype);return this.compileAndRun(n,[t,e],r)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(VA().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,uB,t.dtype);var e=new eB(t.shape,uB);return this.compileAndRun(e,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(VA().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,cB,t.dtype);var e=new eB(t.shape,cB);return this.compileAndRun(e,[t])},e.prototype.sign=function(t){var e=new eB(t.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(e,[t])},e.prototype.isNaN=function(t){var e=new eB(t.shape,"return float(isnan(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.isInf=function(t){var e=new eB(t.shape,"return float(isinf(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.isFinite=function(t){var e=new eB(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.round=function(t){var e=new eB(t.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(e,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(VA().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,lB,t.dtype);var e=new eB(t.shape,lB);return this.compileAndRun(e,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(VA().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,hB,t.dtype);var e=new eB(t.shape,hB);return this.compileAndRun(e,[t])},e.prototype.softmax=function(t,e){var n=lI([e],t.shape),r=this.max(t,n),i=Sk(r.shape,n),s=this.subtract(t,r.reshape(i)),o=this.exp(s),a=this.sum(o,n).reshape(i);return this.realDivide(o,a)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(VA().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",t.dtype);var e=new eB(t.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(e,[t])},e.prototype.log1p=function(t){var e=new eB(t.shape,"return log(1.0 + x);");return this.compileAndRun(e,[t])},e.prototype.sqrt=function(t){var e=new eB(t.shape,"return sqrt(x);");return this.compileAndRun(e,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var e=new eB(t.shape,"return inversesqrt(x);");return this.compileAndRun(e,[t])},e.prototype.reciprocal=function(t){var e=new eB(t.shape,"return 1.0 / x;");return this.compileAndRun(e,[t])},e.prototype.relu=function(t){var e;return e=VA().getBool("WEBGL_PACK")?new gB(t.shape,fB):new eB(t.shape,iB),this.compileAndRun(e,[t])},e.prototype.relu6=function(t){var e;return e=VA().getBool("WEBGL_PACK")?new gB(t.shape,dB):new eB(t.shape,sB),this.compileAndRun(e,[t])},e.prototype.prelu=function(t,e){var n=VA().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xD(wD,t.shape,e.shape):new bD(yD,t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.elu=function(t){if(VA().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,mB,t.dtype);var e=new eB(t.shape,oB);return this.compileAndRun(e,[t])},e.prototype.eluDer=function(t,e){var n=VA().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xD("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",t.shape,e.shape):new bD("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.selu=function(t){var e=new eB(t.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(e,[t])},e.prototype.int=function(t){var e=new eB(t.shape,"return float(int(x));");return this.compileAndRun(e,[t],"int32")},e.prototype.clip=function(t,e,n){var r,i=(r=VA().getBool("WEBGL_PACK_CLIP")?new _D(t.shape):new ED(t.shape)).getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,i)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(VA().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,rB,t.dtype);var e=new eB(t.shape,rB);return this.compileAndRun(e,[t])},e.prototype.complexAbs=function(t){var e=this.texData.get(t.dataId),n=new SD(t.shape),r=[this.makeComplexComponentTensorInfo(t,e.complexTensors.real),this.makeComplexComponentTensorInfo(t,e.complexTensors.imag)];return this.compileAndRun(n,r)},e.prototype.sigmoid=function(t){var e=new eB(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[t])},e.prototype.softplus=function(t){var e=new eB(t.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(e,[t])},e.prototype.sin=function(t){var e=new eB(t.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(e,[t])},e.prototype.cos=function(t){var e=new eB(t.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(e,[t])},e.prototype.tan=function(t){var e=new eB(t.shape,"return tan(x);");return this.compileAndRun(e,[t])},e.prototype.asin=function(t){var e=new eB(t.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n");return this.compileAndRun(e,[t])},e.prototype.acos=function(t){var e=new eB(t.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n");return this.compileAndRun(e,[t])},e.prototype.atan=function(t){var e=new eB(t.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(e,[t])},e.prototype.atan2=function(t,e){var n=VA().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xD("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new bD("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.sinh=function(t){var e=new eB(t.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},e.prototype.cosh=function(t){var e=new eB(t.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},e.prototype.tanh=function(t){var e=new eB(t.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(e,[t])},e.prototype.asinh=function(t){var e=new eB(t.shape,"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(e,[t])},e.prototype.acosh=function(t){var e=new eB(t.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(e,[t])},e.prototype.atanh=function(t){var e=new eB(t.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(e,[t])},e.prototype.erf=function(t){var e=new eB(t.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(e,[t])},e.prototype.step=function(t,e){var n=new eB(t.shape,function(t){return void 0===t&&(t=0),nB+"\n    return x > 0.0 ? 1.0 : float("+t+");\n  "}(e));return this.compileAndRun(n,[t])},e.prototype.conv2dByMatMul=function(t,e,n,r,i,s){var o=t.shape,a=this.texData.get(t.dataId),u="channelsLast"===n.dataFormat,c=o[2]%2!=0&&!!a.isPacked;if((1==o[0]*o[1]*o[2]||1===n.outChannels)&&n.inChannels>1e3||!VA().getBool("WEBGL_LAZILY_UNPACK")||!VA().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!c){var l=this.reshape(t,[1,u?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],n.inChannels]),h=this.reshape(e,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:l,b:h,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:s}),n.outShape)}var p={dataId:t.dataId,shape:[1,u?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),n.inChannels],dtype:t.dtype},f=a.shape;a.shape=a.shape.slice(),a.shape[a.shape.length-2]++,ZA(ek(a.shape,p.shape),function(){return"packed reshape "+a.shape+" to "+p.shape+" isn't free"});var d=this.reshape(e,[1,n.inChannels,n.outChannels]),m=this.fusedBatchMatMul({a:p,b:d,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:s}),g=this.texData.get(m.dataId);return ZA(g.isPacked,function(){return"batchMatMul result is expected to be packed"}),a.shape=f,g.shape=n.outShape,uT.makeTensorFromDataId(m.dataId,n.outShape,m.dtype)},e.prototype.conv2dWithIm2Row=function(t,e,n,r,i,s){var o=n.outWidth,a=n.outHeight,u="channelsLast"===n.dataFormat,c=n.filterWidth*n.filterHeight*n.inChannels,l=a*o,h=[c,l],p=t.squeeze([0]),f=e.reshape([1,c,-1]),d=new bF(h,p.shape,n),m=this.compileAndRun(d,[p]).reshape([1,h[0],h[1]]),g=null!=r,v=null!=s,y=i?bB(i,!0):null,b=new CF(m.shape,[1,l,n.outChannels],!0,!1,g,y,v),w=[m,f];return r&&w.push(r),v&&w.push(s),this.compileAndRun(b,w).reshape(u?[1,a,o,n.outChannels]:[1,n.outChannels,a,o])},e.prototype.fusedConv2d=function(t){var e=t.input,n=t.filter,r=t.convInfo,i=t.bias,s=t.activation,o=t.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(e,n,r,i,s,o);if(VA().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,n,r,i,s,o);var a=null!=i,u=null!=o,c=s?bB(s,!1):null,l=new BD(r,a,c,u),h=[e,n];return i&&h.push(i),o&&h.push(o),this.compileAndRun(l,h)},e.prototype.conv2d=function(t,e,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(VA().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);var r=new BD(n);return this.compileAndRun(r,[t,e])},e.prototype.conv2dDerInput=function(t,e,n){var r=new kD(n);return this.compileAndRun(r,[t,e])},e.prototype.conv2dDerFilter=function(t,e,n){var r=new TD(n);return this.compileAndRun(r,[t,e])},e.prototype.fusedDepthwiseConv2D=function(t){var e,n=t.input,r=t.filter,i=t.convInfo,s=t.bias,o=t.activation,a=t.preluActivationWeights,u=VA().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,c=o?bB(o,u):null,l=[n,r],h=null!=s,p=null!=a;return h&&l.push(s),p&&l.push(a),u?(e=new MD(i,h,c,p),this.compileAndRun(e,l)):(e=new ND(i,h,c,p),this.compileAndRun(e,l))},e.prototype.depthwiseConv2D=function(t,e,n){var r;return VA().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new MD(n),this.compileAndRun(r,[t,e])):(r=new ND(n),this.compileAndRun(r,[t,e]))},e.prototype.depthwiseConv2DDerInput=function(t,e,n){var r=new FD(n);return this.compileAndRun(r,[t,e])},e.prototype.depthwiseConv2DDerFilter=function(t,e,n){var r=new DD(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3d=function(t,e,n){var r=new OD(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3dDerInput=function(t,e,n){var r=new RD(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3dDerFilter=function(t,e,n){var r=new PD(n);return this.compileAndRun(r,[t,e])},e.prototype.maxPool=function(t,e){var n=new RF(e,"max",!1);return this.compileAndRun(n,[t])},e.prototype.avgPool=function(t,e){var n=new RF(e,"avg",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.maxPoolBackprop=function(t,e,n,r){var i=new RF(r,"max",!0),s=this.compileAndRun(i,[e]),o=new _F(r),a=this.compileAndRun(o,[t,s],e.dtype);return s.dispose(),a},e.prototype.avgPoolBackprop=function(t,e,n){var r=new lD(n);return this.compileAndRun(r,[t],e.dtype)},e.prototype.cast=function(t,e){return _R(t,e,this)},e.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),i=0,s=0;s<t.rank;s++)s!==e&&(r[i++]=t.shape[s]);var o=new Array(t.rank).fill(0),a=t.shape.slice();a[e]=1;var u=new Array(n);for(s=0;s<u.length;s++)o[e]=s,u[s]=this.slice(t,o,a).reshape(r);return u},e.prototype.avgPool3d=function(t,e){var n=new DF(e,"avg",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,e,n){var r=new hD(n);return this.compileAndRun(r,[t],e.dtype)},e.prototype.maxPool3d=function(t,e){var n=new DF(e,"max",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,e,n,r){var i=new DF(r,"max",!0),s=this.compileAndRun(i,[e]),o=new SF(r),a=this.compileAndRun(o,[t,s],e.dtype);return s.dispose(),a},e.prototype.reshape=function(t,e){var n=this.texData.get(t.dataId);if(n.isPacked&&!ek(t.shape,e)&&(null===n.texture||!ek(n.shape,e))){var r=this.packedReshape(t,e);return uT.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return SR(t,e)},e.prototype.resizeBilinear=function(t,e,n,r){var i=VA().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new MF(t.shape,e,n,r):new NF(t.shape,e,n,r);return this.compileAndRun(i,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,e,n){var r=new OF(t,e,n);return this.compileAndRun(r,[t])},e.prototype.resizeNearestNeighbor=function(t,e,n,r){var i=new VF(t.shape,e,n,r);return this.compileAndRun(i,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,e,n){var r=new LF(t,e,n);return this.compileAndRun(r,[t])},e.prototype.multinomial=function(t,e,n,r){var i=e?t:rR(t),s=new AF(i.shape[0],i.shape[1],n),o=s.getCustomSetupFunc(r);return this.compileAndRun(s,[i],"int32",o)},e.prototype.oneHot=function(t,e,n,r){var i=new IF(t.size,e,n,r);return this.compileAndRun(i,[t])},e.prototype.diag=function(t){var e=new KD(t.size);return this.compileAndRun(e,[t])},e.prototype.nonMaxSuppression=function(t,e,n,r,i){return gk("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),DR(t.dataSync(),e.dataSync(),n,r,i)},e.prototype.cropAndResize=function(t,e,n,r,i,s){var o=new LD(t.shape,e.shape,r,i,s);return this.compileAndRun(o,[t,e,n],"float32")},e.prototype.depthToSpace=function(t,e,n){ZA(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});var r=t.shape[0],i=("NHWC"===n?t.shape[1]:t.shape[2])*e,s=("NHWC"===n?t.shape[2]:t.shape[3])*e,o=("NHWC"===n?t.shape[3]:t.shape[1])/(e*e),a=new zD("NHWC"===n?[r,i,s,o]:[r,o,i,s],e,n);return this.compileAndRun(a,[t])},e.prototype.split=function(t,e,n){return LR(t,e,n)},e.prototype.scatterND=function(t,e,n){var r=$P(0,t,n),i=r.sliceRank,s=r.numUpdates,o=r.sliceSize,a=r.strides,u=r.outputSize,c=[u/o,o],l=t.reshape([s,i]),h=e.reshape([s,o]);if(0===u)return SR(Ok([]),n);var p=Mk(0),f=new HF(s,i,l.rank,h.rank,a,c);return this.compileAndRun(f,[h,l,p]).reshape(n)},e.prototype.sparseToDense=function(t,e,n,r){var i=$P(0,t,n),s=new HF(i.numUpdates,i.sliceRank,t.rank,e.rank,i.strides,[i.outputSize,1],!1);return this.compileAndRun(s,[e,t,r]).reshape(n)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,e){var n=this.texData.get(t.dataId),r=new XD("return real * expR - imag * expI;",t.shape,e),i=new XD("return real * expI + imag * expR;",t.shape,e),s=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag)],o=this.compileAndRun(r,s),a=this.compileAndRun(i,s),u=this.complex(o,a).as2D(t.shape[0],t.shape[1]);return o.dispose(),a.dispose(),u},e.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],i=KP(t,e),s=i[0],o=i[1],a=i[2],u=i[3],c=e.reshape([o,r]),l=t.reshape([t.size/a,a]),h=new ZD(r,u,[o,a]);return this.compileAndRun(h,[l,c]).reshape(s)},e.prototype.fill=function(t,e,n){if("string"===(n=n||_I(e))){var r=fI(n,nI(t));return r.fill(e),uT.makeTensor(r,t,n,this)}var i=new QD(t,e),s=i.getCustomSetupFunc(e);return this.compileAndRun(i,[],n,s)},e.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,"string"===t.dtype?"":0,t.dtype)},e.prototype.linspace=function(t,e,n){return CR(t,e,n)},e.prototype.makeTensorInfo=function(t,e){var n=this.write(null,t,e);return this.texData.get(n).usage=null,{dataId:n,shape:t,dtype:e}},e.prototype.makeOutput=function(t,e){var n=this.makeTensorInfo(t,e).dataId;return uT.makeTensorFromDataId(n,t,e,this)},e.prototype.unpackTensor=function(t){var e=new vB(t.shape);return this.runWebGLProgram(e,[t],t.dtype)},e.prototype.packTensor=function(t){var e=new TF(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,e){var n=[QT(t.shape)].concat(YT(t.shape)),r={dtype:t.dtype,shape:n,dataId:t.dataId},i=[QT(e)].concat(YT(e)),s=new BF(i,n),o=this.runWebGLProgram(s,[r],t.dtype,null,!0);return{dataId:o.dataId,shape:e,dtype:o.dtype}},e.prototype.decode=function(t){var e,n=this.texData.get(t),r=n.isPacked,i=n.shape,s=n.dtype,o=ZT(i);return e=r?new HD(o):new UD(o),{dtype:s,shape:i,dataId:this.runWebGLProgram(e,[{shape:o,dtype:s,dataId:t}],s,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,e,n,r,i){var s=this;void 0===i&&(i=!1);var o=this.makeTensorInfo(t.outputShape,n),a=this.texData.get(o.dataId);if(t.packedOutput&&(a.isPacked=!0),t.outPackingScheme===hT.DENSE){var u=bT(t.outputShape);a.texShape=u.map(function(t){return 2*t})}if(null!=t.outTexUsage&&(a.usage=t.outTexUsage),0===nI(o.shape))return a.values=pI(o.dtype,0),o;var c=[],l=e.map(function(e){if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=s.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&nI(e.shape)<=VA().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!=!!t.packedInputs)e=n.isPacked?s.unpackTensor(e):s.packTensor(e),c.push(e),n=s.texData.get(e.dataId);else if(n.isPacked&&!ek(n.shape,e.shape)){var r=e,i=e.shape;e.shape=n.shape,e=s.packedReshape(e,i),c.push(e),n=s.texData.get(e.dataId),r.shape=i}return s.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}});this.uploadToGPU(o.dataId);var h,p={shape:o.shape,texData:a,isUniform:!1},f=function(t,e,n){var r="";return e.concat(n).forEach(function(t){r+=t.shape+"_"+(t.isUniform?"uniform":t.texData.texShape)+"_"+(null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0)}),t.constructor.name+"_"+r+"_"+t.userCode}(t,l,p),d=this.getAndSaveBinary(f,function(){return function(t,e,n,r){var i=e.userCode,s=n.map(function(t,n){var r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}}),o=s.map(function(t){return t.shapeInfo}),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=YR(s,a,i,e.packedInputs),c=t.createProgram(u),l=null,h=t.getUniformLocation(c,"NAN",!1);1===VA().getNumber("WEBGL_VERSION")&&(l=t.getUniformLocation(c,"INFINITY",!1));for(var p={},f=0;f<e.variableNames.length;f++){var d=e.variableNames[f];p[d]=t.getUniformLocation(c,d,!1),p["offset"+d]=t.getUniformLocation(c,"offset"+d,!1)}return{program:e,source:u,webGLProgram:c,uniformLocations:p,inShapeInfos:o,outShapeInfo:a,infLoc:l,nanLoc:h}}(s.gpgpu,t,l,p)}),m=null!=this.activeTimers;if(m&&(h=this.startTimer()),function(t,e,n,r,i){yF(e.inShapeInfos,n),yF([e.outShapeInfo],[r]);var s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s,o[0],o[1]):t.setOutputMatrixTexture(s,o[0],o[1]),t.setProgram(e.webGLProgram),1===VA().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach(function(n,r){var i=e.program.variableNames[r],s=e.uniformLocations[i],o=e.uniformLocations["offset"+i];if(null!=s)if(n.isUniform)if(nI(n.shape)<2)t.gl.uniform1f(s,n.uniformValues[0]);else{var a=n.uniformValues;a instanceof Float32Array||(a=new Float32Array(a)),t.gl.uniform1fv(s,a)}else null!=n.texData.slice&&null!=o&&t.gl.uniform1i(o,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,s,r)}),null!=i&&i(t,e.webGLProgram),t.executeProgram()}(this.gpgpu,d,l,p,r),c.forEach(function(t){return s.disposeData(t.dataId)}),m&&(h=this.endTimer(h),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(h)})),!VA().getBool("WEBGL_LAZILY_UNPACK")&&a.isPacked&&!1===i){var g=this.unpackTensor(o);return this.disposeData(o.dataId),g}return o},e.prototype.compileAndRun=function(t,e,n,r,i){void 0===i&&(i=!1);var s=this.runWebGLProgram(t,e,n=n||e[0].dtype,r,i);return uT.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},e.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(VA().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(e){t.gpgpu.deleteProgram(t.binaryCache[e].webGLProgram),delete t.binaryCache[e]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=dk(function(){if(!VA().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=VA().getBool("DEBUG");VA().set("DEBUG",!1);var n=t.abs(Mk(1e-8)).dataSync()[0];if(VA().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var e,n=this.texData.get(t),r=n.shape,i=n.dtype,s=n.values,o=n.usage,a=n.isPacked;if(null==n.texture){var u,c=null!=this.activeTimers;c&&(u=RI());var l=n.texShape;if(null==l&&(l=JT(r,a),n.texShape=l),null!=s){var h=ZT(r),p=void 0,f=l[1],d=l[0],m=s instanceof Uint8Array;a?(f=(e=wT(l[0],l[1]))[0],p=new $D(h,[d=e[1],f],m)):p=new GD(h,[d,f],m);var g=this.makeTensorInfo([d,f],i);this.texData.get(g.dataId).usage=m?pT.PIXELS:pT.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),f,d,s);var v=this.runWebGLProgram(p,[g],i,null,!0),y=this.texData.get(v.dataId);n.texture=y.texture,n.texShape=y.texShape,n.isPacked=y.isPacked,n.usage=y.usage,this.disposeData(g.dataId),this.texData.delete(v.dataId),n.values=null,c&&(this.uploadWaitMs+=RI()-u)}else{var b=this.acquireTexture(l,o,i,a);n.texture=b}}},e.prototype.convertAndCacheOnCPU=function(t,e){var n=this.texData.get(t),r=n.dtype;return this.releaseGPUData(t),null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}(e,r)),n.values},e.prototype.acquireTexture=function(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,e,r)},e.prototype.computeBytes=function(t,e){return t[0]*t[1]*yI(e)},e}(oR);cT()&&uT.registerBackend("webgl",function(){return new wB},2);var xB=Rk({square_:function(t){var e=bk(t,"x","square");return uT.runKernelFunc(function(t,n){return n([e]),t.square(e)},{x:e},null,"Square",{},[e],[])}}),EB="SquaredDifference",_B=Rk({squaredDifference_:function(t,e){var n,r=bk(t,"a","squaredDifference"),i=bk(e,"b","squaredDifference");return n=nT(r,i),lR((r=n[0]).shape,(i=n[1]).shape),uT.runKernelFunc(function(t,e){var n=t.squaredDifference(r,i);return e([r,i]),n},{a:r,b:i},function(t,e){var n=e[0],r=e[1],i=Mk(2);return{a:function(){return t.mul(n.sub(r).mul(i))},b:function(){return t.mul(r.sub(n).mul(i))}}},EB,{},[r,i],[])}}),SB=Rk({abs_:function(t){var e=bk(t,"x","abs");return"complex64"===e.dtype?uT.runKernelFunc(function(t){return t.complexAbs(e)},{$x:e}):uT.runKernelFunc(function(t,n){var r=t.abs(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().step(-1))}}},"Abs")}}),CB=Rk({acos_:function(t){var e=bk(t,"x","acos");return uT.runKernelFunc(function(t,n){var r=t.acos(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Mk(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),AB=Rk({acosh_:function(t){var e=bk(t,"x","acosh");return uT.runKernelFunc(function(t,n){var r=t.acosh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),IB=Rk({asin_:function(t){var e=bk(t,"x","asin");return uT.runKernelFunc(function(t,n){var r=t.asin(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Mk(1).sub(n.toFloat().square()).sqrt())}}})}}),TB=Rk({asinh_:function(t){var e=bk(t,"x","asinh");return uT.runKernelFunc(function(t,n){var r=t.asinh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Mk(1).add(n.toFloat().square()).sqrt())}}})}}),kB=Rk({atan_:function(t){var e=bk(t,"x","atan");return uT.runKernelFunc(function(t,n){var r=t.atan(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().square().add(1))}}})}}),PB=Rk({atanh_:function(t){var e=bk(t,"x","atanh");return uT.runKernelFunc(function(t,n){var r=t.atanh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(Mk(1).sub(n.toFloat().square()))}}})}}),RB=Rk({ceil_:function(t){var e=bk(t,"x","ceil");return uT.runKernelFunc(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return Gk(t)}}})}}),DB=Rk({clipByValue_:function(t,e,n){var r=bk(t,"x","clipByValue");return ZA(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."}),uT.runKernelFunc(function(t,i){var s=t.clip(r,e,n);return i([r]),s},{x:r},function(t,r){var i=r[0];return{x:function(){return t.where(i.greaterEqual(e).logicalAnd(i.lessEqual(n)),Gk(t))}}},"ClipByValue",{min:e,max:n},[r])}}),FB=Rk({cos_:function(t){var e=bk(t,"x","cos");return uT.runKernelFunc(function(t,n){var r=t.cos(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return n.toFloat().sin().neg().mul(t)}}},"Cos",{},[e])}}),BB=Rk({cosh_:function(t){var e=bk(t,"x","cosh");return uT.runKernelFunc(function(t,n){var r=t.cosh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().sinh().mulStrict(t)}}})}}),OB=Rk({erf_:function(t){var e=bk(t,"x","erf");return ZA("int32"===e.dtype||"float32"===e.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===e.dtype&&(e=e.toFloat()),uT.runKernelFunc(function(t,n){var r=t.erf(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),NB=Rk({exp_:function(t){var e=bk(t,"x","exp");return uT.runKernelFunc(function(t,n){var r=t.exp(e);return n([r]),r},{x:e},function(t,e){return{x:function(){return t.mulStrict(e[0])}}},"Exp",{},[],[!0])}}),MB=Rk({expm1_:function(t){var e=bk(t,"x","expm1");return uT.runKernelFunc(function(t,n){var r=t.expm1(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.exp())}}})}}),LB=Rk({floor_:function(t){var e=bk(t,"x","floor");return uT.runKernelFunc(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return Gk(t)}}})}}),VB=Rk({log_:function(t){var e=bk(t,"x","log");return uT.runKernelFunc(function(t,n){var r=t.log(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.div(n.toFloat())}}},"Log",{},[e])}}),jB=Rk({log1p_:function(t){var e=bk(t,"x","log1p");return uT.runKernelFunc(function(t,n){var r=t.log1p(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.add(1))}}})}}),UB=Rk({logSigmoid_:function(t){var e=bk(t,"x","logSigmoid");return uT.runKernelFunc(function(t,n){var r=t.softplus(e.neg()).neg();return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.neg().sigmoid())}}})}}),HB=Rk({neg_:function(t){var e=bk(t,"x","neg");return uT.runKernelFunc(function(t){return t.neg(e)},{x:e},function(t){return{x:function(){return t.neg()}}},"Neg",{},[e])}}),zB=Rk({reciprocal_:function(t){var e=bk(t,"x","reciprocal");return uT.runKernelFunc(function(t,n){var r=t.reciprocal(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.square().neg())}}})}}),KB=Rk({round_:function(t){var e=bk(t,"x","round");return uT.runKernelFunc(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return Gk(t)}}})}}),qB=Rk({rsqrt_:function(t){var e=bk(t,"x","rsqrt");return uT.runKernelFunc(function(t,n){var r=t.rsqrt(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.div(n.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},[e])}}),WB=Rk({sigmoid_:function(t){var e=bk(t,"x","sigmoid");return uT.runKernelFunc(function(t,n){var r=t.sigmoid(e);return n([r]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.mul(n.mul(Mk(1).sub(n)))}}},"Sigmoid")}}),GB=Rk({sign_:function(t){var e=bk(t,"x","sign");return uT.runKernelFunc(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return Gk(t)}}})}}),$B=Rk({isNaN_:function(t){var e=bk(t,"x","isNaN");return uT.runKernelFunc(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return Gk(t)}}})}}),XB=Rk({isInf_:function(t){var e=bk(t,"x","isInf");return uT.runKernelFunc(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return Gk(t)}}})}}),QB=Rk({isFinite_:function(t){var e=bk(t,"x","isFinite");return uT.runKernelFunc(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return Gk(t)}}})}}),YB=Rk({sin_:function(t){var e=bk(t,"x","sin");return uT.runKernelFunc(function(t,n){var r=t.sin(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return n.toFloat().cos().mul(t)}}},"Sin",{},[e])}}),ZB=Rk({sinh_:function(t){var e=bk(t,"x","sinh");return uT.runKernelFunc(function(t,n){var r=t.sinh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().cosh().mulStrict(t)}}})}}),JB=Rk({softplus_:function(t){var e=bk(t,"x","softplus");return uT.runKernelFunc(function(t,n){var r=t.softplus(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.sigmoid())}}})}}),tO=Rk({sqrt_:function(t){var e=bk(t,"x","sqrt");return uT.runKernelFunc(function(t,n){var r=t.sqrt(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().sqrt().mul(2))}}})}}),eO=Rk({step_:function(t,e){void 0===e&&(e=0);var n=bk(t,"x","step");return uT.runKernelFunc(function(t){return t.step(n,e)},{$x:n},function(t){return{$x:function(){return Gk(t)}}})}}),nO=Rk({tan_:function(t){var e=bk(t,"x","tan");return uT.runKernelFunc(function(t,n){var r=t.tan(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.cos().square())}}})}}),rO=Rk({tanh_:function(t){var e=bk(t,"x","tanh");return uT.runKernelFunc(function(t,n){var r=t.tanh(e);return n([r]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return Mk(1).sub(n.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function iO(t,e,n,r,i,s){var o,a,u=bk(t,"x","batchNorm"),c=bk(e,"mean","batchNorm"),l=bk(n,"variance","batchNorm");return null!=i&&(o=bk(i,"scale","batchNorm")),null!=r&&(a=bk(r,"offset","batchNorm")),ZA(2===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),ZA(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),ZA(2===l.rank||1===l.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."}),null!=o&&ZA(2===o.rank||1===o.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),null!=a&&ZA(2===a.rank||1===a.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."}),aO(u,c,l,a,o,s)}function sO(t,e,n,r,i,s){var o,a,u=bk(t,"x","batchNorm"),c=bk(e,"mean","batchNorm"),l=bk(n,"variance","batchNorm");return null!=i&&(o=bk(i,"scale","batchNorm")),null!=r&&(a=bk(r,"offset","batchNorm")),ZA(3===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),ZA(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),ZA(3===l.rank||1===l.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."}),null!=o&&ZA(3===o.rank||1===o.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),null!=a&&ZA(3===a.rank||1===a.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."}),aO(u,c,l,a,o,s)}function oO(t,e,n,r,i,s){var o,a,u=bk(t,"x","batchNorm"),c=bk(e,"mean","batchNorm"),l=bk(n,"variance","batchNorm");return null!=i&&(o=bk(i,"scale","batchNorm")),null!=r&&(a=bk(r,"offset","batchNorm")),ZA(4===u.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),ZA(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),ZA(4===l.rank||1===l.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."}),null!=o&&ZA(4===o.rank||1===o.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),null!=a&&ZA(4===a.rank||1===a.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."}),aO(u,c,l,a,o,s)}function aO(t,e,n,r,i,s){null==s&&(s=.001);var o,a,u,c=bk(t,"x","batchNorm"),l=bk(e,"mean","batchNorm"),h=bk(n,"variance","batchNorm");return null!=i&&(o=bk(i,"scale","batchNorm")),null!=r&&(a=bk(r,"offset","batchNorm")),ZA(l.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),ZA(null==a||l.rank===a.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),ZA(null==o||l.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c,uT.runKernelFunc(function(t,e){var n=t.batchNormalization(u,uO(l),uO(h),s,uO(o),uO(a));return e([c,l,h,o]),n},{x:c,mean:l,variance:h,scale:o,offset:a},function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=null==o?Mk(1):o,c=cR(r.shape,u.shape),l=[];if(1===r.rank){for(var h=0;h<u.shape.length-1;++h)l.push(u.shape[h]);l.push(1)}var p=n.sub(r),f=t.mul(a),d=qB(i.add(Mk(s))),m=d.mul(d).mul(d).mul(Mk(-.5));return{x:function(){return 1===r.rank?t.mul(NP(d.as4D(1,1,1,r.shape[0]),l)).mul(a).reshape(n.shape):t.mul(d).mul(a).reshape(n.shape)},mean:function(){var t=d.mul(Mk(-1)).mul(f);return 1===r.rank&&(t=t.sum(c)),t.reshape(r.shape)},variance:function(){var t=m.mul(p).mul(f);return 1===r.rank&&(t=t.sum(c)),t.reshape(r.shape)},scale:function(){var e=p.mul(d),n=t.mul(e);return 1===r.rank&&(n=n.sum(c)),n.reshape(r.shape)},offset:function(){var e=t;return 1===r.rank&&(e=e.sum(c)),e.reshape(r.shape)}}},"BatchNormalization",{varianceEpsilon:s},[c,l,h,o]).reshape(c.shape)}function uO(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function cO(){fk("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var lO=Rk({batchNormalization2d_:function(t,e,n,r,i,s){return void 0===r&&(r=.001),cO(),iO(t,e,n,s,i,r)}}),hO=Rk({batchNormalization3d_:function(t,e,n,r,i,s){return void 0===r&&(r=.001),cO(),sO(t,e,n,s,i,r)}}),pO=Rk({batchNormalization4d_:function(t,e,n,r,i,s){return void 0===r&&(r=.001),cO(),oO(t,e,n,s,i,r)}}),fO=Rk({batchNormalization_:function(t,e,n,r,i,s){return void 0===r&&(r=.001),cO(),aO(t,e,n,s,i,r)}}),dO=Rk({batchNorm_:aO}),mO=Rk({batchNorm2d_:iO}),gO=Rk({batchNorm3d_:sO}),vO=Rk({batchNorm4d_:oO}),yO=Rk({logicalAnd_:function(t,e){var n=bk(t,"a","logicalAnd","bool"),r=bk(e,"b","logicalAnd","bool");return lR(n.shape,r.shape),uT.runKernelFunc(function(t){return t.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),bO=Rk({logicalNot_:function(t){var e=bk(t,"x","logicalNot","bool");return uT.runKernelFunc(function(t){return t.logicalNot(e)},{$x:e})}}),wO=Rk({logicalOr_:function(t,e){var n=bk(t,"a","logicalOr","bool"),r=bk(e,"b","logicalOr","bool");return lR(n.shape,r.shape),uT.runKernelFunc(function(t){return t.logicalOr(n,r)},{$a:n,$b:r})}}),xO=Rk({logicalXor_:function(t,e){var n=bk(t,"a","logicalXor","bool"),r=bk(e,"b","logicalXor","bool");return lR(n.shape,r.shape),wO(t,e).logicalAnd(yO(t,e).logicalNot())}}),EO=Rk({where_:function(t,e,n){var r=bk(e,"a","where"),i=bk(n,"b","where"),s=bk(t,"condition","where","bool");return JA(r.shape,i.shape,"Error in where: "),1===s.rank?ZA(s.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):JA(s.shape,i.shape,"Error in where: "),uT.runKernelFunc(function(t,e){var n=t.select(s,r,i);return e([s]),n},{$condition:s,$a:r,$b:i},function(t,e){var n=e[0];return{$condition:function(){return Gk(n).toFloat()},$a:function(){return t.mul(n.cast(t.dtype))},$b:function(){return t.mul(n.logicalNot().cast(t.dtype))}}})}}),_O=function(t){return OA(this,void 0,void 0,function(){var e,n,r;return NA(this,function(i){switch(i.label){case 0:return[4,(e=bk(t,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=UR(e.shape,n),t!==e&&e.dispose(),[2,r]}})})},SO=Rk({add_:function(t,e){var n,r=bk(t,"a","add"),i=bk(e,"b","add");n=nT(r,i);var s=lR((r=n[0]).shape,(i=n[1]).shape);return uT.runKernelFunc(function(t){return t.add(r,i)},{a:r,b:i},function(t){return{a:function(){var e=t,n=cR(r.shape,s);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)},b:function(){var e=t,n=cR(i.shape,s);return n.length>0&&(e=e.sum(n)),e.reshape(i.shape)}}},"Add")}}),CO=Rk({addN_:function(t){ZA(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),ZA(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(t,e){return bk(t,"tensors"+e,"addN")}),n=e[0];return e.forEach(function(t){if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(t){if(!rI(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),uT.runKernelFunc(function(t){return t.addN(e)},e,function(t){var n={};return e.forEach(function(e,r){n[r]=function(){return t.clone()}}),n},"AddN")}}),AO=Rk({addStrict_:function(t,e){var n=bk(t,"a","addStrict"),r=bk(e,"b","addStrict");return JA(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),IO=Rk({atan2_:function(t,e){var n,r=bk(t,"a","atan2"),i=bk(e,"b","atan2");n=nT(r,i);var s=lR((r=n[0]).shape,(i=n[1]).shape);return uT.runKernelFunc(function(t,e){var n=t.atan2(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=SO(n.square(),r.square()),i=t.mul(r.div(e)),o=cR(n.shape,s);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},$b:function(){var e=SO(n.square(),r.square()),i=HB(t.mul(n.div(e))),o=cR(r.shape,s);return o.length>0&&(i=i.sum(o)),i.reshape(r.shape)}}})}}),TO=Rk({div_:function(t,e){var n,r=bk(t,"a","div"),i=bk(e,"b","div");if(n=nT(r,i),i=n[1],"int32"===(r=n[0]).dtype&&"int32"===i.dtype)return RO(r,i);var s=lR(r.shape,i.shape);return uT.runKernelFunc(function(t,e){var n=t.realDivide(r,i);return e([r,i]),n},{a:r,b:i},function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.div(r.toFloat()),i=cR(n.shape,s);return i.length>0?e.sum(i).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),i=cR(r.shape,s);i.length>0&&(e=e.sum(i).reshape(r.shape));var o=r.square();return e.div(o.toFloat()).neg()}}},"Div")}}),kO=Rk({divNoNan_:function(t,e){var n,r=bk(t,"a","div"),i=bk(e,"b","div");r=(n=nT(r,i))[0];var s=TO(r,i=n[1]),o=Gk(s),a=i.equal(o);return EO(a,o,s)}}),PO=Rk({divStrict_:function(t,e){var n=bk(t,"a","div"),r=bk(e,"b","div");return JA(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),RO=Rk({floorDiv_:function(t,e){var n,r=bk(t,"a","floorDiv"),i=bk(e,"b","floorDiv");n=nT(r,i);var s=lR((r=n[0]).shape,(i=n[1]).shape);return uT.runKernelFunc(function(t,e){var n=t.floorDiv(r,i);return e([r,i]),n},{a:r,b:i},function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.div(r.toFloat()),i=cR(n.shape,s);return i.length>0?e.sum(i).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),i=cR(r.shape,s);i.length>0&&(e=e.sum(i).reshape(r.shape));var o=r.square();return e.div(o.toFloat()).neg()}}},"FloorDiv")}}),DO=Rk({maximum_:function(t,e){var n,r=bk(t,"a","maximum"),i=bk(e,"b","maximum");return n=nT(r,i),i=n[1],"bool"===(r=n[0]).dtype&&(r=r.toInt(),i=i.toInt()),lR(r.shape,i.shape),uT.runKernelFunc(function(t,e){var n=t.maximum(r,i);return e([r,i]),n},{a:r,b:i},function(t,e){var n=e[0],r=e[1];return{a:function(){return t.mul(n.greaterEqual(r).toFloat())},b:function(){return t.mul(n.less(r).toFloat())}}},"Maximum")}}),FO=Rk({maximumStrict_:function(t,e){var n=bk(t,"a","maximumStrict"),r=bk(e,"b","maximumStrict");return JA(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),BO=Rk({minimum_:function(t,e){var n,r=bk(t,"a","minimum"),i=bk(e,"b","minimum");return n=nT(r,i),i=n[1],"bool"===(r=n[0]).dtype&&(r=r.toInt(),i=i.toInt()),lR(r.shape,i.shape),uT.runKernelFunc(function(t,e){var n=t.minimum(r,i);return e([r,i]),n},{a:r,b:i},function(t,e){var n=e[0],r=e[1];return{a:function(){return t.mul(n.lessEqual(r).toFloat())},b:function(){return t.mul(n.greater(r).toFloat())}}},"Minimum")}}),OO=Rk({minimumStrict_:function(t,e){var n=bk(t,"a","minimumStrict"),r=bk(e,"b","minimumStrict");return JA(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),NO=Rk({mod_:function(t,e){var n,r=bk(t,"a","mod"),i=bk(e,"b","mod");n=nT(r,i);var s=lR((r=n[0]).shape,(i=n[1]).shape);return uT.runKernelFunc(function(t,e){var n=t.mod(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=cR(n.shape,s);return e.length>0?t.sum(e).reshape(n.shape):t},$b:function(){var e=t.mul(n.div(r).floor().neg()),i=cR(r.shape,s);return i.length>0?e.sum(i).reshape(r.shape):e}}})}}),MO=Rk({modStrict_:function(t,e){var n=bk(t,"a","modStrict"),r=bk(e,"b","modStrict");return JA(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),LO=Rk({mul_:function(t,e){var n,r=bk(t,"a","mul"),i=bk(e,"b","mul");n=nT(r,i);var s=lR((r=n[0]).shape,(i=n[1]).shape);return uT.runKernelFunc(function(t,e){var n=t.multiply(r,i);return e([r,i]),n},{a:r,b:i},function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.mul(r.toFloat()),i=cR(n.shape,s);return i.length>0?e.sum(i).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),i=cR(r.shape,s);return i.length>0?e.sum(i).reshape(r.shape):e}}},"Mul")}}),VO=Rk({mulStrict_:function(t,e){var n=bk(t,"a","mul"),r=bk(e,"b","mul");return JA(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),jO=Rk({pow_:function(t,e){var n,r=bk(t,"base","pow"),i=bk(e,"exp","pow");n=nT(r,i);var s=lR((r=n[0]).shape,(i=n[1]).shape);return uT.runKernelFunc(function(t,e){var n=t.pow(r,i);return e([r,i,n]),n},{a:r,b:i},function(t,e){var n=e[0],r=e[1],i=e[2];return{a:function(){var e=r.toFloat(),i=t.mul(e.mul(n.pow(e.sub(Mk(1))))),o=cR(n.shape,s);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},b:function(){var e=n.greater(0),o=n.log().where(e,Gk(n)),a=t.mul(i.mul(o)),u=cR(r.shape,s);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)}}},"Pow",{},[r,i],[!0])}}),UO=Rk({powStrict_:function(t,e){return JA(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),HO=Rk({squaredDifferenceStrict_:function(t,e){var n=bk(t,"a","squaredDifferenceStrict"),r=bk(e,"b","squaredDifferenceStrict");return JA(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),zO=Rk({sub_:function(t,e){var n,r=bk(t,"a","sub"),i=bk(e,"b","sub");n=nT(r,i);var s=lR((r=n[0]).shape,(i=n[1]).shape);return uT.runKernelFunc(function(t){return t.subtract(r,i)},{a:r,b:i},function(t){return{a:function(){var e=t,n=cR(r.shape,s);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)},b:function(){var e=t,n=cR(i.shape,s);return n.length>0&&(e=e.sum(n)),e.neg().reshape(i.shape)}}},"Sub")}}),KO=Rk({subStrict_:function(t,e){var n=bk(t,"a","subStrict"),r=bk(e,"b","subStrict");return JA(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),qO=Rk({equal_:function(t,e){var n,r=bk(t,"a","equal"),i=bk(e,"b","equal");return n=nT(r,i),lR((r=n[0]).shape,(i=n[1]).shape),uT.runKernelFunc(function(t){return t.equal(r,i)},{$a:r,$b:i})}}),WO=Rk({equalStrict_:function(t,e){var n=bk(t,"a","equalStrict"),r=bk(e,"b","equalStrict");return JA(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),GO=Rk({greater_:function(t,e){var n,r=bk(t,"a","greater"),i=bk(e,"b","greater");return n=nT(r,i),lR((r=n[0]).shape,(i=n[1]).shape),uT.runKernelFunc(function(t){return t.greater(r,i)},{a:r,b:i},null,"Greater")}}),$O=Rk({greaterEqual_:function(t,e){var n,r=bk(t,"a","greaterEqual"),i=bk(e,"b","greaterEqual");return n=nT(r,i),lR((r=n[0]).shape,(i=n[1]).shape),uT.runKernelFunc(function(t,e){var n=t.greaterEqual(r,i);return e([r,i]),n},{a:r,b:i},function(t,e){var n=e[0],r=e[1];return{a:function(){return Gk(n)},b:function(){return Gk(r)}}},"GreaterEqual")}}),XO=Rk({greaterEqualStrict_:function(t,e){var n=bk(t,"a","greaterEqualStrict"),r=bk(e,"b","greaterEqualStrict");return JA(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),QO=Rk({greaterStrict_:function(t,e){var n=bk(t,"a","greaterStrict"),r=bk(e,"b","greaterStrict");return JA(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),YO=Rk({less_:function(t,e){var n,r=bk(t,"a","less"),i=bk(e,"b","less");return n=nT(r,i),lR((r=n[0]).shape,(i=n[1]).shape),uT.runKernelFunc(function(t){return t.less(r,i)},{a:r,b:i},null,"Less")}}),ZO=Rk({lessEqual_:function(t,e){var n,r=bk(t,"a","lessEqual"),i=bk(e,"b","lessEqual");return n=nT(r,i),lR((r=n[0]).shape,(i=n[1]).shape),uT.runKernelFunc(function(t,e){var n=t.lessEqual(r,i);return e([r,i]),n},{a:r,b:i},null,"LessEqual")}}),JO=Rk({lessEqualStrict_:function(t,e){var n=bk(t,"a","lessEqualStrict"),r=bk(e,"b","lessEqualStrict");return JA(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),tN=Rk({lessStrict_:function(t,e){var n=bk(t,"a","lessStrict"),r=bk(e,"b","lessStrict");return JA(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),eN=Rk({notEqual_:function(t,e){var n,r=bk(t,"a","notEqual"),i=bk(e,"b","notEqual");return n=nT(r,i),lR((r=n[0]).shape,(i=n[1]).shape),uT.runKernelFunc(function(t){return t.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),nN=Rk({notEqualStrict_:function(t,e){var n=bk(t,"a","notEqualStrict"),r=bk(e,"b","notEqualStrict");return JA(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function rN(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function iN(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var sN=Rk({gather_:function(t,e,n){void 0===n&&(n=0);var r=bk(t,"x","gather"),i=bk(e,"indices","gather","int32");n=lI(n,r.shape)[0];var s=function(t,e,n){for(var r=t.shape[n],i=[],s=1,o=1,a=0;a<n;a++)i.push(t.shape[a]),s*=t.shape[a];for(a=0;a<e.rank;a++)i.push(e.shape[a]);for(a=n+1;a<t.rank;a++)i.push(t.shape[a]),o*=t.shape[a];return{batchSize:s,sliceSize:o,dimSize:r,outputShape:i}}(r,i,n);return uT.runKernelFunc(function(t,e){var s=t.gather(r,i.flatten(),n);return e([i]),s},{x:r,indices:i},function(t,e){var i=e[0];return{x:function(){var e=r.shape,s=i.size,o=e.slice(0,n),a=o.length,u=e.slice(n,e.length).slice(1),c=u.length,l=rN(0,a),h=rN(a+1,a+1+c),p=iN([o,[s],u]),f=t.reshape(p),d=i.reshape([s]),m=iN([[a],l,h]),g=f.transpose(m),v=oN(g,d,r.shape[n]),y=Ik(m);return v.transpose(y)},indices:function(){return i}}},"Gather",{axis:n}).reshape(s.outputShape)}}),oN=Rk({unsortedSegmentSum_:function(t,e,n){var r=bk(t,"x","unsortedSegmentSum"),i=bk(e,"segmentIds","unsortedSegmentSum","int32");return ZA(iI(n),function(){return"numSegments must be of dtype int"}),uT.runKernelFunc(function(t,e){var s=t.unsortedSegmentSum(r,i,n);return e([i]),s},{$x:r},function(t,e){var n=e[0];return{$x:function(){return function(t,e){for(var n=DO(e,Gk(e)),r=sN(t,n),i=$O(e,Mk(0,"int32")),s=r.rank-i.rank,o=0;o<s;++o)i=bP(i,o+1);i=yO(i,Hk(r.shape,"bool"));var a=Gk(r);return EO(i,r,a)}(t,n)}}})}});function aN(t,e,n,r,i,s,o){void 0===s&&(s="NHWC"),ZA(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var a=t,u=e,c=!1;3===e.rank&&(c=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),a=[1,t[0],t[1],t[2]]),ZA(4===a.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),ZA(4===u.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),ZA(4===n.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var l="NHWC"===s?a[3]:a[1],h="NHWC"===s?u.shape[3]:u.shape[1];ZA(l===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."}),ZA(h===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+n.shape[3]+"."}),null!=o&&ZA(iI(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var p=ER(s),f=fR(a,n.shape,r,1,i,o,!1,p),d=uT.runKernelFunc(function(t,e){var r=t.conv2dDerInput(u,n,f);return e([n,u]),r},{dy4D:u,filter:n},function(t,e){var n=e[0],a=e[1];return{dy4D:function(){return hN(t,n,r,i,s,1,o)},filter:function(){return fN(t,a,n.shape,r,i,s,o)}}});return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function uN(t){var e=function(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}(t);return 1===e[0]&&1===e[1]&&1===e[2]}function cN(t,e,n,r,i){ZA(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,o=e,a=!1;4===e.rank&&(a=!0,o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),s=[1,t[0],t[1],t[2],t[3]]);var u=s[4],c=o.shape[4];ZA(5===s.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+s.length+"."}),ZA(5===o.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),ZA(5===n.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),ZA(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),ZA(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."});var l=dR(s,n.shape,r,1,i),h=uT.runKernelFunc(function(t){return t.conv3dDerInput(o,n,l)},{dy5D:o});return a?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var lN=Rk({conv1d_:function(t,e,n,r,i,s,o){void 0===i&&(i="NWC"),void 0===s&&(s=1);var a=bk(t,"x","conv1d"),u=bk(e,"filter","conv1d"),c=a,l=!1;2===a.rank&&(l=!0,c=a.as3D(1,a.shape[0],a.shape[1])),ZA(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),ZA(3===u.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),null!=o&&ZA(iI(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),ZA(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),ZA(xR(n,s),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+s+"'"}),ZA("NWC"===i,function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var h=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),p=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),f=hN(p,h,[1,n],r,"NHWC",[1,s],o);return l?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),hN=Rk({conv2d_:function(t,e,n,r,i,s,o){void 0===i&&(i="NHWC"),void 0===s&&(s=[1,1]);var a=bk(t,"x","conv2d"),u=bk(e,"filter","conv2d"),c=a,l=!1;3===a.rank&&(l=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),ZA(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),ZA(4===u.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),null!=o&&ZA(iI(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var h="NHWC"===i?c.shape[3]:c.shape[1];ZA(h===u.shape[2],function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+u.shape[2]+"."}),ZA(xR(n,s),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"});var p=ER(i),f=fR(c.shape,u.shape,n,s,r,o,!1,p),d=uT.runKernelFunc(function(t,e){var n=t.conv2d(c,u,f);return e([u,c]),n},{x:c,filter:u},function(t,e){var o=e[0],a=e[1];return ZA(wR(s),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"}),{x:function(){return dN(a.shape,t,o,n,r,i)},filter:function(){return fN(a,t,o.shape,n,r,i)}}},"Conv2D",f,[u,c]);return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),pN=Rk({conv3d_:function(t,e,n,r,i,s){void 0===i&&(i="NDHWC"),void 0===s&&(s=[1,1,1]);var o=bk(t,"x","conv3d"),a=bk(e,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),ZA(5===u.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),ZA(5===a.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."}),ZA(u.shape[4]===a.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+a.shape[3]+"."}),ZA(function(t,e){return uN(t)||uN(e)}(n,s),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"}),ZA("NDHWC"===i,function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var l=dR(u.shape,a.shape,n,s,r),h=uT.runKernelFunc(function(t,e){var n=t.conv3d(u,a,l);return e([u,a]),n},{x:u,$filter:a},function(t,e){ZA(uN(s),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"});var i=e[0],o=e[1];return{x:function(){return cN(i.shape,t,o,n,r)},$filter:function(){return function(t,e,n,r,i){var s=t;4===t.rank&&(s=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]));var o=e;4===o.rank&&(o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3])),ZA(5===s.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+s.shape+"."}),ZA(5===o.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."}),ZA(5===n.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),ZA(s.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+s.shape[4]+") must match input depth in filter ("+n[3]+"."}),ZA(o.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+o.shape[4]+") must match output depth for filter ("+n[4]+")."});var a=dR(s.shape,n,r,1,i);return uT.runKernelFunc(function(t){return t.conv3dDerFilter(s,o,a)},{x5D:s,dy5D:o})}(i,t,o.shape,n,r)}}});return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),fN=Rk({conv2dDerFilter_:function(t,e,n,r,i,s,o){void 0===s&&(s="NHWC");var a=t;3===t.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;3===u.rank&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),ZA(4===a.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),ZA(4===u.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),ZA(4===n.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var c="NHWC"===s?a.shape[3]:a.shape[1],l="NHWC"===s?u.shape[3]:u.shape[1];ZA(c===n[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."}),ZA(l===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."}),null!=o&&ZA(iI(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var h=ER(s),p=fR(a.shape,n,r,1,i,o,!1,h);return uT.runKernelFunc(function(t){return t.conv2dDerFilter(a,u,p)},{x4D:a,dy4D:u})}}),dN=Rk({conv2dDerInput_:aN}),mN=Rk({depthwiseConv2d_:function(t,e,n,r,i,s,o){void 0===i&&(i="NHWC"),void 0===s&&(s=[1,1]);var a=bk(t,"x","depthwiseConv2d"),u=bk(e,"filter","depthwiseConv2d"),c=a,l=!1;3===a.rank&&(l=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),ZA(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),ZA(4===u.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),ZA(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),null==s&&(s=[1,1]),ZA(xR(n,s),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"}),null!=o&&ZA(iI(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var h=fR(c.shape,u.shape,n,s,r,o,!0),p=uT.runKernelFunc(function(t,e){var n=t.depthwiseConv2D(c,u,h);return e([c,u]),n},{x:c,filter:u},function(t,e){ZA(wR(s),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+s+"'"});var n=e[0],r=e[1];return{x:function(){return gN(n.shape,t,r,h)},filter:function(){return vN(n,t,r.shape,h)}}},"DepthwiseConv2dNative",h,[c,u]);return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),gN=Rk({depthwiseConv2dDerInput_:function(t,e,n,r){var i=e,s=!1;3===e.rank&&(s=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=uT.runKernelFunc(function(t){return t.depthwiseConv2DDerInput(i,n,r)},{dy4D:i});return s?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),vN=Rk({depthwiseConv2dDerFilter_:function(t,e,n,r){var i=t;3===t.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e;return 3===s.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),uT.runKernelFunc(function(t){return t.depthwiseConv2DDerFilter(i,s,r)},{x4D:i,dy4D:s})}}),yN=Rk({separableConv2d_:function(t,e,n,r,i,s,o){void 0===s&&(s=[1,1]),void 0===o&&(o="NHWC");var a=bk(t,"x","separableConv2d"),u=bk(e,"depthwiseFilter","separableConv2d"),c=bk(n,"pointwiseFilter","separableConv2d"),l=a,h=!1;if(3===a.rank&&(h=!0,l=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ZA(4===l.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."}),ZA(4===u.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),ZA(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),ZA(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),ZA(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var p=u.shape[2],f=u.shape[3];ZA(c.shape[2]===p*f,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*f+", but got "+c.shape[2]+"."});var d=mN(l,u,r,i,o,s),m=hN(d,c,1,"valid",o);return h?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),bN=Rk({conv2dTranspose_:function(t,e,n,r,i,s){return aN(n,bk(t,"x","conv2dTranspose"),bk(e,"filter","conv2dTranspose"),r,i,"NHWC",s)}}),wN=Rk({conv3dTranspose_:function(t,e,n,r,i){return cN(n,bk(t,"x","conv3dTranspose"),bk(e,"filter","conv3dTranspose"),r,i)}}),xN=Rk({matMul_:function(t,e,n,r){var i;void 0===n&&(n=!1),void 0===r&&(r=!1);var s=bk(t,"a","matMul"),o=bk(e,"b","matMul");i=nT(s,o),s=i[0],o=i[1];var a=n?s.shape[s.rank-2]:s.shape[s.rank-1],u=r?o.shape[o.rank-1]:o.shape[o.rank-2],c=n?s.shape[s.rank-1]:s.shape[s.rank-2],l=r?o.shape[o.rank-2]:o.shape[o.rank-1],h=s.shape.slice(0,-2),p=o.shape.slice(0,-2),f=nI(h),d=nI(p);ZA(s.rank>=2&&o.rank>=2&&s.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+s.rank+" and "+o.rank+"."}),ZA(rI(h,p),function(){return"Error in matMul: outer dimensions ("+h+") and ("+p+") of Tensors with shapes "+s.shape+" and "+o.shape+" must match."}),ZA(a===u,function(){return"Error in matMul: inner shapes ("+a+") and ("+u+") of Tensors with shapes "+s.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var m=s.shape.slice(0,-2).concat([c,l]),g=n?s.as3D(f,a,c):s.as3D(f,c,a),v=r?o.as3D(d,l,u):o.as3D(d,u,l);return uT.runKernelFunc(function(t,e){var i=t.batchMatMul(g,v,n,r);return e([g,v]),i},{a:g,b:v},function(t,e){var i=e[0],s=e[1];return n||r?!n&&r?{a:function(){return t.matMul(s,!1,!1)},b:function(){return t.matMul(i,!0,!1)}}:n&&!r?{a:function(){return s.matMul(t,!1,!0)},b:function(){return i.matMul(t,!1,!1)}}:{a:function(){return s.matMul(t,!0,!0)},b:function(){return t.matMul(i,!0,!0)}}:{a:function(){return t.matMul(s,!1,!0)},b:function(){return i.matMul(t,!0,!1)}}},"BatchMatMul",{transposeA:n,transposeB:r}).reshape(m)}}),EN=Rk({dot_:function(t,e){var n=bk(t,"t1","dot"),r=bk(e,"t2","dot");ZA(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var i=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];return ZA(i===s,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+s+"."}),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),_N=Rk({outerProduct_:function(t,e){var n=bk(t,"v1","outerProduct"),r=bk(e,"v2","outerProduct");return ZA(1===n.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),SN=Rk({reverse_:function(t,e){var n=bk(t,"x","reverse");if(0===n.rank)return n.clone();var r=lI(e,n.shape);return uT.runKernelFunc(function(t){return t.reverse(n,r)},{$x:n},function(t){return{$x:function(){return t.reverse(r)}}}).reshapeAs(n)}}),CN=Rk({reverse1d_:function(t){var e=bk(t,"x","reverse");return ZA(1===e.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),SN(e,0)}}),AN=Rk({reverse2d_:function(t,e){var n=bk(t,"x","reverse");return ZA(2===n.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),SN(n,e)}}),IN=Rk({reverse3d_:function(t,e){var n=bk(t,"x","reverse");return ZA(3===n.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),SN(n,e)}}),TN=Rk({reverse4d_:function(t,e){var n=bk(t,"x","reverse");return ZA(4===n.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),SN(n,e)}});function kN(t,e,n,r,i,s){var o=bk(t,"x","maxPool"),a=o,u=!1;3===o.rank&&(u=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),null==r&&(r=[1,1]),ZA(4===a.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."}),ZA(xR(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),null!=s&&ZA(iI(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var c=hR(a.shape,e,n,r,i,s);if(1===c.filterWidth&&1===c.filterHeight&&rI(c.inShape,c.outShape))return o.clone();var l=uT.runKernelFunc(function(t,e){var n=t.maxPool(a,c);return e([a,n]),n},{x:a},function(t,s){var o=s[0],a=s[1];return{x:function(){return function(t,e,n,r,i,s,o,a){var u=bk(t,"dy","maxPoolBackprop"),c=bk(e,"input","maxPoolBackprop"),l=bk(n,"output","maxPoolBackprop");ZA(c.rank===u.rank,function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+u.rank+")"}),null==s&&(s=[1,1]),ZA(xR(i,s),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+s+"'"}),ZA(4===u.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."}),ZA(4===c.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."});var h=hR(c.shape,r,i,s,o,void 0);return uT.runKernelFunc(function(t){return t.maxPoolBackprop(u,c,l,h)},{$dy:u,$input:c})}(t,o,a,e,n,r,i)}}},"MaxPool",c,[a]);return u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}function PN(t,e,n,r,i,s){var o=bk(t,"x","avgPool","float32");null==r&&(r=[1,1]),ZA(xR(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var a=o,u=!1;3===o.rank&&(u=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ZA(4===a.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."}),null!=s&&ZA(iI(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var c=hR(a.shape,e,n,r,i,s);if(1===c.filterWidth&&1===c.filterHeight&&rI(c.inShape,c.outShape))return o.clone();var l=uT.runKernelFunc(function(t){return t.avgPool(a,c)},{x:a},function(t){return{x:function(){return function(t,e,n,r,i,s){var o=bk(t,"dy","avgPoolBackprop"),a=bk(e,"input","avgPoolBackprop");ZA(a.rank===o.rank,function(){return"Rank of input ("+a.rank+") does not match rank of dy ("+o.rank+")"}),null==i&&(i=[1,1]),ZA(xR(r,i),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"});var u=a,c=o,l=!1;3===a.rank&&(l=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]),c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ZA(4===c.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."}),ZA(4===u.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."});var h=hR(u.shape,n,r,i,s),p=uT.runKernelFunc(function(t){return t.avgPoolBackprop(c,u,h)},{dy4D:c,input4D:u});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}(t,a,e,n,r,i)}}},"AvgPool",c);return l=l.cast(o.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var RN=Rk({maxPool_:function(t,e,n,r,i){return kN(t,e,n,1,r,i)}}),DN=Rk({avgPool_:function(t,e,n,r,i){return PN(t,e,n,1,r,i)}}),FN=Rk({pool_:function(t,e,n,r,i,s){null==i&&(i=[1,1]),null==s&&(s=1),0===r&&(r="valid");var o=bk(t,"x","maxPool"),a=o,u=!1;3===o.rank&&(u=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ZA(xR(s,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+i+"'"});var c,l=hR(a.shape,e,s,i,r),h=[l.dilationHeight,l.dilationWidth];c="same"===r?function(t,e){var n=t.map(function(t,n){return t+(t-1)*(e[n]-1)}).map(function(t){return t-1}),r=n.map(function(t){return Math.floor(t/2)}),i=n.map(function(t,e){return t-r[e]});return n.map(function(t,e){return[r[e],i[e]]})}([l.filterHeight,l.filterWidth],h):[[0,0],[0,0]];var p=1===h[0]&&1===h[1],f=function(t,e,n){var r=n.map(function(t){return t[0]}),i=n.map(function(t){return t[1]}),s=t.concat(r,i),o=e.map(function(t,e){return(t-s[e]%t)%t}),a=i.map(function(t,e){return t+o[e]});return[e.map(function(t,e){return[r[e],a[e]]}),e.map(function(t,e){return[0,o[e]]})]}([l.inHeight,l.inWidth],h,c),d=f[1],m=p?r:"valid",g=p?a:FP(a,h,f[0]),v=("avg"===n?function(){return PN(g,e,s,1,m)}:function(){return kN(g,e,s,1,m)})(),y=p?v:fP(v,h,d);return u?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),BN=Rk({maxPool3d_:function(t,e,n,r,i,s,o){void 0===s&&(s="NDHWC");var a=bk(t,"x","maxPool3d"),u=a,c=!1;4===a.rank&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),null==o&&(o=[1,1,1]),ZA(5===u.rank,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),ZA("NDHWC"===s,function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+s}),ZA(xR(n,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),null!=i&&ZA(iI(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var l=pR(u.shape,e,n,o,r,i,s),h=uT.runKernelFunc(function(t,e){var n=t.maxPool3d(u,l);return e([u,n]),n},{x:u},function(t,s){var a=s[0],u=s[1];return{x:function(){return function(t,e,n,r,i,s,o,a){var u=bk(t,"dy","maxPool3dBackprop"),c=bk(e,"input","maxPool3dBackprop"),l=bk(n,"output","maxPool3dBackprop"),h=u,p=c,f=l,d=!1;4===c.rank&&(d=!0,h=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),p=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),f=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),ZA(5===h.rank,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+h.rank+"."}),ZA(5===p.rank,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+p.rank+"."}),ZA(5===f.rank,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+f.rank+"."}),null==s&&(s=[1,1,1]),ZA(xR(i,s),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+s+"'"}),null!=a&&ZA(iI(o),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var m=pR(p.shape,r,i,s,o,a),g=uT.runKernelFunc(function(t){return t.maxPool3dBackprop(h,p,f,m)},{dy5D:h,input5D:p});return d?g.as4D(g.shape[1],g.shape[2],g.shape[3],g.shape[4]):g}(t,a,u,e,n,o,r,i)}}});return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),ON=Rk({avgPool3d_:function(t,e,n,r,i,s,o){void 0===s&&(s="NDHWC");var a=bk(t,"x","avgPool3d","float32"),u=a,c=!1;4===a.rank&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),null==o&&(o=[1,1,1]),ZA(5===u.rank,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),ZA("NDHWC"===s,function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+s}),ZA(xR(n,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),null!=i&&ZA(iI(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var l=pR(u.shape,e,n,o,r,i,s),h=uT.runKernelFunc(function(t){return t.avgPool3d(u,l)},{x:u},function(t){return{x:function(){return function(t,e,n,r,i,s,o){var a=bk(t,"dy","avgPool3dBackprop"),u=bk(e,"input","avgPool3dBackprop"),c=a,l=u,h=!1;4===u.rank&&(h=!0,c=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]),l=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),ZA(5===c.rank,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."}),ZA(5===l.rank,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."}),null==i&&(i=[1,1,1]),ZA(xR(r,i),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),null!=o&&ZA(iI(s),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var p=pR(l.shape,n,r,i,s,o),f=uT.runKernelFunc(function(t){return t.avgPool3dBackprop(c,l,p)},{dy5D:c,input5D:l});return h?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}(t,u,e,n,o,r,i)}}});return h=h.cast(u.dtype),c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),NN=Rk({slice_:function(t,e,n){var r,i,s=bk(t,"x","slice");if(0===s.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof e?[e].concat(new Array(s.rank-1).fill(0)):e.length<s.rank?e.concat(new Array(s.rank-e.length).fill(0)):e.slice()).forEach(function(t){ZA(-1!==t,function(){return"slice() does not support negative begin indexing."})}),i=(i=null==n?new Array(s.rank).fill(-1):"number"==typeof n?[n].concat(new Array(s.rank-1).fill(-1)):n.length<s.rank?n.concat(new Array(s.rank-n.length).fill(-1)):n).map(function(t,e){return t>=0?t:(ZA(-1===t,function(){return"Negative size values should be exactly -1 but got "+t+" for the slice() size at index "+e+"."}),s.shape[e]-r[e])}),XP(s,r,i);var o=s.shape;return uT.runKernelFunc(function(t){return t.slice(s,r,i)},{x:s},function(t){for(var e=[],n=0;n<t.rank;n++)e.push([r[n],o[n]-r[n]-i[n]]);return{x:function(){return t.pad(e)}}},"Slice",{begin:r,size:i})}}),MN=Rk({slice1d_:function(t,e,n){var r=bk(t,"x","slice1d");return ZA(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),NN(r,[e],[n])}}),LN=Rk({slice2d_:function(t,e,n){var r=bk(t,"x","slice2d");return ZA(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),NN(r,e,n)}}),VN=Rk({slice3d_:function(t,e,n){var r=bk(t,"x","slice3d");return ZA(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),NN(r,e,n)}}),jN=Rk({slice4d_:function(t,e,n){var r=bk(t,"x","slice4d");return ZA(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),NN(r,e,n)}});function UN(t,e,n,r,i){return e.rank<n.rank&&(e=e.reshape(Sk(e.shape,r))),t.rank<n.rank&&(t=t.reshape(Sk(t.shape,r))),{x:function(){var r=t.mul(n.equal(e).cast(t.dtype));return null==i?r:r.transpose(i)}}}var HN=Rk({all_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=bk(t,"x","all","bool"),i=lI(e,r.shape),s=i,o=Ak(s,r.rank);null!=o&&(r=r.transpose(o),s=Tk(s.length,r.rank));var a=uT.runKernelFunc(function(t){return t.all(r,s)},{$x:r});if(n){var u=Sk(a.shape,i);return a.reshape(u)}return a}}),zN=Rk({any_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=bk(t,"x","any","bool"),i=lI(e,r.shape),s=i,o=Ak(s,r.rank);null!=o&&(r=r.transpose(o),s=Tk(s.length,r.rank));var a=uT.runKernelFunc(function(t){return t.any(r,s)},{$x:r});if(n){var u=Sk(a.shape,i);return a.reshape(u)}return a}}),KN=Rk({argMax_:function(t,e){void 0===e&&(e=0);var n=bk(t,"x","argMax");null==e&&(e=0);var r=lI(e,n.shape),i=Ak(r,n.rank);return null!=i&&(n=n.transpose(i),r=Tk(r.length,n.rank)),uT.runKernelFunc(function(t,e){var i=t.argMax(n,r[0]);return e([n]),i},{x:n},function(t,e){var n=e[0];return{x:function(){return Gk(n)}}},"ArgMax",{axis:r[0]},[n])}}),qN=Rk({argMin_:function(t,e){void 0===e&&(e=0);var n=bk(t,"x","argMin");null==e&&(e=0);var r=lI(e,n.shape),i=Ak(r,n.rank);return null!=i&&(n=n.transpose(i),r=Tk(r.length,n.rank)),uT.runKernelFunc(function(t,e){var i=t.argMin(n,r[0]);return e([n]),i},{$x:n},function(t,e){var n=e[0];return{$x:function(){return Gk(n)}}})}}),WN=Rk({logSumExp_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=bk(t,"x","logSumExp"),i=lI(e,r.shape),s=r.max(i,!0),o=r.sub(s).exp().sum(i).log(),a=s.reshape(o.shape).add(o);if(n){var u=Sk(a.shape,i);return a.reshape(u)}return a}}),GN=Rk({max_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=bk(t,"x","max"),i=r,s=lI(e,r.shape),o=s,a=Ak(o,r.rank);null!=a&&(r=r.transpose(a),o=Tk(o.length,r.rank));var u=uT.runKernelFunc(function(t,e){var n=t.max(r,o);return e([i,n]),n},{x:r},function(t,e){return UN(t,e[1],e[0],s,a)},"Max",{axes:o},[r],[!0]);if(n){var c=Sk(u.shape,s);u=u.reshape(c)}return u}}),$N=Rk({mean_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=bk(t,"x","mean"),i=lI(e,r.shape),s=nI(_k(r.shape,i)[1]);return nR(function(t){var r=Mk(s);return{value:(r.dtype===t.dtype?t:t.cast(r.dtype)).div(r).sum(e,n),gradFunc:function(e){var n=t.shape.slice();return i.forEach(function(t){n[t]=1}),e.reshape(n).mul(Hk(t.shape,"float32")).div(s)}}})(r)}}),XN=Rk({min_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=bk(t,"x","min"),i=r,s=lI(e,r.shape),o=s,a=Ak(o,r.rank);null!=a&&(r=r.transpose(a),o=Tk(o.length,r.rank));var u=uT.runKernelFunc(function(t,e){var n=t.min(r,o);return e([i,n]),n},{x:r},function(t,e){return UN(t,e[1],e[0],s,a)},"Min",{axes:o},[r],[!0]);if(n){var c=Sk(u.shape,s);u=u.reshape(c)}return u}}),QN=Rk({moments_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=lI(e,(t=bk(t,"x","moments")).shape),i=t.mean(r,n),s=i.shape;n||(s=Sk(i.shape,r));var o=t.toFloat().sub(i.reshape(s)).square();return{mean:i,variance:o.mean(r,n)}}}),YN=Rk({sum_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=bk(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=lI(e,r.shape);return nR(function(t){var e=Ak(i,t.rank),r=i,s=t;null!=e&&(s=t.transpose(e),r=Tk(r.length,t.rank));var o=function(e){var n=t.shape.slice();return i.forEach(function(t){n[t]=1}),e.reshape(n).mul(Hk(t.shape,"float32"))},a=uT.runKernelFunc(function(t){return t.sum(s,r)},{x:s},function(t){return{x:function(){return o(t)}}},"Sum",{axes:r});if(n){var u=Sk(a.shape,i);a=a.reshape(u)}return{value:a,gradFunc:o}})(r)}}),ZN=Rk({prod_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=bk(t,"x","prod");"bool"===r.dtype&&(r=r.toInt());var i=lI(e,r.shape),s=Ak(i,r.rank),o=i,a=r;null!=s&&(a=r.transpose(s),o=Tk(o.length,r.rank));var u=uT.runKernelFunc(function(t){return t.prod(a,o)},{permutedX:a});if(n){var c=Sk(u.shape,i);u=u.reshape(c)}return u}}),JN=Rk({elu_:function(t){var e=bk(t,"x","elu");return uT.runKernelFunc(function(t,n){var r=t.elu(e);return n([r]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return uT.runKernelFunc(function(e){return e.eluDer(t,n)},{dy:t,y:n})}}})}}),tM=Rk({leakyRelu_:function(t,e){void 0===e&&(e=.2);var n=bk(t,"x","leakyRelu");return DO(Mk(e).mul(n),n)}}),eM=Rk({prelu_:function(t,e){var n=bk(t,"x","prelu"),r=bk(e,"alpha","prelu");return uT.runKernelFunc(function(t,e){var i=t.prelu(n,r);return e([n,r]),i},{x:n,alpha:r},function(t,e){var n=e[0],r=e[1],i=n.greater(0);return{x:function(){return EO(i,t,t.mul(r))},alpha:function(){var e=EO(i,Gk(t),t.mul(n)),s=cR(r.shape,t.shape);return s.length>0&&(e=e.sum(s)),e.reshape(r.shape)}}},"Prelu")}}),nM=Rk({relu_:function(t){var e=bk(t,"x","relu");return"bool"===e.dtype?e.toInt():uT.runKernelFunc(function(t,n){var r=t.relu(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.mulStrict(n.step().toFloat())}}},"Relu")}}),rM=Rk({relu6_:function(t){var e=bk(t,"x","relu6");return"bool"===e.dtype?e.toInt():uT.runKernelFunc(function(t,n){var r=t.relu6(e);return n([e]),r},{x:e},function(t,e){var n=e[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return t.mulStrict(r.toFloat())}}},"Relu6")}}),iM=Rk({selu_:function(t){var e=bk(t,"x","selu");return uT.runKernelFunc(function(t,n){var r=t.selu(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){var e=n.greater(Mk(0)),r=Mk(1.7580993408473768),i=Mk(1.0507009873554805),s=t.mul(i),o=t.mul(r).mul(n.toFloat().exp());return EO(e,s,o)}}})}}),sM=Rk({transpose_:function(t,e){var n=bk(t,"x","transpose");return null==e&&(e=n.shape.map(function(t,e){return e}).reverse()),ZA(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(t){ZA(t>=0&&t<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1?n.clone():uT.runKernelFunc(function(t){return t.transpose(n,e)},{x:n},function(t){var n=Ik(e);return{x:function(){return t.transpose(n)}}},"Transpose",{perm:e})}}),oM=Rk({localResponseNormalization_:function(t,e,n,r,i){void 0===e&&(e=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5);var s=bk(t,"x","localResponseNormalization");ZA(4===s.rank||3===s.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+s.rank+"."}),ZA(iI(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var o=s,a=!1;3===s.rank&&(a=!0,o=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]));var u=uT.runKernelFunc(function(t,s){var a=t.localResponseNormalization4D(o,e,n,r,i);return s([o,a]),a},{x4D:o},function(t,s){var o=s[0],a=s[1];return{x4D:function(){return uT.runKernelFunc(function(s){return s.LRNGrad(t,o,a,e,n,r,i)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),aM=Rk({norm_:function(t,e,n,r){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var i=function t(e,n,r){if(void 0===r&&(r=null),0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(Mk(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t=bk(t,"x","norm"),e,n),s=i.shape;if(r){var o=lI(n,t.shape);s=Sk(i.shape,o)}return i.reshape(s)}}),uM=Rk({basicLSTMCell_:function(t,e,n,r,i,s){var o=bk(t,"forgetBias","basicLSTMCell"),a=bk(e,"lstmKernel","basicLSTMCell"),u=bk(n,"lstmBias","basicLSTMCell"),c=bk(r,"data","basicLSTMCell"),l=bk(i,"c","basicLSTMCell"),h=bk(s,"h","basicLSTMCell"),p=c.concat(h,1).matMul(a).add(u),f=p.shape[1]/4,d=[p.shape[0],f],m=p.slice([0,0],d),g=p.slice([0,f],d),v=p.slice([0,2*f],d),y=p.slice([0,3*f],d),b=m.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(o.add(v).sigmoid())),w=b.tanh().mulStrict(y.sigmoid());return[b,w]}}),cM=Rk({multiRNNCell_:function(t,e,n,r){for(var i=bk(e,"data","multiRNNCell"),s=wk(n,"c","multiRNNCell"),o=wk(r,"h","multiRNNCell"),a=i,u=[],c=0;c<t.length;c++){var l=t[c](a,s[c],o[c]);u.push(l[0]),u.push(l[1]),a=l[1]}var h=[],p=[];for(c=0;c<u.length;c+=2)h.push(u[c]),p.push(u[c+1]);return[h,p]}}),lM=Rk({movingAverage_:function(t,e,n,r,i){void 0===i&&(i=!0);var s=bk(t,"v","movingAverage"),o=bk(e,"x","movingAverage"),a=bk(n,"decay","movingAverage");rT(s,o),ZA(rI(s.shape,o.shape),function(){return"Shape mismatch in v and x"});var u=Mk(1),c=u.sub(a),l=o.sub(s).mul(c);if(i){ZA(null!=r,function(){return"When using zeroDebias: true, step is required."});var h=bk(r,"step","movingAverage");l=l.div(u.sub(jO(a,h)))}return s.add(l)}}),hM=Rk({stridedSlice_:function(t,e,n,r,i,s,o,a,u){if(void 0===i&&(i=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),null==r&&(r=new Array(e.length)),0!==o)throw new Error("ellipsis mask is not yet supported");var c=bk(t,"x","stridedSlice"),l=QP(a),h=c.shape.slice();l.forEach(function(t){e[t]=0,n[t]=1,h.splice(t,0,1)}),c=c.reshape(h);for(var p=0;p<c.rank;p++)e[p]=ZP(i,e,r,c.shape,p),n[p]=JP(s,n,r,c.shape,p),r[p]=r[p]||1;var f=QP(u);f.forEach(function(t){n[t]=e[t]+1,r[t]=1});var d=YP(e,n,r),m=d.filter(function(t,e){return-1===f.indexOf(e)});return r.every(function(t){return 1===t})?NN(c,e,d).reshape(m):uT.runKernelFunc(function(t){return t.stridedSlice(c,e,n,r)},{$x:c}).reshape(m)}}),pM=Rk({topk_:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!0);var r=bk(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var s=uT.runKernelFunc(function(t){return t.topk(r,e,n)},{$x:r});return{values:s[0],indices:s[1]}}}),fM=Rk({scatterND_:function(t,e,n){var r=bk(t,"indices","scatterND","int32"),i=bk(e,"updates","scatterND");return GP(i,r,n),uT.runKernelFunc(function(t){return t.scatterND(r,i,n)},{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),dM=Rk({fft_:function(t){ZA("complex64"===t.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.as2D(t.size/e,e);return uT.runKernelFunc(function(t){return t.fft(n)},{input:t}).reshape(t.shape)}}),mM=Rk({ifft_:function(t){ZA("complex64"===t.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.as2D(t.size/e,e);return uT.runKernelFunc(function(t){return t.ifft(n)},{input:t}).reshape(t.shape)}}),gM=Rk({rfft_:function(t,e){ZA("float32"===t.dtype,function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],i=t.size/r;if(null!=e&&e<r){var s=t.shape.map(function(t){return 0}),o=t.shape.map(function(t){return t});o[t.shape.length-1]=e,n=t.slice(s,o),r=e}else if(null!=e&&e>r){var a=t.shape.map(function(t){return t});a[t.shape.length-1]=e-r,n=t.concat(zk(a),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),c=Dk(n,u).as2D(i,r),l=dM(c),h=Math.floor(r/2)+1,p=Fk(l),f=Bk(l),d=p.split([h,r-h],p.shape.length-1),m=f.split([h,r-h],f.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=h,Dk(d[0],m[0]).reshape(g)}}),vM=Rk({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),i=mM(r);return Fk(i)}var s=[n,2*(e-1)],o=Fk(t).as2D(n,e),a=Bk(t).as2D(n,e),u=o.slice([0,1],[n,e-2]).reverse(1),c=a.slice([0,1],[n,e-2]).reverse(1).mul(Mk(-1)),l=o.concat(u,1),h=a.concat(c,1);return r=Dk(l,h).as2D(s[0],s[1]),i=mM(r),Fk(i)}}),yM=Object.freeze({fft:dM,ifft:mM,rfft:gM,irfft:vM}),bM=Rk({sparseToDense_:function(t,e,n,r){void 0===r&&(r=0);var i=bk(t,"sparseIndices","sparseToDense","int32"),s=bk(e,"sparseValues","sparseToDense"),o=bk(r,"defaultValue","sparseToDense",s.dtype);return function(t,e,n,r){if("int32"!==t.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+t.shape+".");var i=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+s+".");if(0!==e.rank&&(1!==e.rank||e.size!==i))throw new Error("sparseValues has incorrect shape "+e.shape+", should be [] or ["+i+"]");if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,s,n,o),uT.runKernelFunc(function(t){return t.sparseToDense(i,s,n,o)},{$sparseIndices:i,$sparseValues:s,$defaultValue:o})}}),wM=Rk({gatherND_:function(t,e){var n=bk(e,"indices","gatherND","int32"),r=bk(t,"x","gatherND");return uT.runKernelFunc(function(t){return t.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),xM=Rk({diag_:function(t){var e=bk(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return uT.runKernelFunc(function(t){return t.diag(e)},{$x:e}).reshape(n)}}),EM=Rk({dropout_:function(t,e,n,r){var i=bk(t,"x","dropout");if(ZA("float32"===i.dtype,function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),ZA(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),0===e)return t instanceof WI?i.clone():i;var s=function(t,e){if(null==e)return t.shape.slice();if(rI(t.shape,e))return e;if(t.shape.length===e.length){for(var n=[],r=0;r<t.shape.length;r++)n.push(null==e[r]&&null!=t.shape[r]?t.shape[r]:e[r]);return n}return e}(i,n),o=1-e,a=RP(s,0,1,"float32",r).add(o).floor().div(o);return i.mul(a)}});function _M(t,e,n){for(var r=1-t%2,i=new Float32Array(t),s=0;s<t;++s){var o=2*Math.PI*s/(t+r-1);i[s]=e-n*Math.cos(o)}return Lk(i,"float32")}var SM,CM=Rk({hannWindow_:function(t){return _M(t,.5,.5)}}),AM=Rk({hammingWindow_:function(t){return _M(t,.54,.46)}}),IM=Rk({frame_:function(t,e,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0);for(var s=0,o=[];s+e<=t.size;)o.push(NN(t,s,e)),s+=n;if(r)for(;s<t.size;){var a=s+e-t.size,u=$k([NN(t,s,e-a),Kk([a],i)]);o.push(u),s+=n}return 0===o.length?Vk([],[0,e]):$k(o).as2D(o.length,e)}}),TM=Rk({stft_:function(t,e,n,r,i){void 0===i&&(i=CM),null==r&&(r=Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))));for(var s=IM(t,e,n),o=LO(s,i(e)),a=[],u=0;u<s.shape[0];u++)a.push(gM(o.slice([u,0],[1,e]),r));return $k(a)}}),kM=Object.freeze({hannWindow:CM,hammingWindow:AM,frame:IM,stft:TM});!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(SM||(SM={}));var PM=Rk({absoluteDifference_:function(t,e,n,r){void 0===r&&(r=SM.SUM_BY_NONZERO_WEIGHTS);var i=bk(t,"labels","absoluteDifference"),s=bk(e,"predictions","absoluteDifference"),o=null;null!=n&&(o=bk(n,"weights","absoluteDifference")),JA(i.shape,s.shape,"Error in absoluteDifference: ");var a=i.sub(s).abs();return RM(a,o,r)}}),RM=Rk({computeWeightedLoss_:function(t,e,n){void 0===n&&(n=SM.SUM_BY_NONZERO_WEIGHTS);var r=bk(t,"losses","computeWeightedLoss"),i=null;null!=e&&(i=bk(e,"weights","computeWeightedLoss"));var s=null==i?r:r.mul(i);if(n===SM.NONE)return s;if(n===SM.SUM)return s.sum();if(n===SM.MEAN){if(null==i)return s.mean();var o=r.size/i.size,a=s.sum().div(i.sum());return o>1?a.div(Mk(o)):a}if(n===SM.SUM_BY_NONZERO_WEIGHTS){if(null==i)return s.sum().div(Mk(r.size));var u=i.mul(Hk(r.shape)).notEqual(Mk(0)).sum().toFloat();return s.sum().div(u)}throw Error("Unknown reduction: "+n)}}),DM=Rk({cosineDistance_:function(t,e,n,r,i){void 0===i&&(i=SM.SUM_BY_NONZERO_WEIGHTS);var s=bk(t,"labels","cosineDistance"),o=bk(e,"predictions","cosineDistance"),a=null;null!=r&&(a=bk(r,"weights","cosineDistance")),JA(s.shape,o.shape,"Error in cosineDistance: ");var u=Mk(1).sub(s.mul(o).sum(n,!0));return RM(u,a,i)}}),FM=Rk({hingeLoss_:function(t,e,n,r){void 0===r&&(r=SM.SUM_BY_NONZERO_WEIGHTS);var i=bk(t,"labels","hingeLoss"),s=bk(e,"predictions","hingeLoss"),o=null;null!=n&&(o=bk(n,"weights","hingeLoss")),JA(i.shape,s.shape,"Error in hingeLoss: ");var a=Mk(1);i=Mk(2).mul(i).sub(a);var u=a.sub(i.mul(s)).relu();return RM(u,o,r)}}),BM=Rk({huberLoss_:function(t,e,n,r,i){void 0===r&&(r=1),void 0===i&&(i=SM.SUM_BY_NONZERO_WEIGHTS);var s=bk(t,"labels","huberLoss"),o=bk(e,"predictions","huberLoss"),a=null;null!=n&&(a=bk(n,"weights","huberLoss")),JA(s.shape,o.shape,"Error in huberLoss: ");var u=Mk(r),c=o.sub(s).abs(),l=BO(c,u),h=c.sub(l),p=Mk(.5).mul(l.square()).add(u.mul(h));return RM(p,a,i)}}),OM=Rk({logLoss_:function(t,e,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=SM.SUM_BY_NONZERO_WEIGHTS);var s=bk(t,"labels","logLoss"),o=bk(e,"predictions","logLoss"),a=null;null!=n&&(a=bk(n,"weights","logLoss")),JA(s.shape,o.shape,"Error in logLoss: ");var u=Mk(1),c=Mk(r),l=s.mul(o.add(c).log()).neg().sub(u.sub(s).mul(u.sub(o).add(c).log()));return RM(l,a,i)}}),NM=Rk({meanSquaredError_:function(t,e,n,r){void 0===r&&(r=SM.SUM_BY_NONZERO_WEIGHTS);var i=bk(t,"labels","meanSquaredError"),s=bk(e,"predictions","meanSquaredError"),o=null;null!=n&&(o=bk(n,"weights","meanSquaredError")),JA(i.shape,s.shape,"Error in meanSquaredError: ");var a=i.squaredDifference(s);return RM(a,o,r)}}),MM=Rk({sigmoidCrossEntropy_:function(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=SM.SUM_BY_NONZERO_WEIGHTS);var s=bk(t,"multiClassLabels","sigmoidCrossEntropy"),o=bk(e,"logits","sigmoidCrossEntropy"),a=null;if(null!=n&&(a=bk(n,"weights","sigmoidCrossEntropy")),JA(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Mk(r),c=Mk(1),l=Mk(.5);s=s.mul(c.sub(u)).add(l.mul(u))}var h=function(t,e){var n=bk(t,"labels","sigmoidCrossEntropyWithLogits"),r=bk(e,"logits","sigmoidCrossEntropyWithLogits");JA(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=r.relu(),s=r.mul(n),o=r.abs().neg().exp().log1p();return i.sub(s).add(o)}(s,o);return RM(h,a,i)}}),LM=Rk({softmaxCrossEntropy_:function(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=SM.SUM_BY_NONZERO_WEIGHTS);var s=bk(t,"onehotLabels","softmaxCrossEntropy"),o=bk(e,"logits","softmaxCrossEntropy"),a=null;if(null!=n&&(a=bk(n,"weights","softmaxCrossEntropy")),JA(s.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Mk(r),c=Mk(1),l=Mk(s.shape[1]);s=s.mul(c.sub(u)).add(u.div(l))}var h=function(t,e,n){if(void 0===n&&(n=-1),-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+n);return nR(function(t,e,r){var i=e.logSumExp([n],!0),s=e.toFloat().sub(i);return r([t,s]),{value:s.mul(t).neg().sum([n]),gradFunc:function(t,e){var r=e[0],i=e[1],s=Sk(t.shape,[n]);return[t.reshape(s).mul(r.toFloat().sub(i.exp())),t.reshape(s).mul(i.exp().sub(r.toFloat()))]}}})(t,e)}(s,o);return RM(h,a,i)}}),VM=Object.freeze({get Reduction(){return SM},absoluteDifference:PM,computeWeightedLoss:RM,cosineDistance:DM,hingeLoss:FM,huberLoss:BM,logLoss:OM,meanSquaredError:NM,sigmoidCrossEntropy:MM,softmaxCrossEntropy:LM});function jM(t,e){return void 0===e&&(e=!1),uT.tidy(function(){if(2!==t.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],i=wP(n),s=t.clone(),o=Vk([[1]],[1,1]),a=o.clone(),u=n>=r?r:n,c=function(t){var e,u=s,c=a,l=i;e=uT.tidy(function(){var e=s.slice([t,t],[n-t,1]),u=e.norm(),c=s.slice([t,t],[1,1]),l=Vk([[-1]]).where(c.greater(0),Vk([[1]])),h=c.sub(l.mul(u)),p=e.div(h);a=1===p.shape[0]?o.clone():o.concat(p.slice([1,0],[p.shape[0]-1,p.shape[1]]),0);var f=l.matMul(h).div(u).neg(),d=s.slice([t,0],[n-t,r]),m=f.mul(a);if(0===t)s=d.sub(m.matMul(a.transpose().matMul(d)));else{var g=d.sub(m.matMul(a.transpose().matMul(d)));s=s.slice([0,0],[t,r]).concat(g,0)}var v=i.slice([0,t],[n,i.shape[1]-t]);if(0===t)i=v.sub(v.matMul(a).matMul(m.transpose()));else{var y=v.sub(v.matMul(a).matMul(m.transpose()));i=i.slice([0,0],[n,t]).concat(y,1)}return[a,s,i]}),a=e[0],s=e[1],i=e[2],mk([u,c,l])},l=0;l<u;++l)c(l);return!e&&n>r&&(i=i.slice([0,0],[n,r]),s=s.slice([0,0],[r,r])),[i,s]})}var UM=Rk({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=bk(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,s=r.shape.slice(-2),o=s[0],a=s[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+o+").");if(!(n<=a))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+a+").");e<0&&(e=o),n<0&&(n=a);var u=qk(0,o,1,"int32").reshape([-1,1]),c=qk(0,a,1,"int32"),l=zO(u,c),h=yO(l.lessEqual(Mk(+e,"int32")),l.greaterEqual(Mk(-n,"int32"))),p=zk([o,a],r.dtype);return OP(LP(r.reshape([-1,o,a])).map(function(t){return EO(h,t,p)})).reshape(i)}}),HM=Rk({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,ZA(null!=t&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(e){ZA(t[e].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[e].shape[0]+" vs. "+n+")"})},i=1;i<t.length;++i)r(i)}else e=!0,t=Jk(t,t.shape[0],0).map(function(t){return BP(t,[0])});ZA(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var s=[],o=t,a=function(t){s.push(uT.tidy(function(){var e=o[t];if(t>0)for(var n=0;n<t;++n){var r=YN(s[n].mulStrict(e)).mul(s[n]);e=e.sub(r)}return e.div(aM(e,"euclidean"))}))};for(i=0;i<t.length;++i)a(i);return e?OP(s,0):s}}),zM=Rk({qr_:function(t,e){if(void 0===e&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(2===t.rank)return jM(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(t,e){return t*e}),r=LP(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];return r.forEach(function(t){var n=jM(t,e),r=n[1];i.push(n[0]),s.push(r)}),[OP(i,0).reshape(t.shape),OP(s,0).reshape(t.shape)]}}),KM=Object.freeze({bandPart:UM,gramSchmidt:HM,qr:zM});function qM(t,e,n,r,i,s){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==s&&(s=0);var o=t.shape[0];return n=Math.min(n,o),ZA(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),ZA(2===t.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),ZA(4===t.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),ZA(1===e.rank,function(){return"scores must be a 1D tensor"}),ZA(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]}),ZA(0<=s&&s<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+s+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}var WM=Rk({resizeBilinear_:function(t,e,n){void 0===n&&(n=!1);var r=bk(t,"images","resizeBilinear");ZA(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),ZA(2===e.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var i=r,s=!1;3===r.rank&&(s=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],a=e[1],u=uT.runKernelFunc(function(t,e){return e([i]),t.resizeBilinear(i,o,a,n)},{x:i},function(t,e){return{x:function(){return uT.runKernelFunc(function(r){return r.resizeBilinearBackprop(t,e[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:a});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),GM=Rk({resizeNearestNeighbor_:function(t,e,n){void 0===n&&(n=!1);var r=bk(t,"images","resizeNearestNeighbor");ZA(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),ZA(2===e.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),ZA("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,s=!1;3===r.rank&&(s=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],a=e[1],u=uT.runKernelFunc(function(t,e){return e([i]),t.resizeNearestNeighbor(i,o,a,n)},{batchImages:i},function(t,e){return{batchImages:function(){return uT.runKernelFunc(function(r){return r.resizeNearestNeighborBackprop(t,e[0],n)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),$M=Rk({nonMaxSuppression_:function(t,e,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var s=bk(t,"boxes","nonMaxSuppression"),o=bk(e,"scores","nonMaxSuppression"),a=qM(s,o,n,r,i);return uT.runKernelFunc(function(t){return t.nonMaxSuppression(s,o,n,r,i)},{boxes:s,scores:o},null,"NonMaxSuppressionV3",{maxOutputSize:n=a.maxOutputSize,iouThreshold:r=a.iouThreshold,scoreThreshold:i=a.scoreThreshold})}}),XM=Rk({nonMaxSuppressionWithScore_:function(t,e,n,r,i,s){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===s&&(s=0);var o=bk(t,"boxes","nonMaxSuppression"),a=bk(e,"scores","nonMaxSuppression"),u=qM(o,a,n,r,i,s),c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:s=u.softNmsSigma},l=uT.runKernel("NonMaxSuppressionV5",{boxes:o,scores:a},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),QM=Rk({cropAndResize_:function(t,e,n,r,i,s){var o=bk(t,"image","cropAndResize"),a=bk(e,"boxes","cropAndResize","float32"),u=bk(n,"boxInd","cropAndResize","int32");i=i||"bilinear",s=s||0;var c=a.shape[0];return ZA(4===o.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),ZA(2===a.rank&&4===a.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+a.shape+"."}),ZA(1===u.rank&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+a.shape+"."}),ZA(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),ZA(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),ZA("bilinear"===i||"nearest"===i,function(){return"method must be bilinear or nearest, but was "+i}),uT.runKernelFunc(function(t,e){return t.cropAndResize(o,a,u,r,i,s)},{images:o,boxes:a,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:s,cropSize:r})}}),YM=Object.freeze({resizeBilinear:WM,resizeNearestNeighbor:GM,nonMaxSuppression:$M,nonMaxSuppressionAsync:function(t,e,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),OA(this,void 0,void 0,function(){var s,o,a,u,c;return NA(this,function(l){switch(l.label){case 0:return s=bk(t,"boxes","nonMaxSuppressionAsync"),o=bk(e,"scores","nonMaxSuppressionAsync"),a=qM(s,o,n,r,i),n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,[4,Promise.all([s.data(),o.data()])];case 1:return u=l.sent(),c=DR(u[0],u[1],n,r,i),s!==t&&s.dispose(),o!==e&&o.dispose(),[2,c]}})})},nonMaxSuppressionWithScore:XM,nonMaxSuppressionWithScoreAsync:function(t,e,n,r,i,s){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===s&&(s=0),OA(this,void 0,void 0,function(){var o,a,u,c,l;return NA(this,function(h){switch(h.label){case 0:return o=bk(t,"boxes","nonMaxSuppressionAsync"),a=bk(e,"scores","nonMaxSuppressionAsync"),u=qM(o,a,n,r,i,s),n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,s=u.softNmsSigma,[4,Promise.all([o.data(),a.data()])];case 1:return c=h.sent(),l=FR(c[0],c[1],n,r,i,s),o!==t&&o.dispose(),a!==e&&a.dispose(),[2,l]}})})},cropAndResize:QM}),ZM=function(t,e){return!(t>0)||"linear"===e},JM=function(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},tL=function(t,e){var n=e,r=cR(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},eL=function(t,e,n){if("linear"===e)return t;if("relu"===e)return nM(t);if("elu"===e)return JN(t);if("relu6"===e)return rM(t);if("prelu"===e)return eM(t,n);throw new Error("Unknown fused activation "+e+".")},nL=Rk({fusedMatMul_:function(t){var e,n=t.a,r=t.b,i=t.transposeA,s=void 0!==i&&i,o=t.transposeB,a=void 0!==o&&o,u=t.bias,c=t.activation,l=void 0===c?"linear":c,h=t.preluActivationWeights;if(!1===ZM(uT.state.gradientDepth,l)){var p=xN(n,r,s,a);return null!=u&&(p=SO(p,u)),eL(p,l,h)}var f=bk(n,"a","fused matMul"),d=bk(r,"b","fused matMul");e=nT(f,d),f=e[0],d=e[1];var m=s?f.shape[f.rank-2]:f.shape[f.rank-1],g=a?d.shape[d.rank-1]:d.shape[d.rank-2],v=s?f.shape[f.rank-1]:f.shape[f.rank-2],y=a?d.shape[d.rank-2]:d.shape[d.rank-1],b=f.shape.slice(0,-2),w=d.shape.slice(0,-2),x=nI(b),E=nI(w);ZA(f.rank>=2&&d.rank>=2&&f.rank===d.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+d.rank+"."}),ZA(rI(b,w),function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+w+") of Tensors with shapes "+f.shape+" and "+d.shape+" must match."}),ZA(m===g,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+f.shape+" and "+d.shape+" and transposeA="+s+" and transposeB="+a+" must match."});var _,S,C=f.shape.slice(0,-2).concat([v,y]),A=s?f.as3D(x,m,v):f.as3D(x,v,m),I=a?d.as3D(E,y,g):d.as3D(E,g,y);null!=u&&lR(C,(_=nT(_=bk(u,"bias","fused matMul"),f)[0]).shape),null!=h&&(S=bk(h,"prelu weights","fused matMul"));var T={a:A,b:I};return null!=u&&(T.bias=_),null!=h&&(T.preluActivationWeights=S),uT.runKernelFunc(function(t,e){var n=t.fusedBatchMatMul({a:A,b:I,transposeA:s,transposeB:a,bias:_,activation:l,preluActivationWeights:S});return e([A,I,n]),n},T,function(t,e){var n=e[0],r=e[1],i=JM(t,e[2],l),o={};return null!=u&&(o={bias:function(){return tL(_,i)}}),Object.assign(s||a?!s&&a?{a:function(){return i.matMul(r,!1,!1)},b:function(){return i.matMul(n,!0,!1)}}:s&&!a?{a:function(){return r.matMul(i,!1,!0)},b:function(){return n.matMul(i,!1,!1)}}:{a:function(){return r.matMul(i,!0,!0)},b:function(){return i.matMul(n,!0,!0)}}:{a:function(){return i.matMul(r,!1,!0)},b:function(){return n.matMul(i,!0,!1)}},o)},"_FusedMatMul",{transposeA:s,transposeB:a,activation:l},[A,I],[!0]).reshape(C)}}),rL=Rk({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,s=t.dataFormat,o=void 0===s?"NHWC":s,a=t.dilations,u=void 0===a?[1,1]:a,c=t.dimRoundingMode,l=t.bias,h=t.activation,p=void 0===h?"linear":h,f=t.preluActivationWeights;if(!1===ZM(uT.state.gradientDepth,p=p||"linear")){var d=hN(e,n,r,i,o,u,c);return null!=l&&(d=SO(d,l)),eL(d,p,f)}var m=bk(e,"x","conv2d"),g=bk(n,"filter","conv2d"),v=m,y=!1;3===m.rank&&(y=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),ZA(4===v.rank,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."}),ZA(4===g.rank,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),null!=c&&ZA(iI(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+i+"."}),ZA(v.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),ZA(xR(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),ZA("NHWC"===o,function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var b,w,x=fR(v.shape,g.shape,r,u,i,c);null!=l&&(b=nT(b=bk(l,"bias","fused conv2d"),m)[0],lR(x.outShape,b.shape)),null!=f&&(w=bk(f,"prelu weights","fused conv2d"));var E={x:v,filter:g};null!=l&&(E.bias=b),null!=f&&(E.preluActivationWeights=w);var _=uT.runKernelFunc(function(t,e){var n=t.fusedConv2d({input:v,filter:g,convInfo:x,bias:b,activation:p,preluActivationWeights:w});return e([g,v,n]),n},E,function(t,e){var n=e[0],s=e[1],o=JM(t,e[2],p);ZA(wR(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var a={};return null!=l&&(a={bias:function(){return tL(b,o)}}),Object.assign({x:function(){return dN(s.shape,o,n,r,i)},filter:function(){return fN(s,o,n.shape,r,i)}},a)},"FusedConv2D",{convInfo:x,activation:p},[g,v],[!0]);return y?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),iL=Rk({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,s=t.dataFormat,o=void 0===s?"NHWC":s,a=t.dilations,u=void 0===a?[1,1]:a,c=t.dimRoundingMode,l=t.bias,h=t.activation,p=void 0===h?"linear":h,f=t.preluActivationWeights;if(!1===ZM(uT.state.gradientDepth,p)){var d=mN(e,n,r,i,o,u,c);return null!=l&&(d=SO(d,l)),eL(d,p,f)}var m=bk(e,"x","depthwiseConv2d"),g=bk(n,"filter","depthwiseConv2d"),v=m,y=!1;3===m.rank&&(y=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),ZA(4===v.rank,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."}),ZA(4===g.rank,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),ZA(v.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),null==u&&(u=[1,1]),ZA(xR(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),null!=c&&ZA(iI(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+i+"."});var b,w,x=fR(v.shape,g.shape,r,u,i,c,!0);null!=l&&(b=nT(b=bk(l,"bias","fused conv2d"),m)[0],lR(x.outShape,b.shape)),null!=f&&(w=bk(f,"prelu weights","fused depthwiseConv2d"));var E={x:v,filter:g};null!=l&&(E.bias=b),null!=f&&(E.preluActivationWeights=w);var _=uT.runKernelFunc(function(t,e){var n=t.fusedDepthwiseConv2D({input:v,filter:g,convInfo:x,bias:b,activation:p,preluActivationWeights:w});return e([g,v,n]),n},E,function(t,e){ZA(wR(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var n=e[0],r=e[1],i=JM(t,e[2],p),s={};return null!=l&&(s={bias:function(){return tL(b,i)}}),Object.assign({x:function(){return gN(r.shape,i,n,x)},filter:function(){return vN(r,i,n.shape,x)}},s)},"FusedDepthwiseConv2D",{convInfo:x,activation:p},[g,v],[!0]);return y?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),sL=Object.freeze({matMul:nL,conv2d:rL,depthwiseConv2d:iL}),oL=Object.freeze({image:YM,linalg:KM,losses:VM,spectral:yM,fused:sL,signal:kM,square:xB,squaredDifference:_B,conv1d:lN,conv2d:hN,conv3d:pN,depthwiseConv2d:mN,separableConv2d:yN,conv2dTranspose:bN,conv3dTranspose:wN,op:Rk,batchNormalization2d:lO,batchNormalization3d:hO,batchNormalization4d:pO,batchNormalization:fO,batchNorm:dO,batchNorm2d:mO,batchNorm3d:gO,batchNorm4d:vO,booleanMaskAsync:function(t,e,n){return OA(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h,p,f,d,m;return NA(this,function(g){switch(g.label){case 0:for(r=bk(t,"tensor","boolMask"),i=bk(e,"mask","boolMask","bool"),s=null==n?0:n,a=r.shape,ZA((o=i.rank)>0,function(){return"mask cannot be scalar"}),JA(a.slice(s,s+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=s;c<s+o;c++)u*=a[c];return l=a.slice(0,s).concat([u],a.slice(s+o)),h=r.reshape(l),p=i.reshape([-1]),[4,_O(p)];case 1:return f=g.sent(),d=f.squeeze([1]),m=sN(h,d,s),t!==r&&r.dispose(),e!==i&&i.dispose(),d.dispose(),h.dispose(),p.dispose(),f.dispose(),[2,m]}})})},complex:Dk,real:Fk,imag:Bk,concat:$k,concat1d:Xk,concat2d:Qk,concat3d:Yk,concat4d:Zk,split:Jk,matMul:xN,dot:EN,outerProduct:_N,reverse:SN,reverse1d:CN,reverse2d:AN,reverse3d:IN,reverse4d:TN,maxPool:RN,avgPool:DN,pool:FN,maxPool3d:BN,avgPool3d:ON,slice:NN,slice1d:MN,slice2d:LN,slice3d:VN,slice4d:jN,abs:SB,acos:CB,acosh:AB,asin:IB,asinh:TB,atan:kB,atanh:PB,ceil:RB,clipByValue:DB,cos:FB,cosh:BB,erf:OB,exp:NB,expm1:MB,floor:LB,log:VB,log1p:jB,logSigmoid:UB,neg:HB,reciprocal:zB,round:KB,rsqrt:qB,sigmoid:WB,sign:GB,isNaN:$B,isInf:XB,isFinite:QB,sin:YB,sinh:ZB,softplus:JB,sqrt:tO,step:eO,tan:nO,tanh:rO,all:HN,any:zN,argMax:KN,argMin:qN,logSumExp:WN,max:GN,mean:$N,min:XN,moments:QN,sum:YN,prod:ZN,equal:qO,equalStrict:WO,greater:GO,greaterEqual:$O,greaterEqualStrict:XO,greaterStrict:QO,less:YO,lessEqual:ZO,lessEqualStrict:JO,lessStrict:tN,notEqual:eN,notEqualStrict:nN,add:SO,addN:CO,addStrict:AO,atan2:IO,div:TO,divNoNan:kO,divStrict:PO,floorDiv:RO,maximum:DO,maximumStrict:FO,minimum:BO,minimumStrict:OO,mod:NO,modStrict:MO,mul:LO,mulStrict:VO,pow:jO,powStrict:UO,squaredDifferenceStrict:HO,sub:zO,subStrict:KO,elu:JN,leakyRelu:tM,prelu:eM,relu:nM,relu6:rM,selu:iM,logicalAnd:yO,logicalNot:bO,logicalOr:wO,logicalXor:xO,where:EO,whereAsync:_O,buffer:pP,print:function(t,e){void 0===e&&(e=!1),console.log(t.toString(e))},batchToSpaceND:fP,broadcastTo:dP,cast:mP,clone:gP,cumsum:vP,depthToSpace:yP,expandDims:bP,eye:wP,multinomial:xP,oneHot:EP,pad:_P,pad1d:SP,pad2d:CP,pad3d:AP,pad4d:IP,rand:TP,randomNormal:kP,randomGamma:PP,randomUniform:RP,reshape:DP,spaceToBatchND:FP,squeeze:BP,stack:OP,tile:NP,truncatedNormal:MP,unstack:LP,setdiff1dAsync:function(t,e){return OA(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h;return NA(this,function(p){switch(p.label){case 0:return n=bk(t,"x","setdiff1d"),r=bk(e,"y","setdiff1d"),ZA(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),ZA(1===n.rank,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),ZA(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return i=p.sent(),[4,r.data()];case 2:for(s=p.sent(),o=new Set(s),a=0,l=0;l<i.length;l++)o.has(i[l])||a++;for(u=new HI([a],n.dtype),c=new HI([a],"int32"),l=0,h=0;l<i.length;l++)o.has(i[l])||(u.values[h]=i[l],c.values[h]=l,h++);return[2,[u.toTensor(),c.toTensor()]]}})})},fill:Kk,linspace:function(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return uT.runKernelFunc(function(r){return r.linspace(t,e,n)},{})},ones:Hk,range:qk,scalar:Mk,tensor:Ok,tensor1d:Lk,tensor2d:Vk,tensor3d:jk,tensor4d:Uk,tensor5d:function(t,e,n){if(tI(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");var r=vk(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Nk(t,e,r,n)},tensor6d:function(t,e,n){if(tI(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");var r=vk(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Nk(t,e=e||r,r,n)},variable:function(t,e,n,r){return void 0===e&&(e=!0),uT.makeVariable(t,e,n,r)},zeros:zk,onesLike:Wk,zerosLike:Gk,transpose:sM,softmax:rR,logSoftmax:iR,localResponseNormalization:oM,norm:aM,gather:sN,unsortedSegmentSum:oN,basicLSTMCell:uM,multiRNNCell:cM,movingAverage:lM,stridedSlice:hM,topk:pM,scatterND:fM,fft:dM,ifft:mM,rfft:gM,irfft:vM,sparseToDense:bM,gatherND:wM,diag:xM,dropout:EM,hannWindow:CM,hammingWindow:AM,frame:IM,stft:TM,inTopKAsync:function(t,e,n){return void 0===n&&(n=1),OA(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h,p,f,d,m,g;return NA(this,function(v){switch(v.label){case 0:return r=bk(t,"predictions","inTopK"),i=bk(e,"targets","inTopK"),ZA(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),ZA(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),JA(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),s=r.shape[r.shape.length-1],ZA(n>0&&n<=s,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+s+"), but got "+n}),[4,r.data()];case 1:return o=v.sent(),[4,i.data()];case 2:for(a=v.sent(),l=(u=[o.length/s,s])[1],h=pI("bool",c=u[0]),p=0;p<c;p++){for(d=o.subarray(f=p*l,f+l),m=[],g=0;g<d.length;g++)m.push({value:d[g],index:g});for(m.sort(function(t,e){return e.value-t.value}),h[p]=0,g=0;g<n;g++)if(m[g].index===a[p]){h[p]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),[2,Ok(h,i.shape,"bool")]}})})}});function aL(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(t){null!=t&&ZA("complex64"!==t.dtype,function(){return e+" does not support complex64 tensors."})})}function uL(t,e,n,r){if("linear"===n)return t.linear(e);if("relu"===n)return t.relu(e);if("elu"===n)return t.elu(e);if("relu6"===n)return t.relu6(e);if("prelu"===n)return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var cL=function(t){function e(){var e=t.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new sR(e,uT),e}return BA(e,t),e.prototype.write=function(t,e,n){this.firstUse&&(this.firstUse=!1,VA().get("IS_NODE")&&gk("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:t,dtype:n}),r},e.prototype.move=function(t,e,n,r){this.data.set(t,{values:e,dtype:r})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return OA(this,void 0,void 0,function(){return NA(this,function(e){return[2,this.readSync(t)]})})},e.prototype.readSync=function(t){var e=this.data.get(t),n=e.complexTensors;return"complex64"===e.dtype?AR(this.readSync(n.real.dataId),this.readSync(n.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var e=this.readSync(t.dataId),n=e;if("string"===t.dtype)try{n=e.map(function(t){return BI(t)})}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8")}return pP(t.shape,t.dtype,n)},e.prototype.makeOutput=function(t,e,n){var r=this.write(t,e,n);return uT.makeTensorFromDataId(r,e,n,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var e=this.data.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return OA(this,void 0,void 0,function(){var e;return NA(this,function(n){return e=RI(),t(),[2,{kernelMs:RI()-e}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,e){var n=this.makeOutput(null,t.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:uT.keep(t.clone()),imag:uT.keep(e.clone())},n},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,e,n){if(aL(t,"slice"),tR(t.shape,e,n)){var r=eR(e,t.strides),i=nI(n);return Ok(this.readSync(t.dataId).subarray(r,r+i),n,t.dtype)}for(var s=pP(n,t.dtype),o=this.bufferSync(t),a=0;a<s.size;++a){var u=s.indexToLoc(a).map(function(t,n){return t+e[n]});s.values[a]=o.get.apply(o,u)}return s.toTensor()},e.prototype.stridedSlice=function(t,e,n,r){aL(t,"stridedSlice");var i=YP(e,n,r);if(i.some(function(t){return 0===t}))return Ok([],i);for(var s=pP(i,t.dtype),o=this.bufferSync(t),a=0;a<s.size;a++){for(var u=s.indexToLoc(a),c=new Array(u.length),l=0;l<c.length;l++)c[l]=u[l]*r[l]+e[l];s.set.apply(s,[o.get.apply(o,c)].concat(u))}return s.toTensor()},e.prototype.diag=function(t){for(var e=this.readSync(t.dataId),n=pP([t.size,t.size],t.dtype),r=n.values,i=0;i<e.length;i++)r[i*t.size+i]=e[i];return n.toTensor()},e.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),i=0,s=0;s<t.rank;s++)s!==e&&(r[i++]=t.shape[s]);var o=new Array(t.rank).fill(0),a=t.shape.slice();a[e]=1;var u=new Array(n);for(s=0;s<u.length;s++)o[e]=s,u[s]=this.slice(t,o,a).reshape(r);return u},e.prototype.reverse=function(t,e){aL(t,"reverse");for(var n=pP(t.shape,t.dtype),r=this.bufferSync(t),i=function(i){var s=n.indexToLoc(i),o=s.slice();e.forEach(function(e){return o[e]=t.shape[e]-1-o[e]}),n.set.apply(n,[r.get.apply(r,o)].concat(s))},s=0;s<n.size;s++)i(s);return n.toTensor()},e.prototype.concat=function(t,e){var n=this;if("complex64"===t[0].dtype){var r=t.map(function(t){return Fk(t)}),i=t.map(function(t){return Bk(t)});return Dk(this.concat(r,e),this.concat(i,e))}var s=t.map(function(t){var n=nI(t.shape.slice(e));return t.as2D(-1,n)}),o=Pk(s.map(function(t){return t.shape}),1),a=pP(o,t[0].dtype).values;if(1===s[0].shape[0]){var u=0;s.forEach(function(t){a.set(n.readSync(t.dataId),u),u+=t.size})}else{var c=0;s.forEach(function(t){for(var e=n.readSync(t.dataId),r=0,i=0;i<t.shape[0];++i)for(var s=i*o[1]+c,u=0;u<t.shape[1];++u)a[s+u]=e[r++];c+=t.shape[1]})}var l=Pk(t.map(function(t){return t.shape}),e);return Ok(a,l,t[0].dtype)},e.prototype.neg=function(t){return aL(t,"neg"),this.multiply(Mk(-1),t)},e.prototype.add=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t+n,imag:e+r}}):this.broadcastedBinaryOp(t,e,tT(t.dtype,e.dtype),function(t,e){return t+e})},e.prototype.addN=function(t){var e=this;aL(t,"addN");for(var n=t.map(function(t){return e.readSync(t.dataId)}),r=pP(t[0].shape,t[0].dtype),i=r.values,s=0;s<t.length;s++)for(var o=n[s],a=0;a<i.length;a++)i[a]+=o[a];return r.toTensor()},e.prototype.softmax=function(t,e){var n=lI([e],t.shape),r=this.max(t,n),i=Sk(r.shape,n),s=this.subtract(t,r.reshape(i)),o=this.exp(s),a=this.sum(o,n).reshape(i);return this.realDivide(o,a)},e.prototype.subtract=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t-n,imag:e-r}}):this.broadcastedBinaryOp(t,e,tT(t.dtype,e.dtype),function(t,e){return t-e})},e.prototype.pow=function(t,e){return aL([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},e.prototype.batchMatMul=function(t,e,n,r){aL([t,e],"matMul");for(var i=n?t.shape[1]:t.shape[2],s=n?t.shape[2]:t.shape[1],o=r?e.shape[1]:e.shape[2],a=t.shape[0],u=this.readSync(t.dataId),c=this.readSync(e.dataId),l=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],h=l[0],p=l[1],f=l[2],d=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],m=d[0],g=d[1],v=d[2],y=s*o,b=pP([a,s,o],t.dtype),w=b.values,x=this.blockSize,E=0;E<a;E++)for(var _=0;_<s;_+=x)for(var S=0;S<o;S+=x)for(var C=0;C<i;C+=x)for(var A=Math.min(_+x,s),I=Math.min(S+x,o),T=Math.min(C+x,i),k=_;k<A;k++)for(var P=S;P<I;P++){for(var R=0,D=C;D<T;D++)R+=u[E*h+k*p+D*f]*c[D*m+P*g+E*v];w[E*y+(k*o+P)]+=R}return b.toTensor()},e.prototype.fusedBatchMatMul=function(t){var e=t.bias,n=t.activation,r=t.preluActivationWeights,i=this.batchMatMul(t.a,t.b,t.transposeA,t.transposeB);return e&&(i=this.add(i,e)),n&&(i=uL(this,i,n,r)),i},e.prototype.multiply=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t*n-e*r,imag:t*r+e*n}}):this.broadcastedBinaryOp(t,e,tT(t.dtype,e.dtype),function(t,e){return t*e})},e.prototype.realDivide=function(t,e){return aL([t,e],"realDivide"),this.broadcastedBinaryOp(t,e,"float32",function(t,e){return t/e})},e.prototype.floorDiv=function(t,e){return aL([t,e],"floorDiv"),this.broadcastedBinaryOp(t,e,"int32",function(t,e){return Math.floor(t/e)})},e.prototype.sum=function(t,e){aL(t,"sum"),Ck("sum",e,t.rank);for(var n=_k(t.shape,e),r=n[1],i=zk(n[0],tT(t.dtype,"int32")),s=nI(r),o=this.readSync(i.dataId),a=this.readSync(t.dataId),u=0;u<o.length;++u){for(var c=u*s,l=0,h=0;h<s;++h)l+=a[c+h];o[u]=l}return i},e.prototype.prod=function(t,e){aL(t,"sum");for(var n=_k(t.shape,e),r=n[1],i=zk(n[0],tT(t.dtype,"int32")),s=nI(r),o=this.readSync(i.dataId),a=this.readSync(t.dataId),u=0;u<o.length;++u){for(var c=u*s,l=1,h=0;h<s;++h)l*=a[c+h];o[u]=l}return i},e.prototype.unsortedSegmentSum=function(t,e,n){aL(t,"unsortedSegmentSum");for(var r=[],i=t.rank-e.rank,s=0;s<i;++s)e=e.expandDims(s+1);for(s=0;s<n;++s){var o=Mk(s,"int32"),a=qO(o,e).asType("float32").mul(t).sum(0);r.push(a)}return OP(r)},e.prototype.argMin=function(t,e){aL(t,"argMin");var n=[e];Ck("argMin",n,t.rank);for(var r=_k(t.shape,n),i=r[1],s=zk(r[0],"int32"),o=nI(i),a=this.readSync(s.dataId),u=this.readSync(t.dataId),c=0;c<a.length;++c){for(var l=c*o,h=u[l],p=0,f=0;f<o;++f){var d=u[l+f];d<h&&(h=d,p=f)}a[c]=p}return s},e.prototype.argMax=function(t,e){aL(t,"argMax");var n=[e];Ck("argMax",n,t.rank);for(var r=_k(t.shape,n),i=r[1],s=zk(r[0],"int32"),o=nI(i),a=this.readSync(s.dataId),u=this.readSync(t.dataId),c=0;c<a.length;++c){for(var l=c*o,h=u[l],p=0,f=0;f<o;++f){var d=u[l+f];d>h&&(h=d,p=f)}a[c]=p}return s},e.prototype.cumsum=function(t,e,n,r){if(aL(t,"cumsum"),e!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+e);for(var i=tT(t.dtype,"int32"),s=zk(t.shape,i),o=this.readSync(s.dataId),a=this.readSync(t.dataId),u=t.shape[t.rank-1],c=r?function(t,e){return t+u-e-1}:function(t,e){return t+e},l=0;l<a.length;l+=u)for(var h=0;h<u;h++){var p=c(l,h);if(0===h)o[p]=n?0:a[p];else{var f=c(l,h-1);o[p]=n?a[f]+o[f]:a[p]+o[f]}}return s},e.prototype.equal=function(t,e){return aL([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t===e?1:0})},e.prototype.notEqual=function(t,e){return aL([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t!==e?1:0})},e.prototype.less=function(t,e){return aL([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<e?1:0})},e.prototype.lessEqual=function(t,e){return aL([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<=e?1:0})},e.prototype.greater=function(t,e){return aL([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>e?1:0})},e.prototype.greaterEqual=function(t,e){return aL([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>=e?1:0})},e.prototype.logicalNot=function(t){aL(t,"logicalNot");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e[r]?0:1;return this.makeOutput(n,t.shape,"bool")},e.prototype.logicalAnd=function(t,e){return aL([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t&&e})},e.prototype.logicalOr=function(t,e){return aL([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t||e})},e.prototype.select=function(t,e,n){aL([t,e,n],"select");for(var r=this.readSync(t.dataId),i=this.readSync(e.dataId),s=this.readSync(n.dataId),o=zk(e.shape,tT(e.dtype,n.dtype)),a=this.readSync(o.dataId),u=0,c=0===t.rank||t.rank>1||1===e.rank?1:nI(e.shape.slice(1)),l=0;l<r.length;l++)for(var h=0;h<c;h++)a[u++]=1===r[l]?i[l]:s[l];return o},e.prototype.where=function(t){aL([t],"where");var e=this.readSync(t.dataId);return UR(t.shape,e)},e.prototype.topk=function(t,e,n){return aL(t,"topk"),jR(this.readSync(t.dataId),t.shape,t.dtype,e)},e.prototype.min=function(t,e){aL(t,"min"),Ck("min",e,t.rank);for(var n=_k(t.shape,e),r=n[1],i=zk(n[0],t.dtype),s=nI(r),o=this.readSync(i.dataId),a=this.readSync(t.dataId),u=0;u<o.length;++u){for(var c=u*s,l=a[c],h=0;h<s;++h){var p=a[c+h];p<l&&(l=p)}o[u]=l}return i},e.prototype.minimum=function(t,e){return aL([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.min(t,e)})},e.prototype.mod=function(t,e){return aL([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})},e.prototype.max=function(t,e){aL(t,"max"),Ck("max",e,t.rank);for(var n=_k(t.shape,e),r=n[1],i=zk(n[0],t.dtype),s=nI(r),o=this.readSync(i.dataId),a=this.readSync(t.dataId),u=0;u<o.length;++u){for(var c=u*s,l=a[c],h=0;h<s;++h){var p=a[c+h];p>l&&(l=p)}o[u]=l}return i},e.prototype.maximum=function(t,e){return aL([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.max(t,e)})},e.prototype.all=function(t,e){aL(t,"all"),Ck("all",e,t.rank);for(var n=_k(t.shape,e),r=n[1],i=zk(n[0],t.dtype),s=nI(r),o=this.readSync(i.dataId),a=this.readSync(t.dataId),u=0;u<o.length;++u){for(var c=u*s,l=a[c],h=0;h<s;++h)l=l&&a[c+h];o[u]=l}return i},e.prototype.any=function(t,e){aL(t,"any"),Ck("any",e,t.rank);for(var n=_k(t.shape,e),r=n[1],i=zk(n[0],t.dtype),s=nI(r),o=this.readSync(i.dataId),a=this.readSync(t.dataId),u=0;u<o.length;++u){for(var c=u*s,l=a[c],h=0;h<s;++h)l=l||a[c+h];o[u]=l}return i},e.prototype.squaredDifference=function(t,e){return aL([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t-e;return n*n})},e.prototype.ceil=function(t){aL(t,"ceil");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.floor=function(t){aL(t,"floor");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.sign=function(t){aL(t,"x");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=e[r]<0?-1:e[r]>0?1:0;return this.makeOutput(n,t.shape,"float32")},e.prototype.isNaN=function(t){aL(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isNaN(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.isInf=function(t){aL(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Math.abs(e[r])===1/0&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.isFinite=function(t){aL(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isFinite(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.round=function(t){aL(t,"round");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=Math.floor(e[r]);n[r]=e[r]-i<.5?Math.floor(e[r]):e[r]-i>.5?Math.ceil(e[r]):i%2==0?i:i+1}return this.makeOutput(n,t.shape,"float32")},e.prototype.exp=function(t){aL(t,"exp");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.expm1=function(t){aL(t,"expm1");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.log=function(t){aL(t,"log");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.log(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.log1p=function(t){aL(t,"log1p");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.log1p(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.sqrt=function(t){aL(t,"sqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.sqrt(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.rsqrt=function(t){aL(t,"rsqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/Math.sqrt(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.reciprocal=function(t){aL(t,"reciprocal");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/e[r];return this.makeOutput(n,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){aL(t,"relu");for(var e=zk(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return e},e.prototype.relu6=function(t){aL(t,"relu");for(var e=zk(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return e},e.prototype.prelu=function(t,e){return aL([t,e],"prelu"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return t<0?e*t:t})},e.prototype.elu=function(t){aL(t,"elu");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var i=n[r];e[r]=i>=0?i:Math.exp(i)-1}return this.makeOutput(e,t.shape,"float32")},e.prototype.eluDer=function(t,e){aL([t,e],"eluDer");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=this.readSync(t.dataId),s=0;s<r.length;++s){var o=r[s];n[s]=o>=1?i[s]:i[s]*(o+1)}return this.makeOutput(n,e.shape,"float32")},e.prototype.selu=function(t){aL(t,"selu");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var i=n[r];e[r]=i>=0?1.0507009873554805*i:1.7580993408473768*(Math.exp(i)-1)}return this.makeOutput(e,t.shape,"float32")},e.prototype.clip=function(t,e,n){aL(t,"clip");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),s=0;s<i.length;++s){var o=i[s];r[s]=o>n?n:o<e?e:o}return this.makeOutput(r,t.shape,"float32")},e.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<t.size;++r)e[r]=Math.hypot(n[2*r],n[2*r+1]);return this.makeOutput(e,t.shape,"float32")},e.prototype.int=function(t){aL(t,"int");for(var e=new Int32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=n[r];return this.makeOutput(e,t.shape,"int32")},e.prototype.sigmoid=function(t){aL(t,"sigmoid");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(e,t.shape,"float32")},e.prototype.softplus=function(t){aL(t,"softplus");for(var e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i){var s,o=r[i]>-e,a=r[i]<e,u=Math.exp(r[i]);s=a?u:o?r[i]:Math.log(1+u),n[i]=s}return this.makeOutput(n,t.shape,"float32")},e.prototype.sin=function(t){aL(t,"sin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.cos=function(t){aL(t,"cos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.tan=function(t){aL(t,"tan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.asin=function(t){aL(t,"asin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.acos=function(t){aL(t,"acos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atan=function(t){aL(t,"atan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atan2=function(t,e){return aL([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.atan2(t,e)})},e.prototype.sinh=function(t){aL(t,"sinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.cosh=function(t){aL(t,"cosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.tanh=function(t){aL(t,"tanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=sI(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.asinh=function(t){aL(t,"asinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.acosh=function(t){aL(t,"acosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atanh=function(t){aL(t,"atanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.erf=function(t){aL(t,"erf");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var i=Math.sign(n[r]),s=Math.abs(n[r]),o=1/(1+.3275911*s);e[r]=i*(1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-s*s))}return this.makeOutput(e,t.shape,"float32")},e.prototype.step=function(t,e){void 0===e&&(e=0),aL(t,"step");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i){var s=r[i];n[i]=isNaN(s)?NaN:s>0?1:e}return this.makeOutput(n,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var e=t.bias,n=t.activation,r=t.preluActivationWeights,i=this.conv2d(t.input,t.filter,t.convInfo);return e&&(i=this.add(i,e)),n&&(i=uL(this,i,n,r)),i},e.prototype.conv2d=function(t,e,n){aL([t,e],"conv2d");for(var r=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,o=n.dilationWidth,a=n.padInfo.left,u=n.padInfo.top,c="channelsLast"===n.dataFormat,l=pP(n.outShape,t.dtype),h=t.strides[0],p=c?t.strides[1]:t.strides[2],f=c?t.strides[2]:1,d=c?1:t.strides[1],m=l.strides[0],g=c?l.strides[1]:l.strides[2],v=c?l.strides[2]:1,y=c?1:l.strides[1],b=this.readSync(t.dataId),w=this.readSync(e.dataId),x=l.values,E=0;E<n.batchSize;++E)for(var _=E*h,S=E*m,C=0;C<n.outHeight;++C)for(var A=S+C*g,I=C*n.strideHeight-u,T=0;T<r;T++){var k=I+T*s;if(!(k<0||k>=n.inHeight))for(var P=T*e.strides[0],R=_+k*p,D=0;D<n.outWidth;++D)for(var F=A+D*v,B=D*n.strideWidth-a,O=0;O<i;O++){var N=B+O*o;if(!(N<0||N>=n.inWidth))for(var M=R+N*f,L=P+O*e.strides[1],V=0;V<n.inChannels;++V){for(var j=b[M+V*d],U=0;U<n.outChannels;++U)x[F+U*y]+=j*w[L+U];L+=n.outChannels}}}return l.toTensor()},e.prototype.conv3d=function(t,e,n){for(var r=n.filterDepth,i=n.filterHeight,s=n.filterWidth,o=n.dilationDepth,a=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,h=n.padInfo.top,p=pP(n.outShape,t.dtype),f=this.readSync(t.dataId),d=this.readSync(e.dataId),m=p.values,g=0;g<n.batchSize;++g)for(var v=g*t.strides[0],y=g*p.strides[0],b=0;b<n.outDepth;++b)for(var w=y+b*p.strides[1],x=b*n.strideDepth-c,E=0;E<r;E++){var _=x+E*o;if(!(_<0||_>=n.inDepth))for(var S=E*e.strides[0],C=v+_*t.strides[1],A=0;A<n.outHeight;++A)for(var I=w+A*p.strides[2],T=A*n.strideHeight-h,k=0;k<i;k++){var P=T+k*a;if(!(P<0||P>=n.inHeight))for(var R=S+k*e.strides[1],D=C+P*t.strides[2],F=0;F<n.outWidth;++F)for(var B=I+F*n.outChannels,O=F*n.strideWidth-l,N=0;N<s;N++){var M=O+N*u;if(!(M<0||M>=n.inWidth))for(var L=D+M*n.inChannels,V=R+N*e.strides[2],j=0;j<n.inChannels;++j){for(var U=f[L+j],H=0;H<n.outChannels;++H)m[B+H]+=U*d[V+H];V+=n.outChannels}}}}return p.toTensor()},e.prototype.conv2dDerInput=function(t,e,n){aL([t,e],"conv2dDerInput");for(var r=pP(n.inShape,"float32"),i=r.values,s=this.readSync(t.dataId),o=this.readSync(e.dataId),a=e.strides,u=a[0],c=a[1],l=a[2],h=n.batchSize,p=n.filterHeight,f=n.filterWidth,d=n.inChannels,m=n.inHeight,g=n.inWidth,v=n.outChannels,y=n.outHeight,b=n.outWidth,w=n.strideHeight,x=n.strideWidth,E=p-1-n.padInfo.top,_=f-1-n.padInfo.left,S="channelsLast"===n.dataFormat,C=r.strides[0],A=S?r.strides[1]:r.strides[2],I=S?r.strides[2]:1,T=S?1:r.strides[1],k=t.strides[0],P=S?t.strides[1]:t.strides[2],R=S?t.strides[2]:1,D=S?1:t.strides[1],F=0;F<h;++F)for(var B=0;B<d;++B)for(var O=0;O<m;++O)for(var N=O-E,M=Math.max(0,Math.ceil(N/w)),L=Math.min(y,(p+N)/w),V=0;V<g;++V){for(var j=V-_,U=Math.max(0,Math.ceil(j/x)),H=Math.min(b,(f+j)/x),z=0,K=M;K<L;++K)for(var q=K*w-N,W=U;W<H;++W)for(var G=k*F+P*K+R*W,$=u*(p-1-q)+c*(f-1-(W*x-j))+l*B,X=0;X<v;++X)z+=s[G+D*X]*o[$+X];i[C*F+A*O+I*V+T*B]=z}return r.toTensor()},e.prototype.conv3dDerInput=function(t,e,n){for(var r=pP(n.inShape,"float32"),i=r.values,s=r.strides,o=s[0],a=s[1],u=s[2],c=s[3],l=this.readSync(t.dataId),h=t.strides,p=h[0],f=h[1],d=h[2],m=h[3],g=this.readSync(e.dataId),v=e.strides,y=v[0],b=v[1],w=v[2],x=v[3],E=n.batchSize,_=n.filterDepth,S=n.filterHeight,C=n.filterWidth,A=n.inChannels,I=n.inDepth,T=n.inHeight,k=n.inWidth,P=n.outChannels,R=n.outDepth,D=n.outHeight,F=n.outWidth,B=n.strideDepth,O=n.strideHeight,N=n.strideWidth,M=_-1-n.padInfo.front,L=S-1-n.padInfo.top,V=C-1-n.padInfo.left,j=0;j<E;++j)for(var U=0;U<A;++U)for(var H=0;H<I;++H)for(var z=H-M,K=Math.max(0,Math.ceil(z/B)),q=Math.min(R,(_+z)/B),W=0;W<T;++W)for(var G=W-L,$=Math.max(0,Math.ceil(G/O)),X=Math.min(D,(S+G)/O),Q=0;Q<k;++Q){for(var Y=Q-V,Z=Math.max(0,Math.ceil(Y/N)),J=Math.min(F,(C+Y)/N),tt=0,et=K;et<q;++et)for(var nt=et*B-z,rt=$;rt<X;++rt)for(var it=rt*O-G,st=Z;st<J;++st)for(var ot=p*j+f*et+d*rt+m*st,at=y*(_-1-nt)+b*(S-1-it)+w*(C-1-(st*N-Y))+x*U,ut=0;ut<P;++ut)tt+=l[ot+ut]*g[at+ut];i[o*j+a*H+u*W+c*Q+U]=tt}return r.toTensor()},e.prototype.conv2dDerFilter=function(t,e,n){aL([t,e],"conv2dDerFilter");for(var r=n.strideHeight,i=n.strideWidth,s=n.filterHeight,o=n.filterWidth,a="channelsLast"===n.dataFormat,u=pP(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,h=this.bufferSync(t),p=this.bufferSync(e),f=0;f<s;++f)for(var d=Math.max(0,Math.ceil((l-f)/r)),m=Math.min(n.outHeight,(n.inHeight+l-f)/r),g=0;g<o;++g)for(var v=Math.max(0,Math.ceil((c-g)/i)),y=Math.min(n.outWidth,(n.inWidth+c-g)/i),b=0;b<n.inChannels;++b)for(var w=0;w<n.outChannels;++w){for(var x=0,E=0;E<n.batchSize;++E)for(var _=d;_<m;++_)for(var S=f+_*r-l,C=v;C<y;++C){var A=g+C*i-c;x+=a?h.get(E,S,A,b)*p.get(E,_,C,w):h.get(E,b,S,A)*p.get(E,w,_,C)}u.set(x,f,g,b,w)}return u.toTensor()},e.prototype.conv3dDerFilter=function(t,e,n){for(var r=n.strideDepth,i=n.strideHeight,s=n.strideWidth,o=n.filterDepth,a=n.filterHeight,u=n.filterWidth,c=pP(n.filterShape,"float32"),l=c.values,h=c.strides,p=h[0],f=h[1],d=h[2],m=h[3],g=this.readSync(e.dataId),v=e.strides,y=v[0],b=v[1],w=v[2],x=v[3],E=this.readSync(t.dataId),_=t.strides,S=_[0],C=_[1],A=_[2],I=_[3],T=n.padInfo.front,k=n.padInfo.left,P=n.padInfo.top,R=0;R<o;++R)for(var D=Math.max(0,Math.ceil((T-R)/r)),F=Math.min(n.outDepth,(n.inDepth+T-R)/r),B=R*p,O=0;O<a;++O)for(var N=Math.max(0,Math.ceil((P-O)/i)),M=Math.min(n.outHeight,(n.inHeight+P-O)/i),L=O*f+B,V=0;V<u;++V)for(var j=Math.max(0,Math.ceil((k-V)/s)),U=Math.min(n.outWidth,(n.inWidth+k-V)/s),H=V*d+L,z=0;z<n.inChannels;++z)for(var K=z*m+H,q=0;q<n.outChannels;++q){for(var W=0,G=0;G<n.batchSize;++G)for(var $=G*S,X=G*y,Q=D;Q<F;++Q)for(var Y=(R+Q*r-T)*C+$,Z=Q*b+X,J=N;J<M;++J)for(var tt=(O+J*i-P)*A+Y,et=J*w+Z,nt=j;nt<U;++nt)W+=E[(V+nt*s-k)*I+tt+z]*g[nt*x+et+q];l[K+q]=W}return c.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var e=t.bias,n=t.activation,r=t.preluActivationWeights,i=this.depthwiseConv2D(t.input,t.filter,t.convInfo);return e&&(i=this.add(i,e)),n&&(i=uL(this,i,n,r)),i},e.prototype.depthwiseConv2D=function(t,e,n){aL([t,e],"depthwiseConv2D");for(var r=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,o=n.dilationWidth,a=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=pP(n.outShape,t.dtype),h=this.readSync(t.dataId),p=this.readSync(e.dataId),f=l.values,d=0;d<n.batchSize;++d)for(var m=d*t.strides[0],g=d*l.strides[0],v=0;v<n.outHeight;++v)for(var y=g+v*l.strides[1],b=v*n.strideHeight-a,w=0;w<r;++w){var x=b+w*s;if(!(x<0||x>=n.inHeight))for(var E=w*e.strides[0],_=m+x*t.strides[1],S=0;S<n.outWidth;++S)for(var C=y+S*l.strides[2],A=S*n.strideWidth-u,I=0;I<i;++I){var T=A+I*o;if(!(T<0||T>=n.inWidth))for(var k=_+T*n.inChannels,P=C,R=E+I*e.strides[1],D=0;D<n.inChannels;++D){for(var F=h[k+D],B=0;B<c;++B)f[P+B]+=F*p[R+B];P+=c,R+=c}}}return l.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,e,n){aL([t,e],"depthwiseConv2DDerInput");for(var r=pP(n.inShape,"float32"),i=r.values,s=r.strides,o=s[0],a=s[1],u=s[2],c=this.readSync(t.dataId),l=t.strides,h=l[0],p=l[1],f=l[2],d=this.readSync(e.dataId),m=e.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,E=n.inChannels,_=n.inHeight,S=n.inWidth,C=n.outHeight,A=n.outWidth,I=n.strideHeight,T=n.strideWidth,k=w-1-n.padInfo.top,P=x-1-n.padInfo.left,R=n.outChannels/E,D=0;D<b;++D)for(var F=0;F<E;++F)for(var B=0;B<_;++B)for(var O=B-k,N=Math.max(0,Math.ceil(O/I)),M=Math.min(C,(w+O)/I),L=0;L<S;++L){for(var V=L-P,j=Math.max(0,Math.ceil(V/T)),U=Math.min(A,(x+V)/T),H=0,z=N;z<M;++z)for(var K=z*I-O,q=j;q<U;++q)for(var W=h*D+p*z+f*q,G=g*(w-1-K)+v*(x-1-(q*T-V))+y*F,$=0;$<R;++$)H+=c[W+(F*R+$)]*d[G+$];i[o*D+a*B+u*L+F]=H}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,e,n){aL([t,e],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,i=n.strideWidth,s=n.filterHeight,o=n.filterWidth,a=pP(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,h=this.bufferSync(t),p=this.bufferSync(e),f=0;f<s;++f)for(var d=Math.max(0,Math.ceil((c-f)/r)),m=Math.min(n.outHeight,(n.inHeight+c-f)/r),g=0;g<o;++g)for(var v=Math.max(0,Math.ceil((u-g)/i)),y=Math.min(n.outWidth,(n.inWidth+u-g)/i),b=0;b<n.outChannels;++b){for(var w=Math.trunc(b/l),x=b%l,E=0,_=0;_<n.batchSize;++_)for(var S=d;S<m;++S)for(var C=f+S*r-c,A=v;A<y;++A)E+=h.get(_,C,g+A*i-u,w)*p.get(_,S,A,b);a.set(E,f,g,w,x)}return a.toTensor()},e.prototype.tile=function(t,e){return aL(t,"tile"),VR(this.bufferSync(t),e)},e.prototype.pad=function(t,e,n){aL(t,"pad");var r=e.map(function(e,n){return e[0]+t.shape[n]+e[1]}),i=e.map(function(t){return t[0]}),s=this.bufferSync(t),o=pP(r,t.dtype);0!==n&&o.values.fill(n);for(var a=0;a<t.size;a++){var u=s.indexToLoc(a),c=u.map(function(t,e){return t+i[e]});o.set.apply(o,[s.get.apply(s,u)].concat(c))}return o.toTensor()},e.prototype.transpose=function(t,e){aL(t,"transpose");for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[e[r]];var i=this.readSync(t.dataId),s=pP(n,t.dtype),o=this.bufferSync(t);for(r=0;r<t.size;++r){for(var a=o.indexToLoc(r),u=new Array(a.length),c=0;c<u.length;c++)u[c]=a[e[c]];var l=s.locToIndex(u);s.values[l]=i[r]}return s.toTensor()},e.prototype.gather=function(t,e,n){aL([t,e],"gather");var r=t.shape.slice(),i=this.readSync(e.dataId);r[n]=i.length;for(var s=pP(r,t.dtype),o=this.bufferSync(t),a=0;a<s.size;++a){var u=s.indexToLoc(a),c=u.slice();c[n]=i[u[n]];var l=o.locToIndex(c);s.values[a]=o.values[l]}return s.toTensor()},e.prototype.batchToSpaceND=function(t,e,n){aL([t],"batchToSpaceND");var r=e.reduce(function(t,e){return t*e}),i=VP(t.shape,e,r),s=jP(i.length,e.length),o=UP(t.shape,e,r),a=HP(n,e.length),u=zP(o,n,e.length);return t.reshape(i).transpose(s).reshape(o).slice(a,u)},e.prototype.spaceToBatchND=function(t,e,n){aL([t],"spaceToBatchND");var r=e.reduce(function(t,e){return t*e}),i=[[0,0]];i.push.apply(i,n);for(var s=1+e.length;s<t.shape.length;++s)i.push([0,0]);var o=t.pad(i),a=VP(o.shape,e,r,!1),u=jP(a.length,e.length,!1),c=UP(o.shape,e,r,!1);return o.reshape(a).transpose(u).reshape(c)},e.prototype.pool=function(t,e,n){aL(t,"pool");for(var r=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,o=e.dilationWidth,a=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,l=e.padInfo.left,h="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(t.dataId),f=pP(e.outShape,t.dtype),d=f.values,m=e.outShape[1]*e.outShape[2]*e.outShape[3],g=e.outShape[2]*e.outShape[3],v=e.outShape[3],y=0;y<e.batchSize;++y)for(var b=y*m,w=y*t.strides[0],x=0;x<e.inChannels;++x)for(var E=0;E<e.outHeight;++E)for(var _=E*r-c,S=Math.max(0,_),C=Math.min(e.inHeight,a+_),A=b+E*g,I=0;I<e.outWidth;++I){for(var T=I*i-l,k=Math.max(0,T),P=Math.min(e.inWidth,u+T),R=h,D=0,F=0,B=S;B<C;B+=s){for(var O=w+B*t.strides[1],N=k;N<P;N+=o){var M=p[O+N*t.strides[2]+x];"max"===n&&M>R?R=M:"avg"===n&&(D+=M,F++)}if(isNaN(R))break}d[A+I*v+x]="avg"===n?D/F:R}return f.toTensor()},e.prototype.maxPool=function(t,e){return this.pool(t,e,"max")},e.prototype.maxPoolPositions=function(t,e){for(var n=pP(e.outShape,"int32"),r=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,o=e.dilationWidth,a=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,l=e.padInfo.left,h=this.bufferSync(t),p=0;p<e.batchSize;++p)for(var f=0;f<e.inChannels;++f)for(var d=0;d<e.outHeight;++d){for(var m=d*r-c,g=m;g<0;)g+=s;for(var v=Math.min(e.inHeight,a+m),y=0;y<e.outWidth;++y){for(var b=y*i-l,w=b;w<0;)w+=o;for(var x=Math.min(e.inWidth,u+b),E=Number.NEGATIVE_INFINITY,_=-1,S=g;S<v;S+=s)for(var C=S-m,A=w;A<x;A+=o){var I=A-b,T=h.get(p,S,A,f);T>E&&(E=T,_=C*u+I)}n.set(_,p,d,y,f)}}return n.toTensor()},e.prototype.maxPoolBackprop=function(t,e,n,r){aL([e,n],"maxPoolBackprop");for(var i=this.maxPoolPositions(e,r),s=r.strideHeight,o=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,h=l-1-r.padInfo.left,p=c-1-r.padInfo.top,f=pP(e.shape,"float32"),d=this.bufferSync(i),m=this.bufferSync(t),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var w=y-p,x=b-h,E=0,_=0;_<c;_+=a){var S=(w+_)/s;if(!(S<0||S>=r.outHeight||Math.floor(S)!==S))for(var C=0;C<l;C+=u){var A=(x+C)/o;if(!(A<0||A>=r.outWidth||Math.floor(A)!==A)){var I=c*l-1-d.get(g,S,A,v)===_*l+C?1:0;0!==I&&(E+=m.get(g,S,A,v)*I)}}}f.set(E,g,y,b,v)}return f.toTensor()},e.prototype.avgPoolBackprop=function(t,e,n){aL([t,e],"avgPoolBackprop");for(var r=n.strideHeight,i=n.strideWidth,s=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,h=l-1-n.padInfo.left,p=c-1-n.padInfo.top,f=pP(e.shape,"float32"),d=1/(s*o),m=this.bufferSync(t),g=0;g<n.batchSize;++g)for(var v=0;v<n.inChannels;++v)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var w=y-p,x=b-h,E=0,_=0;_<c;_+=a){var S=(w+_)/r;if(!(S<0||S>=n.outHeight||Math.floor(S)!==S))for(var C=0;C<l;C+=u){var A=(x+C)/i;A<0||A>=n.outWidth||Math.floor(A)!==A||(E+=m.get(g,S,A,v))}}f.set(E*d,g,y,b,v)}return f.toTensor()},e.prototype.pool3d=function(t,e,n){aL(t,"pool3d");for(var r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.front,f=e.padInfo.top,d=e.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(t.dataId),v=pP(e.outShape,t.dtype),y=v.values,b=e.outShape[1]*e.outShape[2]*e.outShape[3]*e.outShape[4],w=e.outShape[2]*e.outShape[3]*e.outShape[4],x=e.outShape[3]*e.outShape[4],E=e.outShape[4],_=0;_<e.batchSize;++_)for(var S=_*b,C=_*t.strides[0],A=0;A<e.inChannels;++A)for(var I=0;I<e.outDepth;++I){for(var T=I*r-p,k=T;k<0;)k+=o;for(var P=Math.min(e.inDepth,c+T),R=S+I*w,D=0;D<e.outHeight;++D){for(var F=D*i-f,B=F;B<0;)B+=a;for(var O=Math.min(e.inHeight,l+F),N=R+D*x,M=0;M<e.outWidth;++M){for(var L=M*s-d,V=L;V<0;)V+=u;for(var j=Math.min(e.inWidth,h+L),U=N+M*E,H=m,z=0,K=0,q=k;q<P;q+=o){for(var W=C+q*t.strides[1],G=B;G<O;G+=a){for(var $=W+G*t.strides[2],X=V;X<j;X+=u){var Q=g[$+X*t.strides[3]+A];if("max"===n&&Q>H?H=Q:"avg"===n&&(z+=Q,K++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}y[U+A]="avg"===n?z/K:H}}}return v.toTensor()},e.prototype.avgPool3d=function(t,e){return aL(t,"avgPool3d"),this.pool3d(t,e,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,e,n){aL([t,e],"avgPool3dBackprop");for(var r=n.strideDepth,i=n.strideHeight,s=n.strideWidth,o=n.filterDepth,a=n.filterHeight,u=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,h=n.dilationWidth,p=n.effectiveFilterDepth,f=n.effectiveFilterHeight,d=n.effectiveFilterWidth,m=p-1-n.padInfo.front,g=d-1-n.padInfo.left,v=f-1-n.padInfo.top,y=pP(e.shape,"float32"),b=1/(o*a*u),w=this.bufferSync(t),x=0;x<n.batchSize;++x)for(var E=0;E<n.inChannels;++E)for(var _=0;_<n.inDepth;++_)for(var S=0;S<n.inHeight;++S)for(var C=0;C<n.inWidth;++C){for(var A=_-m,I=S-v,T=C-g,k=0,P=0;P<p;P+=c){var R=(A+P)/r;if(!(R<0||R>=n.outDepth||Math.floor(R)!==R))for(var D=0;D<f;D+=l){var F=(I+D)/i;if(!(F<0||F>=n.outHeight||Math.floor(F)!==F))for(var B=0;B<d;B+=h){var O=(T+B)/s;O<0||O>=n.outWidth||Math.floor(O)!==O||(k+=w.get(x,R,F,O,E))}}}y.set(k*b,x,_,S,C,E)}return y.toTensor()},e.prototype.maxPool3d=function(t,e){return aL(t,"maxPool3d"),this.pool3d(t,e,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,e){for(var n=pP(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.front,f=e.padInfo.top,d=e.padInfo.left,m=this.bufferSync(t),g=0;g<e.batchSize;++g)for(var v=0;v<e.inChannels;++v)for(var y=0;y<e.outDepth;++y){for(var b=y*r-p,w=b;w<0;)w+=o;for(var x=Math.min(e.inDepth,c+b),E=0;E<e.outHeight;++E){for(var _=E*i-f,S=_;S<0;)S+=a;for(var C=Math.min(e.inHeight,l+_),A=0;A<e.outWidth;++A){for(var I=A*s-d,T=I;T<0;)T+=u;for(var k=Math.min(e.inWidth,h+I),P=Number.NEGATIVE_INFINITY,R=-1,D=w;D<x;D+=o)for(var F=D-b,B=S;B<C;B+=a)for(var O=B-_,N=T;N<k;N+=u){var M=N-I,L=m.get(g,D,B,N,v);L>=P&&(P=L,R=F*l*h+O*l+M)}n.set(R,g,y,E,A,v)}}}return n.toTensor()},e.prototype.maxPool3dBackprop=function(t,e,n,r){aL([e,n],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(e,r),s=r.strideDepth,o=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,h=r.effectiveFilterDepth,p=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=h-1-r.padInfo.front,m=f-1-r.padInfo.left,g=p-1-r.padInfo.top,v=pP(e.shape,"float32"),y=this.bufferSync(i),b=this.bufferSync(t),w=0;w<r.batchSize;++w)for(var x=0;x<r.inChannels;++x)for(var E=0;E<r.inDepth;++E)for(var _=0;_<r.inHeight;++_)for(var S=0;S<r.inWidth;++S){for(var C=E-d,A=_-g,I=S-m,T=0,k=0;k<h;k+=u){var P=(C+k)/s;if(!(P<0||P>=r.outDepth||Math.floor(P)!==P))for(var R=0;R<p;R+=c){var D=(A+R)/o;if(!(D<0||D>=r.outHeight||Math.floor(D)!==D))for(var F=0;F<f;F+=l){var B=(I+F)/a;if(!(B<0||B>=r.outWidth||Math.floor(B)!==B)){var O=h*p*f-1-y.get(w,P,D,B,x)===k*p*f+R*f+F?1:0;0!==O&&(T+=b.get(w,P,D,B,x)*O)}}}}v.set(T,w,E,_,S,x)}return v.toTensor()},e.prototype.cast=function(t,e){return _R(t,e,this)},e.prototype.reshape=function(t,e){return SR(t,e)},e.prototype.avgPool=function(t,e){return aL(t,"avgPool"),this.pool(t,e,"avg").toFloat()},e.prototype.resizeBilinear=function(t,e,n,r){aL(t,"resizeBilinear");for(var i=t.shape,s=i[0],o=i[1],a=i[2],u=i[3],c=this.readSync(t.dataId),l=new Float32Array(nI([s,e,n,u])),h=[r&&e>1?o-1:o,r&&n>1?a-1:a],p=[r&&e>1?e-1:e,r&&n>1?n-1:n],f=0,d=h[0]/p[0],m=h[1]/p[1],g=0;g<s;g++)for(var v=0;v<e;v++)for(var y=d*v,b=Math.floor(y),w=y-b,x=Math.min(o-1,Math.ceil(y)),E=g*t.strides[0]+b*t.strides[1],_=g*t.strides[0]+x*t.strides[1],S=0;S<n;S++)for(var C=m*S,A=Math.floor(C),I=C-A,T=Math.min(a-1,Math.ceil(C)),k=E+A*t.strides[2],P=_+A*t.strides[2],R=E+T*t.strides[2],D=_+T*t.strides[2],F=0;F<u;F++){var B=c[k+F],O=c[P+F],N=B+(c[R+F]-B)*I;l[f++]=N+(O+(c[D+F]-O)*I-N)*w}return Ok(l,[s,e,n,u])},e.prototype.resizeBilinearBackprop=function(t,e,n){aL([t,e],"resizeBilinearBackprop");for(var r=e.shape,i=r[0],s=r[1],o=r[2],a=r[3],u=t.shape,c=u[1],l=u[2],h=new Float32Array(i*s*o*a),p=[n&&c>1?s-1:s,n&&l>1?o-1:o],f=[n&&c>1?c-1:c,n&&l>1?l-1:l],d=p[0]/f[0],m=p[1]/f[1],g=this.readSync(t.dataId),v=0,y=0;y<i;y++)for(var b=y*e.strides[0],w=0;w<c;w++)for(var x=w*d,E=Math.floor(x),_=Math.min(Math.ceil(x),s-1),S=b+E*e.strides[1],C=b+_*e.strides[1],A=x-E,I=1-A,T=0;T<l;T++)for(var k=T*m,P=Math.floor(k),R=Math.min(Math.ceil(k),o-1),D=k-P,F=1-D,B=S+P*e.strides[2],O=S+R*e.strides[2],N=C+P*e.strides[2],M=C+R*e.strides[2],L=I*F,V=I*D,j=A*F,U=A*D,H=0;H<a;H++){var z=g[v++];h[B+H]+=z*L,h[O+H]+=z*V,h[N+H]+=z*j,h[M+H]+=z*U}return Uk(h,[i,o,s,a],e.dtype)},e.prototype.resizeNearestNeighbor=function(t,e,n,r){aL(t,"resizeNearestNeighbor");for(var i=t.shape,s=i[0],o=i[1],a=i[2],u=i[3],c=this.readSync(t.dataId),l=new Float32Array(s*e*n*u),h=[r&&e>1?o-1:o,r&&n>1?a-1:a],p=[r&&e>1?e-1:e,r&&n>1?n-1:n],f=h[0]/p[0],d=h[1]/p[1],m=0,g=0;g<s;g++)for(var v=g*t.strides[0],y=0;y<e;y++)for(var b=f*y,w=v+Math.min(o-1,r?Math.round(b):Math.floor(b))*t.strides[1],x=0;x<n;x++)for(var E=d*x,_=w+Math.min(a-1,r?Math.round(E):Math.floor(E))*t.strides[2],S=0;S<u;S++)l[m++]=c[_+S];return Ok(l,[s,e,n,u],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,e,n){aL([t,e],"resizeNearestNeighborBackprop");for(var r=e.shape,i=r[0],s=r[1],o=r[2],a=r[3],u=t.shape,c=u[1],l=u[2],h=new Float32Array(i*s*o*a),p=this.readSync(t.dataId),f=[n&&c>1?s-1:s,n&&l>1?o-1:o],d=[n&&c>1?c-1:c,n&&l>1?l-1:l],m=f[0]/d[0],g=f[1]/d[1],v=1/m,y=1/g,b=2*Math.ceil(v)+2,w=2*Math.ceil(y)+2,x=0;x<i;x++)for(var E=x*e.strides[0],_=0;_<s;_++)for(var S=E+_*e.strides[1],C=Math.floor(_*v),A=Math.floor(C-b/2),I=0;I<o;I++)for(var T=S+I*e.strides[2],k=Math.floor(I*y),P=Math.floor(k-w/2),R=0;R<a;R++){for(var D=0,F=0;F<b;F++){var B=F+A;if(!(B<0||B>=c)){var O=E+B*t.strides[1],N=B*m;if(_===Math.min(s-1,n?Math.round(N):Math.floor(N)))for(var M=0;M<w;M++){var L=M+P;if(!(L<0||L>=l)){var V=O+L*t.strides[2],j=L*g;I===Math.min(o-1,n?Math.round(j):Math.floor(j))&&(D+=p[V+R])}}}}h[T+R]=D}return Uk(h,e.shape,e.dtype)},e.prototype.batchNormalization=function(t,e,n,r,i,s){aL([t,e,n,i,s],"batchNorm");for(var o=this.readSync(t.dataId),a=this.readSync(e.dataId),u=this.readSync(n.dataId),c=i?this.readSync(i.dataId):new Float32Array([1]),l=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(o.length),p=l.length,f=c.length,d=u.length,m=a.length,g=0,v=0,y=0,b=0,w=0;w<o.length;++w)h[w]=l[g++]+(o[w]-a[v++])*c[y++]/Math.sqrt(u[b++]+r),g>=p&&(g=0),v>=m&&(v=0),y>=f&&(y=0),b>=d&&(b=0);return Uk(h,t.shape)},e.prototype.localResponseNormalization4D=function(t,e,n,r,i){aL(t,"localResponseNormalization4D");var s=t.shape[3],o=s-1,a=this.readSync(t.dataId),u=t.size,c=new Float32Array(u);function l(t){for(var n=t%s,r=t-n+Math.max(0,n-e),i=t-n+Math.min(n+e,o),u=0;r<=i;r++){var c=a[r];u+=c*c}return u}for(var h=0;h<u;h++){var p=l(h),f=a[h]*Math.pow(n+r*p,-i);c[h]=f}return Uk(c,t.shape)},e.prototype.LRNGrad=function(t,e,n,r,i,s,o){aL(t,"LRNGrad");for(var a=t.shape[3],u=this.readSync(t.dataId),c=this.readSync(e.dataId),l=this.readSync(n.dataId),h=new Float32Array(t.size),p=t.size,f=0;f<p;f++){for(var d=f%a,m=f-d+Math.max(0,d-r),g=f-d+Math.min(a,d+r+1),v=0,y=m;y<g;y++)v+=Math.pow(c[y],2);for(v=s*v+i,y=m;y<g;y++){var b=-2*s*o*c[y]*l[f]/v;f===y&&(b+=Math.pow(v,-o)),h[y]+=b*=u[f]}}return Uk(h,t.shape)},e.prototype.multinomial=function(t,e,n,r){aL(t,"multinomial");for(var i=e?t:rR(t),s=i.shape[0],o=i.shape[1],a=zk([s,n],"int32"),u=this.readSync(a.dataId),c=this.readSync(i.dataId),l=0;l<s;++l){var h=l*o,p=new Float32Array(o-1);p[0]=c[h];for(var f=1;f<p.length;++f)p[f]=p[f-1]+c[h+f];for(var d=uP(r.toString()),m=l*n,g=0;g<n;++g){var v=d();u[m+g]=p.length;for(var y=0;y<p.length;y++)if(v<p[y]){u[m+g]=y;break}}}return a},e.prototype.oneHot=function(t,e,n,r){aL(t,"oneHot");var i=new Float32Array(t.size*e);i.fill(r);for(var s=this.readSync(t.dataId),o=0;o<t.size;++o)s[o]>=0&&s[o]<e&&(i[o*e+s[o]]=n);return Vk(i,[t.size,e],"int32")},e.prototype.nonMaxSuppression=function(t,e,n,r,i){return aL(t,"nonMaxSuppression"),DR(this.readSync(t.dataId),this.readSync(e.dataId),n,r,i)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,e){for(var n=t.shape[0],r=t.shape[1],i=pP(t.shape,"float32"),s=pP(t.shape,"float32"),o=Fk(t).as2D(n,r),a=Bk(t).as2D(n,r),u=0;u<n;u++)for(var c=o.slice([u,0],[1,r]),l=a.slice([u,0],[1,r]),h=Dk(c,l),p=this.readSync(this.fftImpl(h,e).dataId),f=0;f<r;f++){var d=IR(p,f);i.values[u*r+f]=d.real,s.values[u*r+f]=d.imag}return Dk(i.toTensor(),s.toTensor()).as2D(n,r)},e.prototype.fftImpl=function(t,e){var n=t.as1D(),r=n.size;if(this.isExponentOf2(r)){var i=this.fftRadix2(n,r,e).as2D(t.shape[0],t.shape[1]);return e&&(i=Dk(Fk(i).div(Mk(r)),Bk(i).div(Mk(r)))),i}var s=this.readSync(t.dataId),o=function(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}(this.fourierTransformByMatmul(s,r,e));return Dk(o.real,o.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return 0==(t&t-1)},e.prototype.fftRadix2=function(t,e,n){if(1===e)return t;var r=this.readSync(t.dataId),i=e/2,s=function(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}(r),o=Dk(s.real,s.imag).as1D(),a=function(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}(r),u=Dk(a.real,a.imag).as1D();o=this.fftRadix2(o,i,n),u=this.fftRadix2(u,i,n);var c=function(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),i=0;i<Math.ceil(t/2);i++){var s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}(e,n),l=Dk(c.real,c.imag).mul(u),h=o.add(l),p=o.sub(l),f=Fk(h).concat(Fk(p)),d=Bk(h).concat(Bk(p));return Dk(f,d).as1D()},e.prototype.fourierTransformByMatmul=function(t,e,n){for(var r=new Float32Array(2*e),i=0;i<e;i++){for(var s=0,o=0,a=0;a<e;a++){var u=kR(i*a,e,n),c=IR(t,a);s+=c.real*u.real-c.imag*u.imag,o+=c.real*u.imag+c.imag*u.real}n&&(s/=e,o/=e),TR(r,s,o,i)}return r},e.prototype.depthToSpace=function(t,e,n){ZA("NHWC"===n,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n}),ZA(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});for(var r=t.shape[0],i=t.shape[1],s=t.shape[2],o=t.shape[3],a=i*e,u=s*e,c=o/(e*e),l=this.readSync(t.dataId),h=new Float32Array(r*a*u*c),p=0,f=0;f<r;++f)for(var d=0;d<a;++d)for(var m=Math.floor(d/e),g=d%e,v=0;v<u;++v)for(var y=Math.floor(v/e),b=(g*e+v%e)*c,w=0;w<c;++w)h[p++]=l[w+b+o*(y+s*(m+i*f))];return Uk(h,[r,a,u,c])},e.prototype.broadcastedBinaryOp=function(t,e,n,r){var i=lR(t.shape,e.shape),s=pP(i,n),o=this.readSync(t.dataId),a=this.readSync(e.dataId),u=uR(t.shape,i),c=uR(e.shape,i),l=s.values;if(u.length+c.length===0)for(var h=0;h<l.length;++h)l[h]=r(o[h%o.length],a[h%a.length]);else{var p=this.bufferSync(t),f=this.bufferSync(e),d=function(n){var i=s.indexToLoc(n),h=i.slice(-t.rank);u.forEach(function(t){return h[t]=0});var d=p.locToIndex(h),m=i.slice(-e.rank);c.forEach(function(t){return m[t]=0});var g=f.locToIndex(m);l[n]=r(o[d],a[g])};for(h=0;h<l.length;++h)d(h)}return s.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,e,n){var r=lR(t.shape,e.shape),i=pP(r,"float32"),s=pP(r,"float32"),o=this.readSync(t.dataId),a=this.readSync(e.dataId),u=uR(t.shape,r),c=uR(e.shape,r),l=i.values,h=s.values;if(u.length+c.length===0)for(var p=0;p<l.length;p++){var f=p%o.length,d=p%a.length,m=n(o[2*f],o[2*f+1],a[2*d],a[2*d+1]);l[p]=m.real,h[p]=m.imag}else{var g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),v=this.bufferSync(this.data.get(e.dataId).complexTensors.real),y=function(r){var s=i.indexToLoc(r),p=s.slice(-t.rank);u.forEach(function(t){return p[t]=0});var f=g.locToIndex(p),d=s.slice(-e.rank);c.forEach(function(t){return d[t]=0});var m=v.locToIndex(d),y=n(o[2*f],o[2*f+1],a[2*m],a[2*m+1]);l[r]=y.real,h[r]=y.imag};for(p=0;p<l.length;p++)y(p)}return this.complex(i.toTensor(),s.toTensor())},e.prototype.split=function(t,e,n){return LR(t,e,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,e,n,r,i,s){for(var o=t.shape,a=o[0],u=o[1],c=o[2],l=o[3],h=e.shape[0],p=r[0],f=r[1],d=pP([h,p,f,l],"float32"),m=this.readSync(e.dataId),g=this.readSync(n.dataId),v=this.readSync(t.dataId),y=t.strides,b=d.strides,w=0;w<h;w++){var x=4*w,E=m[x],_=m[x+1],S=m[x+2],C=m[x+3],A=g[w];if(!(A>=a))for(var I=p>1?(S-E)*(u-1)/(p-1):0,T=f>1?(C-_)*(c-1)/(f-1):0,k=0;k<p;k++){var P=p>1?E*(u-1)+k*I:.5*(E+S)*(u-1);if(P<0||P>u-1)for(var R=0;R<f;R++)for(var D=0;D<l;D++){var F=D+R*b[2]+k*b[1]+w*b[0];d.values[F]=s}else if("bilinear"===i){var B=Math.floor(P),O=Math.ceil(P),N=P-B;for(R=0;R<f;R++)if((q=f>1?_*(c-1)+R*T:.5*(_+C)*(c-1))<0||q>c-1)for(D=0;D<l;D++)d.values[F=D+R*b[2]+k*b[1]+w*b[0]]=s;else{var M=Math.floor(q),L=Math.ceil(q),V=q-M;for(D=0;D<l;D++){var j=v[F=D+M*y[2]+B*y[1]+A*y[0]],U=v[F=D+L*y[2]+B*y[1]+A*y[0]],H=v[F=D+M*y[2]+O*y[1]+A*y[0]],z=j+(U-j)*V,K=H+(v[F=D+L*y[2]+O*y[1]+A*y[0]]-H)*V;d.values[F=D+R*b[2]+k*b[1]+w*b[0]]=z+(K-z)*N}}}else for(R=0;R<f;++R){var q;if((q=f>1?_*(c-1)+R*T:.5*(_+C)*(c-1))<0||q>c-1)for(D=0;D<l;D++)d.values[F=D+R*b[2]+k*b[1]+w*b[0]]=s;else{var W=Math.round(q),G=Math.round(P);for(D=0;D<l;D++)d.values[D+R*b[2]+k*b[1]+w*b[0]]=v[D+W*y[2]+G*y[1]+A*y[0]]}}}}return d.toTensor()},e.prototype.sparseToDense=function(t,e,n,r){var i=$P(0,t,n);return this.scatter(t,e,n,i.outputSize,i.sliceSize,i.numUpdates,i.sliceRank,i.strides,r,!1)},e.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],i=KP(t,e),s=i[0],o=i[1],a=i[2],u=i[3];if(0===o)return Ok([],s,t.dtype);for(var c=new HI([o,a],t.dtype),l=this.readSync(e.dataId),h=this.readSync(t.dataId),p=0;p<o;p++){for(var f=[],d=0,m=0;m<r;m++){var g=l[p*r+m];d+=g*u[m],f.push(g)}if(d<0||d>=t.size/a)throw new Error("Invalid indices: "+f+" does not index into "+t.shape);for(var v=0;v<a;v++)c.values[p*a+v]=h[d*a+v]}return c.toTensor().reshape(s)},e.prototype.scatterND=function(t,e,n){var r=$P(0,t,n),i=r.sliceRank,s=r.numUpdates,o=r.sliceSize,a=r.strides,u=r.outputSize,c=Mk(0);return this.scatter(t,e,n,u,o,s,i,a,c,!0)},e.prototype.fill=function(t,e,n){var r=fI(n=n||_I(e),nI(t));return r.fill(e),uT.makeTensor(r,t,n,this)},e.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var e=fI(t.dtype,nI(t.shape));return this.makeOutput(e,t.shape,t.dtype)},e.prototype.linspace=function(t,e,n){return CR(t,e,n)},e.prototype.scatter=function(t,e,n,r,i,s,o,a,u,c){var l=[r/i,i],h=this.readSync(t.dataId),p=this.readSync(e.dataId);if(0===r)return Ok([],n,e.dtype);var f=new HI(l,e.dtype);f.values.fill(this.readSync(u.dataId)[0]);for(var d=0;d<s;d++){for(var m=[],g=0,v=0;v<o;v++){var y=h[d*o+v];m.push(y),g+=y*a[v]}if(g<0||g>=r/i)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<i;b++)c?f.values[g*i+b]+=p[d*i+b]:f.values[g*i+b]=0===e.rank?p[0]:p[d*i+b]}return f.toTensor().reshape(n)},e}(oR);uT.registerBackend("cpu",function(){return new cL},1);for(var lL=0,hL=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=e.boxes,i=e.scores,s=n.maxOutputSize,o=n.iouThreshold,a=n.scoreThreshold,u=n.softNmsSigma,c=t.backend;aL(r,"NonMaxSuppressionWithScore");var l=FR(c.data.get(r.dataId).values,c.data.get(i.dataId).values,s,o,a,u);return[l.selectedIndices,l.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs.x,n=t.backend;aL(e,"square");for(var r=n.data.get(e.dataId).values,i=new Float32Array(r.length),s=0;s<r.length;++s){var o=r[s];i[s]=o*o}return{dataId:n.write(i,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}},{kernelName:EB,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=e.a,r=e.b,i=t.backend;aL([n,r],EB);var s=i.data.get(n.dataId).values,o=i.data.get(r.dataId).values,a=function(t,e,n,r,i,s){var o=lR(t,e),a=o.length,u=AI(o),c=pI(i,nI(o)),l=t.length,h=e.length,p=AI(t),f=AI(e),d=uR(t,o),m=uR(e,o);if(d.length+m.length===0)for(var g=0;g<c.length;++g)c[g]=s(n[g%n.length],r[g%r.length]);else{var v=function(t){var e=NI(t,a,u),i=e.slice(-l);d.forEach(function(t){return i[t]=0});var o=OI(i,l,p),g=e.slice(-h);m.forEach(function(t){return g[t]=0});var v=OI(g,h,f);c[t]=s(n[o],r[v])};for(g=0;g<c.length;++g)v(g)}return[c,o]}(n.shape,r.shape,s,o,n.dtype,function(t,e){var n=t-e;return n*n}),u=a[1];return{dataId:i.write(a[0],u,n.dtype),shape:u,dtype:n.dtype}}}];lL<hL.length;lL++)qA(hL[lL]);for(var pL,fL=function(t){this.variableNames=["A"];var e=GR(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+e.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},dL=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=GR(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+e.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+e.output+" = result;\n      }\n    "},mL=0,gL=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.backend,n=t.inputs.pixels,r="undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement,i="undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement,s=r?[n.videoWidth,n.videoHeight]:[n.width,n.height],o=s[0],a=s[1],u=[a,o],c=[a,o,t.attrs.numChannels];(i||r)&&(null==pL&&(pL=document.createElement("canvas").getContext("2d")),pL.canvas.width=o,pL.canvas.height=a,pL.drawImage(n,0,0,o,a),n=pL.canvas);var l=e.makeTensorInfo(u,"int32");e.texData.get(l.dataId).usage=pT.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(l.dataId),n);var h=VA().getBool("WEBGL_PACK")?new dL(c):new fL(c),p=e.runWebGLProgram(h,[l],"int32");return e.disposeData(l.dataId),p}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;gk("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=e.scores,s=r.maxOutputSize,o=r.iouThreshold,a=r.scoreThreshold,u=r.softNmsSigma,c=n,l=FR(c.readSync(e.boxes.dataId),c.readSync(i.dataId),s,o,a,u);return[l.selectedIndices,l.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs.x,n=t.backend,r=new eB(e.shape,"return x * x;");return n.runWebGLProgram(r,[e],e.dtype)}},{kernelName:EB,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=e.a,r=e.b,i=t.backend,s=VA().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xD("return (a - b) * (a - b);",n.shape,r.shape):new bD("return (a - b) * (a - b);",n.shape,r.shape);return i.compileAndRun(s,[n,r])}}];mL<gL.length;mL++)qA(gL[mL]);for(var vL=0,yL=[{kernelName:"Square",gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:EB,gradFunc:function(t,e){var n=e[0],r=e[1],i=Mk(2);return{a:function(){return LO(t,LO(i,zO(n,r)))},b:function(){return LO(t,LO(i,zO(r,n)))}}}}];vL<yL.length;vL++)WA(yL[vL]);var bL=function(){function t(){}return t.prototype.fetch=function(t,e){return fetch(t,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},t.prototype.decode=function(t,e){return new TextDecoder(e).decode(t)},t}();VA().get("IS_BROWSER")&&VA().setPlatform("browser",new bL);var wL,xL=function(){function t(){this.util=n(5118),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(t,e){return null!=VA().global.fetch?VA().global.fetch(t,e):(null==wL&&(wL=n(3655)),wL(t,e))},t.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},t.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)},t.prototype.decode=function(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)},t}();VA().get("IS_NODE")&&VA().setPlatform("node",new xL);var EL={float32:4,int32:4,uint16:2,uint8:1,bool:1};function _L(t,e){for(var n={},r=0,i=function(e){var i=e.name,s=e.dtype,o=e.shape,a=nI(o),u=void 0;if("quantization"in e){var c=e.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+e.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var l=EL[c.dtype],h=t.slice(r,r+a*l),p="uint8"===c.dtype?new Uint8Array(h):new Uint16Array(h);if("float32"===s)u=Float32Array.from(p,function(t){return t*c.scale+c.min});else{if("int32"!==s)throw new Error("Unsupported dtype in weight '"+i+"': "+s);u=Int32Array.from(p,function(t){return Math.round(t*c.scale+c.min)})}r+=a*l}else if("string"===s){var f=nI(e.shape);u=[];for(var d=0;d<f;d++){var m=new Uint32Array(t.slice(r,r+4))[0];r+=4;var g=new Uint8Array(t.slice(r,r+m));u.push(g),r+=m}}else{var v=EL[s];if(h=t.slice(r,r+a*v),"float32"===s)u=new Float32Array(h);else if("int32"===s)u=new Int32Array(h);else{if("bool"!==s)throw new Error("Unsupported dtype in weight '"+i+"': "+s);u=new Uint8Array(h)}r+=a*v}n[i]=Ok(u,o,s)},s=0,o=e;s<o.length;s++)i(o[s]);return n}function SL(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(t){if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)});var r=new Uint8Array(e),i=0;return n.forEach(function(t){r.set(new Uint8Array(t.buffer),i),i+=t.byteLength}),r.buffer}var CL="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function AL(t){return CL?Buffer.byteLength(t):new Blob([t]).size}function IL(t){var e=0;t.forEach(function(t){e+=t.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(t){n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function TL(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function kL(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:AL(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:AL(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}var PL=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var i=[];return("load"===n?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(t){var n=t(e,r);null!==n&&i.push(n)}),i},t}(),RL="://",DL=function(){function t(){this.managers={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerManager=function(e,n){ZA(null!=e,function(){return"scheme must not be undefined or null."}),e.endsWith(RL)&&(e=e.slice(0,e.indexOf(RL))),ZA(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();ZA(null==r.managers[e],function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function FL(t){if(-1===t.indexOf(RL))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+DL.getSchemes().join(","));return{scheme:t.split(RL)[0],path:t.split(RL)[1]}}function BL(t,e,n){return void 0===n&&(n=!1),OA(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return NA(this,function(p){switch(p.label){case 0:return ZA(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),ZA((r=PL.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),ZA(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],ZA((s=PL.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),ZA(s.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),o=s[0],a=FL(t).scheme,u=FL(t).path,c=a===FL(t).scheme,[4,i.load()];case 1:return l=p.sent(),n&&c?[4,DL.getManager(a).removeModel(u)]:[3,3];case 2:p.sent(),p.label=3;case 3:return[4,o.save(l)];case 4:return h=p.sent(),!n||c?[3,6]:[4,DL.getManager(a).removeModel(u)];case 5:p.sent(),p.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var OL="models_store",NL="model_info_store";function ML(){if(!VA().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function LL(t){var e=t.result;e.createObjectStore(OL,{keyPath:"modelPath"}),e.createObjectStore(NL,{keyPath:"modelPath"})}var VL=function(){function t(t){if(this.indexedDB=ML(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return t.prototype.save=function(t){return OA(this,void 0,void 0,function(){return NA(this,function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},t.prototype.load=function(){return OA(this,void 0,void 0,function(){return NA(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(t,e){var n=this;return new Promise(function(t,r){var i=n.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return LL(i)},i.onsuccess=function(){var s=i.result;if(null==e){var o=s.transaction(OL,"readonly"),a=o.objectStore(OL).get(n.modelPath);a.onsuccess=function(){if(null==a.result)return s.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));t(a.result.modelArtifacts)},a.onerror=function(t){return s.close(),r(a.error)},o.oncomplete=function(){return s.close()}}else{var u,c=kL(e),l=s.transaction(NL,"readwrite"),h=l.objectStore(NL),p=h.put({modelPath:n.modelPath,modelArtifactsInfo:c});p.onsuccess=function(){var i=(u=s.transaction(OL,"readwrite")).objectStore(OL).put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:c});i.onsuccess=function(){return t({modelArtifactsInfo:c})},i.onerror=function(t){var e=(h=l.objectStore(NL)).delete(n.modelPath);e.onsuccess=function(){return s.close(),r(i.error)},e.onerror=function(t){return s.close(),r(i.error)}}},p.onerror=function(t){return s.close(),r(p.error)},l.oncomplete=function(){null==u?s.close():u.oncomplete=function(){return s.close()}}}},i.onerror=function(t){return r(i.error)}})},t.URL_SCHEME="indexeddb://",t}(),jL=function(t){return VA().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(VL.URL_SCHEME)?(e=t.slice(VL.URL_SCHEME.length),new VL(e)):null;var e};PL.registerSaveRouter(jL),PL.registerLoadRouter(jL);var UL=function(){function t(){this.indexedDB=ML()}return t.prototype.listModels=function(){return OA(this,void 0,void 0,function(){var t=this;return NA(this,function(e){return[2,new Promise(function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return LL(r)},r.onsuccess=function(){var t=r.result,i=t.transaction(NL,"readonly"),s=i.objectStore(NL).getAll();s.onsuccess=function(){for(var t={},n=0,r=s.result;n<r.length;n++){var i=r[n];t[i.modelPath]=i.modelArtifactsInfo}e(t)},s.onerror=function(e){return t.close(),n(s.error)},i.oncomplete=function(){return t.close()}},r.onerror=function(t){return n(r.error)}})]})})},t.prototype.removeModel=function(t){return OA(this,void 0,void 0,function(){var e=this;return NA(this,function(n){var r;return t=(r=t).startsWith(VL.URL_SCHEME)?r.slice(VL.URL_SCHEME.length):r,[2,new Promise(function(n,r){var i=e.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return LL(i)},i.onsuccess=function(){var e,s=i.result,o=s.transaction(NL,"readwrite"),a=o.objectStore(NL),u=a.get(t);u.onsuccess=function(){if(null==u.result)return s.close(),r(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var i=a.delete(t),o=function(){var i=(e=s.transaction(OL,"readwrite")).objectStore(OL).delete(t);i.onsuccess=function(){return n(u.result.modelArtifactsInfo)},i.onerror=function(t){return r(u.error)}};i.onsuccess=o,i.onerror=function(t){return o(),s.close(),r(u.error)}},u.onerror=function(t){return s.close(),r(u.error)},o.oncomplete=function(){null==e?s.close():e.oncomplete=function(){return s.close()}}},i.onerror=function(t){return r(i.error)}})]})})},t}();if(VA().getBool("IS_BROWSER"))try{DL.registerManager(VL.URL_SCHEME,new UL)}catch(lS){}var HL="/",zL="tensorflowjs_models",KL="info",qL="model_topology",WL="weight_specs",GL="weight_data",$L="model_metadata";function XL(t){return{info:[zL,t,KL].join(HL),topology:[zL,t,qL].join(HL),weightSpecs:[zL,t,WL].join(HL),weightData:[zL,t,GL].join(HL),modelMetadata:[zL,t,$L].join(HL)}}function QL(t){var e=t.split(HL);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(HL)}var YL=function(){function t(t){if(!VA().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=XL(this.modelPath)}return t.prototype.save=function(t){return OA(this,void 0,void 0,function(){var e,n,r;return NA(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=kL(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(t){if(CL)return Buffer.from(t).toString("base64");for(var e=new Uint8Array(t),n="",r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return OA(this,void 0,void 0,function(){var t,e,n,r,i,s,o;return NA(this,function(a){if(null==(t=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=r,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(s=JSON.parse(i),e.format=s.format,e.generatedBy=s.generatedBy,e.convertedBy=s.convertedBy,e.userDefinedMetadata=s.userDefinedMetadata),null==(o=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(t){if(CL){var e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r.set([n.charCodeAt(i)],i);return r.buffer}(o),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),ZL=function(t){return VA().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(YL.URL_SCHEME)?(e=t.slice(YL.URL_SCHEME.length),new YL(e)):null;var e};PL.registerSaveRouter(ZL),PL.registerLoadRouter(ZL);var JL=function(){function t(){ZA(VA().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),ZA("undefined"==typeof window||void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return OA(this,void 0,void 0,function(){var t,e,n,r,i,s;return NA(this,function(o){for(t={},e=zL+HL,n=HL+KL,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(e)&&i.endsWith(n)&&(s=QL(i),t[s]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},t.prototype.removeModel=function(t){return OA(this,void 0,void 0,function(){var e,n;return NA(this,function(r){var i;if(t=(i=t).startsWith(YL.URL_SCHEME)?i.slice(YL.URL_SCHEME.length):i,e=XL(t),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,n]})})},t}();if(VA().getBool("IS_BROWSER"))try{DL.registerManager(YL.URL_SCHEME,new JL)}catch(lS){}function tV(t){return new Promise(function(t){return setTimeout(t)}).then(t)}var eV=function(){function t(e){if(!VA().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelTopologyFileName=e+".json",this.weightDataFileName=e+".weights.bin"}return t.prototype.save=function(t){return OA(this,void 0,void 0,function(){var e,n,r,i;return NA(this,function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]})],{type:"application/json"})),(r=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,r.href=n,[4,tV(function(){return r.dispatchEvent(new MouseEvent("click"))})];case 2:return s.sent(),null==t.weightData?[3,4]:((i=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,i.href=e,[4,tV(function(){return i.dispatchEvent(new MouseEvent("click"))})]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:kL(t)}]}})})},t.URL_SCHEME="downloads://",t}(),nV=function(){function t(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return t.prototype.load=function(){return OA(this,void 0,void 0,function(){var t,e,n=this;return NA(this,function(r){return t=this.files[0],e=this.files.slice(1),[2,new Promise(function(r,i){var s=new FileReader;s.onload=function(s){var o=JSON.parse(s.target.result),a=o.modelTopology;if(null!=a){0===e.length&&r({modelTopology:a});var u=o.weightsManifest;if(null!=u){var c;try{c=n.checkManifestAndWeightFiles(u,e)}catch(t){return void i(t)}var l=[],h=[],p=[];u.forEach(function(t){t.paths.forEach(function(t){h.push(t),p.push(null)}),l.push.apply(l,t.weights)}),u.forEach(function(t){t.paths.forEach(function(t){var e=new FileReader;e.onload=function(e){var n=e.target.result,i=h.indexOf(t);p[i]=n,-1===p.indexOf(null)&&r({modelTopology:a,weightSpecs:l,weightData:IL(p),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,userDefinedMetadata:o.userDefinedMetadata})},e.onerror=function(e){return i("Failed to weights data from file of path '"+t+"'.")},e.readAsArrayBuffer(c[t])})})}else i(new Error("weightManifest field is missing from file "+t.name))}else i(new Error("modelTopology field is missing from file "+t.name))},s.onerror=function(e){return i("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(t)})]})})},t.prototype.checkManifestAndWeightFiles=function(t,e){for(var n=[],r=e.map(function(t){return TL(t.name)}),i={},s=0,o=t;s<o.length;s++)o[s].paths.forEach(function(t){var s=TL(t);if(-1!==n.indexOf(s))throw new Error("Duplicate file basename found in weights manifest: '"+s+"'");if(n.push(s),-1===r.indexOf(s))throw new Error("Weight file with basename '"+s+"' is not provided.");i[t]=e[r.indexOf(s)]});if(n.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+e.length+").");return i},t}();function rV(t,e,n,r){!function(t){ZA(null!=t&&Array.isArray(t)&&t.length>0,function(){return"promises must be a none empty array"})}(t),function(t,e){ZA(t>=0&&t<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+t}),ZA(e>=0&&e<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+e}),ZA(e>=t,function(){return"startFraction must be no more than endFraction, but got startFraction "+t+" and endFraction "+e})}(n=null==n?0:n,r=null==r?1:r);var i=0;return Promise.all(t.map(function(s){return s.then(function(s){var o=n+ ++i/t.length*(r-n);return e(o),s}),s}))}function iV(t,e){return OA(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l;return NA(this,function(h){switch(h.label){case 0:return null==e&&(e={}),n=null==e.fetchFunc?VA().platform.fetch:e.fetchFunc,r=t.map(function(t){return n(t,e.requestInit,{isBinary:!0})}),i=0,s=.5,null!=e.onProgress?[3,2]:[4,Promise.all(r)];case 1:return o=h.sent(),[3,4];case 2:return[4,rV(r,e.onProgress,i,s)];case 3:o=h.sent(),h.label=4;case 4:return a=o.map(function(t){return t.arrayBuffer()}),u=.5,c=1,null!=e.onProgress?[3,6]:[4,Promise.all(a)];case 5:return l=h.sent(),[3,8];case 6:return[4,rV(a,e.onProgress,u,c)];case 7:l=h.sent(),h.label=8;case 8:return[2,l]}})})}function sV(t){var e=this;return function(n,r,i){return void 0===r&&(r=""),OA(e,void 0,void 0,function(){var e,s,o,a,u,c,l,h,p,f;return NA(this,function(d){switch(d.label){case 0:if(e=n.map(function(){return!1}),s={},o=null!=i?i.map(function(){return!1}):[],a=[],n.forEach(function(t,n){var r=0;t.weights.forEach(function(t){var u=EL["quantization"in t?t.quantization.dtype:t.dtype]*nI(t.shape),c=function(){e[n]=!0,null==s[n]&&(s[n]=[]),s[n].push({manifestEntry:t,groupOffset:r,sizeBytes:u})};null!=i?i.forEach(function(e,n){e===t.name&&(c(),o[n]=!0)}):c(),a.push(t.name),r+=u})}),!o.every(function(t){return t}))throw u=i.filter(function(t,e){return!o[e]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+a.join(", ")+".");return c=e.reduce(function(t,e,n){return e&&t.push(n),t},[]),l=[],c.forEach(function(t){n[t].paths.forEach(function(t){var e=r+(r.endsWith("/")?"":"/")+t;l.push(e)})}),[4,t(l)];case 1:return h=d.sent(),p={},f=0,c.forEach(function(t){for(var e=n[t].paths.length,r=0,i=0;i<e;i++)r+=h[f+i].byteLength;for(var o=new ArrayBuffer(r),a=new Uint8Array(o),u=0,c=0;c<e;c++){var l=new Uint8Array(h[f+c]);a.set(l,u),u+=l.byteLength}s[t].forEach(function(t){var e=_L(o.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(var n in e)p[n]=e[n]}),f+=e}),[2,p]}})})}}PL.registerSaveRouter(function(t){return VA().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(eV.URL_SCHEME)?function(t){return void 0===t&&(t="model"),new eV(t)}(t.slice(eV.URL_SCHEME.length)):null});var oV=function(){function t(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(ZA("function"==typeof e.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=VA().platform.fetch,ZA(null!=t&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&ZA(2===t.length,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(t){return OA(this,void 0,void 0,function(){var e,n;return NA(this,function(r){switch(r.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,e.body.append("model.json",new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((n=r.sent()).ok)return[2,{modelArtifactsInfo:kL(t),responses:[n]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+n.status+".")}})})},t.prototype.load=function(){return OA(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l,h;return NA(this,function(p){switch(p.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=p.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");p.label=2;case 2:return p.trys.push([2,4,,5]),[4,t.json()];case 3:return e=p.sent(),[3,5];case 4:throw p.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(i=e.weightsManifest,s=e.generatedBy,o=e.convertedBy,a=e.format,u=e.userDefinedMetadata,null==(r=e.modelTopology)&&null==i)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==i?[3,7]:[4,this.loadWeights(i)];case 6:h=p.sent(),c=h[0],l=h[1],p.label=7;case 7:return[2,{modelTopology:r,weightSpecs:c,weightData:l,userDefinedMetadata:u,generatedBy:s,convertedBy:o,format:a}]}})})},t.prototype.loadWeights=function(t){return OA(this,void 0,void 0,function(){var e,n,r,i,s,o,a,u,c,l;return NA(this,function(h){switch(h.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,n=function(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(e),r=n[0],i=n[1],s=this.weightPathPrefix||r,o=[],a=0,u=t;a<u.length;a++)o.push.apply(o,u[a].weights);return c=[],t.forEach(function(t){t.paths.forEach(function(t){c.push(s+t+i)})}),[4,iV(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return l=h.sent(),[2,[o,IL(l)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function aV(t){return null!=t.match(oV.URL_SCHEME_REGEX)}var uV=function(t,e){return"undefined"==typeof fetch?null:(Array.isArray(t)?t.every(function(t){return aV(t)}):aV(t))?cV(t,{onProgress:e}):null};function cV(t,e){return new oV(t,e)}PL.registerSaveRouter(uV),PL.registerLoadRouter(uV);var lV,hV=function(){function t(t){this.modelArtifacts=t}return t.prototype.load=function(){return OA(this,void 0,void 0,function(){return NA(this,function(t){return[2,this.modelArtifacts]})})},t}(),pV=function(){function t(t){this.saveHandler=t}return t.prototype.save=function(t){return OA(this,void 0,void 0,function(){return NA(this,function(e){return[2,this.saveHandler(t)]})})},t}(),fV=Object.freeze({browserFiles:function(t){return new nV(t)},browserHTTPRequest:function(t,e){return cV(t,e)},concatenateArrayBuffers:IL,decodeWeights:_L,encodeWeights:function(t,e){return OA(this,void 0,void 0,function(){var n,r,i,s,o,a=this;return NA(this,function(u){switch(u.label){case 0:for(n=[],r=[],i=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t),s=function(s){var o=i[s],u=Array.isArray(t)?t[s].tensor:t[o];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+o+"': "+u.dtype);var c={name:o,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){var l=new Promise(function(t){return OA(a,void 0,void 0,function(){var e,n,r,i,s,o,a;return NA(this,function(c){switch(c.label){case 0:return[4,u.bytes()];case 1:for(e=c.sent(),n=e.reduce(function(t,e){return t+e.length},0)+4*e.length,r=new Uint8Array(n),i=0,s=0;s<e.length;s++)o=e[s],a=new Uint8Array(new Uint32Array([o.length]).buffer),r.set(a,i),r.set(o,i+=4),i+=o.length;return t(r),[2]}})})});r.push(l)}else r.push(u.data());null!=e&&(c.group=e),n.push(c)},o=0;o<i.length;++o)s(o);return[4,Promise.all(r)];case 1:return[2,{data:SL(u.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new hV(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new hV({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new hV({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return PL.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:kL,getSaveHandlers:function(t){return PL.getSaveHandlers(t)},http:cV,isHTTPScheme:aV,loadWeights:function(t,e,n,r){return void 0===e&&(e=""),OA(this,void 0,void 0,function(){return NA(this,function(i){return[2,sV(function(t){return iV(t,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return PL.registerLoadRouter(t)},registerSaveRouter:function(t){return PL.registerSaveRouter(t)},weightsLoaderFactory:sV,withSaveHandler:function(t){return new pV(t)},copyModel:function(t,e){return OA(this,void 0,void 0,function(){return NA(this,function(n){return[2,BL(t,e,!1)]})})},listModels:function(){return OA(this,void 0,void 0,function(){var t,e,n,r,i,s,o;return NA(this,function(a){switch(a.label){case 0:t=DL.getSchemes(),e={},n=0,r=t,a.label=1;case 1:return n<r.length?[4,DL.getManager(i=r[n]).listModels()]:[3,4];case 2:for(o in s=a.sent())e[i+RL+o]=s[o];a.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return OA(this,void 0,void 0,function(){return NA(this,function(n){return[2,BL(t,e,!0)]})})},removeModel:function(t){return OA(this,void 0,void 0,function(){var e;return NA(this,function(n){return e=FL(t),[2,DL.getManager(e.scheme).removeModel(e.path)]})})}}),dV=Rk({confusionMatrix_:function(t,e,n){var r=bk(t,"labels","confusionMatrix"),i=bk(e,"predictions","confusionMatrix");ZA(null==n||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),ZA(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),ZA(1===i.rank,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),ZA(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),ZA(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var s=EP(r.asType("int32"),n),o=EP(i.asType("int32"),n);return s.transpose().matMul(o).asType("int32")}}),mV=(Object.freeze({confusionMatrix:dV}),Rk({fromPixels_:function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,s=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)s=!0;else{if(null==t.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);o=!0}if(i&&i&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=zA("FromPixels",uT.backendName))return uT.runKernel("FromPixels",{pixels:t},{numChannels:e});var a,u,c=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],l=c[0],h=c[1];if(o?a=t.getContext("2d").getImageData(0,0,l,h).data:r||n?a=t.data:(s||i)&&(null==lV&&(lV=document.createElement("canvas").getContext("2d")),lV.canvas.width=l,lV.canvas.height=h,lV.drawImage(t,0,0,l,h),a=lV.getImageData(0,0,l,h).data),4===e)u=new Int32Array(a);else{var p=l*h;u=new Int32Array(p*e);for(var f=0;f<p;f++)for(var d=0;d<e;++d)u[f*e+d]=a[4*f+d]}return jk(u,[h,l,e],"int32")}})),gV=Object.freeze({toPixels:function(t,e){return OA(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,p,f,d,m,g,v,y,b,w,x,E;return NA(this,function(_){switch(_.label){case 0:if(n=bk(t,"img","toPixels"),t instanceof WI||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],s=r[1],(o=2===n.rank?1:n.shape[2])>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return a=_.sent(),u=n.min(),c=n.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(l=_.sent(),h=l[0][0],p=l[1][0],u.dispose(),c.dispose(),"float32"===n.dtype){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(f="float32"===n.dtype?255:1,d=new Uint8ClampedArray(s*i*4),m=0;m<i*s;++m)g=void 0,v=void 0,y=void 0,b=void 0,1===o?(g=a[m]*f,v=a[m]*f,y=a[m]*f,b=255):3===o?(g=a[3*m]*f,v=a[3*m+1]*f,y=a[3*m+2]*f,b=255):4===o&&(g=a[4*m]*f,v=a[4*m+1]*f,y=a[4*m+2]*f,b=a[4*m+3]*f),d[0+(w=4*m)]=Math.round(g),d[w+1]=Math.round(v),d[w+2]=Math.round(y),d[w+3]=Math.round(b);return null!=e&&(e.width=s,e.height=i,x=e.getContext("2d"),E=new ImageData(d,s,i),x.putImageData(E,0,0)),n!==t&&n.dispose(),[2,d]}})})},fromPixels:mV}),vV=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(t,e){return new t(e)},t}(),yV=function(){function t(){this.classNameMap={}}return t.getMap=function(){return null==t.instance&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function bV(t){ZA(null!=t.className,function(){return"Class being registered does not have the static className property defined."}),ZA("string"==typeof t.className,function(){return"className is required to be a string, but got type "+typeof t.className}),ZA(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),yV.register(t)}function wV(){return 32===uT.backend.floatPrecision()?.001:.1}function xV(t,e,n){var r=!0;if((vI(t)||vI(e))&&(r=!1),vI(t)&&vI(e)&&(r=!0),r){var i=t.constructor.name,s=e.constructor.name;if(i!==s)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+s)}if(Array.isArray(t)&&Array.isArray(e)){var o=vk(t),a=vk(e);if(!rI(o,a))throw new Error("Arrays have different shapes. Actual: ["+o+"]. Expected: ["+a+"]")}var u=vI(t)?t:eI(t),c=vI(e)?e:eI(e);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+".\nActual:   "+u+".\nExpected: "+c+".");for(var l=0;l<c.length;++l){var h=u[l],p=c[l];if(!n(h,p))throw new Error("Arrays differ: actual["+l+"] = "+h+", expected["+l+"] = "+p+".\nActual:   "+u+".\nExpected: "+c+".")}}function EV(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}Object.freeze({Serializable:vV,SerializationMap:yV,registerClass:bV}),Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(t,e,n){return null==n&&(n=wV()),xV(t,e,function(t,e){return EV(t,e,n)})},testEpsilon:wV,expectPromiseToFail:function(t,e){t().then(function(){return e.fail()},function(){return e()})},expectArraysEqual:function(t,e){var n="string"==typeof e||"number"==typeof e||"boolean"==typeof e?[e]:e;return wI(t)||wI(t[0])||wI(e)||wI(e[0])?xV(t,n,function(t,e){return t==e}):xV(t,e,function(t,e){return EV(t,e,0)})},expectNumbersClose:function(t,e,n){if(null==n&&(n=wV()),!EV(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)},expectValuesInRange:function(t,e,n){for(var r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error("Value out of range:"+t[r]+" low: "+e+", high: "+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}}),Object.freeze({gpgpu_util:gF,webgl_util:hk,forceHalfFloat:function(){VA().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:wB,setWebGLContext:gT,GPGPUContext:vF});var _V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return BA(e,t),e.prototype.minimize=function(t,e,n){void 0===e&&(e=!1);var r=this.computeGradients(t,n),i=r.value,s=r.grads;if(null!=n){var o=n.map(function(t){return{name:t.name,tensor:s[t.name]}});this.applyGradients(o)}else this.applyGradients(s);return mk(s),e?i:(i.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,e){return function(t,e){ZA(SI(t),function(){return"The f passed in variableGrads(f) must be a function"}),ZA(null==e||Array.isArray(e)&&e.every(function(t){return t instanceof ZI}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=null!=e;if(!n)for(var r in e=[],uT.registeredVariables)e.push(uT.registeredVariables[r]);var i=n?e.filter(function(t){return!t.trainable}):null,s=e.length;ZA((e=e.filter(function(t){return t.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+s+" variables is trainable."});var o=uT.gradients(t,e,null,!0),a=o.value,u=o.grads;ZA(u.some(function(t){return null!=t}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),ZA(0===a.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var c={};return e.forEach(function(t,e){null!=u[e]&&(c[t.name]=u[e])}),null!=i&&i.forEach(function(t){return c[t.name]=null}),{value:a,grads:c}}(t,e)},e.prototype.dispose=function(){null!=this.iterations_&&mk(this.iterations_)},e.prototype.saveIterations=function(){return OA(this,void 0,void 0,function(){return NA(this,function(t){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Mk(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return OA(this,void 0,void 0,function(){return NA(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return OA(this,void 0,void 0,function(){return NA(this,function(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return OA(this,void 0,void 0,function(){var e;return NA(this,function(n){switch(n.label){case 0:return e=this,[4,t[0].tensor.data()];case 1:return e.iterations_=n.sent()[0],[2,t.slice(1)]}})})},e}(vV);Object.defineProperty(_V,Symbol.hasInstance,{value:function(t){return null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients}});var SV=function(t){function e(e,n,r){void 0===r&&(r=null);var i=t.call(this)||this;return i.learningRate=e,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],null==r&&(i.epsilon=uT.backend.epsilon()),i}return BA(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var i=uT.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:dk(function(){return Gk(i).variable(!1)})}),null==e.accumulatedUpdates[r]&&(e.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:dk(function(){return Gk(i).variable(!1)})});var s=Array.isArray(t)?t[r].tensor:t[n];if(null!=s){var o=e.accumulatedGrads[r].variable,a=e.accumulatedUpdates[r].variable;dk(function(){var t=o.mul(e.rho).add(s.square().mul(1-e.rho)),n=a.add(e.epsilon).sqrt().div(o.add(e.epsilon).sqrt()).mul(s),r=a.mul(e.rho).add(n.square().mul(1-e.rho));o.assign(t),a.assign(r);var u=n.mul(-e.learningRate).add(i);i.assign(u)})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedUpdates&&(mk(this.accumulatedGrads.map(function(t){return t.variable})),mk(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return OA(this,void 0,void 0,function(){var t;return NA(this,function(e){switch(e.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return OA(this,void 0,void 0,function(){var e;return NA(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),this.accumulatedGrads=t.slice(0,e=t.length/2).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.rho,e.epsilon)},e.className="Adadelta",e}(_V);bV(SV);var CV=function(t){function e(e,n){void 0===n&&(n=.1);var r=t.call(this)||this;return r.learningRate=e,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return BA(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var i=uT.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accumulator",variable:dk(function(){return Kk(i.shape,e.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(t)?t[r].tensor:t[n];if(null!=s){var o=e.accumulatedGrads[r].variable;dk(function(){var t=o.add(s.square());o.assign(t);var n=s.div(t.add(uT.backend.epsilon()).sqrt()).mul(-e.learningRate).add(i);i.assign(n)})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedGrads&&mk(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return OA(this,void 0,void 0,function(){return NA(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return OA(this,void 0,void 0,function(){return NA(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulatedGrads=t.map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)},e.className="Adagrad",e}(_V);bV(CV);var AV=function(t){function e(e,n,r,i){void 0===i&&(i=null);var s=t.call(this)||this;return s.learningRate=e,s.beta1=n,s.beta2=r,s.epsilon=i,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],dk(function(){s.accBeta1=Mk(n).variable(),s.accBeta2=Mk(r).variable()}),null==i&&(s.epsilon=uT.backend.epsilon()),s}return BA(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t);dk(function(){var r=zO(1,e.accBeta1),i=zO(1,e.accBeta2);n.forEach(function(n,s){var o=uT.registeredVariables[n];null==e.accumulatedFirstMoment[s]&&(e.accumulatedFirstMoment[s]={originalName:n+"/m",variable:dk(function(){return Gk(o).variable(!1)})}),null==e.accumulatedSecondMoment[s]&&(e.accumulatedSecondMoment[s]={originalName:n+"/v",variable:dk(function(){return Gk(o).variable(!1)})});var a=Array.isArray(t)?t[s].tensor:t[n];if(null!=a){var u=e.accumulatedFirstMoment[s].variable,c=e.accumulatedSecondMoment[s].variable,l=u.mul(e.beta1).add(a.mul(1-e.beta1)),h=c.mul(e.beta2).add(a.square().mul(1-e.beta2)),p=l.div(r),f=h.div(i);u.assign(l),c.assign(h);var d=p.div(f.sqrt().add(e.epsilon)).mul(-e.learningRate).add(o);o.assign(d)}}),e.accBeta1.assign(e.accBeta1.mul(e.beta1)),e.accBeta2.assign(e.accBeta2.mul(e.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&mk(this.accumulatedFirstMoment.map(function(t){return t.variable})),null!=this.accumulatedSecondMoment&&mk(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return OA(this,void 0,void 0,function(){var t;return NA(this,function(e){switch(e.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return OA(this,void 0,void 0,function(){var e,n=this;return NA(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),dk(function(){n.accBeta1.assign(jO(n.beta1,n.iterations_+1)),n.accBeta2.assign(jO(n.beta2,n.iterations_+1))}),this.accumulatedFirstMoment=t.slice(0,e=t.length/2).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)},e.className="Adam",e}(_V);bV(AV);var IV=function(t){function e(e,n,r,i,s){void 0===i&&(i=null),void 0===s&&(s=0);var o=t.call(this)||this;return o.learningRate=e,o.beta1=n,o.beta2=r,o.epsilon=i,o.decay=s,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],dk(function(){o.iteration=Mk(0).variable(),o.accBeta1=Mk(n).variable()}),null==i&&(o.epsilon=uT.backend.epsilon()),o}return BA(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t);dk(function(){var r=zO(1,e.accBeta1),i=TO(-e.learningRate,e.iteration.mul(e.decay).add(1));n.forEach(function(n,s){var o=uT.registeredVariables[n];null==e.accumulatedFirstMoment[s]&&(e.accumulatedFirstMoment[s]={originalName:n+"/m",variable:Gk(o).variable(!1)}),null==e.accumulatedWeightedInfNorm[s]&&(e.accumulatedWeightedInfNorm[s]={originalName:n+"/v",variable:Gk(o).variable(!1)});var a=Array.isArray(t)?t[s].tensor:t[n];if(null!=a){var u=e.accumulatedFirstMoment[s].variable,c=e.accumulatedWeightedInfNorm[s].variable,l=u.mul(e.beta1).add(a.mul(1-e.beta1)),h=c.mul(e.beta2),p=a.abs(),f=h.maximum(p);u.assign(l),c.assign(f);var d=i.div(r).mul(l.div(f.add(e.epsilon))).add(o);o.assign(d)}}),e.iteration.assign(e.iteration.add(1)),e.accBeta1.assign(e.accBeta1.mul(e.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&mk(this.accumulatedFirstMoment.map(function(t){return t.variable})),null!=this.accumulatedWeightedInfNorm&&mk(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return OA(this,void 0,void 0,function(){return NA(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return OA(this,void 0,void 0,function(){return NA(this,function(t){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},e.className="Adamax",e}(_V);bV(IV);var TV=function(t){function e(e){var n=t.call(this)||this;return n.learningRate=e,n.setLearningRate(e),n}return BA(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var i=Array.isArray(t)?t[r].tensor:t[n];if(null!=i){var s=uT.registeredVariables[n];dk(function(){var t=e.c.mul(i).add(s);s.assign(t)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=function(t){return uT.keep(t)}(Mk(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return OA(this,void 0,void 0,function(){return NA(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return OA(this,void 0,void 0,function(){return NA(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:if(0!==(t=e.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,e){return new t(e.learningRate)},e.className="SGD",e}(_V);bV(TV);var kV=function(t){function e(e,n,r){void 0===r&&(r=!1);var i=t.call(this,e)||this;return i.learningRate=e,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=Mk(i.momentum),i}return BA(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var i=uT.registeredVariables[n];null==e.accumulations[r]&&(e.accumulations[r]={originalName:n+"/momentum",variable:dk(function(){return Gk(i).variable(!1)})});var s=e.accumulations[r].variable,o=Array.isArray(t)?t[r].tensor:t[n];null!=o&&dk(function(){var t,n=e.m.mul(s).add(o);t=e.useNesterov?e.c.mul(o.add(n.mul(e.m))).add(i):e.c.mul(n).add(i),s.assign(n),i.assign(t)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&mk(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return OA(this,void 0,void 0,function(){return NA(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return OA(this,void 0,void 0,function(){return NA(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulations=t.map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)},e.className="Momentum",e}(TV);bV(kV);var PV=function(t){function e(e,n,r,i,s){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===s&&(s=!1);var o=t.call(this)||this;if(o.learningRate=e,o.decay=n,o.momentum=r,o.epsilon=i,o.accumulatedMeanSquares=[],o.accumulatedMoments=[],o.accumulatedMeanGrads=[],o.centered=s,null==i&&(o.epsilon=uT.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return o}return BA(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var i=uT.registeredVariables[n];null==e.accumulatedMeanSquares[r]&&(e.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:dk(function(){return Gk(i).variable(!1)})}),null==e.accumulatedMoments[r]&&(e.accumulatedMoments[r]={originalName:n+"/momentum",variable:dk(function(){return Gk(i).variable(!1)})}),null==e.accumulatedMeanGrads[r]&&e.centered&&(e.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:dk(function(){return Gk(i).variable(!1)})});var s=Array.isArray(t)?t[r].tensor:t[n];if(null!=s){var o=e.accumulatedMeanSquares[r].variable,a=e.accumulatedMoments[r].variable;dk(function(){var t=o.mul(e.decay).add(s.square().mul(1-e.decay));if(e.centered){var n=e.accumulatedMeanGrads[r].variable,u=n.mul(e.decay).add(s.mul(1-e.decay)),c=a.mul(e.momentum).add(s.mul(e.learningRate).div(t.sub(u.square().add(e.epsilon)).sqrt()));o.assign(t),n.assign(u),a.assign(c);var l=i.sub(c);i.assign(l)}else{var h=o.mul(e.decay).add(s.square().mul(1-e.decay));c=a.mul(e.momentum).add(s.mul(e.learningRate).div(h.add(e.epsilon).sqrt())),o.assign(h),a.assign(c),l=i.sub(c),i.assign(l)}})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&mk(this.accumulatedMeanSquares.map(function(t){return t.variable})),null!=this.accumulatedMeanGrads&&this.centered&&mk(this.accumulatedMeanGrads.map(function(t){return t.variable})),null!=this.accumulatedMoments&&mk(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return OA(this,void 0,void 0,function(){var t;return NA(this,function(e){switch(e.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return OA(this,void 0,void 0,function(){var e;return NA(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),this.accumulatedMeanSquares=t.slice(0,e=this.centered?t.length/3:t.length/2).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},e.className="RMSProp",e}(_V);bV(PV),function(){function t(){}t.sgd=function(t){return new TV(t)},t.momentum=function(t,e,n){return void 0===n&&(n=!1),new kV(t,e,n)},t.rmsprop=function(t,e,n,r,i){return void 0===e&&(e=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new PV(t,e,n,r,i)},t.adam=function(t,e,n,r){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new AV(t,e,n,r)},t.adadelta=function(t,e,n){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===n&&(n=null),new SV(t,e,n)},t.adamax=function(t,e,n,r,i){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new IV(t,e,n,r,i)},t.adagrad=function(t,e){return void 0===e&&(e=.1),new CV(t,e)}}(),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate,WI.prototype.squaredDifference=function(t){return _B(this,t)},KI=oL;var RV=function(t,e){return(RV=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function DV(t,e){function n(){this.constructor=t}RV(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var FV=function(){return(FV=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function BV(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(BA){s(BA)}}function a(t){try{u(r.throw(t))}catch(BA){s(BA)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function OV(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(BA){s=[6,BA],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function NV(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var MV=function(){function t(t,e){if(!qV(t)||!qV(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:e}));this._width=t,this._height=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function LV(t,e){return t instanceof WI&&t.shape.length===e}function VV(t){return LV(t,3)}function jV(t){return LV(t,4)}function UV(t){return t%2==0}function HV(t){return t&&t.width&&t.height}function zV(t){return t.reduce(function(t,e){return t.add(e)},new GV(0,0)).div(new GV(t.length,t.length))}function KV(t,e,n){return Array(t).fill(0).map(function(t,r){return e+r*n})}function qV(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||0===t}function WV(t){return qV(t)&&0<=t&&t<=1}var GV=function(){function t(t,e){this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),$V=function(){function t(e,n){void 0===n&&(n=!0);var r=e||{},i=[r.left,r.top,r.right,r.bottom].every(qV),s=[r.x,r.y,r.width,r.height].every(qV);if(!s&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=s?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],a=o[0],u=o[1],c=o[2],l=o[3];t.assertIsValidBox({x:a,y:u,width:c,height:l},"Box.constructor",n),this._x=a,this._y=u,this._width=c,this._height=l}return t.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(qV)},t.assertIsValidBox=function(e,n,r){if(void 0===r&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new GV(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new GV(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new GV(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new GV(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(t){return Math.round(t)});return new t({x:e[0],y:e[1],width:e[2],height:e[3]})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(t){return Math.floor(t)});return new t({x:e[0],y:e[1],width:e[2],height:e[3]})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,i=e.width,s=e.height,o=Math.abs(i-s);return i<s&&(n-=o/2,i+=o),s<i&&(r-=o/2,s+=o),new t({x:n,y:r,width:i,height:s})},t.prototype.rescale=function(e){var n=HV(e)?e.width:e,r=HV(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n];return new t({x:r[0],y:r[1],width:r[2],height:r[3]})},t.prototype.clipAtImageBorders=function(e,n){var r=this,i=r.y,s=r.right,o=r.bottom,a=Math.max(r.x,0),u=Math.max(i,0),c=o-u;return new t({x:a,y:u,width:Math.min(s-a,e-a),height:Math.min(c,n-u)}).floor()},t.prototype.shift=function(e,n){return new t({x:this.x+e,y:this.y+n,width:this.width,height:this.height})},t.prototype.padAtBorders=function(t,e){var n=this.width+1,r=this.height+1,i=n,s=r,o=this.left,a=this.top,u=this.right,c=this.bottom;return u>e&&(i=-u+e+n,u=e),c>t&&(s=-c+t+r,c=t),o<1&&(s=2-o,o=1),a<1&&(s=2-a,a=1),{dy:1,edy:s,dx:1,edx:i,y:a,ey:c,x:o,ex:u,w:n,h:r}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t}(),XV=function(t){function e(e,n,r,i,s){return void 0===s&&(s=!1),t.call(this,{left:e,top:n,right:r,bottom:i},s)||this}return DV(e,t),e}($V),QV=function(){function t(t,e,n,r,i){this._imageDims=new MV(i.width,i.height),this._score=t,this._classScore=e,this._className=n,this._box=new $V(r).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new $V(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t}(),YV=function(t){function e(e,n,r){return t.call(this,e,e,"",n,r)||this}return DV(e,t),e.prototype.forSize=function(n,r){var i=t.prototype.forSize.call(this,n,r);return new e(i.score,i.relativeBox,i.imageDims)},e}(QV);function ZV(t,e,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left))*Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top));return n?r/(t.area+e.area-r):r/Math.min(t.area,e.area)}function JV(t,e,n,r){void 0===r&&(r=!0);for(var i=e.map(function(t,e){return{score:t,boxIndex:e}}).sort(function(t,e){return t.score-e.score}).map(function(t){return t.boxIndex}),s=[],o=function(){var e=i.pop();s.push(e);for(var o=i,a=[],u=0;u<o.length;u++)a.push(ZV(t[e],t[o[u]],r));i=i.filter(function(t,e){return a[e]<=n})};i.length>0;)o();return s}function tj(t,e){return dk(function(){var n=e[0],r=e[1],i=e[2],s=Kk(NV(t.shape.slice(0,3),[1]),n),o=Kk(NV(t.shape.slice(0,3),[1]),r),a=Kk(NV(t.shape.slice(0,3),[1]),i),u=$k([s,o,a],3);return zO(t,u)})}function ej(t){return 1/(1+Math.exp(-t))}var nj,rj=function(t){function e(e,n,r,i,s){return void 0===s&&(s=!1),t.call(this,{x:e,y:n,width:r,height:i},s)||this}return DV(e,t),e}($V),ij=function(){function t(t,e,n){void 0===n&&(n=new GV(0,0));var r=e.width,i=e.height;this._imgDims=new MV(r,i),this._shift=n,this._positions=t.map(function(t){return t.mul(new GV(r,i)).add(n)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new GV(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(e){return e.sub(t._shift).div(new GV(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(t,e){return new this.constructor(this.relativePositions,{width:t,height:e})},t.prototype.shiftBy=function(t,e){return new this.constructor(this.relativePositions,this._imgDims,new GV(t,e))},t.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},t.prototype.align=function(t,e){if(void 0===e&&(e={}),t){var n=t instanceof YV?t.box.floor():new $V(t);return this.shiftBy(n.x,n.y).align(null,e)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),i=r.minBoxPadding;return r.useDlibAlignment?this.alignDlib():this.alignMinBbox(i)},t.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),e=t[1],n=t[2],r=function(t){return n.sub(t).magnitude()},i=(r(t[0])+r(e))/2,s=Math.floor(i/.45),o=zV(t),a=Math.floor(Math.max(0,o.x-.5*s)),u=Math.floor(Math.max(0,o.y-.43*s));return new rj(a,u,Math.min(s,this.imageWidth+a),Math.min(s,this.imageHeight+u))},t.prototype.alignMinBbox=function(t){var e=function(t){var e=t.map(function(t){return t.x}),n=t.map(function(t){return t.y}),r=e.reduce(function(t,e){return e<t?e:t},1/0),i=n.reduce(function(t,e){return e<t?e:t},1/0),s=e.reduce(function(t,e){return t<e?e:t},0),o=n.reduce(function(t,e){return t<e?e:t},0);return new XV(r,i,s,o)}(this.positions);return e.pad(e.width*t,e.height*t)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),sj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],zV([t[3],t[4]])]},e}(ij),oj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(zV)},e}(ij),aj=function(){function t(t,e){this._label=t,this._distance=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){return void 0===t&&(t=!0),this.label+(t?" ("+function(t,e){void 0===e&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}(this.distance)+")":"")},t}(),uj=function(t){function e(e,n){var r=t.call(this,e)||this;return r._label=n,r}return DV(e,t),e.assertIsValidLabeledBox=function(t,e){if($V.assertIsValidBox(t,e),!qV(t.label))throw new Error(e+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}($V),cj=function(){function t(t,e){if("string"!=typeof t)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(t){return!(t instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},t.fromJSON=function(e){var n=e.descriptors.map(function(t){return new Float32Array(t)});return new t(e.label,n)},t}();function lj(t,e){return Object.assign({},t,{detection:e})}function hj(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function pj(t){var e="";if(!t)try{t=n(Object(function(){var t=new Error("Cannot find module 'fs'");throw t.code="MODULE_NOT_FOUND",t}()))}catch(r){e=r.toString()}return{readFile:t?function(e){return new Promise(function(n,r){t.readFile(e,function(t,e){return t?r(t):n(e)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)}}}function fj(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},r=pj();return FV({Canvas:t||function(){},CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){},Image:e||function(){},ImageData:global.ImageData||function(){},Video:global.HTMLVideoElement||function(){},createCanvasElement:function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:n},r)}function dj(){return"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}function mj(){return"object"==typeof global&&"undefined"!=typeof process&&!!process.version}function gj(t){nj=t}function vj(){dj()&&gj(hj()),mj()&&gj(fj())}!function(t){function e(e,n,r,i){var s=t.call(this,e,n)||this;return s._score=r,s._classScore=i,s}DV(e,t),e.assertIsValidPredictedBox=function(t,e){if(uj.assertIsValidLabeledBox(t,e),!WV(t.score)||!WV(t.classScore))throw new Error(e+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(uj);var yj={getEnv:function(){if(!nj)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return nj},setEnv:gj,initialize:vj,createBrowserEnv:hj,createFileSystem:pj,createNodejsEnv:fj,monkeyPatch:function(t){if(nj||vj(),!nj)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=void 0===e?nj.Canvas:e,r=t.Image,i=void 0===r?nj.Image:r;nj.Canvas=n,nj.Image=i,nj.createCanvasElement=t.createCanvasElement||function(){return new n},nj.createImageElement=t.createImageElement||function(){return new i},nj.ImageData=t.ImageData||nj.ImageData,nj.Video=t.Video||nj.Video,nj.fetch=t.fetch||nj.fetch,nj.readFile=t.readFile||nj.readFile},isBrowser:dj,isNodejs:mj};function bj(t){return yj.isNodejs()||"string"!=typeof t?t:document.getElementById(t)}function wj(t){var e=yj.getEnv(),n=e.Canvas;if(t instanceof e.CanvasRenderingContext2D)return t;var r=bj(t);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=r.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}vj();var xj=(()=>(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"}(xj||(xj={})),xj))(),Ej=function(t){void 0===t&&(t={});var e=t.backgroundColor,n=t.fontColor,r=t.fontSize,i=t.fontStyle,s=t.padding;this.anchorPosition=t.anchorPosition||xj.TOP_LEFT,this.backgroundColor=e||"rgba(0, 0, 0, 0.5)",this.fontColor=n||"rgba(255, 255, 255, 1)",this.fontSize=r||14,this.fontStyle=i||"Georgia",this.padding=s||4};function _j(t){var e=yj.getEnv();return t instanceof e.Image&&t.complete||t instanceof e.Video&&t.readyState>=3}function Sj(t){var e=yj.getEnv(),n=e.Video;return t instanceof e.Image?new MV(t.naturalWidth,t.naturalHeight):t instanceof n?new MV(t.videoWidth,t.videoHeight):new MV(t.width,t.height)}function Cj(t){var e=t.width,n=t.height,r=(0,yj.getEnv().createCanvasElement)();return r.width=e,r.height=n,r}function Aj(t,e){var n=yj.getEnv().ImageData;if(!(t instanceof n||_j(t)))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=e||Sj(t),i=r.width,s=r.height,o=Cj({width:i,height:s});return t instanceof n?wj(o).putImageData(t,0,0):wj(o).drawImage(t,0,0,i,s),o}function Ij(t,e){return BV(this,void 0,void 0,function(){var n,r,i,s,o,a;return OV(this,function(u){switch(u.label){case 0:return n=e||yj.getEnv().createCanvasElement(),r=t.shape.slice(jV(t)?1:0),i=r[0],s=r[1],o=r[2],a=dk(function(){return t.as3D(i,s,o).toInt()}),[4,gV.toPixels(a,n)];case 1:return u.sent(),a.dispose(),[2,n]}})})}function Tj(t){var e=yj.getEnv();return t instanceof e.Image||t instanceof e.Canvas||t instanceof e.Video}!function(){function t(e,n,r){void 0===r&&(r={}),this.text="string"==typeof e?[e]:e instanceof t?e.text:e,this.anchor=n,this.options=new Ej(r)}t.prototype.measureWidth=function(t){var e=this.options.padding;return this.text.map(function(e){return t.measureText(e).width}).reduce(function(t,e){return t<e?e:t},0)+2*e},t.prototype.measureHeight=function(){var t=this.options;return this.text.length*t.fontSize+2*t.padding},t.prototype.getUpperLeft=function(t,e){var n=this.options.anchorPosition,r=n===xj.BOTTOM_RIGHT||n===xj.TOP_RIGHT,i=n===xj.BOTTOM_LEFT||n===xj.BOTTOM_RIGHT,s=this.measureWidth(t),o=this.measureHeight(),a=r?this.anchor.x-s:this.anchor.x,u=i?this.anchor.y-o:this.anchor.y;if(e){var c=e.height;return{x:Math.max(Math.min(a,e.width-s),0),y:Math.max(Math.min(u,c-o),0)}}return{x:a,y:u}},t.prototype.draw=function(t){var e=bj(t),n=wj(e),r=this.options,i=r.backgroundColor,s=r.fontColor,o=r.fontSize,a=r.padding;n.font=o+"px "+r.fontStyle;var u=this.measureWidth(n),c=this.measureHeight();n.fillStyle=i;var l=this.getUpperLeft(n,e);n.fillRect(l.x,l.y,u,c),n.fillStyle=s,this.text.forEach(function(t,e){n.fillText(t,a+l.x,a+l.y+(e+1)*o)})}}();var kj=function(){function t(t,e){var n=this;if(void 0===e&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=e,this._batchSize=t.length,t.forEach(function(t,e){if(VV(t))return n._imageTensors[e]=t,void(n._inputDimensions[e]=t.shape);if(jV(t)){var r=t.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[e]=t,void(n._inputDimensions[e]=t.shape.slice(1))}var i=t instanceof yj.getEnv().Canvas?t:Aj(t);n._canvases[e]=i,n._inputDimensions[e]=[i.height,i.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var t=this;return KV(this.batchSize,0,1).map(function(e,n){return t.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},t.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},t.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},t.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},t.prototype.getReshapedInputDimensions=function(t){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(t,e){var n=t.width,r=t.height,i=e/Math.max(r,n);return new MV(Math.round(n*i),Math.round(r*i))}({width:this.getInputWidth(t),height:this.getInputHeight(t)},this.inputSize)},t.prototype.toBatchTensor=function(t,e){var n=this;return void 0===e&&(e=!0),this._inputSize=t,dk(function(){var r=KV(n.batchSize,0,1).map(function(r){var i=n.getInput(r);if(i instanceof WI){var s=jV(i)?i:i.expandDims();return(s=function(t,e){return void 0===e&&(e=!1),dk(function(){var n=t.shape.slice(1),r=n[0],i=n[1];if(r===i)return t;var s=Math.abs(r-i),o=Math.round(s*(e?.5:1)),a=r>i?2:1,u=function(e){var n=t.shape.slice();return n[a]=e,Kk(n,0)},c=u(o),l=s-c.shape[a],h=[e&&l?u(l):null,t,c].filter(function(t){return!!t}).map(function(t){return t.toFloat()});return $k(h,a)})}(s,e)).shape[1]===t&&s.shape[2]===t||(s=YM.resizeBilinear(s,[t,t])),s.as3D(t,t,3)}if(i instanceof yj.getEnv().Canvas)return gV.fromPixels(function(t,e,n){void 0===n&&(n=!1);var r=yj.getEnv(),i=r.Canvas;if(!(t instanceof r.Image||t instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var s=Sj(t),o=e/Math.max(s.height,s.width),a=o*s.width,u=o*s.height,c=Cj({width:e,height:e}),l=t instanceof i?t:Aj(t),h=Math.abs(a-u)/2,p=n&&a<u?h:0,f=n&&u<a?h:0;return wj(c).drawImage(l,p,f,a,u),c}(i,t,e));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+i)});return OP(r.map(function(t){return t.toFloat()})).as4D(n.batchSize,t,t,3)})},t}();function Pj(t){return BV(this,void 0,void 0,function(){var e,n,r;return OV(this,function(i){switch(i.label){case 0:if(t instanceof kj)return[2,t];if(!(e=Array.isArray(t)?t:[t]).length)throw new Error("toNetInput - empty array passed as input");return n=function(e){return Array.isArray(t)?" at input index "+e+":":""},(r=e.map(bj)).forEach(function(t,r){if(!Tj(t)&&!VV(t)&&!jV(t)){if("string"==typeof e[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+e[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(jV(t)){var i=t.shape[0];if(1!==i)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+i+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(t){return Tj(t)&&(e=t,new Promise(function(t,n){if(e instanceof yj.getEnv().Canvas||_j(e))return t();function r(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",i),t(e))}function i(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",i),n(t))}e.addEventListener("load",r),e.addEventListener("error",i)}));var e}))];case 1:return i.sent(),[2,new kj(r,Array.isArray(t))]}})})}function Rj(t,e){return BV(this,void 0,void 0,function(){var n,r,i,s,o,a;return OV(this,function(u){switch(u.label){case 0:return n=yj.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,Pj(t)];case 1:if((i=u.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(s=i.getInput(0))instanceof n?(o=s,[3,4]):[3,2];case 2:return[4,Ij(s)];case 3:o=u.sent(),u.label=4;case 4:r=o,u.label=5;case 5:return a=wj(r),[2,e.map(function(t){return t instanceof YV?t.forSize(r.width,r.height).box.floor():t}).map(function(t){return t.clipAtImageBorders(r.width,r.height)}).map(function(t){var e=t.x,n=t.y,r=t.width,i=t.height,s=Cj({width:r,height:i});return wj(s).putImageData(a.getImageData(e,n,r,i),0,0),s})]}})})}function Dj(t,e){return BV(this,void 0,void 0,function(){return OV(this,function(n){if(!VV(t)&&!jV(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(jV(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,dk(function(){var n=t.shape.slice(jV(t)?1:0),r=n[0],i=n[1],s=n[2];return e.map(function(t){return t instanceof YV?t.forSize(i,r).box:t}).map(function(t){return t.clipAtImageBorders(i,r)}).map(function(e){var n=e.x,o=e.y,a=e.width,u=e.height;return VN(t.as3D(r,i,s),[o,n,0],[u,a,s])})})]})})}function Fj(t,e){return BV(this,void 0,void 0,function(){var n;return OV(this,function(r){switch(r.label){case 0:return[4,(0,yj.getEnv().fetch)(t,e)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}})})}function Bj(t){return BV(this,void 0,void 0,function(){return OV(this,function(e){switch(e.label){case 0:return[4,Fj(t)];case 1:return[2,e.sent().json()]}})})}function Oj(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if("/"===t)return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"",i=(t=t.replace(r,"")).split("/").filter(function(t){return t}),s=t.endsWith(".json")?i[i.length-1]:n,o=r+(t.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return{modelBaseUri:o=t.startsWith("/")?"/"+o:o,manifestUri:"/"===o?"/"+s:o+"/"+s}}function Nj(t,e){return BV(this,void 0,void 0,function(){var n,r,i;return OV(this,function(s){switch(s.label){case 0:return n=Oj(t,e),r=n.modelBaseUri,[4,Bj(n.manifestUri)];case 1:return i=s.sent(),[2,fV.loadWeights(i,r)]}})})}var Mj=function(){function t(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(t){var e=this.traversePropertyPath(t);return e.obj[e.objProp]},t.prototype.reassignParamFromPath=function(t,e){var n=this.traversePropertyPath(t),r=n.obj,i=n.objProp;r[i].dispose(),r[i]=e},t.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(e){var n=e.paramPath;return{path:n,tensor:t.getParamFromPath(n)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof ZI})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof ZI)})},t.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(e){t.reassignParamFromPath(e.path,e.tensor.variable())})},t.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(e){var n=e.path,r=e.tensor,i=Ok(r.dataSync());r.dispose(),t.reassignParamFromPath(n,i)})},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.getParamList().forEach(function(e){if(t&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){return Array.from(t.tensor.dataSync())}).reduce(function(t,e){return t.concat(e)}))},t.prototype.load=function(t){return BV(this,void 0,void 0,function(){return OV(this,function(e){switch(e.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return e.sent(),[2]}})})},t.prototype.loadFromUri=function(t){return BV(this,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:if(t&&"string"!=typeof t)throw new Error(this._name+".loadFromUri - expected model uri");return[4,Nj(t,this.getDefaultModelName())];case 1:return e=n.sent(),this.loadFromWeightMap(e),[2]}})})},t.prototype.loadFromDisk=function(t){return BV(this,void 0,void 0,function(){var e,n,r,i,s,o,a,u,c;return OV(this,function(l){switch(l.label){case 0:if(t&&"string"!=typeof t)throw new Error(this._name+".loadFromDisk - expected model file path");return e=yj.getEnv().readFile,n=Oj(t,this.getDefaultModelName()),r=n.manifestUri,i=n.modelBaseUri,s=fV.weightsLoaderFactory(function(t){return Promise.all(t.map(function(t){return e(t).then(function(t){return t.buffer})}))}),u=(a=JSON).parse,[4,e(r)];case 1:return o=u.apply(a,[l.sent().toString()]),[4,s(o,i)];case 2:return c=l.sent(),this.loadFromWeightMap(c),[2]}})})},t.prototype.loadFromWeightMap=function(t){var e=this.extractParamsFromWeigthMap(t),n=e.params;this._paramMappings=e.paramMappings,this._params=n},t.prototype.extractWeights=function(t){var e=this.extractParams(t),n=e.params;this._paramMappings=e.paramMappings,this._params=n},t.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=t.split("/").reduce(function(e,n){if(!e.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+t);return{obj:e.nextObj,objProp:n,nextObj:e.nextObj[n]}},{nextObj:this.params}),n=e.obj,r=e.objProp;if(!(n&&r&&n[r]instanceof WI))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:n,objProp:r}},t}();function Lj(t,e,n){return dk(function(){var r=yN(t,e.depthwise_filter,e.pointwise_filter,n,"same");return SO(r,e.bias)})}function Vj(t,e,n){return void 0===n&&(n=!1),dk(function(){var r=nM(n?SO(hN(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):Lj(t,e.conv0,[2,2])),i=Lj(r,e.conv1,[1,1]),s=Lj(nM(SO(r,i)),e.conv2,[1,1]);return nM(SO(r,SO(i,s)))})}function jj(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),dk(function(){var i=nM(n?SO(hN(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):Lj(t,e.conv0,r?[2,2]:[1,1])),s=Lj(i,e.conv1,[1,1]),o=Lj(nM(SO(i,s)),e.conv2,[1,1]),a=Lj(nM(SO(i,SO(s,o))),e.conv3,[1,1]);return nM(SO(i,SO(s,SO(o,a))))})}function Uj(t,e,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),dk(function(){var i=SO(hN(t,e.filters,[1,1],n),e.bias);return r?nM(i):i})}function Hj(t,e){Object.keys(t).forEach(function(n){e.some(function(t){return t.originalPath===n})||t[n].dispose()})}function zj(t,e){return function(n,r,i,s){var o=Uk(t(n*r*i*i),[i,i,n,r]),a=Lk(t(r));return e.push({paramPath:s+"/filters"},{paramPath:s+"/bias"}),{filters:o,bias:a}}}function Kj(t,e){return function(n,r,i){var s=Vk(t(n*r),[n,r]),o=Lk(t(r));return e.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:s,bias:o}}}var qj=function(t,e,n){this.depthwise_filter=t,this.pointwise_filter=e,this.bias=n};function Wj(t,e){return function(n,r,i){var s=Uk(t(9*n),[3,3,n,1]),o=Uk(t(n*r),[1,1,n,r]),a=Lk(t(r));return e.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new qj(s,o,a)}}function Gj(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),i=t(e+"/bias",1);return new qj(n,r,i)}}function $j(t,e){return function(n,r,i){var s=t[n];if(!LV(s,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+s);return e.push({originalPath:n,paramPath:i||n}),s}}function Xj(t){var e=t;return{extractWeights:function(t){var n=e.slice(0,t);return e=e.slice(t),n},getRemainingWeights:function(){return e}}}function Qj(t,e){var n=zj(t,e),r=Wj(t,e);function i(t,e,i,s){return void 0===s&&(s=!1),{conv0:s?n(t,e,3,i+"/conv0"):r(t,e,i+"/conv0"),conv1:r(e,e,i+"/conv1"),conv2:r(e,e,i+"/conv2")}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:function(t,e,n,s){void 0===s&&(s=!1);var o=i(t,e,n,s);return{conv0:o.conv0,conv1:o.conv1,conv2:o.conv2,conv3:r(e,e,n+"/conv3")}}}}function Yj(t){return function(e){return{filters:t(e+"/filters",4),bias:t(e+"/bias",1)}}}function Zj(t,e){var n=$j(t,e),r=Yj(n),i=Gj(n);return{extractDenseBlock3Params:function(t,e){return void 0===e&&(e=!1),{conv0:e?r(t+"/conv0"):i(t+"/conv0"),conv1:i(t+"/conv1"),conv2:i(t+"/conv2")}},extractDenseBlock4Params:function(t,e){return void 0===e&&(e=!1),{conv0:e?r(t+"/conv0"):i(t+"/conv0"),conv1:i(t+"/conv1"),conv2:i(t+"/conv2"),conv3:i(t+"/conv3")}}}}var Jj=function(t){function e(){return t.call(this,"FaceFeatureExtractor")||this}return DV(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw new Error("FaceFeatureExtractor - load model before inference");return dk(function(){var n=jj(tj(t.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Mk(255)),e.dense0,!0);return n=jj(n,e.dense1),n=jj(n,e.dense2),n=jj(n,e.dense3),DN(n,[7,7],[2,2],"valid")})},e.prototype.forward=function(t){return BV(this,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Pj(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(t){return function(t){var e=[],n=Zj(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Hj(t,e),{params:r,paramMappings:e}}(t)},e.prototype.extractParams=function(t){return function(t){var e=[],n=Xj(t),r=n.getRemainingWeights,i=Qj(n.extractWeights,e).extractDenseBlock4Params,s=i(3,32,"dense0",!0),o=i(32,64,"dense1"),a=i(64,128,"dense2"),u=i(128,256,"dense3");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:e,params:{dense0:s,dense1:o,dense2:a,dense3:u}}}(t)},e}(Mj);function tU(t,e){return dk(function(){return SO(xN(t,e.weights),e.bias)})}function eU(t){var e={},n={};return Object.keys(t).forEach(function(r){(r.startsWith("fc")?n:e)[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var nU=function(t){function e(e,n){var r=t.call(this,e)||this;return r._faceFeatureExtractor=n,r}return DV(e,t),Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var e=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return dk(function(){var r=t instanceof kj?e.faceFeatureExtractor.forwardInput(t):t;return tU(r.as2D(r.shape[0],-1),n.fc)})},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},e.prototype.loadClassifierParams=function(t){var e=this.extractClassifierParams(t),n=e.paramMappings;this._params=e.params,this._paramMappings=n},e.prototype.extractClassifierParams=function(t){return function(t,e,n){var r=[],i=Xj(t),s=i.getRemainingWeights,o=Kj(i.extractWeights,r)(e,n,"fc");if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:r,params:{fc:o}}}(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(t){var e=eU(t),n=e.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(e.featureExtractorMap),function(t){var e=[],n=$j(t,e),r={fc:{weights:n("fc/weights",2),bias:n("fc/bias",1)}};return Hj(t,e),{params:r,paramMappings:e}}(n)},e.prototype.extractParams=function(t){var e=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*e+n,i=t.slice(0,t.length-r),s=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(s)},e}(Mj),rU=["neutral","happy","sad","angry","fearful","disgusted","surprised"],iU=function(){function t(t){var e=this;if(7!==t.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);rU.forEach(function(n,r){e[n]=t[r]})}return t.prototype.asSortedArray=function(){var t=this;return rU.map(function(e){return{expression:e,probability:t[e]}}).sort(function(t,e){return e.probability-t.probability})},t}(),sU=function(t){function e(e){return void 0===e&&(e=new Jj),t.call(this,"FaceExpressionNet",e)||this}return DV(e,t),e.prototype.forwardInput=function(t){var e=this;return dk(function(){return rR(e.runNet(t))})},e.prototype.forward=function(t){return BV(this,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Pj(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.predictExpressions=function(t){return BV(this,void 0,void 0,function(){var e,n,r,i,s=this;return OV(this,function(o){switch(o.label){case 0:return[4,Pj(t)];case 1:return e=o.sent(),[4,this.forwardInput(e)];case 2:return n=o.sent(),[4,Promise.all(LP(n).map(function(t){return BV(s,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:return[4,t.data()];case 1:return e=n.sent(),t.dispose(),[2,e]}})})}))];case 3:return r=o.sent(),n.dispose(),i=r.map(function(t){return new iU(t)}),[2,e.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(nU);function oU(t,e){return Object.assign({},t,{expressions:e})}function aU(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),i=r.align(),s=t.detection.imageDims,o=new YV(t.detection.score,i.rescale(s.reverse()),s);return Object.assign({},t,{landmarks:r,unshiftedLandmarks:e,alignedRect:o})}function uU(t,e,n){return SO(hN(t,e.filters,n,"same"),e.bias)}function cU(t,e,n){void 0===n&&(n=!0);var r=n?nM(t):t;return r=Lj(r,e.separable_conv0,[1,1]),r=Lj(nM(r),e.separable_conv1,[1,1]),r=RN(r,[3,3],[2,2],"same"),SO(r,uU(t,e.expansion_conv,[2,2]))}var lU,hU=function(t){function e(e){var n=t.call(this,"TinyXception")||this;return n._numMainBlocks=e,n}return DV(e,t),e.prototype.forwardInput=function(t){var e=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return dk(function(){var r=tj(t.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Mk(256)),i=nM(uU(r,n.entry_flow.conv_in,[2,2]));return i=cU(i,n.entry_flow.reduction_block_0,!1),i=cU(i,n.entry_flow.reduction_block_1),KV(e._numMainBlocks,0,1).forEach(function(t){i=function(t,e){var n=Lj(nM(t),e.separable_conv0,[1,1]);return n=Lj(nM(n),e.separable_conv1,[1,1]),n=Lj(nM(n),e.separable_conv2,[1,1]),SO(n,t)}(i,n.middle_flow["main_block_"+t])}),i=cU(i,n.exit_flow.reduction_block),i=nM(Lj(i,n.exit_flow.separable_conv,[1,1]))})},e.prototype.forward=function(t){return BV(this,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Pj(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(t){return function(t,e){var n=[],r=function(t,e){var n=$j(t,e),r=Yj(n),i=Gj(n);return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:function(t){return{separable_conv0:i(t+"/separable_conv0"),separable_conv1:i(t+"/separable_conv1"),expansion_conv:r(t+"/expansion_conv")}},extractMainBlockParams:function(t){return{separable_conv0:i(t+"/separable_conv0"),separable_conv1:i(t+"/separable_conv1"),separable_conv2:i(t+"/separable_conv2")}}}}(t,n),i=r.extractSeparableConvParams,s=r.extractReductionBlockParams,o=r.extractMainBlockParams,a={conv_in:(0,r.extractConvParams)("entry_flow/conv_in"),reduction_block_0:s("entry_flow/reduction_block_0"),reduction_block_1:s("entry_flow/reduction_block_1")},u={};KV(e,0,1).forEach(function(t){u["main_block_"+t]=o("middle_flow/main_block_"+t)});var c={reduction_block:s("exit_flow/reduction_block"),separable_conv:i("exit_flow/separable_conv")};return Hj(t,n),{params:{entry_flow:a,middle_flow:u,exit_flow:c},paramMappings:n}}(t,this._numMainBlocks)},e.prototype.extractParams=function(t){return function(t,e){var n=[],r=Xj(t),i=r.getRemainingWeights,s=function(t,e){var n=zj(t,e),r=Wj(t,e);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(t,e,i){return{separable_conv0:r(t,e,i+"/separable_conv0"),separable_conv1:r(e,e,i+"/separable_conv1"),expansion_conv:n(t,e,1,i+"/expansion_conv")}},extractMainBlockParams:function(t,e){return{separable_conv0:r(t,t,e+"/separable_conv0"),separable_conv1:r(t,t,e+"/separable_conv1"),separable_conv2:r(t,t,e+"/separable_conv2")}}}}(r.extractWeights,n),o=s.extractSeparableConvParams,a=s.extractReductionBlockParams,u=s.extractMainBlockParams,c={conv_in:(0,s.extractConvParams)(3,32,3,"entry_flow/conv_in"),reduction_block_0:a(32,64,"entry_flow/reduction_block_0"),reduction_block_1:a(64,128,"entry_flow/reduction_block_1")},l={};KV(e,0,1).forEach(function(t){l["main_block_"+t]=u(128,"middle_flow/main_block_"+t)});var h={reduction_block:a(128,256,"exit_flow/reduction_block"),separable_conv:o(256,512,"exit_flow/separable_conv")};if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:c,middle_flow:l,exit_flow:h}}}(t,this._numMainBlocks)},e}(Mj),pU=(()=>{return(t=pU||(pU={})).FEMALE="female",t.MALE="male",pU;var t})(),fU=function(t){function e(e){void 0===e&&(e=new hU(2));var n=t.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=e,n}return DV(e,t),Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var e=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return dk(function(){var r=t instanceof kj?e.faceFeatureExtractor.forwardInput(t):t,i=DN(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:tU(i,n.fc.age).as1D(),gender:tU(i,n.fc.gender)}})},e.prototype.forwardInput=function(t){var e=this;return dk(function(){var n=e.runNet(t);return{age:n.age,gender:rR(n.gender)}})},e.prototype.forward=function(t){return BV(this,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Pj(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.predictAgeAndGender=function(t){return BV(this,void 0,void 0,function(){var e,n,r,i,s,o,a=this;return OV(this,function(u){switch(u.label){case 0:return[4,Pj(t)];case 1:return e=u.sent(),[4,this.forwardInput(e)];case 2:return n=u.sent(),r=LP(n.age),i=LP(n.gender),s=r.map(function(t,e){return{ageTensor:t,genderTensor:i[e]}}),[4,Promise.all(s.map(function(t){var e=t.ageTensor,n=t.genderTensor;return BV(a,void 0,void 0,function(){var t,r,i,s,o;return OV(this,function(a){switch(a.label){case 0:return[4,e.data()];case 1:return t=a.sent()[0],[4,n.data()];case 2:return r=a.sent()[0],s=(i=r>.5)?pU.MALE:pU.FEMALE,o=i?r:1-r,e.dispose(),n.dispose(),[2,{age:t,gender:s,genderProbability:o}]}})})}))];case 3:return o=u.sent(),n.age.dispose(),n.gender.dispose(),[2,e.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},e.prototype.loadClassifierParams=function(t){var e=this.extractClassifierParams(t),n=e.paramMappings;this._params=e.params,this._paramMappings=n},e.prototype.extractClassifierParams=function(t){return function(t){var e=[],n=Xj(t),r=n.getRemainingWeights,i=Kj(n.extractWeights,e),s=i(512,1,"fc/age"),o=i(512,2,"fc/gender");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:e,params:{fc:{age:s,gender:o}}}}(t)},e.prototype.extractParamsFromWeigthMap=function(t){var e=eU(t),n=e.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(e.featureExtractorMap),function(t){var e=[],n=$j(t,e);function r(t){return{weights:n(t+"/weights",2),bias:n(t+"/bias",1)}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Hj(t,e),{params:i,paramMappings:e}}(n)},e.prototype.extractParams=function(t){var e=t.slice(0,t.length-1539),n=t.slice(t.length-1539);return this.faceFeatureExtractor.extractWeights(e),this.extractClassifierParams(n)},e}(Mj),dU=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.postProcess=function(t,e,n){var r=n.map(function(t){var n=t.width,r=t.height,i=e/Math.max(r,n);return{width:n*i,height:r*i}}),i=r.length;return dk(function(){var n=function(t,e){return OP([Kk([68],t),Kk([68],e)],1).as2D(1,136).as1D()},s=function(t,e){var n=r[t],i=n.width,s=n.height;return e(i,s)?Math.abs(i-s)/2:0};return t.mul(Kk([i,136],e)).sub(OP(Array.from(Array(i),function(t,e){return n(function(t){return s(t,function(t,e){return t<e})}(e),function(t){return s(t,function(t,e){return e<t})}(e))}))).div(OP(Array.from(Array(i),function(t,e){return n(r[e].width,r[e].height)})))})},e.prototype.forwardInput=function(t){var e=this;return dk(function(){var n=e.runNet(t);return e.postProcess(n,t.inputSize,t.inputDimensions.map(function(t){return{height:t[0],width:t[1]}}))})},e.prototype.forward=function(t){return BV(this,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Pj(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.detectLandmarks=function(t){return BV(this,void 0,void 0,function(){var e,n,r,i=this;return OV(this,function(s){switch(s.label){case 0:return[4,Pj(t)];case 1:return e=s.sent(),n=dk(function(){return LP(i.forwardInput(e))}),[4,Promise.all(n.map(function(t,n){return BV(i,void 0,void 0,function(){var r,i,s,o,a;return OV(this,function(u){switch(u.label){case 0:return s=(i=Array).from,[4,t.data()];case 1:return r=s.apply(i,[u.sent()]),o=r.filter(function(t,e){return UV(e)}),a=r.filter(function(t,e){return!UV(e)}),[2,new oj(Array(68).fill(0).map(function(t,e){return new GV(o[e],a[e])}),{height:e.getInputHeight(n),width:e.getInputWidth(n)})]}})})}))];case 2:return r=s.sent(),n.forEach(function(t){return t.dispose()}),[2,e.isBatchInput?r:r[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(nU),mU=function(t){function e(e){return void 0===e&&(e=new Jj),t.call(this,"FaceLandmark68Net",e)||this}return DV(e,t),e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(dU),gU=function(t){function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return DV(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw new Error("TinyFaceFeatureExtractor - load model before inference");return dk(function(){var n=Vj(tj(t.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Mk(255)),e.dense0,!0);return n=Vj(n,e.dense1),n=Vj(n,e.dense2),DN(n,[14,14],[2,2],"valid")})},e.prototype.forward=function(t){return BV(this,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Pj(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(t){return function(t){var e=[],n=Zj(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Hj(t,e),{params:r,paramMappings:e}}(t)},e.prototype.extractParams=function(t){return function(t){var e=[],n=Xj(t),r=n.getRemainingWeights,i=Qj(n.extractWeights,e).extractDenseBlock3Params,s=i(3,32,"dense0",!0),o=i(32,64,"dense1"),a=i(64,128,"dense2");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:e,params:{dense0:s,dense1:o,dense2:a}}}(t)},e}(Mj),vU=function(t){function e(e){return void 0===e&&(e=new gU),t.call(this,"FaceLandmark68TinyNet",e)||this}return DV(e,t),e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(dU);function yU(t,e,n,r,i){void 0===i&&(i="same");var s=e.conv,o=s.bias,a=hN(t,s.filters,n,i);return a=function(t,e){return SO(LO(t,e.weights),e.biases)}(a=SO(a,o),e.scale),r?nM(a):a}function bU(t,e){return yU(t,e,[1,1],!1)}function wU(t,e){return yU(t,e,[2,2],!0,"valid")}function xU(t,e){var n=function(t,e){return yU(t,e,[1,1],!0)}(t,e.conv1);return n=bU(n,e.conv2),n=SO(n,t),nM(n)}function EU(t,e){var n=wU(t,e.conv1);n=bU(n,e.conv2);var r=DN(t,2,2,"valid"),i=zk(r.shape),s=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var o=NV(n.shape);o[1]=1;var a=zk(o),u=NV((n=$k([n,a],1)).shape);u[2]=1;var c=zk(u);n=$k([n,c],2)}return r=s?$k([r,i],3):r,n=SO(r,n),nM(n)}DV(function(){return null!==lU&&lU.apply(this,arguments)||this},lU=mU);var _U=function(t){function e(){return t.call(this,"FaceRecognitionNet")||this}return DV(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw new Error("FaceRecognitionNet - load model before inference");return dk(function(){var n=wU(tj(t.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(Mk(256)),e.conv32_down);n=xU(n=RN(n,3,2,"valid"),e.conv32_1),n=xU(n,e.conv32_2),n=xU(n,e.conv32_3),n=xU(n=EU(n,e.conv64_down),e.conv64_1),n=xU(n,e.conv64_2),n=xU(n,e.conv64_3),n=xU(n=EU(n,e.conv128_down),e.conv128_1),n=xU(n,e.conv128_2),n=xU(n=EU(n,e.conv256_down),e.conv256_1);var r=(n=EU(n=xU(n,e.conv256_2),e.conv256_down_out)).mean([1,2]);return xN(r,e.fc)})},e.prototype.forward=function(t){return BV(this,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Pj(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.computeFaceDescriptor=function(t){return BV(this,void 0,void 0,function(){var e,n,r,i=this;return OV(this,function(s){switch(s.label){case 0:return[4,Pj(t)];case 1:return e=s.sent(),n=dk(function(){return LP(i.forwardInput(e))}),[4,Promise.all(n.map(function(t){return t.data()}))];case 2:return r=s.sent(),n.forEach(function(t){return t.dispose()}),[2,e.isBatchInput?r:r[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(t){return function(t){var e=[],n=function(t,e){var n=$j(t,e);function r(t){return{conv:{filters:n(t+"/conv/filters",4),bias:n(t+"/conv/bias",1)},scale:function(t){return{weights:n(t+"/scale/weights",1),biases:n(t+"/scale/biases",1)}}(t)}}return{extractConvLayerParams:r,extractResidualLayerParams:function(t){return{conv1:r(t+"/conv1"),conv2:r(t+"/conv2")}}}}(t,e),r=n.extractResidualLayerParams,i=(0,n.extractConvLayerParams)("conv32_down"),s=r("conv32_1"),o=r("conv32_2"),a=r("conv32_3"),u=r("conv64_down"),c=r("conv64_1"),l=r("conv64_2"),h=r("conv64_3"),p=r("conv128_down"),f=r("conv128_1"),d=r("conv128_2"),m=r("conv256_down"),g=r("conv256_1"),v=r("conv256_2"),y=r("conv256_down_out"),b=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!LV(b,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var w={conv32_down:i,conv32_1:s,conv32_2:o,conv32_3:a,conv64_down:u,conv64_1:c,conv64_2:l,conv64_3:h,conv128_down:p,conv128_1:f,conv128_2:d,conv256_down:m,conv256_1:g,conv256_2:v,conv256_down_out:y,fc:b};return Hj(t,e),{params:w,paramMappings:e}}(t)},e.prototype.extractParams=function(t){return function(t){var e=Xj(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],s=function(t,e){function n(n,r,i,s){var o=function(e,n,r){var i=t(e),s=i.length/(n*r*r);if(s%1!=0)throw new Error("depth has to be an integer: "+s+", weights.length: "+i.length+", numFilters: "+n+", filterSize: "+r);return dk(function(){return sM(Uk(i,[n,s,r,r]),[2,3,1,0])})}(n,r,i),a=Lk(t(r));return e.push({paramPath:s+"/filters"},{paramPath:s+"/bias"}),{filters:o,bias:a}}function r(r,i,s,o){return{conv:n(r,i,s,o+"/conv"),scale:function(n,r){var i=Lk(t(n)),s=Lk(t(n));return e.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:i,biases:s}}(i,o+"/scale")}}return{extractConvLayerParams:r,extractResidualLayerParams:function(t,e,n,i,s){return void 0===s&&(s=!1),{conv1:r((s?.5:1)*t,e,n,i+"/conv1"),conv2:r(t,e,n,i+"/conv2")}}}}(n,i),o=s.extractResidualLayerParams,a=(0,s.extractConvLayerParams)(4704,32,7,"conv32_down"),u=o(9216,32,3,"conv32_1"),c=o(9216,32,3,"conv32_2"),l=o(9216,32,3,"conv32_3"),h=o(36864,64,3,"conv64_down",!0),p=o(36864,64,3,"conv64_1"),f=o(36864,64,3,"conv64_2"),d=o(36864,64,3,"conv64_3"),m=o(147456,128,3,"conv128_down",!0),g=o(147456,128,3,"conv128_1"),v=o(147456,128,3,"conv128_2"),y=o(589824,256,3,"conv256_down",!0),b=o(589824,256,3,"conv256_1"),w=o(589824,256,3,"conv256_2"),x=o(589824,256,3,"conv256_down_out"),E=dk(function(){return sM(Vk(n(32768),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:a,conv32_1:u,conv32_2:c,conv32_3:l,conv64_down:h,conv64_1:p,conv64_2:f,conv64_3:d,conv128_down:m,conv128_1:g,conv128_2:v,conv256_down:y,conv256_1:b,conv256_2:w,conv256_down_out:x,fc:E},paramMappings:i}}(t)},e}(Mj);function SU(t,e,n){return Object.assign({},t,{gender:e,genderProbability:n})}var CU=function(){function t(t){var e=void 0===t?{}:t,n=e.minFaceSize,r=e.scaleFactor,i=e.maxNumScales,s=e.scoreThresholds,o=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=i||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=o,"number"!=typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!=typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!=typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(t){return"number"!=typeof t}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(t){return"number"!=typeof t})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function AU(t,e,n){return dk(function(){var r=hN(t,e.filters,n,"same");return r=SO(r,e.batch_norm_offset),DB(r,0,6)})}function IU(t,e,n){var r=t.arraySync(),i=Math.min(r[e][0],r[e][2]),s=Math.min(r[e][1],r[e][3]),o=Math.max(r[e][0],r[e][2]),a=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),h=Math.max(r[n][1],r[n][3]),p=(o-i)*(a-s),f=(l-u)*(h-c);if(p<=0||f<=0)return 0;var d=Math.max(i,u),m=Math.max(s,c),g=Math.min(o,l),v=Math.min(a,h),y=Math.max(g-d,0)*Math.max(v-m,0);return y/(p+f-y)}function TU(t,e){return dk(function(){var n=t.shape[0];return{boxPredictionEncoding:DP(Uj(t,e.box_encoding_predictor),[n,-1,1,4]),classPrediction:DP(Uj(t,e.class_predictor),[n,-1,3])}})}var kU=function(){function t(t){var e=void 0===t?{}:t,n=e.minConfidence,r=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),PU=function(t){function e(){return t.call(this,"SsdMobilenetv1")||this}return DV(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw new Error("SsdMobilenetv1 - load model before inference");return dk(function(){var n=t.toBatchTensor(512,!1).toFloat(),r=function(t,e){return dk(function(){var n=null,r=AU(t,e.conv_0,[2,2]);if([e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13].forEach(function(t,e){var i=e+1,s=function(t){return[2,4,6,12].some(function(e){return e===t})?[2,2]:[1,1]}(i);r=AU(r=function(t,e,n){return dk(function(){var r=mN(t,e.filters,n,"same");return r=dO(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,.0010000000474974513),DB(r,0,6)})}(r,t.depthwise_conv,s),t.pointwise_conv,[1,1]),11===i&&(n=r)}),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}(zO(LO(n,Mk(.007843137718737125)),Mk(1)),e.mobilenetv1),i=function(t,e,n){return dk(function(){var r=AU(t,n.conv_0,[1,1]),i=AU(r,n.conv_1,[2,2]),s=AU(i,n.conv_2,[1,1]),o=AU(s,n.conv_3,[2,2]),a=AU(o,n.conv_4,[1,1]),u=AU(a,n.conv_5,[2,2]),c=AU(u,n.conv_6,[1,1]),l=AU(c,n.conv_7,[2,2]),h=TU(e,n.box_predictor_0),p=TU(t,n.box_predictor_1),f=TU(i,n.box_predictor_2),d=TU(o,n.box_predictor_3),m=TU(u,n.box_predictor_4),g=TU(l,n.box_predictor_5);return{boxPredictions:$k([h.boxPredictionEncoding,p.boxPredictionEncoding,f.boxPredictionEncoding,d.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),classPredictions:$k([h.classPrediction,p.classPrediction,f.classPrediction,d.classPrediction,m.classPrediction,g.classPrediction],1)}})}(r.out,r.conv11,e.prediction_layer);return function(t,e,n){return dk(function(){var r=t.shape[0],i=function(t,e){var n=function(t){var e=LP(sM(t,[1,0])),n=[zO(e[2],e[0]),zO(e[3],e[1])];return{sizes:n,centers:[SO(e[0],TO(n[0],Mk(2))),SO(e[1],TO(n[1],Mk(2)))]}}(t),r=n.sizes,i=n.centers,s=LP(sM(e,[1,0])),o=TO(LO(NB(TO(s[2],Mk(5))),r[0]),Mk(2)),a=SO(LO(TO(s[0],Mk(10)),r[0]),i[0]),u=TO(LO(NB(TO(s[3],Mk(5))),r[1]),Mk(2)),c=SO(LO(TO(s[1],Mk(10)),r[1]),i[1]);return sM(OP([zO(a,o),zO(c,u),SO(a,o),SO(c,u)]),[1,0])}(DP(NP(n.extra_dim,[r,1,1]),[-1,4]),DP(t,[-1,4]));i=DP(i,[r,i.shape[0]/r,4]);var s=WB(NN(e,[0,0,1],[-1,-1,-1])),o=NN(s,[0,0,0],[-1,-1,1]);return o=DP(o,[r,o.shape[1]]),{boxes:LP(i),scores:LP(o)}})}(i.boxPredictions,i.classPredictions,e.output_layer)})},e.prototype.forward=function(t){return BV(this,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Pj(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.locateFaces=function(t,e){return void 0===e&&(e={}),BV(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,p,f,d,m,g,v,y,b,w,x;return OV(this,function(E){switch(E.label){case 0:return n=new kU(e),r=n.maxResults,i=n.minConfidence,[4,Pj(t)];case 1:for(s=E.sent(),o=this.forwardInput(s),c=(a=o.boxes)[0],l=(u=o.scores)[0],h=1;h<a.length;h++)a[h].dispose(),u[h].dispose();return d=(f=Array).from,[4,l.data()];case 2:return p=d.apply(f,[E.sent()]),m=function(t,e,n,r,i){var s=Math.min(n,t.shape[0]),o=e.map(function(t,e){return{score:t,boxIndex:e}}).filter(function(t){return t.score>i}).sort(function(t,e){return e.score-t.score}),a=function(t){return t<=.5?1:0},u=[];return o.forEach(function(e){if(!(u.length>=s)){for(var n=e.score,r=u.length-1;r>=0;--r){var o=IU(t,e.boxIndex,u[r]);if(0!==o&&(e.score*=a(o),e.score<=i))break}n===e.score&&u.push(e.boxIndex)}}),u}(c,p,r,0,i),g=s.getReshapedInputDimensions(0),y=(v=s.inputSize)/g.width,b=v/g.height,w=c.arraySync(),x=m.map(function(t){var e=[Math.max(0,w[t][0]),Math.min(1,w[t][2])].map(function(t){return t*b}),n=e[0],r=e[1],i=[Math.max(0,w[t][1]),Math.min(1,w[t][3])].map(function(t){return t*y}),o=i[0];return new YV(p[t],new rj(o,n,i[1]-o,r-n),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),c.dispose(),l.dispose(),[2,x]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(t){return function(t){var e=[],n=function(t,e){var n=$j(t,e);function r(t,e,r){return{filters:n(t+"/Conv2d_"+e+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(t+"/Conv2d_"+e+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function i(t){var e="mobilenetv1/conv_"+t,i="MobilenetV1/Conv2d_"+t+"_depthwise",s=e+"/depthwise_conv",o=e+"/pointwise_conv";return{depthwise_conv:{filters:n(i+"/depthwise_weights",4,s+"/filters"),batch_norm_scale:n(i+"/BatchNorm/gamma",1,s+"/batch_norm_scale"),batch_norm_offset:n(i+"/BatchNorm/beta",1,s+"/batch_norm_offset"),batch_norm_mean:n(i+"/BatchNorm/moving_mean",1,s+"/batch_norm_mean"),batch_norm_variance:n(i+"/BatchNorm/moving_variance",1,s+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",t,o)}}function s(t,e){return{filters:n(t+"/weights",4,e+"/filters"),bias:n(t+"/biases",1,e+"/bias")}}function o(t){return{box_encoding_predictor:s("Prediction/BoxPredictor_"+t+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+t+"/box_encoding_predictor"),class_predictor:s("Prediction/BoxPredictor_"+t+"/ClassPredictor","prediction_layer/box_predictor_"+t+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}}}(t,e),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,s=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!VV(s))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+s);var o={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:s}};return Hj(t,e),{params:o,paramMappings:e}}(t)},e.prototype.extractParams=function(t){return function(t){var e=[],n=Xj(t),r=n.extractWeights,i=n.getRemainingWeights,s=function(t,e){function n(n,r,i,s,o){var a=Uk(t(n*r*i*i),[i,i,n,r]),u=Lk(t(r));return e.push({paramPath:s+"/filters"},{paramPath:s+"/"+(o?"batch_norm_offset":"bias")}),{filters:a,bias:u}}function r(t,e,r,i){var s=n(t,e,r,i,!0);return{filters:s.filters,batch_norm_offset:s.bias}}function i(n,i,s){return{depthwise_conv:function(n,r){var i=Uk(t(9*n),[3,3,n,1]),s=Lk(t(n)),o=Lk(t(n)),a=Lk(t(n)),u=Lk(t(n));return e.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:i,batch_norm_scale:s,batch_norm_offset:o,batch_norm_mean:a,batch_norm_variance:u}}(n,s+"/depthwise_conv"),pointwise_conv:r(n,i,1,s+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:i(32,64,"mobilenetv1/conv_1"),conv_2:i(64,128,"mobilenetv1/conv_2"),conv_3:i(128,128,"mobilenetv1/conv_3"),conv_4:i(128,256,"mobilenetv1/conv_4"),conv_5:i(256,256,"mobilenetv1/conv_5"),conv_6:i(256,512,"mobilenetv1/conv_6"),conv_7:i(512,512,"mobilenetv1/conv_7"),conv_8:i(512,512,"mobilenetv1/conv_8"),conv_9:i(512,512,"mobilenetv1/conv_9"),conv_10:i(512,512,"mobilenetv1/conv_10"),conv_11:i(512,512,"mobilenetv1/conv_11"),conv_12:i(512,1024,"mobilenetv1/conv_12"),conv_13:i(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}(r,e),o=s.extractPredictionLayerParams,a=(0,s.extractMobilenetV1Params)(),u=o(),c={extra_dim:jk(r(20472),[1,5118,4])};if(e.push({paramPath:"output_layer/extra_dim"}),0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:a,prediction_layer:u,output_layer:c},paramMappings:e}}(t)},e}(Mj);!function(t){DV(function(){return null!==t&&t.apply(this,arguments)||this},t)}(PU);var RU=[new GV(.738768,.874946),new GV(2.42204,2.65704),new GV(4.30971,7.04493),new GV(10.246,4.59428),new GV(12.6868,11.8741)],DU=[new GV(1.603231,2.094468),new GV(6.041143,7.080126),new GV(2.882459,3.518061),new GV(4.266906,5.178857),new GV(9.041765,10.66308)],FU=[117.001,114.697,97.404],BU=function(t){return"number"==typeof t};function OU(t){return dk(function(){var e=LO(t,Mk(.10000000149011612));return SO(nM(zO(t,e)),e)})}function NU(t,e){return dk(function(){var n=_P(t,[[0,0],[1,1],[1,1],[0,0]]);return n=hN(n,e.conv.filters,[1,1],"valid"),n=zO(n,e.bn.sub),n=LO(n,e.bn.truediv),OU(n=SO(n,e.conv.bias))})}function MU(t,e){return dk(function(){var n=_P(t,[[0,0],[1,1],[1,1],[0,0]]);return n=yN(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),OU(n=SO(n,e.bias))})}var LU=function(){function t(t){var e=void 0===t?{}:t,n=e.inputSize,r=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),VU=function(t){function e(e){var n=t.call(this,"TinyYolov2")||this;return function(t){if(!t)throw new Error("invalid config: "+t);if("boolean"!=typeof t.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!BU(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(t){return"string"==typeof t}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(t){return t||{}}).every(function(t){return BU(t.x)&&BU(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||3!==t.meanRgb.length||!t.meanRgb.every(BU)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}(e),n._config=e,n}return DV(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(t,e){var n=NU(t,e.conv0);return n=NU(n=RN(n,[2,2],[2,2],"same"),e.conv1),n=NU(n=RN(n,[2,2],[2,2],"same"),e.conv2),n=NU(n=RN(n,[2,2],[2,2],"same"),e.conv3),n=NU(n=RN(n,[2,2],[2,2],"same"),e.conv4),n=NU(n=RN(n,[2,2],[2,2],"same"),e.conv5),n=NU(n=RN(n,[2,2],[1,1],"same"),e.conv6),Uj(n=NU(n,e.conv7),e.conv8,"valid",!1)},e.prototype.runMobilenet=function(t,e){var n=this.config.isFirstLayerConv2d?OU(Uj(t,e.conv0,"valid",!1)):MU(t,e.conv0);return n=MU(n=RN(n,[2,2],[2,2],"same"),e.conv1),n=MU(n=RN(n,[2,2],[2,2],"same"),e.conv2),n=MU(n=RN(n,[2,2],[2,2],"same"),e.conv3),n=MU(n=RN(n,[2,2],[2,2],"same"),e.conv4),n=MU(n=RN(n,[2,2],[2,2],"same"),e.conv5),n=RN(n,[2,2],[1,1],"same"),n=e.conv6?MU(n,e.conv6):n,Uj(n=e.conv7?MU(n,e.conv7):n,e.conv8,"valid",!1)},e.prototype.forwardInput=function(t,e){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return dk(function(){var i=t.toBatchTensor(e,!1).toFloat();return i=(i=n.config.meanRgb?tj(i,n.config.meanRgb):i).div(Mk(256)),n.config.withSeparableConvs?n.runMobilenet(i,r):n.runTinyYolov2(i,r)})},e.prototype.forward=function(t,e){return BV(this,void 0,void 0,function(){var n;return OV(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Pj(t)];case 1:return[4,n.apply(this,[r.sent(),e])];case 2:return[2,r.sent()]}})})},e.prototype.detect=function(t,e){return void 0===e&&(e={}),BV(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,p,f,d=this;return OV(this,function(m){switch(m.label){case 0:return n=new LU(e),r=n.inputSize,i=n.scoreThreshold,[4,Pj(t)];case 1:return s=m.sent(),[4,this.forwardInput(s,r)];case 2:return o=m.sent(),a=dk(function(){return LP(o)[0].expandDims()}),u={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(a,s.getReshapedInputDimensions(0),i)];case 3:return c=m.sent(),o.dispose(),a.dispose(),l=c.map(function(t){return t.box}),h=c.map(function(t){return t.score}),p=c.map(function(t){return t.classScore}),f=c.map(function(t){return d.config.classes[t.label]}),[2,JV(l.map(function(t){return t.rescale(r)}),h,this.config.iouThreshold,!0).map(function(t){return new QV(h[t],p[t],f[t],l[t],u)})]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(t){return function(t,e){var n,r=[],i=function(t,e){var n=$j(t,e);function r(t){return{filters:n(t+"/filters",4),bias:n(t+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(t){return{conv:r(t+"/conv"),bn:function(t){return{sub:n(t+"/sub",1),truediv:n(t+"/truediv",1)}}(t+"/bn")}},extractSeparableConvParams:Gj(n)}}(t,r),s=i.extractConvParams,o=i.extractConvWithBatchNormParams,a=i.extractSeparableConvParams;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;n={conv0:e.isFirstLayerConv2d?s("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:u>7?a("conv6"):void 0,conv7:u>8?a("conv7"):void 0,conv8:s("conv8")}}else n={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:s("conv8")};return Hj(t,r),{params:n,paramMappings:r}}(t,this.config)},e.prototype.extractParams=function(t){var n=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(t,e,n,r){var i,s=Xj(t),o=s.getRemainingWeights,a=[],u=function(t,e){var n=zj(t,e),r=Wj(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,i,s){return{conv:n(r,i,3,s+"/conv"),bn:function(n,r){var i=Lk(t(n)),s=Lk(t(n));return e.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:i,truediv:s}}(i,s+"/bn")}},extractSeparableConvParams:r}}(s.extractWeights,a),c=u.extractConvParams,l=u.extractConvWithBatchNormParams,h=u.extractSeparableConvParams;if(e.withSeparableConvs){var p=r[0],f=r[1],d=r[2],m=r[3],g=r[4],v=r[5],y=r[6],b=r[7],w=r[8];i={conv0:e.isFirstLayerConv2d?c(p,f,3,"conv0"):h(p,f,"conv0"),conv1:h(f,d,"conv1"),conv2:h(d,m,"conv2"),conv3:h(m,g,"conv3"),conv4:h(g,v,"conv4"),conv5:h(v,y,"conv5"),conv6:b?h(y,b,"conv6"):void 0,conv7:w?h(b,w,"conv7"):void 0,conv8:c(w||b||y,5*n,1,"conv8")}}else d=r[2],m=r[3],g=r[4],v=r[5],y=r[6],b=r[7],w=r[8],i={conv0:l(p=r[0],f=r[1],"conv0"),conv1:l(f,d,"conv1"),conv2:l(d,m,"conv2"),conv3:l(m,g,"conv3"),conv4:l(g,v,"conv4"),conv5:l(v,y,"conv5"),conv6:l(y,b,"conv6"),conv7:l(b,w,"conv7"),conv8:c(w,5*n,1,"conv8")};if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{params:i,paramMappings:a}}(t,this.config,this.boxEncodingSize,n)},e.prototype.extractBoxes=function(t,e,n){return BV(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h,p,f,d,m,g,v,y,b,w,x,E,_,S,C,A,I,T,k,P,R,D=this;return OV(this,function(F){switch(F.label){case 0:return r=e.width,i=e.height,s=Math.max(r,i),o=s/r,a=s/i,u=t.shape[1],c=this.config.anchors.length,l=dk(function(){var e=t.reshape([u,u,c,D.boxEncodingSize]);return[e.slice([0,0,0,0],[u,u,c,4]),e.slice([0,0,0,4],[u,u,c,1]),D.withClassScores?rR(e.slice([0,0,0,5],[u,u,c,D.config.classes.length]),3):Mk(0)]}),h=l[0],f=l[2],d=[],[4,(p=l[1]).array()];case 1:return m=F.sent(),[4,h.array()];case 2:g=F.sent(),v=0,F.label=3;case 3:if(!(v<u))return[3,12];y=0,F.label=4;case 4:if(!(y<u))return[3,11];b=0,F.label=5;case 5:return b<c?(w=ej(m[v][y][b][0]),!n||w>n?(x=(y+ej(g[v][y][b][0]))/u*o,E=(v+ej(g[v][y][b][1]))/u*a,_=Math.exp(g[v][y][b][2])*this.config.anchors[b].x/u*o,S=Math.exp(g[v][y][b][3])*this.config.anchors[b].y/u*a,C=x-_/2,A=E-S/2,I={row:v,col:y,anchor:b},this.withClassScores?[4,this.extractPredictedClass(f,I)]:[3,7]):[3,9]):[3,10];case 6:return R=F.sent(),[3,8];case 7:R={classScore:1,label:0},F.label=8;case 8:k=(T=R).classScore,P=T.label,d.push(FV({box:new XV(C,A,C+_,A+S),score:w,classScore:w*k,label:P},I)),F.label=9;case 9:return b++,[3,5];case 10:return y++,[3,4];case 11:return v++,[3,3];case 12:return h.dispose(),p.dispose(),f.dispose(),[2,d]}})})},e.prototype.extractPredictedClass=function(t,e){return BV(this,void 0,void 0,function(){var n,r,i,s;return OV(this,function(o){switch(o.label){case 0:return n=e.row,r=e.col,i=e.anchor,[4,t.array()];case 1:return s=o.sent(),[2,Array(this.config.classes.length).fill(0).map(function(t,e){return s[n][r][i][e]}).map(function(t,e){return{classScore:t,label:e}}).reduce(function(t,e){return t.classScore>e.classScore?t:e})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(Mj),jU=function(t){function e(e){void 0===e&&(e=!0);var n=Object.assign({},{withSeparableConvs:e,iouThreshold:.4,classes:["face"]},e?{anchors:DU,meanRgb:FU}:{anchors:RU,withClassScores:!0});return t.call(this,n)||this}return DV(e,t),Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,e){return BV(this,void 0,void 0,function(){return OV(this,function(n){switch(n.label){case 0:return[4,this.detect(t,e)];case 1:return[2,n.sent().map(function(t){return new YV(t.score,t.relativeBox,{width:t.imageWidth,height:t.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},e.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},e}(VU),UU=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return DV(e,t),e}(LU),HU=function(){function t(){}return t.prototype.then=function(t){return BV(this,void 0,void 0,function(){var e;return OV(this,function(n){switch(n.label){case 0:return e=t,[4,this.run()];case 1:return[2,e.apply(void 0,[n.sent()])]}})})},t.prototype.run=function(){return BV(this,void 0,void 0,function(){return OV(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},t}();function zU(t,e){return Object.assign({},t,{descriptor:e})}function KU(t,e,n,r,i){return void 0===i&&(i=function(t){return t.alignedRect}),BV(this,void 0,void 0,function(){var s,o,a,u,c;return OV(this,function(l){switch(l.label){case 0:return s=t.map(function(t){return function(t){return t.detection instanceof YV}(e=t)&&e.landmarks instanceof ij&&e.unshiftedLandmarks instanceof ij&&e.alignedRect instanceof YV?i(t):t.detection;var e}),(a=r)?[3,5]:e instanceof WI?[4,Dj(e,s)]:[3,2];case 1:return u=l.sent(),[3,4];case 2:return[4,Rj(e,s)];case 3:u=l.sent(),l.label=4;case 4:a=u,l.label=5;case 5:return[4,n(o=a)];case 6:return c=l.sent(),o.forEach(function(t){return t instanceof WI&&t.dispose()}),[2,c]}})})}function qU(t,e,n,r,i){return BV(this,void 0,void 0,function(){var s=this;return OV(this,function(o){return[2,KU([t],e,function(t){return BV(s,void 0,void 0,function(){return OV(this,function(e){return[2,n(t[0])]})})},r,i)]})})}function WU(t,e){var n=e[1];return{height:Math.floor(e[0]*t),width:Math.floor(n*t)}}var GU=function(t){function e(e,n,r,i){return t.call(this,{left:e,top:n,right:r,bottom:i},!0)||this}return DV(e,t),e}($V);function $U(t){return dk(function(){return LO(zO(t,Mk(127.5)),Mk(.0078125))})}function XU(t,e){return dk(function(){return SO(nM(t),LO(e,HB(nM(HB(t)))))})}function QU(t,e,n){return void 0===n&&(n=!1),dk(function(){var r=Uj(t,e.conv1,"valid");return r=XU(r,e.prelu1_alpha),r=XU(r=Uj(r=RN(r,n?[2,2]:[3,3],[2,2],"same"),e.conv2,"valid"),e.prelu2_alpha),XU(r=Uj(r=n?r:RN(r,[3,3],[2,2],"valid"),e.conv3,"valid"),e.prelu3_alpha)})}function YU(t,e,n,r,i){i.stage1=[];var s=e.map(function(e){return dk(function(){var n={scale:e},i=function(t,e){return dk(function(){var n=WU(e,t.shape.slice(1)),r=$U(YM.resizeBilinear(t,[n.height,n.width]));return sM(r,[0,2,1,3])})}(t,e),s=Date.now(),o=function(t,e){return dk(function(){var n=QU(t,e,!0),r=Uj(n,e.conv4_1,"valid"),i=bP(GN(r,3),3);return{prob:rR(zO(r,i),3),regions:Uj(n,e.conv4_2,"valid")}})}(i,r),a=o.prob,u=o.regions;return n.pnet=Date.now()-s,{scoresTensor:LP(LP(a,3)[1])[0],regionsTensor:LP(u)[0],scale:e,statsForScale:n}})}).map(function(t){var e=t.scoresTensor,r=t.regionsTensor,s=t.statsForScale,o=function(t,e,n,r){for(var i=[],s=t.arraySync(),o=0;o<t.shape[0];o++)for(var a=0;a<t.shape[1];a++)s[o][a]>=r&&i.push(new GV(a,o));return i.map(function(t){var r=new XV(Math.round((2*t.y+1)/n),Math.round((2*t.x+1)/n),Math.round((2*t.y+12)/n),Math.round((2*t.x+12)/n)),i=s[t.y][t.x],o=e.arraySync();return{cell:r,score:i,region:new GU(o[t.y][t.x][0],o[t.y][t.x][1],o[t.y][t.x][2],o[t.y][t.x][3])}})}(e,r,t.scale,n);if(e.dispose(),r.dispose(),!o.length)return i.stage1.push(s),[];var a=Date.now(),u=JV(o.map(function(t){return t.cell}),o.map(function(t){return t.score}),.5);return s.nms=Date.now()-a,s.numBoxes=u.length,i.stage1.push(s),u.map(function(t){return o[t]})}).reduce(function(t,e){return t.concat(e)},[]),o=[],a=[];if(s.length>0){var u=Date.now(),c=JV(s.map(function(t){return t.cell}),s.map(function(t){return t.score}),.7);i.stage1_nms=Date.now()-u,a=c.map(function(t){return s[t].score}),o=c.map(function(t){return s[t]}).map(function(t){var e=t.cell,n=t.region;return new XV(e.left+n.left*e.width,e.top+n.top*e.height,e.right+n.right*e.width,e.bottom+n.bottom*e.height).toSquare().round()})}return{boxes:o,scores:a}}function ZU(t,e,n){var r=n.width,i=n.height;return BV(this,void 0,void 0,function(){var n,s,o,a=this;return OV(this,function(u){switch(u.label){case 0:return n=wj(t),[4,Promise.all(e.map(function(e){return BV(a,void 0,void 0,function(){var r,i,s,o;return OV(this,function(a){return r=e.padAtBorders(t.height,t.width),o=n.getImageData(i=r.x-1,s=r.y-1,r.ex-i,r.ey-s),[2,yj.isNodejs()?Aj(o):createImageBitmap(o)]})})}))];case 1:return s=u.sent(),o=[],s.forEach(function(t){var e=wj(Cj({width:r,height:i}));e.drawImage(t,0,0,r,i);for(var n=e.getImageData(0,0,r,i).data,s=[],a=0;a<n.length;a+=4)s.push(n[a+2]),s.push(n[a+1]),s.push(n[a]);o.push(s)}),[2,o.map(function(t){return dk(function(){return $U(sM(Uk(t,[1,r,i,3]),[0,2,1,3]).toFloat())})})]}})})}function JU(t,e,n,r,i){return BV(this,void 0,void 0,function(){var s,o,a,u,c,l,h,p,f,d,m,g,v,y;return OV(this,function(b){switch(b.label){case 0:return s=Date.now(),[4,ZU(t,e,{width:24,height:24})];case 1:return o=b.sent(),i.stage2_extractImagePatches=Date.now()-s,s=Date.now(),a=o.map(function(t){var e=function(t,e){return dk(function(){var n=QU(t,e),r=XU(tU(DP(n,[n.shape[0],e.fc1.weights.shape[0]]),e.fc1),e.prelu4_alpha),i=tU(r,e.fc2_1),s=bP(GN(i,1),1),o=rR(zO(i,s),1),a=tU(r,e.fc2_2);return{scores:LP(o,1)[1],regions:a}})}(t,r);return t.dispose(),e}),i.stage2_rnet=Date.now()-s,u=a.length>1?$k(a.map(function(t){return t.scores})):a[0].scores,h=(l=Array).from,[4,u.data()];case 2:return c=h.apply(l,[b.sent()]),u.dispose(),p=c.map(function(t,e){return{score:t,idx:e}}).filter(function(t){return t.score>n}).map(function(t){return t.idx}),f=p.map(function(t){return e[t]}),d=p.map(function(t){return c[t]}),m=[],g=[],f.length>0&&(s=Date.now(),v=JV(f,d,.7),i.stage2_nms=Date.now()-s,y=v.map(function(t){var e=a[p[t]].regions.arraySync();return new GU(e[0][0],e[0][1],e[0][2],e[0][3])}),g=v.map(function(t){return d[t]}),m=v.map(function(t,e){return f[t].calibrate(y[e])})),a.forEach(function(t){t.regions.dispose(),t.scores.dispose()}),[2,{boxes:m,scores:g}]}})})}function tH(t,e,n,r,i){return BV(this,void 0,void 0,function(){var s,o,a,u,c,l,h,p,f,d,m,g,v,y,b;return OV(this,function(w){switch(w.label){case 0:return s=Date.now(),[4,ZU(t,e,{width:48,height:48})];case 1:return o=w.sent(),i.stage3_extractImagePatches=Date.now()-s,s=Date.now(),a=o.map(function(t){var e=function(t,e){return dk(function(){var n=QU(t,e);n=XU(n=Uj(n=RN(n,[2,2],[2,2],"same"),e.conv4,"valid"),e.prelu4_alpha);var r=XU(tU(DP(n,[n.shape[0],e.fc1.weights.shape[0]]),e.fc1),e.prelu5_alpha),i=tU(r,e.fc2_1),s=bP(GN(i,1),1),o=rR(zO(i,s),1),a=tU(r,e.fc2_2),u=tU(r,e.fc2_3);return{scores:LP(o,1)[1],regions:a,points:u}})}(t,r);return t.dispose(),e}),i.stage3_onet=Date.now()-s,u=a.length>1?$k(a.map(function(t){return t.scores})):a[0].scores,h=(l=Array).from,[4,u.data()];case 2:return c=h.apply(l,[w.sent()]),u.dispose(),p=c.map(function(t,e){return{score:t,idx:e}}).filter(function(t){return t.score>n}).map(function(t){return t.idx}),f=p.map(function(t){var e=a[t].regions.arraySync();return new GU(e[0][0],e[0][1],e[0][2],e[0][3])}),d=p.map(function(t,n){return e[t].calibrate(f[n])}),m=p.map(function(t){return c[t]}),g=[],v=[],y=[],d.length>0&&(s=Date.now(),b=JV(d,m,.7,!1),i.stage3_nms=Date.now()-s,g=b.map(function(t){return d[t]}),v=b.map(function(t){return m[t]}),y=b.map(function(t,e){return Array(5).fill(0).map(function(n,r){var i=a[t].points.arraySync();return new GV(i[0][r]*(g[e].width+1)+g[e].left,i[0][r+5]*(g[e].height+1)+g[e].top)})})),a.forEach(function(t){t.regions.dispose(),t.scores.dispose(),t.points.dispose()}),[2,{boxes:g,scores:v,points:y}]}})})}var eH=function(t){function e(){return t.call(this,"Mtcnn")||this}return DV(e,t),e.prototype.load=function(e){return BV(this,void 0,void 0,function(){return OV(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,e)]})})},e.prototype.loadFromDisk=function(e){return BV(this,void 0,void 0,function(){return OV(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,e)]})})},e.prototype.forwardInput=function(t,e){return void 0===e&&(e={}),BV(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,p,f,d,m,g,v,y,b,w,x;return OV(this,function(E){switch(E.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=t.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},s=Date.now(),o=dk(function(){return t=bP(gV.fromPixels(r)).toFloat(),dk(function(){return OP(LP(t,3).reverse(),3)});var t}),a=function(t){return o.dispose(),i.total=Date.now()-s,t},u=o.shape.slice(1),c=u[0],l=u[1],h=new CU(e),p=h.minFaceSize,f=h.scaleFactor,d=h.maxNumScales,m=h.scoreThresholds,g=(h.scaleSteps||function(t,e,n){for(var r=12/t,i=[],s=Math.min(n[0],n[1])*r,o=0;s>=12;)i.push(r*Math.pow(e,o)),s*=e,o+=1;return i}(p,f,[c,l])).filter(function(t){var e=WU(t,[c,l]);return Math.min(e.width,e.height)>12}).slice(0,d),i.scales=g,i.pyramid=g.map(function(t){return WU(t,[c,l])}),v=Date.now(),[4,YU(o,g,m[0],n.pnet,i)];case 1:return y=E.sent(),i.total_stage1=Date.now()-v,y.boxes.length?(i.stage2_numInputBoxes=y.boxes.length,v=Date.now(),[4,JU(r,y.boxes,m[1],n.rnet,i)]):[2,a({results:[],stats:i})];case 2:return b=E.sent(),i.total_stage2=Date.now()-v,b.boxes.length?(i.stage3_numInputBoxes=b.boxes.length,v=Date.now(),[4,tH(r,b.boxes,m[2],n.onet,i)]):[2,a({results:[],stats:i})];case 3:return w=E.sent(),i.total_stage3=Date.now()-v,x=w.boxes.map(function(t,e){return aU(lj({},new YV(w.scores[e],new rj(t.left/l,t.top/c,t.width/l,t.height/c),{height:c,width:l})),new sj(w.points[e].map(function(e){return e.sub(new GV(t.left,t.top)).div(new GV(t.width,t.height))}),{width:t.width,height:t.height}))}),[2,a({results:x,stats:i})]}})})},e.prototype.forward=function(t,e){return void 0===e&&(e={}),BV(this,void 0,void 0,function(){var n;return OV(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Pj(t)];case 1:return[4,n.apply(this,[r.sent(),e])];case 2:return[2,r.sent().results]}})})},e.prototype.forwardWithStats=function(t,e){return void 0===e&&(e={}),BV(this,void 0,void 0,function(){var n;return OV(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Pj(t)];case 1:return[2,n.apply(this,[r.sent(),e])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(t){return function(t){var e=[],n=function(t,e){var n=$j(t,e);function r(t){return{filters:n(t+"/weights",4,t+"/filters"),bias:n(t+"/bias",1)}}function i(t){return{weights:n(t+"/weights",2),bias:n(t+"/bias",1)}}function s(t){return n(t,1)}function o(t){return{conv1:r(t+"/conv1"),prelu1_alpha:s(t+"/prelu1_alpha"),conv2:r(t+"/conv2"),prelu2_alpha:s(t+"/prelu2_alpha"),conv3:r(t+"/conv3"),prelu3_alpha:s(t+"/prelu3_alpha")}}return{extractPNetParams:function(){var t=o("pnet"),e=r("pnet/conv4_1"),n=r("pnet/conv4_2");return FV(FV({},t),{conv4_1:e,conv4_2:n})},extractRNetParams:function(){var t=o("rnet"),e=i("rnet/fc1"),n=s("rnet/prelu4_alpha"),r=i("rnet/fc2_1"),a=i("rnet/fc2_2");return FV(FV({},t),{fc1:e,prelu4_alpha:n,fc2_1:r,fc2_2:a})},extractONetParams:function(){var t=o("onet"),e=r("onet/conv4"),n=s("onet/prelu4_alpha"),a=i("onet/fc1"),u=s("onet/prelu5_alpha"),c=i("onet/fc2_1"),l=i("onet/fc2_2"),h=i("onet/fc2_3");return FV(FV({},t),{conv4:e,prelu4_alpha:n,fc1:a,prelu5_alpha:u,fc2_1:c,fc2_2:l,fc2_3:h})}}}(t,e),r=n.extractRNetParams,i=n.extractONetParams,s=(0,n.extractPNetParams)(),o=r(),a=i();return Hj(t,e),{params:{pnet:s,rnet:o,onet:a},paramMappings:e}}(t)},e.prototype.extractParams=function(t){return function(t){var e=Xj(t),n=e.getRemainingWeights,r=[],i=function(t,e){var n=zj(t,e),r=Kj(t,e);function i(n,r){var i=Lk(t(n));return e.push({paramPath:r}),i}function s(t,e,r){return void 0===r&&(r=!1),{conv1:n(t[0],t[1],3,e+"/conv1"),prelu1_alpha:i(t[1],e+"/prelu1_alpha"),conv2:n(t[1],t[2],3,e+"/conv2"),prelu2_alpha:i(t[2],e+"/prelu2_alpha"),conv3:n(t[2],t[3],r?2:3,e+"/conv3"),prelu3_alpha:i(t[3],e+"/prelu3_alpha")}}return{extractPNetParams:function(){var t=s([3,10,16,32],"pnet"),e=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return FV(FV({},t),{conv4_1:e,conv4_2:r})},extractRNetParams:function(){var t=s([3,28,48,64],"rnet",!0),e=r(576,128,"rnet/fc1"),n=i(128,"rnet/prelu4_alpha"),o=r(128,2,"rnet/fc2_1"),a=r(128,4,"rnet/fc2_2");return FV(FV({},t),{fc1:e,prelu4_alpha:n,fc2_1:o,fc2_2:a})},extractONetParams:function(){var t=s([3,32,64,64],"onet"),e=n(64,128,2,"onet/conv4"),o=i(128,"onet/prelu4_alpha"),a=r(1152,256,"onet/fc1"),u=i(256,"onet/prelu5_alpha"),c=r(256,2,"onet/fc2_1"),l=r(256,4,"onet/fc2_2"),h=r(256,10,"onet/fc2_3");return FV(FV({},t),{conv4:e,prelu4_alpha:o,fc1:a,prelu5_alpha:u,fc2_1:c,fc2_2:l,fc2_3:h})}}}(e.extractWeights,r),s=i.extractRNetParams,o=i.extractONetParams,a=(0,i.extractPNetParams)(),u=s(),c=o();if(0!==n().length)throw new Error("weights remaing after extract: "+n().length);return{params:{pnet:a,rnet:u,onet:c},paramMappings:r}}(t)},e}(Mj),nH=[new GV(1.603231,2.094468),new GV(6.041143,7.080126),new GV(2.882459,3.518061),new GV(4.266906,5.178857),new GV(9.041765,10.66308)],rH=[117.001,114.697,97.404],iH=function(t){function e(){return t.call(this,{withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:nH,meanRgb:rH,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})||this}return DV(e,t),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,e){return BV(this,void 0,void 0,function(){return OV(this,function(n){switch(n.label){case 0:return[4,this.detect(t,e)];case 1:return[2,n.sent().map(function(t){return new YV(t.score,t.relativeBox,{width:t.imageWidth,height:t.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},e}(VU),sH={ssdMobilenetv1:new PU,tinyFaceDetector:new iH,tinyYolov2:new jU,mtcnn:new eH,faceLandmark68Net:new mU,faceLandmark68TinyNet:new vU,faceRecognitionNet:new _U,faceExpressionNet:new sU,ageGenderNet:new fU};function oH(t,e){return Object.assign({},t,{age:e})}var aH=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parentTask=e,i.input=n,i.extractedFaces=r,i}return DV(e,t),e}(HU),uH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.run=function(){return BV(this,void 0,void 0,function(){var t,e,n=this;return OV(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,KU(t=r.sent(),this.input,function(t){return BV(n,void 0,void 0,function(){return OV(this,function(e){switch(e.label){case 0:return[4,Promise.all(t.map(function(t){return sH.faceExpressionNet.predictExpressions(t)}))];case 1:return[2,e.sent()]}})})},this.extractedFaces)];case 2:return e=r.sent(),[2,t.map(function(t,n){return oU(t,e[n])})]}})})},e.prototype.withAgeAndGender=function(){return new fH(this,this.input)},e}(aH),cH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.run=function(){return BV(this,void 0,void 0,function(){var t,e;return OV(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(t=n.sent())?[4,qU(t,this.input,function(t){return sH.faceExpressionNet.predictExpressions(t)},this.extractedFaces)]:[2];case 2:return e=n.sent(),[2,oU(t,e)]}})})},e.prototype.withAgeAndGender=function(){return new dH(this,this.input)},e}(aH),lH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.withAgeAndGender=function(){return new mH(this,this.input)},e.prototype.withFaceDescriptors=function(){return new yH(this,this.input)},e}(uH),hH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.withAgeAndGender=function(){return new gH(this,this.input)},e.prototype.withFaceDescriptor=function(){return new bH(this,this.input)},e}(cH),pH=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parentTask=e,i.input=n,i.extractedFaces=r,i}return DV(e,t),e}(HU),fH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.run=function(){return BV(this,void 0,void 0,function(){var t,e,n=this;return OV(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,KU(t=r.sent(),this.input,function(t){return BV(n,void 0,void 0,function(){return OV(this,function(e){switch(e.label){case 0:return[4,Promise.all(t.map(function(t){return sH.ageGenderNet.predictAgeAndGender(t)}))];case 1:return[2,e.sent()]}})})},this.extractedFaces)];case 2:return e=r.sent(),[2,t.map(function(t,n){var r=e[n],i=r.age;return oH(SU(t,r.gender,r.genderProbability),i)})]}})})},e.prototype.withFaceExpressions=function(){return new uH(this,this.input)},e}(pH),dH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.run=function(){return BV(this,void 0,void 0,function(){var t,e,n;return OV(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return(t=r.sent())?[4,qU(t,this.input,function(t){return sH.ageGenderNet.predictAgeAndGender(t)},this.extractedFaces)]:[2];case 2:return e=r.sent(),n=e.age,[2,oH(SU(t,e.gender,e.genderProbability),n)]}})})},e.prototype.withFaceExpressions=function(){return new cH(this,this.input)},e}(pH),mH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.withFaceExpressions=function(){return new lH(this,this.input)},e.prototype.withFaceDescriptors=function(){return new yH(this,this.input)},e}(fH),gH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.withFaceExpressions=function(){return new hH(this,this.input)},e.prototype.withFaceDescriptor=function(){return new bH(this,this.input)},e}(dH),vH=function(t){function e(e,n){var r=t.call(this)||this;return r.parentTask=e,r.input=n,r}return DV(e,t),e}(HU),yH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.run=function(){return BV(this,void 0,void 0,function(){var t;return OV(this,function(e){switch(e.label){case 0:return[4,this.parentTask];case 1:return[4,KU(t=e.sent(),this.input,function(t){return Promise.all(t.map(function(t){return sH.faceRecognitionNet.computeFaceDescriptor(t)}))},null,function(t){return t.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,e.sent().map(function(e,n){return zU(t[n],e)})]}})})},e.prototype.withFaceExpressions=function(){return new lH(this,this.input)},e.prototype.withAgeAndGender=function(){return new mH(this,this.input)},e}(vH),bH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.run=function(){return BV(this,void 0,void 0,function(){var t,e;return OV(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(t=n.sent())?[4,qU(t,this.input,function(t){return sH.faceRecognitionNet.computeFaceDescriptor(t)},null,function(t){return t.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return e=n.sent(),[2,zU(t,e)]}})})},e.prototype.withFaceExpressions=function(){return new hH(this,this.input)},e.prototype.withAgeAndGender=function(){return new gH(this,this.input)},e}(vH),wH=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parentTask=e,i.input=n,i.useTinyLandmarkNet=r,i}return DV(e,t),Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?sH.faceLandmark68TinyNet:sH.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(HU),xH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.run=function(){return BV(this,void 0,void 0,function(){var t,e,n,r,i,s=this;return OV(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return t=o.sent(),e=t.map(function(t){return t.detection}),this.input instanceof WI?[4,Dj(this.input,e)]:[3,3];case 2:return r=o.sent(),[3,5];case 3:return[4,Rj(this.input,e)];case 4:r=o.sent(),o.label=5;case 5:return n=r,[4,Promise.all(n.map(function(t){return s.landmarkNet.detectLandmarks(t)}))];case 6:return i=o.sent(),n.forEach(function(t){return t instanceof WI&&t.dispose()}),[2,t.map(function(t,e){return aU(t,i[e])})]}})})},e.prototype.withFaceExpressions=function(){return new lH(this,this.input)},e.prototype.withAgeAndGender=function(){return new mH(this,this.input)},e.prototype.withFaceDescriptors=function(){return new yH(this,this.input)},e}(wH),EH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.run=function(){return BV(this,void 0,void 0,function(){var t,e,n,r,i;return OV(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return(t=s.sent())?(e=t.detection,this.input instanceof WI?[4,Dj(this.input,[e])]:[3,3]):[2];case 2:return r=s.sent(),[3,5];case 3:return[4,Rj(this.input,[e])];case 4:r=s.sent(),s.label=5;case 5:return[4,this.landmarkNet.detectLandmarks((n=r)[0])];case 6:return i=s.sent(),n.forEach(function(t){return t instanceof WI&&t.dispose()}),[2,aU(t,i)]}})})},e.prototype.withFaceExpressions=function(){return new hH(this,this.input)},e.prototype.withAgeAndGender=function(){return new gH(this,this.input)},e.prototype.withFaceDescriptor=function(){return new bH(this,this.input)},e}(wH),_H=function(t){function e(e,n){void 0===n&&(n=new kU);var r=t.call(this)||this;return r.input=e,r.options=n,r}return DV(e,t),e}(HU),SH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.run=function(){return BV(this,void 0,void 0,function(){var t,e,n,r;return OV(this,function(i){switch(i.label){case 0:return e=(t=this).input,(n=t.options)instanceof CU?[4,sH.mtcnn.forward(e,n)]:[3,2];case 1:return[2,i.sent().map(function(t){return t.detection})];case 2:if(!(r=n instanceof UU?function(t){return sH.tinyFaceDetector.locateFaces(t,n)}:n instanceof kU?function(t){return sH.ssdMobilenetv1.locateFaces(t,n)}:n instanceof LU?function(t){return sH.tinyYolov2.locateFaces(t,n)}:null))throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(e)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(e){return BV(t,void 0,void 0,function(){var t;return OV(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return t=n.sent(),[2,e(t.map(function(t){return lj({},t)}))]}})})})},e.prototype.withFaceLandmarks=function(t){return void 0===t&&(t=!1),new xH(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new uH(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new fH(this.runAndExtendWithFaceDetections(),this.input)},e}(_H),CH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DV(e,t),e.prototype.run=function(){return BV(this,void 0,void 0,function(){var t,e;return OV(this,function(n){switch(n.label){case 0:return[4,new SH(this.input,this.options)];case 1:return t=n.sent(),e=t[0],t.forEach(function(t){t.score>e.score&&(e=t)}),[2,e]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(e){return BV(t,void 0,void 0,function(){var t;return OV(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return t=n.sent(),[2,e(t?lj({},t):void 0)]}})})})},e.prototype.withFaceLandmarks=function(t){return void 0===t&&(t=!1),new EH(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new cH(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new dH(this.runAndExtendWithFaceDetection(),this.input)},e}(_H);!function(){function t(t,e){void 0===e&&(e=.6),this._distanceThreshold=e;var n=Array.isArray(t)?t:[t];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,i=function(){return"person "+r++};this._labeledDescriptors=n.map(function(t){if(t instanceof cj)return t;if(t instanceof Float32Array)return new cj(i(),[t]);if(t.descriptor&&t.descriptor instanceof Float32Array)return new cj(i(),[t.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(t,e){return e.map(function(e){return function(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(t,e){return t-r[e]}).reduce(function(t,e){return t+Math.pow(e,2)},0))}(e,t)}).reduce(function(t,e){return t+e},0)/(e.length||1)},t.prototype.matchDescriptor=function(t){var e=this;return this.labeledDescriptors.map(function(n){return new aj(n.label,e.computeMeanDistance(t,n.descriptors))}).reduce(function(t,e){return t.distance<e.distance?t:e})},t.prototype.findBestMatch=function(t){var e=this.matchDescriptor(t);return e.distance<this.distanceThreshold?e:new aj("unknown",e.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},t.fromJSON=function(e){return new t(e.labeledDescriptors.map(function(t){return cj.fromJSON(t)}),e.distanceThreshold)}}();const AH=["video"],IH=["canvas"];function TH(t,e){1&t&&(Uo(0),Lo(1,"h3",16),Ea(2," Qu\xfd kh\xe1ch vui l\xf2ng \u0111\u1eb7t khu\xf4n m\u1eb7t v\xe0o trong h\xecnh tr\xf2n "),Vo(),Ho())}function kH(t,e){1&t&&(Uo(0),Lo(1,"h3",16),Ea(2," Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra l\u1ea1i \u1ea3nh \u0111\xe3 ch\u1ee5p "),Vo(),Ho())}function PH(t,e){1&t&&(Lo(0,"div",19),Uo(1),jo(2,"i",20),Ho(),Vo())}function RH(t,e){if(1&t&&(Uo(0),Ea(1),Ho()),2&t){const t=Yo(2);rs(1),Sa(" ",t.countDownTime," ")}}const DH=function(t,e){return{"o-1":t,"o-05":e}};function FH(t,e){if(1&t&&(Lo(0,"div",17),Fo(1,PH,3,0,"div",18),Lo(2,"div",19),Fo(3,RH,2,1,"ng-container",2),Vo(),Vo()),2&t){const t=Yo();No("ngClass",(n=3,r=DH,i=!t.isReadyDetect,s=t.isReadyDetect,function(t,e,n,r,i,s,o){const a=e+n;return Po(t,a,i,s)?To(t,a+2,o?r.call(o,i,s):r(i,s)):Qu(t,a+2)}(Fe(),ze(),n,r,i,s,o))),rs(1),No("ngIf",!t.isReadyDetect),rs(2),No("ngIf",!t.isLoadingCountDown)}var n,r,i,s,o}function BH(t,e){if(1&t&&(Lo(0,"div",21),jo(1,"img",22),Vo()),2&t){const t=Yo();rs(1),No("src",t.captured,si)}}function OH(t,e){if(1&t){const t=zo();Lo(0,"div",23),Lo(1,"button",24),Wo("click",function(){return Oe(t),Yo().reCapture()}),Ea(2,"Ch\u1ee5p l\u1ea1i"),Vo(),Lo(3,"button",25),Wo("click",function(){return Oe(t),Yo().next()}),Ea(4,"Ti\u1ebfp t\u1ee5c"),Vo(),Vo()}}const NH=function(t){return{"o-0":t}};let MH=(()=>{class t{constructor(t,e){this.elRef=t,this.aioSvc=e,this.faceLoad={path:"assets/all-in-one/shared/img/face-load.json"},this.isUnderstood=!0,this.WIDTH=640,this.HEIGHT=480,this.countDownTime=4,this.endCountDown=!1,this.isLoadingCountDown=!0,this.captured="",this.isReadyDetect=!1,e.currentStep=Tg.CaptureFace}ngOnInit(){this.aioSvc.faceCaptured="",this.startCapture()}prepareFaceDetector(){let t=new Image;t.src="assets/all-in-one/shared/img/startDetectFace.jpeg";let e=this;t.onload=function(){var n,r;(n=t,r=new UU({inputSize:608,scoreThreshold:.7}),void 0===r&&(r=new kU),new SH(n,r)).run().then(t=>{console.log("--------\x3e "+JSON.stringify(t)),e.startVideo()})}}startVideo(){var t=this;return DA(function*(){t.videoInput=t.video.nativeElement,navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(e=>{t.video.nativeElement.srcObject=e}).catch(t=>console.error(t)),yield t.detect_Faces()})()}detect_Faces(){var t=this;return DA(function*(){t.elRef.nativeElement.querySelector("video").addEventListener("play",DA(function*(){t.canvas=yield Aj(t.videoInput),t.doDetect()}))})()}doDetect(){var t=this;this.displaySize={width:this.WIDTH,height:this.HEIGHT},function(t,e,n){void 0===n&&(n=!1);var r=n?Sj(e):e,i=r.height;t.width=r.width,t.height=i}(this.canvas,this.displaySize),this.countdown(),setTimeout(()=>{var e=setInterval(DA(function*(){var n,r;if(console.log("run detect: ",e),t.resultDetection=yield(n=t.videoInput,r=new UU({inputSize:608,scoreThreshold:.7}),void 0===r&&(r=new kU),new CH(n,r)),t.resultDetection&&""==t.captured){let n=t.resultDetection.box;if(n.x>=170&&n.y>=90&&n.width+n.x<=470&&n.height+n.y<=390&&n.width>=150){let n=yield Rj(t.videoInput,[new rj(120,0,400,t.HEIGHT)]);console.log("canvasFaceBox",n[0].toDataURL("image/png")),t.aioSvc.faceCaptured=n[0].toDataURL("image/png");let r=yield Rj(t.videoInput,[new rj(0,0,t.WIDTH,t.HEIGHT)]);console.log("canvasFullBox",r[0].toDataURL("image/png")),t.captured=r[0].toDataURL("image/png"),console.log("inside face loader: ",t.resultDetection),clearInterval(e)}}}),100)},4e3)}countdown(){console.log(2);let t=setInterval(()=>{this.isReadyDetect=!0,console.log("countDownTime",this.countDownTime),this.isLoadingCountDown=!1,this.countDownTime=this.countDownTime-1,0==this.countDownTime&&(this.endCountDown=!0,clearInterval(t))},1e3)}understood(){this.isUnderstood=!0}reCapture(){this.countDownTime=4,this.endCountDown=!1,this.isLoadingCountDown=!0,this.captured="",this.aioSvc.faceCaptured="",this.doDetect()}startCapture(){var t=this;return DA(function*(){yield Promise.all([sH.tinyFaceDetector.loadFromUri("assets/models"),sH.faceLandmark68Net.loadFromUri("assets/models")]).then(()=>{t.prepareFaceDetector()})})()}next(){this.aioSvc.next()}getBase64ImageFromUrl(t){var e=this;return DA(function*(){var n=yield fetch(t),r=yield n.blob();return new Promise((t,n)=>{var i=new FileReader;i.addEventListener("load",function(){t(i.result)},!1),i.onerror=()=>n(e),i.readAsDataURL(r)})})()}ngOnDestroy(){let t=this.video.nativeElement.srcObject;if(t){let e=t.getTracks();console.log(e.length),e[0].stop()}}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-capture-face"]],viewQuery:function(t,e){if(1&t&&(pc(AH,7),pc(IH,7)),2&t){let t;hc(t=dc())&&(e.video=t.first),hc(t=dc())&&(e.canvasRef=t.first)}},decls:22,vars:12,consts:[[3,"currentStep"],[1,"pb-5","text-center"],[4,"ngIf"],[1,"text-center","capture-box"],[1,"video-container","text-center",3,"ngClass"],["autoplay","","muted","",3,"width","height"],["video",""],["canvas",""],["class","countdown",3,"ngClass",4,"ngIf"],[1,"face-load"],["src","assets/all-in-one/shared/img/overlay.png","alt",""],[1,"position-relative"],[1,"face-load-animate"],[3,"options"],["class","captured-img",4,"ngIf"],["class","text-center py-3",4,"ngIf"],[1,"animate__animated","animate__fadeIn"],[1,"countdown",3,"ngClass"],["class","countdown-text",4,"ngIf"],[1,"countdown-text"],[1,"fas","fa-spinner","fa-pulse"],[1,"captured-img"],["alt","",1,"img","img-fluid","animate__animated","animate__pulse",3,"src"],[1,"text-center","py-3"],[1,"btn","btn-back","mx-2",3,"click"],[1,"btn","btn-next","mx-2",3,"click"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Lo(2,"section"),Lo(3,"div",1),Fo(4,TH,3,0,"ng-container",2),Fo(5,kH,3,0,"ng-container",2),Vo(),Lo(6,"div",3),Lo(7,"div",4),jo(8,"video",5,6),jo(10,"div",null,7),Vo(),Fo(12,FH,4,6,"div",8),Lo(13,"div",9),Lo(14,"div"),jo(15,"img",10),Vo(),Vo(),Lo(16,"div",9),Lo(17,"div",11),Lo(18,"div",12),jo(19,"ng-lottie",13),Vo(),Vo(),Vo(),Fo(20,BH,2,1,"div",14),Vo(),Fo(21,OH,5,0,"div",15),Vo()),2&t&&(rs(1),No("currentStep",1),rs(3),No("ngIf",!e.captured),rs(1),No("ngIf",!e.isLoadingCountDown&&e.captured),rs(2),No("ngClass",Xu(10,NH,e.captured)),rs(1),No("width",e.WIDTH)("height",e.HEIGHT),rs(4),No("ngIf",e.countDownTime>0),rs(7),No("options",e.faceLoad),rs(1),No("ngIf",e.captured),rs(1),No("ngIf",e.captured))},directives:[jS,iA,ql,Ul,BS],styles:[".aio[_ngcontent-%COMP%]{background-color:#f1f2f7!important;min-height:100vh;position:relative;font-family:Manrope,sans-serif!important}",".o-0[_ngcontent-%COMP%]{opacity:0}.o-1[_ngcontent-%COMP%]{opacity:1!important}.o-05[_ngcontent-%COMP%]{opacity:.5!important}.countdown[_ngcontent-%COMP%]{border-radius:15px;display:table;border:2px solid #93abf5;background-color:#3c3c3c}.countdown[_ngcontent-%COMP%], .face-load[_ngcontent-%COMP%]{width:640px;height:480px;margin:0 auto;position:absolute;top:0;transform:translateX(-50%);left:50%;z-index:100}.face-load[_ngcontent-%COMP%]{border-radius:15px}.face-load-animate[_ngcontent-%COMP%]{width:450px;height:450px;margin-inline:auto;margin-top:15px}.countdown-text[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;font-size:7rem;color:#93abf5}video[_ngcontent-%COMP%]{border:2px solid #93abf5;border-radius:15px;transform:scaleX(-1)}.capture-box[_ngcontent-%COMP%]{position:relative}.captured-img[_ngcontent-%COMP%]{width:640px;height:480px;margin:0 auto;display:table;position:absolute;top:0;transform:translateX(-50%) scaleX(-1);left:50%;z-index:100}.captured-img[_ngcontent-%COMP%], .img[_ngcontent-%COMP%]{border-radius:15px}.btn-back[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{width:200px;height:60px;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#fff;background-color:#2a81d0;font-size:1.2rem}.btn-next[_ngcontent-%COMP%]:hover{background-color:#1966af}.btn-next[_ngcontent-%COMP%]:disabled:hover{background-color:#2a81d0}.btn-next[_ngcontent-%COMP%]:disabled{opacity:.5}.btn-back[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #2a81d0;color:#2a81d0}"]}),t})(),LH=(()=>{class t{constructor(t){this.aioSvc=t,t.currentStep=Tg.CaptureGuide}ngOnInit(){}next(){this.aioSvc.next()}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-capture-guide"]],decls:12,vars:1,consts:[[3,"currentStep"],[1,"container","text-center"],[1,"font-weight-bold"],[1,"pt-5"],["src","assets/all-in-one/shared/img/tip-capture.png","alt","",1,"img","img-fluid"],[1,"btn","btn-next","mt-5",3,"click"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Lo(2,"section"),Lo(3,"div",1),Lo(4,"div"),Lo(5,"h3",2),Ea(6,"G\u1ee3i \xfd ch\u1ee5p \u1ea3nh khu\xf4n m\u1eb7t"),Vo(),Vo(),Lo(7,"div",3),jo(8,"img",4),jo(9,"br"),Lo(10,"button",5),Wo("click",function(){return e.next()}),Ea(11,"T\xf4i \u0111\xe3 hi\u1ec3u"),Vo(),Vo(),Vo(),Vo()),2&t&&(rs(1),No("currentStep",1))},directives:[jS,iA],styles:[".btn-back[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{width:200px;height:60px;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#fff;background-color:#2a81d0;font-size:1.2rem}.btn-next[_ngcontent-%COMP%]:hover{background-color:#1966af}.btn-next[_ngcontent-%COMP%]:disabled:hover{background-color:#2a81d0}"]}),t})();var VH=n(6877);const jH=["qrcElement"];let UH=(()=>{class t{constructor(t){this.renderer=t,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10}ngOnChanges(){this.createQRCode()}isValidQrCodeText(t){return!1===this.allowEmptyString?!(void 0===t||""===t||"null"===t||null===t):!(void 0===t)}toDataURL(){return new Promise((t,e)=>{VH.hz(this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},(n,r)=>{n?e(n):t(r)})})}toCanvas(t){return new Promise((e,n)=>{VH.rT(t,this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},t=>{t?n(t):e("success")})})}toSVG(){return new Promise((t,e)=>{VH.toString(this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,type:"svg",version:this.version,width:this.width},(n,r)=>{n?e(n):t(r)})})}renderElement(t){for(const e of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,e);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):void 0!==this.version&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error('[angularx-qrcode] Field `qrdata` is empty, set `allowEmptyString="true"` to overwrite this behaviour.');let t;switch(this.isValidQrCodeText(this.qrdata)&&""===this.qrdata&&(this.qrdata=" "),this.elementType){case"canvas":t=this.renderer.createElement("canvas"),this.toCanvas(t).then(()=>{this.renderElement(t)}).catch(t=>{console.error("[angularx-qrcode] canvas error:",t)});break;case"svg":t=this.renderer.createElement("div"),this.toSVG().then(e=>{this.renderer.setProperty(t,"innerHTML",e);const n=t.firstChild;this.renderer.setAttribute(n,"height",`${this.width}`),this.renderer.setAttribute(n,"width",`${this.width}`),this.renderElement(n)}).catch(t=>{console.error("[angularx-qrcode] svg error:",t)});break;case"url":case"img":default:t=this.renderer.createElement("img"),this.toDataURL().then(e=>{t.setAttribute("src",e),this.renderElement(t)}).catch(t=>{console.error("[angularx-qrcode] img/url error:",t)})}}catch(BA){console.error("[angularx-qrcode] Error generating QR Code:",BA.message)}}}return t.\u0275fac=function(e){return new(e||t)(Oo(Ja))},t.\u0275cmp=Kt({type:t,selectors:[["qrcode"]],viewQuery:function(t,e){if(1&t&&pc(jH,7),2&t){let t;hc(t=dc())&&(e.qrcElement=t.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width"},features:[le],decls:2,vars:2,consts:[["qrcElement",""]],template:function(t,e){1&t&&jo(0,"div",null,0),2&t&&ha(e.cssClass)},encapsulation:2,changeDetection:0}),t})(),HH=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[]}),t})();function zH(t,e){if(1&t&&(Uo(0),Lo(1,"div"),Lo(2,"h3",3),Ea(3,"Qu\xe9t m\xe3 QR"),Vo(),Lo(4,"h5"),Ea(5,"Scan QR \u0111\u1ec3 ti\u1ebfp t\u1ee5c tr\xean \u0111i\u1ec7n tho\u1ea1i c\u1ee7a Qu\xfd kh\xe1ch"),Vo(),Vo(),Lo(6,"div",4),jo(7,"qrcode",5),Vo(),Lo(8,"div",6),jo(9,"ng-lottie",7),Vo(),Ho()),2&t){const t=Yo();rs(7),No("qrdata",t.qrValue)("width",256)("errorCorrectionLevel","M"),rs(2),No("options",t.dots)}}function KH(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"div"),Lo(2,"h3",3),Ea(3,"Ki\u1ec3m tra th\xf4ng tin"),Vo(),Lo(4,"h5"),Ea(5,"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra l\u1ea1i \u1ea3nh CCCD"),Vo(),Vo(),Lo(6,"div",8),Lo(7,"div",9),Lo(8,"div",10),Lo(9,"div",11),Lo(10,"div",12),Lo(11,"span"),Ea(12,"M\u1eb7t tr\u01b0\u1edbc"),Vo(),Vo(),jo(13,"img",13),Vo(),Vo(),Vo(),Lo(14,"div",9),Lo(15,"div"),Lo(16,"div",14),Lo(17,"div",12),Lo(18,"span"),Ea(19,"M\u1eb7t sau"),Vo(),Vo(),jo(20,"img",13),Vo(),Vo(),Vo(),Vo(),Lo(21,"div",15),Lo(22,"button",16),Wo("click",function(){return Oe(t),Yo().reUpload()}),Ea(23,"L\xe0m l\u1ea1i"),Vo(),Vo(),Lo(24,"div",17),Lo(25,"button",18),Wo("click",function(){return Oe(t),Yo().next()}),Ea(26,"X\xe1c nh\u1eadn"),Vo(),Vo(),Ho()}if(2&t){const t=Yo();rs(13),No("src",t.aioSvc.frontCardId,si),rs(7),No("src",t.aioSvc.backCardId,si)}}let qH=(()=>{class t{constructor(t,e){this.baseUrl=t,this.aioSvc=e,this.qrValue="",this.dots={path:"assets/all-in-one/shared/img/dots.json"},e.currentStep=Tg.CollectCardId}ngOnInit(){this.genQR(),this.loadImageInterval=setInterval(()=>{this.aioSvc.loadImage().subscribe(t=>{"00"==t.respCode&&(this.aioSvc.frontCardId=t.data.frontBase64,this.aioSvc.backCardId=t.data.backBase64,clearInterval(this.loadImageInterval))},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra loadImage"),clearInterval(this.loadImageInterval)}),console.log("Load image")},2e3)}genQR(){this.qrValue=this.baseUrl+"aio/shared/mobile-capture-card-id/"+this.aioSvc.deviceID+"/"+this.aioSvc.sessionID,console.log(this.qrValue)}next(){this.compareFace()}compareFace(){this.aioSvc.uploadImage(this.aioSvc.faceCaptured,"face").subscribe(t=>{"00"==t.respCode?(console.log("Upload face",t),this.aioSvc.compareFace().subscribe(t=>{console.log("compareFace",t),"00"==t.respCode?"1"==t.data.result?(t.data.customerOCRInfo.customerID==this.aioSvc.customerInfo.customerID?this.aioSvc.uploadImage(this.aioSvc.faceCaptured,"done").subscribe(t=>{"00"==t.respCode?this.aioSvc.next():(this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra uploadImage-done"),this.aioSvc.isProcessing=!1)},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra uploadImage-done"),this.aioSvc.isProcessing=!1}):(this.aioSvc.alert("S\u1ed1 CCCD kh\xf4ng tr\xf9ng kh\u1edbp"),this.aioSvc.isProcessing=!1),this.aioSvc.isProcessing=!1):(this.aioSvc.alert("X\xe1c th\u1ef1c th\u1ea5t b\u1ea1i"),this.aioSvc.isProcessing=!1):this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra compareFace")},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra compareFace"),this.aioSvc.isProcessing=!1})):(this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra uploadImage-face"),this.aioSvc.isProcessing=!1)},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra uploadImage-face"),this.aioSvc.isProcessing=!1})}reUpload(){this.aioSvc.frontCardId="",this.aioSvc.backCardId=""}ngOnDestroy(){clearInterval(this.loadImageInterval)}}return t.\u0275fac=function(e){return new(e||t)(Oo("BASE_URL"),Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-collect-card-id"]],decls:6,vars:3,consts:[[3,"currentStep"],[1,"container","text-center"],[4,"ngIf"],[1,"mb-3","font-weight-bold"],[1,"mt-4"],[3,"qrdata","width","errorCorrectionLevel"],[1,"w-25",2,"margin-inline","auto"],[3,"options"],[1,"row","py-5"],[1,"col"],[1,"text-right"],[1,"w-75","float-right"],[1,"py-3","text-center"],["alt","",1,"img","img-fluid",3,"src"],[1,"w-75"],[1,"w-50","d-inline-block","pr-2","text-right"],[1,"btn-back",3,"click"],[1,"w-50","d-inline-block","pl-2","text-left"],[1,"btn-next",3,"click"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Lo(2,"section"),Lo(3,"div",1),Fo(4,zH,10,4,"ng-container",2),Fo(5,KH,27,2,"ng-container",2),Vo(),Vo()),2&t&&(rs(1),No("currentStep",2),rs(3),No("ngIf",!e.aioSvc.frontCardId||!e.aioSvc.backCardId),rs(1),No("ngIf",e.aioSvc.frontCardId&&e.aioSvc.backCardId))},directives:[jS,iA,ql,UH,BS],styles:[".btn-back[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{width:200px;height:60px;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#fff;background-color:#2a81d0;font-size:1.2rem}.btn-next[_ngcontent-%COMP%]:hover{background-color:#1966af}.btn-next[_ngcontent-%COMP%]:disabled:hover{background-color:#2a81d0}.btn-next[_ngcontent-%COMP%]:disabled{opacity:.5}.btn-back[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #2a81d0;color:#2a81d0}.label-side[_ngcontent-%COMP%]{padding:5px 15px;background-color:#2a81d0;border-radius:5px;color:#fff}"]}),t})();var WH=n(2360),GH=n.n(WH);const $H=Iv({passive:!0});let XH=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return $h;const e=Vg(t),n=this._monitoredElements.get(e);if(n)return n.subject;const r=new _,i="cdk-text-field-autofilled",s=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(i)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(i)&&(e.classList.remove(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!1}))):(e.classList.add(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",s,$H),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:r,unlisten:()=>{e.removeEventListener("animationstart",s,$H)}}),r}stopMonitoring(t){const e=Vg(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275fac=function(e){return new(e||t)(dr(wv),dr(jc))},t.\u0275prov=ft({factory:function(){return new t(dr(wv),dr(jc))},token:t,providedIn:"root"}),t})(),QH=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[xv]]}),t})();const YH=new Qn("MAT_INPUT_VALUE_ACCESSOR"),ZH=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let JH=0;const tz=Wx(class{constructor(t,e,n,r){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}});let ez=(()=>{class t extends tz{constructor(t,e,n,r,i,s,o,a,u,c){super(s,r,i,n),this._elementRef=t,this._platform=e,this._autofillMonitor=a,this._formField=c,this._uid="mat-input-"+JH++,this.focused=!1,this.stateChanges=new _,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>_v().has(t));const l=this._elementRef.nativeElement,h=l.nodeName.toLowerCase();this._inputValueAccessor=o||l,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{const e=t.target;e.value||0!==e.selectionStart||0!==e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h,this._isTextarea="textarea"===h,this._isInFormField=!!c,this._isNativeSelect&&(this.controlType=l.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Og(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=Og(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&_v().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Og(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,e;const n=(null===(e=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===e?void 0:e.call(t))?null:this.placeholder;if(n!==this._previousPlaceholder){const t=this._elementRef.nativeElement;this._previousPlaceholder=n,n?t.setAttribute("placeholder",n):t.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){ZH.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(wv),Oo(uC,10),Oo(BC,8),Oo(UC,8),Oo(Gx),Oo(YH,10),Oo(XH),Oo(jc),Oo(f_,8))},t.\u0275dir=Qt({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(t,e){1&t&&Wo("focus",function(){return e._focusChanged(!0)})("blur",function(){return e._focusChanged(!1)})("input",function(){return e._onInput()}),2&t&&(Aa("disabled",e.disabled)("required",e.required),Ro("id",e.id)("data-placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-invalid",e.empty&&e.required?null:e.errorState)("aria-required",e.required),la("mat-input-server",e._isServer)("mat-native-select-inline",e._isInlineSelect()))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[za([{provide:r_,useExisting:t}]),yo,le]}),t})(),nz=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[Gx],imports:[[QH,m_,Ux],QH,m_]}),t})(),rz=(()=>{class t{constructor(){this.onChangeEvent=new Ju,this.onKeyPressEvent=new Ju,this.title="",this.value="",this.onChange=t=>{this.onChangeEvent.emit(t),this.value=t},this.onKeyPress=t=>{this.onKeyPressEvent.emit(t),this.handleLayoutChange(t)},this.onInputChange=t=>{this.keyboard.setInput(t.target.value)}}ngAfterViewInit(){this.keyboard=new(GH())({onChange:t=>this.onChange(t),onKeyPress:t=>this.onKeyPress(t),theme:"hg-theme-default hg-theme-ios",layout:{default:["q w e r t y u i o p {bksp}","a s d f g h j k l {enter}","{shift} z x c v b n m @ . com","{alt} {space} _ {altright} {downkeyboard}"],shift:["Q W E R T Y U I O P {bksp}","A S D F G H J K L {enter}","{shiftactivated} Z X C V B N M @ . com","{alt} {space} _ {altright} {downkeyboard}"],alt:["1 2 3 4 5 6 7 8 9 0 {bksp}","@ # $ & * ( ) ' \" {enter}","{shift} % - + = / ; : ! ? {shift}","{default} {space} {back} {downkeyboard}"]},display:{"{alt}":".?123","{smileys}":"\ud83d\ude03","{shift}":"\u21e7","{shiftactivated}":"\u21e7","{enter}":"G\u1eedi th\xf4ng tin","{bksp}":"X\xf3a","{altright}":".?123","{downkeyboard}":"\ud83d\udf83","{space}":" ","{default}":"ABC","{back}":"\u21e6"}}),this.keyboard.setInput(this.value)}clearAll(){this.value="",this.keyboard.setInput(this.value),this.onChangeEvent.emit("")}ngOnInit(){}handleLayoutChange(t){let e,n=this.keyboard.options.layoutName;switch(t){case"{shift}":case"{shiftactivated}":case"{default}":e="default"===n?"shift":"default";break;case"{alt}":case"{altright}":e="alt"===n?"default":"alt"}e&&this.keyboard.setOptions({layoutName:e})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Kt({type:t,selectors:[["app-aio-virtual-keyboard"]],inputs:{title:"title",value:"value"},outputs:{onChangeEvent:"onChangeEvent",onKeyPressEvent:"onKeyPressEvent"},decls:7,vars:1,consts:[[1,"text-center"],["appearance","outline",1,"w-50"],["matInput","","readonly","","autofocus","false","disabled","",3,"ngModel","ngModelChange"],["matSuffix","",3,"click"],[1,"simple-keyboard"]],template:function(t,e){1&t&&(Lo(0,"div",0),Lo(1,"div",0),Lo(2,"mat-form-field",1),Lo(3,"input",2),Wo("ngModelChange",function(t){return e.value=t}),Vo(),Lo(4,"mat-icon",3),Wo("click",function(){return e.clearAll()}),Ea(5,"cancel"),Vo(),Vo(),Vo(),jo(6,"div",4),Vo()),2&t&&(rs(3),No("ngModel",e.value))},directives:[d_,ez,WS,cC,MC,NE,c_],styles:[".simple-keyboard.hg-theme-ios{width:750px;margin:auto;font-family:Manrope,sans-serif!important}.simple-keyboard.hg-theme-ios.hg-theme-default .hg-row .hg-button{flex-grow:1;cursor:pointer;max-width:none}.simple-keyboard.hg-theme-ios .hg-row{display:flex}.simple-keyboard.hg-theme-ios .hg-row:not(:last-child){margin-bottom:5px}.simple-keyboard.hg-theme-ios .hg-row .hg-button:not(:last-child){margin-right:5px}.simple-keyboard.hg-theme-ios .hg-row:nth-child(2){margin-left:18px}.simple-keyboard.hg-theme-ios.hg-theme-default{background-color:#0000001a;padding:5px;border-radius:5px}.simple-keyboard.hg-theme-ios.hg-theme-default.hg-layout-custom{background-color:#e5e5e5;padding:5px}.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button{border-radius:5px;box-sizing:border-box;padding:0;background:#fff;border-bottom:1px solid #b5b5b5;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:none;font-weight:400;font-size:20px;max-width:60px;min-width:60px;height:60px;min-height:60px}.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button:active,.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button:focus{background:#e4e4e4}.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button.hg-functionBtn{background-color:#adb5bb}.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button.hg-button-shift,.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button.hg-button-shiftactivated,.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button.hg-button-space{background-color:#fff}.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button-space{max-width:448px;min-width:448px}.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button-enter{max-width:110px;min-width:110px}.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button-altright,.simple-keyboard.hg-theme-ios.hg-theme-default .hg-button-back{min-width:80px;max-width:80px}input{font-family:Manrope,sans-serif!important;line-height:1rem!important}.mat-form-field-infix{border-top:.5em solid #0000!important}.inner-addon{position:relative;width:50%}.inner-addon i{position:absolute;padding:10px;pointer-events:none}.left-addon i{left:0}.right-addon i{right:0}.left-addon input{padding-left:30px}.right-addon input{padding-right:30px}"],encapsulation:2}),t})();function iz(t,e){1&t&&jo(0,"i",10)}function sz(t,e){if(1&t){const t=zo();Lo(0,"div",12),Lo(1,"div",13),Wo("click",function(){const e=Oe(t).$implicit;return Yo(3).getDistrict(e)}),Lo(2,"div",14),Lo(3,"span",15),Ea(4),Vo(),Vo(),Vo(),Vo()}if(2&t){const t=e.$implicit;rs(4),_a(t.name)}}function oz(t,e){if(1&t&&(Uo(0),Fo(1,sz,5,1,"div",11),Ho()),2&t){const t=Yo(2);rs(1),No("ngForOf",t.provinces)}}function az(t,e){if(1&t){const t=zo();Lo(0,"div",12),Lo(1,"div",13),Wo("click",function(){const e=Oe(t).$implicit;return Yo(3).getWard(e)}),Lo(2,"div",14),Lo(3,"span",15),Ea(4),Vo(),Vo(),Vo(),Vo()}if(2&t){const t=e.$implicit;rs(4),_a(t.name)}}function uz(t,e){if(1&t&&(Uo(0),Fo(1,az,5,1,"div",11),Ho()),2&t){const t=Yo(2);rs(1),No("ngForOf",t.districts)}}function cz(t,e){if(1&t){const t=zo();Lo(0,"div",12),Lo(1,"div",13),Wo("click",function(){const e=Oe(t).$implicit;return Yo(3).getAddressDetail(e)}),Lo(2,"div",14),Lo(3,"span",15),Ea(4),Vo(),Vo(),Vo(),Vo()}if(2&t){const t=e.$implicit;rs(4),_a(t.name)}}function lz(t,e){if(1&t&&(Uo(0),Fo(1,cz,5,1,"div",11),Ho()),2&t){const t=Yo(2);rs(1),No("ngForOf",t.wards)}}function hz(t,e){1&t&&(Uo(0),Ea(1,"\xa0"),Ho())}function pz(t,e){if(1&t&&(Uo(0),Lo(1,"div",19),jo(2,"i",20),Ea(3),Vo(),Ho()),2&t){const t=Yo(3);rs(3),Sa(" ",t.err," ")}}function fz(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"div",16),Lo(2,"div",17),Fo(3,hz,2,0,"ng-container",0),Fo(4,pz,4,1,"ng-container",0),Vo(),Lo(5,"app-aio-virtual-keyboard",18),Wo("onChangeEvent",function(e){return Oe(t),Yo(2).onChangeEvent(e)})("onKeyPressEvent",function(e){return Oe(t),Yo(2).onKeyPressEvent(e)}),Vo(),Vo(),Ho()}if(2&t){const t=Yo(2);rs(3),No("ngIf",!t.err),rs(1),No("ngIf",t.err)}}const dz=function(t){return{"pt-4":t}};function mz(t,e){if(1&t){const t=zo();Lo(0,"section"),Lo(1,"div",1),Lo(2,"mat-icon",2),Wo("click",function(){Oe(t);const e=Yo();return e.dialogRef.close(e.data)}),Ea(3,"close"),Vo(),Vo(),Lo(4,"div",3),Lo(5,"div",4),Lo(6,"div",5),Wo("click",function(){return Oe(t),Yo().back()}),Fo(7,iz,1,0,"i",6),Vo(),Lo(8,"div",7),Lo(9,"h4"),Ea(10),Vo(),Vo(),jo(11,"div",8),Vo(),Vo(),Lo(12,"mat-dialog-content",9),Lo(13,"div",3),Lo(14,"div",4),Fo(15,oz,2,1,"ng-container",0),Fo(16,uz,2,1,"ng-container",0),Fo(17,lz,2,1,"ng-container",0),Vo(),Vo(),Fo(18,fz,6,2,"ng-container",0),Vo(),Vo()}if(2&t){const t=Yo();rs(7),No("ngIf",t.step>1),rs(3),_a(t.title),rs(2),No("ngClass",Xu(7,dz,t.step<4)),rs(3),No("ngIf",1==t.step),rs(1),No("ngIf",2==t.step),rs(1),No("ngIf",3==t.step),rs(1),No("ngIf",4==t.step)}}let gz=(()=>{class t{constructor(t,e,n){this.dialogRef=t,this.data=e,this.aioSvc=n,this.title="T\u1ec9nh / Th\xe0nh ph\u1ed1",this.addressInfo=new vg,this.contactAddress="",this.step=1,this.err="",this.provinces=[],this.districts=[],this.wards=[]}ngOnInit(){this.provinces=this.data}getDistrict(t){this.currentPro=t,this.districts=[],this.aioSvc.getDistricts(t.id).subscribe(t=>{this.aioSvc.isProcessing=!1,console.log(t),t.data.districts?this.districts=t.data.districts:this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra getDistrict")},t=>{this.aioSvc.isProcessing=!1,this.aioSvc.alert(`C\xf3 l\u1ed7i x\u1ea3y ra getDistrict ${t}`)}),this.title="Qu\u1eadn / Huy\u1ec7n",this.step++}getWard(t){this.currentDis=t,this.wards=[],this.aioSvc.getWards(t.id).subscribe(t=>{this.aioSvc.isProcessing=!1,t.data.wards?(this.wards=t.data.wards,console.log(this.wards)):this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra getWard")},t=>{this.aioSvc.isProcessing=!1,this.aioSvc.alert(`C\xf3 l\u1ed7i x\u1ea3y ra getWard ${t}`)}),this.title="Ph\u01b0\u1eddng / X\xe3",this.step++}getAddressDetail(t){this.currentWard=t,this.title="\u0110\u1ecba ch\u1ec9 chi ti\u1ebft",this.step++}back(){this.step--}onChangeEvent(t){this.addressDetail=t,console.log(t)}onKeyPressEvent(t){console.log(t),"{downkeyboard}"===t&&this.dialogRef.close(),"{enter}"===t&&this.validateAdressDetail()}validateAdressDetail(){this.addressDetail&&this.addressDetail.length>5?(this.err="",this.addressInfo.provinceCode=this.currentPro.code,this.addressInfo.provinceName=this.currentPro.name,this.addressInfo.districtCode=this.currentDis.code,this.addressInfo.districtName=this.currentDis.name,this.addressInfo.wardCode=this.currentWard.code,this.addressInfo.wardName=this.currentWard.name,this.addressInfo.street=this.addressDetail,this.dialogRef.close(this.addressInfo)):(this.err="\u0110\u1ecba ch\u1ec9 t\u1ed1i thi\u1ec3u 6 k\xfd t\u1ef1",this.contactAddress="")}}return t.\u0275fac=function(e){return new(e||t)(Oo(hE),Oo(fE),Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-contact-address"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-right"],["matSuffix","",3,"click"],[1,"container"],[1,"row"],[1,"col-2","pl-2",3,"click"],["class","fa fa-long-arrow-left fa-2x","aria-hidden","true",4,"ngIf"],[1,"col-8","text-center"],[1,"col-2"],[1,"contact-address-panel",3,"ngClass"],["aria-hidden","true",1,"fa","fa-long-arrow-left","fa-2x"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[1,"bg-white","p-3","account-type","mb-4","active",3,"click"],[1,"d-inline-block"],[1,"account-type-label","active"],[1,"text-center"],[1,"mb-2","mt-4"],[3,"onChangeEvent","onKeyPressEvent"],[1,"text-danger"],["aria-hidden","true",1,"fa","fa-exclamation-circle"]],template:function(t,e){1&t&&Fo(0,mz,19,9,"section",0),2&t&&No("ngIf",e.provinces.length>0)},directives:[ql,NE,c_,bE,Ul,zl,rz],styles:['.contact-address-panel[_ngcontent-%COMP%]{width:70vw;min-height:50vh}.mat-dialog-container[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-family:Manrope,sans-serif!important}.account-type-label[_ngcontent-%COMP%]:before{content:"";height:20px;width:20px;border-radius:30px;background-color:#f0f2f7;display:inline-block;margin-right:7px;vertical-align:sub}.active.account-type-label[_ngcontent-%COMP%]:before{background-color:#fff;border:5px solid #2a81d0;transition:.2s ease-out}.account-type[_ngcontent-%COMP%]{cursor:pointer;border:2px solid #f0f2f7;border-radius:6px}.active.account-type[_ngcontent-%COMP%]{border:2px solid #2a81d0;transition:.2s ease-in-out}']}),t})();function vz(t,e){1&t&&(Uo(0),Ea(1,"\xa0"),Ho())}function yz(t,e){if(1&t&&(Uo(0),Lo(1,"div",5),jo(2,"i",6),Ea(3),Vo(),Ho()),2&t){const t=Yo();rs(3),Sa(" ",t.err," ")}}let bz=(()=>{class t{constructor(t,e,n){this.dialogRef=t,this.data=e,this.aioSvc=n,this.email=this.data,this.expression=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,this.err=""}ngOnInit(){}onChangeEvent(t){this.email=t,console.log(t)}onKeyPressEvent(t){console.log(t),"{downkeyboard}"===t&&this.dialogRef.close(this.data),"{enter}"===t&&this.validateEmail()}validateEmail(){this.email?this.expression.test(this.email)?(this.err="",this.aioSvc.verifyEmail(this.email).subscribe(t=>{this.aioSvc.isProcessing=!1,console.log(t),"00"!=t.respCode?this.err="Email kh\xf4ng h\u1ee3p l\u1ec7, vui l\xf2ng th\u1eed l\u1ea1i":this.dialogRef.close(this.email)},t=>{this.aioSvc.isProcessing=!1,this.aioSvc.alert("C\xf3 l\u1ed7i h\u1ec7 th\u1ed1ng")})):this.err="Email kh\xf4ng h\u1ee3p l\u1ec7, vui l\xf2ng th\u1eed l\u1ea1i":this.err="Email kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng"}}return t.\u0275fac=function(e){return new(e||t)(Oo(hE),Oo(fE),Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-input-email"]],decls:10,vars:4,consts:[[1,"text-right","mb-4"],["matSuffix","",3,"click"],[1,"mb-3","text-center"],[4,"ngIf"],[3,"title","value","onChangeEvent","onKeyPressEvent"],[1,"text-danger"],["aria-hidden","true",1,"fa","fa-exclamation-circle"]],template:function(t,e){1&t&&(Lo(0,"div",0),Lo(1,"mat-icon",1),Wo("click",function(){return e.dialogRef.close(e.data)}),Ea(2,"close"),Vo(),Vo(),Lo(3,"div",2),Lo(4,"h4"),Ea(5,"Email"),Vo(),Lo(6,"div"),Fo(7,vz,2,0,"ng-container",3),Fo(8,yz,4,1,"ng-container",3),Vo(),Vo(),Lo(9,"app-aio-virtual-keyboard",4),Wo("onChangeEvent",function(t){return e.onChangeEvent(t)})("onKeyPressEvent",function(t){return e.onKeyPressEvent(t)}),Vo()),2&t&&(rs(7),No("ngIf",!e.err),rs(1),No("ngIf",e.err),rs(1),No("title","Email")("value",e.email))},directives:[NE,c_,ql,rz],styles:[""]}),t})();const wz=function(t){return{"o-0":t}};let xz=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.mobileNumber="",this.errMsg="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7",this.err=!1,this.mobileNumber=e}ngOnInit(){}next(){!this.isVietnamesePhoneNumber()||this.mobileNumber.length<10||this.dialogRef.close(this.mobileNumber)}recieveInputNumber(t){this.handleInputNumber(t)}handleInputNumber(t){if("c"==t)this.mobileNumber=this.mobileNumber.substring(0,this.mobileNumber.length-1),this.err=!1;else{if(this.mobileNumber.length>=10)return;this.mobileNumber=this.mobileNumber+t,this.err=10==this.mobileNumber.length&&!this.isVietnamesePhoneNumber()}console.log(t),console.log(this.mobileNumber)}isVietnamesePhoneNumber(){return/(03|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/.test(this.mobileNumber)}}return t.\u0275fac=function(e){return new(e||t)(Oo(hE),Oo(fE))},t.\u0275cmp=Kt({type:t,selectors:[["app-input-mobile-number"]],decls:17,vars:6,consts:[[1,"text-right"],["matSuffix","",3,"click"],[1,"container","text-center"],[1,"mb-4","font-weight-bold"],[1,"text-danger","mb-3",3,"ngClass"],["aria-hidden","true",1,"fa","fa-exclamation-circle"],[1,"text-center","keyboard-box"],["type","text","readonly","","maxlength","10",3,"ngModel","ngModelChange"],[3,"inputNumberEvent"],[1,"btn-next","mt-4",3,"disabled","click"]],template:function(t,e){1&t&&(Lo(0,"section"),Lo(1,"div",0),Lo(2,"mat-icon",1),Wo("click",function(){return e.dialogRef.close(e.data)}),Ea(3,"close"),Vo(),Vo(),Lo(4,"div",2),Lo(5,"div"),Lo(6,"h3",3),Ea(7," Qu\xfd kh\xe1ch vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),Vo(),Vo(),Lo(8,"div",4),jo(9,"i",5),Ea(10),Vo(),Lo(11,"div",6),Lo(12,"div"),Lo(13,"input",7),Wo("ngModelChange",function(t){return e.mobileNumber=t}),Vo(),Vo(),Lo(14,"app-keyboard-number",8),Wo("inputNumberEvent",function(t){return e.recieveInputNumber(t)}),Vo(),Lo(15,"button",9),Wo("click",function(){return e.next()}),Ea(16," Ti\u1ebfp t\u1ee5c "),Vo(),Vo(),Vo(),Vo()),2&t&&(rs(8),No("ngClass",Xu(4,wz,!e.err)),rs(2),Sa(" ",e.errMsg," "),rs(3),No("ngModel",e.mobileNumber),rs(2),No("disabled",e.mobileNumber.length<10||!e.mobileNumber||!e.isVietnamesePhoneNumber()))},directives:[NE,c_,Ul,WS,zC,cC,MC,yA],styles:[".keyboard-box[_ngcontent-%COMP%]{max-width:450px;margin:0 auto}input[type=text][_ngcontent-%COMP%]{width:100%;height:55px;border-radius:6px;outline:none;border:1px solid #dcdcdc;font-size:2rem;text-align:center}.keyboard-item[_ngcontent-%COMP%]{border:1px solid #2a81d0;border-radius:4px;height:60px}.keyboard-panel[_ngcontent-%COMP%]{border:1px solid #dcdcdc;padding:5px;background-color:#f8f8f8}.keyboard-panel[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%;border-radius:6px}td[_ngcontent-%COMP%]{width:33.33%;height:70px;padding:5px;border:3px}.btn-disabled[_ngcontent-%COMP%], .btn-keyboard[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{width:100%;height:100%;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#2a81d0;background-color:#fff;font-size:1.2rem}.btn-keyboard[_ngcontent-%COMP%]:hover{background-color:#2a81d0;color:#fff;transition:.3s ease-in-out}.btn-next[_ngcontent-%COMP%]:disabled{opacity:.5!important}.btn-next[_ngcontent-%COMP%]{background-color:#2a81d0;color:#fff;height:60px}.o-0[_ngcontent-%COMP%]{opacity:0}"]}),t})();function Ez(t,e){if(1&t){const t=zo();Lo(0,"div",7),Lo(1,"div",8),Wo("click",function(){const e=Oe(t).$implicit;return Yo().setOccupations(e)}),Lo(2,"div",9),Lo(3,"span",10),Ea(4),Vo(),Vo(),Vo(),Vo()}if(2&t){const t=e.$implicit;rs(4),_a(t.name)}}let _z=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.title="Ngh\u1ec1 nghi\u1ec7p"}ngOnInit(){}setOccupations(t){this.dialogRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(Oo(hE),Oo(fE))},t.\u0275cmp=Kt({type:t,selectors:[["app-job"]],decls:10,vars:2,consts:[[1,"text-right"],["matSuffix","",3,"click"],[1,"text-center"],[1,"job-panel","pt-4"],[1,"container"],[1,"row"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[1,"bg-white","p-3","account-type","mb-4","active",3,"click"],[1,"d-inline-block"],[1,"account-type-label","active"]],template:function(t,e){1&t&&(Lo(0,"div",0),Lo(1,"mat-icon",1),Wo("click",function(){return e.dialogRef.close(e.data)}),Ea(2,"close"),Vo(),Vo(),Lo(3,"div",2),Lo(4,"h4"),Ea(5),Vo(),Vo(),Lo(6,"mat-dialog-content",3),Lo(7,"div",4),Lo(8,"div",5),Fo(9,Ez,5,1,"div",6),Vo(),Vo(),Vo()),2&t&&(rs(5),_a(e.title),rs(4),No("ngForOf",e.data))},directives:[NE,c_,bE,zl],styles:['.account-type-label[_ngcontent-%COMP%]:before{content:"";height:20px;width:20px;border-radius:30px;background-color:#f0f2f7;display:inline-block;margin-right:7px;vertical-align:sub}.active.account-type-label[_ngcontent-%COMP%]:before{background-color:#fff;border:5px solid #2a81d0;transition:.2s ease-out}.account-type[_ngcontent-%COMP%]{cursor:pointer;border:2px solid #f0f2f7;border-radius:6px}.active.account-type[_ngcontent-%COMP%]{border:2px solid #2a81d0;transition:.2s ease-in-out}.job-panel[_ngcontent-%COMP%]{width:70vw;min-height:50vh}']}),t})();function Sz(t,e){1&t&&(Uo(0),Ea(1," \u0110\u1ecba ch\u1ec9 li\xean l\u1ea1c "),Ho())}function Cz(t,e){if(1&t&&(Uo(0),Ea(1),function(t,e){const n=Be();let r;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new ct("302","The pipe 'slice' could not be found!")}("slice",n.pipeRegistry),n.data[22]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(22,r.onDestroy)):r=n.data[22];const i=r.factory||(r.factory=ue(r.type)),s=St(Oo);try{const t=In(!1),e=i();In(t),function(t,e,n,r){22>=t.data.length&&(t.data[22]=null,t.blueprint[22]=null),e[22]=r}(n,Fe(),0,e)}finally{St(s)}}(),Ho()),2&t){const t=Yo();rs(1),Ca(" ",Yu(2,2,t.contactAddress,0,50)," ",t.contactAddress.length>50?"...":""," ")}}function Az(t,e){1&t&&(Uo(0),Ea(1,"Nh\u1eadp email c\u1ee7a b\u1ea1n"),Ho())}function Iz(t,e){if(1&t&&(Uo(0),Ea(1),Ho()),2&t){const t=Yo();rs(1),_a(t.aioSvc.customerInfo.email)}}function Tz(t,e){1&t&&(Uo(0),Ea(1,"Vui l\xf2ng ch\u1ecdn ngh\u1ec1 nghi\u1ec7p "),Lo(2,"span",18),jo(3,"i",19),Vo(),Ho())}function kz(t,e){if(1&t&&(Uo(0),Ea(1),Ho()),2&t){const t=Yo();rs(1),_a(t.currentOcc.name)}}function Pz(t,e){1&t&&(Uo(0),Ea(1,"Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ee7a b\u1ea1n"),Ho())}function Rz(t,e){if(1&t&&(Uo(0),Ea(1),Ho()),2&t){const t=Yo();rs(1),_a(t.aioSvc.customerInfo.mobileNo)}}let Dz=(()=>{class t{constructor(t,e){this.aioSvc=t,this.dialog=e,this.isLikeResidenceAddress=!1,this.contactAddress="",this.occupations=[],this.provinces=[],this.aioSvc.currentStep=Tg.FillInfo}ngOnInit(){this.findAddressByText(),this.aioSvc.customerInfo.email=this.randomId(6)+"@gmail.com"}likeResidenceAddress(){console.log(this.isLikeResidenceAddress),this.isLikeResidenceAddress?(this.contactAddress=this.aioSvc.customerInfo.address,this.aioSvc.customerInfo.contactAddress=this.aioSvc.customerInfo.residentialAddress):(this.contactAddress="",this.aioSvc.customerInfo.contactAddress=new vg)}randomId(t){for(var e="",n="0123456789",r=n.length,i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}findAddressByText(){this.aioSvc.findAddressByText(this.aioSvc.customerInfo.address).subscribe(t=>{console.log(t),"00"==t.respCode?(this.aioSvc.customerInfo.residentialAddress=t.data,this.getOccupations()):(this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra findAddressByText"),this.aioSvc.isProcessing=!1)},t=>{console.log(t),this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra findAddressByText"),this.aioSvc.isProcessing=!1})}getOccupations(){this.aioSvc.getOccupations().subscribe(t=>{console.log(t),t.data.occupations?(this.occupations=t.data.occupations,this.getProvinces()):(this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra getOccupations"),this.aioSvc.isProcessing=!1)},t=>{this.aioSvc.isProcessing=!1,this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra getOccupations")})}getProvinces(){this.aioSvc.getProvinces().subscribe(t=>{console.log(t),t.data.provinces?(this.provinces=t.data.provinces,this.aioSvc.isProcessing=!1):(this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra getProvinces"),this.aioSvc.isProcessing=!1)},t=>{this.aioSvc.alert(`C\xf3 l\u1ed7i x\u1ea3y ra getProvinces ${t}`),this.aioSvc.isProcessing=!1})}openContactAddressDialog(){this.dialog.open(gz,{data:this.provinces}).afterClosed().subscribe(t=>{t&&(this.aioSvc.customerInfo.contactAddress=t,this.contactAddress=this.concatAddress(t)),console.log(t),console.log("The ContactAddressDialog was closed",t)})}concatAddress(t){return`${t.street}, ${t.wardName}, ${t.districtName}, ${t.provinceName}`}openInputEmailDialog(){this.dialog.open(bz,{data:this.aioSvc.customerInfo.email}).afterClosed().subscribe(t=>{t&&(this.aioSvc.customerInfo.email=t),console.log(t),console.log("The InputEmailDialog was closed",t)})}openJobDialog(){this.dialog.open(_z,{data:this.occupations}).afterClosed().subscribe(t=>{t&&(this.currentOcc=t,this.aioSvc.customerInfo.jobCode=this.currentOcc.code),console.log(t),console.log("The JobDialog was closed",t)})}openMobileNoDialog(){this.dialog.open(xz,{data:this.aioSvc.customerInfo.mobileNo?this.aioSvc.customerInfo.mobileNo:""}).afterClosed().subscribe(t=>{t&&(this.aioSvc.customerInfo.mobileNo=t),console.log(t),console.log("The MobileNoDialog was closed",t)})}confirm(){this.aioSvc.customerInfo.email&&this.aioSvc.customerInfo.mobileNo&&this.aioSvc.customerInfo.jobCode&&this.aioSvc.customerInfo.contactAddress&&this.aioSvc.next()}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS),Oo(yE))},t.\u0275cmp=Kt({type:t,selectors:[["app-fill-info"]],decls:38,vars:12,consts:[[3,"currentStep"],[1,"container"],[1,"text-center"],[1,"mb-3","font-weight-bold"],[1,"row","p-3","bg-white","box","mt-5"],[1,"col-12","pt-2"],[1,"fill-table"],[1,"w-50","pb-3"],[3,"color","ngModel","change","ngModelChange"],[1,"w-50","pl-3","pb-3"],[1,"fill-input","ml-3",3,"click"],[4,"ngIf"],[1,"w-50","pb-3",3,"click"],[1,"fill-input"],[1,"w-50","pl-3","pb-3",3,"click"],[1,"fill-input","ml-3"],[1,"text-center","pt-5"],[1,"btn-next",3,"disabled","click"],[1,"float-right","pr-3"],["aria-hidden","true",1,"fa","fa-angle-down"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Lo(2,"section"),Lo(3,"div",1),Lo(4,"div",2),Lo(5,"h3",3),Ea(6,"B\u1ed5 sung th\xf4ng tin"),Vo(),Lo(7,"h5"),Ea(8,"Qu\xfd kh\xe1ch vui l\xf2ng nh\u1eadp c\xe1c th\xf4ng tin c\xf2n thi\u1ebfu"),Vo(),Vo(),Lo(9,"div",4),Lo(10,"div",5),Lo(11,"div"),Lo(12,"table",6),Lo(13,"tr"),Lo(14,"td",7),Lo(15,"mat-checkbox",8),Wo("change",function(){return e.likeResidenceAddress()})("ngModelChange",function(t){return e.isLikeResidenceAddress=t}),Ea(16,"\u0110\u1ecba ch\u1ec9 li\xean l\u1ea1c tr\xf9ng v\u1edbi \u0111\u1ecba ch\u1ec9 th\u01b0\u1eddng tr\xfa"),Vo(),Vo(),Lo(17,"td",9),Lo(18,"div",10),Wo("click",function(){return e.openContactAddressDialog()}),Fo(19,Sz,2,0,"ng-container",11),Fo(20,Cz,3,6,"ng-container",11),Vo(),Vo(),Vo(),Lo(21,"tr"),Lo(22,"td",12),Wo("click",function(){return e.openInputEmailDialog()}),Lo(23,"div",13),Fo(24,Az,2,0,"ng-container",11),Fo(25,Iz,2,1,"ng-container",11),Vo(),Vo(),Lo(26,"td",14),Wo("click",function(){return e.openJobDialog()}),Lo(27,"div",15),Fo(28,Tz,4,0,"ng-container",11),Fo(29,kz,2,1,"ng-container",11),Vo(),Vo(),Vo(),Lo(30,"tr"),Lo(31,"td",12),Wo("click",function(){return e.openMobileNoDialog()}),Lo(32,"div",13),Fo(33,Pz,2,0,"ng-container",11),Fo(34,Rz,2,1,"ng-container",11),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Lo(35,"div",16),Lo(36,"button",17),Wo("click",function(){return e.confirm()}),Ea(37," X\xe1c nh\u1eadn "),Vo(),Vo(),Vo(),Vo()),2&t&&(rs(1),No("currentStep",3),rs(14),No("color","primary")("ngModel",e.isLikeResidenceAddress),rs(4),No("ngIf",!e.contactAddress),rs(1),No("ngIf",e.contactAddress),rs(4),No("ngIf",!e.aioSvc.customerInfo.email),rs(1),No("ngIf",e.aioSvc.customerInfo.email),rs(3),No("ngIf",!e.currentOcc),rs(1),No("ngIf",e.currentOcc),rs(4),No("ngIf",!e.aioSvc.customerInfo.mobileNo),rs(1),No("ngIf",e.aioSvc.customerInfo.mobileNo),rs(2),No("disabled",!(e.aioSvc.customerInfo.email&&e.aioSvc.customerInfo.jobCode&&e.aioSvc.customerInfo.mobileNo&&e.contactAddress)))},directives:[jS,iA,mA,cC,MC,ql],pipes:[Zl],styles:[".box[_ngcontent-%COMP%]{border-radius:1rem}.box[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem}mat-checkbox[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], mat-option[_ngcontent-%COMP%]{font-family:Manrope,sans-serif!important}.fill-table[_ngcontent-%COMP%], .fill-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%}.fill-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 1rem}.left[_ngcontent-%COMP%]{border-right:2px solid #f0f2f7}.fill-input[_ngcontent-%COMP%]{max-width:100%;height:60px;border:none;border-bottom:2px solid #f0f2f7;line-height:60px;color:#7c828b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.my-class[_ngcontent-%COMP%]{background-color:red!important}.btn-next[_ngcontent-%COMP%]{width:200px;height:60px;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#fff;background-color:#2a81d0;font-size:1.2rem}.btn-next[_ngcontent-%COMP%]:hover{background-color:#1966af}.btn-next[_ngcontent-%COMP%]:disabled:hover{background-color:#2a81d0}.btn-next[_ngcontent-%COMP%]:disabled{opacity:.5}.img-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100px;border-radius:1rem}"]}),t})();var Fz=n(3409);let Bz=(()=>{class t{constructor(){this.messages=this.connect("ws://localhost:7171/finger-icao-ws").pipe(A(t=>JSON.parse(t.data)))}connect(t){return this.subject||(this.subject=this.create(t),console.log("Successfully connected: "+t)),this.subject}create(t){let e=new WebSocket(t),n=new y(t=>(e.onmessage=t.next.bind(t),e.onerror=t.error.bind(t),e.onclose=t.complete.bind(t),e.close.bind(e)));return new Fz.AnonymousSubject({error:t=>{console.log(t)},complete:()=>{},next:()=>{let t=new x_;t.bankAppId=1,t.bankTransactionId=(new Date).getTime().toString(),e.readyState===WebSocket.OPEN&&e.send(JSON.stringify(t))}},n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function Oz(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"div",4),Lo(2,"ng-lottie",5),Wo("animationCreated",function(e){return Oe(t),Yo().animationCreated(e)}),Vo(),Vo(),Ho()}if(2&t){const t=Yo();rs(2),No("options",t.input)}}function Nz(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"div",6),Lo(2,"ng-lottie",5),Wo("animationCreated",function(e){return Oe(t),Yo().animationCreated(e)}),Vo(),Vo(),Ho()}if(2&t){const t=Yo();rs(2),No("options",t.check)}}let Mz=(()=>{class t{constructor(t,e){this.aioSvc=t,this.dialog=e,this.fpResponse=new w_,this.hasIcaoResponse=!1,this.input={path:"assets/all-in-one/shared/img/cccd-vantay.json"},this.check={path:"assets/all-in-one/shared/img/check.json"},t.currentStep=Tg.InputFinger}animationCreated(t){console.log(t)}ngOnInit(){this.callMkFingerPrint()}callMkFingerPrint(){(new Bz).messages.subscribe(t=>{console.log(t),this.fpResponse=t,this.fpResponse.quality>0&&0==this.hasIcaoResponse&&(this.fpResponse.icaoResponse&&this.fpResponse.icaoResponse.success?(this.hasIcaoResponse=!0,console.log(this.fpResponse),this.fpResponse.image="data:image/png;base64,"+this.fpResponse.image,console.log("Response from websocket: "+this.fpResponse.verifyResponse),this.mappingData(),setTimeout(()=>{this.aioSvc.next()},3e3)):2==this.aioSvc.fpAttemp?this.aioSvc.alert("Qu\xfd kh\xe1ch \u0111\xe3 x\xe1c th\u1ef1c th\u1ea5t b\u1ea1i <br>qu\xe1 s\u1ed1 l\u1ea7n quy \u0111\u1ecbnh"):this.alert())},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra callMkFingerPrint"),console.log(t)})}alert(){let t=new Fg;t.template=Bg.FingerPrintFailed,t.title="Th\xf4ng b\xe1o",this.dialog.open(b_,{data:t,autoFocus:!1}).afterClosed().subscribe(t=>{t?"back"==t.action?this.aioSvc.release():(this.aioSvc.fpAttemp++,this.recallMkFingerPrint()):this.aioSvc.release(),console.log(t)})}mappingData(){let t=new gg,e=this.fpResponse.icaoResponse.data.dg13;t.address=e.residenceAddress,t.dob=e.dateOfBirth,t.gender=e.gender,t.customerID=e.idCardNo,t.customerIDOld=e.oldIdCardNumber,t.nationality=e.nationality,t.towncountry=e.placeOfOrigin,t.fullName=e.name,t.expireDate=e.dateOfExpiry,t.issueDate=e.dateOfIssuance,this.aioSvc.customerInfo=t,console.log(this.aioSvc.customerInfo)}recallMkFingerPrint(){this.fpResponse=new w_,this.callMkFingerPrint()}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS),Oo(yE))},t.\u0275cmp=Kt({type:t,selectors:[["app-input-finger"]],decls:11,vars:3,consts:[[3,"currentStep"],[1,"container","text-center"],[1,"mb-3","font-weight-bold"],[4,"ngIf"],[1,"py-4","gif"],[3,"options","animationCreated"],[1,"py-4","gif","animate__animated","animate__zoomIn"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Lo(2,"section"),Lo(3,"div",1),Lo(4,"div"),Lo(5,"h3",2),Ea(6,"X\xe1c th\u1ef1c CCCD & v\xe2n tay"),Vo(),Lo(7,"h5"),Ea(8,"Vui l\xf2ng \u0111\u01b0a CCCD v\xe0 \u0111\u1eb7t v\xe2n tay v\xe0o thi\u1ebft b\u1ecb"),Vo(),Vo(),Fo(9,Oz,3,1,"ng-container",3),Fo(10,Nz,3,1,"ng-container",3),Vo(),Vo()),2&t&&(rs(1),No("currentStep",2),rs(8),No("ngIf",!e.fpResponse.icaoResponse),rs(1),No("ngIf",e.fpResponse.icaoResponse))},directives:[jS,iA,ql,BS],styles:[".gif[_ngcontent-%COMP%]{border-radius:20px}.btn-next[_ngcontent-%COMP%]{width:200px;height:60px;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#fff;background-color:#2a81d0;font-size:1.2rem}.btn-next[_ngcontent-%COMP%]:hover{background-color:#1966af}.btn-next[_ngcontent-%COMP%]:disabled:hover{background-color:#2a81d0}.btn-next[_ngcontent-%COMP%]:disabled{opacity:.5}.gif[_ngcontent-%COMP%]{width:40%;margin-inline:auto}"]}),t})();class Lz{constructor(t,e){this.open=t,this.close=e||t}isManual(){return"manual"===this.open||"manual"===this.close}}const Vz={hover:["mouseover","mouseout"],focus:["focusin","focusout"]},jz="undefined"!=typeof window&&window||{};var Uz=(()=>(function(t){t.isBs3="bs3",t.isBs4="bs4",t.isBs5="bs5"}(Uz||(Uz={})),Uz))();let Hz;function zz(){if(void 0===jz.document)return"bs4";const t=jz.document.createElement("span");t.innerText="testing bs version",t.classList.add("d-none"),t.classList.add("pl-1"),jz.document.head.appendChild(t);const e=t.getBoundingClientRect(),n=jz.getComputedStyle(t).paddingLeft;return!e||e&&0!==e.top?(jz.document.head.removeChild(t),"bs3"):n&&parseFloat(n)?(jz.document.head.removeChild(t),"bs4"):(jz.document.head.removeChild(t),"bs5")}function Kz(){return void 0===jz||(void 0===jz.__theme?(Hz||(Hz=zz()),"bs3"===Hz):"bs3"===jz.__theme)}function qz(){return!Kz()&&(Hz||(Hz=zz()),"bs4"===Hz)}function Wz(){return{isBs3:Kz(),isBs4:qz(),isBs5:!Kz()&&!qz()&&(Hz||(Hz=zz()),"bs5"===Hz)}}"undefined"==typeof console||console;let Gz,$z=(()=>{class t{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(e=>e!==t);let e=this._focusTrapStack;e.length&&e[e.length-1]._disable(),e.push(t),t._enable()}deregister(t){t._disable();const e=this._focusTrapStack,n=e.indexOf(t);-1!==n&&(e.splice(n,1),e.length&&e[e.length-1]._enable())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();try{Gz="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch{Gz=!1}let Xz=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?th(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Gz)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(dr(Cc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Qz=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch{return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){if(-1===Zz(e))return!1;if(!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),i=Zz(t);return t.hasAttribute("contenteditable")?-1!==i:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==i:"video"===r?-1!==i&&(null!==i||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||Yz(t))}(t)&&!this.isDisabled(t)&&(e?.ignoreVisibility||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(dr(Xz))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Yz(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function Zz(t){if(!Yz(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function Jz(t){return null!=t&&"false"!=`${t}`}class tK{constructor(t,e,n,r,i=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const e=this._getFirstTabbableElement(t);return e?.focus(),!!e}return t.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ep(1)).subscribe(t)}}let eK=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new tK(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(dr(Qz),dr(jc),dr(bl))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),nK=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._focusTrapFactory=e,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=n,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=Jz(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=Jz(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const e=t.autoCapture;e&&!e.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(eK),Oo(bl))},t.\u0275dir=Qt({type:t,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[le]}),t})(),rK=(()=>{class t{static forRoot(){return{ngModule:t,providers:[$z,Xz,Qz]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Jl]]}),t})();var iK=(()=>(function(t){t.top="top",t.bottom="bottom",t.left="left",t.right="right",t.auto="auto",t.end="right",t.start="left",t["top left"]="top left",t["top right"]="top right",t["right top"]="right top",t["right bottom"]="right bottom",t["bottom right"]="bottom right",t["bottom left"]="bottom left",t["left bottom"]="left bottom",t["left top"]="left top",t["top start"]="top left",t["top end"]="top right",t["end top"]="right top",t["end bottom"]="right bottom",t["bottom end"]="bottom right",t["bottom start"]="bottom left",t["start bottom"]="start bottom",t["start top"]="left top"}(iK||(iK={})),iK))(),sK=(()=>(function(t){t.top="top",t.bottom="bottom",t.left="start",t.right="end",t.auto="auto",t.end="end",t.start="start",t["top left"]="top start",t["top right"]="top end",t["right top"]="end top",t["right bottom"]="end bottom",t["bottom right"]="bottom end",t["bottom left"]="bottom start",t["left bottom"]="start bottom",t["left top"]="start top",t["top start"]="top start",t["top end"]="top end",t["end top"]="end top",t["end bottom"]="end bottom",t["bottom end"]="bottom end",t["bottom start"]="bottom start",t["start bottom"]="start bottom",t["start top"]="start top"}(sK||(sK={})),sK))();function oK(t,e){if(1!==t.nodeType)return[];const n=t.ownerDocument.defaultView?.getComputedStyle(t,null);return e?n&&n[e]:n}function aK(t){if(!t)return document.documentElement;let e,n=t?.offsetParent;for(;null===n&&t.nextElementSibling&&e!==t.nextElementSibling;)e=t.nextElementSibling,n=e.offsetParent;const r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?n&&-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===oK(n,"position")?aK(n):n:e?e.ownerDocument.documentElement:document.documentElement}function uK(t){return null!==t.parentNode?uK(t.parentNode):t}function cK(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;const n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,s=document.createRange();s.setStart(r,0),s.setEnd(i,0);const o=s.commonAncestorContainer;if(t!==o&&e!==o||r.contains(i))return function(t){const{nodeName:e}=t;return"BODY"!==e&&("HTML"===e||aK(t.firstElementChild)===t)}(o)?o:aK(o);const a=uK(t);return a.host?cK(a.host,e):cK(t,uK(e).host)}function lK(t){if(!t||!t.parentElement)return document.documentElement;let e=t.parentElement;for(;e?.parentElement&&"none"===oK(e,"transform");)e=e.parentElement;return e||document.documentElement}function hK(t,e){const n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t[`border${n}Width`])+parseFloat(t[`border${r}Width`])}function pK(t,e,n,r){return Math.max(e[`offset${t}`],e[`scroll${t}`],n[`client${t}`],n[`offset${t}`],n[`scroll${t}`],0)}function fK(t){const e=t.body,n=t.documentElement;return{height:pK("Height",e,n),width:pK("Width",e,n)}}function dK(t){return{...t,right:(t.left||0)+t.width,bottom:(t.top||0)+t.height}}function mK(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function gK(t){const e=t.getBoundingClientRect();if(!(e&&mK(e.top)&&mK(e.left)&&mK(e.bottom)&&mK(e.right)))return e;const n={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===t.nodeName?fK(t.ownerDocument):void 0,i=r?.width||t.clientWidth||mK(e.right)&&mK(n.left)&&e.right-n.left||0,s=r?.height||t.clientHeight||mK(e.bottom)&&mK(n.top)&&e.bottom-n.top||0;let o=t.offsetWidth-i,a=t.offsetHeight-s;if(o||a){const e=oK(t);o-=hK(e,"x"),a-=hK(e,"y"),n.width-=o,n.height-=a}return dK(n)}function vK(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function yK(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}const{overflow:e,overflowX:n,overflowY:r}=oK(t);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(n))?t:yK(vK(t))}function bK(t,e,n=!1){const r="HTML"===e.nodeName,i=gK(t),s=gK(e),o=(yK(t),oK(e)),a=parseFloat(o.borderTopWidth),u=parseFloat(o.borderLeftWidth);n&&r&&(s.top=Math.max(s.top??0,0),s.left=Math.max(s.left??0,0));const c=dK({top:(i.top??0)-(s.top??0)-a,left:(i.left??0)-(s.left??0)-u,width:i.width,height:i.height});if(c.marginTop=0,c.marginLeft=0,r){const t=parseFloat(o.marginTop),e=parseFloat(o.marginLeft);mK(c.top)&&(c.top-=a-t),mK(c.bottom)&&(c.bottom-=a-t),mK(c.left)&&(c.left-=u-e),mK(c.right)&&(c.right-=u-e),c.marginTop=t,c.marginLeft=e}return c}function wK(t,e="top"){const n="top"===e?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){const e=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||e)[n]}return t[n]}function xK(t){const e=t.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===oK(t,"position")||xK(vK(t)))}function EK(t,e,n=0,r,i=!1){let s={top:0,left:0};const o=i?lK(t):cK(t,e);if("viewport"===r)s=function(t,e=!1){const n=t.ownerDocument.documentElement,r=bK(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),s=Math.max(n.clientHeight,window.innerHeight||0),o=e?0:wK(n),a=e?0:wK(n,"left");return dK({top:o-Number(r?.top)+Number(r?.marginTop),left:a-Number(r?.left)+Number(r?.marginLeft),width:i,height:s})}(o,i);else{let n;"scrollParent"===r?(n=yK(vK(e)),"BODY"===n.nodeName&&(n=t.ownerDocument.documentElement)):n="window"===r?t.ownerDocument.documentElement:r;const a=bK(n,o,i);if(a&&"HTML"===n.nodeName&&!xK(o)){const{height:e,width:n}=fK(t.ownerDocument);mK(s.top)&&mK(a.top)&&mK(a.marginTop)&&(s.top+=a.top-a.marginTop),mK(s.top)&&(s.bottom=Number(e)+Number(a.top)),mK(s.left)&&mK(a.left)&&mK(a.marginLeft)&&(s.left+=a.left-a.marginLeft),mK(s.top)&&(s.right=Number(n)+Number(a.left))}else a&&(s=a)}return mK(s.left)&&(s.left+=n),mK(s.top)&&(s.top+=n),mK(s.right)&&(s.right-=n),mK(s.bottom)&&(s.bottom-=n),s}function _K({width:t,height:e}){return t*e}function SK(t,e,n,r,i=["top","bottom","right","left"],s="viewport",o=0){if(-1===t.indexOf("auto"))return t;const a=EK(n,r,o,s),u={top:{width:a?.width??0,height:(e?.top??0)-(a?.top??0)},right:{width:(a?.right??0)-(e?.right??0),height:a?.height??0},bottom:{width:a?.width??0,height:(a?.bottom??0)-(e?.bottom??0)},left:{width:(e.left??0)-(a?.left??0),height:a?.height??0}},c=Object.keys(u).map(t=>({position:t,...u[t],area:_K(u[t])})).sort((t,e)=>e.area-t.area);let l=c.filter(({width:t,height:e})=>t>=n.clientWidth&&e>=n.clientHeight);l=l.filter(({position:t})=>i.some(e=>e===t));const h=l.length>0?l[0].position:c[0].position,p=t.split(" ")[1];return n.className=n.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${Wz().isBs5?sK[h]:h}`),h+(p?`-${p}`:"")}const CK=(t,e=0)=>t?parseFloat(t):e;function AK(t){const e=t.ownerDocument.defaultView?.getComputedStyle(t),n=CK(e?.marginTop)+CK(e?.marginBottom),r=CK(e?.marginLeft)+CK(e?.marginRight);return{width:Number(t.offsetWidth)+r,height:Number(t.offsetHeight)+n}}function IK(t,e,n){return bK(e,n?lK(t):cK(t,e),n)}function TK(t,e,n){const r=n.split(" ")[0],i=AK(t),s={width:i.width,height:i.height},o=-1!==["right","left"].indexOf(r),a=o?"top":"left",u=o?"left":"top",c=o?"height":"width",l=o?"width":"height";return s[a]=(e[a]??0)+e[c]/2-i[c]/2,s[u]=r===u?(e[u]??0)-i[l]:e[function(t){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,t=>e[t])}(u)]??0,s}function kK(t,e){return!!t.modifiers[e]?.enabled}const PK={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function RK(t,e){return!!Wz().isBs5&&PK[e].includes(t)}function DK(t,e,n){t&&e&&Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(Number(t))}(e[r])&&(i="px"),n?n.setStyle(t,r,`${String(e[r])}${i}`):t.style[r]=String(e[r])+i})}function FK(t){let e=t.offsets.target;const n=t.instance.target.querySelector(".arrow");if(!n)return t;const r=-1!==["left","right"].indexOf(t.placement.split(" ")[0]),i=r?"height":"width",s=r?"Top":"Left",o=s.toLowerCase(),a=r?"left":"top",u=r?"bottom":"right",c=AK(n)[i],l=t.placement.split(" ")[1];(t.offsets.host[u]??0)-c<(e[o]??0)&&(e[o]-=(e[o]??0)-((t.offsets.host[u]??0)-c)),Number(t.offsets.host[o])+Number(c)>(e[u]??0)&&(e[o]+=Number(t.offsets.host[o])+Number(c)-Number(e[u])),e=dK(e);const h=oK(t.instance.target),p=parseFloat(h[`margin${s}`])||0,f=parseFloat(h[`border${s}Width`])||0;let d;if(l){const e=parseFloat(h.borderRadius)||0,n=Number(p+f+e);d=o===l?Number(t.offsets.host[o])+n:Number(t.offsets.host[o])+Number(t.offsets.host[i]-n)}else d=Number(t.offsets.host[o])+Number(t.offsets.host[i]/2-c/2);let m=d-(e[o]??0)-p-f;return m=Math.max(Math.min(e[i]-(c+5),m),0),t.offsets.arrow={[o]:Math.round(m),[a]:""},t.instance.arrow=n,t}function BK(t){if(t.offsets.target=dK(t.offsets.target),!kK(t.options,"flip"))return t.offsets.target={...t.offsets.target,...TK(t.instance.target,t.offsets.host,t.placement)},t;const e=EK(t.instance.target,t.instance.host,0,"viewport",!1);let n=t.placement.split(" ")[0],r=t.placement.split(" ")[1]||"";const i=SK("auto",t.offsets.host,t.instance.target,t.instance.host,t.options.allowedPositions),s=[n,i];return s.forEach((i,o)=>{if(n!==i||s.length===o+1)return;n=t.placement.split(" ")[0];const a="left"===n&&Math.floor(t.offsets.target.right??0)>Math.floor(t.offsets.host.left??0)||"right"===n&&Math.floor(t.offsets.target.left??0)<Math.floor(t.offsets.host.right??0)||"top"===n&&Math.floor(t.offsets.target.bottom??0)>Math.floor(t.offsets.host.top??0)||"bottom"===n&&Math.floor(t.offsets.target.top??0)<Math.floor(t.offsets.host.bottom??0),u=Math.floor(t.offsets.target.left??0)<Math.floor(e.left??0),c=Math.floor(t.offsets.target.right??0)>Math.floor(e.right??0),l=Math.floor(t.offsets.target.top??0)<Math.floor(e.top??0),h=Math.floor(t.offsets.target.bottom??0)>Math.floor(e.bottom??0),p="left"===n&&u||"right"===n&&c||"top"===n&&l||"bottom"===n&&h,f=-1!==["top","bottom"].indexOf(n),d=f&&"left"===r&&u||f&&"right"===r&&c||!f&&"left"===r&&l||!f&&"right"===r&&h;(a||p||d)&&((a||p)&&(n=s[o+1]),d&&(r=function(t){return"right"===t?"left":"left"===t?"right":t}(r)),t.placement=n+(r?` ${r}`:""),t.offsets.target={...t.offsets.target,...TK(t.instance.target,t.offsets.host,t.placement)})}),t}function OK(t){if(!kK(t.options,"preventOverflow"))return t;const e="transform",n=t.instance.target.style,{top:r,left:i,[e]:s}=n;n.top="",n.left="",n[e]="";const o=EK(t.instance.target,t.instance.host,0,t.options.modifiers.preventOverflow?.boundariesElement||"scrollParent",!1);n.top=r,n.left=i,n[e]=s;const a={primary(e){let n=t.offsets.target[e];return(t.offsets.target[e]??0)<(o[e]??0)&&(n=Math.max(t.offsets.target[e]??0,o[e]??0)),{[e]:n}},secondary(e){const n="right"===e,r=n?"left":"top";let i=t.offsets.target[r];return(t.offsets.target[e]??0)>(o[e]??0)&&(i=Math.min(t.offsets.target[r]??0,(o[e]??0)-t.offsets.target[n?"width":"height"])),{[r]:i}}};return["left","right","top","bottom"].forEach(e=>{const n=-1!==["left","top","start"].indexOf(e)?a.primary:a.secondary;t.offsets.target={...t.offsets.target,...n(e)}}),t}function NK(t){const e=t.placement,n=e.split(" ")[0],r=e.split(" ")[1];if(r){const{host:e,target:i}=t.offsets,s=-1!==["bottom","top"].indexOf(n),o=s?"left":"top",a=s?"width":"height",u={start:{[o]:e[o]},end:{[o]:(e[o]??0)+e[a]-i[a]}};t.offsets.target={...i,[o]:o===r?u.start[o]:u.end[o]}}return t}const MK=new class{position(t,e){return this.offset(t,e)}offset(t,e){return IK(e,t)}positionElements(t,e,n,r,i){const s=[BK,NK,OK,FK],o=function(t,e,n,r){if(!t||!e)return;const i=IK(t,e);n.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)||n.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)||(n="auto");const s=!!n.match(/auto/g);let o=n.match(/auto\s(left|right|top|bottom|start|end)/)?n.split(" ")[1]||"auto":n;const a=o.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return a&&(o=a[1]+(a[2]?` ${a[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(o)&&(o="auto"),o=SK(o,i,t,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:t,host:e,arrow:void 0},offsets:{target:TK(t,i,o),host:i,arrow:void 0},positionFixed:!1,placement:o,placementAuto:s}}(e,t,iK[n],i);if(o)return s.reduce((t,e)=>e(t),o)}};let LK=(()=>{class t{constructor(t,e,n){this.update$$=new _,this.positionElements=new Map,this.isDisabled=!1,th(n)&&t.runOutsideAngular(()=>{this.triggerEvent$=K(jg(window,"scroll",{passive:!0}),jg(window,"resize",{passive:!0}),Lh(0,Wg),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(t=>{!function(t,e,n,r,i,s){const o=MK.positionElements(t,e,n,r,i);if(!o)return;const a=function(t){return{width:t.offsets.target.width,height:t.offsets.target.height,left:Math.floor(t.offsets.target.left??0),top:Math.round(t.offsets.target.top??0),bottom:Math.round(t.offsets.target.bottom??0),right:Math.floor(t.offsets.target.right??0)}}(o);DK(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${a.left}px, ${a.top}px, 0px)`},s),o.instance.arrow&&DK(o.instance.arrow,o.offsets.arrow,s),function(t,e){const n=t.instance.target;let r=n.className;const i=Wz().isBs5?sK[t.placement]:t.placement;var s;t.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+(s=i,Wz().isBs5?RK(s,"end")?"ms-2":RK(s,"start")?"me-2":RK(s,"top")?"mb-2":RK(s,"bottom")?"mt-2":"":"")),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(n,"class",r):n.className=r}(o,s)}(VK(t.target),VK(t.element),t.attachment,t.appendToBody,this.options,e.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(VK(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(VK(t))}setOptions(t){this.options=t}}return t.\u0275fac=function(e){return new(e||t)(dr(jc),dr(Za),dr(Cc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function VK(t){return"string"==typeof t?document.querySelector(t):t instanceof Qa?t.nativeElement:t??null}class jK{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}class UK{constructor(t,e,n,r,i,s,o,a){this._viewContainerRef=t,this._renderer=e,this._elementRef=n,this._injector=r,this._componentFactoryResolver=i,this._ngZone=s,this._applicationRef=o,this._posService=a,this.onBeforeShow=new Ju,this.onShown=new Ju,this.onBeforeHide=new Ju,this.onHidden=new Ju,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(t){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(t),this}to(t){return this.container=t||this.container,this}position(t){return t?(this.attachment=t.attachment||this.attachment,this._elementRef=t.target||this._elementRef,this):this}provide(t){return this._providers.push(t),this}show(t={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(t.content,t.context,t.initialState);const e=go.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(e,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,t),this.container instanceof Qa&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const t=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!t)return;t.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(t.id?{id:t.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(t){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const e=this._componentRef.location.nativeElement;return e.parentNode?.removeChild(e),this._contentRef?.componentRef?.destroy(),this._viewContainerRef&&this._contentRef?.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef?.viewRef?.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(t?{id:t}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(t){this.triggers=t.triggers||this.triggers,this._listenOpts.outsideClick=t.outsideClick,this._listenOpts.outsideEsc=t.outsideEsc,t.target=t.target||this._elementRef?.nativeElement;const e=this._listenOpts.hide=()=>t.hide?t.hide():void this.hide(),n=this._listenOpts.show=e=>{t.show?t.show(e):this.show(e),e()};return this._renderer&&(this._unregisterListenersFn=function(t,e){const n=function(t,e=Vz){const n=(t||"").trim();if(0===n.length)return[];const r=n.split(/\s+/).map(t=>t.split(":")).map(t=>{const n=e[t[0]]||t;return new Lz(n[0],n[1])}),i=r.filter(t=>t.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===n.length&&n[0].isManual())return Function.prototype;const i=[],s=[],o=()=>{s.forEach(t=>i.push(t())),s.length=0};return n.forEach(n=>{const a=n.open===n.close,u=a?e.toggle:e.show;if(!a&&n.close&&e.hide){const i=t.listen(r,n.close,e.hide);s.push(()=>i)}u&&i.push(t.listen(r,n.open,()=>u(o)))}),()=>{i.forEach(t=>t())}}(this._renderer,{target:t.target,triggers:t.triggers,show:n,hide:e,toggle:t=>{this.isShown?e():n(t)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(t,e){return t&&e&&(this._inlineViewRef=t.createEmbeddedView(e)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const t=this._componentRef.location.nativeElement;setTimeout(()=>{var e;this._renderer&&this._elementRef&&(this._globalListener=(e={targets:[t,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}).outsideClick?this._renderer.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(e=>e.contains(t.target))||e.hide&&e.hide()}):Function.prototype)})}var t;this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=(t={targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}).outsideEsc?this._renderer.listen("document","keyup.esc",e=>{t.target&&t.target.contains(e.target)||t.targets&&t.targets.some(t=>t.contains(e.target))||t.hide&&t.hide()}):Function.prototype)}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){!this._zoneSubscription&&this.attachment&&(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef?.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(t,e,n){if(!t)return new jK([]);if(t instanceof Iu){if(this._viewContainerRef){const n=this._viewContainerRef.createEmbeddedView(t,e);return n.markForCheck(),new jK([n.rootNodes],n)}const n=t.createEmbeddedView({});return this._applicationRef.attachView(n),new jK([n.rootNodes],n)}if("function"==typeof t){const e=this._componentFactoryResolver.resolveComponentFactory(t),r=go.create({providers:this._providers,parent:this._injector}),i=e.create(r);return Object.assign(i.instance,n),this._applicationRef.attachView(i.hostView),new jK([[i.location.nativeElement]],i.hostView,i)}const r=this._renderer?[this._renderer.createText(`${t}`)]:[];return new jK([r])}}let HK=(()=>{class t{constructor(t,e,n,r,i){this._componentFactoryResolver=t,this._ngZone=e,this._injector=n,this._posService=r,this._applicationRef=i}createLoader(t,e,n){return new UK(e,n,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return t.\u0275fac=function(e){return new(e||t)(dr(Wa),dr(jc),dr(go),dr(LK),dr(al))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const zK=["*"];let KK=(()=>{class t{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),qK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const WK={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},GK=new Qn("override-default-config"),$K="modal-open",XK="show";let QK=(()=>{class t{constructor(t,e,n){this._element=e,this._renderer=n,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,Kz()?"in":XK)},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,$K),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(this.bsModalService?.setDismissReason("backdrop-click"),this.hide())}onPopState(){this.bsModalService?.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){this.isShown&&(27!==t.keyCode&&"Escape"!==t.key||t.preventDefault(),this.config.keyboard&&this.level===this.bsModalService?.getModalsCount()&&(this.bsModalService?.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){!this.isModalHiding&&this.isShown&&(this.config.closeInterceptor?this.config.closeInterceptor().then(()=>this._hide(),()=>{}):this._hide())}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,Kz()?"in":XK),setTimeout(()=>{this.isShown=!1,document&&document.body&&1===this.bsModalService?.getModalsCount()&&(this._renderer.removeClass(document.body,$K),this._renderer.setStyle(document.body,"overflow-y","")),this.bsModalService?.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return t.\u0275fac=function(e){return new(e||t)(Oo(qK),Oo(Qa),Oo(Ja))},t.\u0275cmp=Kt({type:t,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,e){1&t&&Wo("mousedown",function(t){return e.onClickStarted(t)})("click",function(t){return e.onClickStop(t)})("popstate",function(){return e.onPopState()},!1,fi)("keydown.esc",function(t){return e.onEsc(t)},!1,fi),2&t&&Ro("aria-modal",!0)("aria-labelledby",e.config.ariaLabelledBy)("aria-describedby",e.config.ariaDescribedby)},ngContentSelectors:zK,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,e){1&t&&(Jo(),Lo(0,"div",0),Lo(1,"div",1),ta(2),Vo(),Vo()),2&t&&ha("modal-dialog"+(e.config.class?" "+e.config.class:""))},directives:[nK],encapsulation:2}),t})(),YK=(()=>{class t{constructor(t,e){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=e}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),Kz()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class{static reflow(t){}static getStyles(t){let e=t.ownerDocument.defaultView;return e&&e.opener||(e=jz),e.getComputedStyle(t)}static stackOverflowConfig(){const t=function(){const t=Wz(),e=Object.keys(t).find(e=>t[e]);return Uz[e]}();return{crossorigin:"bs3"!==t?"anonymous":void 0,integrity:"bs5"===t?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===t?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===t?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===t?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}.reflow(this.element.nativeElement)),this.isShown=!0}}return t.\u0275fac=function(e){return new(e||t)(Oo(Qa),Oo(Ja))},t.\u0275cmp=Kt({type:t,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),ZK=1,JK=(()=>{class t{constructor(t,e,n){this.clf=e,this.modalDefaultOption=n,this.onShow=new Ju,this.onShown=new Ju,this.onHide=new Ju,this.onHidden=new Ju,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=n?Object.assign({},WK,n):WK}show(t,e){this.modalsCount++,this._createLoaders();const n=e?.id||ZK++;return this.config=this.modalDefaultOption?Object.assign({},WK,this.modalDefaultOption,e):Object.assign({},WK,e),this.config.id=n,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){1!==this.modalsCount&&null!=t||(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,e=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&e&&(this._backdropLoader.attach(YK).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){const e=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const i of this.config.providers)e.provide(i);const n=new KK,r=e.provide({provide:qK,useValue:this.config}).provide({provide:KK,useValue:n}).attach(QK).to("body");return n.hide=()=>r.instance?.hide(),n.setClass=t=>{r.instance&&(r.instance.config.class=t)},n.onHidden=new Ju,n.onHide=new Ju,this.copyEvent(e.onBeforeHide,n.onHide),this.copyEvent(e.onHidden,n.onHidden),r.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),r.instance&&(r.instance.level=this.getModalsCount(),n.content=e.getInnerComponent(),n.id=r.instance.config?.id),n}_hideModal(t){if(null!=t){const e=this.loaders.findIndex(e=>e.instance?.config.id===t),n=this.loaders[e];n&&n.hide(t)}else this.loaders.forEach(t=>{t.instance&&t.hide(t.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(document.body,$K),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){document&&(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const e=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),e}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const e=this.loaders.findIndex(e=>e.instance?.config.id===t);e>=0&&(this.loaders.splice(e,1),this.loaders.forEach((t,e)=>{t.instance&&(t.instance.level=e+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,e){t.subscribe(t=>{e.emit(this.lastDismissReason||t)})}}return t.\u0275fac=function(e){return new(e||t)(dr(Za),dr(HK),dr(GK,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();rK.forRoot();let tq=(()=>{class t{static forRoot(){return{ngModule:t,providers:[JK,HK,LK]}}static forChild(){return{ngModule:t,providers:[JK,HK,LK]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[rK]]}),t})();function eq(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(BA){s(BA)}}function a(t){try{u(r.throw(t))}catch(BA){s(BA)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}const nq=["wrapper"],rq=["sourceImage"];function iq(t,e){if(1&t){const t=zo();Lo(0,"img",4,5),Wo("load",function(){return Oe(t),Yo().imageLoadedInView()}),Vo()}if(2&t){const t=Yo();ca("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),No("src",t.safeImgDataUrl,si)}}function sq(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"span",9),Wo("mousedown",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"topleft")})("touchstart",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"topleft")}),jo(2,"span",10),Vo(),Lo(3,"span",11),jo(4,"span",10),Vo(),Lo(5,"span",12),Wo("mousedown",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"topright")})("touchstart",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"topright")}),jo(6,"span",10),Vo(),Lo(7,"span",13),jo(8,"span",10),Vo(),Lo(9,"span",14),Wo("mousedown",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"bottomright")})("touchstart",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"bottomright")}),jo(10,"span",10),Vo(),Lo(11,"span",15),jo(12,"span",10),Vo(),Lo(13,"span",16),Wo("mousedown",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"bottomleft")})("touchstart",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"bottomleft")}),jo(14,"span",10),Vo(),Lo(15,"span",17),jo(16,"span",10),Vo(),Lo(17,"span",18),Wo("mousedown",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"top")})("touchstart",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"top")}),Vo(),Lo(18,"span",19),Wo("mousedown",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"right")})("touchstart",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"right")}),Vo(),Lo(19,"span",20),Wo("mousedown",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"bottom")})("touchstart",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"bottom")}),Vo(),Lo(20,"span",21),Wo("mousedown",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"left")})("touchstart",function(e){Oe(t);const n=Yo(2);return n.startMove(e,n.moveTypes.Resize,"left")}),Vo(),Ho()}}function oq(t,e){if(1&t){const t=zo();Lo(0,"div",6),Wo("keydown",function(e){return Oe(t),Yo().keyboardAccess(e)}),Lo(1,"div",7),Wo("mousedown",function(e){Oe(t);const n=Yo();return n.startMove(e,n.moveTypes.Move)})("touchstart",function(e){Oe(t);const n=Yo();return n.startMove(e,n.moveTypes.Move)}),Vo(),Fo(2,sq,21,0,"ng-container",8),Vo()}if(2&t){const t=Yo();ca("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),la("ngx-ic-round",t.roundCropper),rs(2),No("ngIf",!t.hideResizeSquares)}}class aq{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=void 0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(t){Object.keys(t).filter(t=>t in this).forEach(e=>this[e]=t[e]),this.validateOptions()}setOptionsFromChanges(t){Object.keys(t).filter(t=>t in this).forEach(e=>this[e]=t[e].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}const uq={Move:"move",Resize:"resize",Pinch:"pinch"};let cq=(()=>{class t{crop(t,e,n,r){const i=this.getImagePosition(t,e,n,r),s=i.x2-i.x1,o=i.y2-i.y1,a=document.createElement("canvas");a.width=s,a.height=o;const u=a.getContext("2d");if(!u)return;null!=r.backgroundColor&&(u.fillStyle=r.backgroundColor,u.fillRect(0,0,s,o));const c=(r.transform.scale||1)*(r.transform.flipH?-1:1),l=(r.transform.scale||1)*(r.transform.flipV?-1:1),h=e.transformed;u.setTransform(c,0,0,l,h.size.width/2,h.size.height/2),u.translate(-i.x1/c,-i.y1/l),u.rotate((r.transform.rotate||0)*Math.PI/180),u.drawImage(h.image,-h.size.width/2,-h.size.height/2);const p={width:s,height:o,imagePosition:i,cropperPosition:Object.assign({},n)};r.containWithinAspectRatio&&(p.offsetImagePosition=this.getOffsetImagePosition(t,e,n,r));const f=this.getResizeRatio(s,o,r);return 1!==f&&(p.width=Math.round(s*f),p.height=r.maintainAspectRatio?Math.round(p.width/r.aspectRatio):Math.round(o*f),function(t,e,n){const r=t.width,i=t.height,s=r/(e=Math.round(e)),o=i/(n=Math.round(n)),a=Math.ceil(s/2),u=Math.ceil(o/2),c=t.getContext("2d");if(c){const l=c.getImageData(0,0,r,i),h=c.createImageData(e,n),p=l.data,f=h.data;for(let t=0;t<n;t++)for(let n=0;n<e;n++){const c=4*(n+t*e),l=t*o;let h=0,d=0,m=0,g=0,v=0,y=0,b=0;const w=Math.floor(n*s),x=Math.floor(t*o);let E=Math.ceil((n+1)*s),_=Math.ceil((t+1)*o);E=Math.min(E,r),_=Math.min(_,i);for(let t=x;t<_;t++){const e=Math.abs(l-t)/u,i=n*s,o=e*e;for(let n=w;n<E;n++){const e=Math.abs(i-n)/a,s=Math.sqrt(o+e*e);if(s>=1)continue;h=2*s*s*s-3*s*s+1;const u=4*(n+t*r);b+=h*p[u+3],m+=h,p[u+3]<255&&(h=h*p[u+3]/250),g+=h*p[u],v+=h*p[u+1],y+=h*p[u+2],d+=h}}f[c]=g/d,f[c+1]=v/d,f[c+2]=y/d,f[c+3]=b/m}t.width=e,t.height=n,c.putImageData(h,0,0)}}(a,p.width,p.height)),p.base64=a.toDataURL("image/"+r.format,this.getQuality(r)),p}getImagePosition(t,e,n,r){const i=e.transformed.size.width/t.nativeElement.offsetWidth,s={x1:Math.round(n.x1*i),y1:Math.round(n.y1*i),x2:Math.round(n.x2*i),y2:Math.round(n.y2*i)};return r.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,e.transformed.size.width),s.y2=Math.min(s.y2,e.transformed.size.height)),s}getOffsetImagePosition(t,e,n,r){const i=e.transformed.size.width/t.nativeElement.offsetWidth;let s,o;(r.canvasRotation+e.exifTransform.rotate)%2?(s=(e.transformed.size.width-e.original.size.height)/2,o=(e.transformed.size.height-e.original.size.width)/2):(s=(e.transformed.size.width-e.original.size.width)/2,o=(e.transformed.size.height-e.original.size.height)/2);const a={x1:Math.round(n.x1*i)-s,y1:Math.round(n.y1*i)-o,x2:Math.round(n.x2*i)-s,y2:Math.round(n.y2*i)-o};return r.containWithinAspectRatio||(a.x1=Math.max(a.x1,0),a.y1=Math.max(a.y1,0),a.x2=Math.min(a.x2,e.transformed.size.width),a.y2=Math.min(a.y2,e.transformed.size.height)),a}getResizeRatio(t,e,n){const r=n.resizeToWidth/t,i=n.resizeToHeight/e,s=new Array;n.resizeToWidth>0&&s.push(r),n.resizeToHeight>0&&s.push(i);const o=0===s.length?1:Math.min(...s);return o>1&&!n.onlyScaleDown?o:Math.min(o,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})(),lq=(()=>{class t{resetCropperPosition(t,e,n){if(!(null==t?void 0:t.nativeElement))return;const r=t.nativeElement;if(n.cropperStaticHeight&&n.cropperStaticWidth)e.x1=0,e.x2=r.offsetWidth>n.cropperStaticWidth?n.cropperStaticWidth:r.offsetWidth,e.y1=0,e.y2=r.offsetHeight>n.cropperStaticHeight?n.cropperStaticHeight:r.offsetHeight;else{const t=Math.min(n.cropperScaledMaxWidth,r.offsetWidth),i=Math.min(n.cropperScaledMaxHeight,r.offsetHeight);if(n.maintainAspectRatio)if(r.offsetWidth/n.aspectRatio<r.offsetHeight){e.x1=0,e.x2=t;const i=t/n.aspectRatio;e.y1=(r.offsetHeight-i)/2,e.y2=e.y1+i}else{e.y1=0,e.y2=i;const t=i*n.aspectRatio;e.x1=(r.offsetWidth-t)/2,e.x2=e.x1+t}else e.x1=0,e.x2=t,e.y1=0,e.y2=i}}move(t,e,n){const r=this.getClientX(t)-e.clientX,i=this.getClientY(t)-e.clientY;n.x1=e.x1+r,n.y1=e.y1+i,n.x2=e.x2+r,n.y2=e.y2+i}resize(t,e,n,r,i){const s=this.getClientX(t)-e.clientX,o=this.getClientY(t)-e.clientY;switch(e.position){case"left":n.x1=Math.min(Math.max(e.x1+s,n.x2-i.cropperScaledMaxWidth),n.x2-i.cropperScaledMinWidth);break;case"topleft":n.x1=Math.min(Math.max(e.x1+s,n.x2-i.cropperScaledMaxWidth),n.x2-i.cropperScaledMinWidth),n.y1=Math.min(Math.max(e.y1+o,n.y2-i.cropperScaledMaxHeight),n.y2-i.cropperScaledMinHeight);break;case"top":n.y1=Math.min(Math.max(e.y1+o,n.y2-i.cropperScaledMaxHeight),n.y2-i.cropperScaledMinHeight);break;case"topright":n.x2=Math.max(Math.min(e.x2+s,n.x1+i.cropperScaledMaxWidth),n.x1+i.cropperScaledMinWidth),n.y1=Math.min(Math.max(e.y1+o,n.y2-i.cropperScaledMaxHeight),n.y2-i.cropperScaledMinHeight);break;case"right":n.x2=Math.max(Math.min(e.x2+s,n.x1+i.cropperScaledMaxWidth),n.x1+i.cropperScaledMinWidth);break;case"bottomright":n.x2=Math.max(Math.min(e.x2+s,n.x1+i.cropperScaledMaxWidth),n.x1+i.cropperScaledMinWidth),n.y2=Math.max(Math.min(e.y2+o,n.y1+i.cropperScaledMaxHeight),n.y1+i.cropperScaledMinHeight);break;case"bottom":n.y2=Math.max(Math.min(e.y2+o,n.y1+i.cropperScaledMaxHeight),n.y1+i.cropperScaledMinHeight);break;case"bottomleft":n.x1=Math.min(Math.max(e.x1+s,n.x2-i.cropperScaledMaxWidth),n.x2-i.cropperScaledMinWidth),n.y2=Math.max(Math.min(e.y2+o,n.y1+i.cropperScaledMaxHeight),n.y1+i.cropperScaledMinHeight);break;case"center":const a=t.scale,u=Math.min(Math.max(i.cropperScaledMinWidth,Math.abs(e.x2-e.x1)*a),i.cropperScaledMaxWidth),c=Math.min(Math.max(i.cropperScaledMinHeight,Math.abs(e.y2-e.y1)*a),i.cropperScaledMaxHeight);n.x1=e.clientX-u/2,n.x2=e.clientX+u/2,n.y1=e.clientY-c/2,n.y2=e.clientY+c/2,n.x1<0?(n.x2-=n.x1,n.x1=0):n.x2>r.width&&(n.x1-=n.x2-r.width,n.x2=r.width),n.y1<0?(n.y2-=n.y1,n.y1=0):n.y2>r.height&&(n.y1-=n.y2-r.height,n.y2=r.height)}i.maintainAspectRatio&&this.checkAspectRatio(e.position,n,r,i)}checkAspectRatio(t,e,n,r){let i=0,s=0;switch(t){case"top":e.x2=e.x1+(e.y2-e.y1)*r.aspectRatio,i=Math.max(e.x2-n.width,0),s=Math.max(0-e.y1,0),(i>0||s>0)&&(e.x2-=s*r.aspectRatio>i?s*r.aspectRatio:i,e.y1+=s*r.aspectRatio>i?s:i/r.aspectRatio);break;case"bottom":e.x2=e.x1+(e.y2-e.y1)*r.aspectRatio,i=Math.max(e.x2-n.width,0),s=Math.max(e.y2-n.height,0),(i>0||s>0)&&(e.x2-=s*r.aspectRatio>i?s*r.aspectRatio:i,e.y2-=s*r.aspectRatio>i?s:i/r.aspectRatio);break;case"topleft":e.y1=e.y2-(e.x2-e.x1)/r.aspectRatio,i=Math.max(0-e.x1,0),s=Math.max(0-e.y1,0),(i>0||s>0)&&(e.x1+=s*r.aspectRatio>i?s*r.aspectRatio:i,e.y1+=s*r.aspectRatio>i?s:i/r.aspectRatio);break;case"topright":e.y1=e.y2-(e.x2-e.x1)/r.aspectRatio,i=Math.max(e.x2-n.width,0),s=Math.max(0-e.y1,0),(i>0||s>0)&&(e.x2-=s*r.aspectRatio>i?s*r.aspectRatio:i,e.y1+=s*r.aspectRatio>i?s:i/r.aspectRatio);break;case"right":case"bottomright":e.y2=e.y1+(e.x2-e.x1)/r.aspectRatio,i=Math.max(e.x2-n.width,0),s=Math.max(e.y2-n.height,0),(i>0||s>0)&&(e.x2-=s*r.aspectRatio>i?s*r.aspectRatio:i,e.y2-=s*r.aspectRatio>i?s:i/r.aspectRatio);break;case"left":case"bottomleft":e.y2=e.y1+(e.x2-e.x1)/r.aspectRatio,i=Math.max(0-e.x1,0),s=Math.max(e.y2-n.height,0),(i>0||s>0)&&(e.x1+=s*r.aspectRatio>i?s*r.aspectRatio:i,e.y2-=s*r.aspectRatio>i?s:i/r.aspectRatio);break;case"center":e.x2=e.x1+(e.y2-e.y1)*r.aspectRatio,e.y2=e.y1+(e.x2-e.x1)/r.aspectRatio;const t=Math.max(0-e.x1,0),o=Math.max(e.x2-n.width,0),a=Math.max(e.y2-n.height,0),u=Math.max(0-e.y1,0);(t>0||o>0||a>0||u>0)&&(e.x1+=a*r.aspectRatio>t?a*r.aspectRatio:t,e.x2-=u*r.aspectRatio>o?u*r.aspectRatio:o,e.y1+=u*r.aspectRatio>o?u:o/r.aspectRatio,e.y2-=a*r.aspectRatio>t?a:t/r.aspectRatio)}}getClientX(t){var e;return(null===(e=t.touches)||void 0===e?void 0:e[0].clientX)||t.clientX||0}getClientY(t){var e;return(null===(e=t.touches)||void 0===e?void 0:e[0].clientY)||t.clientY||0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})(),hq=(()=>{class t{constructor(){this.autoRotateSupported=new Promise(t=>{const e=new Image;e.onload=()=>{t(1===e.width&&2===e.height)},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}loadImageFile(t,e){return new Promise((n,r)=>{const i=new FileReader;i.onload=i=>{this.loadImage(i.target.result,t.type,e).then(n).catch(r)},i.readAsDataURL(t)})}loadImage(t,e,n){return this.isValidImageType(e)?this.loadBase64Image(t,n):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(t)}loadImageFromURL(t,e){return new Promise((n,r)=>{const i=new Image;i.onerror=()=>r,i.onload=()=>{const t=document.createElement("canvas"),r=t.getContext("2d");t.width=i.width,t.height=i.height,r.drawImage(i,0,0),this.loadBase64Image(t.toDataURL(),e).then(n)},i.crossOrigin="anonymous",i.src=t})}loadBase64Image(t,e){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e({originalImage:r,originalBase64:t}),r.onerror=n,r.src=t}).then(t=>this.transformImageBase64(t,e))}transformImageBase64(t,e){return eq(this,void 0,void 0,function*(){const n=yield this.autoRotateSupported,r=yield function(t){switch("string"==typeof t&&(t=function(t){const e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r.buffer}(t));if(65496!==e.getUint16(0,!1))return-2;const n=e.byteLength;let r=2;for(;r<n;){if(e.getUint16(r+2,!1)<=8)return-1;const t=e.getUint16(r,!1);if(r+=2,65505==t){if(1165519206!==e.getUint32(r+=2,!1))return-1;const t=18761==e.getUint16(r+=6,!1);r+=e.getUint32(r+4,t);const n=e.getUint16(r,t);r+=2;for(let i=0;i<n;i++)if(274==e.getUint16(r+12*i,t))return e.getUint16(r+12*i+8,t)}else{if(65280!=(65280&t))break;r+=e.getUint16(r,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(n?-1:t.originalBase64);return t.originalImage&&t.originalImage.complete?this.transformLoadedImage({original:{base64:t.originalBase64,image:t.originalImage,size:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:r},e):Promise.reject(new Error("No image loaded"))})}transformLoadedImage(t,e){return eq(this,void 0,void 0,function*(){const n=e.canvasRotation+t.exifTransform.rotate,r={width:t.original.image.naturalWidth,height:t.original.image.naturalHeight};if(0===n&&!t.exifTransform.flip&&!e.containWithinAspectRatio)return{original:{base64:t.original.base64,image:t.original.image,size:Object.assign({},r)},transformed:{base64:t.original.base64,image:t.original.image,size:Object.assign({},r)},exifTransform:t.exifTransform};const i=this.getTransformedSize(r,t.exifTransform,e),s=document.createElement("canvas");s.width=i.width,s.height=i.height;const o=s.getContext("2d");o.setTransform(t.exifTransform.flip?-1:1,0,0,1,s.width/2,s.height/2),o.rotate(Math.PI*(n/2)),o.drawImage(t.original.image,-r.width/2,-r.height/2);const a=s.toDataURL(),u=yield this.loadImageFromBase64(a);return{original:{base64:t.original.base64,image:t.original.image,size:Object.assign({},r)},transformed:{base64:a,image:u,size:{width:u.width,height:u.height}},exifTransform:t.exifTransform}})}loadImageFromBase64(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=n,r.src=t})}getTransformedSize(t,e,n){const r=n.canvasRotation+e.rotate;if(n.containWithinAspectRatio){if(r%2){const e=t.height/n.aspectRatio;return{width:Math.max(t.height,t.width*n.aspectRatio),height:Math.max(t.width,e)}}{const e=t.width/n.aspectRatio;return{width:Math.max(t.width,t.height*n.aspectRatio),height:Math.max(t.height,e)}}}return r%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})(),pq=(()=>{class t{constructor(t,e,n,r,i){this.cropService=t,this.cropperPositionService=e,this.loadImageService=n,this.sanitizer=r,this.cd=i,this.Hammer=(null===window||void 0===window?void 0:window.Hammer)||null,this.settings=new aq,this.setImageMaxSizeRetries=0,this.marginLeft="0px",this.moveTypes=uq,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.imageCropped=new Ju,this.startCropImage=new Ju,this.imageLoaded=new Ju,this.cropperReady=new Ju,this.loadImageFailed=new Ju,this.reset()}ngOnChanges(t){var e;this.onChangesUpdateSettings(t),this.onChangesInputImage(t),(null===(e=this.loadedImage)||void 0===e?void 0:e.original.image.complete)&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(t.maintainAspectRatio||t.aspectRatio)?this.resetCropperPosition():t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){var t,e,n;return(null===(n=null===(e=null===(t=this.imageChangedEvent)||void 0===t?void 0:t.target)||void 0===e?void 0:e.files)||void 0===n?void 0:n.length)>0}setCssTransform(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){var t,e;return(null===(e=null===(t=this.sourceImage)||void 0===t?void 0:t.nativeElement)||void 0===e?void 0:e.offsetWidth)>0}onResize(){this.loadedImage&&(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize())}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else tl()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const e=+t.key;e>=1&&e<=9&&(this.settings.stepSize=e)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const e=t.shiftKey?uq.Resize:uq.Move,n=t.altKey?function(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}(t.key):function(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}(t.key),r=function(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,n),this.moveImg(r),this.moveStop()}startMove(t,e,n=null){var r,i;(null===(r=this.moveStart)||void 0===r?void 0:r.active)&&(null===(i=this.moveStart)||void 0===i?void 0:i.type)===uq.Pinch||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:n,clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t)},this.cropper))}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:uq.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===uq.Move?(this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0)):this.moveStart.type===uq.Resize&&(this.cropperStaticWidth||this.cropperStaticHeight||this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===uq.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){var t,e;(null===(e=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)||void 0===e?void 0:e.image)?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){var t,e;if(null===(e=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)||void 0===e?void 0:e.image){const t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){var t,e;if(null!=(null===(e=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)||void 0===e?void 0:e.image)){this.startCropImage.emit();const t=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=t&&this.imageCropped.emit(t),t}return null}}return t.\u0275fac=function(e){return new(e||t)(Oo(cq),Oo(lq),Oo(hq),Oo(Dh),Oo(Eu))},t.\u0275cmp=Kt({type:t,selectors:[["image-cropper"]],viewQuery:function(t,e){if(1&t&&(pc(nq,7),pc(rq,5)),2&t){let t;hc(t=dc())&&(e.wrapper=t.first),hc(t=dc())&&(e.sourceImage=t.first)}},hostVars:4,hostBindings:function(t,e){1&t&&Wo("resize",function(){return e.onResize()},!1,fi)("mousemove",function(t){return e.moveImg(t)},!1,di)("touchmove",function(t){return e.moveImg(t)},!1,di)("mouseup",function(){return e.moveStop()},!1,di)("touchend",function(){return e.moveStop()},!1,di),2&t&&(ca("text-align",e.alignImage),la("disabled",e.disabled))},inputs:{format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[le],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(Lo(0,"div",null,0),Fo(2,iq,2,5,"img",1),jo(3,"div",2),Fo(4,oq,3,15,"div",3),Vo()),2&t&&(ca("background",e.imageVisible&&e.backgroundColor),rs(2),No("ngIf",e.safeImgDataUrl),rs(1),ca("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left","center"===e.alignImage?e.marginLeft:null),rs(1),No("ngIf",e.imageVisible))},directives:[ql],styles:['[_nghost-%COMP%]{display:flex;max-height:100%;max-width:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%], [_nghost-%COMP%] > div[_ngcontent-%COMP%]{position:relative;width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;transform-origin:center}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{left:0;outline:var(--cropper-overlay-color,#fff) solid 100vw;pointer-events:none;position:absolute;top:0;touch-action:none}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{background:transparent;color:#53535c;display:flex;outline:100vw solid hsla(0,0%,100%,.3);outline:var(--cropper-outline-color,hsla(0,0%,100%,.3)) solid 100vw;position:absolute;touch-action:none}@media (orientation:portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{border:1px dashed;bottom:0;color:inherit;content:"";left:0;opacity:.75;pointer-events:none;position:absolute;right:0;top:0;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border:1px solid hsla(0,0%,100%,.5);cursor:move;width:100%}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{display:inline-block;line-height:6px;opacity:.85;padding:8px;position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{background:#53535c;border:1px solid hsla(0,0%,100%,.5);box-sizing:content-box;display:inline-block;height:6px;width:6px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{cursor:nwse-resize;left:-12px;top:-12px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{cursor:ns-resize;left:calc(50% - 12px);top:-12px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{cursor:nesw-resize;right:-12px;top:-12px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{cursor:ew-resize;right:-12px;top:calc(50% - 12px)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;cursor:nwse-resize;right:-12px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;cursor:ns-resize;left:calc(50% - 12px)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;cursor:nesw-resize;left:-12px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{cursor:ew-resize;left:-12px;top:calc(50% - 12px)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{cursor:ns-resize;height:22px;left:11px;top:-11px;width:calc(100% - 22px)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{cursor:ew-resize;height:calc(100% - 22px);right:-11px;top:11px;width:22px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;cursor:ns-resize;height:22px;left:11px;width:calc(100% - 22px)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{cursor:ew-resize;height:calc(100% - 22px);left:-11px;top:11px;width:22px}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw hsla(0,0%,100%,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,hsla(0,0%,100%,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh hsla(0,0%,100%,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,hsla(0,0%,100%,.3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),t})(),fq=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Jl]]}),t})();const dq=["alertModal"];function mq(t,e){1&t&&jo(0,"i",11)}function gq(t,e){1&t&&(Lo(0,"div",12),Ea(1," L\u1ed7i t\u1ea3i trang, Qu\xfd kh\xe1ch vui l\xf2ng th\u1eed l\u1ea1i "),Vo())}function vq(t,e){if(1&t&&(Lo(0,"section",7),Lo(1,"div",8),Fo(2,mq,1,0,"i",9),Fo(3,gq,2,0,"div",10),Vo(),Vo()),2&t){const t=Yo();rs(2),No("ngIf",!t.loadErr),rs(1),No("ngIf",t.loadErr)}}function yq(t,e){if(1&t){const t=zo();Lo(0,"section"),Lo(1,"div",13),Lo(2,"div",8),Ea(3,"H\u01b0\u1edbng d\u1eabn ch\u1ee5p CCCD"),Vo(),Lo(4,"div"),Lo(5,"div",14),Lo(6,"div",15),Lo(7,"div",16),jo(8,"img",17),Vo(),Lo(9,"div",18),Ea(10,"S\u1eed d\u1ee5ng gi\u1ea5y t\u1edd g\u1ed1c, kh\xf4ng scan, kh\xf4ng copy"),Vo(),Vo(),Vo(),Lo(11,"div",14),Lo(12,"div",15),Lo(13,"div",16),jo(14,"img",19),Vo(),Lo(15,"div",18),Ea(16," Ch\u1ee5p \u1ea3nh trong m\xf4i tr\u01b0\u1eddng \xe1nh s\xe1ng t\u1ed1t, tr\xe1nh b\u1ecb m\u1edd, nh\xf2e "),Vo(),Vo(),Vo(),Lo(17,"div",14),Lo(18,"div",15),Lo(19,"div",16),jo(20,"img",20),Vo(),Lo(21,"div",18),Ea(22," \u0110\u1ea3m b\u1ea3o h\xecnh \u1ea3nh r\xf5 n\xe9t v\xe0 n\u1eb1m tr\u1ecdn trong khung h\xecnh "),Vo(),Vo(),Vo(),Vo(),Lo(23,"div",21),Lo(24,"div",22),Ea(25," B\u1eb1ng vi\u1ec7c b\u1ea5m Ti\u1ebfn h\xe0nh ch\u1ee5p, qu\xfd kh\xe1ch \u0111\xe3 \u0111\u1ed3ng \xfd v\u1edbi "),Lo(26,"b"),Ea(27,"\u0110i\u1ec1u kho\u1ea3n v\xe0 \u0110i\u1ec1u ki\u1ec7n s\u1eed d\u1ee5ng"),Vo(),Ea(28," c\u1ee7a Sacombank "),Vo(),Vo(),Lo(29,"div",21),Lo(30,"div",22),Lo(31,"button",23),Wo("click",function(){return Oe(t),Yo().next()}),Ea(32," B\u1eaft \u0111\u1ea7u ch\u1ee5p "),Vo(),Vo(),Vo(),Vo(),Vo()}}function bq(t,e){if(1&t&&(Lo(0,"div",40),jo(1,"img",41),Vo()),2&t){const t=Yo(2);rs(1),No("src",t.front,si)}}function wq(t,e){if(1&t&&(Lo(0,"div",40),jo(1,"img",41),Vo()),2&t){const t=Yo(2);rs(1),No("src",t.back,si)}}function xq(t,e){if(1&t){const t=zo();Lo(0,"section"),Lo(1,"div",24),Lo(2,"span",25),Wo("click",function(){return Oe(t),Yo().previous()}),jo(3,"i",26),Vo(),Ea(4),Vo(),Lo(5,"div",27),Lo(6,"input",28,29),Wo("change",function(e){return Oe(t),Yo().handleInputChange(e)}),Vo(),Fo(8,bq,2,1,"div",30),Fo(9,wq,2,1,"div",30),Vo(),Lo(10,"div",31),Lo(11,"div",15),Lo(12,"div",32),Lo(13,"div",33),Wo("click",function(){Oe(t);const e=Yo(),n=Bo(8);return e.edit(n)}),Lo(14,"div"),Lo(15,"span",34),Ea(16," crop "),Vo(),Vo(),Lo(17,"div",35),Ea(18,"Ch\u1ec9nh s\u1eeda"),Vo(),Vo(),Vo(),Lo(19,"div",36),Wo("click",function(){return Oe(t),Bo(7).click()}),Lo(20,"div",37),jo(21,"i",38),Vo(),Vo(),Lo(22,"div",39),Lo(23,"div",33),Wo("click",function(){return Oe(t),Yo().next()}),Lo(24,"div"),Lo(25,"span",34),Ea(26," shortcut "),Vo(),Vo(),Lo(27,"div",35),Ea(28,"Ti\u1ebfp t\u1ee5c"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&t){const t=Yo();rs(4),Sa(" Ch\u1ee5p m\u1eb7t ",2==t.step?"tr\u01b0\u1edbc":"sau"," CCCD "),rs(4),No("ngIf",t.front&&2==t.step),rs(1),No("ngIf",t.back&&3==t.step)}}function Eq(t,e){1&t&&(Lo(0,"section"),Lo(1,"div",42),Lo(2,"div",43),Lo(3,"div"),jo(4,"img",44),Vo(),Vo(),Lo(5,"div",45),Lo(6,"div",46),Lo(7,"h5"),Lo(8,"b"),Ea(9," T\u1ea3i \u1ea3nh th\xe0nh c\xf4ng!"),Vo(),Vo(),Vo(),Lo(10,"div",47),Ea(11," Qu\xfd kh\xe1ch vui l\xf2ng ti\u1ebfp t\u1ee5c tr\xean thi\u1ebft b\u1ecb c\u1ee7a Sacombank, ch\xe2n th\xe0nh c\u1ea3m \u01a1n Qu\xfd kh\xe1ch "),Vo(),Vo(),Vo(),Vo())}function _q(t,e){if(1&t){const t=zo();Lo(0,"div",48),Lo(1,"div",49),Lo(2,"image-cropper",50),Wo("imageCropped",function(e){return Oe(t),Yo().imageCropped(e)})("imageLoaded",function(e){return Oe(t),Yo().imageLoaded(e)})("cropperReady",function(){return Oe(t),Yo().cropperReady()})("loadImageFailed",function(){return Oe(t),Yo().loadImageFailed()}),Vo(),Vo(),Lo(3,"div",51),Lo(4,"div",52),Wo("click",function(){Oe(t);const e=Yo(),n=Bo(10);return e.discard(n)}),Lo(5,"div"),Lo(6,"span",34),Ea(7," highlight_off "),Vo(),Vo(),Lo(8,"div"),Ea(9,"H\u1ee7y"),Vo(),Vo(),Lo(10,"div",52),Wo("click",function(){return Oe(t),Yo().rotateLeft()}),Lo(11,"div"),Lo(12,"span",34),Ea(13," rotate_left "),Vo(),Vo(),Lo(14,"div"),Ea(15,"L\u1eadt tr\xe1i"),Vo(),Vo(),Lo(16,"div",52),Wo("click",function(){return Oe(t),Yo().resetImg()}),Lo(17,"div"),Lo(18,"span",34),Ea(19," sync "),Vo(),Vo(),Lo(20,"div"),Ea(21,"\u0110\u1eb7t l\u1ea1i"),Vo(),Vo(),Lo(22,"div",52),Wo("click",function(){return Oe(t),Yo().done()}),Lo(23,"div"),Lo(24,"span",34),Ea(25," check_circle_outline "),Vo(),Vo(),Lo(26,"div"),Ea(27,"Xong"),Vo(),Vo(),Vo(),Vo()}if(2&t){const t=Yo();rs(2),No("imageBase64",t.getBase64ToEdit())("maintainAspectRatio",!1)("canvasRotation",t.canvasRotation)}}function Sq(t,e){if(1&t){const t=zo();Lo(0,"div",53),Ea(1," B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y b\u1ecf c\xe1c thay \u0111\u1ed5i kh\xf4ng? "),Lo(2,"div",54),Lo(3,"div",55),Lo(4,"button",56),Wo("click",function(){return Oe(t),Yo().closeModal(2)}),Ea(5," Kh\xf4ng "),Vo(),Vo(),Lo(6,"div",57),Lo(7,"button",23),Wo("click",function(){return Oe(t),Yo().closeModal()}),Ea(8," C\xf3 "),Vo(),Vo(),Vo(),Vo()}}function Cq(t,e){if(1&t&&(Lo(0,"div",53),Lo(1,"div",58),jo(2,"i",59),Ea(3),Vo(),Vo()),2&t){const t=Yo();rs(3),Sa(" ",t.alertMsg," ")}}let Aq=(()=>{class t{constructor(t,e,n){this.actRoute=t,this.aioSvc=e,this.modalService=n,this.step=0,this.deviceID="",this.sessionID="",this.front="",this.back="",this.imageChangedEvent="",this.croppedImage="",this.hasChange=!1,this.canvasRotation=0,this.cropTimes=0,this.alertMsg="",this.loadErr=!1,this.deviceID=this.actRoute.snapshot.params.deviceid,this.sessionID=this.actRoute.snapshot.params.sessionid}ngOnInit(){this.aioSvc.verifySessionID(this.deviceID,this.sessionID).subscribe(t=>{"00"==t.respCode?(this.step++,this.aioSvc.isProcessing=!1):(this.loadErr=!0,this.alert("C\xf3 l\u1ed7i x\u1ea3y ra verifySessionID"),this.aioSvc.isProcessing=!1),console.log(t)},t=>{this.loadErr=!0,this.alert("C\xf3 l\u1ed7i x\u1ea3y ra verifySessionID"),this.aioSvc.isProcessing=!1})}imageCropped(t){this.hasChange=0!=this.cropTimes,this.croppedImage=t.base64,this.cropTimes++}imageLoaded(t){}cropperReady(){}loadImageFailed(){}resetImg(){this.canvasRotation=0,this.cropTimes=0,this.hasChange=!1}done(){2==this.step?this.front=this.croppedImage:this.back=this.croppedImage,this.canvasRotation=0,this.hasChange=!1,this.closeModal()}getBase64ToEdit(){return 2==this.step?this.front:this.back}handleInputChange(t){var e=t.dataTransfer?t.dataTransfer.files[0]:t.target.files[0];if(e){var n=new FileReader;if(!e.type.match(/image-*/))return void alert("invalid format");n.onload=this._handleReaderLoaded.bind(this),n.readAsDataURL(e)}}_handleReaderLoaded(t){let e=t.target;2==this.step&&(this.front=e.result),3==this.step&&(this.back=e.result),console.log(e.result)}edit(t){if(""!=this.front&&2==this.step)this.modalRef=this.modalService.show(t,{id:1}),this.modalRef.setClass("full-screen-modal");else{if(""==this.back||3!=this.step)return;this.modalRef=this.modalService.show(t,{id:1}),this.modalRef.setClass("full-screen-modal")}}discard(t){this.hasChange?(this.modalRef2=this.modalService.show(t,{id:2}),this.modalRef2.setClass("confirm-discard-modal")):this.closeModal()}closeModal(t){this.modalService.hide(t),t||(this.hasChange=!1)}rotateLeft(){this.canvasRotation--,this.hasChange=!0}next(){switch(this.step){case 1:this.step++;break;case 2:this.front?this.step++:this.alert("Qu\xfd kh\xe1ch vui l\xf2ng cung c\u1ea5p \u1ea3nh m\u1eb7t tr\u01b0\u1edbc CCCD ");break;case 3:this.back?(this.aioSvc.uploadImage(this.front,"front",this.deviceID,this.sessionID).subscribe(t=>{if("00"!=t.respCode)return this.alert("C\xf3 l\u1ed7i x\u1ea3y ra uploadImage-Front"),void(this.aioSvc.isProcessing=!1);console.log("Upload front",t),this.aioSvc.uploadImage(this.back,"back",this.deviceID,this.sessionID).subscribe(t=>{if("00"!=t.respCode)return this.alert("C\xf3 l\u1ed7i x\u1ea3y ra uploadImage-back"),void(this.aioSvc.isProcessing=!1);console.log("Upload back",t),this.aioSvc.isProcessing=!1,this.step++},t=>{this.alert("C\xf3 l\u1ed7i x\u1ea3y ra uploadImage-back"),console.log(t),this.aioSvc.isProcessing=!1})},t=>{this.alert("C\xf3 l\u1ed7i x\u1ea3y ra uploadImage-Front"),console.log(t),this.aioSvc.isProcessing=!1}),console.log("Front: ",this.front),console.log("Back: ",this.back)):this.alert("Qu\xfd kh\xe1ch vui l\xf2ng cung c\u1ea5p \u1ea3nh m\u1eb7t sau CCCD ")}}previous(){this.step--}alert(t){this.alertMsg=t,this.alertModalRef=this.modalService.show(this.alertModal)}}return t.\u0275fac=function(e){return new(e||t)(Oo(Uf),Oo(kS),Oo(JK))},t.\u0275cmp=Kt({type:t,selectors:[["app-mobile-capture-card-id"]],viewQuery:function(t,e){if(1&t&&pc(dq,5),2&t){let t;hc(t=dc())&&(e.alertModal=t.first)}},decls:13,vars:4,consts:[[1,"text-center","bg-white","py-3"],["src","assets/all-in-one/shared/img/logo.png","alt","",1,"img","img-fluid","w-50"],["class","pt-5 text-sacom",4,"ngIf"],[4,"ngIf"],["editModal",""],["discardModal",""],["alertModal",""],[1,"pt-5","text-sacom"],[1,"text-center"],["class","fas fa-spinner fa-pulse fa-3x",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"fas","fa-spinner","fa-pulse","fa-3x"],[1,"text-danger"],[1,"container","pt-3"],[1,"item"],[1,"row"],[1,"col-2","pr-0"],["src","https://cdn-icons-png.flaticon.com/512/2633/2633848.png","alt","",1,"img","img-fluid"],[1,"col-10"],["src","https://cdn-icons-png.flaticon.com/512/436/436303.png","alt","",1,"img","img-fluid"],["src","https://cdn-icons-png.flaticon.com/512/3940/3940205.png","alt","",1,"img","img-fluid"],[1,"row","mt-3"],[1,"col-12"],[1,"btn","btn-primary","w-100",3,"click"],[1,"container","pt-3","text-center"],[1,"float-left",3,"click"],[1,"fa-solid","fa-chevron-left"],[1,"p-3","text-center"],["type","file","accept","image/*",1,"d-none",3,"change"],["uploadImg",""],["class","image-uploaded",4,"ngIf"],[1,"footer","p-3"],[1,"col"],[1,"text-center","nav-btn",3,"click"],[1,"material-icons"],[1,"nav-text"],[1,"col","text-center","position-relative",3,"click"],[1,"position-absolute","capture-btn"],[1,"fa","fa-camera"],[1,"col","text-right"],[1,"image-uploaded"],[3,"src"],[1,"container","text-center"],[1,"p-4"],["src","https://cdn-icons-png.flaticon.com/512/3032/3032885.png","alt","",1,"img","img-fluid","w-50"],[1,"text-sacom"],[1,"mb-2"],[1,"font-weight-light"],[1,"modal-body","position-relative","p-0","edit-modal"],[1,"p-3","edit-box"],["format","jpeg",3,"imageBase64","maintainAspectRatio","canvasRotation","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"nav-edit","text-center"],[1,"w-25","d-inline-block",3,"click"],[1,"modal-body"],[1,"mt-3"],[1,"w-50","pr-2","d-inline-block"],[1,"btn","btn-secondary","w-100",3,"click"],[1,"w-50","pl-2","d-inline-block"],[1,"text-danger","text-center"],[1,"fa-solid","fa-circle-exclamation"]],template:function(t,e){1&t&&(Lo(0,"div",0),jo(1,"img",1),Vo(),Fo(2,vq,4,2,"section",2),Fo(3,yq,33,0,"section",3),Fo(4,xq,29,3,"section",3),Fo(5,Eq,12,0,"section",3),Lo(6,"section"),Fo(7,_q,28,3,"ng-template",null,4,yc),Fo(9,Sq,9,0,"ng-template",null,5,yc),Fo(11,Cq,4,1,"ng-template",null,6,yc),Vo()),2&t&&(rs(2),No("ngIf",0==e.step),rs(1),No("ngIf",1==e.step),rs(1),No("ngIf",2==e.step||3==e.step),rs(1),No("ngIf",4==e.step))},directives:[ql,pq],styles:[".item[_ngcontent-%COMP%]{padding:15px;background-color:#fff;border-radius:10px;margin-top:15px}section[_ngcontent-%COMP%]{position:relative}.footer[_ngcontent-%COMP%]{position:fixed;bottom:0;text-align:center;width:100%;background:#fff}.capture-btn[_ngcontent-%COMP%]{width:80px;height:80px;background:radial-gradient(#1b54c3,#2685f1)!important;border-radius:100px;line-height:80px;left:50%;transform:translateX(-50%);top:-30px;color:#fff;font-size:1.7rem}.nav-text[_ngcontent-%COMP%]{font-size:.8rem}.nav-btn[_ngcontent-%COMP%], .nav-edit[_ngcontent-%COMP%]{color:#1b54c3}.nav-edit[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:0;padding:20px 0}.btn-primary[_ngcontent-%COMP%]{background-color:#1b54c3!important}.btn-secondary[_ngcontent-%COMP%]{background-color:#fff!important;color:#1b54c3;border:1px solid #1b54c3!important}.image-uploaded[_ngcontent-%COMP%]{height:50vh}.image-uploaded[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.edit-box[_ngcontent-%COMP%]{height:50vh}.text-sacom[_ngcontent-%COMP%]{color:#1b54c3!important;line-height:2rem}"]}),t})(),Iq=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Kt({type:t,selectors:[["app-shared"]],decls:1,vars:0,template:function(t,e){1&t&&jo(0,"router-outlet")},directives:[pm],styles:[""]}),t})(),Tq=(()=>{class t{constructor(t,e){this.aioSvc=t,this.dialog=e,this.face="",t.currentStep=Tg.VerifyCustomerInfo}ngOnInit(){console.log("verify: ",this.aioSvc.customerInfo),this.checkCustomerByIdNo(this.randomId(12))}randomId(t){for(var e="",n="0123456789",r=n.length,i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}checkCustomerByIdNo(t){console.log(this.aioSvc.customerInfo),this.aioSvc.checkCustomerByIdNo(t).subscribe(t=>{this.aioSvc.isProcessing=!1,"14"==t.respCode?this.face=this.aioSvc.faceCaptured:this.aioSvc.alert("00"==t.respCode?"Qu\xfd kh\xe1ch \u0111\xe3 c\xf3 t\xe0i kho\u1ea3n t\u1ea1i Sacombank <br> Xin c\u1ea3m \u01a1n Qu\xfd kh\xe1ch \u0111\xe3 quan t\xe2m d\u1ecbch v\u1ee5":"C\xf3 l\u1ed7i x\u1ea3y ra checkCustomerByIdNo"),console.log(t)},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra checkCustomerByIdNo"),this.aioSvc.isProcessing=!1,console.log(t)})}confirm(){this.aioSvc.next()}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS),Oo(yE))},t.\u0275cmp=Kt({type:t,selectors:[["app-verify-customer-info"]],decls:53,vars:10,consts:[[3,"currentStep"],[1,"container"],[1,"row","pb-3"],[1,"col-6","p-0"],[1,"font-weight-bold","mb-2"],[1,"col-6","img-info","text-right","p-0"],["alt","",3,"src"],["alt","",1,"ml-3",3,"src"],[1,"row","p-3","bg-white","box"],[1,"col-6","left"],[1,"font-weight-bold"],[1,"col-6"],[1,"text-center","pt-5"],[1,"btn-next",3,"click"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Lo(2,"section"),Lo(3,"div",1),Lo(4,"div",2),Lo(5,"div",3),Lo(6,"h3",4),Ea(7,"X\xe1c nh\u1eadn th\xf4ng tin"),Vo(),Ea(8," Qu\xfd kh\xe1ch ki\u1ec3m tra l\u1ea1i th\xf4ng tin v\xe0 nh\u1eadp c\xe1c th\xf4ng tin c\xf2n thi\u1ebfu "),Vo(),Lo(9,"div",5),jo(10,"img",6),jo(11,"img",7),jo(12,"img",7),Vo(),Vo(),Lo(13,"div",8),Lo(14,"div",9),Lo(15,"div"),Lo(16,"table"),Lo(17,"tr"),Lo(18,"td"),Ea(19,"H\u1ecd v\xe0 t\xean"),Vo(),Lo(20,"td",10),Ea(21),Vo(),Vo(),Lo(22,"tr"),Lo(23,"td"),Ea(24,"Gi\u1edbi t\xednh"),Vo(),Lo(25,"td",10),Ea(26),Vo(),Vo(),Lo(27,"tr"),Lo(28,"td"),Ea(29,"Ng\xe0y sinh"),Vo(),Lo(30,"td",10),Ea(31),Vo(),Vo(),Vo(),Vo(),Vo(),Lo(32,"div",11),Lo(33,"div"),Lo(34,"table"),Lo(35,"tr"),Lo(36,"td"),Ea(37,"S\u1ed1 CCCD"),Vo(),Lo(38,"td",10),Ea(39),Vo(),Vo(),Lo(40,"tr"),Lo(41,"td"),Ea(42,"Ng\xe0y c\u1ea5p"),Vo(),Lo(43,"td",10),Ea(44),Vo(),Vo(),Lo(45,"tr"),Lo(46,"td"),Ea(47,"\u0110\u1ecba ch\u1ec9 th\u01b0\u1eddng tr\xfa"),Vo(),Lo(48,"td",10),Ea(49),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Lo(50,"div",12),Lo(51,"button",13),Wo("click",function(){return e.confirm()}),Ea(52,"X\xe1c nh\u1eadn"),Vo(),Vo(),Vo(),Vo()),2&t&&(rs(1),No("currentStep",3),rs(9),No("src",e.face,si),rs(1),No("src",e.aioSvc.frontCardId,si),rs(1),No("src",e.aioSvc.backCardId,si),rs(9),Sa(" ",e.aioSvc.customerInfo.fullName," "),rs(5),_a(e.aioSvc.customerInfo.gender),rs(5),_a(e.aioSvc.customerInfo.dob),rs(8),Sa(" ",e.aioSvc.customerInfo.customerID," "),rs(5),Sa(" ",e.aioSvc.customerInfo.issueDate," "),rs(5),Sa(" ",e.aioSvc.customerInfo.address," "))},directives:[jS,iA],styles:[".box[_ngcontent-%COMP%]{border-radius:1rem}.box[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem}mat-checkbox[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], mat-option[_ngcontent-%COMP%]{font-family:Manrope,sans-serif!important}.fill-table[_ngcontent-%COMP%], .fill-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%}.fill-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 1rem}.col-12[_ngcontent-%COMP%]{border-top:2px solid #f0f2f7}.left[_ngcontent-%COMP%]{border-right:2px solid #f0f2f7}.fill-input[_ngcontent-%COMP%]{max-width:100%;height:60px;border:none;border-bottom:2px solid #f0f2f7;line-height:60px;color:#7c828b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.my-class[_ngcontent-%COMP%]{background-color:red!important}.btn-next[_ngcontent-%COMP%]{width:200px;height:60px;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#fff;background-color:#2a81d0;font-size:1.2rem}.btn-next[_ngcontent-%COMP%]:hover{background-color:#1966af}.btn-next[_ngcontent-%COMP%]:disabled:hover{background-color:#2a81d0}.btn-next[_ngcontent-%COMP%]:disabled{opacity:.5}.img-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100px;border-radius:1rem}"]}),t})();const kq=function(t){return{active:t}};function Pq(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"div",6),jo(2,"img",7),Vo(),Lo(3,"div",8),jo(4,"div",9),Lo(5,"div",10),Lo(6,"div",11),Wo("click",function(){Oe(t);const e=Yo(2);return e.selectAuthType(e.authType.SmartOTP)}),Lo(7,"div",12),Lo(8,"span",13),Ea(9,"Sacombank Smart OTP"),Vo(),Vo(),Vo(),Vo(),Lo(10,"div",10),Lo(11,"div",11),Wo("click",function(){Oe(t);const e=Yo(2);return e.selectAuthType(e.authType.SmartOTPCode)}),Lo(12,"div",12),Lo(13,"span",13),Ea(14,"Smart OTP Code"),Vo(),Vo(),Vo(),Vo(),jo(15,"div",9),Vo(),Ho()}if(2&t){const t=Yo(2);rs(6),No("ngClass",Xu(4,kq,t.currentAuthType==t.authType.SmartOTP)),rs(2),No("ngClass",Xu(6,kq,t.currentAuthType==t.authType.SmartOTP)),rs(3),No("ngClass",Xu(8,kq,t.currentAuthType==t.authType.SmartOTPCode)),rs(2),No("ngClass",Xu(10,kq,t.currentAuthType==t.authType.SmartOTPCode))}}function Rq(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"div",6),jo(2,"img",14),Vo(),Lo(3,"div",8),jo(4,"div",9),Lo(5,"div",10),Lo(6,"div",11),Wo("click",function(){Oe(t);const e=Yo(2);return e.selectAuthType(e.authType.mConnect)}),Lo(7,"div",12),Lo(8,"span",13),Ea(9,"mConnected"),Vo(),Vo(),Vo(),Vo(),Lo(10,"div",10),Lo(11,"div",11),Wo("click",function(){Oe(t);const e=Yo(2);return e.selectAuthType(e.authType.mCodeOTP)}),Lo(12,"div",12),Lo(13,"span",13),Ea(14,"mCode"),Vo(),Vo(),Vo(),Vo(),jo(15,"div",9),Vo(),Ho()}if(2&t){const t=Yo(2);rs(6),No("ngClass",Xu(4,kq,t.currentAuthType==t.authType.mConnect)),rs(2),No("ngClass",Xu(6,kq,t.currentAuthType==t.authType.mConnect)),rs(3),No("ngClass",Xu(8,kq,t.currentAuthType==t.authType.mCodeOTP)),rs(2),No("ngClass",Xu(10,kq,t.currentAuthType==t.authType.mCodeOTP))}}function Dq(t,e){if(1&t){const t=zo();Lo(0,"section"),Lo(1,"div",2),Lo(2,"div",3),Lo(3,"h3",4),Ea(4,"X\xe1c th\u1ef1c th\xf4ng tin"),Vo(),Lo(5,"h5"),Ea(6,"Qu\xfd kh\xe1ch vui l\xf2ng ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c x\xe1c th\u1ef1c"),Vo(),Vo(),Fo(7,Pq,16,12,"ng-container",1),Fo(8,Rq,16,12,"ng-container",1),Lo(9,"div",3),Lo(10,"button",5),Wo("click",function(){return Oe(t),Yo().requestOtp()}),Ea(11," Ti\u1ebfp t\u1ee5c "),Vo(),Vo(),Vo(),Vo()}if(2&t){const t=Yo();rs(7),No("ngIf",t.checkAuthType(t.authType.SmartOTP)||t.checkAuthType(t.authType.SmartOTPCode)),rs(1),No("ngIf",t.checkAuthType(t.authType.mCodeOTP)||t.checkAuthType(t.authType.mConnect))}}const Fq=function(t){return{last:t}};function Bq(t,e){if(1&t&&jo(0,"input",21),2&t){const t=e.last,n=e.index,r=Yo(3);No("ngClass",Xu(2,Fq,t))("value",r.showOtp(n))}}function Oq(t,e){if(1&t){const t=zo();Uo(0),Lo(1,"div",2),Lo(2,"div",3),Lo(3,"h3",15),Ea(4),Vo(),Vo(),Lo(5,"div",16),Lo(6,"div"),Fo(7,Bq,1,4,"input",17),Vo(),Lo(8,"app-keyboard-number",18),Wo("inputNumberEvent",function(e){return Oe(t),Yo(2).recieveInputNumber(e)}),Vo(),Lo(9,"button",19),Wo("click",function(){return Oe(t),Yo(2).verifyOtp()}),Ea(10," X\xe1c nh\u1eadn "),Vo(),Lo(11,"div",20),Ea(12,"G\u1eedi l\u1ea1i m\xe3 (60s)"),Vo(),Vo(),Vo(),Ho()}if(2&t){const t=Yo(2);rs(4),Sa(" ",t.currentAuthType==t.authType.mCodeOTP?"Vui l\xf2ng nh\u1eadp m\xe3 mCode":t.currentAuthType==t.authType.SmartOTPCode?"Vui l\xf2ng nh\u1eadp Smart OTP Code":"Vui l\xf2ng nh\u1eadp m\xe3 OTP"," "),rs(3),No("ngForOf",t.arrOtp),rs(2),No("disabled",t.otp.length<6)}}function Nq(t,e){if(1&t&&(Uo(0),Lo(1,"div",22),Lo(2,"div"),Lo(3,"h3",15),Ea(4," Sacombank \u0111\xe3 g\u1eedi y\xeau c\u1ea7u x\xe1c th\u1ef1c giao d\u1ecbch \u0111\u1ebfn "),jo(5,"br"),Ea(6," \u1ee9ng d\u1ee5ng Sacombank Pay c\u1ee7a Qu\xfd kh\xe1ch "),Vo(),Lo(7,"h5"),Ea(8," Vui l\xf2ng ki\u1ec3m tra v\xe0 duy\u1ec7t giao d\u1ecbch th\xf4ng qua \u1ee9ng d\u1ee5ng Sacombank Pay "),Vo(),Vo(),Lo(9,"div",23),jo(10,"ng-lottie",24),Vo(),Vo(),Ho()),2&t){const t=Yo(2);rs(10),No("options",t.faceLoad)}}function Mq(t,e){if(1&t&&(Lo(0,"section"),Fo(1,Oq,13,3,"ng-container",1),Fo(2,Nq,11,1,"ng-container",1),Vo()),2&t){const t=Yo();rs(1),No("ngIf",t.currentService==t.service.OnBoarding||t.currentService==t.service.UpdateCardId&&(t.currentAuthType==t.authType.SMSOTP||t.currentAuthType==t.authType.DeviceToken||t.currentAuthType==t.authType.SMSTTT||t.currentAuthType==t.authType.AdvToken||t.currentAuthType==t.authType.SmartOTPCode||t.currentAuthType==t.authType.mCodeOTP)),rs(1),No("ngIf",!(t.currentService==t.service.OnBoarding||t.currentService==t.service.UpdateCardId&&(t.currentAuthType==t.authType.SMSOTP||t.currentAuthType==t.authType.DeviceToken||t.currentAuthType==t.authType.SMSTTT||t.currentAuthType==t.authType.AdvToken||t.currentAuthType==t.authType.SmartOTPCode||t.currentAuthType==t.authType.mCodeOTP)))}}let Lq=(()=>{class t{constructor(t){this.aioSvc=t,this.otp=[],this.arrOtp=[...Array(6).keys()],this.idEKYCPersonal="",this.cifNo="",this.service=Ig,this.authType=Rg,this.authenInfo=[],this.step=1,this.faceLoad={path:"assets/all-in-one/shared/img/notifications.json"},t.currentStep=Tg.VerifyOtp,this.currentStep=this.aioSvc.currentSerice==Ig.OnBoarding?4:3,this.currentAuthType=this.aioSvc.currentSerice==Ig.OnBoarding?this.authType.SMSTTT:this.authType.None,this.currentService=this.aioSvc.currentSerice}ngOnInit(){this.aioSvc.currentSerice==Ig.OnBoarding?this.requestOtp():this.aioSvc.currentSerice==Ig.UpdateCardId&&this.getAuthMethod()}selectAuthType(t){this.currentAuthType=t,console.log(this.currentAuthType)}checkAuthType(t){let e=!1;return this.authenInfo.length>0&&(e=this.authenInfo.findIndex(e=>e.authType==t.toString())>-1),e}getAuthMethod(){let t=new mg;t.cifNo=this.aioSvc.checkCustomerByIdNoResponseData.cifNo,t.customerID=this.aioSvc.checkCustomerByIdNoResponseData.legalId,t.customerType="1",t.mobileNo=this.aioSvc.checkCustomerByIdNoResponseData.mobileNumber,this.aioSvc.getAuthMethod(t).subscribe(t=>{console.log(t),this.aioSvc.isProcessing=!1,t.respCode?"00"!=t.respCode?this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra getAuthMethod"):t.data.authInfo?(this.authenInfo=t.data.authInfo,1==this.authenInfo.length?(this.currentAuthType=this.authenInfo[0].authType,this.requestOtp()):this.currentAuthType=this.authType.None):this.aioSvc.alert("Kh\xf4ng t\u1ed3n t\u1ea1i ph\u01b0\u01a1ng th\u1ee9c x\xe1c th\u1ef1c"):this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra getAuthMethod")},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra getAuthMethod"),this.aioSvc.isProcessing=!1})}requestOtp(){if(this.currentAuthType==this.authType.mConnect||this.currentAuthType==this.authType.SmartOTP)this.verifyOtp();else{let t=new dg;t.customerID=this.aioSvc.customerInfo.customerID,t.cifNo="1",t.authType=this.currentAuthType,t.customerType="1",t.mobileNo=this.aioSvc.customerInfo.mobileNo,t.channel="DigiZone",t.smsContent="NGANN",this.aioSvc.requestOtp(t).subscribe(t=>{console.log("requestOtp",t),this.aioSvc.isProcessing=!1,t.respCode?(this.step=2,"00"!=t.respCode&&this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra requestOtp")):this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra requestOtp")},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra requestOtp"),this.aioSvc.isProcessing=!1})}}verifyOtp(){let t=new pg;t.authCode=this.otp.join(""),t.customerID=this.aioSvc.customerInfo.customerID,t.cifNo="1",t.authType=this.currentAuthType,t.customerType="1",t.mobileNo=this.aioSvc.customerInfo.mobileNo,t.serviceType="OA",this.aioSvc.verifyOtp(t).subscribe(t=>{console.log("verifyOtp",t),this.aioSvc.isProcessing=!1,t.respCode?"00"!=t.respCode?this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra verifyOtp"):this.aioSvc.next():this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra verifyOtp")},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra verifyOtp"),this.aioSvc.isProcessing=!1})}confirm(){this.verifyOtp()}recieveInputNumber(t){this.handleInputNumber(t)}handleInputNumber(t){if(console.log(t),"c"==t)this.otp.splice(-1),console.log(this.otp);else{if(this.otp.length>=6)return;this.otp.push(t),console.log(this.otp)}}showOtp(t){return this.otp[t]?this.otp[t]:""}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-verify-otp"]],decls:4,vars:3,consts:[[3,"currentStep"],[4,"ngIf"],[1,"container"],[1,"text-center"],[1,"mb-3","font-weight-bold"],[1,"btn-next","mt-4","w-25",3,"click"],[1,"text-center","py-4"],["src","assets/all-in-one/shared/img/spay-logo.png","alt","",1,"w-10"],[1,"row"],[1,"col-2"],[1,"col-4"],[1,"bg-white","p-3","account-type","mb-4",3,"ngClass","click"],[1,"d-inline-block"],[1,"account-type-label",3,"ngClass"],["src","assets/all-in-one/shared/img/mSign-logo.png","alt","",1,"w-10"],[1,"font-weight-bold","mb-4"],[1,"text-center","keyboard-box"],["type","text","class","otp-item","disabled","","readonly","","autofocus","false",3,"ngClass","value",4,"ngFor","ngForOf"],[3,"inputNumberEvent"],[1,"btn-next","mt-4",3,"disabled","click"],[1,"pt-4","text-sacom"],["type","text","disabled","","readonly","","autofocus","false",1,"otp-item",3,"ngClass","value"],[1,"container","text-center"],[1,"w-25","mt-4",2,"margin-inline","auto"],[3,"options"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Fo(2,Dq,12,2,"section",1),Fo(3,Mq,3,2,"section",1)),2&t&&(rs(1),No("currentStep",4),rs(1),No("ngIf",e.currentService==e.service.UpdateCardId&&(e.checkAuthType(e.authType.mCodeOTP)||e.checkAuthType(e.authType.mConnect)||e.checkAuthType(e.authType.SmartOTP)||e.checkAuthType(e.authType.SmartOTPCode))&&1==e.step),rs(1),No("ngIf",2==e.step))},directives:[jS,iA,ql,Ul,zl,yA,BS],styles:['.keyboard-box[_ngcontent-%COMP%]{max-width:450px;margin:0 auto}.btn-next[_ngcontent-%COMP%]{width:100%;height:100%;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#2a81d0;background-color:#fff;font-size:1.2rem;background-color:#2a81d0;color:#fff;height:60px}.otp-item[_ngcontent-%COMP%]{background-color:#fff;display:inline-block;width:62.5px;height:62.5px;margin-right:15px;border:1px solid #dcdcdc;border-radius:6px;font-size:28px;line-height:62.5px;text-align:center}.otp-item.last[_ngcontent-%COMP%]{margin-right:0}.btn-next[_ngcontent-%COMP%]:disabled:hover{background-color:#2a81d0}.btn-next[_ngcontent-%COMP%]:disabled{opacity:.5}.account-type-label[_ngcontent-%COMP%]:before{content:"";height:20px;width:20px;border-radius:30px;background-color:#f0f2f7;display:inline-block;margin-right:7px;vertical-align:sub}.active.account-type-label[_ngcontent-%COMP%]:before{background-color:#fff;border:5px solid #2a81d0;transition:.2s ease-out}.account-type[_ngcontent-%COMP%]{cursor:pointer;border:2px solid #fff;border-radius:6px}.active.account-type[_ngcontent-%COMP%]{border:2px solid #2a81d0;transition:.2s ease-in-out}.text-sacom[_ngcontent-%COMP%]{color:#1b54c3!important;line-height:2rem}.w-10[_ngcontent-%COMP%]{width:10%!important}']}),t})();function Vq(t,e){1&t&&(Uo(0),jo(1,"i",14),Ho())}function jq(t,e){1&t&&(Uo(0),jo(1,"i",14),Ho())}function Uq(t,e){1&t&&(Uo(0),jo(1,"i",14),Ho())}function Hq(t,e){1&t&&(Uo(0),jo(1,"i",14),Ho())}let zq=(()=>{class t{constructor(t){this.aioSvc=t,this.updateCustomerRequestData=new xg,this.checkCustomerSDBRequestData=new Eg,this.customerUpdateData=new _g,this.currentDocInfo=new Sg,this.checkCustomerByIdNoResponseData=new Ag,this.aioSvc.currentStep=Tg.RecheckInfo}ngOnInit(){this.checkCustomerByIdNo(this.aioSvc.customerInfo.customerIDOld)}checkCustomerByIdNo(t){console.log(this.aioSvc.customerInfo),this.aioSvc.checkCustomerByIdNo(t).subscribe(t=>{console.log(t),"14"==t.respCode?(this.aioSvc.isProcessing=!1,this.aioSvc.alert("Qu\xfd kh\xe1ch ch\u01b0a c\xf3 t\xe0i kho\u1ea3n t\u1ea1i Sacombank <br> Qu\xfd kh\xe1ch vui l\xf2ng quay v\u1ec1 trang ch\u1ee7 v\xe0 ch\u1ecdn ch\u1ee9c n\u0103ng M\u1edf t\xe0i kho\u1ea3n n\u1ebfu c\xf3 nhu c\u1ea7u")):"00"==t.respCode?(this.aioSvc.checkCustomerByIdNoResponseData=t.data,this.currentDocInfo.customerID=this.aioSvc.checkCustomerByIdNoResponseData.legalId,this.currentDocInfo.address=this.aioSvc.checkCustomerByIdNoResponseData.street,this.currentDocInfo.issueDate=TS.strToDate(this.aioSvc.checkCustomerByIdNoResponseData.legalIssDate),this.currentDocInfo.issuePlace=this.aioSvc.checkCustomerByIdNoResponseData.legalIssAuth,this.updateCustomerRequestData.branchCode=this.aioSvc.checkCustomerByIdNoResponseData.companyBook,this.updateCustomerRequestData.cifNo=this.aioSvc.checkCustomerByIdNoResponseData.cifNo,this.updateCustomerRequestData.mobileNo=this.aioSvc.checkCustomerByIdNoResponseData.mobileNumber,this.aioSvc.isProcessing=!1):(this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra checkCustomerByIdNo"),this.aioSvc.isProcessing=!1)},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra checkCustomerByIdNo"),this.aioSvc.isProcessing=!1,console.log(t)})}confirm(){this.aioSvc.next()}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-recheck-info"]],decls:72,vars:13,consts:[[3,"currentStep"],[1,"container"],[1,"text-center","mb-4"],[1,"font-weight-bold","mb-2"],[1,"text-sacom"],[1,"row","p-3","bg-white","box"],[1,"col-6","left"],["colspan","2"],[1,"font-weight-bold","m-0"],[1,"font-weight-bold"],[4,"ngIf"],[1,"col-6"],[1,"text-center","pt-5"],[1,"btn-next",3,"click"],[1,"fas","fa-spinner","fa-pulse"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Lo(2,"section"),Lo(3,"div",1),Lo(4,"div",2),Lo(5,"h3",3),Ea(6," Xin ch\xe0o, "),Lo(7,"span",4),Ea(8),Vo(),Vo(),Ea(9," Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra l\u1ea1i th\xf4ng tin "),Vo(),Lo(10,"div",5),Lo(11,"div",6),Lo(12,"div"),Lo(13,"table"),Lo(14,"tr"),Lo(15,"td",7),Lo(16,"h5",8),Ea(17,"Th\xf4ng tin hi\u1ec7n t\u1ea1i"),Vo(),Vo(),Vo(),Lo(18,"tr"),Lo(19,"td"),Ea(20,"S\u1ed1 CCCD"),Vo(),Lo(21,"td",9),Ea(22),Fo(23,Vq,2,0,"ng-container",10),Vo(),Vo(),Lo(24,"tr"),Lo(25,"td"),Ea(26,"Ng\xe0y c\u1ea5p"),Vo(),Lo(27,"td",9),Ea(28),Fo(29,jq,2,0,"ng-container",10),Vo(),Vo(),Lo(30,"tr"),Lo(31,"td"),Ea(32,"N\u01a1i c\u1ea5p"),Vo(),Lo(33,"td",9),Ea(34),Fo(35,Uq,2,0,"ng-container",10),Vo(),Vo(),Lo(36,"tr"),Lo(37,"td"),Ea(38,"\u0110\u1ecba ch\u1ec9 th\u01b0\u1eddng tr\xfa"),Vo(),Lo(39,"td",9),Ea(40),Fo(41,Hq,2,0,"ng-container",10),Vo(),Vo(),Vo(),Vo(),Vo(),Lo(42,"div",11),Lo(43,"div"),Lo(44,"table"),Lo(45,"tr"),Lo(46,"td",7),Lo(47,"h5",8),Ea(48,"Th\xf4ng tin \u0111i\u1ec1u ch\u1ec9nh"),Vo(),Vo(),Vo(),Lo(49,"tr"),Lo(50,"td"),Ea(51,"S\u1ed1 CCCD"),Vo(),Lo(52,"td",9),Ea(53),Vo(),Vo(),Lo(54,"tr"),Lo(55,"td"),Ea(56,"Ng\xe0y c\u1ea5p"),Vo(),Lo(57,"td",9),Ea(58),Vo(),Vo(),Lo(59,"tr"),Lo(60,"td"),Ea(61,"N\u01a1i c\u1ea5p"),Vo(),Lo(62,"td",9),Ea(63,"CTCCSQLHCVTTXH"),Vo(),Vo(),Lo(64,"tr"),Lo(65,"td"),Ea(66,"\u0110\u1ecba ch\u1ec9 th\u01b0\u1eddng tr\xfa"),Vo(),Lo(67,"td",9),Ea(68),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Lo(69,"div",12),Lo(70,"button",13),Wo("click",function(){return e.confirm()}),Ea(71,"X\xe1c nh\u1eadn"),Vo(),Vo(),Vo(),Vo()),2&t&&(rs(1),No("currentStep",2),rs(7),_a(e.aioSvc.customerInfo.fullName),rs(14),Sa(" ",e.currentDocInfo.customerID," "),rs(1),No("ngIf",!e.currentDocInfo.customerID),rs(5),Sa(" ",e.currentDocInfo.issueDate," "),rs(1),No("ngIf",!e.currentDocInfo.issueDate),rs(5),Sa(" ",e.currentDocInfo.issuePlace," "),rs(1),No("ngIf",!e.currentDocInfo.issuePlace),rs(5),Sa(" ",e.currentDocInfo.address," "),rs(1),No("ngIf",!e.currentDocInfo.address),rs(12),Sa(" ",e.aioSvc.customerInfo.customerID," "),rs(5),Sa(" ",e.aioSvc.customerInfo.issueDate," "),rs(10),Sa(" ",e.aioSvc.customerInfo.address," "))},directives:[jS,iA,ql],styles:[".box[_ngcontent-%COMP%]{border-radius:1rem}.box[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem}mat-checkbox[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], mat-option[_ngcontent-%COMP%]{font-family:Manrope,sans-serif!important}table[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{width:100%}.fill-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 1rem}.col-12[_ngcontent-%COMP%]{border-top:2px solid #f0f2f7}.left[_ngcontent-%COMP%]{border-right:2px solid #f0f2f7}.fill-input[_ngcontent-%COMP%]{max-width:100%;height:60px;border:none;border-bottom:2px solid #f0f2f7;line-height:60px;color:#7c828b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.my-class[_ngcontent-%COMP%]{background-color:red!important}.btn-next[_ngcontent-%COMP%]{width:200px;height:60px;outline:none;border:1px solid #2a81d0;border-radius:4px;color:#fff;background-color:#2a81d0;font-size:1.2rem}.btn-next[_ngcontent-%COMP%]:hover{background-color:#1966af}.btn-next[_ngcontent-%COMP%]:disabled:hover{background-color:#2a81d0}.btn-next[_ngcontent-%COMP%]:disabled{opacity:.5}.img-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100px;border-radius:1rem}.text-sacom[_ngcontent-%COMP%]{color:#1b54c3!important}"]}),t})(),Kq=(()=>{class t{constructor(t){this.aioSvc=t,this.customerUpdateData=new _g,this.updateCustomerRequestData=new xg,t.currentStep=Tg.UpdateCustomerInfo}ngOnInit(){this.updateCustomer()}updateCustomer(){let t=new Eg;t.cifNo="",t.customerID=this.aioSvc.checkCustomerByIdNoResponseData.legalId,t.customerType="1",t.dob=this.aioSvc.checkCustomerByIdNoResponseData.birthIncorpDate,t.fullName=this.aioSvc.checkCustomerByIdNoResponseData.name,t.isEdit=!0,t.mobileNo=this.aioSvc.checkCustomerByIdNoResponseData.mobileNumber,t.serviceType="CI",t.email=this.aioSvc.checkCustomerByIdNoResponseData.email,t.residentAddress=this.aioSvc.checkCustomerByIdNoResponseData.street,this.aioSvc.checkCustomerSDB(t).subscribe(t=>{"00"==t.respCode?(this.customerUpdateData.customerIDOld=this.aioSvc.customerInfo.customerIDOld,this.customerUpdateData.customerIDNew=this.aioSvc.customerInfo.customerID,this.customerUpdateData.expDate=TS.formatDate(this.aioSvc.customerInfo.expireDate),this.customerUpdateData.issDate=TS.formatDate(this.aioSvc.customerInfo.issueDate),this.customerUpdateData.issPlace=TS.issPlace,this.customerUpdateData.isUpdateAddress=!1,this.customerUpdateData.qrContent="thisIsQRContent",this.customerUpdateData.addressCityCode="",this.customerUpdateData.addressCityName="",this.customerUpdateData.addressDistrictCode="",this.customerUpdateData.addressDistrictName="",this.customerUpdateData.addressStreet="",this.customerUpdateData.addressWardCode="",this.customerUpdateData.addressWardName="",this.updateCustomerRequestData.customerUpdate=this.customerUpdateData,this.updateCustomerRequestData.cifNo=this.aioSvc.checkCustomerByIdNoResponseData.cifNo,this.updateCustomerRequestData.branchCode=this.aioSvc.checkCustomerByIdNoResponseData.companyBook,this.updateCustomerRequestData.mobileNo=this.aioSvc.checkCustomerByIdNoResponseData.mobileNumber,this.aioSvc.updateCustomer(this.updateCustomerRequestData).subscribe(t=>{console.log(t),this.aioSvc.isProcessing=!1,"00"==t.respCode?this.aioSvc.next():this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra updateCustomer")},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra updateCustomer"),this.aioSvc.isProcessing=!1,console.log(t)})):(this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra checkCustomerSDB"),this.aioSvc.isProcessing=!1)},t=>{this.aioSvc.alert("C\xf3 l\u1ed7i x\u1ea3y ra checkCustomerSDB"),this.aioSvc.isProcessing=!1})}}return t.\u0275fac=function(e){return new(e||t)(Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-update-card-id"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})(),qq=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Kt({type:t,selectors:[["app-update-success"]],decls:10,vars:2,consts:[[3,"currentStep","isShowStepper"],[1,"container"],[1,"text-center"],[1,"font-weight-bold","mb-4"],[1,"text-center","py-4"]],template:function(t,e){1&t&&(jo(0,"app-aio-header"),jo(1,"app-aio-back-and-stepper",0),Lo(2,"section"),Lo(3,"div",1),Lo(4,"div",2),Lo(5,"h3",3),Ea(6," Xin ch\xfac m\u1eebng, Qu\xfd kh\xe1ch \u0111\xe3 c\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng "),Vo(),Vo(),Lo(7,"div",4),Lo(8,"h4"),Ea(9,"M\u1eddi Qu\xfd kh\xe1ch \u0111\xe1nh gi\xe1 tr\u1ea3i nghi\u1ec7m d\u1ecbch v\u1ee5"),Vo(),Vo(),Vo(),Vo()),2&t&&(rs(1),No("currentStep",3)("isShowStepper",!1))},directives:[jS,iA],styles:[""]}),t})(),Wq=(()=>{class t{constructor(t,e){this.actRoute=t,this.aioSvc=e,this.deviceID="",this.sessionID="",this.deviceID=this.actRoute.snapshot.params.deviceid,this.sessionID=this.actRoute.snapshot.params.sessionid}ngOnInit(){this.aioSvc.verifySessionID(this.deviceID,this.sessionID).subscribe(t=>{console.log(t)},t=>{})}}return t.\u0275fac=function(e){return new(e||t)(Oo(Uf),Oo(kS))},t.\u0275cmp=Kt({type:t,selectors:[["app-collect"]],decls:1,vars:0,template:function(t,e){1&t&&Ea(0,"\nHello\n")},encapsulation:2}),t})();const Gq=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Kt({type:t,selectors:[["app-home"]],decls:12,vars:0,consts:[[1,""],[1,"container"],[1,"row","pt-5"],[1,"col-2"],["routerLink","/aio",1,"btn","btn-warning","w-100"],[1,"btn","btn-warning","w-100"],["routerLink","/mk",1,"btn","btn-warning","w-100"]],template:function(t,e){1&t&&(Lo(0,"section",0),Lo(1,"div",1),Lo(2,"div",2),Lo(3,"div",3),Lo(4,"button",4),Ea(5," All in one "),Vo(),Vo(),Lo(6,"div",3),Lo(7,"button",5),Ea(8,"Physical"),Vo(),Vo(),Lo(9,"div",3),Lo(10,"button",6),Ea(11,"MK"),Vo(),Vo(),Vo(),Vo(),Vo())},directives:[lm],styles:[""]}),t})()},{path:"collect/:deviceid/:sessionid",component:Wq},{path:"aio",component:LS,children:[{path:"",redirectTo:"dash-board",pathMatch:"full"},{path:"dash-board",component:ZC},{path:"on-boarding",component:PA},{path:"on-boarding/account-and-alert",component:TA},{path:"on-boarding/end",component:kA},{path:"update-card-id/recheck-info",component:zq},{path:"update-card-id",component:Kq},{path:"update-card-id/update-success",component:qq},{path:"shared",component:Iq,children:[{path:"capture-guide",component:LH},{path:"capture-face",component:MH},{path:"input-finger",component:Mz},{path:"collect-card-id",component:qH},{path:"verify-customer-info",component:Tq},{path:"fill-info",component:Dz},{path:"verify-otp",component:Lq},{path:"mobile-capture-card-id/:deviceid/:sessionid",component:Aq},{path:"back-and-stepper",component:iA},{path:"vk",component:rz}]}]}];let $q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Em.forRoot(Gq)],Em]}),t})(),Xq=(()=>{class t{constructor(){this.title="sdb-eid-fe"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Kt({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&jo(0,"router-outlet")},directives:[pm],styles:["[_ngcontent-%COMP%]:not(i){font-family:Manrope,sans-serif!important}"]}),t})();const Qq={provide:new Qn("mat-select-scroll-strategy"),deps:[wy],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let Yq=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[Qq],imports:[[Jl,Ey,iE,Ux],Mv,m_,iE,Ux]}),t})(),Zq=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[nE,Ux],Ux]}),t})();class Jq{constructor(t={}){this.backdropBorderRadius=t.backdropBorderRadius,this.backdropBackgroundColour=t.backdropBackgroundColour,this.fullScreenBackdrop=t.fullScreenBackdrop,this.animationType=t.animationType,this.primaryColour=t.primaryColour,this.secondaryColour=t.secondaryColour,this.tertiaryColour=t.tertiaryColour}}class tW{constructor(t){this.config=t,this.loadingConfig=this.config||new Jq}}tW.\u0275fac=function(t){return new(t||tW)(dr("loadingConfig",8))},tW.\u0275prov=ft({token:tW,factory:tW.\u0275fac,providedIn:"root"}),tW.ngInjectableDef=ft({factory:function(){return new tW(dr("loadingConfig",8))},token:tW,providedIn:"root"});let eW=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:"loadingConfig",useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Jl]]}),t})();var nW=n(3052),rW=n.n(nW);function iW(){return rW()}let sW=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t,bootstrap:[Xq]}),t.\u0275inj=dt({providers:[Bz,{provide:p_,useValue:{appearance:"outline"}}],imports:[[QC,Mh,$q,HH,ug,qC,Mx,ME,WC,nz,Yq,vA,Zq,wE,eW.forRoot({animationType:"pulse"}),OS.forRoot({player:iW}),fq,tq.forRoot()]]}),t})();const oW=[{provide:"BASE_URL",useFactory:function(){return document.getElementsByTagName("base")[0].href},deps:[]}];(function(){if(Jc)throw new Error("Cannot enable prod mode after platform setup.");Zc=!1})(),Oh(oW).bootstrapModule(sW).catch(t=>console.error(t))},2480:()=>{},8369:()=>{},3655:()=>{},5118:()=>{},3438:()=>{},5559:()=>{}},t=>{"use strict";t(t.s=9565)}]);